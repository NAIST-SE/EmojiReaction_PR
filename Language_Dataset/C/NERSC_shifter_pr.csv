NERSC/shifter,https://github.com/NERSC/shifter,15,2016-03-02T07:08:20Z,2016-03-02T07:08:29Z,2016-03-02T07:08:36Z,MERGED,True,15,5,5,https://github.com/dmjacobsen,Fix volume map dbl free,2,[],https://github.com/NERSC/shifter/pull/15,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/15,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,17,2016-04-08T18:38:52Z,2016-04-08T18:39:06Z,2016-04-08T18:39:53Z,MERGED,True,42,60,7,https://github.com/dmjacobsen,Remove node context prefix,2,[],https://github.com/NERSC/shifter/pull/17,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/17,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,19,2016-04-13T16:56:04Z,2016-04-15T04:02:00Z,2016-04-15T04:02:00Z,MERGED,True,46,14,2,https://github.com/scanon,Fix for issue #18.  Close #18,1,[],https://github.com/NERSC/shifter/pull/19,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/19,"Fix for issue #18.
Close #18","Fix for issue #18.
Close #18",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,19,2016-04-13T16:56:04Z,2016-04-15T04:02:00Z,2016-04-15T04:02:00Z,MERGED,True,46,14,2,https://github.com/scanon,Fix for issue #18.  Close #18,1,[],https://github.com/NERSC/shifter/pull/19,https://github.com/dmjacobsen,2,https://github.com/NERSC/shifter/pull/19#issuecomment-209582790,"Fix for issue #18.
Close #18","Hi Shane,
Is anything required to update an existing database of tags to add the system component?  Or should an existing database be already OK?
-Doug",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,20,2016-04-13T18:31:23Z,2016-04-15T04:01:48Z,2016-04-15T04:01:48Z,MERGED,True,19,20,1,https://github.com/dmjacobsen,Fix slurm int,2,[],https://github.com/NERSC/shifter/pull/20,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/20,correct when extern step is initialized based on SchedMD/slurm@c280838,correct when extern step is initialized based on SchedMD/slurm@c280838,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,21,2016-04-18T18:52:40Z,2016-04-18T18:52:48Z,2016-04-27T00:36:55Z,MERGED,True,18,1,1,https://github.com/dmjacobsen,add interlock between the extern step regular steps to ensure things …,1,[],https://github.com/NERSC/shifter/pull/21,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/21,…are properly ordered at setup,…are properly ordered at setup,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,22,2016-04-27T00:35:52Z,2016-04-27T00:36:25Z,2016-04-27T00:36:50Z,MERGED,True,127,9,3,https://github.com/dmjacobsen,initial support for parsing supported filesystems when making mount d…,1,[],https://github.com/NERSC/shifter/pull/22,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/22,…ecisions,…ecisions,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,23,2016-04-27T04:11:42Z,2016-04-27T04:41:39Z,2016-04-27T04:41:39Z,MERGED,True,28,39,10,https://github.com/scanon,Various fixes for the rpm build,4,[],https://github.com/NERSC/shifter/pull/23,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/23,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,24,2016-04-27T10:33:46Z,2016-04-28T00:01:38Z,2016-04-29T02:48:17Z,MERGED,True,75,0,3,https://github.com/miguelgila,Validate binaries,2,[],https://github.com/NERSC/shifter/pull/24,https://github.com/miguelgila,1,https://github.com/NERSC/shifter/pull/24,"Adding a simple validation for some binaries that are used by imageGateway. For instance, if mksquashfs is not present on the system, it is difficult understand that it is the missing piece just by looking at error message when the image conversion fails.
Alternatively this could be done at launch time, but I'm unsure how it would play with the whole workers/threads system.","Adding a simple validation for some binaries that are used by imageGateway. For instance, if mksquashfs is not present on the system, it is difficult understand that it is the missing piece just by looking at error message when the image conversion fails.
Alternatively this could be done at launch time, but I'm unsure how it would play with the whole workers/threads system.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,25,2016-04-27T23:26:59Z,2016-04-28T00:02:00Z,2016-07-23T16:28:22Z,MERGED,True,88,27,13,https://github.com/scanon,Merge travis and testing fixes,9,[],https://github.com/NERSC/shifter/pull/25,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/25,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,26,2016-04-28T00:02:55Z,2016-04-28T00:07:30Z,2016-04-28T00:08:53Z,MERGED,True,513,1078,126,https://github.com/dmjacobsen,Rpm,53,[],https://github.com/NERSC/shifter/pull/26,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/26,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,27,2016-04-28T00:57:14Z,2016-04-28T00:59:01Z,2016-07-23T16:28:17Z,MERGED,True,1,1,2,https://github.com/scanon,fix utils path,1,[],https://github.com/NERSC/shifter/pull/27,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/27,The utils stuff was in the old src path.  Moved it to shifter_imagegw.,The utils stuff was in the old src path.  Moved it to shifter_imagegw.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,28,2016-04-28T01:12:33Z,2016-04-28T01:15:35Z,2016-04-28T01:15:35Z,MERGED,True,2,2,1,https://github.com/scanon,Add notification,2,[],https://github.com/NERSC/shifter/pull/28,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/28,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,29,2016-04-28T14:27:16Z,2016-04-28T17:26:47Z,2016-04-28T17:26:47Z,CLOSED,False,253,190,14,https://github.com/dmjacobsen,Xfs update,22,[],https://github.com/NERSC/shifter/pull/29,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/29,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,30,2016-04-29T05:14:27Z,2016-04-29T05:20:24Z,2016-04-29T05:20:46Z,MERGED,True,299,218,21,https://github.com/dmjacobsen,Xfs update,40,[],https://github.com/NERSC/shifter/pull/30,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/30,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,31,2016-04-29T06:24:26Z,2016-04-30T17:03:13Z,2016-04-30T17:03:56Z,MERGED,True,3,0,1,https://github.com/chrissamuel,shifter.spec: create required configure script,2,[],https://github.com/NERSC/shifter/pull/31,https://github.com/chrissamuel,1,https://github.com/NERSC/shifter/pull/31,"Currently the spec file results in rpmbuild trying to call ./configure
before it actually exists. To fix this we call ./autogen.sh first from
the %prep section.","Currently the spec file results in rpmbuild trying to call ./configure
before it actually exists. To fix this we call ./autogen.sh first from
the %prep section.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,31,2016-04-29T06:24:26Z,2016-04-30T17:03:13Z,2016-04-30T17:03:56Z,MERGED,True,3,0,1,https://github.com/chrissamuel,shifter.spec: create required configure script,2,[],https://github.com/NERSC/shifter/pull/31,https://github.com/dmjacobsen,2,https://github.com/NERSC/shifter/pull/31#issuecomment-215979165,"Currently the spec file results in rpmbuild trying to call ./configure
before it actually exists. To fix this we call ./autogen.sh first from
the %prep section.",merged this with a minor modification to conditionally run autogen.sh (if configure doesn't exist),True,{}
NERSC/shifter,https://github.com/NERSC/shifter,33,2016-04-29T11:53:38Z,2016-04-29T12:00:29Z,2016-04-29T12:00:50Z,MERGED,True,6,9,1,https://github.com/dmjacobsen,Remove etc local,3,[],https://github.com/NERSC/shifter/pull/33,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/33,"get rid of implicit bind mount to bring external /etc into container /etc/local, and simply copy the files needed beforehand","get rid of implicit bind mount to bring external /etc into container /etc/local, and simply copy the files needed beforehand",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,34,2016-04-30T17:06:46Z,2016-04-30T17:14:56Z,2016-04-30T17:15:13Z,MERGED,True,52,30,9,https://github.com/dmjacobsen,Reorganizebuild,2,[],https://github.com/NERSC/shifter/pull/34,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/34,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,35,2016-05-01T21:17:03Z,2016-05-02T15:26:47Z,2016-05-02T15:46:28Z,MERGED,True,46,7,5,https://github.com/dmjacobsen,Coveralls,20,[],https://github.com/NERSC/shifter/pull/35,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/35,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,35,2016-05-01T21:17:03Z,2016-05-02T15:26:47Z,2016-05-02T15:46:28Z,MERGED,True,46,7,5,https://github.com/dmjacobsen,Coveralls,20,[],https://github.com/NERSC/shifter/pull/35,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/35#issuecomment-216073632,,Changes Unknown when pulling dc4cd46 on coveralls into * on master*.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,35,2016-05-01T21:17:03Z,2016-05-02T15:26:47Z,2016-05-02T15:46:28Z,MERGED,True,46,7,5,https://github.com/dmjacobsen,Coveralls,20,[],https://github.com/NERSC/shifter/pull/35,https://github.com/coveralls,3,https://github.com/NERSC/shifter/pull/35#issuecomment-216107818,,Changes Unknown when pulling 6fdf1b7 on coveralls into * on master*.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,36,2016-05-02T15:45:59Z,2016-05-02T15:46:09Z,2016-05-02T15:46:27Z,MERGED,True,10,6,4,https://github.com/dmjacobsen,Build corrections,4,[],https://github.com/NERSC/shifter/pull/36,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/36,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,37,2016-05-02T19:22:56Z,2016-05-02T19:23:07Z,2016-05-02T19:23:07Z,MERGED,True,446,5,7,https://github.com/dmjacobsen,Sphinx doc,7,[],https://github.com/NERSC/shifter/pull/37,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/37,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,38,2016-05-02T21:17:56Z,2016-05-02T21:21:27Z,2016-05-02T23:19:38Z,MERGED,True,20,1,2,https://github.com/dmjacobsen,make slurm support optional,1,[],https://github.com/NERSC/shifter/pull/38,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/38,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,38,2016-05-02T21:17:56Z,2016-05-02T21:21:27Z,2016-05-02T23:19:38Z,MERGED,True,20,1,2,https://github.com/dmjacobsen,make slurm support optional,1,[],https://github.com/NERSC/shifter/pull/38,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/38#issuecomment-216393268,,Coverage remained the same at 57.23% when pulling 5c74d04 on sphinx-doc into f55d0c8 on master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,41,2016-05-07T17:12:05Z,2016-05-08T10:07:10Z,2016-05-08T10:08:57Z,MERGED,True,42,25,2,https://github.com/dmjacobsen,Write docker layers to different loc,3,[],https://github.com/NERSC/shifter/pull/41,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/41,"use temporary filenames for download cache writing (as well as image generation) to prevent multiple workers on same machine from clobbering each other.
also add more logic to remove those temporary files should something go wrong.
this should resolve issue #9","use temporary filenames for download cache writing (as well as image generation) to prevent multiple workers on same machine from clobbering each other.
also add more logic to remove those temporary files should something go wrong.
this should resolve issue #9",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,41,2016-05-07T17:12:05Z,2016-05-08T10:07:10Z,2016-05-08T10:08:57Z,MERGED,True,42,25,2,https://github.com/dmjacobsen,Write docker layers to different loc,3,[],https://github.com/NERSC/shifter/pull/41,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/41#issuecomment-217652973,"use temporary filenames for download cache writing (as well as image generation) to prevent multiple workers on same machine from clobbering each other.
also add more logic to remove those temporary files should something go wrong.
this should resolve issue #9",Coverage decreased (-0.02%) to 57.206% when pulling deb3a99 on writeDockerLayersToDifferentLoc into 598d1d3 on master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,41,2016-05-07T17:12:05Z,2016-05-08T10:07:10Z,2016-05-08T10:08:57Z,MERGED,True,42,25,2,https://github.com/dmjacobsen,Write docker layers to different loc,3,[],https://github.com/NERSC/shifter/pull/41,https://github.com/coveralls,3,https://github.com/NERSC/shifter/pull/41#issuecomment-217707289,"use temporary filenames for download cache writing (as well as image generation) to prevent multiple workers on same machine from clobbering each other.
also add more logic to remove those temporary files should something go wrong.
this should resolve issue #9",Coverage decreased (-0.02%) to 57.209% when pulling 2e79903 on writeDockerLayersToDifferentLoc into 598d1d3 on master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,42,2016-05-08T08:22:40Z,2016-05-08T10:16:49Z,2016-05-08T10:21:29Z,MERGED,True,222,176,18,https://github.com/dmjacobsen,Gunicorn,16,[],https://github.com/NERSC/shifter/pull/42,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/42,"need to start preparing init scripts and service files for gunicorn.
goal behind this is to improve scalability of image manager, ease process management, integrate logging","need to start preparing init scripts and service files for gunicorn.
goal behind this is to improve scalability of image manager, ease process management, integrate logging",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,42,2016-05-08T08:22:40Z,2016-05-08T10:16:49Z,2016-05-08T10:21:29Z,MERGED,True,222,176,18,https://github.com/dmjacobsen,Gunicorn,16,[],https://github.com/NERSC/shifter/pull/42,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/42#issuecomment-217703431,"need to start preparing init scripts and service files for gunicorn.
goal behind this is to improve scalability of image manager, ease process management, integrate logging",Coverage increased (+0.09%) to 57.321% when pulling 1b2b03d on gunicorn into 598d1d3 on master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,42,2016-05-08T08:22:40Z,2016-05-08T10:16:49Z,2016-05-08T10:21:29Z,MERGED,True,222,176,18,https://github.com/dmjacobsen,Gunicorn,16,[],https://github.com/NERSC/shifter/pull/42,https://github.com/scanon,3,https://github.com/NERSC/shifter/pull/42#issuecomment-217706620,"need to start preparing init scripts and service files for gunicorn.
goal behind this is to improve scalability of image manager, ease process management, integrate logging",Let's add something to the README about how to start things up using gunicorn and then I think it is good.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,42,2016-05-08T08:22:40Z,2016-05-08T10:16:49Z,2016-05-08T10:21:29Z,MERGED,True,222,176,18,https://github.com/dmjacobsen,Gunicorn,16,[],https://github.com/NERSC/shifter/pull/42,https://github.com/coveralls,4,https://github.com/NERSC/shifter/pull/42#issuecomment-217707891,"need to start preparing init scripts and service files for gunicorn.
goal behind this is to improve scalability of image manager, ease process management, integrate logging",Coverage increased (+0.07%) to 57.3% when pulling 845e8c6 on gunicorn into 598d1d3 on master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,43,2016-05-09T14:06:55Z,2016-05-09T14:07:06Z,2016-05-09T14:27:24Z,CLOSED,False,2,0,1,https://github.com/dmjacobsen,Fix mount type,3,[],https://github.com/NERSC/shifter/pull/43,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/43,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,44,2016-05-09T14:26:10Z,2016-05-09T14:26:37Z,2016-05-09T14:27:22Z,MERGED,True,571,229,16,https://github.com/dmjacobsen,Improve shifterimg,25,[],https://github.com/NERSC/shifter/pull/44,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/44,"block shifterimg when pulling images and display status
add default image type capability (remove need to type docker constantly
centralize some code for filtering","block shifterimg when pulling images and display status
add default image type capability (remove need to type docker constantly
centralize some code for filtering",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,45,2016-05-09T14:27:39Z,2016-05-20T19:30:34Z,2016-05-20T21:45:16Z,MERGED,True,63,26,1,https://github.com/dmjacobsen,Mongo resilience,5,[],https://github.com/NERSC/shifter/pull/45,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/45,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,45,2016-05-09T14:27:39Z,2016-05-20T19:30:34Z,2016-05-20T21:45:16Z,MERGED,True,63,26,1,https://github.com/dmjacobsen,Mongo resilience,5,[],https://github.com/NERSC/shifter/pull/45,https://github.com/dmjacobsen,2,https://github.com/NERSC/shifter/pull/45#issuecomment-218201624,,"Hi Shane,
Could you re-instate that entrypoint in the test docker image so the builds will pass again?",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,45,2016-05-09T14:27:39Z,2016-05-20T19:30:34Z,2016-05-20T21:45:16Z,MERGED,True,63,26,1,https://github.com/dmjacobsen,Mongo resilience,5,[],https://github.com/NERSC/shifter/pull/45,https://github.com/coveralls,3,https://github.com/NERSC/shifter/pull/45#issuecomment-218387774,,Coverage increased (+0.09%) to 57.754% when pulling 5493f12 on mongoResilience into 2b58ea3 on master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,47,2016-05-11T01:40:59Z,2016-05-11T06:38:47Z,2016-05-11T06:39:04Z,MERGED,True,20,3,7,https://github.com/dmjacobsen,Minor fixes for dockerv2,5,[],https://github.com/NERSC/shifter/pull/47,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/47,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,47,2016-05-11T01:40:59Z,2016-05-11T06:38:47Z,2016-05-11T06:39:04Z,MERGED,True,20,3,7,https://github.com/dmjacobsen,Minor fixes for dockerv2,5,[],https://github.com/NERSC/shifter/pull/47,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/47#issuecomment-218343411,,Changes Unknown when pulling 1671985 on minorFixesForDockerv2 into * on master*.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,48,2016-05-14T13:52:01Z,2016-05-30T15:48:10Z,2016-05-30T16:32:57Z,MERGED,True,360,52,3,https://github.com/dmjacobsen,Transfer using tmp file,4,[],https://github.com/NERSC/shifter/pull/48,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/48,"this should remove some race conditions between live running jobs and a re-pull of an existing image by doing a transfer to a temporary filename and then doing a mv at the end
the transfer.py code was largely restructured to achieve it and so should get some careful examination prior to merging.  I've included a number of synthetic tests, and it seems to merge in well with the existing tests (meaning, I don't think we've broken anything here), but probably a manual test prior to merging is in order.","this should remove some race conditions between live running jobs and a re-pull of an existing image by doing a transfer to a temporary filename and then doing a mv at the end
the transfer.py code was largely restructured to achieve it and so should get some careful examination prior to merging.  I've included a number of synthetic tests, and it seems to merge in well with the existing tests (meaning, I don't think we've broken anything here), but probably a manual test prior to merging is in order.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,48,2016-05-14T13:52:01Z,2016-05-30T15:48:10Z,2016-05-30T16:32:57Z,MERGED,True,360,52,3,https://github.com/dmjacobsen,Transfer using tmp file,4,[],https://github.com/NERSC/shifter/pull/48,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/48#issuecomment-219221776,"this should remove some race conditions between live running jobs and a re-pull of an existing image by doing a transfer to a temporary filename and then doing a mv at the end
the transfer.py code was largely restructured to achieve it and so should get some careful examination prior to merging.  I've included a number of synthetic tests, and it seems to merge in well with the existing tests (meaning, I don't think we've broken anything here), but probably a manual test prior to merging is in order.",Coverage increased (+1.6%) to 59.236% when pulling 6ccae50 on transferUsingTmpFile into 1533904 on master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,48,2016-05-14T13:52:01Z,2016-05-30T15:48:10Z,2016-05-30T16:32:57Z,MERGED,True,360,52,3,https://github.com/dmjacobsen,Transfer using tmp file,4,[],https://github.com/NERSC/shifter/pull/48,https://github.com/dmjacobsen,3,https://github.com/NERSC/shifter/pull/48#issuecomment-220756924,"this should remove some race conditions between live running jobs and a re-pull of an existing image by doing a transfer to a temporary filename and then doing a mv at the end
the transfer.py code was largely restructured to achieve it and so should get some careful examination prior to merging.  I've included a number of synthetic tests, and it seems to merge in well with the existing tests (meaning, I don't think we've broken anything here), but probably a manual test prior to merging is in order.",merged master back into this PR to keep it from drifting too far,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,48,2016-05-14T13:52:01Z,2016-05-30T15:48:10Z,2016-05-30T16:32:57Z,MERGED,True,360,52,3,https://github.com/dmjacobsen,Transfer using tmp file,4,[],https://github.com/NERSC/shifter/pull/48,https://github.com/coveralls,4,https://github.com/NERSC/shifter/pull/48#issuecomment-220757054,"this should remove some race conditions between live running jobs and a re-pull of an existing image by doing a transfer to a temporary filename and then doing a mv at the end
the transfer.py code was largely restructured to achieve it and so should get some careful examination prior to merging.  I've included a number of synthetic tests, and it seems to merge in well with the existing tests (meaning, I don't think we've broken anything here), but probably a manual test prior to merging is in order.",Coverage increased (+1.5%) to 59.402% when pulling 8d10249 on transferUsingTmpFile into f9b3f29 on master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,49,2016-05-14T20:14:47Z,2016-05-14T20:14:53Z,2016-05-14T20:15:50Z,MERGED,True,1,0,1,https://github.com/dmjacobsen,make sure PENDING state blocks interactive pull as well,1,[],https://github.com/NERSC/shifter/pull/49,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/49,left out pending state when pulling,left out pending state when pulling,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,51,2016-05-18T13:39:17Z,2016-05-20T21:25:18Z,2016-05-20T21:45:15Z,MERGED,True,40,6,2,https://github.com/dmjacobsen,Dockerv2 layer extraction,3,[],https://github.com/NERSC/shifter/pull/51,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/51,"This pull request addresses issue #50 by identifying all symlinks in a layer to be applied, determine if any symlinks are going to replace an existing directory, and if so, removes the directory (to all the symlink to be created).  Automated tar options to do similar were too destructive and deleted more directories than was required.
It also removes the need for the tar wrapper by explicitly opening up permissions to all files in each layer after the layer is expanded.","This pull request addresses issue #50 by identifying all symlinks in a layer to be applied, determine if any symlinks are going to replace an existing directory, and if so, removes the directory (to all the symlink to be created).  Automated tar options to do similar were too destructive and deleted more directories than was required.
It also removes the need for the tar wrapper by explicitly opening up permissions to all files in each layer after the layer is expanded.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,51,2016-05-18T13:39:17Z,2016-05-20T21:25:18Z,2016-05-20T21:45:15Z,MERGED,True,40,6,2,https://github.com/dmjacobsen,Dockerv2 layer extraction,3,[],https://github.com/NERSC/shifter/pull/51,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/51#issuecomment-220039595,"This pull request addresses issue #50 by identifying all symlinks in a layer to be applied, determine if any symlinks are going to replace an existing directory, and if so, removes the directory (to all the symlink to be created).  Automated tar options to do similar were too destructive and deleted more directories than was required.
It also removes the need for the tar wrapper by explicitly opening up permissions to all files in each layer after the layer is expanded.",Coverage increased (+0.1%) to 57.765% when pulling 0c8da6d on dockerv2LayerExtraction into e192217 on master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,52,2016-05-19T23:38:53Z,2016-05-21T00:24:43Z,2016-05-21T00:24:43Z,CLOSED,False,462,157,20,https://github.com/scanon,Feature - Image Expire and other minor improvements,12,[],https://github.com/NERSC/shifter/pull/52,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/52,"Adds feature to remove/expire an image
Adds concept of an admin user defined in the config file
Adds tests for auth
Adds tests for munge
Adds mock unmunge mainly for testing
munge wrapper detects error from reuse
Fix to docker-compose","Adds feature to remove/expire an image
Adds concept of an admin user defined in the config file
Adds tests for auth
Adds tests for munge
Adds mock unmunge mainly for testing
munge wrapper detects error from reuse
Fix to docker-compose",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,52,2016-05-19T23:38:53Z,2016-05-21T00:24:43Z,2016-05-21T00:24:43Z,CLOSED,False,462,157,20,https://github.com/scanon,Feature - Image Expire and other minor improvements,12,[],https://github.com/NERSC/shifter/pull/52,https://github.com/scanon,2,https://github.com/NERSC/shifter/pull/52#issuecomment-220665437,"Adds feature to remove/expire an image
Adds concept of an admin user defined in the config file
Adds tests for auth
Adds tests for munge
Adds mock unmunge mainly for testing
munge wrapper detects error from reuse
Fix to docker-compose",The checks passed in my repo.  It looks like Travis isn't testing the latest version.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,52,2016-05-19T23:38:53Z,2016-05-21T00:24:43Z,2016-05-21T00:24:43Z,CLOSED,False,462,157,20,https://github.com/scanon,Feature - Image Expire and other minor improvements,12,[],https://github.com/NERSC/shifter/pull/52,https://github.com/scanon,3,https://github.com/NERSC/shifter/pull/52#issuecomment-220747006,"Adds feature to remove/expire an image
Adds concept of an admin user defined in the config file
Adds tests for auth
Adds tests for munge
Adds mock unmunge mainly for testing
munge wrapper detects error from reuse
Fix to docker-compose",I'm going to issue a new PR after merging some of the other pending changes.  Closing this one.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,53,2016-05-20T22:30:16Z,2016-05-20T22:30:40Z,2016-05-20T22:33:04Z,MERGED,True,2,2,2,https://github.com/dmjacobsen,Avoid ssh in testbuild,2,[],https://github.com/NERSC/shifter/pull/53,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/53,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,56,2016-05-24T23:30:13Z,2016-05-25T00:00:02Z,2016-05-29T11:30:03Z,MERGED,True,2343,1078,15,https://github.com/dmjacobsen,Slurmint,18,[],https://github.com/NERSC/shifter/pull/56,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/56,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,56,2016-05-24T23:30:13Z,2016-05-25T00:00:02Z,2016-05-29T11:30:03Z,MERGED,True,2343,1078,15,https://github.com/dmjacobsen,Slurmint,18,[],https://github.com/NERSC/shifter/pull/56,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/56#issuecomment-221433266,,Coverage remained the same at 57.854% when pulling 15c2e13 on slurmint into f9b3f29 on master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,57,2016-05-27T19:26:42Z,2016-05-28T00:29:29Z,2016-07-23T16:28:25Z,MERGED,True,55,12,3,https://github.com/scanon,Locurl,3,[],https://github.com/NERSC/shifter/pull/57,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/57,Add ability to specify a url in the location block.  Also reworked logic for parsing the image tag to better handle various forms.,Add ability to specify a url in the location block.  Also reworked logic for parsing the image tag to better handle various forms.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,57,2016-05-27T19:26:42Z,2016-05-28T00:29:29Z,2016-07-23T16:28:25Z,MERGED,True,55,12,3,https://github.com/scanon,Locurl,3,[],https://github.com/NERSC/shifter/pull/57,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/57#issuecomment-222234438,Add ability to specify a url in the location block.  Also reworked logic for parsing the image tag to better handle various forms.,Coverage increased (+0.5%) to 58.378% when pulling e944887 on scanon:locurl into cb03ddc on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,57,2016-05-27T19:26:42Z,2016-05-28T00:29:29Z,2016-07-23T16:28:25Z,MERGED,True,55,12,3,https://github.com/scanon,Locurl,3,[],https://github.com/NERSC/shifter/pull/57,https://github.com/dmjacobsen,3,https://github.com/NERSC/shifter/pull/57#issuecomment-222279441,Add ability to specify a url in the location block.  Also reworked logic for parsing the image tag to better handle various forms.,looks good to me,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,58,2016-05-28T01:57:58Z,2016-05-28T20:01:22Z,2016-05-28T22:04:48Z,MERGED,True,90,62,10,https://github.com/mej,"Work toward fixing ""make dist"" and ""make distcheck""",3,[],https://github.com/NERSC/shifter/pull/58,https://github.com/mej,1,https://github.com/NERSC/shifter/pull/58,"These commits will make ""make dist"" work correctly to generate a source tarball.  I've almost got ""make distcheck"" working as well, though the tests are failing at present (at least on my system), so there's more to come to make it fully work, but this gets us mostly there!  :-)","These commits will make ""make dist"" work correctly to generate a source tarball.  I've almost got ""make distcheck"" working as well, though the tests are failing at present (at least on my system), so there's more to come to make it fully work, but this gets us mostly there!  :-)",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,58,2016-05-28T01:57:58Z,2016-05-28T20:01:22Z,2016-05-28T22:04:48Z,MERGED,True,90,62,10,https://github.com/mej,"Work toward fixing ""make dist"" and ""make distcheck""",3,[],https://github.com/NERSC/shifter/pull/58,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/58#issuecomment-222284408,"These commits will make ""make dist"" work correctly to generate a source tarball.  I've almost got ""make distcheck"" working as well, though the tests are failing at present (at least on my system), so there's more to come to make it fully work, but this gets us mostly there!  :-)",Coverage remained the same at 58.378% when pulling 0128dae on mej:master into 37081ec on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,58,2016-05-28T01:57:58Z,2016-05-28T20:01:22Z,2016-05-28T22:04:48Z,MERGED,True,90,62,10,https://github.com/mej,"Work toward fixing ""make dist"" and ""make distcheck""",3,[],https://github.com/NERSC/shifter/pull/58,https://github.com/dmjacobsen,3,https://github.com/NERSC/shifter/pull/58#issuecomment-222285951,"These commits will make ""make dist"" work correctly to generate a source tarball.  I've almost got ""make distcheck"" working as well, though the tests are failing at present (at least on my system), so there's more to come to make it fully work, but this gets us mostly there!  :-)","this looks great.  i'll pull it locally and do some checking, but the autobuild passed and all the changes look reasonable and correct to me.  It's nice to see the automake files cleaned up -- I'm no expert (or even apprentice) with Automake so it's nice to see it cleaned up.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,58,2016-05-28T01:57:58Z,2016-05-28T20:01:22Z,2016-05-28T22:04:48Z,MERGED,True,90,62,10,https://github.com/mej,"Work toward fixing ""make dist"" and ""make distcheck""",3,[],https://github.com/NERSC/shifter/pull/58,https://github.com/dmjacobsen,4,https://github.com/NERSC/shifter/pull/58#issuecomment-222327056,"These commits will make ""make dist"" work correctly to generate a source tarball.  I've almost got ""make distcheck"" working as well, though the tests are failing at present (at least on my system), so there's more to come to make it fully work, but this gets us mostly there!  :-)",this looks good to me; i'll merge it in.  i think the distcheck errors are that distcheck is running the tests from a different cwd than they expect to use,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,58,2016-05-28T01:57:58Z,2016-05-28T20:01:22Z,2016-05-28T22:04:48Z,MERGED,True,90,62,10,https://github.com/mej,"Work toward fixing ""make dist"" and ""make distcheck""",3,[],https://github.com/NERSC/shifter/pull/58,https://github.com/mej,5,https://github.com/NERSC/shifter/pull/58#issuecomment-222331765,"These commits will make ""make dist"" work correctly to generate a source tarball.  I've almost got ""make distcheck"" working as well, though the tests are failing at present (at least on my system), so there's more to come to make it fully work, but this gets us mostly there!  :-)","That's my suspicion as well; just ran out of time to dig into it before I had to head home.  I'll dive in head-first on Tuesday and finish up! :-)
Thanks for merging!",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,59,2016-05-29T11:27:50Z,2016-05-30T15:38:33Z,2016-05-30T16:32:54Z,MERGED,True,84,13,2,https://github.com/dmjacobsen,deal with whiteouts,1,[],https://github.com/NERSC/shifter/pull/59,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/59,handle trans-layer deletions properly (issue #55),handle trans-layer deletions properly (issue #55),True,{}
NERSC/shifter,https://github.com/NERSC/shifter,59,2016-05-29T11:27:50Z,2016-05-30T15:38:33Z,2016-05-30T16:32:54Z,MERGED,True,84,13,2,https://github.com/dmjacobsen,deal with whiteouts,1,[],https://github.com/NERSC/shifter/pull/59,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/59#issuecomment-222355908,handle trans-layer deletions properly (issue #55),Coverage increased (+0.3%) to 58.653% when pulling 7b4e552 on whiteoutFiles into 4c5c0eb on master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,61,2016-05-30T16:41:44Z,2016-05-30T17:07:42Z,2016-05-30T17:08:22Z,CLOSED,False,482,161,22,https://github.com/scanon,Feature imageexpire,18,[],https://github.com/NERSC/shifter/pull/61,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/61,This add support to allow admin users to expire images.  It also has a number of fixes and additional tests somewhat unrelated to the expire (mostly around auth).,This add support to allow admin users to expire images.  It also has a number of fixes and additional tests somewhat unrelated to the expire (mostly around auth).,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,61,2016-05-30T16:41:44Z,2016-05-30T17:07:42Z,2016-05-30T17:08:22Z,CLOSED,False,482,161,22,https://github.com/scanon,Feature imageexpire,18,[],https://github.com/NERSC/shifter/pull/61,https://github.com/dmjacobsen,2,https://github.com/NERSC/shifter/pull/61#issuecomment-222528036,This add support to allow admin users to expire images.  It also has a number of fixes and additional tests somewhat unrelated to the expire (mostly around auth).,"looks great!
i'm a little confused about the tar.sh -- i thought we didn't need it any more now that dockerv2 was taking care of that functionality (the manipulation of privileges post extraction)",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,61,2016-05-30T16:41:44Z,2016-05-30T17:07:42Z,2016-05-30T17:08:22Z,CLOSED,False,482,161,22,https://github.com/scanon,Feature imageexpire,18,[],https://github.com/NERSC/shifter/pull/61,https://github.com/dmjacobsen,3,https://github.com/NERSC/shifter/pull/61#issuecomment-222529017,This add support to allow admin users to expire images.  It also has a number of fixes and additional tests somewhat unrelated to the expire (mostly around auth).,this should have been fixed in #59,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,61,2016-05-30T16:41:44Z,2016-05-30T17:07:42Z,2016-05-30T17:08:22Z,CLOSED,False,482,161,22,https://github.com/scanon,Feature imageexpire,18,[],https://github.com/NERSC/shifter/pull/61,https://github.com/coveralls,4,https://github.com/NERSC/shifter/pull/61#issuecomment-222529104,This add support to allow admin users to expire images.  It also has a number of fixes and additional tests somewhat unrelated to the expire (mostly around auth).,Coverage increased (+4.3%) to 64.457% when pulling 306ebf9 on scanon:featureimageexpire into 63bd025 on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,61,2016-05-30T16:41:44Z,2016-05-30T17:07:42Z,2016-05-30T17:08:22Z,CLOSED,False,482,161,22,https://github.com/scanon,Feature imageexpire,18,[],https://github.com/NERSC/shifter/pull/61,https://github.com/scanon,5,https://github.com/NERSC/shifter/pull/61#issuecomment-222529106,This add support to allow admin users to expire images.  It also has a number of fixes and additional tests somewhat unrelated to the expire (mostly around auth).,Yes. I think it can be removed. The changes were left get from before.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,62,2016-06-01T00:39:18Z,2016-06-01T05:43:05Z,2016-06-02T16:11:55Z,MERGED,True,31,16,5,https://github.com/mej,"Remaining fixes for ""make distcheck"" to function properly.",1,[],https://github.com/NERSC/shifter/pull/62,https://github.com/mej,1,https://github.com/NERSC/shifter/pull/62,"These are the remaining fixes (namely fixing make check and make distclean) in order for make distcheck to succeed fully.
Since these are a bit more ""invasive,"" I put them on a branch, and I'm happy to target a branch for the PR if desired.","These are the remaining fixes (namely fixing make check and make distclean) in order for make distcheck to succeed fully.
Since these are a bit more ""invasive,"" I put them on a branch, and I'm happy to target a branch for the PR if desired.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,62,2016-06-01T00:39:18Z,2016-06-01T05:43:05Z,2016-06-02T16:11:55Z,MERGED,True,31,16,5,https://github.com/mej,"Remaining fixes for ""make distcheck"" to function properly.",1,[],https://github.com/NERSC/shifter/pull/62,https://github.com/dmjacobsen,2,https://github.com/NERSC/shifter/pull/62#issuecomment-222898390,"These are the remaining fixes (namely fixing make check and make distclean) in order for make distcheck to succeed fully.
Since these are a bit more ""invasive,"" I put them on a branch, and I'm happy to target a branch for the PR if desired.","i reworked some of this so that the tests could still be run from within the src dir (which is what we have travis-ci currently doing).  also made similar changes to wlm_integration/slurm and wlm_integration/slurm/test to get make distcheck working when slurm is discovered.
thanks for getting this going!",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,65,2016-06-06T06:05:36Z,2016-06-07T18:38:09Z,2016-06-07T19:01:02Z,MERGED,True,371,44,8,https://github.com/dmjacobsen,Unsetenv,6,[],https://github.com/NERSC/shifter/pull/65,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/65,"add ability to unsetenv site-specified environment variables prior to starting container, fix a couple of bugs in the environmental handling code","add ability to unsetenv site-specified environment variables prior to starting container, fix a couple of bugs in the environmental handling code",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,65,2016-06-06T06:05:36Z,2016-06-07T18:38:09Z,2016-06-07T19:01:02Z,MERGED,True,371,44,8,https://github.com/dmjacobsen,Unsetenv,6,[],https://github.com/NERSC/shifter/pull/65,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/65#issuecomment-223875814,"add ability to unsetenv site-specified environment variables prior to starting container, fix a couple of bugs in the environmental handling code",Coverage increased (+1.2%) to 61.332% when pulling 6e8013a on unsetenv into 693bdf8 on master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,66,2016-06-07T18:48:35Z,2016-06-07T19:00:10Z,2016-06-07T19:01:00Z,MERGED,True,15,1,2,https://github.com/dmjacobsen,prevent volume maps from using relative paths,2,[],https://github.com/NERSC/shifter/pull/66,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/66,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,66,2016-06-07T18:48:35Z,2016-06-07T19:00:10Z,2016-06-07T19:01:00Z,MERGED,True,15,1,2,https://github.com/dmjacobsen,prevent volume maps from using relative paths,2,[],https://github.com/NERSC/shifter/pull/66,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/66#issuecomment-224378715,,Coverage increased (+0.03%) to 61.362% when pulling 2c455ef on userMount into fab8f3b on master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,67,2016-06-08T15:54:28Z,2016-06-10T14:50:40Z,2016-07-23T16:27:51Z,MERGED,True,671,169,23,https://github.com/scanon,[WIP] Featureimageexpire,20,[],https://github.com/NERSC/shifter/pull/67,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/67,Do not merge yet.,Do not merge yet.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,67,2016-06-08T15:54:28Z,2016-06-10T14:50:40Z,2016-07-23T16:27:51Z,MERGED,True,671,169,23,https://github.com/scanon,[WIP] Featureimageexpire,20,[],https://github.com/NERSC/shifter/pull/67,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/67#issuecomment-224637739,Do not merge yet.,Coverage increased (+4.3%) to 65.638% when pulling f62684b on scanon:featureimageexpire into 15930be on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,67,2016-06-08T15:54:28Z,2016-06-10T14:50:40Z,2016-07-23T16:27:51Z,MERGED,True,671,169,23,https://github.com/scanon,[WIP] Featureimageexpire,20,[],https://github.com/NERSC/shifter/pull/67,https://github.com/coveralls,3,https://github.com/NERSC/shifter/pull/67#issuecomment-224769678,Do not merge yet.,Coverage increased (+5.0%) to 66.319% when pulling 1d0458c on scanon:featureimageexpire into 15930be on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,69,2016-06-10T16:04:38Z,2016-06-10T16:14:45Z,2016-06-28T01:03:28Z,MERGED,True,22,6,1,https://github.com/dmjacobsen,fix segfault when cgroup/tasks cannot be opened; allow further means …,1,[],https://github.com/NERSC/shifter/pull/69,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/69,…of getting job gid,…of getting job gid,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,69,2016-06-10T16:04:38Z,2016-06-10T16:14:45Z,2016-06-28T01:03:28Z,MERGED,True,22,6,1,https://github.com/dmjacobsen,fix segfault when cgroup/tasks cannot be opened; allow further means …,1,[],https://github.com/NERSC/shifter/pull/69,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/69#issuecomment-225225710,…of getting job gid,Coverage remained the same at 66.319% when pulling 0f34d43 on slurmintbug into 4103e3e on master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,70,2016-06-13T22:45:28Z,2016-06-14T05:57:12Z,2016-07-18T17:20:04Z,MERGED,True,2,409,6,https://github.com/scanon,Cleanup,4,[],https://github.com/NERSC/shifter/pull/70,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/70,Remove remnants of tar.sh and dockerhub.py,Remove remnants of tar.sh and dockerhub.py,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,70,2016-06-13T22:45:28Z,2016-06-14T05:57:12Z,2016-07-18T17:20:04Z,MERGED,True,2,409,6,https://github.com/scanon,Cleanup,4,[],https://github.com/NERSC/shifter/pull/70,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/70#issuecomment-225732132,Remove remnants of tar.sh and dockerhub.py,Coverage decreased (-0.006%) to 66.313% when pulling 79b43d9 on scanon:cleanup into b312813 on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,71,2016-06-18T13:14:19Z,2016-07-05T06:38:39Z,2016-07-05T06:39:02Z,MERGED,True,25,9,4,https://github.com/miguelgila,Small fixes,10,[],https://github.com/NERSC/shifter/pull/71,https://github.com/miguelgila,1,https://github.com/NERSC/shifter/pull/71,Added two very small fixes that should help debugging.,Added two very small fixes that should help debugging.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,71,2016-06-18T13:14:19Z,2016-07-05T06:38:39Z,2016-07-05T06:39:02Z,MERGED,True,25,9,4,https://github.com/miguelgila,Small fixes,10,[],https://github.com/NERSC/shifter/pull/71,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/71#issuecomment-226942085,Added two very small fixes that should help debugging.,Coverage increased (+0.08%) to 66.389% when pulling 0ffad62 on small_fixes into a87edb4 on master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,71,2016-06-18T13:14:19Z,2016-07-05T06:38:39Z,2016-07-05T06:39:02Z,MERGED,True,25,9,4,https://github.com/miguelgila,Small fixes,10,[],https://github.com/NERSC/shifter/pull/71,https://github.com/coveralls,3,https://github.com/NERSC/shifter/pull/71#issuecomment-228751830,Added two very small fixes that should help debugging.,Coverage increased (+0.09%) to 66.408% when pulling 4020f65 on small_fixes into a87edb4 on master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,71,2016-06-18T13:14:19Z,2016-07-05T06:38:39Z,2016-07-05T06:39:02Z,MERGED,True,25,9,4,https://github.com/miguelgila,Small fixes,10,[],https://github.com/NERSC/shifter/pull/71,https://github.com/dmjacobsen,4,https://github.com/NERSC/shifter/pull/71#issuecomment-228920432,Added two very small fixes that should help debugging.,"Hi Miguel,
Thanks for the PR.  Can you say what the ""reload(sys)"" is for?
It is not recommended by the python documentation:
It is generally not very useful to reload built-in or dynamically loaded modules. Reloading sys, __main__, builtins and other key modules is not recommended. In many cases extension modules are not designed to be initialized more than once, and may fail in arbitrary ways when reloaded.
(https://docs.python.org/2/library/functions.html#reload)
Thanks,
Doug",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,71,2016-06-18T13:14:19Z,2016-07-05T06:38:39Z,2016-07-05T06:39:02Z,MERGED,True,25,9,4,https://github.com/miguelgila,Small fixes,10,[],https://github.com/NERSC/shifter/pull/71,https://github.com/miguelgila,5,https://github.com/NERSC/shifter/pull/71#issuecomment-228964743,Added two very small fixes that should help debugging.,"Hi Doug,
for some reason, yesterday I didn't manage to get this working other than with the hack of reloading the package.
However, your message got me thinking and I this morning I found a way to make it work without modifying Shifter code.  I've made a start script that has this:
export PYTHONPATH=/opt/shifter-imagegw/:/opt/shifter-imagegw/20160627:${PYTHONPATH}

And I've created a file on /opt/shifter-imagegw/sitecustomize.py that contains
import sys; sys.setdefaultencoding('utf-8')

With this, the problem seems solved and the hack no longer needed. I've consequently updated this PR.
Miguel",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,71,2016-06-18T13:14:19Z,2016-07-05T06:38:39Z,2016-07-05T06:39:02Z,MERGED,True,25,9,4,https://github.com/miguelgila,Small fixes,10,[],https://github.com/NERSC/shifter/pull/71,https://github.com/coveralls,6,https://github.com/NERSC/shifter/pull/71#issuecomment-228965330,Added two very small fixes that should help debugging.,Coverage increased (+0.08%) to 66.395% when pulling 293a879 on small_fixes into a87edb4 on master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,73,2016-06-21T13:27:17Z,2016-06-21T13:28:45Z,2016-06-21T13:28:45Z,MERGED,True,0,1,1,https://github.com/dmjacobsen,do not install tar.sh,1,[],https://github.com/NERSC/shifter/pull/73,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/73,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,74,2016-06-28T00:59:05Z,2016-06-28T00:59:12Z,2016-06-28T00:59:21Z,MERGED,True,68,66,1,https://github.com/dmjacobsen,Fixtar,3,[],https://github.com/NERSC/shifter/pull/74,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/74,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,75,2016-07-06T03:46:55Z,2016-07-06T03:47:02Z,2016-07-06T03:47:02Z,MERGED,True,116,1,6,https://github.com/dmjacobsen,Cle6,3,[],https://github.com/NERSC/shifter/pull/75,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/75,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,76,2016-07-07T20:31:03Z,2016-07-07T20:31:08Z,2016-07-17T21:11:47Z,MERGED,True,13,0,2,https://github.com/dmjacobsen,fix segfault when multiple bind mounts specified in same line with ea…,1,[],https://github.com/NERSC/shifter/pull/76,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/76,…ch having different flags,…ch having different flags,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,78,2016-07-17T21:11:16Z,2016-07-17T21:11:29Z,2016-07-17T21:11:44Z,MERGED,True,5,3,1,https://github.com/dmjacobsen,fix bug where whiteout would overmatch in recent tarfile-based extrac…,1,[],https://github.com/NERSC/shifter/pull/78,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/78,…tion,…tion,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,79,2016-07-17T21:32:36Z,2016-07-18T05:46:19Z,2016-07-18T05:46:35Z,MERGED,True,750,88,10,https://github.com/dmjacobsen,Cle6,6,[],https://github.com/NERSC/shifter/pull/79,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/79,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,79,2016-07-17T21:32:36Z,2016-07-18T05:46:19Z,2016-07-18T05:46:35Z,MERGED,True,750,88,10,https://github.com/dmjacobsen,Cle6,6,[],https://github.com/NERSC/shifter/pull/79,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/79#issuecomment-233205658,,Coverage remained the same at 66.408% when pulling 9332fd3 on cle6 into 1fa61a0 on master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,80,2016-07-18T05:45:38Z,2016-07-18T05:45:42Z,2016-07-18T05:46:34Z,MERGED,True,47,0,3,https://github.com/dmjacobsen,add sles-compatible service files,1,[],https://github.com/NERSC/shifter/pull/80,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/80,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,81,2016-07-18T06:16:00Z,2016-07-18T06:16:05Z,2016-07-18T06:16:18Z,MERGED,True,44,0,2,https://github.com/dmjacobsen,Search path,2,[],https://github.com/NERSC/shifter/pull/81,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/81,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,82,2016-07-18T09:46:32Z,2016-07-18T09:48:17Z,2016-07-18T10:00:44Z,MERGED,True,397,49,4,https://github.com/dmjacobsen,Allow regular getpwuid,6,[],https://github.com/NERSC/shifter/pull/82,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/82,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,82,2016-07-18T09:46:32Z,2016-07-18T09:48:17Z,2016-07-18T10:00:44Z,MERGED,True,397,49,4,https://github.com/dmjacobsen,Allow regular getpwuid,6,[],https://github.com/NERSC/shifter/pull/82,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/82#issuecomment-233287998,,Coverage decreased (-0.3%) to 66.11% when pulling 2b3d462 on allowRegularGetpwuid into 5e1a402 on master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,83,2016-07-20T07:00:23Z,2016-08-08T07:55:54Z,2016-08-08T07:55:54Z,MERGED,True,15,3,1,https://github.com/miguelgila,Fixed Kernel config file location,3,[],https://github.com/NERSC/shifter/pull/83,https://github.com/miguelgila,1,https://github.com/NERSC/shifter/pull/83,"I've added a few modifications to be able to build RPMs on CLE6 on our systems. For some reason  arch/x86/configs/cray_ari_c_defconfig did not exist here and cannot find it, but /proc/config.gz is always there.","I've added a few modifications to be able to build RPMs on CLE6 on our systems. For some reason  arch/x86/configs/cray_ari_c_defconfig did not exist here and cannot find it, but /proc/config.gz is always there.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,83,2016-07-20T07:00:23Z,2016-08-08T07:55:54Z,2016-08-08T07:55:54Z,MERGED,True,15,3,1,https://github.com/miguelgila,Fixed Kernel config file location,3,[],https://github.com/NERSC/shifter/pull/83,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/83#issuecomment-233860077,"I've added a few modifications to be able to build RPMs on CLE6 on our systems. For some reason  arch/x86/configs/cray_ari_c_defconfig did not exist here and cannot find it, but /proc/config.gz is always there.",Coverage remained the same at 66.11% when pulling 786c9d4 on miguelgila:cle6_spec into 795ca8b on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,83,2016-07-20T07:00:23Z,2016-08-08T07:55:54Z,2016-08-08T07:55:54Z,MERGED,True,15,3,1,https://github.com/miguelgila,Fixed Kernel config file location,3,[],https://github.com/NERSC/shifter/pull/83,https://github.com/dmjacobsen,3,https://github.com/NERSC/shifter/pull/83#issuecomment-235065247,"I've added a few modifications to be able to build RPMs on CLE6 on our systems. For some reason  arch/x86/configs/cray_ari_c_defconfig did not exist here and cannot find it, but /proc/config.gz is always there.","hmmm, that's odd.  Where were you building the kernel mods?  I'd prefer to be able to build the kmods in a chroot'd image on the SMW, and not just on a booted compute node.  This commit makes that impossible (since /proc/config.gz is only coming from the current booted kernel, however is arguably the ""safest"")",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,83,2016-07-20T07:00:23Z,2016-08-08T07:55:54Z,2016-08-08T07:55:54Z,MERGED,True,15,3,1,https://github.com/miguelgila,Fixed Kernel config file location,3,[],https://github.com/NERSC/shifter/pull/83,https://github.com/miguelgila,4,https://github.com/NERSC/shifter/pull/83#issuecomment-238161557,"I've added a few modifications to be able to build RPMs on CLE6 on our systems. For some reason  arch/x86/configs/cray_ari_c_defconfig did not exist here and cannot find it, but /proc/config.gz is always there.","Doug, I originally built it on the booted compute node. The updated commit should allow you to build it as well in your environment. Can you test it and let me know? (Unfortunately I have no way of testing this right now, my CLE6 system is down and unreachable for a few days).",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,83,2016-07-20T07:00:23Z,2016-08-08T07:55:54Z,2016-08-08T07:55:54Z,MERGED,True,15,3,1,https://github.com/miguelgila,Fixed Kernel config file location,3,[],https://github.com/NERSC/shifter/pull/83,https://github.com/coveralls,5,https://github.com/NERSC/shifter/pull/83#issuecomment-238162107,"I've added a few modifications to be able to build RPMs on CLE6 on our systems. For some reason  arch/x86/configs/cray_ari_c_defconfig did not exist here and cannot find it, but /proc/config.gz is always there.",Coverage increased (+0.2%) to 66.316% when pulling 84ed642 on miguelgila:cle6_spec into 795ca8b on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,83,2016-07-20T07:00:23Z,2016-08-08T07:55:54Z,2016-08-08T07:55:54Z,MERGED,True,15,3,1,https://github.com/miguelgila,Fixed Kernel config file location,3,[],https://github.com/NERSC/shifter/pull/83,https://github.com/dmjacobsen,6,https://github.com/NERSC/shifter/pull/83#issuecomment-238166135,"I've added a few modifications to be able to build RPMs on CLE6 on our systems. For some reason  arch/x86/configs/cray_ari_c_defconfig did not exist here and cannot find it, but /proc/config.gz is always there.","OK, sounds good",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,84,2016-07-23T16:32:08Z,2016-07-27T05:56:49Z,2016-08-02T22:46:20Z,MERGED,True,184,57,6,https://github.com/scanon,Heartbeat,2,[],https://github.com/NERSC/shifter/pull/84,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/84,Please review this.  This adds some heartbeat support.  It also restructures dockerv2 to be slightly more object like.  There is still more than can be done here but this lays the foundation.,Please review this.  This adds some heartbeat support.  It also restructures dockerv2 to be slightly more object like.  There is still more than can be done here but this lays the foundation.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,84,2016-07-23T16:32:08Z,2016-07-27T05:56:49Z,2016-08-02T22:46:20Z,MERGED,True,184,57,6,https://github.com/scanon,Heartbeat,2,[],https://github.com/NERSC/shifter/pull/84,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/84#issuecomment-234727497,Please review this.  This adds some heartbeat support.  It also restructures dockerv2 to be slightly more object like.  There is still more than can be done here but this lays the foundation.,Coverage increased (+0.2%) to 66.322% when pulling 3b66da9 on scanon:heartbeat into 795ca8b on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,85,2016-07-25T19:16:49Z,2016-07-27T05:57:18Z,2016-07-29T21:08:41Z,MERGED,True,2,2,1,https://github.com/mej,"src/Makefile.am:  Fix ""make distcheck""",1,[],https://github.com/NERSC/shifter/pull/85,https://github.com/mej,1,https://github.com/NERSC/shifter/pull/85,This change fixes make distcheck by using the correct type of automake hook to chmod the shifter binary.,This change fixes make distcheck by using the correct type of automake hook to chmod the shifter binary.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,85,2016-07-25T19:16:49Z,2016-07-27T05:57:18Z,2016-07-29T21:08:41Z,MERGED,True,2,2,1,https://github.com/mej,"src/Makefile.am:  Fix ""make distcheck""",1,[],https://github.com/NERSC/shifter/pull/85,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/85#issuecomment-235098472,This change fixes make distcheck by using the correct type of automake hook to chmod the shifter binary.,Coverage remained the same at 66.11% when pulling 01cc83b on mej:fix-chmod-hook into 795ca8b on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,87,2016-07-26T18:30:34Z,2016-07-26T18:37:08Z,2016-07-27T05:59:20Z,MERGED,True,13,1,1,https://github.com/dmjacobsen,"fix bug in specifying multiple --volume opts, as well as blanking out…",1,[],https://github.com/NERSC/shifter/pull/87,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/87,… SHIFTER_VOLUME contributions if user manually specifies volume mounts,… SHIFTER_VOLUME contributions if user manually specifies volume mounts,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,87,2016-07-26T18:30:34Z,2016-07-26T18:37:08Z,2016-07-27T05:59:20Z,MERGED,True,13,1,1,https://github.com/dmjacobsen,"fix bug in specifying multiple --volume opts, as well as blanking out…",1,[],https://github.com/NERSC/shifter/pull/87,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/87#issuecomment-235363419,… SHIFTER_VOLUME contributions if user manually specifies volume mounts,Coverage decreased (-0.07%) to 66.035% when pulling 641db17 on fixvol into 795ca8b on master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,88,2016-07-27T05:55:22Z,2016-07-27T05:56:34Z,2016-07-27T05:59:19Z,MERGED,True,455,14,2,https://github.com/dmjacobsen,Shifterimgexpire,8,[],https://github.com/NERSC/shifter/pull/88,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/88,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,89,2016-07-27T18:25:04Z,2016-07-27T18:32:06Z,2016-08-02T22:46:40Z,MERGED,True,51,52,11,https://github.com/scanon,Expirefixes,5,[],https://github.com/NERSC/shifter/pull/89,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/89,This fixes a number of small issues integrating shifterimg and imagegw for expire requests.,This fixes a number of small issues integrating shifterimg and imagegw for expire requests.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,89,2016-07-27T18:25:04Z,2016-07-27T18:32:06Z,2016-08-02T22:46:40Z,MERGED,True,51,52,11,https://github.com/scanon,Expirefixes,5,[],https://github.com/NERSC/shifter/pull/89,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/89#issuecomment-235677139,This fixes a number of small issues integrating shifterimg and imagegw for expire requests.,Coverage increased (+0.1%) to 66.347% when pulling 2bb4031 on scanon:expirefixes into c907d90 on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,90,2016-07-27T18:32:30Z,2016-07-27T18:32:34Z,2016-07-27T18:32:34Z,MERGED,True,24,2,3,https://github.com/dmjacobsen,start prepping for 16.08,1,[],https://github.com/NERSC/shifter/pull/90,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/90,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,91,2016-07-27T18:33:35Z,2016-07-27T18:33:39Z,2016-07-27T18:33:39Z,MERGED,True,51,52,11,https://github.com/dmjacobsen,merge expirefixes in,7,[],https://github.com/NERSC/shifter/pull/91,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/91,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,96,2016-08-02T07:47:34Z,2016-08-02T07:48:16Z,2016-08-02T07:48:23Z,MERGED,True,251,3,4,https://github.com/dmjacobsen,Slurm sshd control,6,[],https://github.com/NERSC/shifter/pull/96,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/96,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,97,2016-08-02T16:57:12Z,2016-08-04T17:10:59Z,2016-08-05T05:07:06Z,MERGED,True,78,33,3,https://github.com/dmjacobsen,Prevent extraction collision,7,[],https://github.com/NERSC/shifter/pull/97,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/97,"Hi Shane,
Please review these changes, they are intended to fix two possible edge cases.


python2.6 tarfile doesn't like the empty tar layer that docker emits, so it is explicitly ignored


if a layer extraction fails for some reason (disk full, failure to open tar file, permissions issue, etc), I've had cases where re-extracting to the same directory can become the new failure


If exceptions occur, cleanup, this should help production facilities, we should add a debugging flag to explicitly keep intermediates","Hi Shane,
Please review these changes, they are intended to fix two possible edge cases.


python2.6 tarfile doesn't like the empty tar layer that docker emits, so it is explicitly ignored


if a layer extraction fails for some reason (disk full, failure to open tar file, permissions issue, etc), I've had cases where re-extracting to the same directory can become the new failure


If exceptions occur, cleanup, this should help production facilities, we should add a debugging flag to explicitly keep intermediates",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,97,2016-08-02T16:57:12Z,2016-08-04T17:10:59Z,2016-08-05T05:07:06Z,MERGED,True,78,33,3,https://github.com/dmjacobsen,Prevent extraction collision,7,[],https://github.com/NERSC/shifter/pull/97,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/97#issuecomment-236970894,"Hi Shane,
Please review these changes, they are intended to fix two possible edge cases.


python2.6 tarfile doesn't like the empty tar layer that docker emits, so it is explicitly ignored


if a layer extraction fails for some reason (disk full, failure to open tar file, permissions issue, etc), I've had cases where re-extracting to the same directory can become the new failure


If exceptions occur, cleanup, this should help production facilities, we should add a debugging flag to explicitly keep intermediates",Coverage increased (+0.02%) to 66.366% when pulling 806cd2b on preventExtractionCollision into 0b3a383 on master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,97,2016-08-02T16:57:12Z,2016-08-04T17:10:59Z,2016-08-05T05:07:06Z,MERGED,True,78,33,3,https://github.com/dmjacobsen,Prevent extraction collision,7,[],https://github.com/NERSC/shifter/pull/97,https://github.com/coveralls,3,https://github.com/NERSC/shifter/pull/97#issuecomment-236989162,"Hi Shane,
Please review these changes, they are intended to fix two possible edge cases.


python2.6 tarfile doesn't like the empty tar layer that docker emits, so it is explicitly ignored


if a layer extraction fails for some reason (disk full, failure to open tar file, permissions issue, etc), I've had cases where re-extracting to the same directory can become the new failure


If exceptions occur, cleanup, this should help production facilities, we should add a debugging flag to explicitly keep intermediates",Coverage increased (+0.04%) to 66.384% when pulling a30e343 on preventExtractionCollision into 0b3a383 on master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,97,2016-08-02T16:57:12Z,2016-08-04T17:10:59Z,2016-08-05T05:07:06Z,MERGED,True,78,33,3,https://github.com/dmjacobsen,Prevent extraction collision,7,[],https://github.com/NERSC/shifter/pull/97,https://github.com/coveralls,4,https://github.com/NERSC/shifter/pull/97#issuecomment-237160578,"Hi Shane,
Please review these changes, they are intended to fix two possible edge cases.


python2.6 tarfile doesn't like the empty tar layer that docker emits, so it is explicitly ignored


if a layer extraction fails for some reason (disk full, failure to open tar file, permissions issue, etc), I've had cases where re-extracting to the same directory can become the new failure


If exceptions occur, cleanup, this should help production facilities, we should add a debugging flag to explicitly keep intermediates",Coverage decreased (-0.7%) to 65.649% when pulling 373f479 on preventExtractionCollision into 0b3a383 on master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,97,2016-08-02T16:57:12Z,2016-08-04T17:10:59Z,2016-08-05T05:07:06Z,MERGED,True,78,33,3,https://github.com/dmjacobsen,Prevent extraction collision,7,[],https://github.com/NERSC/shifter/pull/97,https://github.com/coveralls,5,https://github.com/NERSC/shifter/pull/97#issuecomment-237545681,"Hi Shane,
Please review these changes, they are intended to fix two possible edge cases.


python2.6 tarfile doesn't like the empty tar layer that docker emits, so it is explicitly ignored


if a layer extraction fails for some reason (disk full, failure to open tar file, permissions issue, etc), I've had cases where re-extracting to the same directory can become the new failure


If exceptions occur, cleanup, this should help production facilities, we should add a debugging flag to explicitly keep intermediates",Coverage decreased (-0.2%) to 66.154% when pulling 859f1a0 on preventExtractionCollision into 0b3a383 on master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,98,2016-08-02T17:24:33Z,2016-08-02T17:24:41Z,2016-08-02T17:24:47Z,MERGED,True,12,19,3,https://github.com/dmjacobsen,do not error if mkfsXfsPath is not defined,1,[],https://github.com/NERSC/shifter/pull/98,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/98,do not require mkfsXfsPath to be defined,do not require mkfsXfsPath to be defined,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,99,2016-08-02T17:27:22Z,2016-08-02T17:27:26Z,2016-08-02T17:28:37Z,MERGED,True,12,19,3,https://github.com/dmjacobsen,Merge branch 'weakenXfsDependency' of github.com:NERSC/shifter into w…,1,[],https://github.com/NERSC/shifter/pull/99,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/99,…eakenXfsDependency,…eakenXfsDependency,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,100,2016-08-02T20:34:50Z,2016-08-02T20:35:06Z,2016-08-02T20:35:26Z,MERGED,True,58,8,2,https://github.com/dmjacobsen,Mount point creation control,2,[],https://github.com/NERSC/shifter/pull/100,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/100,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,101,2016-08-05T06:57:30Z,2016-08-05T19:44:28Z,2016-08-05T19:44:45Z,MERGED,True,101,25,4,https://github.com/dmjacobsen,Implicit latest,6,[],https://github.com/NERSC/shifter/pull/101,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/101,"Hi Shane,
Here are two more features to consider:


worker examines local/remote system to check validity of image after pulling manifest but before pulling; if image is valid then the pull is short circuited; right now the validity check is limited to existence, however combined with some of the work to improve resilience this is not a terribly bad assumption


the api will automatically impute a :latest tag if none was supplied by the user in the specific case of a docker request; this is to make the behavior of shifter more similar to docker.  combined with the addition of default types in udiRoot.conf earlier in the dev cycle, this allows the following to work:


shifter --image=ubuntu ...

which would be parsed by shifter and the imagegw to mean docker:ubuntu:latest
-Doug","Hi Shane,
Here are two more features to consider:


worker examines local/remote system to check validity of image after pulling manifest but before pulling; if image is valid then the pull is short circuited; right now the validity check is limited to existence, however combined with some of the work to improve resilience this is not a terribly bad assumption


the api will automatically impute a :latest tag if none was supplied by the user in the specific case of a docker request; this is to make the behavior of shifter more similar to docker.  combined with the addition of default types in udiRoot.conf earlier in the dev cycle, this allows the following to work:


shifter --image=ubuntu ...

which would be parsed by shifter and the imagegw to mean docker:ubuntu:latest
-Doug",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,101,2016-08-05T06:57:30Z,2016-08-05T19:44:28Z,2016-08-05T19:44:45Z,MERGED,True,101,25,4,https://github.com/dmjacobsen,Implicit latest,6,[],https://github.com/NERSC/shifter/pull/101,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/101#issuecomment-237772028,"Hi Shane,
Here are two more features to consider:


worker examines local/remote system to check validity of image after pulling manifest but before pulling; if image is valid then the pull is short circuited; right now the validity check is limited to existence, however combined with some of the work to improve resilience this is not a terribly bad assumption


the api will automatically impute a :latest tag if none was supplied by the user in the specific case of a docker request; this is to make the behavior of shifter more similar to docker.  combined with the addition of default types in udiRoot.conf earlier in the dev cycle, this allows the following to work:


shifter --image=ubuntu ...

which would be parsed by shifter and the imagegw to mean docker:ubuntu:latest
-Doug",Coverage increased (+0.2%) to 66.316% when pulling 26778d0 on implicitLatest into 76d0672 on master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,101,2016-08-05T06:57:30Z,2016-08-05T19:44:28Z,2016-08-05T19:44:45Z,MERGED,True,101,25,4,https://github.com/dmjacobsen,Implicit latest,6,[],https://github.com/NERSC/shifter/pull/101,https://github.com/dmjacobsen,3,https://github.com/NERSC/shifter/pull/101#issuecomment-237944808,"Hi Shane,
Here are two more features to consider:


worker examines local/remote system to check validity of image after pulling manifest but before pulling; if image is valid then the pull is short circuited; right now the validity check is limited to existence, however combined with some of the work to improve resilience this is not a terribly bad assumption


the api will automatically impute a :latest tag if none was supplied by the user in the specific case of a docker request; this is to make the behavior of shifter more similar to docker.  combined with the addition of default types in udiRoot.conf earlier in the dev cycle, this allows the following to work:


shifter --image=ubuntu ...

which would be parsed by shifter and the imagegw to mean docker:ubuntu:latest
-Doug","Based on a conversation with Shane, I'll merge this.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,102,2016-08-05T19:47:54Z,2016-08-05T19:48:00Z,2016-08-05T19:48:01Z,MERGED,True,240,26,8,https://github.com/dmjacobsen,update 16.08 RC line,11,[],https://github.com/NERSC/shifter/pull/102,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/102,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,104,2016-08-07T22:29:43Z,2016-08-08T17:26:24Z,2016-08-08T17:26:29Z,MERGED,True,8,7,2,https://github.com/dmjacobsen,Fix up some issues with expiry,11,[],https://github.com/NERSC/shifter/pull/104,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/104,"Hi Shane,
I tried expiring an image, and I found a few things.  Will file a bug, please use this branch for reference.
-Doug","Hi Shane,
I tried expiring an image, and I found a few things.  Will file a bug, please use this branch for reference.
-Doug",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,104,2016-08-07T22:29:43Z,2016-08-08T17:26:24Z,2016-08-08T17:26:29Z,MERGED,True,8,7,2,https://github.com/dmjacobsen,Fix up some issues with expiry,11,[],https://github.com/NERSC/shifter/pull/104,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/104#issuecomment-238112881,"Hi Shane,
I tried expiring an image, and I found a few things.  Will file a bug, please use this branch for reference.
-Doug",Coverage increased (+0.006%) to 66.322% when pulling c8b9257 on adminList into a1afbd9 on master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,108,2016-08-08T17:25:17Z,2016-08-08T17:32:31Z,2016-08-08T17:32:41Z,MERGED,True,86,12,3,https://github.com/dmjacobsen,Volume map fixes,3,[],https://github.com/NERSC/shifter/pull/108,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/108,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,108,2016-08-08T17:25:17Z,2016-08-08T17:32:31Z,2016-08-08T17:32:41Z,MERGED,True,86,12,3,https://github.com/dmjacobsen,Volume map fixes,3,[],https://github.com/NERSC/shifter/pull/108,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/108#issuecomment-238310498,,Coverage decreased (-0.4%) to 65.957% when pulling e2f8319 on volumeMapFixes into 4933171 on master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,109,2016-08-09T05:12:51Z,2016-08-10T13:00:14Z,2016-08-10T13:00:14Z,MERGED,True,1,1,1,https://github.com/chrissamuel,shifter.spec: support the --dist option from rpmbuild,1,[],https://github.com/NERSC/shifter/pull/109,https://github.com/chrissamuel,1,https://github.com/NERSC/shifter/pull/109,"The RPM spec file supports the concept of a %{?dist} tag so that a
single spec file can support multiple distro releases.  It also
allows the user to pass through extra version information to allow
easy upgrades between RPMs (rather than having to force them).
The Fedora guidelines also say:
https://fedoraproject.org/wiki/Packaging:DistTag

Use of the %{?dist} tag is mandatory in Fedora.

So it's a good idea to support (and easy to do so).
This is to fix issue #95 ""Support RPM %{dist} syntax in spec file"":","The RPM spec file supports the concept of a %{?dist} tag so that a
single spec file can support multiple distro releases.  It also
allows the user to pass through extra version information to allow
easy upgrades between RPMs (rather than having to force them).
The Fedora guidelines also say:
https://fedoraproject.org/wiki/Packaging:DistTag

Use of the %{?dist} tag is mandatory in Fedora.

So it's a good idea to support (and easy to do so).
This is to fix issue #95 ""Support RPM %{dist} syntax in spec file"":",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,109,2016-08-09T05:12:51Z,2016-08-10T13:00:14Z,2016-08-10T13:00:14Z,MERGED,True,1,1,1,https://github.com/chrissamuel,shifter.spec: support the --dist option from rpmbuild,1,[],https://github.com/NERSC/shifter/pull/109,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/109#issuecomment-238455951,"The RPM spec file supports the concept of a %{?dist} tag so that a
single spec file can support multiple distro releases.  It also
allows the user to pass through extra version information to allow
easy upgrades between RPMs (rather than having to force them).
The Fedora guidelines also say:
https://fedoraproject.org/wiki/Packaging:DistTag

Use of the %{?dist} tag is mandatory in Fedora.

So it's a good idea to support (and easy to do so).
This is to fix issue #95 ""Support RPM %{dist} syntax in spec file"":",Coverage remained the same at 65.964% when pulling 11a8b52 on chrissamuel:shifter.spec-dist into e9f1997 on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,110,2016-08-10T17:04:26Z,2016-08-11T04:00:56Z,2017-03-05T19:43:38Z,MERGED,True,8,0,2,https://github.com/scanon,Dockerignore,2,[],https://github.com/NERSC/shifter/pull/110,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/110,I want to start pushing some docker images to dockerhub.  But lets exclude anything that may have passwords or other sensitive stuff.,I want to start pushing some docker images to dockerhub.  But lets exclude anything that may have passwords or other sensitive stuff.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,110,2016-08-10T17:04:26Z,2016-08-11T04:00:56Z,2017-03-05T19:43:38Z,MERGED,True,8,0,2,https://github.com/scanon,Dockerignore,2,[],https://github.com/NERSC/shifter/pull/110,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/110#issuecomment-238935307,I want to start pushing some docker images to dockerhub.  But lets exclude anything that may have passwords or other sensitive stuff.,Coverage remained the same at 65.964% when pulling 40cb232 on scanon:dockerignore into 260923a on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,112,2016-08-11T23:57:28Z,2016-08-12T17:35:37Z,2016-08-12T17:35:37Z,MERGED,True,26,33,7,https://github.com/scanon,Only allow admins to do autoexpire,5,[],https://github.com/NERSC/shifter/pull/112,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/112,"Also a few minor tweaks

Add missing option to udiRoot.conf test example","Also a few minor tweaks

Add missing option to udiRoot.conf test example",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,112,2016-08-11T23:57:28Z,2016-08-12T17:35:37Z,2016-08-12T17:35:37Z,MERGED,True,26,33,7,https://github.com/scanon,Only allow admins to do autoexpire,5,[],https://github.com/NERSC/shifter/pull/112,https://github.com/scanon,2,https://github.com/NERSC/shifter/pull/112#issuecomment-239332210,"Also a few minor tweaks

Add missing option to udiRoot.conf test example",This needs more work.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,112,2016-08-11T23:57:28Z,2016-08-12T17:35:37Z,2016-08-12T17:35:37Z,MERGED,True,26,33,7,https://github.com/scanon,Only allow admins to do autoexpire,5,[],https://github.com/NERSC/shifter/pull/112,https://github.com/coveralls,3,https://github.com/NERSC/shifter/pull/112#issuecomment-239498984,"Also a few minor tweaks

Add missing option to udiRoot.conf test example",Coverage increased (+0.0002%) to 66.25% when pulling cab0795 on scanon:autoexpireadmin into 99884a7 on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,113,2016-08-13T07:16:43Z,2016-08-13T22:23:53Z,2016-08-13T22:23:57Z,MERGED,True,253,347,12,https://github.com/dmjacobsen,Sshd as user,6,[],https://github.com/NERSC/shifter/pull/113,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/113,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,113,2016-08-13T07:16:43Z,2016-08-13T22:23:53Z,2016-08-13T22:23:57Z,MERGED,True,253,347,12,https://github.com/dmjacobsen,Sshd as user,6,[],https://github.com/NERSC/shifter/pull/113,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/113#issuecomment-239607447,,Coverage decreased (-0.8%) to 65.411% when pulling ce2b61c on sshdAsUser into bc01f5b on master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,114,2016-08-15T21:42:14Z,2016-08-17T09:21:59Z,2016-08-17T17:32:23Z,MERGED,True,155,57,1,https://github.com/mej,Specfile revamp,6,[],https://github.com/NERSC/shifter/pull/114,https://github.com/mej,1,https://github.com/NERSC/shifter/pull/114,"These changes make the spec file more ""normalized"" and ""standardized"" to match traditional ordering and such.  Also note that the Release field has been tagged (as RH prefer to be the only ones publishing unadorned RPMs).  And I added some verbosity to the %description fields.","These changes make the spec file more ""normalized"" and ""standardized"" to match traditional ordering and such.  Also note that the Release field has been tagged (as RH prefer to be the only ones publishing unadorned RPMs).  And I added some verbosity to the %description fields.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,114,2016-08-15T21:42:14Z,2016-08-17T09:21:59Z,2016-08-17T17:32:23Z,MERGED,True,155,57,1,https://github.com/mej,Specfile revamp,6,[],https://github.com/NERSC/shifter/pull/114,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/114#issuecomment-239939912,"These changes make the spec file more ""normalized"" and ""standardized"" to match traditional ordering and such.  Also note that the Release field has been tagged (as RH prefer to be the only ones publishing unadorned RPMs).  And I added some verbosity to the %description fields.",Changes Unknown when pulling a3905d6 on mej:specfile-revamp into * on NERSC:master*.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,114,2016-08-15T21:42:14Z,2016-08-17T09:21:59Z,2016-08-17T17:32:23Z,MERGED,True,155,57,1,https://github.com/mej,Specfile revamp,6,[],https://github.com/NERSC/shifter/pull/114,https://github.com/coveralls,3,https://github.com/NERSC/shifter/pull/114#issuecomment-240278238,"These changes make the spec file more ""normalized"" and ""standardized"" to match traditional ordering and such.  Also note that the Release field has been tagged (as RH prefer to be the only ones publishing unadorned RPMs).  And I added some verbosity to the %description fields.",Changes Unknown when pulling 9793497 on mej:specfile-revamp into * on NERSC:master*.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,114,2016-08-15T21:42:14Z,2016-08-17T09:21:59Z,2016-08-17T17:32:23Z,MERGED,True,155,57,1,https://github.com/mej,Specfile revamp,6,[],https://github.com/NERSC/shifter/pull/114,https://github.com/coveralls,4,https://github.com/NERSC/shifter/pull/114#issuecomment-240282721,"These changes make the spec file more ""normalized"" and ""standardized"" to match traditional ordering and such.  Also note that the Release field has been tagged (as RH prefer to be the only ones publishing unadorned RPMs).  And I added some verbosity to the %description fields.",Changes Unknown when pulling 203ac55 on mej:specfile-revamp into * on NERSC:master*.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,115,2016-08-16T18:20:49Z,2016-08-16T18:33:48Z,2017-03-05T19:45:55Z,MERGED,True,65,3,2,https://github.com/scanon,Pullable fix,1,[],https://github.com/NERSC/shifter/pull/115,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/115,"Fixes pullable logic where a image was READY had recently  been re-pulled but had an old heartbeat.
The heartbeat should just be used for non-READY images.
Also small fix in logging for autoexpire","Fixes pullable logic where a image was READY had recently  been re-pulled but had an old heartbeat.
The heartbeat should just be used for non-READY images.
Also small fix in logging for autoexpire",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,115,2016-08-16T18:20:49Z,2016-08-16T18:33:48Z,2017-03-05T19:45:55Z,MERGED,True,65,3,2,https://github.com/scanon,Pullable fix,1,[],https://github.com/NERSC/shifter/pull/115,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/115#issuecomment-240193077,"Fixes pullable logic where a image was READY had recently  been re-pulled but had an old heartbeat.
The heartbeat should just be used for non-READY images.
Also small fix in logging for autoexpire",Coverage increased (+0.2%) to 65.605% when pulling 62cb752 on scanon:pullablefix into f5cc3ad on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,116,2016-08-16T18:33:34Z,2016-08-16T18:33:40Z,2016-08-18T21:16:20Z,MERGED,True,18,1,3,https://github.com/dmjacobsen,Minorcleanup,4,[],https://github.com/NERSC/shifter/pull/116,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/116,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,117,2016-08-16T18:35:02Z,2016-08-16T18:39:59Z,2016-08-16T18:40:01Z,MERGED,True,256,4,8,https://github.com/dmjacobsen,get latest updates into 16.08,12,[],https://github.com/NERSC/shifter/pull/117,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/117,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,117,2016-08-16T18:35:02Z,2016-08-16T18:39:59Z,2016-08-16T18:40:01Z,MERGED,True,256,4,8,https://github.com/dmjacobsen,get latest updates into 16.08,12,[],https://github.com/NERSC/shifter/pull/117,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/117#issuecomment-240197252,,Changes Unknown when pulling c5a757e on master into * on shifter-16.08*.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,118,2016-08-18T21:14:39Z,2016-08-18T21:16:05Z,2016-08-18T21:16:18Z,MERGED,True,128,56,9,https://github.com/dmjacobsen,No new privs,5,[],https://github.com/NERSC/shifter/pull/118,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/118,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,119,2016-08-18T21:17:00Z,2016-08-18T21:18:31Z,2016-08-18T21:21:47Z,MERGED,True,130,58,10,https://github.com/dmjacobsen,get no_new_privs into 16.08,7,[],https://github.com/NERSC/shifter/pull/119,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/119,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,119,2016-08-18T21:17:00Z,2016-08-18T21:18:31Z,2016-08-18T21:21:47Z,MERGED,True,130,58,10,https://github.com/dmjacobsen,get no_new_privs into 16.08,7,[],https://github.com/NERSC/shifter/pull/119,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/119#issuecomment-240860948,,Coverage decreased (-0.3%) to 65.205% when pulling c7125ef on master into ebce744 on shifter-16.08.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,120,2016-08-19T05:16:43Z,2016-08-19T05:17:27Z,2016-08-19T05:17:27Z,MERGED,True,10,7,1,https://github.com/dmjacobsen,"if xfs is not installed, do not test",1,[],https://github.com/NERSC/shifter/pull/120,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/120,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,121,2016-08-23T08:52:57Z,2016-08-23T08:53:03Z,2016-08-23T08:54:34Z,MERGED,True,873,87,19,https://github.com/dmjacobsen,Fix volmap,8,[],https://github.com/NERSC/shifter/pull/121,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/121,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,122,2016-08-23T08:53:40Z,2016-08-23T08:53:48Z,2016-08-23T08:54:34Z,MERGED,True,873,87,19,https://github.com/dmjacobsen,Fix volmap,8,[],https://github.com/NERSC/shifter/pull/122,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/122,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,123,2016-09-01T15:25:50Z,2016-09-01T21:13:23Z,2017-03-05T19:45:51Z,MERGED,True,39,27,7,https://github.com/scanon,Docker build fixes and improved logging,1,[],https://github.com/NERSC/shifter/pull/123,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/123,"I really wanted these against master but I started them in the pylint branch.  So let's just get them here.

This fixes a few minor issues with Docker builds.
For celery to run a with concurrency=1
Improves logging in serveral ways

Adds a new LogLevel to the imagemanager config using standard debug,info,warn,...
Passes the logger from the flask level to the imagemngr level so those get logged in the
same way
Cleans up some log messages","I really wanted these against master but I started them in the pylint branch.  So let's just get them here.

This fixes a few minor issues with Docker builds.
For celery to run a with concurrency=1
Improves logging in serveral ways

Adds a new LogLevel to the imagemanager config using standard debug,info,warn,...
Passes the logger from the flask level to the imagemngr level so those get logged in the
same way
Cleans up some log messages",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,123,2016-09-01T15:25:50Z,2016-09-01T21:13:23Z,2017-03-05T19:45:51Z,MERGED,True,39,27,7,https://github.com/scanon,Docker build fixes and improved logging,1,[],https://github.com/NERSC/shifter/pull/123,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/123#issuecomment-244117337,"I really wanted these against master but I started them in the pylint branch.  So let's just get them here.

This fixes a few minor issues with Docker builds.
For celery to run a with concurrency=1
Improves logging in serveral ways

Adds a new LogLevel to the imagemanager config using standard debug,info,warn,...
Passes the logger from the flask level to the imagemngr level so those get logged in the
same way
Cleans up some log messages",Coverage decreased (-0.1%) to 65.24% when pulling 5d47c45 on scanon:logging into b8ce5b9 on NERSC:pylint.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,125,2016-09-02T00:38:17Z,2016-09-08T21:46:38Z,2017-03-05T19:43:44Z,MERGED,True,328,265,23,https://github.com/scanon,Pylint fixes,6,[],https://github.com/NERSC/shifter/pull/125,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/125,and switched to gunicorn for docker images,and switched to gunicorn for docker images,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,125,2016-09-02T00:38:17Z,2016-09-08T21:46:38Z,2017-03-05T19:43:44Z,MERGED,True,328,265,23,https://github.com/scanon,Pylint fixes,6,[],https://github.com/NERSC/shifter/pull/125,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/125#issuecomment-244253880,and switched to gunicorn for docker images,Coverage increased (+0.07%) to 65.309% when pulling afc2d93 on scanon:pylint into 9a667db on NERSC:pylint.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,125,2016-09-02T00:38:17Z,2016-09-08T21:46:38Z,2017-03-05T19:43:44Z,MERGED,True,328,265,23,https://github.com/scanon,Pylint fixes,6,[],https://github.com/NERSC/shifter/pull/125,https://github.com/dmjacobsen,3,https://github.com/NERSC/shifter/pull/125#issuecomment-244271557,and switched to gunicorn for docker images,"Hi Shane,
The only concern I have with this is that this necessitates one to start gunicorn with::
 shifter_imagegw.api.api:app

instead of::
shifter_imagegw.api:app

I wonder if we were to add a method to init.py like::
def app():
    import shifter_imagegw.api.api as api
    return api.app

or some other means, if that would allow us to keep using the simpler logic.
-Doug",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,125,2016-09-02T00:38:17Z,2016-09-08T21:46:38Z,2017-03-05T19:43:44Z,MERGED,True,328,265,23,https://github.com/scanon,Pylint fixes,6,[],https://github.com/NERSC/shifter/pull/125,https://github.com/scanon,4,https://github.com/NERSC/shifter/pull/125#issuecomment-244392977,and switched to gunicorn for docker images,Could we just move api back up a level?  I'm guessing its the api.api part you don't like.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,125,2016-09-02T00:38:17Z,2016-09-08T21:46:38Z,2017-03-05T19:43:44Z,MERGED,True,328,265,23,https://github.com/scanon,Pylint fixes,6,[],https://github.com/NERSC/shifter/pull/125,https://github.com/dmjacobsen,5,https://github.com/NERSC/shifter/pull/125#issuecomment-244408825,and switched to gunicorn for docker images,"My recollection is that there were problems with that as well, but it's
worth a shot
On Sep 2, 2016 7:37 AM, ""Shane Canon"" notifications@github.com wrote:

Could we just move api back up a level? I'm guessing its the api.api part
you don't like.
—
You are receiving this because you commented.
Reply to this email directly, view it on GitHub
#125 (comment), or mute
the thread
https://github.com/notifications/unsubscribe-auth/ACGnWISeY5NpmtjpYKwsV33tETfoX9A8ks5qmDSZgaJpZM4JzQ8o
.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,125,2016-09-02T00:38:17Z,2016-09-08T21:46:38Z,2017-03-05T19:43:44Z,MERGED,True,328,265,23,https://github.com/scanon,Pylint fixes,6,[],https://github.com/NERSC/shifter/pull/125,https://github.com/coveralls,6,https://github.com/NERSC/shifter/pull/125#issuecomment-245749621,and switched to gunicorn for docker images,Coverage increased (+0.1%) to 65.388% when pulling 61d8c96 on scanon:pylint into 9a667db on NERSC:pylint.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,125,2016-09-02T00:38:17Z,2016-09-08T21:46:38Z,2017-03-05T19:43:44Z,MERGED,True,328,265,23,https://github.com/scanon,Pylint fixes,6,[],https://github.com/NERSC/shifter/pull/125,https://github.com/coveralls,7,https://github.com/NERSC/shifter/pull/125#issuecomment-245751539,and switched to gunicorn for docker images,Coverage increased (+0.1%) to 65.388% when pulling 89a1685 on scanon:pylint into 9a667db on NERSC:pylint.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,126,2016-09-03T20:38:14Z,2016-09-03T21:59:48Z,2016-09-04T13:52:13Z,MERGED,True,212,87,7,https://github.com/dmjacobsen,Rhel7 shared fixup,7,[],https://github.com/NERSC/shifter/pull/126,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/126,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,126,2016-09-03T20:38:14Z,2016-09-03T21:59:48Z,2016-09-04T13:52:13Z,MERGED,True,212,87,7,https://github.com/dmjacobsen,Rhel7 shared fixup,7,[],https://github.com/NERSC/shifter/pull/126,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/126#issuecomment-244568790,,Coverage increased (+0.8%) to 65.851% when pulling bc887cc on rhel7_shared_fixup into dfced7c on master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,127,2016-09-04T13:51:45Z,2016-09-04T13:51:53Z,2016-09-04T13:52:13Z,MERGED,True,227,91,10,https://github.com/dmjacobsen,Rhel7 shared fixup,12,[],https://github.com/NERSC/shifter/pull/127,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/127,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,128,2016-09-04T13:54:14Z,2016-09-04T13:54:21Z,2016-09-04T13:55:04Z,MERGED,True,1,1,1,https://github.com/dmjacobsen,change next to continue to get proper logic,1,[],https://github.com/NERSC/shifter/pull/128,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/128,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,129,2016-09-04T13:54:44Z,2016-09-04T13:54:50Z,2016-09-04T13:55:04Z,MERGED,True,1,1,1,https://github.com/dmjacobsen,change next to continue to get proper logic,1,[],https://github.com/NERSC/shifter/pull/129,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/129,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,130,2016-09-04T13:55:23Z,2016-09-08T20:15:50Z,2016-09-21T17:30:33Z,MERGED,True,50,27,1,https://github.com/dmjacobsen,break out of chroot tests instead of forking,1,[],https://github.com/NERSC/shifter/pull/130,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/130,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,130,2016-09-04T13:55:23Z,2016-09-08T20:15:50Z,2016-09-21T17:30:33Z,MERGED,True,50,27,1,https://github.com/dmjacobsen,break out of chroot tests instead of forking,1,[],https://github.com/NERSC/shifter/pull/130,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/130#issuecomment-244605244,,Coverage increased (+0.3%) to 66.117% when pulling e2a9a53 on moretests into ae7ccc2 on master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,131,2016-09-14T01:04:36Z,2016-09-21T17:22:37Z,2016-09-21T17:22:37Z,MERGED,True,32,8,4,https://github.com/mej,Shifter 16.08.2b packaging/distribution fixes,3,[],https://github.com/NERSC/shifter/pull/131,https://github.com/mej,1,https://github.com/NERSC/shifter/pull/131,"These changes fix make distcheck, add arbitrary ./configure flag support for rpmbuild, and add the systemd unit files, docs, etc. to the RPM packages, esp. for use on RHEL7.","These changes fix make distcheck, add arbitrary ./configure flag support for rpmbuild, and add the systemd unit files, docs, etc. to the RPM packages, esp. for use on RHEL7.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,131,2016-09-14T01:04:36Z,2016-09-21T17:22:37Z,2016-09-21T17:22:37Z,MERGED,True,32,8,4,https://github.com/mej,Shifter 16.08.2b packaging/distribution fixes,3,[],https://github.com/NERSC/shifter/pull/131,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/131#issuecomment-246875923,"These changes fix make distcheck, add arbitrary ./configure flag support for rpmbuild, and add the systemd unit files, docs, etc. to the RPM packages, esp. for use on RHEL7.",Coverage remained the same at 65.957% when pulling 5bec882 on mej:shifter-16.08 into 2ab7dd5 on NERSC:shifter-16.08.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,137,2016-09-21T17:23:08Z,2016-09-21T17:29:49Z,2016-09-21T17:30:33Z,MERGED,True,2321,2095,34,https://github.com/dmjacobsen,Pylint,24,[],https://github.com/NERSC/shifter/pull/137,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/137,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,138,2016-09-21T20:56:46Z,2016-09-21T21:04:06Z,2016-09-21T21:04:11Z,MERGED,True,2477,336,35,https://github.com/dmjacobsen,Volmap shifter realpath,91,[],https://github.com/NERSC/shifter/pull/138,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/138,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,138,2016-09-21T20:56:46Z,2016-09-21T21:04:06Z,2016-09-21T21:04:11Z,MERGED,True,2477,336,35,https://github.com/dmjacobsen,Volmap shifter realpath,91,[],https://github.com/NERSC/shifter/pull/138,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/138#issuecomment-248742373,,Coverage decreased (-0.5%) to 65.917% when pulling d03b698 on volmap_shifter_realpath into acd1f90 on master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,139,2016-09-21T23:00:18Z,2016-09-21T23:03:33Z,2016-09-21T23:03:33Z,MERGED,True,32,8,4,https://github.com/dmjacobsen,Shifter 16.08,5,[],https://github.com/NERSC/shifter/pull/139,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/139,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,140,2016-09-21T23:30:03Z,2016-09-21T23:45:58Z,2016-09-21T23:51:50Z,MERGED,True,58,8,7,https://github.com/dmjacobsen,Volmap cov,8,[],https://github.com/NERSC/shifter/pull/140,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/140,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,140,2016-09-21T23:30:03Z,2016-09-21T23:45:58Z,2016-09-21T23:51:50Z,MERGED,True,58,8,7,https://github.com/dmjacobsen,Volmap cov,8,[],https://github.com/NERSC/shifter/pull/140,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/140#issuecomment-248774033,,Coverage remained the same at 65.917% when pulling fb7d2c9 on volmap_cov into 10eca85 on master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,141,2016-09-21T23:48:13Z,2016-09-21T23:50:14Z,2016-09-21T23:50:14Z,MERGED,True,58,8,7,https://github.com/dmjacobsen,16.08.3,9,[],https://github.com/NERSC/shifter/pull/141,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/141,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,143,2016-09-23T20:49:14Z,2016-09-23T21:14:56Z,2017-05-24T15:29:19Z,MERGED,True,19,7,3,https://github.com/scanon,Portfix,3,[],https://github.com/NERSC/shifter/pull/143,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/143,Fix #134,Fix #134,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,143,2016-09-23T20:49:14Z,2016-09-23T21:14:56Z,2017-05-24T15:29:19Z,MERGED,True,19,7,3,https://github.com/scanon,Portfix,3,[],https://github.com/NERSC/shifter/pull/143,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/143#issuecomment-249299990,Fix #134,Coverage decreased (-0.02%) to 65.9% when pulling 2521f30 on scanon:portfix into 9d053ec on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,143,2016-09-23T20:49:14Z,2016-09-23T21:14:56Z,2017-05-24T15:29:19Z,MERGED,True,19,7,3,https://github.com/scanon,Portfix,3,[],https://github.com/NERSC/shifter/pull/143,https://github.com/coveralls,3,https://github.com/NERSC/shifter/pull/143#issuecomment-249303504,Fix #134,Coverage decreased (-0.02%) to 65.9% when pulling aaac5df on scanon:portfix into 9d053ec on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,145,2016-09-27T14:24:23Z,2016-11-17T14:55:03Z,2016-11-17T14:55:03Z,MERGED,True,126,0,2,https://github.com/miguelgila,added basic support to build on centos7 ppc64le,1,[],https://github.com/NERSC/shifter/pull/145,https://github.com/miguelgila,1,https://github.com/NERSC/shifter/pull/145,"With this change, it is possible to build on openpower under centos/rhel 7.2 without Slurm and sshd support.","With this change, it is possible to build on openpower under centos/rhel 7.2 without Slurm and sshd support.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,145,2016-09-27T14:24:23Z,2016-11-17T14:55:03Z,2016-11-17T14:55:03Z,MERGED,True,126,0,2,https://github.com/miguelgila,added basic support to build on centos7 ppc64le,1,[],https://github.com/NERSC/shifter/pull/145,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/145#issuecomment-249882029,"With this change, it is possible to build on openpower under centos/rhel 7.2 without Slurm and sshd support.",Coverage remained the same at 65.9% when pulling 24896b4 on miguelgila:build_openpower into 1c35bb8 on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,145,2016-09-27T14:24:23Z,2016-11-17T14:55:03Z,2016-11-17T14:55:03Z,MERGED,True,126,0,2,https://github.com/miguelgila,added basic support to build on centos7 ppc64le,1,[],https://github.com/NERSC/shifter/pull/145,https://github.com/scanon,3,https://github.com/NERSC/shifter/pull/145#issuecomment-258069833,"With this change, it is possible to build on openpower under centos/rhel 7.2 without Slurm and sshd support.",@dmjacobsen Any comments on pulling the config.guess file?,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,147,2016-11-01T09:54:52Z,2017-03-04T02:16:33Z,2017-03-04T02:16:33Z,CLOSED,False,17,0,2,https://github.com/cfenoy,Wired up the authentication,4,[],https://github.com/NERSC/shifter/pull/147,https://github.com/cfenoy,1,https://github.com/NERSC/shifter/pull/147,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,147,2016-11-01T09:54:52Z,2017-03-04T02:16:33Z,2017-03-04T02:16:33Z,CLOSED,False,17,0,2,https://github.com/cfenoy,Wired up the authentication,4,[],https://github.com/NERSC/shifter/pull/147,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/147#issuecomment-257582746,,Coverage decreased (-0.07%) to 65.828% when pulling 15265f5 on cfenoy:authentication into 1c35bb8 on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,147,2016-11-01T09:54:52Z,2017-03-04T02:16:33Z,2017-03-04T02:16:33Z,CLOSED,False,17,0,2,https://github.com/cfenoy,Wired up the authentication,4,[],https://github.com/NERSC/shifter/pull/147,https://github.com/scanon,3,https://github.com/NERSC/shifter/pull/147#issuecomment-258069570,,"Carles,
Thanks for contributing this.  I've been meaning to make time for this and just haven't managed to get around to it.  If would be good if we had some tests for this.  I'm not quite sure how to handle that since we don't want to put credentials into the code.  Perhaps we could set an environment variable and if it is set, the tests would get run.  Could you take a stab at adding some tests using this approach or something else if you have any ideas?",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,147,2016-11-01T09:54:52Z,2017-03-04T02:16:33Z,2017-03-04T02:16:33Z,CLOSED,False,17,0,2,https://github.com/cfenoy,Wired up the authentication,4,[],https://github.com/NERSC/shifter/pull/147,https://github.com/scanon,4,https://github.com/NERSC/shifter/pull/147#issuecomment-258070049,,@cfenoy One other reason we had held off on this is that images would still be usable by anyone on a shared system.  The plan was to also populate ACL records that would be enforced by the shifter binary.  Perhaps we could add some warning when the user first logs in until we get ACLs implemented.  @dmjacobsen What do you think?,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,147,2016-11-01T09:54:52Z,2017-03-04T02:16:33Z,2017-03-04T02:16:33Z,CLOSED,False,17,0,2,https://github.com/cfenoy,Wired up the authentication,4,[],https://github.com/NERSC/shifter/pull/147,https://github.com/cfenoy,5,https://github.com/NERSC/shifter/pull/147#issuecomment-261655765,,"@scanon We currently do not have the need to restrict the access to the images added to shifter, but we have an internal registry with authentication. That is why we need this. I agree this may cause some false sensation of security to the users, so I may be good to add a warning to the users at the time of the login to a registry. Once the ACLs support is in place the warning can be removed. Do you want me to add the warning?",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,147,2016-11-01T09:54:52Z,2017-03-04T02:16:33Z,2017-03-04T02:16:33Z,CLOSED,False,17,0,2,https://github.com/cfenoy,Wired up the authentication,4,[],https://github.com/NERSC/shifter/pull/147,https://github.com/scanon,6,https://github.com/NERSC/shifter/pull/147#issuecomment-275313942,,@cfenoy Sorry for not merging this.  I'm actually working on wiring in the rest of the ACLs now.  I may merge your changes in with that.  Thanks again.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,147,2016-11-01T09:54:52Z,2017-03-04T02:16:33Z,2017-03-04T02:16:33Z,CLOSED,False,17,0,2,https://github.com/cfenoy,Wired up the authentication,4,[],https://github.com/NERSC/shifter/pull/147,https://github.com/scanon,7,https://github.com/NERSC/shifter/pull/147#issuecomment-284119120,,@cfenoy I hand merged these into the ACL PR that was recently merged. So I'm going to close out this PR.  Thanks for the contribution.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,148,2016-11-01T09:56:15Z,2017-11-08T23:35:05Z,2017-11-08T23:35:06Z,CLOSED,False,3,2,1,https://github.com/cfenoy,Tarfile issues,2,[],https://github.com/NERSC/shifter/pull/148,https://github.com/cfenoy,1,https://github.com/NERSC/shifter/pull/148,Some dev device files where not properly excluded and the default error level for tarfile changed from python 2.6 to 2.7 making some extracts to fail,Some dev device files where not properly excluded and the default error level for tarfile changed from python 2.6 to 2.7 making some extracts to fail,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,148,2016-11-01T09:56:15Z,2017-11-08T23:35:05Z,2017-11-08T23:35:06Z,CLOSED,False,3,2,1,https://github.com/cfenoy,Tarfile issues,2,[],https://github.com/NERSC/shifter/pull/148,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/148#issuecomment-257528965,Some dev device files where not properly excluded and the default error level for tarfile changed from python 2.6 to 2.7 making some extracts to fail,Coverage remained the same at 65.9% when pulling 5614ed8 on cfenoy:tarfile_issues into 1c35bb8 on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,148,2016-11-01T09:56:15Z,2017-11-08T23:35:05Z,2017-11-08T23:35:06Z,CLOSED,False,3,2,1,https://github.com/cfenoy,Tarfile issues,2,[],https://github.com/NERSC/shifter/pull/148,https://github.com/scanon,3,https://github.com/NERSC/shifter/pull/148#issuecomment-258069727,Some dev device files where not properly excluded and the default error level for tarfile changed from python 2.6 to 2.7 making some extracts to fail,@dmjacobsen Can you take a look at this?  It looks good as far as I can tell and tests are still passing.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,148,2016-11-01T09:56:15Z,2017-11-08T23:35:05Z,2017-11-08T23:35:06Z,CLOSED,False,3,2,1,https://github.com/cfenoy,Tarfile issues,2,[],https://github.com/NERSC/shifter/pull/148,https://github.com/dmjacobsen,4,https://github.com/NERSC/shifter/pull/148#issuecomment-261270391,Some dev device files where not properly excluded and the default error level for tarfile changed from python 2.6 to 2.7 making some extracts to fail,"I think it looks good.  I would like to think more about the most appropriate errorlevel for the tarfile to be processed with.  We were using 0 before (implicitly, according to the current python documentation), and this commit explicitly sets it to 0.  I'm wondering if it should really be 1 to cause fatal errors to generate an exception during extraction.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,148,2016-11-01T09:56:15Z,2017-11-08T23:35:05Z,2017-11-08T23:35:06Z,CLOSED,False,3,2,1,https://github.com/cfenoy,Tarfile issues,2,[],https://github.com/NERSC/shifter/pull/148,https://github.com/cfenoy,5,https://github.com/NERSC/shifter/pull/148#issuecomment-261654677,Some dev device files where not properly excluded and the default error level for tarfile changed from python 2.6 to 2.7 making some extracts to fail,"@dmjacobsen I've had some issues when untaring files with python 2.7. I've got a permission denied when untaring the file /etc/gshadow that had permissions 0000. That is why I forced it to 0
That file can be extracted properly with tar but not with the python module.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,148,2016-11-01T09:56:15Z,2017-11-08T23:35:05Z,2017-11-08T23:35:06Z,CLOSED,False,3,2,1,https://github.com/cfenoy,Tarfile issues,2,[],https://github.com/NERSC/shifter/pull/148,https://github.com/scanon,6,https://github.com/NERSC/shifter/pull/148#issuecomment-275314196,Some dev device files where not properly excluded and the default error level for tarfile changed from python 2.6 to 2.7 making some extracts to fail,"@cfenoy   I recently added some fixes that may address files with 000.  Also, do you have an image that exhibited the problems with device files?",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,148,2016-11-01T09:56:15Z,2017-11-08T23:35:05Z,2017-11-08T23:35:06Z,CLOSED,False,3,2,1,https://github.com/cfenoy,Tarfile issues,2,[],https://github.com/NERSC/shifter/pull/148,https://github.com/scanon,7,https://github.com/NERSC/shifter/pull/148#issuecomment-342997699,Some dev device files where not properly excluded and the default error level for tarfile changed from python 2.6 to 2.7 making some extracts to fail,I think this has been fixed by later changes so I'm closing this out.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,149,2016-11-15T17:36:46Z,2017-01-11T16:53:57Z,2017-01-11T16:53:57Z,CLOSED,False,1359,44,19,https://github.com/rukkal,Added GPU support,99,[],https://github.com/NERSC/shifter/pull/149,https://github.com/rukkal,1,https://github.com/NERSC/shifter/pull/149,"This PR adds GPU support for Shifter.
To select one or more GPU devices to be made available inside
the container, use the --gpu or -g command line options, supplying as arguments
the IDs of the devices as reported by nvidia-smi or the CUDA Runtime, e.g.:
shifter --gpu=0,1,2

Alternatively, the GPUs can be specified in the environment using:
export CUDA_VISIBLE_DEVICES=0,1,2

If the environment variable is present, it will override the --gpu option.
CUDA_VISIBLE_DEVICES is also set by the SLURM workload manager with the GRES plugin.
CUDA toolkit must be installed inside the image.
How it works
When GPU support is requested Shifter executes the activate_gpu_support.sh bash script. The script bind mounts available NVIDIA host libraries and binary utilities to the container. The container environment is also updated appropriately (updating PATH and LD_LIBRARY_PATH).
A new parameter inside udiRoot.conf called siteResources allows the user to indicate an absolute path to where site-specific (host) resources will be bind-mounted in the container.
The _UdiRootConfig structure has been updated accordingly.
Other additions

More fine-grained bind mount of the /dev directory contents in the container. This change allows to unmount device files from the container without propagating changes into the host.
Updated Shifter's help/usage message.
Added documentation on Manual installation of Shifter with GPU support
Added unit tests and integration tests for new features","This PR adds GPU support for Shifter.
To select one or more GPU devices to be made available inside
the container, use the --gpu or -g command line options, supplying as arguments
the IDs of the devices as reported by nvidia-smi or the CUDA Runtime, e.g.:
shifter --gpu=0,1,2

Alternatively, the GPUs can be specified in the environment using:
export CUDA_VISIBLE_DEVICES=0,1,2

If the environment variable is present, it will override the --gpu option.
CUDA_VISIBLE_DEVICES is also set by the SLURM workload manager with the GRES plugin.
CUDA toolkit must be installed inside the image.
How it works
When GPU support is requested Shifter executes the activate_gpu_support.sh bash script. The script bind mounts available NVIDIA host libraries and binary utilities to the container. The container environment is also updated appropriately (updating PATH and LD_LIBRARY_PATH).
A new parameter inside udiRoot.conf called siteResources allows the user to indicate an absolute path to where site-specific (host) resources will be bind-mounted in the container.
The _UdiRootConfig structure has been updated accordingly.
Other additions

More fine-grained bind mount of the /dev directory contents in the container. This change allows to unmount device files from the container without propagating changes into the host.
Updated Shifter's help/usage message.
Added documentation on Manual installation of Shifter with GPU support
Added unit tests and integration tests for new features",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,149,2016-11-15T17:36:46Z,2017-01-11T16:53:57Z,2017-01-11T16:53:57Z,CLOSED,False,1359,44,19,https://github.com/rukkal,Added GPU support,99,[],https://github.com/NERSC/shifter/pull/149,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/149#issuecomment-260712488,"This PR adds GPU support for Shifter.
To select one or more GPU devices to be made available inside
the container, use the --gpu or -g command line options, supplying as arguments
the IDs of the devices as reported by nvidia-smi or the CUDA Runtime, e.g.:
shifter --gpu=0,1,2

Alternatively, the GPUs can be specified in the environment using:
export CUDA_VISIBLE_DEVICES=0,1,2

If the environment variable is present, it will override the --gpu option.
CUDA_VISIBLE_DEVICES is also set by the SLURM workload manager with the GRES plugin.
CUDA toolkit must be installed inside the image.
How it works
When GPU support is requested Shifter executes the activate_gpu_support.sh bash script. The script bind mounts available NVIDIA host libraries and binary utilities to the container. The container environment is also updated appropriately (updating PATH and LD_LIBRARY_PATH).
A new parameter inside udiRoot.conf called siteResources allows the user to indicate an absolute path to where site-specific (host) resources will be bind-mounted in the container.
The _UdiRootConfig structure has been updated accordingly.
Other additions

More fine-grained bind mount of the /dev directory contents in the container. This change allows to unmount device files from the container without propagating changes into the host.
Updated Shifter's help/usage message.
Added documentation on Manual installation of Shifter with GPU support
Added unit tests and integration tests for new features",Coverage decreased (-0.4%) to 65.524% when pulling 658f2f4 on rukkal:master into 1c35bb8 on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,149,2016-11-15T17:36:46Z,2017-01-11T16:53:57Z,2017-01-11T16:53:57Z,CLOSED,False,1359,44,19,https://github.com/rukkal,Added GPU support,99,[],https://github.com/NERSC/shifter/pull/149,https://github.com/dmjacobsen,3,https://github.com/NERSC/shifter/pull/149#issuecomment-261268890,"This PR adds GPU support for Shifter.
To select one or more GPU devices to be made available inside
the container, use the --gpu or -g command line options, supplying as arguments
the IDs of the devices as reported by nvidia-smi or the CUDA Runtime, e.g.:
shifter --gpu=0,1,2

Alternatively, the GPUs can be specified in the environment using:
export CUDA_VISIBLE_DEVICES=0,1,2

If the environment variable is present, it will override the --gpu option.
CUDA_VISIBLE_DEVICES is also set by the SLURM workload manager with the GRES plugin.
CUDA toolkit must be installed inside the image.
How it works
When GPU support is requested Shifter executes the activate_gpu_support.sh bash script. The script bind mounts available NVIDIA host libraries and binary utilities to the container. The container environment is also updated appropriately (updating PATH and LD_LIBRARY_PATH).
A new parameter inside udiRoot.conf called siteResources allows the user to indicate an absolute path to where site-specific (host) resources will be bind-mounted in the container.
The _UdiRootConfig structure has been updated accordingly.
Other additions

More fine-grained bind mount of the /dev directory contents in the container. This change allows to unmount device files from the container without propagating changes into the host.
Updated Shifter's help/usage message.
Added documentation on Manual installation of Shifter with GPU support
Added unit tests and integration tests for new features","Thanks for this!  I'll start reviewing this after the dust settles from SC16.  I do have one comment from the documentation above about
""""""If the environment variable is present, it will override the --gpu option.""""""
I think it should probably work the opposite way, if CUDA_VISIBLE_DEVICES=0,1,2, then that should imply ""--gpu=0,1,2"", so the user doesn't have to type it.  But if the user wants to restrict a particular container to only gpu 0, they should be able to (i.e., by specifying --gpu=0 when CUDA_VISIBLE_DEVICES is more permissive).  I suppose I could see a case where a user selected a GPU that slurm did not grant them access to, but it seems there is no real enforcement on gpu devices, is that right?",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,149,2016-11-15T17:36:46Z,2017-01-11T16:53:57Z,2017-01-11T16:53:57Z,CLOSED,False,1359,44,19,https://github.com/rukkal,Added GPU support,99,[],https://github.com/NERSC/shifter/pull/149,https://github.com/lichinka,4,https://github.com/NERSC/shifter/pull/149#issuecomment-261306472,"This PR adds GPU support for Shifter.
To select one or more GPU devices to be made available inside
the container, use the --gpu or -g command line options, supplying as arguments
the IDs of the devices as reported by nvidia-smi or the CUDA Runtime, e.g.:
shifter --gpu=0,1,2

Alternatively, the GPUs can be specified in the environment using:
export CUDA_VISIBLE_DEVICES=0,1,2

If the environment variable is present, it will override the --gpu option.
CUDA_VISIBLE_DEVICES is also set by the SLURM workload manager with the GRES plugin.
CUDA toolkit must be installed inside the image.
How it works
When GPU support is requested Shifter executes the activate_gpu_support.sh bash script. The script bind mounts available NVIDIA host libraries and binary utilities to the container. The container environment is also updated appropriately (updating PATH and LD_LIBRARY_PATH).
A new parameter inside udiRoot.conf called siteResources allows the user to indicate an absolute path to where site-specific (host) resources will be bind-mounted in the container.
The _UdiRootConfig structure has been updated accordingly.
Other additions

More fine-grained bind mount of the /dev directory contents in the container. This change allows to unmount device files from the container without propagating changes into the host.
Updated Shifter's help/usage message.
Added documentation on Manual installation of Shifter with GPU support
Added unit tests and integration tests for new features","Thanks for reviewing this.
We currently have MPI support in the works and will soon be ready.
Our idea was to include a change in the behavior of CUDA_VISIBLE_DEVICES and the --gpu option that you mentioned above because the current setup is CSCS specific.
We will send you that pull request after the MPI one.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,149,2016-11-15T17:36:46Z,2017-01-11T16:53:57Z,2017-01-11T16:53:57Z,CLOSED,False,1359,44,19,https://github.com/rukkal,Added GPU support,99,[],https://github.com/NERSC/shifter/pull/149,https://github.com/rukkal,5,https://github.com/NERSC/shifter/pull/149#issuecomment-271924353,"This PR adds GPU support for Shifter.
To select one or more GPU devices to be made available inside
the container, use the --gpu or -g command line options, supplying as arguments
the IDs of the devices as reported by nvidia-smi or the CUDA Runtime, e.g.:
shifter --gpu=0,1,2

Alternatively, the GPUs can be specified in the environment using:
export CUDA_VISIBLE_DEVICES=0,1,2

If the environment variable is present, it will override the --gpu option.
CUDA_VISIBLE_DEVICES is also set by the SLURM workload manager with the GRES plugin.
CUDA toolkit must be installed inside the image.
How it works
When GPU support is requested Shifter executes the activate_gpu_support.sh bash script. The script bind mounts available NVIDIA host libraries and binary utilities to the container. The container environment is also updated appropriately (updating PATH and LD_LIBRARY_PATH).
A new parameter inside udiRoot.conf called siteResources allows the user to indicate an absolute path to where site-specific (host) resources will be bind-mounted in the container.
The _UdiRootConfig structure has been updated accordingly.
Other additions

More fine-grained bind mount of the /dev directory contents in the container. This change allows to unmount device files from the container without propagating changes into the host.
Updated Shifter's help/usage message.
Added documentation on Manual installation of Shifter with GPU support
Added unit tests and integration tests for new features",This pull request has been superseded and should be ignored.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,153,2017-01-11T16:50:44Z,2017-02-14T12:56:04Z,2017-02-14T12:56:04Z,MERGED,True,1495,63,32,https://github.com/rukkal,Added GPU support,128,[],https://github.com/NERSC/shifter/pull/153,https://github.com/rukkal,1,https://github.com/NERSC/shifter/pull/153,"This PR adds GPU support for Shifter. This PR superseeds the previous one that we did in November.
The user interface has changed since the last PR. Now to select one or more GPU devices to be made available inside the container, the user has to set the environment variable CUDA_VISIBLE_DEVICES. The value of CUDA_VISIBLE_DEVICES should be a comma separated list of GPU device IDs. E.g.:
CUDA_VISIBLE_DEVICES=0,2 shifter --image=cuda-samples:latest ./deviceQuery

When using the SLURM Workload Manager, CUDA_VISIBLE_DEVICES is always exported, and the user can control the selected GPU devices through the Generic Resource Scheduling, e.g.:
srun --gres=gpu:<NumGPUsPerNode>

Thus, Shifter can transparently support GPUs selected by the SLURM GRES plugin.
CUDA toolkit must be installed inside the image.
How it works
When GPU support is requested, Shifter executes the activate_gpu_support.sh bash script. The script bind mounts available NVIDIA host libraries and binary utilities to the container. The container environment is also updated appropriately (updating PATH and LD_LIBRARY_PATH).
A new parameter inside udiRoot.conf called siteResources allows the user to indicate an absolute path to where site-specific (host) resources will be bind-mounted in the container.
The _UdiRootConfig structure has been updated accordingly.
A full list of the bind mounted site resources can be retrieved at runtime by adding the --verbose command line option. E.g.:
CUDA_VISIBLE_DEVICES=0,2 shifter --verbose --image=cuda-samples:latest ./deviceQuery

Device numbering
The GPU devices exposed inside the container have been verified to be available to CUDA applications with device numbering starting from 0, regardless of the actual device IDs present in CUDA_VISIBLE_DEVICES. E.g. if CUDA_VISIBLE_DEVICES is 2, a CUDA application will still be able to access that GPU as device 0). This means it is possible to transparently use containers requiring a single GPU on multi-GPU nodes.
Other additions

Updated Shifter's help/usage message.
Added documentation on Manual installation of Shifter with GPU support
Added unit tests and integration tests for the new feature","This PR adds GPU support for Shifter. This PR superseeds the previous one that we did in November.
The user interface has changed since the last PR. Now to select one or more GPU devices to be made available inside the container, the user has to set the environment variable CUDA_VISIBLE_DEVICES. The value of CUDA_VISIBLE_DEVICES should be a comma separated list of GPU device IDs. E.g.:
CUDA_VISIBLE_DEVICES=0,2 shifter --image=cuda-samples:latest ./deviceQuery

When using the SLURM Workload Manager, CUDA_VISIBLE_DEVICES is always exported, and the user can control the selected GPU devices through the Generic Resource Scheduling, e.g.:
srun --gres=gpu:<NumGPUsPerNode>

Thus, Shifter can transparently support GPUs selected by the SLURM GRES plugin.
CUDA toolkit must be installed inside the image.
How it works
When GPU support is requested, Shifter executes the activate_gpu_support.sh bash script. The script bind mounts available NVIDIA host libraries and binary utilities to the container. The container environment is also updated appropriately (updating PATH and LD_LIBRARY_PATH).
A new parameter inside udiRoot.conf called siteResources allows the user to indicate an absolute path to where site-specific (host) resources will be bind-mounted in the container.
The _UdiRootConfig structure has been updated accordingly.
A full list of the bind mounted site resources can be retrieved at runtime by adding the --verbose command line option. E.g.:
CUDA_VISIBLE_DEVICES=0,2 shifter --verbose --image=cuda-samples:latest ./deviceQuery

Device numbering
The GPU devices exposed inside the container have been verified to be available to CUDA applications with device numbering starting from 0, regardless of the actual device IDs present in CUDA_VISIBLE_DEVICES. E.g. if CUDA_VISIBLE_DEVICES is 2, a CUDA application will still be able to access that GPU as device 0). This means it is possible to transparently use containers requiring a single GPU on multi-GPU nodes.
Other additions

Updated Shifter's help/usage message.
Added documentation on Manual installation of Shifter with GPU support
Added unit tests and integration tests for the new feature",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,153,2017-01-11T16:50:44Z,2017-02-14T12:56:04Z,2017-02-14T12:56:04Z,MERGED,True,1495,63,32,https://github.com/rukkal,Added GPU support,128,[],https://github.com/NERSC/shifter/pull/153,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/153#issuecomment-271925442,"This PR adds GPU support for Shifter. This PR superseeds the previous one that we did in November.
The user interface has changed since the last PR. Now to select one or more GPU devices to be made available inside the container, the user has to set the environment variable CUDA_VISIBLE_DEVICES. The value of CUDA_VISIBLE_DEVICES should be a comma separated list of GPU device IDs. E.g.:
CUDA_VISIBLE_DEVICES=0,2 shifter --image=cuda-samples:latest ./deviceQuery

When using the SLURM Workload Manager, CUDA_VISIBLE_DEVICES is always exported, and the user can control the selected GPU devices through the Generic Resource Scheduling, e.g.:
srun --gres=gpu:<NumGPUsPerNode>

Thus, Shifter can transparently support GPUs selected by the SLURM GRES plugin.
CUDA toolkit must be installed inside the image.
How it works
When GPU support is requested, Shifter executes the activate_gpu_support.sh bash script. The script bind mounts available NVIDIA host libraries and binary utilities to the container. The container environment is also updated appropriately (updating PATH and LD_LIBRARY_PATH).
A new parameter inside udiRoot.conf called siteResources allows the user to indicate an absolute path to where site-specific (host) resources will be bind-mounted in the container.
The _UdiRootConfig structure has been updated accordingly.
A full list of the bind mounted site resources can be retrieved at runtime by adding the --verbose command line option. E.g.:
CUDA_VISIBLE_DEVICES=0,2 shifter --verbose --image=cuda-samples:latest ./deviceQuery

Device numbering
The GPU devices exposed inside the container have been verified to be available to CUDA applications with device numbering starting from 0, regardless of the actual device IDs present in CUDA_VISIBLE_DEVICES. E.g. if CUDA_VISIBLE_DEVICES is 2, a CUDA application will still be able to access that GPU as device 0). This means it is possible to transparently use containers requiring a single GPU on multi-GPU nodes.
Other additions

Updated Shifter's help/usage message.
Added documentation on Manual installation of Shifter with GPU support
Added unit tests and integration tests for the new feature",Changes Unknown when pulling 44392cf on rukkal:gpu_support into ** on NERSC:master**.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,153,2017-01-11T16:50:44Z,2017-02-14T12:56:04Z,2017-02-14T12:56:04Z,MERGED,True,1495,63,32,https://github.com/rukkal,Added GPU support,128,[],https://github.com/NERSC/shifter/pull/153,https://github.com/dmjacobsen,3,https://github.com/NERSC/shifter/pull/153#issuecomment-271935863,"This PR adds GPU support for Shifter. This PR superseeds the previous one that we did in November.
The user interface has changed since the last PR. Now to select one or more GPU devices to be made available inside the container, the user has to set the environment variable CUDA_VISIBLE_DEVICES. The value of CUDA_VISIBLE_DEVICES should be a comma separated list of GPU device IDs. E.g.:
CUDA_VISIBLE_DEVICES=0,2 shifter --image=cuda-samples:latest ./deviceQuery

When using the SLURM Workload Manager, CUDA_VISIBLE_DEVICES is always exported, and the user can control the selected GPU devices through the Generic Resource Scheduling, e.g.:
srun --gres=gpu:<NumGPUsPerNode>

Thus, Shifter can transparently support GPUs selected by the SLURM GRES plugin.
CUDA toolkit must be installed inside the image.
How it works
When GPU support is requested, Shifter executes the activate_gpu_support.sh bash script. The script bind mounts available NVIDIA host libraries and binary utilities to the container. The container environment is also updated appropriately (updating PATH and LD_LIBRARY_PATH).
A new parameter inside udiRoot.conf called siteResources allows the user to indicate an absolute path to where site-specific (host) resources will be bind-mounted in the container.
The _UdiRootConfig structure has been updated accordingly.
A full list of the bind mounted site resources can be retrieved at runtime by adding the --verbose command line option. E.g.:
CUDA_VISIBLE_DEVICES=0,2 shifter --verbose --image=cuda-samples:latest ./deviceQuery

Device numbering
The GPU devices exposed inside the container have been verified to be available to CUDA applications with device numbering starting from 0, regardless of the actual device IDs present in CUDA_VISIBLE_DEVICES. E.g. if CUDA_VISIBLE_DEVICES is 2, a CUDA application will still be able to access that GPU as device 0). This means it is possible to transparently use containers requiring a single GPU on multi-GPU nodes.
Other additions

Updated Shifter's help/usage message.
Added documentation on Manual installation of Shifter with GPU support
Added unit tests and integration tests for the new feature","OK, this sounds good.  I'll start reviewing tomorrow morning",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,153,2017-01-11T16:50:44Z,2017-02-14T12:56:04Z,2017-02-14T12:56:04Z,MERGED,True,1495,63,32,https://github.com/rukkal,Added GPU support,128,[],https://github.com/NERSC/shifter/pull/153,https://github.com/dmjacobsen,4,https://github.com/NERSC/shifter/pull/153#issuecomment-272381844,"This PR adds GPU support for Shifter. This PR superseeds the previous one that we did in November.
The user interface has changed since the last PR. Now to select one or more GPU devices to be made available inside the container, the user has to set the environment variable CUDA_VISIBLE_DEVICES. The value of CUDA_VISIBLE_DEVICES should be a comma separated list of GPU device IDs. E.g.:
CUDA_VISIBLE_DEVICES=0,2 shifter --image=cuda-samples:latest ./deviceQuery

When using the SLURM Workload Manager, CUDA_VISIBLE_DEVICES is always exported, and the user can control the selected GPU devices through the Generic Resource Scheduling, e.g.:
srun --gres=gpu:<NumGPUsPerNode>

Thus, Shifter can transparently support GPUs selected by the SLURM GRES plugin.
CUDA toolkit must be installed inside the image.
How it works
When GPU support is requested, Shifter executes the activate_gpu_support.sh bash script. The script bind mounts available NVIDIA host libraries and binary utilities to the container. The container environment is also updated appropriately (updating PATH and LD_LIBRARY_PATH).
A new parameter inside udiRoot.conf called siteResources allows the user to indicate an absolute path to where site-specific (host) resources will be bind-mounted in the container.
The _UdiRootConfig structure has been updated accordingly.
A full list of the bind mounted site resources can be retrieved at runtime by adding the --verbose command line option. E.g.:
CUDA_VISIBLE_DEVICES=0,2 shifter --verbose --image=cuda-samples:latest ./deviceQuery

Device numbering
The GPU devices exposed inside the container have been verified to be available to CUDA applications with device numbering starting from 0, regardless of the actual device IDs present in CUDA_VISIBLE_DEVICES. E.g. if CUDA_VISIBLE_DEVICES is 2, a CUDA application will still be able to access that GPU as device 0). This means it is possible to transparently use containers requiring a single GPU on multi-GPU nodes.
Other additions

Updated Shifter's help/usage message.
Added documentation on Manual installation of Shifter with GPU support
Added unit tests and integration tests for the new feature","Hello,
Would it be possible to move the struct gpu_support_config * pointer into UdiRootConfig?  That way the function arguments don't need to be extended with another configuration data structure.  I'd like to try to consolidate the state-configuration, as much as possible, to within the UdiRootConfig data structure to keep code maintenance simpler.  Is there a reason you would like to keep it out of the config?
Thanks,
Doug",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,153,2017-01-11T16:50:44Z,2017-02-14T12:56:04Z,2017-02-14T12:56:04Z,MERGED,True,1495,63,32,https://github.com/rukkal,Added GPU support,128,[],https://github.com/NERSC/shifter/pull/153,https://github.com/rukkal,5,https://github.com/NERSC/shifter/pull/153#issuecomment-272496547,"This PR adds GPU support for Shifter. This PR superseeds the previous one that we did in November.
The user interface has changed since the last PR. Now to select one or more GPU devices to be made available inside the container, the user has to set the environment variable CUDA_VISIBLE_DEVICES. The value of CUDA_VISIBLE_DEVICES should be a comma separated list of GPU device IDs. E.g.:
CUDA_VISIBLE_DEVICES=0,2 shifter --image=cuda-samples:latest ./deviceQuery

When using the SLURM Workload Manager, CUDA_VISIBLE_DEVICES is always exported, and the user can control the selected GPU devices through the Generic Resource Scheduling, e.g.:
srun --gres=gpu:<NumGPUsPerNode>

Thus, Shifter can transparently support GPUs selected by the SLURM GRES plugin.
CUDA toolkit must be installed inside the image.
How it works
When GPU support is requested, Shifter executes the activate_gpu_support.sh bash script. The script bind mounts available NVIDIA host libraries and binary utilities to the container. The container environment is also updated appropriately (updating PATH and LD_LIBRARY_PATH).
A new parameter inside udiRoot.conf called siteResources allows the user to indicate an absolute path to where site-specific (host) resources will be bind-mounted in the container.
The _UdiRootConfig structure has been updated accordingly.
A full list of the bind mounted site resources can be retrieved at runtime by adding the --verbose command line option. E.g.:
CUDA_VISIBLE_DEVICES=0,2 shifter --verbose --image=cuda-samples:latest ./deviceQuery

Device numbering
The GPU devices exposed inside the container have been verified to be available to CUDA applications with device numbering starting from 0, regardless of the actual device IDs present in CUDA_VISIBLE_DEVICES. E.g. if CUDA_VISIBLE_DEVICES is 2, a CUDA application will still be able to access that GPU as device 0). This means it is possible to transparently use containers requiring a single GPU on multi-GPU nodes.
Other additions

Updated Shifter's help/usage message.
Added documentation on Manual installation of Shifter with GPU support
Added unit tests and integration tests for the new feature","Hello Doug,
I see your point to group all the configurations in order to easily pass them around and keep the function calls clean. I will move the struct gpu_support_config into UdiRootConfig. I will update the pull request in the next few days.
Have a great weekend
Kean",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,153,2017-01-11T16:50:44Z,2017-02-14T12:56:04Z,2017-02-14T12:56:04Z,MERGED,True,1495,63,32,https://github.com/rukkal,Added GPU support,128,[],https://github.com/NERSC/shifter/pull/153,https://github.com/coveralls,6,https://github.com/NERSC/shifter/pull/153#issuecomment-273215398,"This PR adds GPU support for Shifter. This PR superseeds the previous one that we did in November.
The user interface has changed since the last PR. Now to select one or more GPU devices to be made available inside the container, the user has to set the environment variable CUDA_VISIBLE_DEVICES. The value of CUDA_VISIBLE_DEVICES should be a comma separated list of GPU device IDs. E.g.:
CUDA_VISIBLE_DEVICES=0,2 shifter --image=cuda-samples:latest ./deviceQuery

When using the SLURM Workload Manager, CUDA_VISIBLE_DEVICES is always exported, and the user can control the selected GPU devices through the Generic Resource Scheduling, e.g.:
srun --gres=gpu:<NumGPUsPerNode>

Thus, Shifter can transparently support GPUs selected by the SLURM GRES plugin.
CUDA toolkit must be installed inside the image.
How it works
When GPU support is requested, Shifter executes the activate_gpu_support.sh bash script. The script bind mounts available NVIDIA host libraries and binary utilities to the container. The container environment is also updated appropriately (updating PATH and LD_LIBRARY_PATH).
A new parameter inside udiRoot.conf called siteResources allows the user to indicate an absolute path to where site-specific (host) resources will be bind-mounted in the container.
The _UdiRootConfig structure has been updated accordingly.
A full list of the bind mounted site resources can be retrieved at runtime by adding the --verbose command line option. E.g.:
CUDA_VISIBLE_DEVICES=0,2 shifter --verbose --image=cuda-samples:latest ./deviceQuery

Device numbering
The GPU devices exposed inside the container have been verified to be available to CUDA applications with device numbering starting from 0, regardless of the actual device IDs present in CUDA_VISIBLE_DEVICES. E.g. if CUDA_VISIBLE_DEVICES is 2, a CUDA application will still be able to access that GPU as device 0). This means it is possible to transparently use containers requiring a single GPU on multi-GPU nodes.
Other additions

Updated Shifter's help/usage message.
Added documentation on Manual installation of Shifter with GPU support
Added unit tests and integration tests for the new feature",Changes Unknown when pulling 8053e2e on rukkal:gpu_support into ** on NERSC:master**.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,153,2017-01-11T16:50:44Z,2017-02-14T12:56:04Z,2017-02-14T12:56:04Z,MERGED,True,1495,63,32,https://github.com/rukkal,Added GPU support,128,[],https://github.com/NERSC/shifter/pull/153,https://github.com/rukkal,7,https://github.com/NERSC/shifter/pull/153#issuecomment-273218786,"This PR adds GPU support for Shifter. This PR superseeds the previous one that we did in November.
The user interface has changed since the last PR. Now to select one or more GPU devices to be made available inside the container, the user has to set the environment variable CUDA_VISIBLE_DEVICES. The value of CUDA_VISIBLE_DEVICES should be a comma separated list of GPU device IDs. E.g.:
CUDA_VISIBLE_DEVICES=0,2 shifter --image=cuda-samples:latest ./deviceQuery

When using the SLURM Workload Manager, CUDA_VISIBLE_DEVICES is always exported, and the user can control the selected GPU devices through the Generic Resource Scheduling, e.g.:
srun --gres=gpu:<NumGPUsPerNode>

Thus, Shifter can transparently support GPUs selected by the SLURM GRES plugin.
CUDA toolkit must be installed inside the image.
How it works
When GPU support is requested, Shifter executes the activate_gpu_support.sh bash script. The script bind mounts available NVIDIA host libraries and binary utilities to the container. The container environment is also updated appropriately (updating PATH and LD_LIBRARY_PATH).
A new parameter inside udiRoot.conf called siteResources allows the user to indicate an absolute path to where site-specific (host) resources will be bind-mounted in the container.
The _UdiRootConfig structure has been updated accordingly.
A full list of the bind mounted site resources can be retrieved at runtime by adding the --verbose command line option. E.g.:
CUDA_VISIBLE_DEVICES=0,2 shifter --verbose --image=cuda-samples:latest ./deviceQuery

Device numbering
The GPU devices exposed inside the container have been verified to be available to CUDA applications with device numbering starting from 0, regardless of the actual device IDs present in CUDA_VISIBLE_DEVICES. E.g. if CUDA_VISIBLE_DEVICES is 2, a CUDA application will still be able to access that GPU as device 0). This means it is possible to transparently use containers requiring a single GPU on multi-GPU nodes.
Other additions

Updated Shifter's help/usage message.
Added documentation on Manual installation of Shifter with GPU support
Added unit tests and integration tests for the new feature","Hello Doug,
I pushed the changes that you requested.
Kean",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,153,2017-01-11T16:50:44Z,2017-02-14T12:56:04Z,2017-02-14T12:56:04Z,MERGED,True,1495,63,32,https://github.com/rukkal,Added GPU support,128,[],https://github.com/NERSC/shifter/pull/153,https://github.com/scanon,8,https://github.com/NERSC/shifter/pull/153#issuecomment-275313019,"This PR adds GPU support for Shifter. This PR superseeds the previous one that we did in November.
The user interface has changed since the last PR. Now to select one or more GPU devices to be made available inside the container, the user has to set the environment variable CUDA_VISIBLE_DEVICES. The value of CUDA_VISIBLE_DEVICES should be a comma separated list of GPU device IDs. E.g.:
CUDA_VISIBLE_DEVICES=0,2 shifter --image=cuda-samples:latest ./deviceQuery

When using the SLURM Workload Manager, CUDA_VISIBLE_DEVICES is always exported, and the user can control the selected GPU devices through the Generic Resource Scheduling, e.g.:
srun --gres=gpu:<NumGPUsPerNode>

Thus, Shifter can transparently support GPUs selected by the SLURM GRES plugin.
CUDA toolkit must be installed inside the image.
How it works
When GPU support is requested, Shifter executes the activate_gpu_support.sh bash script. The script bind mounts available NVIDIA host libraries and binary utilities to the container. The container environment is also updated appropriately (updating PATH and LD_LIBRARY_PATH).
A new parameter inside udiRoot.conf called siteResources allows the user to indicate an absolute path to where site-specific (host) resources will be bind-mounted in the container.
The _UdiRootConfig structure has been updated accordingly.
A full list of the bind mounted site resources can be retrieved at runtime by adding the --verbose command line option. E.g.:
CUDA_VISIBLE_DEVICES=0,2 shifter --verbose --image=cuda-samples:latest ./deviceQuery

Device numbering
The GPU devices exposed inside the container have been verified to be available to CUDA applications with device numbering starting from 0, regardless of the actual device IDs present in CUDA_VISIBLE_DEVICES. E.g. if CUDA_VISIBLE_DEVICES is 2, a CUDA application will still be able to access that GPU as device 0). This means it is possible to transparently use containers requiring a single GPU on multi-GPU nodes.
Other additions

Updated Shifter's help/usage message.
Added documentation on Manual installation of Shifter with GPU support
Added unit tests and integration tests for the new feature",@dmjacobsen Have you had a chance to review the update?,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,153,2017-01-11T16:50:44Z,2017-02-14T12:56:04Z,2017-02-14T12:56:04Z,MERGED,True,1495,63,32,https://github.com/rukkal,Added GPU support,128,[],https://github.com/NERSC/shifter/pull/153,https://github.com/lichinka,9,https://github.com/NERSC/shifter/pull/153#issuecomment-279691410,"This PR adds GPU support for Shifter. This PR superseeds the previous one that we did in November.
The user interface has changed since the last PR. Now to select one or more GPU devices to be made available inside the container, the user has to set the environment variable CUDA_VISIBLE_DEVICES. The value of CUDA_VISIBLE_DEVICES should be a comma separated list of GPU device IDs. E.g.:
CUDA_VISIBLE_DEVICES=0,2 shifter --image=cuda-samples:latest ./deviceQuery

When using the SLURM Workload Manager, CUDA_VISIBLE_DEVICES is always exported, and the user can control the selected GPU devices through the Generic Resource Scheduling, e.g.:
srun --gres=gpu:<NumGPUsPerNode>

Thus, Shifter can transparently support GPUs selected by the SLURM GRES plugin.
CUDA toolkit must be installed inside the image.
How it works
When GPU support is requested, Shifter executes the activate_gpu_support.sh bash script. The script bind mounts available NVIDIA host libraries and binary utilities to the container. The container environment is also updated appropriately (updating PATH and LD_LIBRARY_PATH).
A new parameter inside udiRoot.conf called siteResources allows the user to indicate an absolute path to where site-specific (host) resources will be bind-mounted in the container.
The _UdiRootConfig structure has been updated accordingly.
A full list of the bind mounted site resources can be retrieved at runtime by adding the --verbose command line option. E.g.:
CUDA_VISIBLE_DEVICES=0,2 shifter --verbose --image=cuda-samples:latest ./deviceQuery

Device numbering
The GPU devices exposed inside the container have been verified to be available to CUDA applications with device numbering starting from 0, regardless of the actual device IDs present in CUDA_VISIBLE_DEVICES. E.g. if CUDA_VISIBLE_DEVICES is 2, a CUDA application will still be able to access that GPU as device 0). This means it is possible to transparently use containers requiring a single GPU on multi-GPU nodes.
Other additions

Updated Shifter's help/usage message.
Added documentation on Manual installation of Shifter with GPU support
Added unit tests and integration tests for the new feature","Hello,
is there any update about this pull request?
@dmjacobsen Let me know if we can help you with anything.
Lucas",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,153,2017-01-11T16:50:44Z,2017-02-14T12:56:04Z,2017-02-14T12:56:04Z,MERGED,True,1495,63,32,https://github.com/rukkal,Added GPU support,128,[],https://github.com/NERSC/shifter/pull/153,https://github.com/dmjacobsen,10,https://github.com/NERSC/shifter/pull/153#issuecomment-279700030,"This PR adds GPU support for Shifter. This PR superseeds the previous one that we did in November.
The user interface has changed since the last PR. Now to select one or more GPU devices to be made available inside the container, the user has to set the environment variable CUDA_VISIBLE_DEVICES. The value of CUDA_VISIBLE_DEVICES should be a comma separated list of GPU device IDs. E.g.:
CUDA_VISIBLE_DEVICES=0,2 shifter --image=cuda-samples:latest ./deviceQuery

When using the SLURM Workload Manager, CUDA_VISIBLE_DEVICES is always exported, and the user can control the selected GPU devices through the Generic Resource Scheduling, e.g.:
srun --gres=gpu:<NumGPUsPerNode>

Thus, Shifter can transparently support GPUs selected by the SLURM GRES plugin.
CUDA toolkit must be installed inside the image.
How it works
When GPU support is requested, Shifter executes the activate_gpu_support.sh bash script. The script bind mounts available NVIDIA host libraries and binary utilities to the container. The container environment is also updated appropriately (updating PATH and LD_LIBRARY_PATH).
A new parameter inside udiRoot.conf called siteResources allows the user to indicate an absolute path to where site-specific (host) resources will be bind-mounted in the container.
The _UdiRootConfig structure has been updated accordingly.
A full list of the bind mounted site resources can be retrieved at runtime by adding the --verbose command line option. E.g.:
CUDA_VISIBLE_DEVICES=0,2 shifter --verbose --image=cuda-samples:latest ./deviceQuery

Device numbering
The GPU devices exposed inside the container have been verified to be available to CUDA applications with device numbering starting from 0, regardless of the actual device IDs present in CUDA_VISIBLE_DEVICES. E.g. if CUDA_VISIBLE_DEVICES is 2, a CUDA application will still be able to access that GPU as device 0). This means it is possible to transparently use containers requiring a single GPU on multi-GPU nodes.
Other additions

Updated Shifter's help/usage message.
Added documentation on Manual installation of Shifter with GPU support
Added unit tests and integration tests for the new feature",I'll merge this.  We may start extending some of these interfaces to do some of the other planned updates for the next release.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,154,2017-01-12T19:08:19Z,2017-01-12T19:43:51Z,2017-01-12T19:43:51Z,MERGED,True,312,49,4,https://github.com/scanon,Fixperms2,2,[],https://github.com/NERSC/shifter/pull/154,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/154,"This fixes a bug one of our users encountered.  This type of sequence can show it...
RUN touch /tmp/b && chmod 400 /tmp/b
RUN chmod 600 /tmp/b && echo blah > /tmp/b && chmod 400 /tmp/b","This fixes a bug one of our users encountered.  This type of sequence can show it...
RUN touch /tmp/b && chmod 400 /tmp/b
RUN chmod 600 /tmp/b && echo blah > /tmp/b && chmod 400 /tmp/b",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,155,2017-01-25T15:05:41Z,2017-11-08T04:12:31Z,2017-11-08T04:12:31Z,CLOSED,False,62,18,1,https://github.com/rmsds,Add non-SOCKS proxy support to dockerv2,4,[],https://github.com/NERSC/shifter/pull/155,https://github.com/rmsds,1,https://github.com/NERSC/shifter/pull/155,"refactor setupHttpConn to use urlparse
check noproxy environment variable
handle http(s)_proxy variables if present

Signed-off-by: Ricardo Silva ricardo.silva@epfl.ch","refactor setupHttpConn to use urlparse
check noproxy environment variable
handle http(s)_proxy variables if present

Signed-off-by: Ricardo Silva ricardo.silva@epfl.ch",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,155,2017-01-25T15:05:41Z,2017-11-08T04:12:31Z,2017-11-08T04:12:31Z,CLOSED,False,62,18,1,https://github.com/rmsds,Add non-SOCKS proxy support to dockerv2,4,[],https://github.com/NERSC/shifter/pull/155,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/155#issuecomment-275136735,"refactor setupHttpConn to use urlparse
check noproxy environment variable
handle http(s)_proxy variables if present

Signed-off-by: Ricardo Silva ricardo.silva@epfl.ch",Coverage decreased (-0.2%) to 65.466% when pulling 1c7e605 on epfl-scitas:httpProxySupport into f45c9f5 on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,155,2017-01-25T15:05:41Z,2017-11-08T04:12:31Z,2017-11-08T04:12:31Z,CLOSED,False,62,18,1,https://github.com/rmsds,Add non-SOCKS proxy support to dockerv2,4,[],https://github.com/NERSC/shifter/pull/155,https://github.com/scanon,3,https://github.com/NERSC/shifter/pull/155#issuecomment-275312935,"refactor setupHttpConn to use urlparse
check noproxy environment variable
handle http(s)_proxy variables if present

Signed-off-by: Ricardo Silva ricardo.silva@epfl.ch",Could we add a test or two around this and maybe some documentation?,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,155,2017-01-25T15:05:41Z,2017-11-08T04:12:31Z,2017-11-08T04:12:31Z,CLOSED,False,62,18,1,https://github.com/rmsds,Add non-SOCKS proxy support to dockerv2,4,[],https://github.com/NERSC/shifter/pull/155,https://github.com/rmsds,4,https://github.com/NERSC/shifter/pull/155#issuecomment-275423740,"refactor setupHttpConn to use urlparse
check noproxy environment variable
handle http(s)_proxy variables if present

Signed-off-by: Ricardo Silva ricardo.silva@epfl.ch",I'll fix the typo and add a few tests.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,155,2017-01-25T15:05:41Z,2017-11-08T04:12:31Z,2017-11-08T04:12:31Z,CLOSED,False,62,18,1,https://github.com/rmsds,Add non-SOCKS proxy support to dockerv2,4,[],https://github.com/NERSC/shifter/pull/155,https://github.com/coveralls,5,https://github.com/NERSC/shifter/pull/155#issuecomment-275428376,"refactor setupHttpConn to use urlparse
check noproxy environment variable
handle http(s)_proxy variables if present

Signed-off-by: Ricardo Silva ricardo.silva@epfl.ch",Coverage decreased (-0.2%) to 65.466% when pulling 19126f5 on epfl-scitas:httpProxySupport into f45c9f5 on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,155,2017-01-25T15:05:41Z,2017-11-08T04:12:31Z,2017-11-08T04:12:31Z,CLOSED,False,62,18,1,https://github.com/rmsds,Add non-SOCKS proxy support to dockerv2,4,[],https://github.com/NERSC/shifter/pull/155,https://github.com/coveralls,6,https://github.com/NERSC/shifter/pull/155#issuecomment-282805166,"refactor setupHttpConn to use urlparse
check noproxy environment variable
handle http(s)_proxy variables if present

Signed-off-by: Ricardo Silva ricardo.silva@epfl.ch",Coverage decreased (-0.2%) to 67.662% when pulling b4abbe4 on epfl-scitas:httpProxySupport into c8c8449 on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,155,2017-01-25T15:05:41Z,2017-11-08T04:12:31Z,2017-11-08T04:12:31Z,CLOSED,False,62,18,1,https://github.com/rmsds,Add non-SOCKS proxy support to dockerv2,4,[],https://github.com/NERSC/shifter/pull/155,https://github.com/scanon,7,https://github.com/NERSC/shifter/pull/155#issuecomment-342705716,"refactor setupHttpConn to use urlparse
check noproxy environment variable
handle http(s)_proxy variables if present

Signed-off-by: Ricardo Silva ricardo.silva@epfl.ch",I'm closing this out and working on merging with the dev branch which will eventually become the next release.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,157,2017-02-20T20:05:38Z,2017-02-25T00:15:22Z,2017-05-24T15:29:21Z,MERGED,True,2098,870,30,https://github.com/scanon,Private repos and ACL support,12,[],https://github.com/NERSC/shifter/pull/157,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/157,"The long overdue ACL support.
I may submit a few more commits to improve testing, but this should be sufficient for review.
This PR implements support for private repos and ACL management of images.
It also includes a host (too many) pep8 fixes throughout the python code base.
See doc/ACLDesgin.md for a basic overview.  But more detail is needed.  So
consider this kind of a WIP.
Tests have been added for most things but additional tests wouldn't hurt
especially in the C code which doesn't have any new tests yet.
Thanks to @cfenoy for the wire-up of the tokens.  I've manually merged that here versus trying to figure out how to merge his original PR.","The long overdue ACL support.
I may submit a few more commits to improve testing, but this should be sufficient for review.
This PR implements support for private repos and ACL management of images.
It also includes a host (too many) pep8 fixes throughout the python code base.
See doc/ACLDesgin.md for a basic overview.  But more detail is needed.  So
consider this kind of a WIP.
Tests have been added for most things but additional tests wouldn't hurt
especially in the C code which doesn't have any new tests yet.
Thanks to @cfenoy for the wire-up of the tokens.  I've manually merged that here versus trying to figure out how to merge his original PR.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,157,2017-02-20T20:05:38Z,2017-02-25T00:15:22Z,2017-05-24T15:29:21Z,MERGED,True,2098,870,30,https://github.com/scanon,Private repos and ACL support,12,[],https://github.com/NERSC/shifter/pull/157,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/157#issuecomment-281171570,"The long overdue ACL support.
I may submit a few more commits to improve testing, but this should be sufficient for review.
This PR implements support for private repos and ACL management of images.
It also includes a host (too many) pep8 fixes throughout the python code base.
See doc/ACLDesgin.md for a basic overview.  But more detail is needed.  So
consider this kind of a WIP.
Tests have been added for most things but additional tests wouldn't hurt
especially in the C code which doesn't have any new tests yet.
Thanks to @cfenoy for the wire-up of the tokens.  I've manually merged that here versus trying to figure out how to merge his original PR.",Coverage increased (+0.4%) to 65.82% when pulling 245f64c on scanon:acls into bbb71a7 on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,157,2017-02-20T20:05:38Z,2017-02-25T00:15:22Z,2017-05-24T15:29:21Z,MERGED,True,2098,870,30,https://github.com/scanon,Private repos and ACL support,12,[],https://github.com/NERSC/shifter/pull/157,https://github.com/coveralls,3,https://github.com/NERSC/shifter/pull/157#issuecomment-281448882,"The long overdue ACL support.
I may submit a few more commits to improve testing, but this should be sufficient for review.
This PR implements support for private repos and ACL management of images.
It also includes a host (too many) pep8 fixes throughout the python code base.
See doc/ACLDesgin.md for a basic overview.  But more detail is needed.  So
consider this kind of a WIP.
Tests have been added for most things but additional tests wouldn't hurt
especially in the C code which doesn't have any new tests yet.
Thanks to @cfenoy for the wire-up of the tokens.  I've manually merged that here versus trying to figure out how to merge his original PR.",Coverage increased (+2.4%) to 67.833% when pulling c7a24a1 on scanon:acls into bbb71a7 on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,158,2017-02-26T17:40:53Z,2017-02-27T20:56:16Z,2017-03-05T19:44:41Z,MERGED,True,121,6,5,https://github.com/scanon,Metrics,2,[],https://github.com/NERSC/shifter/pull/158,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/158,Add support for basic metrics on image use.,Add support for basic metrics on image use.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,158,2017-02-26T17:40:53Z,2017-02-27T20:56:16Z,2017-03-05T19:44:41Z,MERGED,True,121,6,5,https://github.com/scanon,Metrics,2,[],https://github.com/NERSC/shifter/pull/158,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/158#issuecomment-282573108,Add support for basic metrics on image use.,Coverage increased (+0.3%) to 68.094% when pulling d1b7eb3 on scanon:metrics into c8c8449 on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,159,2017-03-02T01:22:02Z,2017-03-09T15:48:01Z,2018-03-28T05:38:34Z,CLOSED,False,44,46,8,https://github.com/scanon,Make the siteResource parameter optional,3,[],https://github.com/NERSC/shifter/pull/159,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/159,I would like to make the siteResource parameter optional so that sites that upgrade aren't forced to update their config files.  Please review this and make sure I didn't make any bad assumptions.,I would like to make the siteResource parameter optional so that sites that upgrade aren't forced to update their config files.  Please review this and make sure I didn't make any bad assumptions.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,159,2017-03-02T01:22:02Z,2017-03-09T15:48:01Z,2018-03-28T05:38:34Z,CLOSED,False,44,46,8,https://github.com/scanon,Make the siteResource parameter optional,3,[],https://github.com/NERSC/shifter/pull/159,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/159#issuecomment-283564896,I would like to make the siteResource parameter optional so that sites that upgrade aren't forced to update their config files.  Please review this and make sure I didn't make any bad assumptions.,Coverage decreased (-0.08%) to 68.013% when pulling 7fadac8 on scanon:siteoptional into 00507c2 on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,159,2017-03-02T01:22:02Z,2017-03-09T15:48:01Z,2018-03-28T05:38:34Z,CLOSED,False,44,46,8,https://github.com/scanon,Make the siteResource parameter optional,3,[],https://github.com/NERSC/shifter/pull/159,https://github.com/coveralls,3,https://github.com/NERSC/shifter/pull/159#issuecomment-283853276,I would like to make the siteResource parameter optional so that sites that upgrade aren't forced to update their config files.  Please review this and make sure I didn't make any bad assumptions.,Coverage decreased (-0.08%) to 68.013% when pulling ec253fe on scanon:siteoptional into 00507c2 on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,159,2017-03-02T01:22:02Z,2017-03-09T15:48:01Z,2018-03-28T05:38:34Z,CLOSED,False,44,46,8,https://github.com/scanon,Make the siteResource parameter optional,3,[],https://github.com/NERSC/shifter/pull/159,https://github.com/rukkal,4,https://github.com/NERSC/shifter/pull/159#issuecomment-284340317,I would like to make the siteResource parameter optional so that sites that upgrade aren't forced to update their config files.  Please review this and make sure I didn't make any bad assumptions.,"Hi Shane, thank you for giving us the opportunity to review the pull request. I have the following comments:

I reproduced the GCC problem on CentOS 6 and I was able to solve it by rewriting two lines of code, without moving the definition of ""struct gpu_support_config"" around. Please have a look at this commit.
With this pull request Shifter would segfault when the user asks to activate the GPU support, but no ""siteResources"" have been configured. Please have a look at this commit for a possible fix.

I pushed the two commits mentioned above on my ""siteoptional"" branch. Basically it is your branch with the modifications that I propose.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,159,2017-03-02T01:22:02Z,2017-03-09T15:48:01Z,2018-03-28T05:38:34Z,CLOSED,False,44,46,8,https://github.com/scanon,Make the siteResource parameter optional,3,[],https://github.com/NERSC/shifter/pull/159,https://github.com/scanon,5,https://github.com/NERSC/shifter/pull/159#issuecomment-284433860,I would like to make the siteResource parameter optional so that sites that upgrade aren't forced to update their config files.  Please review this and make sure I didn't make any bad assumptions.,@rukkal let's close this PR out and you issue a new one against your branch and I will merge it. You caught the issue I was worried about which was a null pointer but I couldn't figure out how to trigger it.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,159,2017-03-02T01:22:02Z,2017-03-09T15:48:01Z,2018-03-28T05:38:34Z,CLOSED,False,44,46,8,https://github.com/scanon,Make the siteResource parameter optional,3,[],https://github.com/NERSC/shifter/pull/159,https://github.com/rukkal,6,https://github.com/NERSC/shifter/pull/159#issuecomment-284650537,I would like to make the siteResource parameter optional so that sites that upgrade aren't forced to update their config files.  Please review this and make sure I didn't make any bad assumptions.,"@scanon Ok, I will run our test suite against my branch and then I will make the new PR.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,159,2017-03-02T01:22:02Z,2017-03-09T15:48:01Z,2018-03-28T05:38:34Z,CLOSED,False,44,46,8,https://github.com/scanon,Make the siteResource parameter optional,3,[],https://github.com/NERSC/shifter/pull/159,https://github.com/scanon,7,https://github.com/NERSC/shifter/pull/159#issuecomment-285389278,I would like to make the siteResource parameter optional so that sites that upgrade aren't forced to update their config files.  Please review this and make sure I didn't make any bad assumptions.,Subsumed by Kean's PR,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,160,2017-03-03T17:38:42Z,2017-03-03T19:39:08Z,2017-03-05T19:45:28Z,MERGED,True,7,2,2,https://github.com/scanon,Fix for image records with no ACLs,1,[],https://github.com/NERSC/shifter/pull/160,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/160,Lisa found an edge case that wasn't covered.,Lisa found an edge case that wasn't covered.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,160,2017-03-03T17:38:42Z,2017-03-03T19:39:08Z,2017-03-05T19:45:28Z,MERGED,True,7,2,2,https://github.com/scanon,Fix for image records with no ACLs,1,[],https://github.com/NERSC/shifter/pull/160,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/160#issuecomment-284021170,Lisa found an edge case that wasn't covered.,Coverage increased (+0.02%) to 68.118% when pulling 9059dd7 on scanon:aclfix into 00507c2 on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,161,2017-03-05T19:51:11Z,2017-03-06T18:16:55Z,2017-05-24T15:33:22Z,MERGED,True,6,1,2,https://github.com/scanon,Fixes to RPM build including building on centos6.,1,[],https://github.com/NERSC/shifter/pull/161,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/161,"Add fossils to path for zlib
Force older celery for centos 6","Add fossils to path for zlib
Force older celery for centos 6",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,161,2017-03-05T19:51:11Z,2017-03-06T18:16:55Z,2017-05-24T15:33:22Z,MERGED,True,6,1,2,https://github.com/scanon,Fixes to RPM build including building on centos6.,1,[],https://github.com/NERSC/shifter/pull/161,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/161#issuecomment-284257469,"Add fossils to path for zlib
Force older celery for centos 6",Coverage remained the same at 68.118% when pulling d05138d on scanon:rpmfixes into 4d132db on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,161,2017-03-05T19:51:11Z,2017-03-06T18:16:55Z,2017-05-24T15:33:22Z,MERGED,True,6,1,2,https://github.com/scanon,Fixes to RPM build including building on centos6.,1,[],https://github.com/NERSC/shifter/pull/161,https://github.com/alanmutsch,3,https://github.com/NERSC/shifter/pull/161#issuecomment-284414159,"Add fossils to path for zlib
Force older celery for centos 6",This should address #152.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,162,2017-03-08T18:15:36Z,2017-10-19T17:44:17Z,2017-11-10T19:23:07Z,CLOSED,False,16,11,1,https://github.com/scanon,This change allows the user to mount a volume if they own the path.,1,[],https://github.com/NERSC/shifter/pull/162,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/162,It also includes some automatic fixes by my editor (mainly removing white spaces).,It also includes some automatic fixes by my editor (mainly removing white spaces).,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,162,2017-03-08T18:15:36Z,2017-10-19T17:44:17Z,2017-11-10T19:23:07Z,CLOSED,False,16,11,1,https://github.com/scanon,This change allows the user to mount a volume if they own the path.,1,[],https://github.com/NERSC/shifter/pull/162,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/162#issuecomment-285123753,It also includes some automatic fixes by my editor (mainly removing white spaces).,Coverage decreased (-0.03%) to 68.087% when pulling 61ba512 on scanon:overmount into 5de8168 on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,162,2017-03-08T18:15:36Z,2017-10-19T17:44:17Z,2017-11-10T19:23:07Z,CLOSED,False,16,11,1,https://github.com/scanon,This change allows the user to mount a volume if they own the path.,1,[],https://github.com/NERSC/shifter/pull/162,https://github.com/dmjacobsen,3,https://github.com/NERSC/shifter/pull/162#issuecomment-337983723,It also includes some automatic fixes by my editor (mainly removing white spaces).,"This has been merged onto the ""dev"" branch.  I will close the PR.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,163,2017-03-09T10:29:11Z,2017-03-09T16:04:15Z,2017-03-09T16:04:15Z,MERGED,True,36,33,5,https://github.com/rukkal,Make the siteResource parameter optional,4,[],https://github.com/NERSC/shifter/pull/163,https://github.com/rukkal,1,https://github.com/NERSC/shifter/pull/163,"@scanon wanted to make the siteResource parameter optional so that sites that upgrade aren't forced to update their config files.
This PR is Shane's original PR to make ""siteResource"" optional with the changes that I proposed.","@scanon wanted to make the siteResource parameter optional so that sites that upgrade aren't forced to update their config files.
This PR is Shane's original PR to make ""siteResource"" optional with the changes that I proposed.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,163,2017-03-09T10:29:11Z,2017-03-09T16:04:15Z,2017-03-09T16:04:15Z,MERGED,True,36,33,5,https://github.com/rukkal,Make the siteResource parameter optional,4,[],https://github.com/NERSC/shifter/pull/163,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/163#issuecomment-285316019,"@scanon wanted to make the siteResource parameter optional so that sites that upgrade aren't forced to update their config files.
This PR is Shane's original PR to make ""siteResource"" optional with the changes that I proposed.",Coverage decreased (-0.1%) to 68.007% when pulling 89b01e7 on rukkal:siteoptional into 5de8168 on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,163,2017-03-09T10:29:11Z,2017-03-09T16:04:15Z,2017-03-09T16:04:15Z,MERGED,True,36,33,5,https://github.com/rukkal,Make the siteResource parameter optional,4,[],https://github.com/NERSC/shifter/pull/163,https://github.com/scanon,3,https://github.com/NERSC/shifter/pull/163#issuecomment-285389067,"@scanon wanted to make the siteResource parameter optional so that sites that upgrade aren't forced to update their config files.
This PR is Shane's original PR to make ""siteResource"" optional with the changes that I proposed.",Thanks Kean,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,166,2017-03-29T01:10:18Z,2017-10-19T17:48:39Z,2017-11-10T19:29:24Z,CLOSED,False,114,82,9,https://github.com/scanon,Clean up and prep for release,11,[],https://github.com/NERSC/shifter/pull/166,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/166,Merge the volume mount fix first.,Merge the volume mount fix first.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,166,2017-03-29T01:10:18Z,2017-10-19T17:48:39Z,2017-11-10T19:29:24Z,CLOSED,False,114,82,9,https://github.com/scanon,Clean up and prep for release,11,[],https://github.com/NERSC/shifter/pull/166,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/166#issuecomment-289952901,Merge the volume mount fix first.,Coverage decreased (-0.03%) to 67.976% when pulling c01a152 on scanon:releaseprep into 9d296ce on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,166,2017-03-29T01:10:18Z,2017-10-19T17:48:39Z,2017-11-10T19:29:24Z,CLOSED,False,114,82,9,https://github.com/scanon,Clean up and prep for release,11,[],https://github.com/NERSC/shifter/pull/166,https://github.com/coveralls,3,https://github.com/NERSC/shifter/pull/166#issuecomment-295801042,Merge the volume mount fix first.,Coverage decreased (-0.03%) to 67.985% when pulling 988cec4 on scanon:releaseprep into 4dc2134 on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,166,2017-03-29T01:10:18Z,2017-10-19T17:48:39Z,2017-11-10T19:29:24Z,CLOSED,False,114,82,9,https://github.com/scanon,Clean up and prep for release,11,[],https://github.com/NERSC/shifter/pull/166,https://github.com/dmjacobsen,4,https://github.com/NERSC/shifter/pull/166#issuecomment-337984941,Merge the volume mount fix first.,this is merged on to the dev branch,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,167,2017-04-13T00:38:39Z,2017-04-13T00:38:44Z,2017-04-13T00:46:07Z,MERGED,True,39,22,1,https://github.com/scanon,Minor doc updates,1,[],https://github.com/NERSC/shifter/pull/167,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/167,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,168,2017-04-13T00:45:38Z,2017-10-19T17:51:00Z,2017-11-10T19:30:26Z,CLOSED,False,24,1,2,https://github.com/scanon,Handle case when directory changes to a file in later layer,2,[],https://github.com/NERSC/shifter/pull/168,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/168,Please review this closely because the code is a little difficult to parse.,Please review this closely because the code is a little difficult to parse.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,168,2017-04-13T00:45:38Z,2017-10-19T17:51:00Z,2017-11-10T19:30:26Z,CLOSED,False,24,1,2,https://github.com/scanon,Handle case when directory changes to a file in later layer,2,[],https://github.com/NERSC/shifter/pull/168,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/168#issuecomment-293935899,Please review this closely because the code is a little difficult to parse.,Coverage decreased (-0.07%) to 67.933% when pulling 0dcf31b on scanon:chgtype into a5c77ed on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,168,2017-04-13T00:45:38Z,2017-10-19T17:51:00Z,2017-11-10T19:30:26Z,CLOSED,False,24,1,2,https://github.com/scanon,Handle case when directory changes to a file in later layer,2,[],https://github.com/NERSC/shifter/pull/168,https://github.com/dmjacobsen,3,https://github.com/NERSC/shifter/pull/168#issuecomment-337985607,Please review this closely because the code is a little difficult to parse.,this is merged onto the dev branch,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,169,2017-04-14T21:14:28Z,2017-04-20T16:10:03Z,2017-05-24T15:33:50Z,MERGED,True,23,4,3,https://github.com/scanon,Backwardsupport,2,[],https://github.com/NERSC/shifter/pull/169,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/169,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,169,2017-04-14T21:14:28Z,2017-04-20T16:10:03Z,2017-05-24T15:33:50Z,MERGED,True,23,4,3,https://github.com/scanon,Backwardsupport,2,[],https://github.com/NERSC/shifter/pull/169,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/169#issuecomment-294239721,,Coverage increased (+0.009%) to 68.016% when pulling 07093db on scanon:backwardsupport into a5c77ed on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,169,2017-04-14T21:14:28Z,2017-04-20T16:10:03Z,2017-05-24T15:33:50Z,MERGED,True,23,4,3,https://github.com/scanon,Backwardsupport,2,[],https://github.com/NERSC/shifter/pull/169,https://github.com/scanon,3,https://github.com/NERSC/shifter/pull/169#issuecomment-295795188,,I think this is pretty safe so I'm going to merge it.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,171,2017-04-21T18:36:22Z,,2017-04-21T18:43:42Z,OPEN,False,16,48,6,https://github.com/rukkal,WLM integration of GPU support,10,[],https://github.com/NERSC/shifter/pull/171,https://github.com/rukkal,1,https://github.com/NERSC/shifter/pull/171,"This PR adds workload manager integration for GPU support + some minor changes.
We modified setupRoot to attempt to activate the Shifter's GPU support, and if the host doesn't provide GPU resources, the activation is silently skipped.
The minor changes are:

Removed bind mount of some NVIDIA binaries.
Removed execution of nvidia-modprobe to create /dev/nvidia-uvm.","This PR adds workload manager integration for GPU support + some minor changes.
We modified setupRoot to attempt to activate the Shifter's GPU support, and if the host doesn't provide GPU resources, the activation is silently skipped.
The minor changes are:

Removed bind mount of some NVIDIA binaries.
Removed execution of nvidia-modprobe to create /dev/nvidia-uvm.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,171,2017-04-21T18:36:22Z,,2017-04-21T18:43:42Z,OPEN,False,16,48,6,https://github.com/rukkal,WLM integration of GPU support,10,[],https://github.com/NERSC/shifter/pull/171,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/171#issuecomment-296271363,"This PR adds workload manager integration for GPU support + some minor changes.
We modified setupRoot to attempt to activate the Shifter's GPU support, and if the host doesn't provide GPU resources, the activation is silently skipped.
The minor changes are:

Removed bind mount of some NVIDIA binaries.
Removed execution of nvidia-modprobe to create /dev/nvidia-uvm.",Coverage increased (+0.001%) to 68.017% when pulling f4c01e9 on rukkal:gpu_support_wlm_integration into 4dc2134 on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,172,2017-04-28T14:00:49Z,2021-03-02T15:54:34Z,2021-03-02T15:54:34Z,CLOSED,False,810,48,23,https://github.com/rukkal,MPI support,109,[],https://github.com/NERSC/shifter/pull/172,https://github.com/rukkal,1,https://github.com/NERSC/shifter/pull/172,"This PR adds MPI support to Shifter.
The user can activate the MPI support either through the --mpi CLI option of Shifter:
srun -N 2 shifter --mpi --image=ethcscs/dockerfiles:osu5.3.2-mpich3.1.4 /usr/local/libexec/osu-micro-benchmarks/mpi/pt2pt/osu_latency

or through the --shifter-mpi CLI option of the Slurm plugin:
salloc -N 2 --shifter-mpi --image=ethcscs/dockerfiles:osu5.3.2-mpich3.1.4
srun shifter /usr/local/libexec/osu-micro-benchmarks/mpi/pt2pt/osu_latency

How the MPI support works
In order to activate MPI support the compute node must provide an MPI implementation that is MPICH ABI compatible (MPICH ABI compatibility initiative) and the container's application must dynamically link to an MPI library that is also MPICH ABI compatible. We could successfully run MPI applications in containers with MPICH 3.1.4, MVAPICH2 2.2, and Intel MPI Library 2017 Update 1.
The system administrator must specify the location of the compute nodes' MPI libraries through the siteMPISharedLibs parameter in udiRoot.conf. The MPI dependency libraries, i.e. those libraries that the MPI libraries need to access, are configured through the siteMPIDependencyLibs parameter.
Shifter performs the following steps when the user requires the activation of the MPI support:

Searches the MPI shared libraries in the container through the container's ldconfig.
Compares the version numbers in the library filenames to check for ABI compatibility between compute node and container.
Bind mounts the compute node's MPI shared libraries on top of the containers' ones.
Bind mounts the compute node's dependency libraries into the container and updates the container's LD_LIBRARY_PATH accordingly.

Other addition in the PR
We also implemented the Shifter's --version CLI option:
$shifter --version
Shifter 17.04.00","This PR adds MPI support to Shifter.
The user can activate the MPI support either through the --mpi CLI option of Shifter:
srun -N 2 shifter --mpi --image=ethcscs/dockerfiles:osu5.3.2-mpich3.1.4 /usr/local/libexec/osu-micro-benchmarks/mpi/pt2pt/osu_latency

or through the --shifter-mpi CLI option of the Slurm plugin:
salloc -N 2 --shifter-mpi --image=ethcscs/dockerfiles:osu5.3.2-mpich3.1.4
srun shifter /usr/local/libexec/osu-micro-benchmarks/mpi/pt2pt/osu_latency

How the MPI support works
In order to activate MPI support the compute node must provide an MPI implementation that is MPICH ABI compatible (MPICH ABI compatibility initiative) and the container's application must dynamically link to an MPI library that is also MPICH ABI compatible. We could successfully run MPI applications in containers with MPICH 3.1.4, MVAPICH2 2.2, and Intel MPI Library 2017 Update 1.
The system administrator must specify the location of the compute nodes' MPI libraries through the siteMPISharedLibs parameter in udiRoot.conf. The MPI dependency libraries, i.e. those libraries that the MPI libraries need to access, are configured through the siteMPIDependencyLibs parameter.
Shifter performs the following steps when the user requires the activation of the MPI support:

Searches the MPI shared libraries in the container through the container's ldconfig.
Compares the version numbers in the library filenames to check for ABI compatibility between compute node and container.
Bind mounts the compute node's MPI shared libraries on top of the containers' ones.
Bind mounts the compute node's dependency libraries into the container and updates the container's LD_LIBRARY_PATH accordingly.

Other addition in the PR
We also implemented the Shifter's --version CLI option:
$shifter --version
Shifter 17.04.00",True,{'THUMBS_UP': ['https://github.com/thedavidwhiteside']}
NERSC/shifter,https://github.com/NERSC/shifter,172,2017-04-28T14:00:49Z,2021-03-02T15:54:34Z,2021-03-02T15:54:34Z,CLOSED,False,810,48,23,https://github.com/rukkal,MPI support,109,[],https://github.com/NERSC/shifter/pull/172,https://github.com/dmjacobsen,2,https://github.com/NERSC/shifter/pull/172#issuecomment-298006768,"This PR adds MPI support to Shifter.
The user can activate the MPI support either through the --mpi CLI option of Shifter:
srun -N 2 shifter --mpi --image=ethcscs/dockerfiles:osu5.3.2-mpich3.1.4 /usr/local/libexec/osu-micro-benchmarks/mpi/pt2pt/osu_latency

or through the --shifter-mpi CLI option of the Slurm plugin:
salloc -N 2 --shifter-mpi --image=ethcscs/dockerfiles:osu5.3.2-mpich3.1.4
srun shifter /usr/local/libexec/osu-micro-benchmarks/mpi/pt2pt/osu_latency

How the MPI support works
In order to activate MPI support the compute node must provide an MPI implementation that is MPICH ABI compatible (MPICH ABI compatibility initiative) and the container's application must dynamically link to an MPI library that is also MPICH ABI compatible. We could successfully run MPI applications in containers with MPICH 3.1.4, MVAPICH2 2.2, and Intel MPI Library 2017 Update 1.
The system administrator must specify the location of the compute nodes' MPI libraries through the siteMPISharedLibs parameter in udiRoot.conf. The MPI dependency libraries, i.e. those libraries that the MPI libraries need to access, are configured through the siteMPIDependencyLibs parameter.
Shifter performs the following steps when the user requires the activation of the MPI support:

Searches the MPI shared libraries in the container through the container's ldconfig.
Compares the version numbers in the library filenames to check for ABI compatibility between compute node and container.
Bind mounts the compute node's MPI shared libraries on top of the containers' ones.
Bind mounts the compute node's dependency libraries into the container and updates the container's LD_LIBRARY_PATH accordingly.

Other addition in the PR
We also implemented the Shifter's --version CLI option:
$shifter --version
Shifter 17.04.00","I'll have to look at this, the mpich abi support is fully supported by
shifter without modifications, ie following the mpi guide and using the
existing optUdiImage support.


On Apr 28, 2017 7:01 AM, ""Kean Mariotti"" <notifications@github.com> wrote:

This PR adds MPI support to Shifter.

The user can activate the MPI support either through the *--mpi* CLI option
of Shifter:

srun -N 2 shifter --mpi
--image=ethcscs/dockerfiles:osu5.3.2-mpich3.1.4
/usr/local/libexec/osu-micro-benchmarks/mpi/pt2pt/osu_latency

or through the *--shifter-mpi* CLI option of the Slurm plugin:

salloc -N 2 --shifter-mpi --image=ethcscs/dockerfiles:osu5.3.2-mpich3.1.4
srun shifter /usr/local/libexec/osu-micro-benchmarks/mpi/pt2pt/osu_latency

How the MPI support works

In order to activate MPI support the compute node must provide an MPI
implementation that is MPICH ABI compatible (MPICH ABI compatibility
initiative <https://www.mpich.org/abi/>) and the container's application
must dynamically link to an MPI library that is also MPICH ABI compatible.
We could successfully run MPI applications in containers with MPICH 3.1.4,
MVAPICH2 2.2, and Intel MPI Library 2017 Update 1.

The system administrator must specify the location of the compute nodes'
MPI libraries through the *siteMPISharedLibs* parameter in udiRoot.conf.
The MPI dependency libraries, i.e. those libraries that the MPI libraries
need to access, are configured through the *siteMPIDependencyLibs*
parameter.

Shifter performs the following steps when the user requires the activation
of the MPI support:

   1. Searches the MPI shared libraries in the container through the
   container's ldconfig.
   2. Compares the version numbers in the library filenames to check for
   ABI compatibility between compute node and container.
   3. Bind mounts the compute node's MPI shared libraries on top of the
   containers' ones.
   4. Bind mounts the compute node's dependency libraries into the
   container and updates the container's LD_LIBRARY_PATH accordingly.

Other addition in the PR

We also implemented the Shifter's *--version* CLI option:

$shifter --version
Shifter 17.04.00
…
------------------------------
You can view, comment on, or merge this pull request online at:

  #172
Commit Summary

   - first quick and dirty implementation of MPI support
   - README: added ""how to run an MPI job""
   - Merge branch 'cscs' into mpi_support
   - removed hackish prototype mpi-support-hook.sh
   - added activate_mpi_support.sh
   - mpi support: added inspection of container's ld.so.cache
   - added quick-and-dirty MPI support hook
   - mpi_support: added check for dependencies in container image
   - mpi support: implemented used interface
   - mpi support: added checks for siteResources config
   - added function shifter_setupenv_site_resources
   - mpi support: got rid of hard-coded values in activate_mpi_support.sh
   - fixed GPU support integration test
   - mpi support: added configuration instructions to bash script
   - mpi support: check that container has MPI libraries
   - mpi support: changed overriding of container's MPI libraries
   - mpi support: enabled verbose output
   - gpu support integration test: minor refactoring
   - mpi support: minor refactorings in bash script
   - mpi support: added integration test
   - mpi support: fixed integration test
   - mpi support: got rid of debug output in integration test
   - mpi support: removed dead code in bash script
   - mpi support: avoid duplicated bind mounts
   - Merge branch 'master' into cscs
   - mpi support: deleted early prototype of mpi support
   - mpi support: minor renaming
   - mpi support: removed dead code in integration test
   - mpi support: added checks in integration test
   - mpi support: got rid of dead code in integration test
   - mpi support: made changes requested during code review
   - Merge branch 'mpi_support' into 'cscs'
   - removed gitlab files for pull request to NERSC
   - Merge branch 'gpu_support' into mpi_support
   - mpi support: factored out MPI support code
   - refactored utility functions
   - implemented check for site resources' folder existence
   - readded .gitlab.yml
   - fixed site resources path in integration tests
   - Merge branch 'mpi_support' into cscs
   - Merge branch 'gpu_support' into cscs
   - Added command line option to shifter to print version string
   - Added documentation page with required permissions for installation
   and execution
   - Renamed maunualinstallgpu.rst to manualinstall.rst
   - manualinstall.rst: added known issue of CLE
   - Merge branch 'master' into cscs
   - MPI support script: use ""readlink"" instead of ""realpath""
   - MPI support script: less strict regex for library names
   - MPI support script: fixed ABI compatibiliy check
   - MPI support script: updated site libraries for Greina
   - MPI support script: added error message
   - MPI support script: added some dependencies for Greina
   - Merge branch 'mpi_support_fix' into 'cscs'
   - Merge branch 'documented_known_cle_issue' into 'cscs'
   - Moved site-specific MPI support info from bash script to udiRoot.conf
   - Fixed MPI support script
   - Changed siteMPISharedLibs from list of key-value pairs to list of full
   paths
   - Updated manual installation doc page
   - Removed parameter siteMPIBins
   - Fixed CI tests for MPI support
   - Version bump
   - Mount of siteFs: fixed mkdir
   - MR discussion fixes
   - Merge branch 'nersc_master' into cscs
   - Ensure that undefined optional MPI arguments are not dereferenced and
   passed to the bash script
   - Removed unneeded GPU-support binaries
   - Removed load of nvidia-uvm from GPU support script
   - Removed unneeded nvidia binaries from expected test results
   - Corrected documentation about native MPI configuration on Cray
   - bindImageIntoUDI: warn when image's file/folders are overridden
   - Added warnings about siteFs effects on Sphinx documentation manual
   install page
   - bindImageIntoUDI: filtered some warnings about skipped mounts
   - bindImageIntoUDI: cleaned filtering of warnings
   - ImageGW: increased sleep times to fix tests
   - Merge branch 'fix_build_after_imagegw_changes' into 'cscs'
   - Merge branch 'cleaned_filtering_of_warnings' into 'cscs'
   - test_mpi_support.py: switched to ethcscs/dockerfiles
   - Merge branch 'fixed_mpi_support_integration_tests' into 'cscs'
   - mpi support: handle empty MPI configuration options
   - mpi support: removed udiRoot.conf's ""siteMPIConfigurationFiles""
   - mpi support: fixed integration test
   - mpi support: fixed integration test
   - mpi support: improved error messages
   - mpi support: updated doc/install/manuallinstall.rst
   - slurm plugin: updated Makefile
   - slurm plugin: updated unit tests' udiRoot.conf
   - Merge branch 'master' into mpi_support
   - mpi support: fixed error message
   - mpi support: added validation of site resources folder
   - mpi support: integrated with slurm plugin
   - removed dead code
   - Revert ""slurm plugin: updated unit tests' udiRoot.conf""
   - Revert ""Removed unneeded GPU-support binaries""
   - Revert ""Removed load of nvidia-uvm from GPU support script""
   - Revert ""Removed unneeded nvidia binaries from expected test results""
   - Revert ""bindImageIntoUDI: cleaned filtering of warnings""
   - Revert ""bindImageIntoUDI: filtered some warnings about skipped mounts""
   - Revert ""Added warnings about siteFs effects on Sphinx documentation
   manual install page""
   - Revert ""bindImageIntoUDI: warn when image's file/folders are
   overridden""
   - Revert ""Mount of siteFs: fixed mkdir""
   - Revert ""Version bump""
   - mpi support: encapsulated configurations in mpi struct
   - Merge branch 'refactor_mpi_support_configurations' into 'mpi_support'
   - Merge remote-tracking branch 'nersc/master' into mpi_support
   - mpi support: fixed error handling
   - removed .gitlab-ci.yml
   - Revert ""ImageGW: increased sleep times to fix tests""
   - Revert ""Added documentation page with required permissions for
   installation and execution""

File Changes

   - *M* doc/index.rst
   <https://github.com/NERSC/shifter/pull/172/files#diff-0> (2)
   - *R* doc/install/manualinstall.rst
   <https://github.com/NERSC/shifter/pull/172/files#diff-1> (57)
   - *A* extra/CI/integration/test_mpi_support.py
   <https://github.com/NERSC/shifter/pull/172/files#diff-2> (235)
   - *M* extra/CI/integration_test.sh
   <https://github.com/NERSC/shifter/pull/172/files#diff-3> (3)
   - *M* extra/Makefile.am
   <https://github.com/NERSC/shifter/pull/172/files#diff-4> (3)
   - *M* src/Makefile.am
   <https://github.com/NERSC/shifter/pull/172/files#diff-5> (21)
   - *M* src/UdiRootConfig.c
   <https://github.com/NERSC/shifter/pull/172/files#diff-6> (6)
   - *M* src/UdiRootConfig.h
   <https://github.com/NERSC/shifter/pull/172/files#diff-7> (5)
   - *A* src/activate_mpi_support.sh
   <https://github.com/NERSC/shifter/pull/172/files#diff-8> (255)
   - *A* src/mpi_support.c
   <https://github.com/NERSC/shifter/pull/172/files#diff-9> (76)
   - *A* src/mpi_support.h
   <https://github.com/NERSC/shifter/pull/172/files#diff-10> (42)
   - *M* src/setupRoot.c
   <https://github.com/NERSC/shifter/pull/172/files#diff-11> (14)
   - *M* src/shifter.c
   <https://github.com/NERSC/shifter/pull/172/files#diff-12> (19)
   - *M* src/shifter_core.c
   <https://github.com/NERSC/shifter/pull/172/files#diff-13> (6)
   - *M* src/shifter_core.h
   <https://github.com/NERSC/shifter/pull/172/files#diff-14> (1)
   - *M* src/test/Makefile.am
   <https://github.com/NERSC/shifter/pull/172/files#diff-15> (16)
   - *M* src/test/test_shifter_core.cpp
   <https://github.com/NERSC/shifter/pull/172/files#diff-16> (26)
   - *M* udiRoot.conf.example.in
   <https://github.com/NERSC/shifter/pull/172/files#diff-17> (34)
   - *M* wlm_integration/slurm/Makefile.am
   <https://github.com/NERSC/shifter/pull/172/files#diff-18> (3)
   - *M* wlm_integration/slurm/shifterSpank.c
   <https://github.com/NERSC/shifter/pull/172/files#diff-19> (22)
   - *M* wlm_integration/slurm/shifterSpank.h
   <https://github.com/NERSC/shifter/pull/172/files#diff-20> (4)
   - *M* wlm_integration/slurm/test/Makefile.am
   <https://github.com/NERSC/shifter/pull/172/files#diff-21> (16)
   - *M* wlm_integration/slurm/wrapper.c
   <https://github.com/NERSC/shifter/pull/172/files#diff-22> (6)

Patch Links:

   - https://github.com/NERSC/shifter/pull/172.patch
   - https://github.com/NERSC/shifter/pull/172.diff

—
You are receiving this because you are subscribed to this thread.
Reply to this email directly, view it on GitHub
<#172>, or mute the thread
<https://github.com/notifications/unsubscribe-auth/ACGnWIgi0loDwXD0vpgqVu_qyJNjVoXHks5r0fESgaJpZM4NLhnJ>
.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,172,2017-04-28T14:00:49Z,2021-03-02T15:54:34Z,2021-03-02T15:54:34Z,CLOSED,False,810,48,23,https://github.com/rukkal,MPI support,109,[],https://github.com/NERSC/shifter/pull/172,https://github.com/coveralls,3,https://github.com/NERSC/shifter/pull/172#issuecomment-298008370,"This PR adds MPI support to Shifter.
The user can activate the MPI support either through the --mpi CLI option of Shifter:
srun -N 2 shifter --mpi --image=ethcscs/dockerfiles:osu5.3.2-mpich3.1.4 /usr/local/libexec/osu-micro-benchmarks/mpi/pt2pt/osu_latency

or through the --shifter-mpi CLI option of the Slurm plugin:
salloc -N 2 --shifter-mpi --image=ethcscs/dockerfiles:osu5.3.2-mpich3.1.4
srun shifter /usr/local/libexec/osu-micro-benchmarks/mpi/pt2pt/osu_latency

How the MPI support works
In order to activate MPI support the compute node must provide an MPI implementation that is MPICH ABI compatible (MPICH ABI compatibility initiative) and the container's application must dynamically link to an MPI library that is also MPICH ABI compatible. We could successfully run MPI applications in containers with MPICH 3.1.4, MVAPICH2 2.2, and Intel MPI Library 2017 Update 1.
The system administrator must specify the location of the compute nodes' MPI libraries through the siteMPISharedLibs parameter in udiRoot.conf. The MPI dependency libraries, i.e. those libraries that the MPI libraries need to access, are configured through the siteMPIDependencyLibs parameter.
Shifter performs the following steps when the user requires the activation of the MPI support:

Searches the MPI shared libraries in the container through the container's ldconfig.
Compares the version numbers in the library filenames to check for ABI compatibility between compute node and container.
Bind mounts the compute node's MPI shared libraries on top of the containers' ones.
Bind mounts the compute node's dependency libraries into the container and updates the container's LD_LIBRARY_PATH accordingly.

Other addition in the PR
We also implemented the Shifter's --version CLI option:
$shifter --version
Shifter 17.04.00",Coverage increased (+0.09%) to 68.104% when pulling a58461a on rukkal:mpi_support into 4dc2134 on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,172,2017-04-28T14:00:49Z,2021-03-02T15:54:34Z,2021-03-02T15:54:34Z,CLOSED,False,810,48,23,https://github.com/rukkal,MPI support,109,[],https://github.com/NERSC/shifter/pull/172,https://github.com/coveralls,4,https://github.com/NERSC/shifter/pull/172#issuecomment-309366770,"This PR adds MPI support to Shifter.
The user can activate the MPI support either through the --mpi CLI option of Shifter:
srun -N 2 shifter --mpi --image=ethcscs/dockerfiles:osu5.3.2-mpich3.1.4 /usr/local/libexec/osu-micro-benchmarks/mpi/pt2pt/osu_latency

or through the --shifter-mpi CLI option of the Slurm plugin:
salloc -N 2 --shifter-mpi --image=ethcscs/dockerfiles:osu5.3.2-mpich3.1.4
srun shifter /usr/local/libexec/osu-micro-benchmarks/mpi/pt2pt/osu_latency

How the MPI support works
In order to activate MPI support the compute node must provide an MPI implementation that is MPICH ABI compatible (MPICH ABI compatibility initiative) and the container's application must dynamically link to an MPI library that is also MPICH ABI compatible. We could successfully run MPI applications in containers with MPICH 3.1.4, MVAPICH2 2.2, and Intel MPI Library 2017 Update 1.
The system administrator must specify the location of the compute nodes' MPI libraries through the siteMPISharedLibs parameter in udiRoot.conf. The MPI dependency libraries, i.e. those libraries that the MPI libraries need to access, are configured through the siteMPIDependencyLibs parameter.
Shifter performs the following steps when the user requires the activation of the MPI support:

Searches the MPI shared libraries in the container through the container's ldconfig.
Compares the version numbers in the library filenames to check for ABI compatibility between compute node and container.
Bind mounts the compute node's MPI shared libraries on top of the containers' ones.
Bind mounts the compute node's dependency libraries into the container and updates the container's LD_LIBRARY_PATH accordingly.

Other addition in the PR
We also implemented the Shifter's --version CLI option:
$shifter --version
Shifter 17.04.00",Coverage increased (+0.09%) to 68.104% when pulling f68f974 on rukkal:mpi_support into 4dc2134 on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,172,2017-04-28T14:00:49Z,2021-03-02T15:54:34Z,2021-03-02T15:54:34Z,CLOSED,False,810,48,23,https://github.com/rukkal,MPI support,109,[],https://github.com/NERSC/shifter/pull/172,https://github.com/rukkal,5,https://github.com/NERSC/shifter/pull/172#issuecomment-315391673,"This PR adds MPI support to Shifter.
The user can activate the MPI support either through the --mpi CLI option of Shifter:
srun -N 2 shifter --mpi --image=ethcscs/dockerfiles:osu5.3.2-mpich3.1.4 /usr/local/libexec/osu-micro-benchmarks/mpi/pt2pt/osu_latency

or through the --shifter-mpi CLI option of the Slurm plugin:
salloc -N 2 --shifter-mpi --image=ethcscs/dockerfiles:osu5.3.2-mpich3.1.4
srun shifter /usr/local/libexec/osu-micro-benchmarks/mpi/pt2pt/osu_latency

How the MPI support works
In order to activate MPI support the compute node must provide an MPI implementation that is MPICH ABI compatible (MPICH ABI compatibility initiative) and the container's application must dynamically link to an MPI library that is also MPICH ABI compatible. We could successfully run MPI applications in containers with MPICH 3.1.4, MVAPICH2 2.2, and Intel MPI Library 2017 Update 1.
The system administrator must specify the location of the compute nodes' MPI libraries through the siteMPISharedLibs parameter in udiRoot.conf. The MPI dependency libraries, i.e. those libraries that the MPI libraries need to access, are configured through the siteMPIDependencyLibs parameter.
Shifter performs the following steps when the user requires the activation of the MPI support:

Searches the MPI shared libraries in the container through the container's ldconfig.
Compares the version numbers in the library filenames to check for ABI compatibility between compute node and container.
Bind mounts the compute node's MPI shared libraries on top of the containers' ones.
Bind mounts the compute node's dependency libraries into the container and updates the container's LD_LIBRARY_PATH accordingly.

Other addition in the PR
We also implemented the Shifter's --version CLI option:
$shifter --version
Shifter 17.04.00","Hi,
with this commit f68f974 Shifter uses only the host's ldconfig binary and doesn't touch the container's one anymore.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,172,2017-04-28T14:00:49Z,2021-03-02T15:54:34Z,2021-03-02T15:54:34Z,CLOSED,False,810,48,23,https://github.com/rukkal,MPI support,109,[],https://github.com/NERSC/shifter/pull/172,https://github.com/scanon,6,https://github.com/NERSC/shifter/pull/172#issuecomment-316098424,"This PR adds MPI support to Shifter.
The user can activate the MPI support either through the --mpi CLI option of Shifter:
srun -N 2 shifter --mpi --image=ethcscs/dockerfiles:osu5.3.2-mpich3.1.4 /usr/local/libexec/osu-micro-benchmarks/mpi/pt2pt/osu_latency

or through the --shifter-mpi CLI option of the Slurm plugin:
salloc -N 2 --shifter-mpi --image=ethcscs/dockerfiles:osu5.3.2-mpich3.1.4
srun shifter /usr/local/libexec/osu-micro-benchmarks/mpi/pt2pt/osu_latency

How the MPI support works
In order to activate MPI support the compute node must provide an MPI implementation that is MPICH ABI compatible (MPICH ABI compatibility initiative) and the container's application must dynamically link to an MPI library that is also MPICH ABI compatible. We could successfully run MPI applications in containers with MPICH 3.1.4, MVAPICH2 2.2, and Intel MPI Library 2017 Update 1.
The system administrator must specify the location of the compute nodes' MPI libraries through the siteMPISharedLibs parameter in udiRoot.conf. The MPI dependency libraries, i.e. those libraries that the MPI libraries need to access, are configured through the siteMPIDependencyLibs parameter.
Shifter performs the following steps when the user requires the activation of the MPI support:

Searches the MPI shared libraries in the container through the container's ldconfig.
Compares the version numbers in the library filenames to check for ABI compatibility between compute node and container.
Bind mounts the compute node's MPI shared libraries on top of the containers' ones.
Bind mounts the compute node's dependency libraries into the container and updates the container's LD_LIBRARY_PATH accordingly.

Other addition in the PR
We also implemented the Shifter's --version CLI option:
$shifter --version
Shifter 17.04.00",I don't think that is the behavior we want. There will likely be cases where the host and container glibc versions are too far apart.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,172,2017-04-28T14:00:49Z,2021-03-02T15:54:34Z,2021-03-02T15:54:34Z,CLOSED,False,810,48,23,https://github.com/rukkal,MPI support,109,[],https://github.com/NERSC/shifter/pull/172,https://github.com/fcruzcscs,7,https://github.com/NERSC/shifter/pull/172#issuecomment-316368208,"This PR adds MPI support to Shifter.
The user can activate the MPI support either through the --mpi CLI option of Shifter:
srun -N 2 shifter --mpi --image=ethcscs/dockerfiles:osu5.3.2-mpich3.1.4 /usr/local/libexec/osu-micro-benchmarks/mpi/pt2pt/osu_latency

or through the --shifter-mpi CLI option of the Slurm plugin:
salloc -N 2 --shifter-mpi --image=ethcscs/dockerfiles:osu5.3.2-mpich3.1.4
srun shifter /usr/local/libexec/osu-micro-benchmarks/mpi/pt2pt/osu_latency

How the MPI support works
In order to activate MPI support the compute node must provide an MPI implementation that is MPICH ABI compatible (MPICH ABI compatibility initiative) and the container's application must dynamically link to an MPI library that is also MPICH ABI compatible. We could successfully run MPI applications in containers with MPICH 3.1.4, MVAPICH2 2.2, and Intel MPI Library 2017 Update 1.
The system administrator must specify the location of the compute nodes' MPI libraries through the siteMPISharedLibs parameter in udiRoot.conf. The MPI dependency libraries, i.e. those libraries that the MPI libraries need to access, are configured through the siteMPIDependencyLibs parameter.
Shifter performs the following steps when the user requires the activation of the MPI support:

Searches the MPI shared libraries in the container through the container's ldconfig.
Compares the version numbers in the library filenames to check for ABI compatibility between compute node and container.
Bind mounts the compute node's MPI shared libraries on top of the containers' ones.
Bind mounts the compute node's dependency libraries into the container and updates the container's LD_LIBRARY_PATH accordingly.

Other addition in the PR
We also implemented the Shifter's --version CLI option:
$shifter --version
Shifter 17.04.00","@scanon Can you elaborate on the problem? it seems to me that glibc between host and container is not an issue.
If you, look at line 204 of src/activate_mpi_support.sh on f68f974 what is being done is that the host uses its own ldconfig, sed, and readlink binaries this is still prior to the chroot so there is no glibc mix.
Note that ldconfig is using the -r option so as that ldconfig does the search on the standard locations but on the container filesystem.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,172,2017-04-28T14:00:49Z,2021-03-02T15:54:34Z,2021-03-02T15:54:34Z,CLOSED,False,810,48,23,https://github.com/rukkal,MPI support,109,[],https://github.com/NERSC/shifter/pull/172,https://github.com/dmjacobsen,8,https://github.com/NERSC/shifter/pull/172#issuecomment-375994330,"This PR adds MPI support to Shifter.
The user can activate the MPI support either through the --mpi CLI option of Shifter:
srun -N 2 shifter --mpi --image=ethcscs/dockerfiles:osu5.3.2-mpich3.1.4 /usr/local/libexec/osu-micro-benchmarks/mpi/pt2pt/osu_latency

or through the --shifter-mpi CLI option of the Slurm plugin:
salloc -N 2 --shifter-mpi --image=ethcscs/dockerfiles:osu5.3.2-mpich3.1.4
srun shifter /usr/local/libexec/osu-micro-benchmarks/mpi/pt2pt/osu_latency

How the MPI support works
In order to activate MPI support the compute node must provide an MPI implementation that is MPICH ABI compatible (MPICH ABI compatibility initiative) and the container's application must dynamically link to an MPI library that is also MPICH ABI compatible. We could successfully run MPI applications in containers with MPICH 3.1.4, MVAPICH2 2.2, and Intel MPI Library 2017 Update 1.
The system administrator must specify the location of the compute nodes' MPI libraries through the siteMPISharedLibs parameter in udiRoot.conf. The MPI dependency libraries, i.e. those libraries that the MPI libraries need to access, are configured through the siteMPIDependencyLibs parameter.
Shifter performs the following steps when the user requires the activation of the MPI support:

Searches the MPI shared libraries in the container through the container's ldconfig.
Compares the version numbers in the library filenames to check for ABI compatibility between compute node and container.
Bind mounts the compute node's MPI shared libraries on top of the containers' ones.
Bind mounts the compute node's dependency libraries into the container and updates the container's LD_LIBRARY_PATH accordingly.

Other addition in the PR
We also implemented the Shifter's --version CLI option:
$shifter --version
Shifter 17.04.00","this mechanism is not going to be integrated in based on other discussions.  I've added on the dev branch the initial modules support, which should allow for functionality-specific, site-definable, user-selectable ""modules"" to be implemented that can integrate the type of features you are looking for here.  The dev branch should be promoted to master within a day or so",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,172,2017-04-28T14:00:49Z,2021-03-02T15:54:34Z,2021-03-02T15:54:34Z,CLOSED,False,810,48,23,https://github.com/rukkal,MPI support,109,[],https://github.com/NERSC/shifter/pull/172,https://github.com/scanon,9,https://github.com/NERSC/shifter/pull/172#issuecomment-789010300,"This PR adds MPI support to Shifter.
The user can activate the MPI support either through the --mpi CLI option of Shifter:
srun -N 2 shifter --mpi --image=ethcscs/dockerfiles:osu5.3.2-mpich3.1.4 /usr/local/libexec/osu-micro-benchmarks/mpi/pt2pt/osu_latency

or through the --shifter-mpi CLI option of the Slurm plugin:
salloc -N 2 --shifter-mpi --image=ethcscs/dockerfiles:osu5.3.2-mpich3.1.4
srun shifter /usr/local/libexec/osu-micro-benchmarks/mpi/pt2pt/osu_latency

How the MPI support works
In order to activate MPI support the compute node must provide an MPI implementation that is MPICH ABI compatible (MPICH ABI compatibility initiative) and the container's application must dynamically link to an MPI library that is also MPICH ABI compatible. We could successfully run MPI applications in containers with MPICH 3.1.4, MVAPICH2 2.2, and Intel MPI Library 2017 Update 1.
The system administrator must specify the location of the compute nodes' MPI libraries through the siteMPISharedLibs parameter in udiRoot.conf. The MPI dependency libraries, i.e. those libraries that the MPI libraries need to access, are configured through the siteMPIDependencyLibs parameter.
Shifter performs the following steps when the user requires the activation of the MPI support:

Searches the MPI shared libraries in the container through the container's ldconfig.
Compares the version numbers in the library filenames to check for ABI compatibility between compute node and container.
Bind mounts the compute node's MPI shared libraries on top of the containers' ones.
Bind mounts the compute node's dependency libraries into the container and updates the container's LD_LIBRARY_PATH accordingly.

Other addition in the PR
We also implemented the Shifter's --version CLI option:
$shifter --version
Shifter 17.04.00",I'm closing this out because it is deprecated with the support of modules,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,173,2017-05-04T09:29:47Z,,2017-05-04T09:37:17Z,OPEN,False,105,14,5,https://github.com/rukkal,Improve siteFs,9,[],https://github.com/NERSC/shifter/pull/173,https://github.com/rukkal,1,https://github.com/NERSC/shifter/pull/173,"This PR adds two improvements:

The function setupVolumeMapMounts now uses mkdir_p instead of the plain mkdir in order to create parent folders, if necessary. E.g. the following configuration in udiRoot.conf no longer requires the system administrator to use sitePreMountHook to create the parent folder:

siteFs=/var/opt/cray/alps:/var/opt/cray/alps:rec


Shifter could drop/skip data of the image when the system administrator configures siteFs to mount folders that clash with the contents of the image. We modified Shifter to emit a warning when potentially important data is being skipped.","This PR adds two improvements:

The function setupVolumeMapMounts now uses mkdir_p instead of the plain mkdir in order to create parent folders, if necessary. E.g. the following configuration in udiRoot.conf no longer requires the system administrator to use sitePreMountHook to create the parent folder:

siteFs=/var/opt/cray/alps:/var/opt/cray/alps:rec


Shifter could drop/skip data of the image when the system administrator configures siteFs to mount folders that clash with the contents of the image. We modified Shifter to emit a warning when potentially important data is being skipped.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,173,2017-05-04T09:29:47Z,,2017-05-04T09:37:17Z,OPEN,False,105,14,5,https://github.com/rukkal,Improve siteFs,9,[],https://github.com/NERSC/shifter/pull/173,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/173#issuecomment-299138938,"This PR adds two improvements:

The function setupVolumeMapMounts now uses mkdir_p instead of the plain mkdir in order to create parent folders, if necessary. E.g. the following configuration in udiRoot.conf no longer requires the system administrator to use sitePreMountHook to create the parent folder:

siteFs=/var/opt/cray/alps:/var/opt/cray/alps:rec


Shifter could drop/skip data of the image when the system administrator configures siteFs to mount folders that clash with the contents of the image. We modified Shifter to emit a warning when potentially important data is being skipped.",Coverage decreased (-0.2%) to 67.863% when pulling 5671540 on rukkal:improve_sitefs into 4dc2134 on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,175,2017-05-11T20:04:07Z,2017-10-19T17:54:17Z,2017-11-10T19:27:18Z,CLOSED,False,99,83,6,https://github.com/scanon,Fix workdir support,4,[],https://github.com/NERSC/shifter/pull/175,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/175,"This fixes support for workdir support.  It fixes capture the workdir
in the metadata, saving it in the metafile, and have the shifter tool
use it even if not using --entry.","This fixes support for workdir support.  It fixes capture the workdir
in the metadata, saving it in the metafile, and have the shifter tool
use it even if not using --entry.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,175,2017-05-11T20:04:07Z,2017-10-19T17:54:17Z,2017-11-10T19:27:18Z,CLOSED,False,99,83,6,https://github.com/scanon,Fix workdir support,4,[],https://github.com/NERSC/shifter/pull/175,https://github.com/scanon,2,https://github.com/NERSC/shifter/pull/175#issuecomment-300901999,"This fixes support for workdir support.  It fixes capture the workdir
in the metadata, saving it in the metafile, and have the shifter tool
use it even if not using --entry.",Hold off on merging this.  I think we need to add an option to over-ride the workdir.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,175,2017-05-11T20:04:07Z,2017-10-19T17:54:17Z,2017-11-10T19:27:18Z,CLOSED,False,99,83,6,https://github.com/scanon,Fix workdir support,4,[],https://github.com/NERSC/shifter/pull/175,https://github.com/coveralls,3,https://github.com/NERSC/shifter/pull/175#issuecomment-304462423,"This fixes support for workdir support.  It fixes capture the workdir
in the metadata, saving it in the metafile, and have the shifter tool
use it even if not using --entry.",Coverage increased (+0.04%) to 68.057% when pulling 5656f5e on scanon:fixworkdir into 4dc2134 on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,175,2017-05-11T20:04:07Z,2017-10-19T17:54:17Z,2017-11-10T19:27:18Z,CLOSED,False,99,83,6,https://github.com/scanon,Fix workdir support,4,[],https://github.com/NERSC/shifter/pull/175,https://github.com/scanon,4,https://github.com/NERSC/shifter/pull/175#issuecomment-304462460,"This fixes support for workdir support.  It fixes capture the workdir
in the metadata, saving it in the metafile, and have the shifter tool
use it even if not using --entry.",I think this is ready for review.  This also fixes some tests which would be good to get upstream.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,175,2017-05-11T20:04:07Z,2017-10-19T17:54:17Z,2017-11-10T19:27:18Z,CLOSED,False,99,83,6,https://github.com/scanon,Fix workdir support,4,[],https://github.com/NERSC/shifter/pull/175,https://github.com/dmjacobsen,5,https://github.com/NERSC/shifter/pull/175#issuecomment-306190772,"This fixes support for workdir support.  It fixes capture the workdir
in the metadata, saving it in the metafile, and have the shifter tool
use it even if not using --entry.","I think this looks good, though some additional effort in the release notes will be required because of the change in default behavior.  Should this be configurable in udiRoot.conf?  Would it make sense to give sites the option to scrub existing .meta files when upgrading to avoid changes for existing pulls?",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,175,2017-05-11T20:04:07Z,2017-10-19T17:54:17Z,2017-11-10T19:27:18Z,CLOSED,False,99,83,6,https://github.com/scanon,Fix workdir support,4,[],https://github.com/NERSC/shifter/pull/175,https://github.com/dmjacobsen,6,https://github.com/NERSC/shifter/pull/175#issuecomment-306230695,"This fixes support for workdir support.  It fixes capture the workdir
in the metadata, saving it in the metafile, and have the shifter tool
use it even if not using --entry.","also, the usage() function needs to be updated with the new option",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,175,2017-05-11T20:04:07Z,2017-10-19T17:54:17Z,2017-11-10T19:27:18Z,CLOSED,False,99,83,6,https://github.com/scanon,Fix workdir support,4,[],https://github.com/NERSC/shifter/pull/175,https://github.com/dmjacobsen,7,https://github.com/NERSC/shifter/pull/175#issuecomment-337986565,"This fixes support for workdir support.  It fixes capture the workdir
in the metadata, saving it in the metafile, and have the shifter tool
use it even if not using --entry.",this is merged on the dev branch,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,176,2017-06-01T05:32:56Z,2017-11-09T06:37:04Z,2017-11-09T06:37:04Z,CLOSED,False,534,26,17,https://github.com/lagerhardt,Add support for select users to directly import images,34,[],https://github.com/NERSC/shifter/pull/176,https://github.com/lagerhardt,1,https://github.com/NERSC/shifter/pull/176,"Support for users to import images from files instead of going through docker, etc. It calculates a hash and copies the file into place (both of these need to take place on the user system). Uses fasthash.py to calculate the hash, this needs to be in the user's path.
Controlled by ImportUsers in the config file, if this field is absent or set to none this won't run. Users also need to specify the filepath to the image and the format of the image (squashfs, etc.). For testing use:
curl -d '{""filepath"":""/images/test/test.squashfs"",""format"":""squashfs""}' -H ""authentication: $(munge -n)""  http://api:5000/api/doimport/systema/custom/load_test:v1/","Support for users to import images from files instead of going through docker, etc. It calculates a hash and copies the file into place (both of these need to take place on the user system). Uses fasthash.py to calculate the hash, this needs to be in the user's path.
Controlled by ImportUsers in the config file, if this field is absent or set to none this won't run. Users also need to specify the filepath to the image and the format of the image (squashfs, etc.). For testing use:
curl -d '{""filepath"":""/images/test/test.squashfs"",""format"":""squashfs""}' -H ""authentication: $(munge -n)""  http://api:5000/api/doimport/systema/custom/load_test:v1/",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,176,2017-06-01T05:32:56Z,2017-11-09T06:37:04Z,2017-11-09T06:37:04Z,CLOSED,False,534,26,17,https://github.com/lagerhardt,Add support for select users to directly import images,34,[],https://github.com/NERSC/shifter/pull/176,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/176#issuecomment-305812735,"Support for users to import images from files instead of going through docker, etc. It calculates a hash and copies the file into place (both of these need to take place on the user system). Uses fasthash.py to calculate the hash, this needs to be in the user's path.
Controlled by ImportUsers in the config file, if this field is absent or set to none this won't run. Users also need to specify the filepath to the image and the format of the image (squashfs, etc.). For testing use:
curl -d '{""filepath"":""/images/test/test.squashfs"",""format"":""squashfs""}' -H ""authentication: $(munge -n)""  http://api:5000/api/doimport/systema/custom/load_test:v1/",Coverage decreased (-1.5%) to 66.467% when pulling 098f931 on lagerhardt:master into 4dc2134 on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,176,2017-06-01T05:32:56Z,2017-11-09T06:37:04Z,2017-11-09T06:37:04Z,CLOSED,False,534,26,17,https://github.com/lagerhardt,Add support for select users to directly import images,34,[],https://github.com/NERSC/shifter/pull/176,https://github.com/coveralls,3,https://github.com/NERSC/shifter/pull/176#issuecomment-328182841,"Support for users to import images from files instead of going through docker, etc. It calculates a hash and copies the file into place (both of these need to take place on the user system). Uses fasthash.py to calculate the hash, this needs to be in the user's path.
Controlled by ImportUsers in the config file, if this field is absent or set to none this won't run. Users also need to specify the filepath to the image and the format of the image (squashfs, etc.). For testing use:
curl -d '{""filepath"":""/images/test/test.squashfs"",""format"":""squashfs""}' -H ""authentication: $(munge -n)""  http://api:5000/api/doimport/systema/custom/load_test:v1/",Coverage decreased (-1.5%) to 66.467% when pulling ace48cb on lagerhardt:master into 4dc2134 on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,176,2017-06-01T05:32:56Z,2017-11-09T06:37:04Z,2017-11-09T06:37:04Z,CLOSED,False,534,26,17,https://github.com/lagerhardt,Add support for select users to directly import images,34,[],https://github.com/NERSC/shifter/pull/176,https://github.com/coveralls,4,https://github.com/NERSC/shifter/pull/176#issuecomment-329244777,"Support for users to import images from files instead of going through docker, etc. It calculates a hash and copies the file into place (both of these need to take place on the user system). Uses fasthash.py to calculate the hash, this needs to be in the user's path.
Controlled by ImportUsers in the config file, if this field is absent or set to none this won't run. Users also need to specify the filepath to the image and the format of the image (squashfs, etc.). For testing use:
curl -d '{""filepath"":""/images/test/test.squashfs"",""format"":""squashfs""}' -H ""authentication: $(munge -n)""  http://api:5000/api/doimport/systema/custom/load_test:v1/",Coverage decreased (-1.3%) to 66.749% when pulling 73440c2 on lagerhardt:master into 4dc2134 on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,176,2017-06-01T05:32:56Z,2017-11-09T06:37:04Z,2017-11-09T06:37:04Z,CLOSED,False,534,26,17,https://github.com/lagerhardt,Add support for select users to directly import images,34,[],https://github.com/NERSC/shifter/pull/176,https://github.com/coveralls,5,https://github.com/NERSC/shifter/pull/176#issuecomment-329930986,"Support for users to import images from files instead of going through docker, etc. It calculates a hash and copies the file into place (both of these need to take place on the user system). Uses fasthash.py to calculate the hash, this needs to be in the user's path.
Controlled by ImportUsers in the config file, if this field is absent or set to none this won't run. Users also need to specify the filepath to the image and the format of the image (squashfs, etc.). For testing use:
curl -d '{""filepath"":""/images/test/test.squashfs"",""format"":""squashfs""}' -H ""authentication: $(munge -n)""  http://api:5000/api/doimport/systema/custom/load_test:v1/",Coverage decreased (-0.9%) to 67.132% when pulling dc3fbd5 on lagerhardt:master into 4dc2134 on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,176,2017-06-01T05:32:56Z,2017-11-09T06:37:04Z,2017-11-09T06:37:04Z,CLOSED,False,534,26,17,https://github.com/lagerhardt,Add support for select users to directly import images,34,[],https://github.com/NERSC/shifter/pull/176,https://github.com/coveralls,6,https://github.com/NERSC/shifter/pull/176#issuecomment-330411054,"Support for users to import images from files instead of going through docker, etc. It calculates a hash and copies the file into place (both of these need to take place on the user system). Uses fasthash.py to calculate the hash, this needs to be in the user's path.
Controlled by ImportUsers in the config file, if this field is absent or set to none this won't run. Users also need to specify the filepath to the image and the format of the image (squashfs, etc.). For testing use:
curl -d '{""filepath"":""/images/test/test.squashfs"",""format"":""squashfs""}' -H ""authentication: $(munge -n)""  http://api:5000/api/doimport/systema/custom/load_test:v1/",Coverage decreased (-0.9%) to 67.141% when pulling edcf617 on lagerhardt:master into 4dc2134 on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,176,2017-06-01T05:32:56Z,2017-11-09T06:37:04Z,2017-11-09T06:37:04Z,CLOSED,False,534,26,17,https://github.com/lagerhardt,Add support for select users to directly import images,34,[],https://github.com/NERSC/shifter/pull/176,https://github.com/scanon,7,https://github.com/NERSC/shifter/pull/176#issuecomment-343061143,"Support for users to import images from files instead of going through docker, etc. It calculates a hash and copies the file into place (both of these need to take place on the user system). Uses fasthash.py to calculate the hash, this needs to be in the user's path.
Controlled by ImportUsers in the config file, if this field is absent or set to none this won't run. Users also need to specify the filepath to the image and the format of the image (squashfs, etc.). For testing use:
curl -d '{""filepath"":""/images/test/test.squashfs"",""format"":""squashfs""}' -H ""authentication: $(munge -n)""  http://api:5000/api/doimport/systema/custom/load_test:v1/",Closing this and merging against dev.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,179,2017-07-06T17:10:13Z,2017-10-19T17:55:05Z,2018-03-25T17:15:17Z,MERGED,True,1,1,1,https://github.com/scanon,Recommend a tag.,1,[],https://github.com/NERSC/shifter/pull/179,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/179,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,179,2017-07-06T17:10:13Z,2017-10-19T17:55:05Z,2018-03-25T17:15:17Z,MERGED,True,1,1,1,https://github.com/scanon,Recommend a tag.,1,[],https://github.com/NERSC/shifter/pull/179,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/179#issuecomment-313461225,,Coverage remained the same at 68.016% when pulling 43aa6f8 on doc-fix into 4dc2134 on master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,180,2017-07-12T23:18:47Z,2017-11-09T00:27:45Z,2017-11-09T00:27:45Z,CLOSED,False,80,2,2,https://github.com/abharath309,Support for Scanning Images,1,[],https://github.com/NERSC/shifter/pull/180,https://github.com/abharath309,1,https://github.com/NERSC/shifter/pull/180,Initial draft version for scanning Images.,Initial draft version for scanning Images.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,180,2017-07-12T23:18:47Z,2017-11-09T00:27:45Z,2017-11-09T00:27:45Z,CLOSED,False,80,2,2,https://github.com/abharath309,Support for Scanning Images,1,[],https://github.com/NERSC/shifter/pull/180,https://github.com/scanon,2,https://github.com/NERSC/shifter/pull/180#issuecomment-343007568,Initial draft version for scanning Images.,Moving to dev branch,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,181,2017-07-31T02:04:27Z,2017-07-31T03:19:37Z,2017-07-31T03:19:37Z,CLOSED,False,4,0,1,https://github.com/kyechou,fix permission on the transferred image file,1,[],https://github.com/NERSC/shifter/pull/181,https://github.com/kyechou,1,https://github.com/NERSC/shifter/pull/181,"The transferred images is originally created by mktemp, with permission 600.
I think it should be readable by other users who would like to start a container with the images.","The transferred images is originally created by mktemp, with permission 600.
I think it should be readable by other users who would like to start a container with the images.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,181,2017-07-31T02:04:27Z,2017-07-31T03:19:37Z,2017-07-31T03:19:37Z,CLOSED,False,4,0,1,https://github.com/kyechou,fix permission on the transferred image file,1,[],https://github.com/NERSC/shifter/pull/181,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/181#issuecomment-318950257,"The transferred images is originally created by mktemp, with permission 600.
I think it should be readable by other users who would like to start a container with the images.",Coverage increased (+0.01%) to 68.03% when pulling f108275 on kyechou:master into 4dc2134 on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,181,2017-07-31T02:04:27Z,2017-07-31T03:19:37Z,2017-07-31T03:19:37Z,CLOSED,False,4,0,1,https://github.com/kyechou,fix permission on the transferred image file,1,[],https://github.com/NERSC/shifter/pull/181,https://github.com/dmjacobsen,3,https://github.com/NERSC/shifter/pull/181#issuecomment-318952498,"The transferred images is originally created by mktemp, with permission 600.
I think it should be readable by other users who would like to start a container with the images.",Shifter reads the images while it holds root privilege.  The image files should not need to be explicitly readable in terms of unix permissions for other users to take advantage of them.  These image files are only intended to be read by root when mounting the image using either the shifter command or the setupRoot batch integration point.  What use case do you envision for user-level reads of the image files?  (typically we view users interacting with the image files as a security issue),True,{}
NERSC/shifter,https://github.com/NERSC/shifter,181,2017-07-31T02:04:27Z,2017-07-31T03:19:37Z,2017-07-31T03:19:37Z,CLOSED,False,4,0,1,https://github.com/kyechou,fix permission on the transferred image file,1,[],https://github.com/NERSC/shifter/pull/181,https://github.com/kyechou,4,https://github.com/NERSC/shifter/pull/181#issuecomment-318956373,"The transferred images is originally created by mktemp, with permission 600.
I think it should be readable by other users who would like to start a container with the images.","Thanks for the reply!
I was trying to build a small Shifter environment for experiments.
The image gateway and the runtime are on different nodes, where the /shifter/images/ is a NFS-shared directory, mounted with autofs.
The OS is Arch Linux, and here is the context of the problem:
$ shifterimg images
vmcluster  docker     READY    8ff7706743   2017-07-31T10:57:02 ubuntu:latest
$ ll /shifter/images
total 172380
-rw------- 1 root root        88 Jul 31 10:57 8ff7706743d2f3005f75c4477c186e274b2d6f22c2a3a4649c4aeadeeb77f119.meta
-rw------- 1 root root  41541632 Jul 31 10:57 8ff7706743d2f3005f75c4477c186e274b2d6f22c2a3a4649c4aeadeeb77f119.squashfs
-rw------- 1 root root        88 Jul 31 09:01 b5954fc5ab2a664883ffaef8c26f890d0209f24e37eb10790daad2b862ef1ec5.meta
-rw------- 1 root root 134959104 Jul 31 09:01 b5954fc5ab2a664883ffaef8c26f890d0209f24e37eb10790daad2b862ef1ec5.squashfs
drwx--x--x 2 root root      4096 Jul 31 10:56 cache/
$ shifter --image ubuntu:latest
FAILED to find requested image.

After I changed the permission, it worked.
The SUID of the shifter binary also seems legitimate.
$ ll /usr/bin/shifter
-rwsr-xr-x 1 root root 105600 Jul 31 08:52 /usr/bin/shifter*

I am not sure why the user failed to find the image.
*edit:
I think I find some clues...
The root on the compute nodes cannot read the image either.
Thanks for the help, btw.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,182,2017-07-31T14:01:50Z,2017-08-01T15:31:58Z,2017-08-01T15:31:58Z,MERGED,True,3,1,1,https://github.com/bne86,Enhance specfile BuildRequires for mock/nspawn,1,[],https://github.com/NERSC/shifter/pull/182,https://github.com/bne86,1,https://github.com/NERSC/shifter/pull/182,"When building shifter rpms with mock in a minimalistic environment, some build requirements are missing.","When building shifter rpms with mock in a minimalistic environment, some build requirements are missing.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,182,2017-07-31T14:01:50Z,2017-08-01T15:31:58Z,2017-08-01T15:31:58Z,MERGED,True,3,1,1,https://github.com/bne86,Enhance specfile BuildRequires for mock/nspawn,1,[],https://github.com/NERSC/shifter/pull/182,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/182#issuecomment-319077821,"When building shifter rpms with mock in a minimalistic environment, some build requirements are missing.",Coverage remained the same at 68.016% when pulling 65c920d on bne86:master into 4dc2134 on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,182,2017-07-31T14:01:50Z,2017-08-01T15:31:58Z,2017-08-01T15:31:58Z,MERGED,True,3,1,1,https://github.com/bne86,Enhance specfile BuildRequires for mock/nspawn,1,[],https://github.com/NERSC/shifter/pull/182,https://github.com/scanon,3,https://github.com/NERSC/shifter/pull/182#issuecomment-319255157,"When building shifter rpms with mock in a minimalistic environment, some build requirements are missing.",This looks good to me. Doug?,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,184,2017-10-26T23:18:05Z,2017-10-26T23:18:24Z,2017-10-26T23:23:47Z,CLOSED,False,496,1215,45,https://github.com/scanon,Remove celery,33,[],https://github.com/NERSC/shifter/pull/184,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/184,This PR removes celery and replaces it with standard python multiprocessing threads.,This PR removes celery and replaces it with standard python multiprocessing threads.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,184,2017-10-26T23:18:05Z,2017-10-26T23:18:24Z,2017-10-26T23:23:47Z,CLOSED,False,496,1215,45,https://github.com/scanon,Remove celery,33,[],https://github.com/NERSC/shifter/pull/184,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/184#issuecomment-339828670,This PR removes celery and replaces it with standard python multiprocessing threads.,Coverage decreased (-0.09%) to 67.926% when pulling 3706681 on scanon:nocelery into 0f8cdb2 on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,185,2017-10-26T23:50:32Z,2017-11-08T16:58:36Z,2017-11-10T19:23:19Z,MERGED,True,305,546,34,https://github.com/scanon,Remove celery,6,[],https://github.com/NERSC/shifter/pull/185,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/185,This PR replaces celery with standard python multiprocessing threads.  This should simplify installation and operation.,This PR replaces celery with standard python multiprocessing threads.  This should simplify installation and operation.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,185,2017-10-26T23:50:32Z,2017-11-08T16:58:36Z,2017-11-10T19:23:19Z,MERGED,True,305,546,34,https://github.com/scanon,Remove celery,6,[],https://github.com/NERSC/shifter/pull/185,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/185#issuecomment-339833688,This PR replaces celery with standard python multiprocessing threads.  This should simplify installation and operation.,Coverage decreased (-5.3%) to 62.939% when pulling b105967 on scanon:nocelery into 2760ed5 on NERSC:dev.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,185,2017-10-26T23:50:32Z,2017-11-08T16:58:36Z,2017-11-10T19:23:19Z,MERGED,True,305,546,34,https://github.com/scanon,Remove celery,6,[],https://github.com/NERSC/shifter/pull/185,https://github.com/scanon,3,https://github.com/NERSC/shifter/pull/185#issuecomment-339834276,This PR replaces celery with standard python multiprocessing threads.  This should simplify installation and operation.,This coverage drop is misleading.  I'm now excluding the test directory from the coverage report which was inflating things a bit.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,185,2017-10-26T23:50:32Z,2017-11-08T16:58:36Z,2017-11-10T19:23:19Z,MERGED,True,305,546,34,https://github.com/scanon,Remove celery,6,[],https://github.com/NERSC/shifter/pull/185,https://github.com/coveralls,4,https://github.com/NERSC/shifter/pull/185#issuecomment-339843787,This PR replaces celery with standard python multiprocessing threads.  This should simplify installation and operation.,Coverage decreased (-5.3%) to 62.939% when pulling e18c701 on scanon:nocelery into 2760ed5 on NERSC:dev.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,185,2017-10-26T23:50:32Z,2017-11-08T16:58:36Z,2017-11-10T19:23:19Z,MERGED,True,305,546,34,https://github.com/scanon,Remove celery,6,[],https://github.com/NERSC/shifter/pull/185,https://github.com/coveralls,5,https://github.com/NERSC/shifter/pull/185#issuecomment-342874432,This PR replaces celery with standard python multiprocessing threads.  This should simplify installation and operation.,Coverage decreased (-5.3%) to 62.939% when pulling aa2eb13 on scanon:nocelery into 2760ed5 on NERSC:dev.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,186,2017-11-08T04:06:55Z,2017-11-08T23:34:27Z,2018-03-31T12:16:43Z,MERGED,True,106,30,3,https://github.com/scanon,Http proxy support (WIP),8,[],https://github.com/NERSC/shifter/pull/186,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/186,"I want to merge this in, but I'm going to add some docs and tests first.","I want to merge this in, but I'm going to add some docs and tests first.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,186,2017-11-08T04:06:55Z,2017-11-08T23:34:27Z,2018-03-31T12:16:43Z,MERGED,True,106,30,3,https://github.com/scanon,Http proxy support (WIP),8,[],https://github.com/NERSC/shifter/pull/186,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/186#issuecomment-342705886,"I want to merge this in, but I'm going to add some docs and tests first.",Coverage decreased (-0.2%) to 68.04% when pulling 5fa3d3c on httpProxySupport into 2760ed5 on dev.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,186,2017-11-08T04:06:55Z,2017-11-08T23:34:27Z,2018-03-31T12:16:43Z,MERGED,True,106,30,3,https://github.com/scanon,Http proxy support (WIP),8,[],https://github.com/NERSC/shifter/pull/186,https://github.com/coveralls,3,https://github.com/NERSC/shifter/pull/186#issuecomment-342884241,"I want to merge this in, but I'm going to add some docs and tests first.",Coverage increased (+0.01%) to 68.226% when pulling 135c252 on httpProxySupport into 2760ed5 on dev.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,186,2017-11-08T04:06:55Z,2017-11-08T23:34:27Z,2018-03-31T12:16:43Z,MERGED,True,106,30,3,https://github.com/scanon,Http proxy support (WIP),8,[],https://github.com/NERSC/shifter/pull/186,https://github.com/coveralls,4,https://github.com/NERSC/shifter/pull/186#issuecomment-342993234,"I want to merge this in, but I'm going to add some docs and tests first.",Coverage decreased (-5.1%) to 63.077% when pulling e8fb156 on httpProxySupport into 2760ed5 on dev.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,187,2017-11-09T00:27:26Z,2017-11-09T00:34:03Z,2017-11-10T19:23:18Z,MERGED,True,127,1,5,https://github.com/scanon,Add support for examiner and start of oscap scanner,3,[],https://github.com/NERSC/shifter/pull/187,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/187,"This will still need more work but I want to get it merged in.  As is, it is pretty benign.","This will still need more work but I want to get it merged in.  As is, it is pretty benign.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,187,2017-11-09T00:27:26Z,2017-11-09T00:34:03Z,2017-11-10T19:23:18Z,MERGED,True,127,1,5,https://github.com/scanon,Add support for examiner and start of oscap scanner,3,[],https://github.com/NERSC/shifter/pull/187,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/187#issuecomment-343008446,"This will still need more work but I want to get it merged in.  As is, it is pretty benign.",Coverage increased (+0.04%) to 63.112% when pulling 6540e5a on scanon:abharath309-master into 85cf192 on NERSC:dev.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,188,2017-11-09T06:38:15Z,2017-11-10T17:27:37Z,2018-03-28T05:38:55Z,MERGED,True,624,25,19,https://github.com/scanon,Importer support,37,[],https://github.com/NERSC/shifter/pull/188,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/188,Merges @lagerhardt importer support,Merges @lagerhardt importer support,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,188,2017-11-09T06:38:15Z,2017-11-10T17:27:37Z,2018-03-28T05:38:55Z,MERGED,True,624,25,19,https://github.com/scanon,Importer support,37,[],https://github.com/NERSC/shifter/pull/188,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/188#issuecomment-343062270,Merges @lagerhardt importer support,Coverage increased (+0.3%) to 63.429% when pulling c9a32f1 on scanon:importer into f7aa085 on NERSC:dev.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,188,2017-11-09T06:38:15Z,2017-11-10T17:27:37Z,2018-03-28T05:38:55Z,MERGED,True,624,25,19,https://github.com/scanon,Importer support,37,[],https://github.com/NERSC/shifter/pull/188,https://github.com/coveralls,3,https://github.com/NERSC/shifter/pull/188#issuecomment-343535041,Merges @lagerhardt importer support,Coverage increased (+0.3%) to 63.451% when pulling 47b6dd8 on scanon:importer into f7aa085 on NERSC:dev.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,188,2017-11-09T06:38:15Z,2017-11-10T17:27:37Z,2018-03-28T05:38:55Z,MERGED,True,624,25,19,https://github.com/scanon,Importer support,37,[],https://github.com/NERSC/shifter/pull/188,https://github.com/scanon,4,https://github.com/NERSC/shifter/pull/188#issuecomment-343535507,Merges @lagerhardt importer support,"I think this is good now, so I'm going to merge it.  We will still need to do some improvements in how it handles permissions.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,189,2017-11-10T23:41:22Z,2018-03-25T05:07:41Z,2018-03-25T05:07:41Z,MERGED,True,91,119,15,https://github.com/scanon,Cleanup and minor fixes,1,[],https://github.com/NERSC/shifter/pull/189,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/189,"mostly flake8 cleanup
improved some testing syntax
remove extra debug output during testing","mostly flake8 cleanup
improved some testing syntax
remove extra debug output during testing",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,189,2017-11-10T23:41:22Z,2018-03-25T05:07:41Z,2018-03-25T05:07:41Z,MERGED,True,91,119,15,https://github.com/scanon,Cleanup and minor fixes,1,[],https://github.com/NERSC/shifter/pull/189,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/189#issuecomment-343616534,"mostly flake8 cleanup
improved some testing syntax
remove extra debug output during testing",Coverage decreased (-0.08%) to 63.373% when pulling 8469d52 on scanon:dev into c508390 on NERSC:dev.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,189,2017-11-10T23:41:22Z,2018-03-25T05:07:41Z,2018-03-25T05:07:41Z,MERGED,True,91,119,15,https://github.com/scanon,Cleanup and minor fixes,1,[],https://github.com/NERSC/shifter/pull/189,https://github.com/dmjacobsen,3,https://github.com/NERSC/shifter/pull/189#issuecomment-375945999,"mostly flake8 cleanup
improved some testing syntax
remove extra debug output during testing",this looks fine and will be merged with the entrypoint stuff anyway.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,190,2018-01-29T19:18:25Z,2018-01-29T22:58:29Z,2018-03-25T15:06:21Z,MERGED,True,7,5,3,https://github.com/dmjacobsen,Fix slurm 17.11,2,[],https://github.com/NERSC/shifter/pull/190,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/190,"slurm 17.11 spank requires that spank option processing be able to be run multiple times.  the old logic unnecessarily appended volume mounts to the internal option data structure.  the new logic replaces.  This should be appropriate for all versions of slurm.
the change is being tested on gerty presently.","slurm 17.11 spank requires that spank option processing be able to be run multiple times.  the old logic unnecessarily appended volume mounts to the internal option data structure.  the new logic replaces.  This should be appropriate for all versions of slurm.
the change is being tested on gerty presently.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,194,2018-03-09T16:42:08Z,2018-03-25T15:04:47Z,2019-03-06T16:57:40Z,MERGED,True,646,220,26,https://github.com/scanon,Entrypoint Enhancements,7,[],https://github.com/NERSC/shifter/pull/194,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/194,I would like some feedback on this.,I would like some feedback on this.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,194,2018-03-09T16:42:08Z,2018-03-25T15:04:47Z,2019-03-06T16:57:40Z,MERGED,True,646,220,26,https://github.com/scanon,Entrypoint Enhancements,7,[],https://github.com/NERSC/shifter/pull/194,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/194#issuecomment-372060797,I would like some feedback on this.,Coverage increased (+0.3%) to 63.716% when pulling 13ffe41 on scanon:entrypoint into c508390 on NERSC:dev.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,194,2018-03-09T16:42:08Z,2018-03-25T15:04:47Z,2019-03-06T16:57:40Z,MERGED,True,646,220,26,https://github.com/scanon,Entrypoint Enhancements,7,[],https://github.com/NERSC/shifter/pull/194,https://github.com/scanon,3,https://github.com/NERSC/shifter/pull/194#issuecomment-372069987,I would like some feedback on this.,Thanks. I’ll Slack you about a good linter to use for the c code,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,194,2018-03-09T16:42:08Z,2018-03-25T15:04:47Z,2019-03-06T16:57:40Z,MERGED,True,646,220,26,https://github.com/scanon,Entrypoint Enhancements,7,[],https://github.com/NERSC/shifter/pull/194,https://github.com/dmjacobsen,4,https://github.com/NERSC/shifter/pull/194#issuecomment-372071595,I would like some feedback on this.,"can you please base this PR off from the modules branch?
it has the modifications the memory allocators i mentioned",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,194,2018-03-09T16:42:08Z,2018-03-25T15:04:47Z,2019-03-06T16:57:40Z,MERGED,True,646,220,26,https://github.com/scanon,Entrypoint Enhancements,7,[],https://github.com/NERSC/shifter/pull/194,https://github.com/scanon,5,https://github.com/NERSC/shifter/pull/194#issuecomment-372081817,I would like some feedback on this.,I think I found all the indent issues.  There may still be some op spacing ones.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,194,2018-03-09T16:42:08Z,2018-03-25T15:04:47Z,2019-03-06T16:57:40Z,MERGED,True,646,220,26,https://github.com/scanon,Entrypoint Enhancements,7,[],https://github.com/NERSC/shifter/pull/194,https://github.com/dmjacobsen,6,https://github.com/NERSC/shifter/pull/194#issuecomment-375937394,I would like some feedback on this.,"No it depends on it because it simply skips to the third element of the
array, this function should do it's own error checking and not rely on the
caller
…
On Sat, Mar 24, 2018, 12:57 Shane Canon ***@***.***> wrote:
 ***@***.**** commented on this pull request.
 ------------------------------

 In src/utility.c
 <#194 (comment)>:

 > +  if (value[0]=='[' && value[1]=='u' && value[2]=='\''){
 +    return 1;
 +  }
 +  else {
 +    return 0;
 +  }
 +}
 +
 +/**
 + * split_json_array - utility function to parse a JSON array and split it
 + * into an array of strings.  It will allocate the array but destroys the
 + * source string.
 + *
 + * The values in the array should be comma-separated quoted strings.
 + */
 +char **split_json_array(const char *value) {

 It isn't depending on is_json_array. Note that it does a strndup on line
 549. So it is making its own copy.

 —
 You are receiving this because you commented.
 Reply to this email directly, view it on GitHub
 <#194 (comment)>, or mute
 the thread
 <https://github.com/notifications/unsubscribe-auth/ACGnWHw-TJK_ypblFAJj3GP64rK4lARnks5thqUfgaJpZM4SkieC>
 .",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,194,2018-03-09T16:42:08Z,2018-03-25T15:04:47Z,2019-03-06T16:57:40Z,MERGED,True,646,220,26,https://github.com/scanon,Entrypoint Enhancements,7,[],https://github.com/NERSC/shifter/pull/194,https://github.com/dmjacobsen,7,https://github.com/NERSC/shifter/pull/194#issuecomment-375977174,I would like some feedback on this.,I'm merging this with an immediate followup of PR 197 to clean up the style issues and a few functionality points that were not addressed.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,195,2018-03-25T05:02:43Z,2018-03-25T05:03:52Z,2018-03-25T05:09:09Z,CLOSED,False,4,2,2,https://github.com/dmjacobsen,modules support,4,[],https://github.com/NERSC/shifter/pull/195,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/195,"all the code is in, need to start merging these branches together, will integrate the testing with the entrypoint stuff.","all the code is in, need to start merging these branches together, will integrate the testing with the entrypoint stuff.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,195,2018-03-25T05:02:43Z,2018-03-25T05:03:52Z,2018-03-25T05:09:09Z,CLOSED,False,4,2,2,https://github.com/dmjacobsen,modules support,4,[],https://github.com/NERSC/shifter/pull/195,https://github.com/dmjacobsen,2,https://github.com/NERSC/shifter/pull/195#issuecomment-375945865,"all the code is in, need to start merging these branches together, will integrate the testing with the entrypoint stuff.","i screwed up the branches, will remove this PR and recreate it",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,195,2018-03-25T05:02:43Z,2018-03-25T05:03:52Z,2018-03-25T05:09:09Z,CLOSED,False,4,2,2,https://github.com/dmjacobsen,modules support,4,[],https://github.com/NERSC/shifter/pull/195,https://github.com/coveralls,3,https://github.com/NERSC/shifter/pull/195#issuecomment-375946050,"all the code is in, need to start merging these branches together, will integrate the testing with the entrypoint stuff.",Coverage remained the same at 62.426% when pulling 0f8cdb2 on master into 7188363 on modules.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,196,2018-03-25T05:05:54Z,2018-03-25T16:26:56Z,2018-03-25T16:26:56Z,MERGED,True,1529,790,31,https://github.com/dmjacobsen,Modules,48,[],https://github.com/NERSC/shifter/pull/196,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/196,"get modules code merged into dev; then entrypoint; will start working on integrated testing and release prep on dev; once we think code is ready, will merge dev into master, and start prepping a release branch.","get modules code merged into dev; then entrypoint; will start working on integrated testing and release prep on dev; once we think code is ready, will merge dev into master, and start prepping a release branch.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,196,2018-03-25T05:05:54Z,2018-03-25T16:26:56Z,2018-03-25T16:26:56Z,MERGED,True,1529,790,31,https://github.com/dmjacobsen,Modules,48,[],https://github.com/NERSC/shifter/pull/196,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/196#issuecomment-375946172,"get modules code merged into dev; then entrypoint; will start working on integrated testing and release prep on dev; once we think code is ready, will merge dev into master, and start prepping a release branch.",Coverage decreased (-0.4%) to 63.283% when pulling 79e688b on modules into 65f5729 on dev.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,196,2018-03-25T05:05:54Z,2018-03-25T16:26:56Z,2018-03-25T16:26:56Z,MERGED,True,1529,790,31,https://github.com/dmjacobsen,Modules,48,[],https://github.com/NERSC/shifter/pull/196,https://github.com/dmjacobsen,3,https://github.com/NERSC/shifter/pull/196#issuecomment-375983188,"get modules code merged into dev; then entrypoint; will start working on integrated testing and release prep on dev; once we think code is ready, will merge dev into master, and start prepping a release branch.",merging this to start making real progress on the prep,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,197,2018-03-25T05:09:51Z,2018-03-25T15:05:50Z,2018-03-31T22:11:10Z,MERGED,True,594,131,13,https://github.com/dmjacobsen,Scanon entrypoint,8,[],https://github.com/NERSC/shifter/pull/197,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/197,cleaned up revision of the entrypoint branch,cleaned up revision of the entrypoint branch,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,197,2018-03-25T05:09:51Z,2018-03-25T15:05:50Z,2018-03-31T22:11:10Z,MERGED,True,594,131,13,https://github.com/dmjacobsen,Scanon entrypoint,8,[],https://github.com/NERSC/shifter/pull/197,https://github.com/dmjacobsen,2,https://github.com/NERSC/shifter/pull/197#issuecomment-375977237,cleaned up revision of the entrypoint branch,merging this as an immediate followup to PR 194,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,198,2018-03-25T18:18:31Z,2018-03-27T16:07:44Z,2018-03-28T05:33:28Z,MERGED,True,1,1,1,https://github.com/scanon,Correct help info for volume,3,[],https://github.com/NERSC/shifter/pull/198,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/198,Issue #146,Issue #146,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,198,2018-03-25T18:18:31Z,2018-03-27T16:07:44Z,2018-03-28T05:33:28Z,MERGED,True,1,1,1,https://github.com/scanon,Correct help info for volume,3,[],https://github.com/NERSC/shifter/pull/198,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/198#issuecomment-375991916,Issue #146,Coverage increased (+1.4%) to 64.731% when pulling 2925f78 on scanon:issue146 into 4425ed9 on NERSC:dev.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,199,2018-03-25T19:40:29Z,2018-03-25T19:41:02Z,2018-03-25T19:48:02Z,CLOSED,False,3512,2366,96,https://github.com/scanon,Groups,150,[],https://github.com/NERSC/shifter/pull/199,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/199,Have permission checking include auxiliary groups too,Have permission checking include auxiliary groups too,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,199,2018-03-25T19:40:29Z,2018-03-25T19:41:02Z,2018-03-25T19:48:02Z,CLOSED,False,3512,2366,96,https://github.com/scanon,Groups,150,[],https://github.com/NERSC/shifter/pull/199,https://github.com/scanon,2,https://github.com/NERSC/shifter/pull/199#issuecomment-375997322,Have permission checking include auxiliary groups too,Wrong branch,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,199,2018-03-25T19:40:29Z,2018-03-25T19:41:02Z,2018-03-25T19:48:02Z,CLOSED,False,3512,2366,96,https://github.com/scanon,Groups,150,[],https://github.com/NERSC/shifter/pull/199,https://github.com/coveralls,3,https://github.com/NERSC/shifter/pull/199#issuecomment-375997866,Have permission checking include auxiliary groups too,Coverage decreased (-4.7%) to 63.29% when pulling 1ed8dbb on scanon:groups into 0f8cdb2 on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,200,2018-03-25T19:41:47Z,2018-03-26T13:51:09Z,2019-03-06T16:57:48Z,MERGED,True,17,0,1,https://github.com/scanon,Check perms for auxilary groups not just primary,2,[],https://github.com/NERSC/shifter/pull/200,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/200,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,200,2018-03-25T19:41:47Z,2018-03-26T13:51:09Z,2019-03-06T16:57:48Z,MERGED,True,17,0,1,https://github.com/scanon,Check perms for auxilary groups not just primary,2,[],https://github.com/NERSC/shifter/pull/200,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/200#issuecomment-375997893,,Coverage increased (+0.04%) to 63.323% when pulling d76c5e9 on scanon:groups into 4425ed9 on NERSC:dev.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,201,2018-03-25T22:47:40Z,2018-03-26T13:50:27Z,2018-03-28T05:37:36Z,CLOSED,False,8,3,4,https://github.com/scanon,Modulefixes,7,[],https://github.com/NERSC/shifter/pull/201,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/201,Fixes a few bugs,Fixes a few bugs,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,201,2018-03-25T22:47:40Z,2018-03-26T13:50:27Z,2018-03-28T05:37:36Z,CLOSED,False,8,3,4,https://github.com/scanon,Modulefixes,7,[],https://github.com/NERSC/shifter/pull/201,https://github.com/scanon,2,https://github.com/NERSC/shifter/pull/201#issuecomment-376010262,Fixes a few bugs,I realized some other changes crept in.  Feel free to just reject it and cherry pick the fixes.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,201,2018-03-25T22:47:40Z,2018-03-26T13:50:27Z,2018-03-28T05:37:36Z,CLOSED,False,8,3,4,https://github.com/scanon,Modulefixes,7,[],https://github.com/NERSC/shifter/pull/201,https://github.com/coveralls,3,https://github.com/NERSC/shifter/pull/201#issuecomment-376010609,Fixes a few bugs,Coverage increased (+0.06%) to 63.345% when pulling 7cf7b94 on scanon:modulefixes into 4425ed9 on NERSC:dev.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,201,2018-03-25T22:47:40Z,2018-03-26T13:50:27Z,2018-03-28T05:37:36Z,CLOSED,False,8,3,4,https://github.com/scanon,Modulefixes,7,[],https://github.com/NERSC/shifter/pull/201,https://github.com/dmjacobsen,4,https://github.com/NERSC/shifter/pull/201#issuecomment-376172582,Fixes a few bugs,I'll put in a new PR that includes these and some other improvements.  Thanks for finding this.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,202,2018-03-26T13:55:23Z,2018-03-27T04:49:29Z,2018-03-31T12:16:10Z,MERGED,True,126,213,11,https://github.com/dmjacobsen,more Modules,12,[],https://github.com/NERSC/shifter/pull/202,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/202,"removing kernel module loading support
adding modules support to the shifterConfig.json file generated by instantiations of shifter either via setupRoot or shifter","removing kernel module loading support
adding modules support to the shifterConfig.json file generated by instantiations of shifter either via setupRoot or shifter",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,202,2018-03-26T13:55:23Z,2018-03-27T04:49:29Z,2018-03-31T12:16:10Z,MERGED,True,126,213,11,https://github.com/dmjacobsen,more Modules,12,[],https://github.com/NERSC/shifter/pull/202,https://github.com/dmjacobsen,2,https://github.com/NERSC/shifter/pull/202#issuecomment-376174434,"removing kernel module loading support
adding modules support to the shifterConfig.json file generated by instantiations of shifter either via setupRoot or shifter",also includes the improvements that @scanon found for modules and etc/mtab,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,202,2018-03-26T13:55:23Z,2018-03-27T04:49:29Z,2018-03-31T12:16:10Z,MERGED,True,126,213,11,https://github.com/dmjacobsen,more Modules,12,[],https://github.com/NERSC/shifter/pull/202,https://github.com/coveralls,3,https://github.com/NERSC/shifter/pull/202#issuecomment-376176363,"removing kernel module loading support
adding modules support to the shifterConfig.json file generated by instantiations of shifter either via setupRoot or shifter",Coverage increased (+1.4%) to 64.715% when pulling 90dd312 on modules into ddb7249 on dev.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,202,2018-03-26T13:55:23Z,2018-03-27T04:49:29Z,2018-03-31T12:16:10Z,MERGED,True,126,213,11,https://github.com/dmjacobsen,more Modules,12,[],https://github.com/NERSC/shifter/pull/202,https://github.com/dmjacobsen,4,https://github.com/NERSC/shifter/pull/202#issuecomment-376396099,"removing kernel module loading support
adding modules support to the shifterConfig.json file generated by instantiations of shifter either via setupRoot or shifter","@scanon's suggestions were considered, and the function was largely rewritten to fix the issues.  a couple other minor issues repaired",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,203,2018-03-27T21:33:16Z,2018-03-29T05:07:17Z,2019-03-06T16:58:01Z,MERGED,True,6,3,1,https://github.com/scanon,RPM spec fixes,1,[],https://github.com/NERSC/shifter/pull/203,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/203,This makes it build on Suse.,This makes it build on Suse.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,203,2018-03-27T21:33:16Z,2018-03-29T05:07:17Z,2019-03-06T16:58:01Z,MERGED,True,6,3,1,https://github.com/scanon,RPM spec fixes,1,[],https://github.com/NERSC/shifter/pull/203,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/203#issuecomment-376684682,This makes it build on Suse.,Coverage increased (+0.03%) to 64.731% when pulling f53ea23 on scanon:buildfixes into 534fa2e on NERSC:dev.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,204,2018-03-28T18:45:21Z,2018-03-29T16:16:25Z,2019-03-06T16:59:17Z,MERGED,True,34,7,5,https://github.com/scanon,Release prep,11,[],https://github.com/NERSC/shifter/pull/204,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/204,Updating docs for release.,Updating docs for release.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,204,2018-03-28T18:45:21Z,2018-03-29T16:16:25Z,2019-03-06T16:59:17Z,MERGED,True,34,7,5,https://github.com/scanon,Release prep,11,[],https://github.com/NERSC/shifter/pull/204,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/204#issuecomment-376996688,Updating docs for release.,Coverage remained the same at 64.698% when pulling c1d7d70 on scanon:releaseprep into 534fa2e on NERSC:dev.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,205,2018-03-29T15:20:53Z,2018-03-29T16:17:28Z,2019-03-06T16:59:31Z,MERGED,True,35,0,3,https://github.com/scanon,Fix for unicode handling,1,[],https://github.com/NERSC/shifter/pull/205,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/205,Test and fix for unicode handling related to ascii encoded expand path,Test and fix for unicode handling related to ascii encoded expand path,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,205,2018-03-29T15:20:53Z,2018-03-29T16:17:28Z,2019-03-06T16:59:31Z,MERGED,True,35,0,3,https://github.com/scanon,Fix for unicode handling,1,[],https://github.com/NERSC/shifter/pull/205,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/205#issuecomment-377272866,Test and fix for unicode handling related to ascii encoded expand path,Coverage increased (+0.006%) to 64.704% when pulling bf51dff on scanon:unicodeagain into 3584823 on NERSC:dev.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,206,2018-03-30T11:59:52Z,2018-03-30T23:18:06Z,2018-03-31T12:16:06Z,MERGED,True,59751,118,42,https://github.com/dmjacobsen,add autoconf + static analysis based improvements,31,[],https://github.com/NERSC/shifter/pull/206,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/206,"rebuilt autoconf and added in so that clones from github ""just work"" for people
worked through list from coverity, corrected a few issues
reworked calculate_args to ensure that in all cases values returned are memory wholly owned by the caller (i.e., duplicate all strings, string arrays)
added helper functions
adjusted merge_args to perform some bounds checking and duplicate strings in accordance with above","rebuilt autoconf and added in so that clones from github ""just work"" for people
worked through list from coverity, corrected a few issues
reworked calculate_args to ensure that in all cases values returned are memory wholly owned by the caller (i.e., duplicate all strings, string arrays)
added helper functions
adjusted merge_args to perform some bounds checking and duplicate strings in accordance with above",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,206,2018-03-30T11:59:52Z,2018-03-30T23:18:06Z,2018-03-31T12:16:06Z,MERGED,True,59751,118,42,https://github.com/dmjacobsen,add autoconf + static analysis based improvements,31,[],https://github.com/NERSC/shifter/pull/206,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/206#issuecomment-377510945,"rebuilt autoconf and added in so that clones from github ""just work"" for people
worked through list from coverity, corrected a few issues
reworked calculate_args to ensure that in all cases values returned are memory wholly owned by the caller (i.e., duplicate all strings, string arrays)
added helper functions
adjusted merge_args to perform some bounds checking and duplicate strings in accordance with above",Coverage decreased (-0.2%) to 64.552% when pulling e4f35fc on autoconf into 91c61e0 on dev.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,207,2018-03-30T23:20:04Z,2018-03-31T22:09:42Z,2018-03-31T22:15:30Z,MERGED,True,12489,2743,106,https://github.com/dmjacobsen,shifter 18.03.0 preparations,233,[],https://github.com/NERSC/shifter/pull/207,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/207,merge the work of the last while from dev into master to get ready for release,merge the work of the last while from dev into master to get ready for release,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,207,2018-03-30T23:20:04Z,2018-03-31T22:09:42Z,2018-03-31T22:15:30Z,MERGED,True,12489,2743,106,https://github.com/dmjacobsen,shifter 18.03.0 preparations,233,[],https://github.com/NERSC/shifter/pull/207,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/207#issuecomment-377645256,merge the work of the last while from dev into master to get ready for release,Coverage decreased (-3.5%) to 64.56% when pulling 297b325 on dev into 0f8cdb2 on master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,207,2018-03-30T23:20:04Z,2018-03-31T22:09:42Z,2018-03-31T22:15:30Z,MERGED,True,12489,2743,106,https://github.com/dmjacobsen,shifter 18.03.0 preparations,233,[],https://github.com/NERSC/shifter/pull/207,https://github.com/dmjacobsen,3,https://github.com/NERSC/shifter/pull/207#issuecomment-377726930,merge the work of the last while from dev into master to get ready for release,i'm going to merge this into master,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,208,2018-03-31T10:57:25Z,2018-03-31T12:22:51Z,2018-03-31T22:10:05Z,MERGED,True,96,123,11,https://github.com/dmjacobsen,Doc,7,[],https://github.com/NERSC/shifter/pull/208,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/208,"this PR is a work in progress to add and update documentation as needed for the release changes.
I've modified the behavior or usage() to only display extended help in the --help case.  I've added the terse and longer description of module support.
will start adding module documentation to the main doc/ directory and updating how to setup mpi using the module support.","this PR is a work in progress to add and update documentation as needed for the release changes.
I've modified the behavior or usage() to only display extended help in the --help case.  I've added the terse and longer description of module support.
will start adding module documentation to the main doc/ directory and updating how to setup mpi using the module support.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,208,2018-03-31T10:57:25Z,2018-03-31T12:22:51Z,2018-03-31T22:10:05Z,MERGED,True,96,123,11,https://github.com/dmjacobsen,Doc,7,[],https://github.com/NERSC/shifter/pull/208,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/208#issuecomment-377685056,"this PR is a work in progress to add and update documentation as needed for the release changes.
I've modified the behavior or usage() to only display extended help in the --help case.  I've added the terse and longer description of module support.
will start adding module documentation to the main doc/ directory and updating how to setup mpi using the module support.",Coverage increased (+0.05%) to 64.599% when pulling bca39f0 on doc into ec42599 on dev.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,209,2018-03-31T22:21:31Z,2018-03-31T22:21:38Z,2018-03-31T22:21:38Z,MERGED,True,1,1,1,https://github.com/dmjacobsen,fix readme release statement,1,[],https://github.com/NERSC/shifter/pull/209,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/209,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,210,2018-03-31T22:47:34Z,2018-03-31T22:53:46Z,2018-03-31T22:54:20Z,MERGED,True,1,1,1,https://github.com/dmjacobsen,"add flag to always install the gcc wrapper, this is important to allo…",1,[],https://github.com/NERSC/shifter/pull/210,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/210,…w the build_ssh.sh script towork on fedora,…w the build_ssh.sh script towork on fedora,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,210,2018-03-31T22:47:34Z,2018-03-31T22:53:46Z,2018-03-31T22:54:20Z,MERGED,True,1,1,1,https://github.com/dmjacobsen,"add flag to always install the gcc wrapper, this is important to allo…",1,[],https://github.com/NERSC/shifter/pull/210,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/210#issuecomment-377729148,…w the build_ssh.sh script towork on fedora,Coverage remained the same at 64.543% when pulling 66185c5 on dev into df267a8 on master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,211,2018-03-31T22:52:19Z,2018-04-01T15:27:44Z,2018-04-07T06:16:37Z,MERGED,True,10,5,3,https://github.com/dmjacobsen,"add flag to always install the gcc wrapper, this is important to allo…",6,[],https://github.com/NERSC/shifter/pull/211,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/211,…w the build_ssh.sh script towork on fedora,…w the build_ssh.sh script towork on fedora,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,211,2018-03-31T22:52:19Z,2018-04-01T15:27:44Z,2018-04-07T06:16:37Z,MERGED,True,10,5,3,https://github.com/dmjacobsen,"add flag to always install the gcc wrapper, this is important to allo…",6,[],https://github.com/NERSC/shifter/pull/211,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/211#issuecomment-377729354,…w the build_ssh.sh script towork on fedora,Coverage increased (+0.02%) to 64.543% when pulling 8755d4c on dev into df267a8 on shifter-18.03.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,211,2018-03-31T22:52:19Z,2018-04-01T15:27:44Z,2018-04-07T06:16:37Z,MERGED,True,10,5,3,https://github.com/dmjacobsen,"add flag to always install the gcc wrapper, this is important to allo…",6,[],https://github.com/NERSC/shifter/pull/211,https://github.com/dmjacobsen,3,https://github.com/NERSC/shifter/pull/211#issuecomment-377730234,…w the build_ssh.sh script towork on fedora,"added a commit that fixes the slurm integration tests, thus allowing make check to finish",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,212,2018-03-31T23:06:29Z,2018-03-31T23:15:15Z,2018-03-31T23:15:15Z,MERGED,True,8,4,1,https://github.com/dmjacobsen,slurm tests not using shifter_mem,2,[],https://github.com/NERSC/shifter/pull/212,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/212,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,212,2018-03-31T23:06:29Z,2018-03-31T23:15:15Z,2018-03-31T23:15:15Z,MERGED,True,8,4,1,https://github.com/dmjacobsen,slurm tests not using shifter_mem,2,[],https://github.com/NERSC/shifter/pull/212,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/212#issuecomment-377730075,,Coverage remained the same at 64.527% when pulling 1bd712c on dev into 0d02271 on master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,213,2018-04-01T00:34:03Z,2018-04-02T14:19:24Z,2018-04-07T06:16:37Z,MERGED,True,1,0,1,https://github.com/dmjacobsen,update NEWS,2,[],https://github.com/NERSC/shifter/pull/213,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/213,missed a release note for slurm,missed a release note for slurm,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,213,2018-04-01T00:34:03Z,2018-04-02T14:19:24Z,2018-04-07T06:16:37Z,MERGED,True,1,0,1,https://github.com/dmjacobsen,update NEWS,2,[],https://github.com/NERSC/shifter/pull/213,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/213#issuecomment-377733875,missed a release note for slurm,Coverage remained the same at 64.527% when pulling 8755d4c on dev into eda1a3f on master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,214,2018-04-02T14:20:42Z,2018-04-05T04:13:55Z,2018-04-07T06:16:31Z,MERGED,True,150,26,4,https://github.com/dmjacobsen,"add support for --env and --env-file, as well as --clearenv, to preve…",4,[],https://github.com/NERSC/shifter/pull/214,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/214,"add support for --env and --env-file, as well as --clearenv, to prevent the external environment from showing up","add support for --env and --env-file, as well as --clearenv, to prevent the external environment from showing up",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,214,2018-04-02T14:20:42Z,2018-04-05T04:13:55Z,2018-04-07T06:16:31Z,MERGED,True,150,26,4,https://github.com/dmjacobsen,"add support for --env and --env-file, as well as --clearenv, to preve…",4,[],https://github.com/NERSC/shifter/pull/214,https://github.com/dmjacobsen,2,https://github.com/NERSC/shifter/pull/214#issuecomment-377966976,"add support for --env and --env-file, as well as --clearenv, to prevent the external environment from showing up","I still need to add some unittests for the updates to shifter_setupenv, especially the env-file bit.
Also, there is an implicit restriction that the env-file needs to have the same path in both the external and container environment.  I'm thinking of modifying this to have shifter read the env-file in the external environment, but that will be slightly complicated by needing to ensure we are using the user's prilvileges when reading the file.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,214,2018-04-02T14:20:42Z,2018-04-05T04:13:55Z,2018-04-07T06:16:31Z,MERGED,True,150,26,4,https://github.com/dmjacobsen,"add support for --env and --env-file, as well as --clearenv, to preve…",4,[],https://github.com/NERSC/shifter/pull/214,https://github.com/coveralls,3,https://github.com/NERSC/shifter/pull/214#issuecomment-377968013,"add support for --env and --env-file, as well as --clearenv, to prevent the external environment from showing up",Coverage decreased (-0.7%) to 63.846% when pulling 3eeff8e on feature/env_updates into 86cb0b3 on master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,214,2018-04-02T14:20:42Z,2018-04-05T04:13:55Z,2018-04-07T06:16:31Z,MERGED,True,150,26,4,https://github.com/dmjacobsen,"add support for --env and --env-file, as well as --clearenv, to preve…",4,[],https://github.com/NERSC/shifter/pull/214,https://github.com/scanon,4,https://github.com/NERSC/shifter/pull/214#issuecomment-377979079,"add support for --env and --env-file, as well as --clearenv, to prevent the external environment from showing up","Would this support multiple -e options?
shifter -e FOO=1 -e BAR=1 ...",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,214,2018-04-02T14:20:42Z,2018-04-05T04:13:55Z,2018-04-07T06:16:31Z,MERGED,True,150,26,4,https://github.com/dmjacobsen,"add support for --env and --env-file, as well as --clearenv, to preve…",4,[],https://github.com/NERSC/shifter/pull/214,https://github.com/dmjacobsen,5,https://github.com/NERSC/shifter/pull/214#issuecomment-378132158,"add support for --env and --env-file, as well as --clearenv, to prevent the external environment from showing up","yes, multiple -e options are supported",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,214,2018-04-02T14:20:42Z,2018-04-05T04:13:55Z,2018-04-07T06:16:31Z,MERGED,True,150,26,4,https://github.com/dmjacobsen,"add support for --env and --env-file, as well as --clearenv, to preve…",4,[],https://github.com/NERSC/shifter/pull/214,https://github.com/dmjacobsen,6,https://github.com/NERSC/shifter/pull/214#issuecomment-378815415,"add support for --env and --env-file, as well as --clearenv, to prevent the external environment from showing up",merging this based on discussion with @scanon,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,215,2018-04-02T23:31:12Z,2018-04-03T05:24:28Z,2018-04-07T06:16:35Z,MERGED,True,46,1,2,https://github.com/dmjacobsen,fix up some minor volume mount issues,2,[],https://github.com/NERSC/shifter/pull/215,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/215,"perform non-perNodeCache bind mount using from_real since that is the validated path (though from_buffer is equivalent, just messy); fix case like --volume=/cvmfs_nfs:/cvmfs, unmountTree aggressively unmounts any path for which the target (base, ""/var/udiMount/cvmfs"" in this case) is a substring, which causes the bind mount to be useless from the user perspective","perform non-perNodeCache bind mount using from_real since that is the validated path (though from_buffer is equivalent, just messy); fix case like --volume=/cvmfs_nfs:/cvmfs, unmountTree aggressively unmounts any path for which the target (base, ""/var/udiMount/cvmfs"" in this case) is a substring, which causes the bind mount to be useless from the user perspective",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,215,2018-04-02T23:31:12Z,2018-04-03T05:24:28Z,2018-04-07T06:16:35Z,MERGED,True,46,1,2,https://github.com/dmjacobsen,fix up some minor volume mount issues,2,[],https://github.com/NERSC/shifter/pull/215,https://github.com/dmjacobsen,2,https://github.com/NERSC/shifter/pull/215#issuecomment-378080733,"perform non-perNodeCache bind mount using from_real since that is the validated path (though from_buffer is equivalent, just messy); fix case like --volume=/cvmfs_nfs:/cvmfs, unmountTree aggressively unmounts any path for which the target (base, ""/var/udiMount/cvmfs"" in this case) is a substring, which causes the bind mount to be useless from the user perspective",this resolves the --volume=/cvmfs_nfs:/cvmfs problem that people have been observing.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,215,2018-04-02T23:31:12Z,2018-04-03T05:24:28Z,2018-04-07T06:16:35Z,MERGED,True,46,1,2,https://github.com/dmjacobsen,fix up some minor volume mount issues,2,[],https://github.com/NERSC/shifter/pull/215,https://github.com/coveralls,3,https://github.com/NERSC/shifter/pull/215#issuecomment-378081666,"perform non-perNodeCache bind mount using from_real since that is the validated path (though from_buffer is equivalent, just messy); fix case like --volume=/cvmfs_nfs:/cvmfs, unmountTree aggressively unmounts any path for which the target (base, ""/var/udiMount/cvmfs"" in this case) is a substring, which causes the bind mount to be useless from the user perspective",Coverage increased (+0.04%) to 64.562% when pulling 01eb311 on bugfix/substring_unmounts_during_volmount into 15fdf72 on master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,216,2018-04-05T04:32:27Z,2018-04-05T12:39:21Z,2018-04-07T06:16:29Z,MERGED,True,19,1,1,https://github.com/dmjacobsen,add --help and usage() info for environment options,1,[],https://github.com/NERSC/shifter/pull/216,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/216,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,216,2018-04-05T04:32:27Z,2018-04-05T12:39:21Z,2018-04-07T06:16:29Z,MERGED,True,19,1,1,https://github.com/dmjacobsen,add --help and usage() info for environment options,1,[],https://github.com/NERSC/shifter/pull/216,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/216#issuecomment-378818334,,Coverage decreased (-0.02%) to 63.846% when pulling 3add77a on features/env-update-help into 7f1f9d3 on master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,217,2018-04-05T17:38:14Z,2018-04-05T17:52:38Z,2018-04-05T17:52:38Z,MERGED,True,2,5,1,https://github.com/dmjacobsen,allow entrypoint to not take an argument,2,[],https://github.com/NERSC/shifter/pull/217,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/217,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,217,2018-04-05T17:38:14Z,2018-04-05T17:52:38Z,2018-04-05T17:52:38Z,MERGED,True,2,5,1,https://github.com/dmjacobsen,allow entrypoint to not take an argument,2,[],https://github.com/NERSC/shifter/pull/217,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/217#issuecomment-379019276,,Coverage increased (+0.02%) to 63.867% when pulling dd3849f on bugfix/origin_requires_arg into 5af31ba on master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,218,2018-04-05T23:36:45Z,2018-04-06T05:01:32Z,2018-04-06T05:01:37Z,MERGED,True,181,35,5,https://github.com/dmjacobsen,Bugfix/origin requires arg,11,[],https://github.com/NERSC/shifter/pull/218,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/218,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,218,2018-04-05T23:36:45Z,2018-04-06T05:01:32Z,2018-04-06T05:01:37Z,MERGED,True,181,35,5,https://github.com/dmjacobsen,Bugfix/origin requires arg,11,[],https://github.com/NERSC/shifter/pull/218,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/218#issuecomment-379108617,,Coverage increased (+0.1%) to 64.031% when pulling e9a8975 on bugfix/origin_requires_arg into 493c294 on master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,219,2018-04-07T06:08:35Z,2018-04-10T04:30:03Z,2018-04-10T05:00:11Z,MERGED,True,260,110,11,https://github.com/dmjacobsen,Feature/imagerequest env,8,[],https://github.com/NERSC/shifter/pull/219,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/219,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,219,2018-04-07T06:08:35Z,2018-04-10T04:30:03Z,2018-04-10T05:00:11Z,MERGED,True,260,110,11,https://github.com/dmjacobsen,Feature/imagerequest env,8,[],https://github.com/NERSC/shifter/pull/219,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/219#issuecomment-379435607,,Coverage increased (+0.6%) to 64.614% when pulling ac1bc6c on feature/imagerequest_env into 48c9f6b on master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,219,2018-04-07T06:08:35Z,2018-04-10T04:30:03Z,2018-04-10T05:00:11Z,MERGED,True,260,110,11,https://github.com/dmjacobsen,Feature/imagerequest env,8,[],https://github.com/NERSC/shifter/pull/219,https://github.com/scanon,3,https://github.com/NERSC/shifter/pull/219#issuecomment-379970310,,Nice.  Much more readable.  Glad you split up the find and length functions.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,220,2018-04-07T17:28:43Z,2018-04-28T12:59:25Z,2019-03-06T16:59:39Z,MERGED,True,83,16,4,https://github.com/scanon,noxattrs,5,[],https://github.com/NERSC/shifter/pull/220,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/220,Use --no-xattrs by default when creating squash files.,Use --no-xattrs by default when creating squash files.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,220,2018-04-07T17:28:43Z,2018-04-28T12:59:25Z,2019-03-06T16:59:39Z,MERGED,True,83,16,4,https://github.com/scanon,noxattrs,5,[],https://github.com/NERSC/shifter/pull/220,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/220#issuecomment-379486255,Use --no-xattrs by default when creating squash files.,Coverage increased (+0.02%) to 64.627% when pulling b4f0acf on scanon:xattr into 474d857 on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,220,2018-04-07T17:28:43Z,2018-04-28T12:59:25Z,2019-03-06T16:59:39Z,MERGED,True,83,16,4,https://github.com/scanon,noxattrs,5,[],https://github.com/NERSC/shifter/pull/220,https://github.com/dmjacobsen,3,https://github.com/NERSC/shifter/pull/220#issuecomment-379486475,Use --no-xattrs by default when creating squash files.,"instead of an environment variable, could this please be controlled by a configuration?
it's easy to keep config files managed, but modifying systemd service files as configuration is more challenging.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,220,2018-04-07T17:28:43Z,2018-04-28T12:59:25Z,2019-03-06T16:59:39Z,MERGED,True,83,16,4,https://github.com/scanon,noxattrs,5,[],https://github.com/NERSC/shifter/pull/220,https://github.com/scanon,4,https://github.com/NERSC/shifter/pull/220#issuecomment-379487342,Use --no-xattrs by default when creating squash files.,I think this would mainly impact centos 6 and my thought was to just set this variable in the sample init script.  But I will look at adding it to the config.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,221,2018-04-27T16:43:34Z,2018-04-27T17:24:08Z,2019-03-06T16:59:49Z,MERGED,True,262,190,3,https://github.com/scanon,Bug fix to handle pulling an image with different tags,2,[],https://github.com/NERSC/shifter/pull/221,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/221,"Bug fix to handle pulling an image that has
multiple tags.  This is a regression that
was introduced with private images.
Also fixed up the test in the imagemngr test
including adding a fast attribute.","Bug fix to handle pulling an image that has
multiple tags.  This is a regression that
was introduced with private images.
Also fixed up the test in the imagemngr test
including adding a fast attribute.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,221,2018-04-27T16:43:34Z,2018-04-27T17:24:08Z,2019-03-06T16:59:49Z,MERGED,True,262,190,3,https://github.com/scanon,Bug fix to handle pulling an image with different tags,2,[],https://github.com/NERSC/shifter/pull/221,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/221#issuecomment-385028960,"Bug fix to handle pulling an image that has
multiple tags.  This is a regression that
was introduced with private images.
Also fixed up the test in the imagemngr test
including adding a fast attribute.",Coverage decreased (-0.03%) to 64.604% when pulling 42ae21c on scanon:multitag into fd1ebb8 on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,222,2018-04-27T23:44:01Z,2018-04-30T20:09:30Z,2019-12-18T16:08:54Z,MERGED,True,44,13,2,https://github.com/scanon,Security Doc Updates,6,[],https://github.com/NERSC/shifter/pull/222,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/222,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,222,2018-04-27T23:44:01Z,2018-04-30T20:09:30Z,2019-12-18T16:08:54Z,MERGED,True,44,13,2,https://github.com/scanon,Security Doc Updates,6,[],https://github.com/NERSC/shifter/pull/222,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/222#issuecomment-385120874,,Coverage remained the same at 64.627% when pulling ff6977c on scanon:secdocs into 8aa0a01 on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,222,2018-04-27T23:44:01Z,2018-04-30T20:09:30Z,2019-12-18T16:08:54Z,MERGED,True,44,13,2,https://github.com/scanon,Security Doc Updates,6,[],https://github.com/NERSC/shifter/pull/222,https://github.com/dmjacobsen,3,https://github.com/NERSC/shifter/pull/222#issuecomment-385177031,,i made a few adjustments in other portions of the doc,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,234,2018-09-18T04:43:34Z,2018-09-18T04:43:44Z,2018-09-18T04:50:11Z,CLOSED,False,7,1,1,https://github.com/scanon,Add fix for 400 error,1,[],https://github.com/NERSC/shifter/pull/234,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/234,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,234,2018-09-18T04:43:34Z,2018-09-18T04:43:44Z,2018-09-18T04:50:11Z,CLOSED,False,7,1,1,https://github.com/scanon,Add fix for 400 error,1,[],https://github.com/NERSC/shifter/pull/234,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/234#issuecomment-422254394,,Coverage increased (+0.01%) to 64.638% when pulling a946e56 on scanon:400fix into 032275b on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,235,2018-09-18T04:44:40Z,2018-11-15T05:06:57Z,2019-12-18T16:08:35Z,MERGED,True,7,1,1,https://github.com/scanon,Add fix for 400 error,2,[],https://github.com/NERSC/shifter/pull/235,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/235,DockerHub started disallowing sending a token and login.  This detects that and just uses the token part.,DockerHub started disallowing sending a token and login.  This detects that and just uses the token part.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,235,2018-09-18T04:44:40Z,2018-11-15T05:06:57Z,2019-12-18T16:08:35Z,MERGED,True,7,1,1,https://github.com/scanon,Add fix for 400 error,2,[],https://github.com/NERSC/shifter/pull/235,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/235#issuecomment-422254636,DockerHub started disallowing sending a token and login.  This detects that and just uses the token part.,Coverage increased (+0.01%) to 64.638% when pulling 6df80f5 on scanon:400fix into 4679673 on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,237,2018-11-02T15:13:59Z,2018-11-15T04:47:03Z,2018-11-15T04:47:03Z,MERGED,True,1,1,1,https://github.com/uvNikita,Fix dockerv2 token authorization with multiple permissions,1,[],https://github.com/NERSC/shifter/pull/237,https://github.com/uvNikita,1,https://github.com/NERSC/shifter/pull/237,"If WWW-Authenticate header of manifest endpoint contains multiple
scope permissions (e.g. pull and push), they are specified separated by
a comma, see https://docs.docker.com/registry/spec/auth/token/#how-to-authenticate.
Such API response causes need more than 1 value to unpack error due to the current string
split implementation, therefore auth_data_str split logic should be more strict.
Fixes #236.","If WWW-Authenticate header of manifest endpoint contains multiple
scope permissions (e.g. pull and push), they are specified separated by
a comma, see https://docs.docker.com/registry/spec/auth/token/#how-to-authenticate.
Such API response causes need more than 1 value to unpack error due to the current string
split implementation, therefore auth_data_str split logic should be more strict.
Fixes #236.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,237,2018-11-02T15:13:59Z,2018-11-15T04:47:03Z,2018-11-15T04:47:03Z,MERGED,True,1,1,1,https://github.com/uvNikita,Fix dockerv2 token authorization with multiple permissions,1,[],https://github.com/NERSC/shifter/pull/237,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/237#issuecomment-435415404,"If WWW-Authenticate header of manifest endpoint contains multiple
scope permissions (e.g. pull and push), they are specified separated by
a comma, see https://docs.docker.com/registry/spec/auth/token/#how-to-authenticate.
Such API response causes need more than 1 value to unpack error due to the current string
split implementation, therefore auth_data_str split logic should be more strict.
Fixes #236.",Coverage remained the same at 64.627% when pulling 591ac92 on uvNikita:shiftergw/fix-dockerv2 into 032275b on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,238,2018-11-15T05:11:50Z,,2019-08-05T09:21:31Z,OPEN,False,10,9,1,https://github.com/scanon,Nvcrfix,4,[],https://github.com/NERSC/shifter/pull/238,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/238,Pulls from Nvidia's registry didn't work for a few reasons.  This addresses those issues.  One thing I had to do was remove the check for application/json because the Nvidia registry sets it to text.,Pulls from Nvidia's registry didn't work for a few reasons.  This addresses those issues.  One thing I had to do was remove the check for application/json because the Nvidia registry sets it to text.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,238,2018-11-15T05:11:50Z,,2019-08-05T09:21:31Z,OPEN,False,10,9,1,https://github.com/scanon,Nvcrfix,4,[],https://github.com/NERSC/shifter/pull/238,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/238#issuecomment-438921201,Pulls from Nvidia's registry didn't work for a few reasons.  This addresses those issues.  One thing I had to do was remove the check for application/json because the Nvidia registry sets it to text.,Coverage decreased (-0.005%) to 64.645% when pulling fddfe34 on scanon:nvcrfix into eaf113c on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,238,2018-11-15T05:11:50Z,,2019-08-05T09:21:31Z,OPEN,False,10,9,1,https://github.com/scanon,Nvcrfix,4,[],https://github.com/NERSC/shifter/pull/238,https://github.com/uvNikita,3,https://github.com/NERSC/shifter/pull/238#issuecomment-506705778,Pulls from Nvidia's registry didn't work for a few reasons.  This addresses those issues.  One thing I had to do was remove the check for application/json because the Nvidia registry sets it to text.,@scanon any news on this PR? Pulling from nvcr doesn't work for us currently.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,238,2018-11-15T05:11:50Z,,2019-08-05T09:21:31Z,OPEN,False,10,9,1,https://github.com/scanon,Nvcrfix,4,[],https://github.com/NERSC/shifter/pull/238,https://github.com/scanon,4,https://github.com/NERSC/shifter/pull/238#issuecomment-512881808,Pulls from Nvidia's registry didn't work for a few reasons.  This addresses those issues.  One thing I had to do was remove the check for application/json because the Nvidia registry sets it to text.,@uvNikita Sorry.  This fell of my radar.  Let me push on it again.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,239,2018-11-15T14:33:14Z,2018-11-27T17:29:38Z,2018-11-27T17:29:39Z,MERGED,True,23,23,12,https://github.com/wickberg,Change to preferred capitialization for Slurm.,1,[],https://github.com/NERSC/shifter/pull/239,https://github.com/wickberg,1,https://github.com/NERSC/shifter/pull/239,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,239,2018-11-15T14:33:14Z,2018-11-27T17:29:38Z,2018-11-27T17:29:39Z,MERGED,True,23,23,12,https://github.com/wickberg,Change to preferred capitialization for Slurm.,1,[],https://github.com/NERSC/shifter/pull/239,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/239#issuecomment-439062283,,Coverage remained the same at 64.638% when pulling 90005e7 on wickberg:master into 0170484 on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,243,2019-02-03T01:12:33Z,2019-02-19T18:38:13Z,2019-03-06T16:57:09Z,MERGED,True,1,3,1,https://github.com/scanon,Boost timeout for gunicorn,1,[],https://github.com/NERSC/shifter/pull/243,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/243,worker threads will timeout on even a modest image pull with the default config.,worker threads will timeout on even a modest image pull with the default config.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,243,2019-02-03T01:12:33Z,2019-02-19T18:38:13Z,2019-03-06T16:57:09Z,MERGED,True,1,3,1,https://github.com/scanon,Boost timeout for gunicorn,1,[],https://github.com/NERSC/shifter/pull/243,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/243#issuecomment-460014118,worker threads will timeout on even a modest image pull with the default config.,Coverage remained the same at 64.638% when pulling f4e441e on scanon:timeout into 5a4a8cd on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,245,2019-02-19T18:43:38Z,2019-03-06T17:21:49Z,2019-12-18T16:07:53Z,MERGED,True,16,0,2,https://github.com/scanon,Fix for Issue #244,3,[],https://github.com/NERSC/shifter/pull/245,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/245,"Imported images have an extra './' in the tar file paths.  If a later
layer that builds on that import changes a directory to a file or link,
the paths will be different.  So this normalizes the paths across all the
layers by stripping off any './' prefix.
It adds a test too.
Closes issue #244","Imported images have an extra './' in the tar file paths.  If a later
layer that builds on that import changes a directory to a file or link,
the paths will be different.  So this normalizes the paths across all the
layers by stripping off any './' prefix.
It adds a test too.
Closes issue #244",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,245,2019-02-19T18:43:38Z,2019-03-06T17:21:49Z,2019-12-18T16:07:53Z,MERGED,True,16,0,2,https://github.com/scanon,Fix for Issue #244,3,[],https://github.com/NERSC/shifter/pull/245,https://github.com/scanon,2,https://github.com/NERSC/shifter/pull/245#issuecomment-470196839,"Imported images have an extra './' in the tar file paths.  If a later
layer that builds on that import changes a directory to a file or link,
the paths will be different.  So this normalizes the paths across all the
layers by stripping off any './' prefix.
It adds a test too.
Closes issue #244",I'm going to self-merge this since it should be very safe and includes a test.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,245,2019-02-19T18:43:38Z,2019-03-06T17:21:49Z,2019-12-18T16:07:53Z,MERGED,True,16,0,2,https://github.com/scanon,Fix for Issue #244,3,[],https://github.com/NERSC/shifter/pull/245,https://github.com/coveralls,3,https://github.com/NERSC/shifter/pull/245#issuecomment-470335196,"Imported images have an extra './' in the tar file paths.  If a later
layer that builds on that import changes a directory to a file or link,
the paths will be different.  So this normalizes the paths across all the
layers by stripping off any './' prefix.
It adds a test too.
Closes issue #244",Coverage remained the same at 64.65% when pulling 2b22f9a on scanon:issue244 into 4497d28 on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,247,2019-03-05T19:37:16Z,2019-03-06T16:43:49Z,2019-12-18T16:08:05Z,MERGED,True,0,1,1,https://github.com/scanon,Remove info line that logs passwords,1,[],https://github.com/NERSC/shifter/pull/247,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/247,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,251,2019-05-15T16:24:40Z,,2020-05-28T21:50:40Z,OPEN,False,1,1,1,https://github.com/khurtado,Fixes #250,1,[],https://github.com/NERSC/shifter/pull/251,https://github.com/khurtado,1,https://github.com/NERSC/shifter/pull/251,"Fixes #250
Allow '#' as part of the string name patterns.","Fixes #250
Allow '#' as part of the string name patterns.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,251,2019-05-15T16:24:40Z,,2020-05-28T21:50:40Z,OPEN,False,1,1,1,https://github.com/khurtado,Fixes #250,1,[],https://github.com/NERSC/shifter/pull/251,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/251#issuecomment-492728156,"Fixes #250
Allow '#' as part of the string name patterns.",Coverage remained the same at 64.65% when pulling 3384437 on khurtado:patch-1 into eaf113c on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,253,2019-05-24T17:36:14Z,2019-06-05T17:32:16Z,2019-06-05T17:32:16Z,CLOSED,False,17,15,2,https://github.com/agaur-lbl,BugFix: Incorrect error handling,1,[],https://github.com/NERSC/shifter/pull/253,https://github.com/agaur-lbl,1,https://github.com/NERSC/shifter/pull/253,"If we fail to load job data, we should propagate that
error code and exit cleanly. In the bug we saw- despite getting
incorrect job data, we were not handling the error correctly
and allowing shifter to continue setupRoot operation on shared nodes.
This patch, exits the prolog.
Signed-off-by: Aditi Gaur agaur@lbl.gov","If we fail to load job data, we should propagate that
error code and exit cleanly. In the bug we saw- despite getting
incorrect job data, we were not handling the error correctly
and allowing shifter to continue setupRoot operation on shared nodes.
This patch, exits the prolog.
Signed-off-by: Aditi Gaur agaur@lbl.gov",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,253,2019-05-24T17:36:14Z,2019-06-05T17:32:16Z,2019-06-05T17:32:16Z,CLOSED,False,17,15,2,https://github.com/agaur-lbl,BugFix: Incorrect error handling,1,[],https://github.com/NERSC/shifter/pull/253,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/253#issuecomment-495727444,"If we fail to load job data, we should propagate that
error code and exit cleanly. In the bug we saw- despite getting
incorrect job data, we were not handling the error correctly
and allowing shifter to continue setupRoot operation on shared nodes.
This patch, exits the prolog.
Signed-off-by: Aditi Gaur agaur@lbl.gov",Coverage remained the same at 64.65% when pulling cd2f5e5 on agaur-lbl:prolog_fix into eaf113c on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,254,2019-06-05T17:32:59Z,2019-06-05T22:32:41Z,2019-06-05T22:32:41Z,MERGED,True,5,3,2,https://github.com/agaur-lbl,BugFix: Incorrect error handling,1,[],https://github.com/NERSC/shifter/pull/254,https://github.com/agaur-lbl,1,https://github.com/NERSC/shifter/pull/254,"If we fail to load job data, we should propagate that
error code and exit cleanly. In the bug we saw- despite getting
incorrect job data, we were not handling the error correctly
and allowing shifter to continue setupRoot operation on shared nodes.
This patch, exits the prolog.
Signed-off-by: Aditi Gaur agaur@lbl.gov","If we fail to load job data, we should propagate that
error code and exit cleanly. In the bug we saw- despite getting
incorrect job data, we were not handling the error correctly
and allowing shifter to continue setupRoot operation on shared nodes.
This patch, exits the prolog.
Signed-off-by: Aditi Gaur agaur@lbl.gov",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,254,2019-06-05T17:32:59Z,2019-06-05T22:32:41Z,2019-06-05T22:32:41Z,MERGED,True,5,3,2,https://github.com/agaur-lbl,BugFix: Incorrect error handling,1,[],https://github.com/NERSC/shifter/pull/254,https://github.com/agaur-lbl,2,https://github.com/NERSC/shifter/pull/254#issuecomment-499181173,"If we fail to load job data, we should propagate that
error code and exit cleanly. In the bug we saw- despite getting
incorrect job data, we were not handling the error correctly
and allowing shifter to continue setupRoot operation on shared nodes.
This patch, exits the prolog.
Signed-off-by: Aditi Gaur agaur@lbl.gov",This new PR keeps dlopen change,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,254,2019-06-05T17:32:59Z,2019-06-05T22:32:41Z,2019-06-05T22:32:41Z,MERGED,True,5,3,2,https://github.com/agaur-lbl,BugFix: Incorrect error handling,1,[],https://github.com/NERSC/shifter/pull/254,https://github.com/coveralls,3,https://github.com/NERSC/shifter/pull/254#issuecomment-499184357,"If we fail to load job data, we should propagate that
error code and exit cleanly. In the bug we saw- despite getting
incorrect job data, we were not handling the error correctly
and allowing shifter to continue setupRoot operation on shared nodes.
This patch, exits the prolog.
Signed-off-by: Aditi Gaur agaur@lbl.gov",Coverage remained the same at 64.65% when pulling 94d2d84 on agaur-lbl:prolog_fix2 into eaf113c on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,254,2019-06-05T17:32:59Z,2019-06-05T22:32:41Z,2019-06-05T22:32:41Z,MERGED,True,5,3,2,https://github.com/agaur-lbl,BugFix: Incorrect error handling,1,[],https://github.com/NERSC/shifter/pull/254,https://github.com/dmjacobsen,4,https://github.com/NERSC/shifter/pull/254#issuecomment-499280325,"If we fail to load job data, we should propagate that
error code and exit cleanly. In the bug we saw- despite getting
incorrect job data, we were not handling the error correctly
and allowing shifter to continue setupRoot operation on shared nodes.
This patch, exits the prolog.
Signed-off-by: Aditi Gaur agaur@lbl.gov",This looks good to me.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,255,2019-07-01T22:36:46Z,2019-07-02T16:19:34Z,2019-07-02T16:19:34Z,CLOSED,False,7,6,2,https://github.com/dmjacobsen,Feature/sles15 update,2,[],https://github.com/NERSC/shifter/pull/255,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/255,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,255,2019-07-01T22:36:46Z,2019-07-02T16:19:34Z,2019-07-02T16:19:34Z,CLOSED,False,7,6,2,https://github.com/dmjacobsen,Feature/sles15 update,2,[],https://github.com/NERSC/shifter/pull/255,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/255#issuecomment-507451395,,Coverage remained the same at 64.65% when pulling a8b8b43 on feature/sles15_update into 65b33ed on master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,255,2019-07-01T22:36:46Z,2019-07-02T16:19:34Z,2019-07-02T16:19:34Z,CLOSED,False,7,6,2,https://github.com/dmjacobsen,Feature/sles15 update,2,[],https://github.com/NERSC/shifter/pull/255,https://github.com/scanon,3,https://github.com/NERSC/shifter/pull/255#issuecomment-507747651,,This breaks on older release.  I have a new PR that should work on old and new.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,256,2019-07-02T16:19:03Z,2019-07-02T20:10:41Z,2021-08-28T20:51:42Z,MERGED,True,38,7,5,https://github.com/scanon,Support for SLES15,3,[],https://github.com/NERSC/shifter/pull/256,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/256,"This builds on Doug's PR but fixes it so it doesn't break on older releases.  I've done test builds on SLES12, 15 and Centos 7 and it looks okay.","This builds on Doug's PR but fixes it so it doesn't break on older releases.  I've done test builds on SLES12, 15 and Centos 7 and it looks okay.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,256,2019-07-02T16:19:03Z,2019-07-02T20:10:41Z,2021-08-28T20:51:42Z,MERGED,True,38,7,5,https://github.com/scanon,Support for SLES15,3,[],https://github.com/NERSC/shifter/pull/256,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/256#issuecomment-507752046,"This builds on Doug's PR but fixes it so it doesn't break on older releases.  I've done test builds on SLES12, 15 and Centos 7 and it looks okay.",Coverage remained the same at 64.65% when pulling cb91a2d on sles15v2 into 65b33ed on master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,259,2019-08-03T15:14:09Z,2019-08-06T14:51:18Z,2019-12-18T16:07:37Z,MERGED,True,5,2,2,https://github.com/scanon,Fix for invalid json error due to different header,3,[],https://github.com/NERSC/shifter/pull/259,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/259,,,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,259,2019-08-03T15:14:09Z,2019-08-06T14:51:18Z,2019-12-18T16:07:37Z,MERGED,True,5,2,2,https://github.com/scanon,Fix for invalid json error due to different header,3,[],https://github.com/NERSC/shifter/pull/259,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/259#issuecomment-517932588,,Coverage remained the same at 64.65% when pulling 4a0f252 on scanon:issue258 into 69843f6 on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,259,2019-08-03T15:14:09Z,2019-08-06T14:51:18Z,2019-12-18T16:07:37Z,MERGED,True,5,2,2,https://github.com/scanon,Fix for invalid json error due to different header,3,[],https://github.com/NERSC/shifter/pull/259,https://github.com/dmjacobsen,3,https://github.com/NERSC/shifter/pull/259#issuecomment-518313872,,"It would be nice to understand what things we expect following ""application/json"" in the content-type.  We might want to dial it to specific conditions, rather than ""application/json*"", e.g., if there is format encodings or other information we might be able to make better use of that information (rather than effectively ignore it)",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,259,2019-08-03T15:14:09Z,2019-08-06T14:51:18Z,2019-12-18T16:07:37Z,MERGED,True,5,2,2,https://github.com/scanon,Fix for invalid json error due to different header,3,[],https://github.com/NERSC/shifter/pull/259,https://github.com/scanon,4,https://github.com/NERSC/shifter/pull/259#issuecomment-518698105,,I think this is ready now,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,264,2019-10-10T16:56:11Z,2019-10-10T20:33:43Z,2019-10-10T20:33:51Z,MERGED,True,43,15,7,https://github.com/dmjacobsen,Feature/allow var tmp,9,[],https://github.com/NERSC/shifter/pull/264,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/264,for issue #262,for issue #262,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,264,2019-10-10T16:56:11Z,2019-10-10T20:33:43Z,2019-10-10T20:33:51Z,MERGED,True,43,15,7,https://github.com/dmjacobsen,Feature/allow var tmp,9,[],https://github.com/NERSC/shifter/pull/264,https://github.com/agaur-lbl,2,https://github.com/NERSC/shifter/pull/264#issuecomment-540700077,for issue #262,"Overall looks good, i would like paths to be configurable. Special paths can be given special consideration.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,264,2019-10-10T16:56:11Z,2019-10-10T20:33:43Z,2019-10-10T20:33:51Z,MERGED,True,43,15,7,https://github.com/dmjacobsen,Feature/allow var tmp,9,[],https://github.com/NERSC/shifter/pull/264,https://github.com/dmjacobsen,3,https://github.com/NERSC/shifter/pull/264#issuecomment-540775024,for issue #262,the spacing is corrected.  It looks like travisci fell apart on the previous push owing to a transient failure at travis.  hopefully this push will build.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,264,2019-10-10T16:56:11Z,2019-10-10T20:33:43Z,2019-10-10T20:33:51Z,MERGED,True,43,15,7,https://github.com/dmjacobsen,Feature/allow var tmp,9,[],https://github.com/NERSC/shifter/pull/264,https://github.com/dmjacobsen,4,https://github.com/NERSC/shifter/pull/264#issuecomment-540775883,for issue #262,"re: making paths configurable, i believe that is in-general possible.  /var is a little touchy owing to its security issues.  I don't think there is any harm in /var/tmp, but other paths within var could be more problematic.  We can re-address the overall configurability in a branch focused on that.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,264,2019-10-10T16:56:11Z,2019-10-10T20:33:43Z,2019-10-10T20:33:51Z,MERGED,True,43,15,7,https://github.com/dmjacobsen,Feature/allow var tmp,9,[],https://github.com/NERSC/shifter/pull/264,https://github.com/coveralls,5,https://github.com/NERSC/shifter/pull/264#issuecomment-540777865,for issue #262,Coverage increased (+0.05%) to 64.695% when pulling ff923b6 on feature/allow_var_tmp into 5186aac on master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,269,2019-11-27T01:00:28Z,2019-11-27T21:45:38Z,2019-12-18T16:07:11Z,MERGED,True,91,1,3,https://github.com/scanon,Fix for #267,4,[],https://github.com/NERSC/shifter/pull/269,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/269,"This fixes #267.  It does a monkeypatch to the tarfile library.
The monkey patch as can be seen is from Vincent Batts.","This fixes #267.  It does a monkeypatch to the tarfile library.
The monkey patch as can be seen is from Vincent Batts.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,269,2019-11-27T01:00:28Z,2019-11-27T21:45:38Z,2019-12-18T16:07:11Z,MERGED,True,91,1,3,https://github.com/scanon,Fix for #267,4,[],https://github.com/NERSC/shifter/pull/269,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/269#issuecomment-559169508,"This fixes #267.  It does a monkeypatch to the tarfile library.
The monkey patch as can be seen is from Vincent Batts.",Coverage increased (+0.05%) to 64.736% when pulling ee1c2d9 on scanon:issue267 into c13ffe6 on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,269,2019-11-27T01:00:28Z,2019-11-27T21:45:38Z,2019-12-18T16:07:11Z,MERGED,True,91,1,3,https://github.com/scanon,Fix for #267,4,[],https://github.com/NERSC/shifter/pull/269,https://github.com/dmjacobsen,3,https://github.com/NERSC/shifter/pull/269#issuecomment-559181595,"This fixes #267.  It does a monkeypatch to the tarfile library.
The monkey patch as can be seen is from Vincent Batts.",i'm trying to understand this;  do we really want to extract files with xattrs?  is there a way to simply squash whatever xattrs there might be?,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,269,2019-11-27T01:00:28Z,2019-11-27T21:45:38Z,2019-12-18T16:07:11Z,MERGED,True,91,1,3,https://github.com/scanon,Fix for #267,4,[],https://github.com/NERSC/shifter/pull/269,https://github.com/scanon,4,https://github.com/NERSC/shifter/pull/269#issuecomment-559191356,"This fixes #267.  It does a monkeypatch to the tarfile library.
The monkey patch as can be seen is from Vincent Batts.",I don't think this changes the behavior of the extraction.  The issue is the tarfile barfs on the unicode encoded headers which means we can pull some newer images.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,269,2019-11-27T01:00:28Z,2019-11-27T21:45:38Z,2019-12-18T16:07:11Z,MERGED,True,91,1,3,https://github.com/scanon,Fix for #267,4,[],https://github.com/NERSC/shifter/pull/269,https://github.com/dmjacobsen,5,https://github.com/NERSC/shifter/pull/269#issuecomment-559193997,"This fixes #267.  It does a monkeypatch to the tarfile library.
The monkey patch as can be seen is from Vincent Batts.","right, i think i understood that from the code;  i'm more wondering if the code should be deleting the xattrs instead of fixing them",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,269,2019-11-27T01:00:28Z,2019-11-27T21:45:38Z,2019-12-18T16:07:11Z,MERGED,True,91,1,3,https://github.com/scanon,Fix for #267,4,[],https://github.com/NERSC/shifter/pull/269,https://github.com/dmjacobsen,6,https://github.com/NERSC/shifter/pull/269#issuecomment-559194181,"This fixes #267.  It does a monkeypatch to the tarfile library.
The monkey patch as can be seen is from Vincent Batts.",perhaps ALL the xattrs; it's unclear what value they generate in the shifter model of execution,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,270,2019-11-27T17:02:46Z,2019-11-27T17:23:16Z,2019-12-18T16:07:25Z,MERGED,True,4,0,1,https://github.com/scanon,Fix for queue list,1,[],https://github.com/NERSC/shifter/pull/270,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/270,"This fixes #268.  Some older records may be missing the pulltag
key.  This ignores those in the queue list.","This fixes #268.  Some older records may be missing the pulltag
key.  This ignores those in the queue list.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,270,2019-11-27T17:02:46Z,2019-11-27T17:23:16Z,2019-12-18T16:07:25Z,MERGED,True,4,0,1,https://github.com/scanon,Fix for queue list,1,[],https://github.com/NERSC/shifter/pull/270,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/270#issuecomment-559175631,"This fixes #268.  Some older records may be missing the pulltag
key.  This ignores those in the queue list.",Coverage decreased (-0.009%) to 64.686% when pulling 0ae73c7 on scanon:issue268 into 24a9d9a on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,270,2019-11-27T17:02:46Z,2019-11-27T17:23:16Z,2019-12-18T16:07:25Z,MERGED,True,4,0,1,https://github.com/scanon,Fix for queue list,1,[],https://github.com/NERSC/shifter/pull/270,https://github.com/dmjacobsen,3,https://github.com/NERSC/shifter/pull/270#issuecomment-559180890,"This fixes #268.  Some older records may be missing the pulltag
key.  This ignores those in the queue list.",make sense to me.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,271,2019-12-14T19:31:33Z,2019-12-30T10:59:24Z,2019-12-30T10:59:25Z,MERGED,True,16,11,4,https://github.com/scanon,Bugfix/status threads,2,[],https://github.com/NERSC/shifter/pull/271,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/271,This fixes some bugs with the number of threads and the status reporting.,This fixes some bugs with the number of threads and the status reporting.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,271,2019-12-14T19:31:33Z,2019-12-30T10:59:24Z,2019-12-30T10:59:25Z,MERGED,True,16,11,4,https://github.com/scanon,Bugfix/status threads,2,[],https://github.com/NERSC/shifter/pull/271,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/271#issuecomment-565746068,This fixes some bugs with the number of threads and the status reporting.,Coverage increased (+0.05%) to 64.791% when pulling 9d47bda on scanon:bugfix/status_threads into d99a472 on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,271,2019-12-14T19:31:33Z,2019-12-30T10:59:24Z,2019-12-30T10:59:25Z,MERGED,True,16,11,4,https://github.com/scanon,Bugfix/status threads,2,[],https://github.com/NERSC/shifter/pull/271,https://github.com/dmjacobsen,3,https://github.com/NERSC/shifter/pull/271#issuecomment-569645951,This fixes some bugs with the number of threads and the status reporting.,"merging because I need these integrated for package distribution for another branch testing/integration, and this looks good to me.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,273,2019-12-28T11:36:42Z,2020-01-07T00:09:33Z,2021-08-28T20:52:13Z,MERGED,True,155,27,9,https://github.com/dmjacobsen,dp a more complete job of dynamically generating etc content,16,[],https://github.com/NERSC/shifter/pull/273,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/273,this is to try to correct #272,this is to try to correct #272,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,273,2019-12-28T11:36:42Z,2020-01-07T00:09:33Z,2021-08-28T20:52:13Z,MERGED,True,155,27,9,https://github.com/dmjacobsen,dp a more complete job of dynamically generating etc content,16,[],https://github.com/NERSC/shifter/pull/273,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/273#issuecomment-569409459,this is to try to correct #272,Coverage increased (+13.6%) to 78.352% when pulling 771f637 on hotfix/dyn_etc into c9279d2 on master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,273,2019-12-28T11:36:42Z,2020-01-07T00:09:33Z,2021-08-28T20:52:13Z,MERGED,True,155,27,9,https://github.com/dmjacobsen,dp a more complete job of dynamically generating etc content,16,[],https://github.com/NERSC/shifter/pull/273,https://github.com/dmjacobsen,3,https://github.com/NERSC/shifter/pull/273#issuecomment-570477269,this is to try to correct #272,"I did add an integration test for the overall capability to assure it is functional, however the unittest for the _import_user function is not complete yet",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,273,2019-12-28T11:36:42Z,2020-01-07T00:09:33Z,2021-08-28T20:52:13Z,MERGED,True,155,27,9,https://github.com/dmjacobsen,dp a more complete job of dynamically generating etc content,16,[],https://github.com/NERSC/shifter/pull/273,https://github.com/scanon,4,https://github.com/NERSC/shifter/pull/273#issuecomment-571371337,this is to try to correct #272,I think this is good enough so I'm going to merge.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,275,2020-01-08T11:42:38Z,2020-01-12T19:50:29Z,2021-08-28T20:52:15Z,MERGED,True,156,57,4,https://github.com/dmjacobsen,Build shifter_cray_mpich libraries into an RPM,6,[],https://github.com/NERSC/shifter/pull/275,https://github.com/dmjacobsen,1,https://github.com/NERSC/shifter/pull/275,"This automates the construction of an RPM that can be  integrated into a CLE image to ease distribution of shifter-prepared cray-mpich libraries, and optimizes the performance of the availability of these libraries to compute nodes as a result.
Commits d5494a4 and 8c84a27 are the key commits here.  I also performed some pylint-reccommended cleanups in between (sorry about that).
In addition to constructing an RPM, these changes:

move the RPMs from the argument-specified destination to append ""/lib64"" which was a required manual transformation before
allow a new argument to change the shifter module name to be used (useful for specifying that it should be something other than mpich, perhaps mpich-cle6)","This automates the construction of an RPM that can be  integrated into a CLE image to ease distribution of shifter-prepared cray-mpich libraries, and optimizes the performance of the availability of these libraries to compute nodes as a result.
Commits d5494a4 and 8c84a27 are the key commits here.  I also performed some pylint-reccommended cleanups in between (sorry about that).
In addition to constructing an RPM, these changes:

move the RPMs from the argument-specified destination to append ""/lib64"" which was a required manual transformation before
allow a new argument to change the shifter module name to be used (useful for specifying that it should be something other than mpich, perhaps mpich-cle6)",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,275,2020-01-08T11:42:38Z,2020-01-12T19:50:29Z,2021-08-28T20:52:15Z,MERGED,True,156,57,4,https://github.com/dmjacobsen,Build shifter_cray_mpich libraries into an RPM,6,[],https://github.com/NERSC/shifter/pull/275,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/275#issuecomment-572014496,"This automates the construction of an RPM that can be  integrated into a CLE image to ease distribution of shifter-prepared cray-mpich libraries, and optimizes the performance of the availability of these libraries to compute nodes as a result.
Commits d5494a4 and 8c84a27 are the key commits here.  I also performed some pylint-reccommended cleanups in between (sorry about that).
In addition to constructing an RPM, these changes:

move the RPMs from the argument-specified destination to append ""/lib64"" which was a required manual transformation before
allow a new argument to change the shifter module name to be used (useful for specifying that it should be something other than mpich, perhaps mpich-cle6)",Coverage remained the same at 78.352% when pulling d4a28a0 on improve_cray_mpich_modules into 31707f2 on master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,275,2020-01-08T11:42:38Z,2020-01-12T19:50:29Z,2021-08-28T20:52:15Z,MERGED,True,156,57,4,https://github.com/dmjacobsen,Build shifter_cray_mpich libraries into an RPM,6,[],https://github.com/NERSC/shifter/pull/275,https://github.com/dmjacobsen,3,https://github.com/NERSC/shifter/pull/275#issuecomment-572049386,"This automates the construction of an RPM that can be  integrated into a CLE image to ease distribution of shifter-prepared cray-mpich libraries, and optimizes the performance of the availability of these libraries to compute nodes as a result.
Commits d5494a4 and 8c84a27 are the key commits here.  I also performed some pylint-reccommended cleanups in between (sorry about that).
In addition to constructing an RPM, these changes:

move the RPMs from the argument-specified destination to append ""/lib64"" which was a required manual transformation before
allow a new argument to change the shifter module name to be used (useful for specifying that it should be something other than mpich, perhaps mpich-cle6)",Added some updates to the shifter documentation,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,276,2020-04-02T00:43:38Z,2020-04-03T21:07:15Z,2020-04-03T21:17:47Z,CLOSED,False,3,1,1,https://github.com/maxim-belkin,munge.py: use os.strerror() to get error message,1,[],https://github.com/NERSC/shifter/pull/276,https://github.com/maxim-belkin,1,https://github.com/NERSC/shifter/pull/276,I suggest using os.strerror() to print error message.,I suggest using os.strerror() to print error message.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,276,2020-04-02T00:43:38Z,2020-04-03T21:07:15Z,2020-04-03T21:17:47Z,CLOSED,False,3,1,1,https://github.com/maxim-belkin,munge.py: use os.strerror() to get error message,1,[],https://github.com/NERSC/shifter/pull/276,https://github.com/dmjacobsen,2,https://github.com/NERSC/shifter/pull/276#issuecomment-608471100,I suggest using os.strerror() to print error message.,Is munge returning  a std errno  as its exit code?,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,276,2020-04-02T00:43:38Z,2020-04-03T21:07:15Z,2020-04-03T21:17:47Z,CLOSED,False,3,1,1,https://github.com/maxim-belkin,munge.py: use os.strerror() to get error message,1,[],https://github.com/NERSC/shifter/pull/276,https://github.com/dmjacobsen,3,https://github.com/NERSC/shifter/pull/276#issuecomment-608490831,I suggest using os.strerror() to print error message.,"it doesn't look like munge is using standard errno codes for  return codes:
https://github.com/dun/munge/blob/master/src/munge/unmunge.c#L242
which refer to these statuses:
https://github.com/dun/munge/blob/master/src/libmunge/munge.h#L142
So I don't think we can use os.strerror() here, but it might be interesting to integrate libmunge into python and call munge_strerror() to get a better formatted error.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,276,2020-04-02T00:43:38Z,2020-04-03T21:07:15Z,2020-04-03T21:17:47Z,CLOSED,False,3,1,1,https://github.com/maxim-belkin,munge.py: use os.strerror() to get error message,1,[],https://github.com/NERSC/shifter/pull/276,https://github.com/maxim-belkin,4,https://github.com/NERSC/shifter/pull/276#issuecomment-608664063,I suggest using os.strerror() to print error message.,"I haven't thought of looking into munge's error codes. My bad.
I'd be happy to submit another PR to integrate libmunge into python. OK to assume location of libmunge.so?",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,276,2020-04-02T00:43:38Z,2020-04-03T21:07:15Z,2020-04-03T21:17:47Z,CLOSED,False,3,1,1,https://github.com/maxim-belkin,munge.py: use os.strerror() to get error message,1,[],https://github.com/NERSC/shifter/pull/276,https://github.com/dmjacobsen,5,https://github.com/NERSC/shifter/pull/276#issuecomment-608670593,I suggest using os.strerror() to print error message.,"I'd be happy to submit another PR to integrate libmunge into python. OK to assume location of libmunge.so?

I think the location of munge should be identified during the ./configure process;  there should be a way of getting autoconf to expose that",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,277,2020-04-03T21:26:11Z,,2020-10-20T17:12:10Z,OPEN,False,9,7,1,https://github.com/maxim-belkin,munge.py: get error message from libmunge,3,[],https://github.com/NERSC/shifter/pull/277,https://github.com/maxim-belkin,1,https://github.com/NERSC/shifter/pull/277,Obtain error messages from libmunge instead of hard-coding them.,Obtain error messages from libmunge instead of hard-coding them.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,277,2020-04-03T21:26:11Z,,2020-10-20T17:12:10Z,OPEN,False,9,7,1,https://github.com/maxim-belkin,munge.py: get error message from libmunge,3,[],https://github.com/NERSC/shifter/pull/277,https://github.com/maxim-belkin,2,https://github.com/NERSC/shifter/pull/277#issuecomment-608682458,Obtain error messages from libmunge instead of hard-coding them.,"Perhaps, we could prefix error messages with ""Munge error:""...",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,277,2020-04-03T21:26:11Z,,2020-10-20T17:12:10Z,OPEN,False,9,7,1,https://github.com/maxim-belkin,munge.py: get error message from libmunge,3,[],https://github.com/NERSC/shifter/pull/277,https://github.com/maxim-belkin,3,https://github.com/NERSC/shifter/pull/277#issuecomment-611255491,Obtain error messages from libmunge instead of hard-coding them.,"@dmjacobsen, @scanon, please let me know if you have any comments or concerns regarding this PR",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,277,2020-04-03T21:26:11Z,,2020-10-20T17:12:10Z,OPEN,False,9,7,1,https://github.com/maxim-belkin,munge.py: get error message from libmunge,3,[],https://github.com/NERSC/shifter/pull/277,https://github.com/scanon,4,https://github.com/NERSC/shifter/pull/277#issuecomment-611287092,Obtain error messages from libmunge instead of hard-coding them.,It looks reasonable. I need to try it out. I think it will break our test since I mock munge in those.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,277,2020-04-03T21:26:11Z,,2020-10-20T17:12:10Z,OPEN,False,9,7,1,https://github.com/maxim-belkin,munge.py: get error message from libmunge,3,[],https://github.com/NERSC/shifter/pull/277,https://github.com/coveralls,5,https://github.com/NERSC/shifter/pull/277#issuecomment-638514304,Obtain error messages from libmunge instead of hard-coding them.,Coverage increased (+0.009%) to 78.4% when pulling eb8713b on maxim-belkin:munge-str-error into 4c97268 on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,277,2020-04-03T21:26:11Z,,2020-10-20T17:12:10Z,OPEN,False,9,7,1,https://github.com/maxim-belkin,munge.py: get error message from libmunge,3,[],https://github.com/NERSC/shifter/pull/277,https://github.com/maxim-belkin,6,https://github.com/NERSC/shifter/pull/277#issuecomment-712481832,Obtain error messages from libmunge instead of hard-coding them.,We've been using Shifter with this patch on Blue Waters for a while now and didn't see any problems/issues related to this change.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,278,2020-04-09T21:07:33Z,2020-04-10T15:52:13Z,2020-04-10T15:52:30Z,CLOSED,False,33,27,1,https://github.com/maxim-belkin,activate_gpu_support.sh: use proper Bash syntax,1,[],https://github.com/NERSC/shifter/pull/278,https://github.com/maxim-belkin,1,https://github.com/NERSC/shifter/pull/278,"Fix contrib/gpu/activate_gpu_support.sh  script to use proper Bash syntax:


Use double [[ ... ]] instead of [ ... ]
[[ ... ]] is more robust than [ ... ] and lets use use variables without having to put double quotes around them. Currently, log function is called by parse_command_line_arguments when wrong number of input arguments is specified. The log functions fails because of the if [ $is_verbose_active = false ]; then line because is_verbose_active is not set and variables have to be double-quoted in [ ... ].


double-quote all variables where necessary
E.g.:  mount_dir=$(dirname ""$mount_point"")


Use proper Bash comparison
Replace if [ ! $# -eq 4 ]; then with if [[ $# -ne 4 ]]; then


Avoid masking return values
Example:  change
local mount_dir=$(dirname $mount_point)
to
local mount_dir
mount_dir=$(dirname ""$mount_point"")
because combined declaration + assignment masks the return value of dirname $mount_point and lets the script to proceed even when dirname fails.","Fix contrib/gpu/activate_gpu_support.sh  script to use proper Bash syntax:


Use double [[ ... ]] instead of [ ... ]
[[ ... ]] is more robust than [ ... ] and lets use use variables without having to put double quotes around them. Currently, log function is called by parse_command_line_arguments when wrong number of input arguments is specified. The log functions fails because of the if [ $is_verbose_active = false ]; then line because is_verbose_active is not set and variables have to be double-quoted in [ ... ].


double-quote all variables where necessary
E.g.:  mount_dir=$(dirname ""$mount_point"")


Use proper Bash comparison
Replace if [ ! $# -eq 4 ]; then with if [[ $# -ne 4 ]]; then


Avoid masking return values
Example:  change
local mount_dir=$(dirname $mount_point)
to
local mount_dir
mount_dir=$(dirname ""$mount_point"")
because combined declaration + assignment masks the return value of dirname $mount_point and lets the script to proceed even when dirname fails.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,278,2020-04-09T21:07:33Z,2020-04-10T15:52:13Z,2020-04-10T15:52:30Z,CLOSED,False,33,27,1,https://github.com/maxim-belkin,activate_gpu_support.sh: use proper Bash syntax,1,[],https://github.com/NERSC/shifter/pull/278,https://github.com/scanon,2,https://github.com/NERSC/shifter/pull/278#issuecomment-611866182,"Fix contrib/gpu/activate_gpu_support.sh  script to use proper Bash syntax:


Use double [[ ... ]] instead of [ ... ]
[[ ... ]] is more robust than [ ... ] and lets use use variables without having to put double quotes around them. Currently, log function is called by parse_command_line_arguments when wrong number of input arguments is specified. The log functions fails because of the if [ $is_verbose_active = false ]; then line because is_verbose_active is not set and variables have to be double-quoted in [ ... ].


double-quote all variables where necessary
E.g.:  mount_dir=$(dirname ""$mount_point"")


Use proper Bash comparison
Replace if [ ! $# -eq 4 ]; then with if [[ $# -ne 4 ]]; then


Avoid masking return values
Example:  change
local mount_dir=$(dirname $mount_point)
to
local mount_dir
mount_dir=$(dirname ""$mount_point"")
because combined declaration + assignment masks the return value of dirname $mount_point and lets the script to proceed even when dirname fails.",Let me see if we can test this locally.  I think we are using a different approach.  I will share that with you via Slack once I confirm.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,278,2020-04-09T21:07:33Z,2020-04-10T15:52:13Z,2020-04-10T15:52:30Z,CLOSED,False,33,27,1,https://github.com/maxim-belkin,activate_gpu_support.sh: use proper Bash syntax,1,[],https://github.com/NERSC/shifter/pull/278,https://github.com/scanon,3,https://github.com/NERSC/shifter/pull/278#issuecomment-612088524,"Fix contrib/gpu/activate_gpu_support.sh  script to use proper Bash syntax:


Use double [[ ... ]] instead of [ ... ]
[[ ... ]] is more robust than [ ... ] and lets use use variables without having to put double quotes around them. Currently, log function is called by parse_command_line_arguments when wrong number of input arguments is specified. The log functions fails because of the if [ $is_verbose_active = false ]; then line because is_verbose_active is not set and variables have to be double-quoted in [ ... ].


double-quote all variables where necessary
E.g.:  mount_dir=$(dirname ""$mount_point"")


Use proper Bash comparison
Replace if [ ! $# -eq 4 ]; then with if [[ $# -ne 4 ]]; then


Avoid masking return values
Example:  change
local mount_dir=$(dirname $mount_point)
to
local mount_dir
mount_dir=$(dirname ""$mount_point"")
because combined declaration + assignment masks the return value of dirname $mount_point and lets the script to proceed even when dirname fails.",I think we should deprecate this and replace it with examples using modules.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,278,2020-04-09T21:07:33Z,2020-04-10T15:52:13Z,2020-04-10T15:52:30Z,CLOSED,False,33,27,1,https://github.com/maxim-belkin,activate_gpu_support.sh: use proper Bash syntax,1,[],https://github.com/NERSC/shifter/pull/278,https://github.com/maxim-belkin,4,https://github.com/NERSC/shifter/pull/278#issuecomment-612091866,"Fix contrib/gpu/activate_gpu_support.sh  script to use proper Bash syntax:


Use double [[ ... ]] instead of [ ... ]
[[ ... ]] is more robust than [ ... ] and lets use use variables without having to put double quotes around them. Currently, log function is called by parse_command_line_arguments when wrong number of input arguments is specified. The log functions fails because of the if [ $is_verbose_active = false ]; then line because is_verbose_active is not set and variables have to be double-quoted in [ ... ].


double-quote all variables where necessary
E.g.:  mount_dir=$(dirname ""$mount_point"")


Use proper Bash comparison
Replace if [ ! $# -eq 4 ]; then with if [[ $# -ne 4 ]]; then


Avoid masking return values
Example:  change
local mount_dir=$(dirname $mount_point)
to
local mount_dir
mount_dir=$(dirname ""$mount_point"")
because combined declaration + assignment masks the return value of dirname $mount_point and lets the script to proceed even when dirname fails.","I think we should deprecate this and replace it with examples using modules.

It makes to deprecate the script for Shifter 18, so I'm going to close this.
If you want, I can submit it against shifter-16.08 branch -- just let me know.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,279,2020-04-10T20:17:20Z,2020-06-03T23:23:04Z,2020-10-14T22:15:48Z,MERGED,True,65,47,1,https://github.com/maxim-belkin,cle6.rst: use proper reStructuredText,2,[],https://github.com/NERSC/shifter/pull/279,https://github.com/maxim-belkin,1,https://github.com/NERSC/shifter/pull/279,Fixed reStructuredText syntax in cle6.rst.,Fixed reStructuredText syntax in cle6.rst.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,279,2020-04-10T20:17:20Z,2020-06-03T23:23:04Z,2020-10-14T22:15:48Z,MERGED,True,65,47,1,https://github.com/maxim-belkin,cle6.rst: use proper reStructuredText,2,[],https://github.com/NERSC/shifter/pull/279,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/279#issuecomment-638511143,Fixed reStructuredText syntax in cle6.rst.,Coverage decreased (-0.09%) to 78.261% when pulling 982d5f5 on maxim-belkin:cle6-fix-sphinx-doc into 63e5d1b on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,280,2020-04-10T22:04:37Z,2020-06-03T23:16:29Z,2020-10-14T22:15:38Z,MERGED,True,62,38,1,https://github.com/maxim-belkin,centos6.rst: fix reStructuredText syntax,2,[],https://github.com/NERSC/shifter/pull/280,https://github.com/maxim-belkin,1,https://github.com/NERSC/shifter/pull/280,"fix reStructuredText syntax:

use .. code-block:: bash instead of literal blocks.
replace "" with  `` where appropriate
Use .. note:: for notes","fix reStructuredText syntax:

use .. code-block:: bash instead of literal blocks.
replace "" with  `` where appropriate
Use .. note:: for notes",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,280,2020-04-10T22:04:37Z,2020-06-03T23:16:29Z,2020-10-14T22:15:38Z,MERGED,True,62,38,1,https://github.com/maxim-belkin,centos6.rst: fix reStructuredText syntax,2,[],https://github.com/NERSC/shifter/pull/280,https://github.com/scanon,2,https://github.com/NERSC/shifter/pull/280#issuecomment-638503984,"fix reStructuredText syntax:

use .. code-block:: bash instead of literal blocks.
replace "" with  `` where appropriate
Use .. note:: for notes","The test are failing for a different reason.  Since this is a docs only update, I'm going to merge it.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,280,2020-04-10T22:04:37Z,2020-06-03T23:16:29Z,2020-10-14T22:15:38Z,MERGED,True,62,38,1,https://github.com/maxim-belkin,centos6.rst: fix reStructuredText syntax,2,[],https://github.com/NERSC/shifter/pull/280,https://github.com/coveralls,3,https://github.com/NERSC/shifter/pull/280#issuecomment-638509333,"fix reStructuredText syntax:

use .. code-block:: bash instead of literal blocks.
replace "" with  `` where appropriate
Use .. note:: for notes",Coverage increased (+0.09%) to 78.352% when pulling 3a345d6 on maxim-belkin:centos6-rst into 169d1a2 on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,281,2020-04-21T21:28:13Z,2020-04-22T00:09:56Z,2020-04-22T00:09:56Z,CLOSED,False,12,0,1,https://github.com/maxim-belkin,Test documentation for PRs,1,[],https://github.com/NERSC/shifter/pull/281,https://github.com/maxim-belkin,1,https://github.com/NERSC/shifter/pull/281,GitHub Action to test that documentation builds fine on pull requests.,GitHub Action to test that documentation builds fine on pull requests.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,281,2020-04-21T21:28:13Z,2020-04-22T00:09:56Z,2020-04-22T00:09:56Z,CLOSED,False,12,0,1,https://github.com/maxim-belkin,Test documentation for PRs,1,[],https://github.com/NERSC/shifter/pull/281,https://github.com/maxim-belkin,2,https://github.com/NERSC/shifter/pull/281#issuecomment-617474195,GitHub Action to test that documentation builds fine on pull requests.,Closing this as I found a few issues with this PR. I'll create a new one once I'm happy with the changes.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,282,2020-06-03T20:12:15Z,2020-06-29T21:10:27Z,2020-06-29T21:10:27Z,MERGED,True,554,49,14,https://github.com/scanon,Feature/skopeo,10,[],https://github.com/NERSC/shifter/pull/282,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/282,"This will add an option to use an external set of command-line tools (skopeo, umoci, oci-image-tool) to do the image pull and extraction.  This should allow support for newer parts of the standard and should be faster than the current built-in methods.","This will add an option to use an external set of command-line tools (skopeo, umoci, oci-image-tool) to do the image pull and extraction.  This should allow support for newer parts of the standard and should be faster than the current built-in methods.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,282,2020-06-03T20:12:15Z,2020-06-29T21:10:27Z,2020-06-29T21:10:27Z,MERGED,True,554,49,14,https://github.com/scanon,Feature/skopeo,10,[],https://github.com/NERSC/shifter/pull/282,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/282#issuecomment-638501427,"This will add an option to use an external set of command-line tools (skopeo, umoci, oci-image-tool) to do the image pull and extraction.  This should allow support for newer parts of the standard and should be faster than the current built-in methods.",Coverage increased (+0.2%) to 78.485% when pulling 81a79ad on scanon:feature/skopeo into d6370b6 on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,283,2020-06-03T23:01:20Z,2020-06-03T23:10:16Z,2020-06-03T23:10:16Z,MERGED,True,0,2,1,https://github.com/scanon,Remove empty PATH,1,[],https://github.com/NERSC/shifter/pull/283,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/283,This is breaking travis,This is breaking travis,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,283,2020-06-03T23:01:20Z,2020-06-03T23:10:16Z,2020-06-03T23:10:16Z,MERGED,True,0,2,1,https://github.com/scanon,Remove empty PATH,1,[],https://github.com/NERSC/shifter/pull/283,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/283#issuecomment-638506536,This is breaking travis,Coverage decreased (-0.09%) to 78.261% when pulling dccfda6 on scanon:bug/travis into 2a75bbf on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,283,2020-06-03T23:01:20Z,2020-06-03T23:10:16Z,2020-06-03T23:10:16Z,MERGED,True,0,2,1,https://github.com/scanon,Remove empty PATH,1,[],https://github.com/NERSC/shifter/pull/283,https://github.com/scanon,3,https://github.com/NERSC/shifter/pull/283#issuecomment-638507382,This is breaking travis,This is breaking tests so I'm going to merge this.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,284,2020-08-17T22:13:53Z,2020-09-28T21:45:53Z,2020-09-28T21:45:53Z,MERGED,True,42,5,5,https://github.com/scanon,Unpacking and cleanup issues due to weird permissions,1,[],https://github.com/NERSC/shifter/pull/284,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/284,"This fixes a bug when trying to unpack an image
that has weird permissions such as non-writeable
directories by the owner.  It also fixes some
cleanup for those same kinds of cases.","This fixes a bug when trying to unpack an image
that has weird permissions such as non-writeable
directories by the owner.  It also fixes some
cleanup for those same kinds of cases.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,284,2020-08-17T22:13:53Z,2020-09-28T21:45:53Z,2020-09-28T21:45:53Z,MERGED,True,42,5,5,https://github.com/scanon,Unpacking and cleanup issues due to weird permissions,1,[],https://github.com/NERSC/shifter/pull/284,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/284#issuecomment-675143544,"This fixes a bug when trying to unpack an image
that has weird permissions such as non-writeable
directories by the owner.  It also fixes some
cleanup for those same kinds of cases.",Coverage increased (+0.03%) to 78.434% when pulling c09351b on scanon:fix_perm_issue into 771dcc4 on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,285,2020-09-08T09:50:10Z,,2020-09-09T16:10:04Z,OPEN,False,13,12,1,https://github.com/uvNikita,Fix pulling from nvcr.io,1,[],https://github.com/NERSC/shifter/pull/285,https://github.com/uvNikita,1,https://github.com/NERSC/shifter/pull/285,Based on #238 with my suggestions applied.,Based on #238 with my suggestions applied.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,285,2020-09-08T09:50:10Z,,2020-09-09T16:10:04Z,OPEN,False,13,12,1,https://github.com/uvNikita,Fix pulling from nvcr.io,1,[],https://github.com/NERSC/shifter/pull/285,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/285#issuecomment-688768775,Based on #238 with my suggestions applied.,Coverage decreased (-0.05%) to 78.351% when pulling 50e135d on uvNikita:nvcr into 771dcc4 on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,285,2020-09-08T09:50:10Z,,2020-09-09T16:10:04Z,OPEN,False,13,12,1,https://github.com/uvNikita,Fix pulling from nvcr.io,1,[],https://github.com/NERSC/shifter/pull/285,https://github.com/scanon,3,https://github.com/NERSC/shifter/pull/285#issuecomment-688990555,Based on #238 with my suggestions applied.,"Nikita,
The latest updates added an option to use some external tools from the broader OCI community to handle pulling and unpacking images.  This may be a more robust way to deal with these other repositories.  But I'll take a look at the PR.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,285,2020-09-08T09:50:10Z,,2020-09-09T16:10:04Z,OPEN,False,13,12,1,https://github.com/uvNikita,Fix pulling from nvcr.io,1,[],https://github.com/NERSC/shifter/pull/285,https://github.com/uvNikita,4,https://github.com/NERSC/shifter/pull/285#issuecomment-689501933,Based on #238 with my suggestions applied.,"Nikita,
The latest updates added an option to use some external tools from the broader OCI community to handle pulling and unpacking images. This may be a more robust way to deal with these other repositories. But I'll take a look at the PR.

Sounds good! Is there something I should do to enable this new pulling method?",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,285,2020-09-08T09:50:10Z,,2020-09-09T16:10:04Z,OPEN,False,13,12,1,https://github.com/uvNikita,Fix pulling from nvcr.io,1,[],https://github.com/NERSC/shifter/pull/285,https://github.com/scanon,5,https://github.com/NERSC/shifter/pull/285#issuecomment-689663977,Based on #238 with my suggestions applied.,"Here is the documentation on the external mode option....
https://github.com/NERSC/shifter/blob/master/doc/skopeo.rst",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,286,2020-09-09T11:30:28Z,,2021-08-29T19:03:59Z,OPEN,False,1,1,1,https://github.com/uvNikita,Remove autoclear option from squashfs mount,1,[],https://github.com/NERSC/shifter/pull/286,https://github.com/uvNikita,1,https://github.com/NERSC/shifter/pull/286,"Unless I'm missing something, it seems like it's not supported in the new kernels.
Without this patch I'm getting ""Unknown parameter autoclear"" in dmesg when attempting to mount squashfs image.
I think old kernels might have just ignored unsupported options.","Unless I'm missing something, it seems like it's not supported in the new kernels.
Without this patch I'm getting ""Unknown parameter autoclear"" in dmesg when attempting to mount squashfs image.
I think old kernels might have just ignored unsupported options.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,286,2020-09-09T11:30:28Z,,2021-08-29T19:03:59Z,OPEN,False,1,1,1,https://github.com/uvNikita,Remove autoclear option from squashfs mount,1,[],https://github.com/NERSC/shifter/pull/286,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/286#issuecomment-689511543,"Unless I'm missing something, it seems like it's not supported in the new kernels.
Without this patch I'm getting ""Unknown parameter autoclear"" in dmesg when attempting to mount squashfs image.
I think old kernels might have just ignored unsupported options.",Coverage remained the same at 78.399% when pulling cb7c321 on uvNikita:squashfs/autoclear into 771dcc4 on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,286,2020-09-09T11:30:28Z,,2021-08-29T19:03:59Z,OPEN,False,1,1,1,https://github.com/uvNikita,Remove autoclear option from squashfs mount,1,[],https://github.com/NERSC/shifter/pull/286,https://github.com/scanon,3,https://github.com/NERSC/shifter/pull/286#issuecomment-700296014,"Unless I'm missing something, it seems like it's not supported in the new kernels.
Without this patch I'm getting ""Unknown parameter autoclear"" in dmesg when attempting to mount squashfs image.
I think old kernels might have just ignored unsupported options.",@dmjacobsen Can you look at this?,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,286,2020-09-09T11:30:28Z,,2021-08-29T19:03:59Z,OPEN,False,1,1,1,https://github.com/uvNikita,Remove autoclear option from squashfs mount,1,[],https://github.com/NERSC/shifter/pull/286,https://github.com/scanon,4,https://github.com/NERSC/shifter/pull/286#issuecomment-862642859,"Unless I'm missing something, it seems like it's not supported in the new kernels.
Without this patch I'm getting ""Unknown parameter autoclear"" in dmesg when attempting to mount squashfs image.
I think old kernels might have just ignored unsupported options.",I've run into this as well.  I'm still discussing with @dmjacobsen the ramifications of disabling it. But the newer kernels simply do not recognize this option.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,286,2020-09-09T11:30:28Z,,2021-08-29T19:03:59Z,OPEN,False,1,1,1,https://github.com/uvNikita,Remove autoclear option from squashfs mount,1,[],https://github.com/NERSC/shifter/pull/286,https://github.com/scanon,5,https://github.com/NERSC/shifter/pull/286#issuecomment-907851866,"Unless I'm missing something, it seems like it's not supported in the new kernels.
Without this patch I'm getting ""Unknown parameter autoclear"" in dmesg when attempting to mount squashfs image.
I think old kernels might have just ignored unsupported options.",We have confirmed that removing the autoclear is safe.  @dmjacobsen was concerned about.  We will work on a different fix that will somehow (TBD) determine if the flag should be used or not.  Leaving off the autoclear on older kernels will result in orphaned loopback mounts.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,288,2020-10-02T16:13:39Z,,2021-08-29T19:05:22Z,OPEN,False,6,3,2,https://github.com/maxim-belkin,src/shifter_core.c: respect cache block size,2,[],https://github.com/NERSC/shifter/pull/288,https://github.com/maxim-belkin,1,https://github.com/NERSC/shifter/pull/288,"Currently, perNodeCache's blocksize parameter is ignored. This PR fixes it.","Currently, perNodeCache's blocksize parameter is ignored. This PR fixes it.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,288,2020-10-02T16:13:39Z,,2021-08-29T19:05:22Z,OPEN,False,6,3,2,https://github.com/maxim-belkin,src/shifter_core.c: respect cache block size,2,[],https://github.com/NERSC/shifter/pull/288,https://github.com/scanon,2,https://github.com/NERSC/shifter/pull/288#issuecomment-703013648,"Currently, perNodeCache's blocksize parameter is ignored. This PR fixes it.",Good catch.  I wonder if it would be useful to make this configurable.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,288,2020-10-02T16:13:39Z,,2021-08-29T19:05:22Z,OPEN,False,6,3,2,https://github.com/maxim-belkin,src/shifter_core.c: respect cache block size,2,[],https://github.com/NERSC/shifter/pull/288,https://github.com/maxim-belkin,3,https://github.com/NERSC/shifter/pull/288#issuecomment-705627802,"Currently, perNodeCache's blocksize parameter is ignored. This PR fixes it.","Do you mean a default site-wide value? Yeah, we can do that. Do you want this to be implemented in this PR?",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,288,2020-10-02T16:13:39Z,,2021-08-29T19:05:22Z,OPEN,False,6,3,2,https://github.com/maxim-belkin,src/shifter_core.c: respect cache block size,2,[],https://github.com/NERSC/shifter/pull/288,https://github.com/scanon,4,https://github.com/NERSC/shifter/pull/288#issuecomment-705666924,"Currently, perNodeCache's blocksize parameter is ignored. This PR fixes it.",I don't think so.  I'll make a feature request issue for it.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,288,2020-10-02T16:13:39Z,,2021-08-29T19:05:22Z,OPEN,False,6,3,2,https://github.com/maxim-belkin,src/shifter_core.c: respect cache block size,2,[],https://github.com/NERSC/shifter/pull/288,https://github.com/scanon,5,https://github.com/NERSC/shifter/pull/288#issuecomment-907852061,"Currently, perNodeCache's blocksize parameter is ignored. This PR fixes it.",@dmjacobsen Would it be safe to merge this (after rebasing)?,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,290,2020-10-08T21:19:00Z,2020-10-13T23:08:34Z,2020-10-13T23:08:42Z,CLOSED,False,10,0,1,https://github.com/maxim-belkin,shifter.c: main(): Use entrypoint specified in the image when necessary,1,[],https://github.com/NERSC/shifter/pull/290,https://github.com/maxim-belkin,1,https://github.com/NERSC/shifter/pull/290,"This PR brings the behavior of --entrypoint parameter in line with that of --workdir:
when --entrypoint flag is provided without a value, use the entrypoint specified in the image.","This PR brings the behavior of --entrypoint parameter in line with that of --workdir:
when --entrypoint flag is provided without a value, use the entrypoint specified in the image.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,290,2020-10-08T21:19:00Z,2020-10-13T23:08:34Z,2020-10-13T23:08:42Z,CLOSED,False,10,0,1,https://github.com/maxim-belkin,shifter.c: main(): Use entrypoint specified in the image when necessary,1,[],https://github.com/NERSC/shifter/pull/290,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/290#issuecomment-705848671,"This PR brings the behavior of --entrypoint parameter in line with that of --workdir:
when --entrypoint flag is provided without a value, use the entrypoint specified in the image.",Coverage remained the same at 78.391% when pulling e30cfc7 on maxim-belkin:respect-image-entrypoint into 4c97268 on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,290,2020-10-08T21:19:00Z,2020-10-13T23:08:34Z,2020-10-13T23:08:42Z,CLOSED,False,10,0,1,https://github.com/maxim-belkin,shifter.c: main(): Use entrypoint specified in the image when necessary,1,[],https://github.com/NERSC/shifter/pull/290,https://github.com/maxim-belkin,3,https://github.com/NERSC/shifter/pull/290#issuecomment-708057457,"This PR brings the behavior of --entrypoint parameter in line with that of --workdir:
when --entrypoint flag is provided without a value, use the entrypoint specified in the image.",Turns out this is handled correctly already. Closing.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,291,2020-10-14T19:39:12Z,,2021-08-29T20:59:48Z,OPEN,False,53,28,2,https://github.com/maxim-belkin,Dockerfile improvements,4,[],https://github.com/NERSC/shifter/pull/291,https://github.com/maxim-belkin,1,https://github.com/NERSC/shifter/pull/291,"Dockerfile:

set name, version, and maintainer labels
set DEBIAN_FRONTEND to noninteractive
use --no-install-recommends flag for apt-get install
sort installed packages alphabetically
add automake and python2.7 packages
properly clean up apt's cache
move &&s to the beginning of lines for consistency
Remove unnecessary mkdir -p /images/test/

configure.ac:

Limit allowed Python versions to 2.7, 2.6, and 2.","Dockerfile:

set name, version, and maintainer labels
set DEBIAN_FRONTEND to noninteractive
use --no-install-recommends flag for apt-get install
sort installed packages alphabetically
add automake and python2.7 packages
properly clean up apt's cache
move &&s to the beginning of lines for consistency
Remove unnecessary mkdir -p /images/test/

configure.ac:

Limit allowed Python versions to 2.7, 2.6, and 2.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,291,2020-10-14T19:39:12Z,,2021-08-29T20:59:48Z,OPEN,False,53,28,2,https://github.com/maxim-belkin,Dockerfile improvements,4,[],https://github.com/NERSC/shifter/pull/291,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/291#issuecomment-708683654,"Dockerfile:

set name, version, and maintainer labels
set DEBIAN_FRONTEND to noninteractive
use --no-install-recommends flag for apt-get install
sort installed packages alphabetically
add automake and python2.7 packages
properly clean up apt's cache
move &&s to the beginning of lines for consistency
Remove unnecessary mkdir -p /images/test/

configure.ac:

Limit allowed Python versions to 2.7, 2.6, and 2.",Coverage remained the same at 78.562% when pulling 5650236 on maxim-belkin:Dockerfile-improvements into 0cb62af on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,292,2020-10-15T14:56:46Z,2020-10-15T17:36:47Z,2020-10-15T17:36:47Z,CLOSED,False,68,39,2,https://github.com/maxim-belkin,Update 'MPI Support in Shifter' docs,1,[],https://github.com/NERSC/shifter/pull/292,https://github.com/maxim-belkin,1,https://github.com/NERSC/shifter/pull/292,"Update formatting in doc/mpi/mpich_abi.rst
Link to the 'Shifter modules' document","Update formatting in doc/mpi/mpich_abi.rst
Link to the 'Shifter modules' document",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,292,2020-10-15T14:56:46Z,2020-10-15T17:36:47Z,2020-10-15T17:36:47Z,CLOSED,False,68,39,2,https://github.com/maxim-belkin,Update 'MPI Support in Shifter' docs,1,[],https://github.com/NERSC/shifter/pull/292,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/292#issuecomment-709388311,"Update formatting in doc/mpi/mpich_abi.rst
Link to the 'Shifter modules' document",Coverage increased (+0.09%) to 78.477% when pulling 1378b57 on maxim-belkin:update-mpich-abi-docs into 4c97268 on NERSC:master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,292,2020-10-15T14:56:46Z,2020-10-15T17:36:47Z,2020-10-15T17:36:47Z,CLOSED,False,68,39,2,https://github.com/maxim-belkin,Update 'MPI Support in Shifter' docs,1,[],https://github.com/NERSC/shifter/pull/292,https://github.com/maxim-belkin,3,https://github.com/NERSC/shifter/pull/292#issuecomment-709481685,"Update formatting in doc/mpi/mpich_abi.rst
Link to the 'Shifter modules' document",I'll submit it against rtd branch,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,293,2020-10-15T17:39:11Z,2021-03-02T15:58:48Z,2021-03-02T16:06:55Z,MERGED,True,68,39,2,https://github.com/maxim-belkin,Update 'MPI Support in Shifter' docs,1,[],https://github.com/NERSC/shifter/pull/293,https://github.com/maxim-belkin,1,https://github.com/NERSC/shifter/pull/293,"Same as #292 but submitted against the rtd branch

Update formatting in doc/mpi/mpich_abi.rst
Link to the 'Shifter modules' document","Same as #292 but submitted against the rtd branch

Update formatting in doc/mpi/mpich_abi.rst
Link to the 'Shifter modules' document",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,293,2020-10-15T17:39:11Z,2021-03-02T15:58:48Z,2021-03-02T16:06:55Z,MERGED,True,68,39,2,https://github.com/maxim-belkin,Update 'MPI Support in Shifter' docs,1,[],https://github.com/NERSC/shifter/pull/293,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/293#issuecomment-709488055,"Same as #292 but submitted against the rtd branch

Update formatting in doc/mpi/mpich_abi.rst
Link to the 'Shifter modules' document",Coverage decreased (-0.05%) to 78.261% when pulling 575720d on maxim-belkin:update-mpich-abi-docs into 7c38df1 on NERSC:rtd.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,293,2020-10-15T17:39:11Z,2021-03-02T15:58:48Z,2021-03-02T16:06:55Z,MERGED,True,68,39,2,https://github.com/maxim-belkin,Update 'MPI Support in Shifter' docs,1,[],https://github.com/NERSC/shifter/pull/293,https://github.com/maxim-belkin,3,https://github.com/NERSC/shifter/pull/293#issuecomment-709498580,"Same as #292 but submitted against the rtd branch

Update formatting in doc/mpi/mpich_abi.rst
Link to the 'Shifter modules' document","Hmmm... #292 passed the tests successfully. I'm not sure why it causes a failure for the coverage/coveralls test.
@scanon, please let me know if it has to be submitted against the master branch.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,294,2020-10-15T18:12:25Z,2021-08-29T19:02:18Z,2021-08-29T19:02:18Z,MERGED,True,33,24,2,https://github.com/maxim-belkin,Enable Sphinx 'todo' extension. Update documentation for the shifter command,1,[],https://github.com/NERSC/shifter/pull/294,https://github.com/maxim-belkin,1,https://github.com/NERSC/shifter/pull/294,"doc/command/shifter.rst: A formatting update to make sure things are displayed correctly.
doc/conf.py: enable 'todo' extension.","doc/command/shifter.rst: A formatting update to make sure things are displayed correctly.
doc/conf.py: enable 'todo' extension.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,294,2020-10-15T18:12:25Z,2021-08-29T19:02:18Z,2021-08-29T19:02:18Z,MERGED,True,33,24,2,https://github.com/maxim-belkin,Enable Sphinx 'todo' extension. Update documentation for the shifter command,1,[],https://github.com/NERSC/shifter/pull/294,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/294#issuecomment-709506432,"doc/command/shifter.rst: A formatting update to make sure things are displayed correctly.
doc/conf.py: enable 'todo' extension.",Coverage decreased (-0.05%) to 78.261% when pulling 692d38c on maxim-belkin:shifter-command into 7c38df1 on NERSC:rtd.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,295,2021-03-27T21:19:13Z,2021-03-28T19:53:36Z,2021-03-28T19:53:56Z,CLOSED,False,381,313,31,https://github.com/scanon,WIP: Major update to python 3 and Sanic,35,[],https://github.com/NERSC/shifter/pull/295,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/295,This is a WIP but this updates the gateway to use Python 3 and Sanic.  It also contains some bug fixes.,This is a WIP but this updates the gateway to use Python 3 and Sanic.  It also contains some bug fixes.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,295,2021-03-27T21:19:13Z,2021-03-28T19:53:36Z,2021-03-28T19:53:56Z,CLOSED,False,381,313,31,https://github.com/scanon,WIP: Major update to python 3 and Sanic,35,[],https://github.com/NERSC/shifter/pull/295,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/295#issuecomment-808948033,This is a WIP but this updates the gateway to use Python 3 and Sanic.  It also contains some bug fixes.,Coverage decreased (-78.4%) to 0.0% when pulling df9d8fc on sanic into 4c97268 on master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,296,2021-03-28T19:47:12Z,,2022-03-19T17:06:31Z,OPEN,False,1153,922,47,https://github.com/scanon,Major update to python 3 and Sanic,65,[],https://github.com/NERSC/shifter/pull/296,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/296,This is a long overdue set of merges that bring the gateway up to python3 and also swap out the API with sanic.  This is already been deployed at NERSC so it has had seen some action.   This brings it up to release 22.02.,This is a long overdue set of merges that bring the gateway up to python3 and also swap out the API with sanic.  This is already been deployed at NERSC so it has had seen some action.   This brings it up to release 22.02.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,296,2021-03-28T19:47:12Z,,2022-03-19T17:06:31Z,OPEN,False,1153,922,47,https://github.com/scanon,Major update to python 3 and Sanic,65,[],https://github.com/NERSC/shifter/pull/296,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/296#issuecomment-808950059,This is a long overdue set of merges that bring the gateway up to python3 and also swap out the API with sanic.  This is already been deployed at NERSC so it has had seen some action.   This brings it up to release 22.02.,Coverage increased (+0.7%) to 79.104% when pulling fc08ba3 on sanic2 into 4c97268 on master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,297,2021-04-07T00:47:03Z,2021-06-10T02:45:54Z,2021-06-10T02:46:00Z,MERGED,True,6,1,1,https://github.com/agaur-lbl,Add slurm_init function before using any libslurm API's.,1,[],https://github.com/NERSC/shifter/pull/297,https://github.com/agaur-lbl,1,https://github.com/NERSC/shifter/pull/297,"Because of configless mode in slurm 20.11 and after-
libslurm expects slurm_init to be called before other
api's are called.","Because of configless mode in slurm 20.11 and after-
libslurm expects slurm_init to be called before other
api's are called.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,297,2021-04-07T00:47:03Z,2021-06-10T02:45:54Z,2021-06-10T02:46:00Z,MERGED,True,6,1,1,https://github.com/agaur-lbl,Add slurm_init function before using any libslurm API's.,1,[],https://github.com/NERSC/shifter/pull/297,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/297#issuecomment-814524615,"Because of configless mode in slurm 20.11 and after-
libslurm expects slurm_init to be called before other
api's are called.",Coverage increased (+0.09%) to 78.477% when pulling 350f2e3 on add_init into 4c97268 on master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,298,2021-06-14T16:55:14Z,2021-08-29T19:55:58Z,2022-03-04T03:43:56Z,CLOSED,False,20,16,5,https://github.com/agaur-lbl,Fix stepd api call- for slurm 20.11,5,[],https://github.com/NERSC/shifter/pull/298,https://github.com/agaur-lbl,1,https://github.com/NERSC/shifter/pull/298,Remove unnecessary error logging- and use debug instead.,Remove unnecessary error logging- and use debug instead.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,301,2021-08-28T20:50:20Z,2021-08-28T20:51:08Z,2021-08-28T20:51:08Z,MERGED,True,570,546,11,https://github.com/scanon,Refactor worker,3,[],https://github.com/NERSC/shifter/pull/301,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/301,"This gathers most of the image methods and consolidates
them into a class.  This required updating all the tests.
This also moves away from using the request dict object for
saving state and moves it into class variables.  This should
help avoid silent errors from typos.","This gathers most of the image methods and consolidates
them into a class.  This required updating all the tests.
This also moves away from using the request dict object for
saving state and moves it into class variables.  This should
help avoid silent errors from typos.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,302,2021-08-29T16:28:19Z,2021-08-29T20:49:39Z,2021-08-29T20:58:23Z,MERGED,True,67,4,9,https://github.com/scanon,Add support for labels,4,[],https://github.com/NERSC/shifter/pull/302,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/302,This adds support for returning image labels (#300).  Currently this only works if configured to use_external.,This adds support for returning image labels (#300).  Currently this only works if configured to use_external.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,302,2021-08-29T16:28:19Z,2021-08-29T20:49:39Z,2021-08-29T20:58:23Z,MERGED,True,67,4,9,https://github.com/scanon,Add support for labels,4,[],https://github.com/NERSC/shifter/pull/302,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/302#issuecomment-907825511,This adds support for returning image labels (#300).  Currently this only works if configured to use_external.,Coverage increased (+0.1%) to 79.108% when pulling b71f693 on feature/labels into 0c44124 on sanic2.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,303,2021-08-29T19:10:14Z,2021-08-29T20:23:41Z,2021-08-29T20:32:59Z,MERGED,True,1,1,1,https://github.com/scanon,Update README.md,2,[],https://github.com/NERSC/shifter/pull/303,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/303,Fix for #274,Fix for #274,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,303,2021-08-29T19:10:14Z,2021-08-29T20:23:41Z,2021-08-29T20:32:59Z,MERGED,True,1,1,1,https://github.com/scanon,Update README.md,2,[],https://github.com/NERSC/shifter/pull/303,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/303#issuecomment-907867633,Fix for #274,Coverage remained the same at 78.477% when pulling ded33b6 on scanon-patch-1 into f42c6d1 on master.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,304,2021-08-29T19:53:45Z,2021-08-29T20:00:15Z,2021-08-29T20:33:00Z,MERGED,True,126,136,4,https://github.com/scanon,Refactor/remove testmode,3,[],https://github.com/NERSC/shifter/pull/304,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/304,"Having the testmode in the code was a hack.  This removes that
and uses a mock worker to perform the same tests.","Having the testmode in the code was a hack.  This removes that
and uses a mock worker to perform the same tests.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,304,2021-08-29T19:53:45Z,2021-08-29T20:00:15Z,2021-08-29T20:33:00Z,MERGED,True,126,136,4,https://github.com/scanon,Refactor/remove testmode,3,[],https://github.com/NERSC/shifter/pull/304,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/304#issuecomment-907862398,"Having the testmode in the code was a hack.  This removes that
and uses a mock worker to perform the same tests.",Coverage decreased (-0.2%) to 79.081% when pulling ed27a38 on refactor/remove_testmode into b7fc923 on sanic2.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,305,2021-08-29T19:56:27Z,2021-08-29T20:14:32Z,2022-03-04T03:43:57Z,MERGED,True,20,16,5,https://github.com/scanon,Fix wrapper,5,[],https://github.com/NERSC/shifter/pull/305,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/305,Remove unnecessary error logging- and use debug instead.,Remove unnecessary error logging- and use debug instead.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,305,2021-08-29T19:56:27Z,2021-08-29T20:14:32Z,2022-03-04T03:43:57Z,MERGED,True,20,16,5,https://github.com/scanon,Fix wrapper,5,[],https://github.com/NERSC/shifter/pull/305,https://github.com/scanon,2,https://github.com/NERSC/shifter/pull/305#issuecomment-907864588,Remove unnecessary error logging- and use debug instead.,LGTM,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,306,2021-09-01T01:04:53Z,2021-12-04T01:08:06Z,2022-03-19T17:08:52Z,MERGED,True,2,1,1,https://github.com/scanon,Add '@' to allowed characters,1,[],https://github.com/NERSC/shifter/pull/306,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/306,"To do the lookup by hash we need to allow '@'.  I can't think of
a reason this would be unsafe.","To do the lookup by hash we need to allow '@'.  I can't think of
a reason this would be unsafe.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,307,2021-09-20T21:43:33Z,2021-09-20T21:44:20Z,2021-09-20T21:44:20Z,CLOSED,False,1,1,1,https://github.com/scanon,Auth Error Fix,1,[],https://github.com/NERSC/shifter/pull/307,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/307,We get a different response for unauthenticated users with some registries.,We get a different response for unauthenticated users with some registries.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,308,2021-09-20T21:45:24Z,2021-09-24T00:18:51Z,2022-03-04T03:43:49Z,MERGED,True,1,1,1,https://github.com/scanon,Auth Error Fix,3,[],https://github.com/NERSC/shifter/pull/308,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/308,We get a different response for unauthenticated users with some registries.,We get a different response for unauthenticated users with some registries.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,308,2021-09-20T21:45:24Z,2021-09-24T00:18:51Z,2022-03-04T03:43:49Z,MERGED,True,1,1,1,https://github.com/scanon,Auth Error Fix,3,[],https://github.com/NERSC/shifter/pull/308,https://github.com/scanon,2,https://github.com/NERSC/shifter/pull/308#issuecomment-923375845,We get a different response for unauthenticated users with some registries.,We are running this on Cori with no issues.  Merging.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,308,2021-09-20T21:45:24Z,2021-09-24T00:18:51Z,2022-03-04T03:43:49Z,MERGED,True,1,1,1,https://github.com/scanon,Auth Error Fix,3,[],https://github.com/NERSC/shifter/pull/308,https://github.com/scanon,3,https://github.com/NERSC/shifter/pull/308#issuecomment-926254378,We get a different response for unauthenticated users with some registries.,I'm going to self-merge since it is a minor change and we have already been running with this at NERSC.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,309,2021-09-21T01:10:10Z,2021-09-22T17:33:57Z,2021-09-22T17:33:57Z,CLOSED,False,116,1,2,https://github.com/scanon,Switch to Github Actions,22,[],https://github.com/NERSC/shifter/pull/309,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/309,Migrate to Github Actions from Travis-CI,Migrate to Github Actions from Travis-CI,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,310,2021-09-22T17:43:46Z,2021-09-23T17:17:19Z,2021-09-23T17:17:27Z,MERGED,True,106,1,2,https://github.com/scanon,Switch to GitHub Actions,9,[],https://github.com/NERSC/shifter/pull/310,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/310,This required ignoring issues with valgrind.  So we need to examine those results to see if they are real issues or something related to the switch to GHA.,This required ignoring issues with valgrind.  So we need to examine those results to see if they are real issues or something related to the switch to GHA.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,310,2021-09-22T17:43:46Z,2021-09-23T17:17:19Z,2021-09-23T17:17:27Z,MERGED,True,106,1,2,https://github.com/scanon,Switch to GitHub Actions,9,[],https://github.com/NERSC/shifter/pull/310,https://github.com/agaur-lbl,2,https://github.com/NERSC/shifter/pull/310#issuecomment-925485869,This required ignoring issues with valgrind.  So we need to examine those results to see if they are real issues or something related to the switch to GHA.,"Looks good to me, my only suggestion is, it would be nice to have valgrind in a separate step instead being lumped with Cunit. Valgrind output is just more noisy and it may be better to keep it in a separate.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,310,2021-09-22T17:43:46Z,2021-09-23T17:17:19Z,2021-09-23T17:17:27Z,MERGED,True,106,1,2,https://github.com/scanon,Switch to GitHub Actions,9,[],https://github.com/NERSC/shifter/pull/310,https://github.com/scanon,3,https://github.com/NERSC/shifter/pull/310#issuecomment-926005284,This required ignoring issues with valgrind.  So we need to examine those results to see if they are real issues or something related to the switch to GHA.,I tweaked things to address @agaur-lbl 's feedback.  Merging...,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,314,2021-12-03T00:09:11Z,2021-12-04T01:45:21Z,2022-03-04T03:43:04Z,MERGED,True,14,4,7,https://github.com/scanon,Fix Cmd support and json detection,3,[],https://github.com/NERSC/shifter/pull/314,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/314,"This addresses #issue313.  This has two sets of changes.

Add support for Cmd to the image gateway (this was overlooked somehow).
Fix the is_json method to work for regular json structures.","This addresses #issue313.  This has two sets of changes.

Add support for Cmd to the image gateway (this was overlooked somehow).
Fix the is_json method to work for regular json structures.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,315,2021-12-04T01:02:20Z,2021-12-04T01:23:03Z,2022-03-19T17:08:57Z,MERGED,True,5,0,1,https://github.com/agaur-lbl,"""Autoclear"" option does not work with the mount command in newer kernels.",2,[],https://github.com/NERSC/shifter/pull/315,https://github.com/agaur-lbl,1,https://github.com/NERSC/shifter/pull/315,"The option got removed in newer kernels. The macros should
preserve compatibility with older versions.","The option got removed in newer kernels. The macros should
preserve compatibility with older versions.",True,{}
NERSC/shifter,https://github.com/NERSC/shifter,315,2021-12-04T01:02:20Z,2021-12-04T01:23:03Z,2022-03-19T17:08:57Z,MERGED,True,5,0,1,https://github.com/agaur-lbl,"""Autoclear"" option does not work with the mount command in newer kernels.",2,[],https://github.com/NERSC/shifter/pull/315,https://github.com/scanon,2,https://github.com/NERSC/shifter/pull/315#issuecomment-985939349,"The option got removed in newer kernels. The macros should
preserve compatibility with older versions.",LGTM,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,318,2022-03-08T03:30:53Z,2022-03-09T20:01:55Z,2022-03-09T20:02:14Z,MERGED,True,67,6,7,https://github.com/scanon,22.02,2,[],https://github.com/NERSC/shifter/pull/318,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/318,Merge in changes for 22.02 release,Merge in changes for 22.02 release,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,319,2022-03-09T17:59:31Z,2022-03-09T20:01:53Z,2022-03-09T20:02:15Z,MERGED,True,80,7,12,https://github.com/scanon,Additional config options,8,[],https://github.com/NERSC/shifter/pull/319,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/319,This prepares a release and does some minor tweaks.,This prepares a release and does some minor tweaks.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,319,2022-03-09T17:59:31Z,2022-03-09T20:01:53Z,2022-03-09T20:02:15Z,MERGED,True,80,7,12,https://github.com/scanon,Additional config options,8,[],https://github.com/NERSC/shifter/pull/319,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/319#issuecomment-1063254152,This prepares a release and does some minor tweaks.,Coverage decreased (-0.02%) to 79.156% when pulling e67b5d8 on additional_config_options into d5d697c on sanic2.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,320,2022-03-11T00:40:20Z,2022-03-11T01:45:12Z,2022-03-19T17:08:33Z,MERGED,True,5,2,1,https://github.com/scanon,Handle more auth responses,2,[],https://github.com/NERSC/shifter/pull/320,https://github.com/scanon,1,https://github.com/NERSC/shifter/pull/320,The auth response error can vary.  This tries to detect them more generally.,The auth response error can vary.  This tries to detect them more generally.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,320,2022-03-11T00:40:20Z,2022-03-11T01:45:12Z,2022-03-19T17:08:33Z,MERGED,True,5,2,1,https://github.com/scanon,Handle more auth responses,2,[],https://github.com/NERSC/shifter/pull/320,https://github.com/coveralls,2,https://github.com/NERSC/shifter/pull/320#issuecomment-1064662887,The auth response error can vary.  This tries to detect them more generally.,Coverage increased (+0.009%) to 79.165% when pulling d6a1876 on auth_response2 into 5e43a5c on sanic2.,True,{}
NERSC/shifter,https://github.com/NERSC/shifter,323,2022-05-06T21:51:45Z,,2022-05-06T21:51:45Z,OPEN,False,1,1,1,https://github.com/shahzebsiddiqui,update help section,1,[],https://github.com/NERSC/shifter/pull/323,https://github.com/shahzebsiddiqui,1,https://github.com/NERSC/shifter/pull/323,"@scanon make a quick change to Fix #322.
By all means i think it would help to see a more detailed help menu if each subcommand has such options but for now i think this will do","@scanon make a quick change to Fix #322.
By all means i think it would help to see a more detailed help menu if each subcommand has such options but for now i think this will do",True,{}
