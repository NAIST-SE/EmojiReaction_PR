PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,4,2016-02-20T19:40:49Z,2016-02-21T11:10:43Z,2016-02-21T11:11:06Z,MERGED,True,208424,208419,229,https://github.com/zaq32,Line ending normalization,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/4,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/4,"Enabled line ending normalization for all source files & normalized line endings in existing code.
Except for .gitattributes file all changes should be exclusively in the line endings.","Enabled line ending normalization for all source files & normalized line endings in existing code.
Except for .gitattributes file all changes should be exclusively in the line endings.",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,5,2016-03-15T14:38:51Z,2016-03-15T14:39:08Z,2016-03-15T14:39:11Z,MERGED,True,15,23,1,https://github.com/Novakov,Removed explicit GitHub commit status,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/5,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/5,,,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,6,2016-03-23T17:31:59Z,2016-04-25T15:55:08Z,2016-04-25T15:55:13Z,MERGED,True,347,37,13,https://github.com/terianil,Terminal,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/6,https://github.com/terianil,1,https://github.com/PW-Sat2/PWSat2OBC/pull/6,"Terminal over LEUART.
Parts:

LEUART driver
terminal functionality
overall code cleanup
examples

Features:

invoking custom OBC commands over COM port (you can use Putty or other software)
passing parameters to command handlers
working examples - 'ping' and 'echo' commands","Terminal over LEUART.
Parts:

LEUART driver
terminal functionality
overall code cleanup
examples

Features:

invoking custom OBC commands over COM port (you can use Putty or other software)
passing parameters to command handlers
working examples - 'ping' and 'echo' commands",True,{'THUMBS_UP': ['https://github.com/Novakov']}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,6,2016-03-23T17:31:59Z,2016-04-25T15:55:08Z,2016-04-25T15:55:13Z,MERGED,True,347,37,13,https://github.com/terianil,Terminal,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/6,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/6#issuecomment-210116696,"Terminal over LEUART.
Parts:

LEUART driver
terminal functionality
overall code cleanup
examples

Features:

invoking custom OBC commands over COM port (you can use Putty or other software)
passing parameters to command handlers
working examples - 'ping' and 'echo' commands","This code does not build cleanly - gcc reports some important issues in form of build warnings, please fix them.",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,6,2016-03-23T17:31:59Z,2016-04-25T15:55:08Z,2016-04-25T15:55:13Z,MERGED,True,347,37,13,https://github.com/terianil,Terminal,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/6,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/6#issuecomment-210122489,"Terminal over LEUART.
Parts:

LEUART driver
terminal functionality
overall code cleanup
examples

Features:

invoking custom OBC commands over COM port (you can use Putty or other software)
passing parameters to command handlers
working examples - 'ping' and 'echo' commands",Since both terminal & its commands are not part  of mission critical software & most likely will not be included in the final released binary I would suggest moving terminal implementation to separate static library that can be optionally linked in. I would also put the terminal commands in another static library that also may be optionally linked into final binary.,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,6,2016-03-23T17:31:59Z,2016-04-25T15:55:08Z,2016-04-25T15:55:13Z,MERGED,True,347,37,13,https://github.com/terianil,Terminal,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/6,https://github.com/terianil,4,https://github.com/PW-Sat2/PWSat2OBC/pull/6#issuecomment-211541778,"Terminal over LEUART.
Parts:

LEUART driver
terminal functionality
overall code cleanup
examples

Features:

invoking custom OBC commands over COM port (you can use Putty or other software)
passing parameters to command handlers
working examples - 'ping' and 'echo' commands",Most of problems are fixed. Separating of terminal and commands isn't necessary right now. And we need to think about creating some common mechanism for error logging.,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,6,2016-03-23T17:31:59Z,2016-04-25T15:55:08Z,2016-04-25T15:55:13Z,MERGED,True,347,37,13,https://github.com/terianil,Terminal,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/6,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/6#issuecomment-211740881,"Terminal over LEUART.
Parts:

LEUART driver
terminal functionality
overall code cleanup
examples

Features:

invoking custom OBC commands over COM port (you can use Putty or other software)
passing parameters to command handlers
working examples - 'ping' and 'echo' commands",We also have to agree on a coding style.,True,{'THUMBS_UP': ['https://github.com/Novakov']}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,7,2016-04-26T07:19:21Z,2016-04-28T20:55:49Z,2016-04-28T20:55:51Z,MERGED,True,301,0,5,https://github.com/zaq32,First draft of the proposed coding style.,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/7,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/7,"This is the proposed C coding style for OBC software source files, along with the initial clang-format configuration file for automatic code formatting.","This is the proposed C coding style for OBC software source files, along with the initial clang-format configuration file for automatic code formatting.",True,"{'THUMBS_UP': ['https://github.com/pabloxrl', 'https://github.com/Novakov']}"
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,7,2016-04-26T07:19:21Z,2016-04-28T20:55:49Z,2016-04-28T20:55:51Z,MERGED,True,301,0,5,https://github.com/zaq32,First draft of the proposed coding style.,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/7,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/7#issuecomment-214653977,"This is the proposed C coding style for OBC software source files, along with the initial clang-format configuration file for automatic code formatting.",Can you create build target that will run clang-format on all files?,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,7,2016-04-26T07:19:21Z,2016-04-28T20:55:49Z,2016-04-28T20:55:51Z,MERGED,True,301,0,5,https://github.com/zaq32,First draft of the proposed coding style.,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/7,https://github.com/pabloxrl,3,https://github.com/PW-Sat2/PWSat2OBC/pull/7#issuecomment-214669105,"This is the proposed C coding style for OBC software source files, along with the initial clang-format configuration file for automatic code formatting.",Looks fine to me,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,7,2016-04-26T07:19:21Z,2016-04-28T20:55:49Z,2016-04-28T20:55:51Z,MERGED,True,301,0,5,https://github.com/zaq32,First draft of the proposed coding style.,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/7,https://github.com/ggajoch,4,https://github.com/PW-Sat2/PWSat2OBC/pull/7#issuecomment-215200466,"This is the proposed C coding style for OBC software source files, along with the initial clang-format configuration file for automatic code formatting.",Looks good to me.,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,8,2016-04-27T21:04:21Z,2016-05-16T15:05:51Z,2016-05-17T05:33:59Z,MERGED,True,833,153,34,https://github.com/Novakov,Open sail + integration tests,10,[],https://github.com/PW-Sat2/PWSat2OBC/pull/8,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/8,,,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,8,2016-04-27T21:04:21Z,2016-05-16T15:05:51Z,2016-05-17T05:33:59Z,MERGED,True,833,153,34,https://github.com/Novakov,Open sail + integration tests,10,[],https://github.com/PW-Sat2/PWSat2OBC/pull/8,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/8#issuecomment-218849990,,It would be nice to have unit tests for the current EPS implementation.,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,8,2016-04-27T21:04:21Z,2016-05-16T15:05:51Z,2016-05-17T05:33:59Z,MERGED,True,833,153,34,https://github.com/Novakov,Open sail + integration tests,10,[],https://github.com/PW-Sat2/PWSat2OBC/pull/8,https://github.com/terianil,3,https://github.com/PW-Sat2/PWSat2OBC/pull/8#issuecomment-219310282,,"If there are no more comments, I would like to merge it tomorrow.",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,9,2016-05-04T20:18:12Z,2016-05-04T20:20:09Z,2016-05-12T11:20:44Z,MERGED,True,16391,3035,189,https://github.com/eszczekocki,ADXRS453 drivers,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/9,https://github.com/eszczekocki,1,https://github.com/PW-Sat2/PWSat2OBC/pull/9,"[] updated libs for efm32 and add new libs (dma/spi etc.)
[drivers/] implementation of gyroscope ADXRS453 driver
[main] add a gyro task","[] updated libs for efm32 and add new libs (dma/spi etc.)
[drivers/] implementation of gyroscope ADXRS453 driver
[main] add a gyro task",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,10,2016-05-04T20:22:46Z,2016-05-04T20:33:20Z,2016-05-04T20:33:31Z,CLOSED,False,0,0,0,https://github.com/eszczekocki,"Revert ""ADXRS453 drivers""",3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/10,https://github.com/eszczekocki,1,https://github.com/PW-Sat2/PWSat2OBC/pull/10,,,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,10,2016-05-04T20:22:46Z,2016-05-04T20:33:20Z,2016-05-04T20:33:31Z,CLOSED,False,0,0,0,https://github.com/eszczekocki,"Revert ""ADXRS453 drivers""",3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/10,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/10#issuecomment-216994111,,Reverted by removing merge from history,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,11,2016-05-04T20:32:44Z,2016-05-12T11:19:49Z,2016-05-12T11:20:44Z,CLOSED,False,16391,3035,189,https://github.com/eszczekocki,ADXRS453 drivers,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/11,https://github.com/eszczekocki,1,https://github.com/PW-Sat2/PWSat2OBC/pull/11,"[] update libs for efm32 and add new libs (dma/spi etc.)
[drivers/] implementation of gyroscope ADXRS453 driver
[main] add a gyro task","[] update libs for efm32 and add new libs (dma/spi etc.)
[drivers/] implementation of gyroscope ADXRS453 driver
[main] add a gyro task",True,"{'THUMBS_DOWN': ['https://github.com/Novakov', 'https://github.com/zaq32', 'https://github.com/terianil']}"
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,11,2016-05-04T20:32:44Z,2016-05-12T11:19:49Z,2016-05-12T11:20:44Z,CLOSED,False,16391,3035,189,https://github.com/eszczekocki,ADXRS453 drivers,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/11,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/11#issuecomment-216997748,"[] update libs for efm32 and add new libs (dma/spi etc.)
[drivers/] implementation of gyroscope ADXRS453 driver
[main] add a gyro task","If you need to update emlib, please do it in separate pull request",True,"{'THUMBS_UP': ['https://github.com/zaq32', 'https://github.com/terianil']}"
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,12,2016-05-06T06:45:29Z,2016-05-06T20:59:04Z,2016-05-06T20:59:07Z,MERGED,True,941,60,31,https://github.com/zaq32,Logger,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/12,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/12,A basic logging module that with ability to forward entries to multiple configurable endpoints.,A basic logging module that with ability to forward entries to multiple configurable endpoints.,True,"{'THUMBS_UP': ['https://github.com/terianil', 'https://github.com/Novakov']}"
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,13,2016-05-06T20:27:01Z,2016-05-12T19:37:46Z,2016-05-15T18:54:58Z,MERGED,True,81,0,5,https://github.com/Novakov,Report memory (flash & ram) usage,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/13,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/13,During build on CI flash & RAM usage is reported,During build on CI flash & RAM usage is reported,True,{'THUMBS_UP': ['https://github.com/zaq32']}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,14,2016-05-11T18:00:04Z,2016-05-12T19:36:53Z,2016-05-12T19:36:53Z,MERGED,True,119,90,2,https://github.com/zaq32,Code style,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/14,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/14,"Added note about usage of automatic code style formatting, configured sorting of #include directives.","Added note about usage of automatic code style formatting, configured sorting of #include directives.",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,15,2016-05-12T19:45:14Z,2016-05-18T19:29:46Z,2016-05-18T19:29:46Z,CLOSED,False,9577,3032,171,https://github.com/eszczekocki,emlib updates and emdrv added,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/15,https://github.com/eszczekocki,1,https://github.com/PW-Sat2/PWSat2OBC/pull/15,"updated emlibs from 4.1.0 to 4.3.0
changes from emlib
================ Revision history ============================================
4.3.0:

em_cmu: Removed unused fields from CMU_HFXOInit_TypeDef. The removed fields
are regIshStartup and timeoutWarmSteady.
em_rtc.h: Added RTC_CounterSet function for modifying the RTC Counter.
em_burtc.c: Fixed bug when doing low frequency domain synchronization.
em_gpio.c: Deprecated GPIO_IntConfig(), use new function GPIO_ExtIntConfig()
instead.
Removed deprecated file em_part.h.
em_dma.c: Replaced infinite loop on bus errors in default irq handler with
an assert.
em_gpio.c: Use direct register write instead of BUS API in GPIO_PinModeSet
to prevent glitches.
Fixed incorrect handling of CMU_CTRL_WSHFLE and CMU_HFPRESC_HFCLKLEPRESC in
em_cmu.c for EFM32 Pearl and Jade Gecko.
Type enumerations cmuClock_HFLE and cmuSelect_HFCLKLE can now be used for
all families to select or reference the divided down HF clock for LE peripherals.
Code size optimization in em_cmu.c.
Added GPCRC support.
Added support for WARNSEL, WINSEL and WDOGRSTDIS to em_wdog. Added interrupt
functions. Added support for multiple WDOG instances. Deprecated functions
WDOG_Enable(), WDOG_Feed(), WDOG_Init() and WDOG_Lock().
GPIO_EM4GetPinWakeupCause() now returns the content of the EM4WU field from
the GPIO_IF register for platform 2 devices.
Added function GPIO_SlewrateSet() to set slewrate for GPIO ports.
Added fix for GPIO_E201 in CHIP_Init().
Added function CMU_HFRCOBandGet() and CMU_HFRCOBandSet() for platform 2.
Functions with the same names are present for platform 1, but the parameter
and return types are different. Platform 1 and 2 also do not support the same
HFRCO/AUXHFRCO frequencies.
Added HFLE wait-state control to CMU_HFRCOBandSet(). This is a bug on
EFM32 Wonder Gecko only as HFLE DIV4 is required at 24MHz, in between the 28HMz
and 21MHz HFRCO bands.
Fixed reset-cause XMASKs for platform 2, gen 1 parts. Improved
documentation in em_rmu.c.
Added support for configuring IrDA on USART1 for EFM32 Happy Gecko. The
function USART_InitIrDA() is deprecated, and replaced by USARTn_InitIrDA().
Added module em_ramfunc. Fixed issue with calls from em_msc RAM code to Flash.
Updated current limiter threshold equations for LNCLIMILIMSEL, LPCLIMILIMSEL
and DCDCZDETCTRL.
Member type EMU_DcdcLnTransientMode_TypeDef in EMU_DCDCInit_TypeDef changed to
EMU_DcdcLnReverseCurrentControl_TypeDef to enable support for reverse current
limiter.
EM2/3 current consumption optimization: Default value
emuDcdcAnaPeripheralPower_AVDD in EMU_DCDCINIT_DEFAULT for EFR32
changed to emuDcdcAnaPeripheralPower_DCDC.
EM2/3 current consumption optimization: DCDC_LP_NFET_CNT updated to 7.

4.2.1:

Added errata fix for an issue that may cause BOD resets in EM2 when using
DCDC-to-DVDD mode. The fix is implemented in EMU_DCDCInit().
Added function EMU_DCDCPowerOff() for boards with physically disconnected DCDC.
Current consumption is optimized for DCDC bypass mode. This update is
implemented in EMU_DCDCInit().

4.2.0:

Updated I2C clock divider equation for platform 2 parts. Added constraints
to HFPER clock frequency in I2C_BusFreqSet().
EMU EMU_EM23VregMode_TypeDef replaced with a bool.
Added support for GPIO alternate drive strength and alternate control modes.
DCDC setup is simplified. More tuning and optimization settings added to
EMU_DCDCInit().
Added member pinRetentionMode to EMU_EM4Init_TypeDef.
Added function EMU_UnlatchPinRetention() to support unlatching of pin
retention in EM4H/S.
Fixed bug in ADC_InitScan() which caused a overwrite of single conversion
mode calibration values.
Added support for CRYPTO module on EFM32 Pearl and Jade Gecko (em_crypto.c/h).

4.1.1:

EMU_DCDCInit() updated with new parameters for EM2 and 3. Current consumption
with DCDC at expected levels for EFR32 and EFM32 Pearl and Jade Gecko.
EMU_DCDCInit_TypeDef updated with more parameters. EMU_DcdcLpcmpBiasMode_TypeDef
is removed.
More assertions added to EMU_DCDCInit().
HFXO default parameters updated.
ADC defaults updated.
RMU pin mode set fixed.
Added missing define for cmuSelect_ULFRCO.
Added missing functions for handling peripheral interrupts.
Added support for VMON.

4.1.0:

New signature for RMU_ResetControl() function.
The typedef EMU_EM23Init_TypeDef which is a parameter to EMU_EM23Init()
has got a new definition.
Initial support _SILICON_LABS_32B_PLATFORM_2 devices added.

added: dmadrv, spidrv, rtcdrv","updated emlibs from 4.1.0 to 4.3.0
changes from emlib
================ Revision history ============================================
4.3.0:

em_cmu: Removed unused fields from CMU_HFXOInit_TypeDef. The removed fields
are regIshStartup and timeoutWarmSteady.
em_rtc.h: Added RTC_CounterSet function for modifying the RTC Counter.
em_burtc.c: Fixed bug when doing low frequency domain synchronization.
em_gpio.c: Deprecated GPIO_IntConfig(), use new function GPIO_ExtIntConfig()
instead.
Removed deprecated file em_part.h.
em_dma.c: Replaced infinite loop on bus errors in default irq handler with
an assert.
em_gpio.c: Use direct register write instead of BUS API in GPIO_PinModeSet
to prevent glitches.
Fixed incorrect handling of CMU_CTRL_WSHFLE and CMU_HFPRESC_HFCLKLEPRESC in
em_cmu.c for EFM32 Pearl and Jade Gecko.
Type enumerations cmuClock_HFLE and cmuSelect_HFCLKLE can now be used for
all families to select or reference the divided down HF clock for LE peripherals.
Code size optimization in em_cmu.c.
Added GPCRC support.
Added support for WARNSEL, WINSEL and WDOGRSTDIS to em_wdog. Added interrupt
functions. Added support for multiple WDOG instances. Deprecated functions
WDOG_Enable(), WDOG_Feed(), WDOG_Init() and WDOG_Lock().
GPIO_EM4GetPinWakeupCause() now returns the content of the EM4WU field from
the GPIO_IF register for platform 2 devices.
Added function GPIO_SlewrateSet() to set slewrate for GPIO ports.
Added fix for GPIO_E201 in CHIP_Init().
Added function CMU_HFRCOBandGet() and CMU_HFRCOBandSet() for platform 2.
Functions with the same names are present for platform 1, but the parameter
and return types are different. Platform 1 and 2 also do not support the same
HFRCO/AUXHFRCO frequencies.
Added HFLE wait-state control to CMU_HFRCOBandSet(). This is a bug on
EFM32 Wonder Gecko only as HFLE DIV4 is required at 24MHz, in between the 28HMz
and 21MHz HFRCO bands.
Fixed reset-cause XMASKs for platform 2, gen 1 parts. Improved
documentation in em_rmu.c.
Added support for configuring IrDA on USART1 for EFM32 Happy Gecko. The
function USART_InitIrDA() is deprecated, and replaced by USARTn_InitIrDA().
Added module em_ramfunc. Fixed issue with calls from em_msc RAM code to Flash.
Updated current limiter threshold equations for LNCLIMILIMSEL, LPCLIMILIMSEL
and DCDCZDETCTRL.
Member type EMU_DcdcLnTransientMode_TypeDef in EMU_DCDCInit_TypeDef changed to
EMU_DcdcLnReverseCurrentControl_TypeDef to enable support for reverse current
limiter.
EM2/3 current consumption optimization: Default value
emuDcdcAnaPeripheralPower_AVDD in EMU_DCDCINIT_DEFAULT for EFR32
changed to emuDcdcAnaPeripheralPower_DCDC.
EM2/3 current consumption optimization: DCDC_LP_NFET_CNT updated to 7.

4.2.1:

Added errata fix for an issue that may cause BOD resets in EM2 when using
DCDC-to-DVDD mode. The fix is implemented in EMU_DCDCInit().
Added function EMU_DCDCPowerOff() for boards with physically disconnected DCDC.
Current consumption is optimized for DCDC bypass mode. This update is
implemented in EMU_DCDCInit().

4.2.0:

Updated I2C clock divider equation for platform 2 parts. Added constraints
to HFPER clock frequency in I2C_BusFreqSet().
EMU EMU_EM23VregMode_TypeDef replaced with a bool.
Added support for GPIO alternate drive strength and alternate control modes.
DCDC setup is simplified. More tuning and optimization settings added to
EMU_DCDCInit().
Added member pinRetentionMode to EMU_EM4Init_TypeDef.
Added function EMU_UnlatchPinRetention() to support unlatching of pin
retention in EM4H/S.
Fixed bug in ADC_InitScan() which caused a overwrite of single conversion
mode calibration values.
Added support for CRYPTO module on EFM32 Pearl and Jade Gecko (em_crypto.c/h).

4.1.1:

EMU_DCDCInit() updated with new parameters for EM2 and 3. Current consumption
with DCDC at expected levels for EFR32 and EFM32 Pearl and Jade Gecko.
EMU_DCDCInit_TypeDef updated with more parameters. EMU_DcdcLpcmpBiasMode_TypeDef
is removed.
More assertions added to EMU_DCDCInit().
HFXO default parameters updated.
ADC defaults updated.
RMU pin mode set fixed.
Added missing define for cmuSelect_ULFRCO.
Added missing functions for handling peripheral interrupts.
Added support for VMON.

4.1.0:

New signature for RMU_ResetControl() function.
The typedef EMU_EM23Init_TypeDef which is a parameter to EMU_EM23Init()
has got a new definition.
Initial support _SILICON_LABS_32B_PLATFORM_2 devices added.

added: dmadrv, spidrv, rtcdrv",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,15,2016-05-12T19:45:14Z,2016-05-18T19:29:46Z,2016-05-18T19:29:46Z,CLOSED,False,9577,3032,171,https://github.com/eszczekocki,emlib updates and emdrv added,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/15,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/15#issuecomment-218867819,"updated emlibs from 4.1.0 to 4.3.0
changes from emlib
================ Revision history ============================================
4.3.0:

em_cmu: Removed unused fields from CMU_HFXOInit_TypeDef. The removed fields
are regIshStartup and timeoutWarmSteady.
em_rtc.h: Added RTC_CounterSet function for modifying the RTC Counter.
em_burtc.c: Fixed bug when doing low frequency domain synchronization.
em_gpio.c: Deprecated GPIO_IntConfig(), use new function GPIO_ExtIntConfig()
instead.
Removed deprecated file em_part.h.
em_dma.c: Replaced infinite loop on bus errors in default irq handler with
an assert.
em_gpio.c: Use direct register write instead of BUS API in GPIO_PinModeSet
to prevent glitches.
Fixed incorrect handling of CMU_CTRL_WSHFLE and CMU_HFPRESC_HFCLKLEPRESC in
em_cmu.c for EFM32 Pearl and Jade Gecko.
Type enumerations cmuClock_HFLE and cmuSelect_HFCLKLE can now be used for
all families to select or reference the divided down HF clock for LE peripherals.
Code size optimization in em_cmu.c.
Added GPCRC support.
Added support for WARNSEL, WINSEL and WDOGRSTDIS to em_wdog. Added interrupt
functions. Added support for multiple WDOG instances. Deprecated functions
WDOG_Enable(), WDOG_Feed(), WDOG_Init() and WDOG_Lock().
GPIO_EM4GetPinWakeupCause() now returns the content of the EM4WU field from
the GPIO_IF register for platform 2 devices.
Added function GPIO_SlewrateSet() to set slewrate for GPIO ports.
Added fix for GPIO_E201 in CHIP_Init().
Added function CMU_HFRCOBandGet() and CMU_HFRCOBandSet() for platform 2.
Functions with the same names are present for platform 1, but the parameter
and return types are different. Platform 1 and 2 also do not support the same
HFRCO/AUXHFRCO frequencies.
Added HFLE wait-state control to CMU_HFRCOBandSet(). This is a bug on
EFM32 Wonder Gecko only as HFLE DIV4 is required at 24MHz, in between the 28HMz
and 21MHz HFRCO bands.
Fixed reset-cause XMASKs for platform 2, gen 1 parts. Improved
documentation in em_rmu.c.
Added support for configuring IrDA on USART1 for EFM32 Happy Gecko. The
function USART_InitIrDA() is deprecated, and replaced by USARTn_InitIrDA().
Added module em_ramfunc. Fixed issue with calls from em_msc RAM code to Flash.
Updated current limiter threshold equations for LNCLIMILIMSEL, LPCLIMILIMSEL
and DCDCZDETCTRL.
Member type EMU_DcdcLnTransientMode_TypeDef in EMU_DCDCInit_TypeDef changed to
EMU_DcdcLnReverseCurrentControl_TypeDef to enable support for reverse current
limiter.
EM2/3 current consumption optimization: Default value
emuDcdcAnaPeripheralPower_AVDD in EMU_DCDCINIT_DEFAULT for EFR32
changed to emuDcdcAnaPeripheralPower_DCDC.
EM2/3 current consumption optimization: DCDC_LP_NFET_CNT updated to 7.

4.2.1:

Added errata fix for an issue that may cause BOD resets in EM2 when using
DCDC-to-DVDD mode. The fix is implemented in EMU_DCDCInit().
Added function EMU_DCDCPowerOff() for boards with physically disconnected DCDC.
Current consumption is optimized for DCDC bypass mode. This update is
implemented in EMU_DCDCInit().

4.2.0:

Updated I2C clock divider equation for platform 2 parts. Added constraints
to HFPER clock frequency in I2C_BusFreqSet().
EMU EMU_EM23VregMode_TypeDef replaced with a bool.
Added support for GPIO alternate drive strength and alternate control modes.
DCDC setup is simplified. More tuning and optimization settings added to
EMU_DCDCInit().
Added member pinRetentionMode to EMU_EM4Init_TypeDef.
Added function EMU_UnlatchPinRetention() to support unlatching of pin
retention in EM4H/S.
Fixed bug in ADC_InitScan() which caused a overwrite of single conversion
mode calibration values.
Added support for CRYPTO module on EFM32 Pearl and Jade Gecko (em_crypto.c/h).

4.1.1:

EMU_DCDCInit() updated with new parameters for EM2 and 3. Current consumption
with DCDC at expected levels for EFR32 and EFM32 Pearl and Jade Gecko.
EMU_DCDCInit_TypeDef updated with more parameters. EMU_DcdcLpcmpBiasMode_TypeDef
is removed.
More assertions added to EMU_DCDCInit().
HFXO default parameters updated.
ADC defaults updated.
RMU pin mode set fixed.
Added missing define for cmuSelect_ULFRCO.
Added missing functions for handling peripheral interrupts.
Added support for VMON.

4.1.0:

New signature for RMU_ResetControl() function.
The typedef EMU_EM23Init_TypeDef which is a parameter to EMU_EM23Init()
has got a new definition.
Initial support _SILICON_LABS_32B_PLATFORM_2 devices added.

added: dmadrv, spidrv, rtcdrv","Please, don't add you build-related file to repository.
What is emdrv (dmadrv, spidrv, rtcdrv)? If it is separate from emlib, make a separate pull requests for them.",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,15,2016-05-12T19:45:14Z,2016-05-18T19:29:46Z,2016-05-18T19:29:46Z,CLOSED,False,9577,3032,171,https://github.com/eszczekocki,emlib updates and emdrv added,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/15,https://github.com/eszczekocki,3,https://github.com/PW-Sat2/PWSat2OBC/pull/15#issuecomment-218873637,"updated emlibs from 4.1.0 to 4.3.0
changes from emlib
================ Revision history ============================================
4.3.0:

em_cmu: Removed unused fields from CMU_HFXOInit_TypeDef. The removed fields
are regIshStartup and timeoutWarmSteady.
em_rtc.h: Added RTC_CounterSet function for modifying the RTC Counter.
em_burtc.c: Fixed bug when doing low frequency domain synchronization.
em_gpio.c: Deprecated GPIO_IntConfig(), use new function GPIO_ExtIntConfig()
instead.
Removed deprecated file em_part.h.
em_dma.c: Replaced infinite loop on bus errors in default irq handler with
an assert.
em_gpio.c: Use direct register write instead of BUS API in GPIO_PinModeSet
to prevent glitches.
Fixed incorrect handling of CMU_CTRL_WSHFLE and CMU_HFPRESC_HFCLKLEPRESC in
em_cmu.c for EFM32 Pearl and Jade Gecko.
Type enumerations cmuClock_HFLE and cmuSelect_HFCLKLE can now be used for
all families to select or reference the divided down HF clock for LE peripherals.
Code size optimization in em_cmu.c.
Added GPCRC support.
Added support for WARNSEL, WINSEL and WDOGRSTDIS to em_wdog. Added interrupt
functions. Added support for multiple WDOG instances. Deprecated functions
WDOG_Enable(), WDOG_Feed(), WDOG_Init() and WDOG_Lock().
GPIO_EM4GetPinWakeupCause() now returns the content of the EM4WU field from
the GPIO_IF register for platform 2 devices.
Added function GPIO_SlewrateSet() to set slewrate for GPIO ports.
Added fix for GPIO_E201 in CHIP_Init().
Added function CMU_HFRCOBandGet() and CMU_HFRCOBandSet() for platform 2.
Functions with the same names are present for platform 1, but the parameter
and return types are different. Platform 1 and 2 also do not support the same
HFRCO/AUXHFRCO frequencies.
Added HFLE wait-state control to CMU_HFRCOBandSet(). This is a bug on
EFM32 Wonder Gecko only as HFLE DIV4 is required at 24MHz, in between the 28HMz
and 21MHz HFRCO bands.
Fixed reset-cause XMASKs for platform 2, gen 1 parts. Improved
documentation in em_rmu.c.
Added support for configuring IrDA on USART1 for EFM32 Happy Gecko. The
function USART_InitIrDA() is deprecated, and replaced by USARTn_InitIrDA().
Added module em_ramfunc. Fixed issue with calls from em_msc RAM code to Flash.
Updated current limiter threshold equations for LNCLIMILIMSEL, LPCLIMILIMSEL
and DCDCZDETCTRL.
Member type EMU_DcdcLnTransientMode_TypeDef in EMU_DCDCInit_TypeDef changed to
EMU_DcdcLnReverseCurrentControl_TypeDef to enable support for reverse current
limiter.
EM2/3 current consumption optimization: Default value
emuDcdcAnaPeripheralPower_AVDD in EMU_DCDCINIT_DEFAULT for EFR32
changed to emuDcdcAnaPeripheralPower_DCDC.
EM2/3 current consumption optimization: DCDC_LP_NFET_CNT updated to 7.

4.2.1:

Added errata fix for an issue that may cause BOD resets in EM2 when using
DCDC-to-DVDD mode. The fix is implemented in EMU_DCDCInit().
Added function EMU_DCDCPowerOff() for boards with physically disconnected DCDC.
Current consumption is optimized for DCDC bypass mode. This update is
implemented in EMU_DCDCInit().

4.2.0:

Updated I2C clock divider equation for platform 2 parts. Added constraints
to HFPER clock frequency in I2C_BusFreqSet().
EMU EMU_EM23VregMode_TypeDef replaced with a bool.
Added support for GPIO alternate drive strength and alternate control modes.
DCDC setup is simplified. More tuning and optimization settings added to
EMU_DCDCInit().
Added member pinRetentionMode to EMU_EM4Init_TypeDef.
Added function EMU_UnlatchPinRetention() to support unlatching of pin
retention in EM4H/S.
Fixed bug in ADC_InitScan() which caused a overwrite of single conversion
mode calibration values.
Added support for CRYPTO module on EFM32 Pearl and Jade Gecko (em_crypto.c/h).

4.1.1:

EMU_DCDCInit() updated with new parameters for EM2 and 3. Current consumption
with DCDC at expected levels for EFR32 and EFM32 Pearl and Jade Gecko.
EMU_DCDCInit_TypeDef updated with more parameters. EMU_DcdcLpcmpBiasMode_TypeDef
is removed.
More assertions added to EMU_DCDCInit().
HFXO default parameters updated.
ADC defaults updated.
RMU pin mode set fixed.
Added missing define for cmuSelect_ULFRCO.
Added missing functions for handling peripheral interrupts.
Added support for VMON.

4.1.0:

New signature for RMU_ResetControl() function.
The typedef EMU_EM23Init_TypeDef which is a parameter to EMU_EM23Init()
has got a new definition.
Initial support _SILICON_LABS_32B_PLATFORM_2 devices added.

added: dmadrv, spidrv, rtcdrv","EMDRV is a set of function specific high performance drivers for EFM32, EZR32 and EFR32 on-chip peripherals. Drivers are typically DMA based and are using all available low-energy features. For most drivers, the API offers both synchronous and asynchronous functions. The APIs are fully reentrant and callback based.
emdrv is a part of silabs sdk -  doxygen such as emlibs  devicelibs and cmsis. All of these is separated from emlib. Do i need to make a separate pull request for each of them?
sdk documentation:
http://devtools.silabs.com/dl/documentation/doxygen/4.3.0/efm32gg/html/index.html",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,15,2016-05-12T19:45:14Z,2016-05-18T19:29:46Z,2016-05-18T19:29:46Z,CLOSED,False,9577,3032,171,https://github.com/eszczekocki,emlib updates and emdrv added,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/15,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/15#issuecomment-218977391,"updated emlibs from 4.1.0 to 4.3.0
changes from emlib
================ Revision history ============================================
4.3.0:

em_cmu: Removed unused fields from CMU_HFXOInit_TypeDef. The removed fields
are regIshStartup and timeoutWarmSteady.
em_rtc.h: Added RTC_CounterSet function for modifying the RTC Counter.
em_burtc.c: Fixed bug when doing low frequency domain synchronization.
em_gpio.c: Deprecated GPIO_IntConfig(), use new function GPIO_ExtIntConfig()
instead.
Removed deprecated file em_part.h.
em_dma.c: Replaced infinite loop on bus errors in default irq handler with
an assert.
em_gpio.c: Use direct register write instead of BUS API in GPIO_PinModeSet
to prevent glitches.
Fixed incorrect handling of CMU_CTRL_WSHFLE and CMU_HFPRESC_HFCLKLEPRESC in
em_cmu.c for EFM32 Pearl and Jade Gecko.
Type enumerations cmuClock_HFLE and cmuSelect_HFCLKLE can now be used for
all families to select or reference the divided down HF clock for LE peripherals.
Code size optimization in em_cmu.c.
Added GPCRC support.
Added support for WARNSEL, WINSEL and WDOGRSTDIS to em_wdog. Added interrupt
functions. Added support for multiple WDOG instances. Deprecated functions
WDOG_Enable(), WDOG_Feed(), WDOG_Init() and WDOG_Lock().
GPIO_EM4GetPinWakeupCause() now returns the content of the EM4WU field from
the GPIO_IF register for platform 2 devices.
Added function GPIO_SlewrateSet() to set slewrate for GPIO ports.
Added fix for GPIO_E201 in CHIP_Init().
Added function CMU_HFRCOBandGet() and CMU_HFRCOBandSet() for platform 2.
Functions with the same names are present for platform 1, but the parameter
and return types are different. Platform 1 and 2 also do not support the same
HFRCO/AUXHFRCO frequencies.
Added HFLE wait-state control to CMU_HFRCOBandSet(). This is a bug on
EFM32 Wonder Gecko only as HFLE DIV4 is required at 24MHz, in between the 28HMz
and 21MHz HFRCO bands.
Fixed reset-cause XMASKs for platform 2, gen 1 parts. Improved
documentation in em_rmu.c.
Added support for configuring IrDA on USART1 for EFM32 Happy Gecko. The
function USART_InitIrDA() is deprecated, and replaced by USARTn_InitIrDA().
Added module em_ramfunc. Fixed issue with calls from em_msc RAM code to Flash.
Updated current limiter threshold equations for LNCLIMILIMSEL, LPCLIMILIMSEL
and DCDCZDETCTRL.
Member type EMU_DcdcLnTransientMode_TypeDef in EMU_DCDCInit_TypeDef changed to
EMU_DcdcLnReverseCurrentControl_TypeDef to enable support for reverse current
limiter.
EM2/3 current consumption optimization: Default value
emuDcdcAnaPeripheralPower_AVDD in EMU_DCDCINIT_DEFAULT for EFR32
changed to emuDcdcAnaPeripheralPower_DCDC.
EM2/3 current consumption optimization: DCDC_LP_NFET_CNT updated to 7.

4.2.1:

Added errata fix for an issue that may cause BOD resets in EM2 when using
DCDC-to-DVDD mode. The fix is implemented in EMU_DCDCInit().
Added function EMU_DCDCPowerOff() for boards with physically disconnected DCDC.
Current consumption is optimized for DCDC bypass mode. This update is
implemented in EMU_DCDCInit().

4.2.0:

Updated I2C clock divider equation for platform 2 parts. Added constraints
to HFPER clock frequency in I2C_BusFreqSet().
EMU EMU_EM23VregMode_TypeDef replaced with a bool.
Added support for GPIO alternate drive strength and alternate control modes.
DCDC setup is simplified. More tuning and optimization settings added to
EMU_DCDCInit().
Added member pinRetentionMode to EMU_EM4Init_TypeDef.
Added function EMU_UnlatchPinRetention() to support unlatching of pin
retention in EM4H/S.
Fixed bug in ADC_InitScan() which caused a overwrite of single conversion
mode calibration values.
Added support for CRYPTO module on EFM32 Pearl and Jade Gecko (em_crypto.c/h).

4.1.1:

EMU_DCDCInit() updated with new parameters for EM2 and 3. Current consumption
with DCDC at expected levels for EFR32 and EFM32 Pearl and Jade Gecko.
EMU_DCDCInit_TypeDef updated with more parameters. EMU_DcdcLpcmpBiasMode_TypeDef
is removed.
More assertions added to EMU_DCDCInit().
HFXO default parameters updated.
ADC defaults updated.
RMU pin mode set fixed.
Added missing define for cmuSelect_ULFRCO.
Added missing functions for handling peripheral interrupts.
Added support for VMON.

4.1.0:

New signature for RMU_ResetControl() function.
The typedef EMU_EM23Init_TypeDef which is a parameter to EMU_EM23Init()
has got a new definition.
Initial support _SILICON_LABS_32B_PLATFORM_2 devices added.

added: dmadrv, spidrv, rtcdrv","If we need to update the emlib then we would like to know why exactly. Since the new drivers (dmadrv, spidrv, rtcdrv) are not part of emlib they should not be included. They can be (if they are necessary) part of the PR with the actual gyro driver.",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,15,2016-05-12T19:45:14Z,2016-05-18T19:29:46Z,2016-05-18T19:29:46Z,CLOSED,False,9577,3032,171,https://github.com/eszczekocki,emlib updates and emdrv added,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/15,https://github.com/eszczekocki,5,https://github.com/PW-Sat2/PWSat2OBC/pull/15#issuecomment-218978261,"updated emlibs from 4.1.0 to 4.3.0
changes from emlib
================ Revision history ============================================
4.3.0:

em_cmu: Removed unused fields from CMU_HFXOInit_TypeDef. The removed fields
are regIshStartup and timeoutWarmSteady.
em_rtc.h: Added RTC_CounterSet function for modifying the RTC Counter.
em_burtc.c: Fixed bug when doing low frequency domain synchronization.
em_gpio.c: Deprecated GPIO_IntConfig(), use new function GPIO_ExtIntConfig()
instead.
Removed deprecated file em_part.h.
em_dma.c: Replaced infinite loop on bus errors in default irq handler with
an assert.
em_gpio.c: Use direct register write instead of BUS API in GPIO_PinModeSet
to prevent glitches.
Fixed incorrect handling of CMU_CTRL_WSHFLE and CMU_HFPRESC_HFCLKLEPRESC in
em_cmu.c for EFM32 Pearl and Jade Gecko.
Type enumerations cmuClock_HFLE and cmuSelect_HFCLKLE can now be used for
all families to select or reference the divided down HF clock for LE peripherals.
Code size optimization in em_cmu.c.
Added GPCRC support.
Added support for WARNSEL, WINSEL and WDOGRSTDIS to em_wdog. Added interrupt
functions. Added support for multiple WDOG instances. Deprecated functions
WDOG_Enable(), WDOG_Feed(), WDOG_Init() and WDOG_Lock().
GPIO_EM4GetPinWakeupCause() now returns the content of the EM4WU field from
the GPIO_IF register for platform 2 devices.
Added function GPIO_SlewrateSet() to set slewrate for GPIO ports.
Added fix for GPIO_E201 in CHIP_Init().
Added function CMU_HFRCOBandGet() and CMU_HFRCOBandSet() for platform 2.
Functions with the same names are present for platform 1, but the parameter
and return types are different. Platform 1 and 2 also do not support the same
HFRCO/AUXHFRCO frequencies.
Added HFLE wait-state control to CMU_HFRCOBandSet(). This is a bug on
EFM32 Wonder Gecko only as HFLE DIV4 is required at 24MHz, in between the 28HMz
and 21MHz HFRCO bands.
Fixed reset-cause XMASKs for platform 2, gen 1 parts. Improved
documentation in em_rmu.c.
Added support for configuring IrDA on USART1 for EFM32 Happy Gecko. The
function USART_InitIrDA() is deprecated, and replaced by USARTn_InitIrDA().
Added module em_ramfunc. Fixed issue with calls from em_msc RAM code to Flash.
Updated current limiter threshold equations for LNCLIMILIMSEL, LPCLIMILIMSEL
and DCDCZDETCTRL.
Member type EMU_DcdcLnTransientMode_TypeDef in EMU_DCDCInit_TypeDef changed to
EMU_DcdcLnReverseCurrentControl_TypeDef to enable support for reverse current
limiter.
EM2/3 current consumption optimization: Default value
emuDcdcAnaPeripheralPower_AVDD in EMU_DCDCINIT_DEFAULT for EFR32
changed to emuDcdcAnaPeripheralPower_DCDC.
EM2/3 current consumption optimization: DCDC_LP_NFET_CNT updated to 7.

4.2.1:

Added errata fix for an issue that may cause BOD resets in EM2 when using
DCDC-to-DVDD mode. The fix is implemented in EMU_DCDCInit().
Added function EMU_DCDCPowerOff() for boards with physically disconnected DCDC.
Current consumption is optimized for DCDC bypass mode. This update is
implemented in EMU_DCDCInit().

4.2.0:

Updated I2C clock divider equation for platform 2 parts. Added constraints
to HFPER clock frequency in I2C_BusFreqSet().
EMU EMU_EM23VregMode_TypeDef replaced with a bool.
Added support for GPIO alternate drive strength and alternate control modes.
DCDC setup is simplified. More tuning and optimization settings added to
EMU_DCDCInit().
Added member pinRetentionMode to EMU_EM4Init_TypeDef.
Added function EMU_UnlatchPinRetention() to support unlatching of pin
retention in EM4H/S.
Fixed bug in ADC_InitScan() which caused a overwrite of single conversion
mode calibration values.
Added support for CRYPTO module on EFM32 Pearl and Jade Gecko (em_crypto.c/h).

4.1.1:

EMU_DCDCInit() updated with new parameters for EM2 and 3. Current consumption
with DCDC at expected levels for EFR32 and EFM32 Pearl and Jade Gecko.
EMU_DCDCInit_TypeDef updated with more parameters. EMU_DcdcLpcmpBiasMode_TypeDef
is removed.
More assertions added to EMU_DCDCInit().
HFXO default parameters updated.
ADC defaults updated.
RMU pin mode set fixed.
Added missing define for cmuSelect_ULFRCO.
Added missing functions for handling peripheral interrupts.
Added support for VMON.

4.1.0:

New signature for RMU_ResetControl() function.
The typedef EMU_EM23Init_TypeDef which is a parameter to EMU_EM23Init()
has got a new definition.
Initial support _SILICON_LABS_32B_PLATFORM_2 devices added.

added: dmadrv, spidrv, rtcdrv","dmadrv, spidrv, rtcdrv are necessary part of actual gyro driver.",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,15,2016-05-12T19:45:14Z,2016-05-18T19:29:46Z,2016-05-18T19:29:46Z,CLOSED,False,9577,3032,171,https://github.com/eszczekocki,emlib updates and emdrv added,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/15,https://github.com/zaq32,6,https://github.com/PW-Sat2/PWSat2OBC/pull/15#issuecomment-219798173,"updated emlibs from 4.1.0 to 4.3.0
changes from emlib
================ Revision history ============================================
4.3.0:

em_cmu: Removed unused fields from CMU_HFXOInit_TypeDef. The removed fields
are regIshStartup and timeoutWarmSteady.
em_rtc.h: Added RTC_CounterSet function for modifying the RTC Counter.
em_burtc.c: Fixed bug when doing low frequency domain synchronization.
em_gpio.c: Deprecated GPIO_IntConfig(), use new function GPIO_ExtIntConfig()
instead.
Removed deprecated file em_part.h.
em_dma.c: Replaced infinite loop on bus errors in default irq handler with
an assert.
em_gpio.c: Use direct register write instead of BUS API in GPIO_PinModeSet
to prevent glitches.
Fixed incorrect handling of CMU_CTRL_WSHFLE and CMU_HFPRESC_HFCLKLEPRESC in
em_cmu.c for EFM32 Pearl and Jade Gecko.
Type enumerations cmuClock_HFLE and cmuSelect_HFCLKLE can now be used for
all families to select or reference the divided down HF clock for LE peripherals.
Code size optimization in em_cmu.c.
Added GPCRC support.
Added support for WARNSEL, WINSEL and WDOGRSTDIS to em_wdog. Added interrupt
functions. Added support for multiple WDOG instances. Deprecated functions
WDOG_Enable(), WDOG_Feed(), WDOG_Init() and WDOG_Lock().
GPIO_EM4GetPinWakeupCause() now returns the content of the EM4WU field from
the GPIO_IF register for platform 2 devices.
Added function GPIO_SlewrateSet() to set slewrate for GPIO ports.
Added fix for GPIO_E201 in CHIP_Init().
Added function CMU_HFRCOBandGet() and CMU_HFRCOBandSet() for platform 2.
Functions with the same names are present for platform 1, but the parameter
and return types are different. Platform 1 and 2 also do not support the same
HFRCO/AUXHFRCO frequencies.
Added HFLE wait-state control to CMU_HFRCOBandSet(). This is a bug on
EFM32 Wonder Gecko only as HFLE DIV4 is required at 24MHz, in between the 28HMz
and 21MHz HFRCO bands.
Fixed reset-cause XMASKs for platform 2, gen 1 parts. Improved
documentation in em_rmu.c.
Added support for configuring IrDA on USART1 for EFM32 Happy Gecko. The
function USART_InitIrDA() is deprecated, and replaced by USARTn_InitIrDA().
Added module em_ramfunc. Fixed issue with calls from em_msc RAM code to Flash.
Updated current limiter threshold equations for LNCLIMILIMSEL, LPCLIMILIMSEL
and DCDCZDETCTRL.
Member type EMU_DcdcLnTransientMode_TypeDef in EMU_DCDCInit_TypeDef changed to
EMU_DcdcLnReverseCurrentControl_TypeDef to enable support for reverse current
limiter.
EM2/3 current consumption optimization: Default value
emuDcdcAnaPeripheralPower_AVDD in EMU_DCDCINIT_DEFAULT for EFR32
changed to emuDcdcAnaPeripheralPower_DCDC.
EM2/3 current consumption optimization: DCDC_LP_NFET_CNT updated to 7.

4.2.1:

Added errata fix for an issue that may cause BOD resets in EM2 when using
DCDC-to-DVDD mode. The fix is implemented in EMU_DCDCInit().
Added function EMU_DCDCPowerOff() for boards with physically disconnected DCDC.
Current consumption is optimized for DCDC bypass mode. This update is
implemented in EMU_DCDCInit().

4.2.0:

Updated I2C clock divider equation for platform 2 parts. Added constraints
to HFPER clock frequency in I2C_BusFreqSet().
EMU EMU_EM23VregMode_TypeDef replaced with a bool.
Added support for GPIO alternate drive strength and alternate control modes.
DCDC setup is simplified. More tuning and optimization settings added to
EMU_DCDCInit().
Added member pinRetentionMode to EMU_EM4Init_TypeDef.
Added function EMU_UnlatchPinRetention() to support unlatching of pin
retention in EM4H/S.
Fixed bug in ADC_InitScan() which caused a overwrite of single conversion
mode calibration values.
Added support for CRYPTO module on EFM32 Pearl and Jade Gecko (em_crypto.c/h).

4.1.1:

EMU_DCDCInit() updated with new parameters for EM2 and 3. Current consumption
with DCDC at expected levels for EFR32 and EFM32 Pearl and Jade Gecko.
EMU_DCDCInit_TypeDef updated with more parameters. EMU_DcdcLpcmpBiasMode_TypeDef
is removed.
More assertions added to EMU_DCDCInit().
HFXO default parameters updated.
ADC defaults updated.
RMU pin mode set fixed.
Added missing define for cmuSelect_ULFRCO.
Added missing functions for handling peripheral interrupts.
Added support for VMON.

4.1.0:

New signature for RMU_ResetControl() function.
The typedef EMU_EM23Init_TypeDef which is a parameter to EMU_EM23Init()
has got a new definition.
Initial support _SILICON_LABS_32B_PLATFORM_2 devices added.

added: dmadrv, spidrv, rtcdrv","If they are necessary for the gyro driver then they should be included in the same PR.
They shouldn't be put inside the DevBoard platform module as almost certainly we there will be another platform dedicated exclusively for the flight model. For the moment the platform module is our hal, and the three extra drivers are not part of it.",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,16,2016-05-12T19:59:13Z,2016-08-20T10:09:58Z,2016-08-20T10:11:43Z,MERGED,True,35702,585,419,https://github.com/eszczekocki,first gyro drivers,151,[],https://github.com/PW-Sat2/PWSat2OBC/pull/16,https://github.com/eszczekocki,1,https://github.com/PW-Sat2/PWSat2OBC/pull/16,"First, verry simple driver for gyroscope.
In init we initialize gyro and also SPI. How much do we have SPI sensors? Do we need async communication with Gyro (use callbacks)? How many threads will use this driver (use queue and semaphores)?
TO DO:

diagnostics (Fault (FAULTx) Registers)
...



This change is","First, verry simple driver for gyroscope.
In init we initialize gyro and also SPI. How much do we have SPI sensors? Do we need async communication with Gyro (use callbacks)? How many threads will use this driver (use queue and semaphores)?
TO DO:

diagnostics (Fault (FAULTx) Registers)
...



This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,16,2016-05-12T19:59:13Z,2016-08-20T10:09:58Z,2016-08-20T10:11:43Z,MERGED,True,35702,585,419,https://github.com/eszczekocki,first gyro drivers,151,[],https://github.com/PW-Sat2/PWSat2OBC/pull/16,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/16#issuecomment-222366290,"First, verry simple driver for gyroscope.
In init we initialize gyro and also SPI. How much do we have SPI sensors? Do we need async communication with Gyro (use callbacks)? How many threads will use this driver (use queue and semaphores)?
TO DO:

diagnostics (Fault (FAULTx) Registers)
...



This change is","Sorry, for this, I did not have the intention to close this PR.",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,16,2016-05-12T19:59:13Z,2016-08-20T10:09:58Z,2016-08-20T10:11:43Z,MERGED,True,35702,585,419,https://github.com/eszczekocki,first gyro drivers,151,[],https://github.com/PW-Sat2/PWSat2OBC/pull/16,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/16#issuecomment-231212398,"First, verry simple driver for gyroscope.
In init we initialize gyro and also SPI. How much do we have SPI sensors? Do we need async communication with Gyro (use callbacks)? How many threads will use this driver (use queue and semaphores)?
TO DO:

diagnostics (Fault (FAULTx) Registers)
...



This change is","Few general comments:

Try to follow general repository structure

Move the spi & dma drivers separate libraries and put them in libs/external directory
Move gyro driver out of main module and put it in its own library in libs/drivers directory


Gyro driver public interface is not is not fully documented.
There are not automatic tests of any kind in here
The Gyro driver is very tightly coupled to the SPI driver which is not the best solution.
Please do not use global variables
Check source code formatting agains our coding standard
Use C99 integer types from stdint.h header files instead of built-in integer types they are better at signalizing original intent and expected data range
Try to use OS abstraction layer from libs/base instad of calling FreeRTOS directly",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,16,2016-05-12T19:59:13Z,2016-08-20T10:09:58Z,2016-08-20T10:11:43Z,MERGED,True,35702,585,419,https://github.com/eszczekocki,first gyro drivers,151,[],https://github.com/PW-Sat2/PWSat2OBC/pull/16,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/16#issuecomment-231214164,"First, verry simple driver for gyroscope.
In init we initialize gyro and also SPI. How much do we have SPI sensors? Do we need async communication with Gyro (use callbacks)? How many threads will use this driver (use queue and semaphores)?
TO DO:

diagnostics (Fault (FAULTx) Registers)
...



This change is",I would also recommend rebasing this branch on top current master branch.,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,16,2016-05-12T19:59:13Z,2016-08-20T10:09:58Z,2016-08-20T10:11:43Z,MERGED,True,35702,585,419,https://github.com/eszczekocki,first gyro drivers,151,[],https://github.com/PW-Sat2/PWSat2OBC/pull/16,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/16#issuecomment-238350363,"First, verry simple driver for gyroscope.
In init we initialize gyro and also SPI. How much do we have SPI sensors? Do we need async communication with Gyro (use callbacks)? How many threads will use this driver (use queue and semaphores)?
TO DO:

diagnostics (Fault (FAULTx) Registers)
...



This change is","Reviewed 8 of 18 files at r1, 3 of 10 files at r2, 4 of 4 files at r3.
Review status: all files reviewed at latest revision, 9 unresolved discussions, some commit checks failed.

src/drivers/ADXRS453.c, line 91 [r3] (raw file):

for(bitNo = 31; bitNo > 0; bitNo--)

Quoted 7 lines of code
{
    sum += ((command >> bitNo) & 0x1);
}
if(!(sum % 2))
{
  sendBuffer[3] |= 1;
}



Use
 __builtin_parity(command)


src/drivers/ADXRS453.c, line 158 [r3] (raw file):

sendBuffer[0] = ADXRS453_SENSOR_DATA;

Quoted 12 lines of code
command = ((uint32_t)sendBuffer[0] << 24) |
          ((uint32_t)sendBuffer[1] << 16) |
          ((uint16_t)sendBuffer[2] << 8) |
          sendBuffer[3];
for(bitNo = 31; bitNo > 0; bitNo--)
{
    sum += ((command >> bitNo) & 0x1);
}
if(!(sum % 2))
{
  sendBuffer[3] |= 1;
}



This code is repeatedly copied move it to dedicated function

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,17,2016-05-18T19:36:04Z,2016-05-29T14:43:42Z,2016-05-29T15:14:26Z,MERGED,True,9577,3073,172,https://github.com/eszczekocki,update emlib from 4.1.0 to 4.3.0,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/17,https://github.com/eszczekocki,1,https://github.com/PW-Sat2/PWSat2OBC/pull/17,"updated emlibs from 4.1.0 to 4.3.0
changes from emlib
================ Revision history ============================================
4.3.0:
em_cmu: Removed unused fields from CMU_HFXOInit_TypeDef. The removed fields are regIshStartup and timeoutWarmSteady.
em_rtc.h: Added RTC_CounterSet function for modifying the RTC Counter.
em_burtc.c: Fixed bug when doing low frequency domain synchronization.
em_gpio.c: Deprecated GPIO_IntConfig(), use new function GPIO_ExtIntConfig() instead.
Removed deprecated file em_part.h.
em_dma.c: Replaced infinite loop on bus errors in default irq handler with an assert.
em_gpio.c: Use direct register write instead of BUS API in GPIO_PinModeSet to prevent glitches.
Fixed incorrect handling of CMU_CTRL_WSHFLE and CMU_HFPRESC_HFCLKLEPRESC in em_cmu.c for EFM32 Pearl and Jade Gecko.
Type enumerations cmuClock_HFLE and cmuSelect_HFCLKLE can now be used for all families to select or reference the divided down HF clock for LE peripherals.
Code size optimization in em_cmu.c.
Added GPCRC support.
Added support for WARNSEL, WINSEL and WDOGRSTDIS to em_wdog. Added interrupt functions. Added support for multiple WDOG instances. Deprecated functions WDOG_Enable(), WDOG_Feed(), WDOG_Init() and WDOG_Lock().
GPIO_EM4GetPinWakeupCause() now returns the content of the EM4WU field from the GPIO_IF register for platform 2 devices.
Added function GPIO_SlewrateSet() to set slewrate for GPIO ports.
Added fix for GPIO_E201 in CHIP_Init().
Added function CMU_HFRCOBandGet() and CMU_HFRCOBandSet() for platform 2. Functions with the same names are present for platform 1, but the parameter and return types are different. Platform 1 and 2 also do not support the same HFRCO/AUXHFRCO frequencies.
Added HFLE wait-state control to CMU_HFRCOBandSet(). This is a bug on EFM32 Wonder Gecko only as HFLE DIV4 is required at 24MHz, in between the 28HMz and 21MHz HFRCO bands.
Fixed reset-cause XMASKs for platform 2, gen 1 parts. Improved documentation in em_rmu.c.
Added support for configuring IrDA on USART1 for EFM32 Happy Gecko. The function USART_InitIrDA() is deprecated, and replaced by USARTn_InitIrDA().
Added module em_ramfunc. Fixed issue with calls from em_msc RAM code to Flash.
Updated current limiter threshold equations for LNCLIMILIMSEL, LPCLIMILIMSEL and DCDCZDETCTRL.
Member type EMU_DcdcLnTransientMode_TypeDef in EMU_DCDCInit_TypeDef changed to EMU_DcdcLnReverseCurrentControl_TypeDef to enable support for reverse current limiter.
EM2/3 current consumption optimization: Default value emuDcdcAnaPeripheralPower_AVDD in EMU_DCDCINIT_DEFAULT for EFR32 changed to emuDcdcAnaPeripheralPower_DCDC.
EM2/3 current consumption optimization: DCDC_LP_NFET_CNT updated to 7.
4.2.1:
Added errata fix for an issue that may cause BOD resets in EM2 when using DCDC-to-DVDD mode. The fix is implemented in EMU_DCDCInit().
Added function EMU_DCDCPowerOff() for boards with physically disconnected DCDC.
Current consumption is optimized for DCDC bypass mode. This update is implemented in EMU_DCDCInit().
4.2.0:
Updated I2C clock divider equation for platform 2 parts. Added constraints to HFPER clock frequency in I2C_BusFreqSet().
EMU EMU_EM23VregMode_TypeDef replaced with a bool.
Added support for GPIO alternate drive strength and alternate control modes.
DCDC setup is simplified. More tuning and optimization settings added to EMU_DCDCInit().
Added member pinRetentionMode to EMU_EM4Init_TypeDef.
Added function EMU_UnlatchPinRetention() to support unlatching of pin retention in EM4H/S.
Fixed bug in ADC_InitScan() which caused a overwrite of single conversion mode calibration values.
Added support for CRYPTO module on EFM32 Pearl and Jade Gecko (em_crypto.c/h).
4.1.1:
EMU_DCDCInit() updated with new parameters for EM2 and 3. Current consumption with DCDC at expected levels for EFR32 and EFM32 Pearl and Jade Gecko.
EMU_DCDCInit_TypeDef updated with more parameters. EMU_DcdcLpcmpBiasMode_TypeDef is removed.
More assertions added to EMU_DCDCInit().
HFXO default parameters updated.
ADC defaults updated.
RMU pin mode set fixed.
Added missing define for cmuSelect_ULFRCO.
Added missing functions for handling peripheral interrupts.
Added support for VMON.
4.1.0:
New signature for RMU_ResetControl() function.
The typedef EMU_EM23Init_TypeDef which is a parameter to EMU_EM23Init() has got a new definition.
Initial support _SILICON_LABS_32B_PLATFORM_2 devices added.","updated emlibs from 4.1.0 to 4.3.0
changes from emlib
================ Revision history ============================================
4.3.0:
em_cmu: Removed unused fields from CMU_HFXOInit_TypeDef. The removed fields are regIshStartup and timeoutWarmSteady.
em_rtc.h: Added RTC_CounterSet function for modifying the RTC Counter.
em_burtc.c: Fixed bug when doing low frequency domain synchronization.
em_gpio.c: Deprecated GPIO_IntConfig(), use new function GPIO_ExtIntConfig() instead.
Removed deprecated file em_part.h.
em_dma.c: Replaced infinite loop on bus errors in default irq handler with an assert.
em_gpio.c: Use direct register write instead of BUS API in GPIO_PinModeSet to prevent glitches.
Fixed incorrect handling of CMU_CTRL_WSHFLE and CMU_HFPRESC_HFCLKLEPRESC in em_cmu.c for EFM32 Pearl and Jade Gecko.
Type enumerations cmuClock_HFLE and cmuSelect_HFCLKLE can now be used for all families to select or reference the divided down HF clock for LE peripherals.
Code size optimization in em_cmu.c.
Added GPCRC support.
Added support for WARNSEL, WINSEL and WDOGRSTDIS to em_wdog. Added interrupt functions. Added support for multiple WDOG instances. Deprecated functions WDOG_Enable(), WDOG_Feed(), WDOG_Init() and WDOG_Lock().
GPIO_EM4GetPinWakeupCause() now returns the content of the EM4WU field from the GPIO_IF register for platform 2 devices.
Added function GPIO_SlewrateSet() to set slewrate for GPIO ports.
Added fix for GPIO_E201 in CHIP_Init().
Added function CMU_HFRCOBandGet() and CMU_HFRCOBandSet() for platform 2. Functions with the same names are present for platform 1, but the parameter and return types are different. Platform 1 and 2 also do not support the same HFRCO/AUXHFRCO frequencies.
Added HFLE wait-state control to CMU_HFRCOBandSet(). This is a bug on EFM32 Wonder Gecko only as HFLE DIV4 is required at 24MHz, in between the 28HMz and 21MHz HFRCO bands.
Fixed reset-cause XMASKs for platform 2, gen 1 parts. Improved documentation in em_rmu.c.
Added support for configuring IrDA on USART1 for EFM32 Happy Gecko. The function USART_InitIrDA() is deprecated, and replaced by USARTn_InitIrDA().
Added module em_ramfunc. Fixed issue with calls from em_msc RAM code to Flash.
Updated current limiter threshold equations for LNCLIMILIMSEL, LPCLIMILIMSEL and DCDCZDETCTRL.
Member type EMU_DcdcLnTransientMode_TypeDef in EMU_DCDCInit_TypeDef changed to EMU_DcdcLnReverseCurrentControl_TypeDef to enable support for reverse current limiter.
EM2/3 current consumption optimization: Default value emuDcdcAnaPeripheralPower_AVDD in EMU_DCDCINIT_DEFAULT for EFR32 changed to emuDcdcAnaPeripheralPower_DCDC.
EM2/3 current consumption optimization: DCDC_LP_NFET_CNT updated to 7.
4.2.1:
Added errata fix for an issue that may cause BOD resets in EM2 when using DCDC-to-DVDD mode. The fix is implemented in EMU_DCDCInit().
Added function EMU_DCDCPowerOff() for boards with physically disconnected DCDC.
Current consumption is optimized for DCDC bypass mode. This update is implemented in EMU_DCDCInit().
4.2.0:
Updated I2C clock divider equation for platform 2 parts. Added constraints to HFPER clock frequency in I2C_BusFreqSet().
EMU EMU_EM23VregMode_TypeDef replaced with a bool.
Added support for GPIO alternate drive strength and alternate control modes.
DCDC setup is simplified. More tuning and optimization settings added to EMU_DCDCInit().
Added member pinRetentionMode to EMU_EM4Init_TypeDef.
Added function EMU_UnlatchPinRetention() to support unlatching of pin retention in EM4H/S.
Fixed bug in ADC_InitScan() which caused a overwrite of single conversion mode calibration values.
Added support for CRYPTO module on EFM32 Pearl and Jade Gecko (em_crypto.c/h).
4.1.1:
EMU_DCDCInit() updated with new parameters for EM2 and 3. Current consumption with DCDC at expected levels for EFR32 and EFM32 Pearl and Jade Gecko.
EMU_DCDCInit_TypeDef updated with more parameters. EMU_DcdcLpcmpBiasMode_TypeDef is removed.
More assertions added to EMU_DCDCInit().
HFXO default parameters updated.
ADC defaults updated.
RMU pin mode set fixed.
Added missing define for cmuSelect_ULFRCO.
Added missing functions for handling peripheral interrupts.
Added support for VMON.
4.1.0:
New signature for RMU_ResetControl() function.
The typedef EMU_EM23Init_TypeDef which is a parameter to EMU_EM23Init() has got a new definition.
Initial support _SILICON_LABS_32B_PLATFORM_2 devices added.",True,{'THUMBS_UP': ['https://github.com/Novakov']}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,17,2016-05-18T19:36:04Z,2016-05-29T14:43:42Z,2016-05-29T15:14:26Z,MERGED,True,9577,3073,172,https://github.com/eszczekocki,update emlib from 4.1.0 to 4.3.0,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/17,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/17#issuecomment-220232221,"updated emlibs from 4.1.0 to 4.3.0
changes from emlib
================ Revision history ============================================
4.3.0:
em_cmu: Removed unused fields from CMU_HFXOInit_TypeDef. The removed fields are regIshStartup and timeoutWarmSteady.
em_rtc.h: Added RTC_CounterSet function for modifying the RTC Counter.
em_burtc.c: Fixed bug when doing low frequency domain synchronization.
em_gpio.c: Deprecated GPIO_IntConfig(), use new function GPIO_ExtIntConfig() instead.
Removed deprecated file em_part.h.
em_dma.c: Replaced infinite loop on bus errors in default irq handler with an assert.
em_gpio.c: Use direct register write instead of BUS API in GPIO_PinModeSet to prevent glitches.
Fixed incorrect handling of CMU_CTRL_WSHFLE and CMU_HFPRESC_HFCLKLEPRESC in em_cmu.c for EFM32 Pearl and Jade Gecko.
Type enumerations cmuClock_HFLE and cmuSelect_HFCLKLE can now be used for all families to select or reference the divided down HF clock for LE peripherals.
Code size optimization in em_cmu.c.
Added GPCRC support.
Added support for WARNSEL, WINSEL and WDOGRSTDIS to em_wdog. Added interrupt functions. Added support for multiple WDOG instances. Deprecated functions WDOG_Enable(), WDOG_Feed(), WDOG_Init() and WDOG_Lock().
GPIO_EM4GetPinWakeupCause() now returns the content of the EM4WU field from the GPIO_IF register for platform 2 devices.
Added function GPIO_SlewrateSet() to set slewrate for GPIO ports.
Added fix for GPIO_E201 in CHIP_Init().
Added function CMU_HFRCOBandGet() and CMU_HFRCOBandSet() for platform 2. Functions with the same names are present for platform 1, but the parameter and return types are different. Platform 1 and 2 also do not support the same HFRCO/AUXHFRCO frequencies.
Added HFLE wait-state control to CMU_HFRCOBandSet(). This is a bug on EFM32 Wonder Gecko only as HFLE DIV4 is required at 24MHz, in between the 28HMz and 21MHz HFRCO bands.
Fixed reset-cause XMASKs for platform 2, gen 1 parts. Improved documentation in em_rmu.c.
Added support for configuring IrDA on USART1 for EFM32 Happy Gecko. The function USART_InitIrDA() is deprecated, and replaced by USARTn_InitIrDA().
Added module em_ramfunc. Fixed issue with calls from em_msc RAM code to Flash.
Updated current limiter threshold equations for LNCLIMILIMSEL, LPCLIMILIMSEL and DCDCZDETCTRL.
Member type EMU_DcdcLnTransientMode_TypeDef in EMU_DCDCInit_TypeDef changed to EMU_DcdcLnReverseCurrentControl_TypeDef to enable support for reverse current limiter.
EM2/3 current consumption optimization: Default value emuDcdcAnaPeripheralPower_AVDD in EMU_DCDCINIT_DEFAULT for EFR32 changed to emuDcdcAnaPeripheralPower_DCDC.
EM2/3 current consumption optimization: DCDC_LP_NFET_CNT updated to 7.
4.2.1:
Added errata fix for an issue that may cause BOD resets in EM2 when using DCDC-to-DVDD mode. The fix is implemented in EMU_DCDCInit().
Added function EMU_DCDCPowerOff() for boards with physically disconnected DCDC.
Current consumption is optimized for DCDC bypass mode. This update is implemented in EMU_DCDCInit().
4.2.0:
Updated I2C clock divider equation for platform 2 parts. Added constraints to HFPER clock frequency in I2C_BusFreqSet().
EMU EMU_EM23VregMode_TypeDef replaced with a bool.
Added support for GPIO alternate drive strength and alternate control modes.
DCDC setup is simplified. More tuning and optimization settings added to EMU_DCDCInit().
Added member pinRetentionMode to EMU_EM4Init_TypeDef.
Added function EMU_UnlatchPinRetention() to support unlatching of pin retention in EM4H/S.
Fixed bug in ADC_InitScan() which caused a overwrite of single conversion mode calibration values.
Added support for CRYPTO module on EFM32 Pearl and Jade Gecko (em_crypto.c/h).
4.1.1:
EMU_DCDCInit() updated with new parameters for EM2 and 3. Current consumption with DCDC at expected levels for EFR32 and EFM32 Pearl and Jade Gecko.
EMU_DCDCInit_TypeDef updated with more parameters. EMU_DcdcLpcmpBiasMode_TypeDef is removed.
More assertions added to EMU_DCDCInit().
HFXO default parameters updated.
ADC defaults updated.
RMU pin mode set fixed.
Added missing define for cmuSelect_ULFRCO.
Added missing functions for handling peripheral interrupts.
Added support for VMON.
4.1.0:
New signature for RMU_ResetControl() function.
The typedef EMU_EM23Init_TypeDef which is a parameter to EMU_EM23Init() has got a new definition.
Initial support _SILICON_LABS_32B_PLATFORM_2 devices added.","Removed deprecated file em_part.h.

This file has not been removed from the repository.",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,18,2016-05-29T14:30:27Z,2016-06-08T20:35:12Z,2016-06-08T20:35:12Z,CLOSED,False,189,55,12,https://github.com/zaq32,Logger update,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/18,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/18,"Minor logger update.

Fix bug that caused system to occasionally crash sometime after calling LogRemoveEndpoint procedure,
Extend logger with support for logging from within interrupt service routines.","Minor logger update.

Fix bug that caused system to occasionally crash sometime after calling LogRemoveEndpoint procedure,
Extend logger with support for logging from within interrupt service routines.",True,{'THUMBS_UP': ['https://github.com/Novakov']}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,18,2016-05-29T14:30:27Z,2016-06-08T20:35:12Z,2016-06-08T20:35:12Z,CLOSED,False,189,55,12,https://github.com/zaq32,Logger update,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/18,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/18#issuecomment-224693749,"Minor logger update.

Fix bug that caused system to occasionally crash sometime after calling LogRemoveEndpoint procedure,
Extend logger with support for logging from within interrupt service routines.","Please squash all commits into one (Four ""logger update"" commits are not fine) and then we an merge it",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,19,2016-06-08T20:36:48Z,2016-06-09T09:30:01Z,2016-06-09T09:30:07Z,MERGED,True,189,55,12,https://github.com/zaq32,[logger] Logger update.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/19,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/19,"Minor logger update.

Fix bug that caused system to occasionally crash sometime after calling LogRemoveEndpoint procedure,
Extend logger with support for logging from within interrupt service routines.","Minor logger update.

Fix bug that caused system to occasionally crash sometime after calling LogRemoveEndpoint procedure,
Extend logger with support for logging from within interrupt service routines.",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,20,2016-06-14T19:52:50Z,2016-06-16T14:36:20Z,2016-06-16T14:36:22Z,MERGED,True,61,146,257,https://github.com/Novakov,Folder organization,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/20,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/20,"This pull request updates the folder structure to be more meaningful:

libs/external - external libraries
libs/drivers - low-level drivers (like I2C, SWO, etc)
emlib is separated as external lib
platform contains only FreeRTOS config and io_map as these things are specific to platform (DevBoard, FlightModel)
tests were renamed to unit_tests. They can be runned using target unit_tests.run","This pull request updates the folder structure to be more meaningful:

libs/external - external libraries
libs/drivers - low-level drivers (like I2C, SWO, etc)
emlib is separated as external lib
platform contains only FreeRTOS config and io_map as these things are specific to platform (DevBoard, FlightModel)
tests were renamed to unit_tests. They can be runned using target unit_tests.run",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,21,2016-06-25T15:36:57Z,2016-06-29T19:11:30Z,2016-06-29T19:13:38Z,MERGED,True,3967,279,57,https://github.com/zaq32,Driver for communication module,40,[],https://github.com/PW-Sat2/PWSat2OBC/pull/21,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/21,"This PR contains:

Low lever comm module driver that provides:

Support for most likely needed comm features,
Task responsible for monitoring comm receiver & handling commands,


Bugfixes for:

terminal (command character ordering) ,
i2c (semaphore status in case od failed transmissions),


Introduced OBC initialization task.
Update for integration tests that provide better synchronization between EFM, PC & device mock during tests,
Introduced OS abstraction layer - required to get anywhere with unit testing,
Some comm integration tests
A lot  of unit tests for COMM

and more....","This PR contains:

Low lever comm module driver that provides:

Support for most likely needed comm features,
Task responsible for monitoring comm receiver & handling commands,


Bugfixes for:

terminal (command character ordering) ,
i2c (semaphore status in case od failed transmissions),


Introduced OBC initialization task.
Update for integration tests that provide better synchronization between EFM, PC & device mock during tests,
Introduced OS abstraction layer - required to get anywhere with unit testing,
Some comm integration tests
A lot  of unit tests for COMM

and more....",True,{'THUMBS_UP': ['https://github.com/Novakov']}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,22,2016-06-27T20:00:40Z,2016-12-19T20:11:56Z,2016-12-19T20:11:56Z,CLOSED,False,1095,1,20,https://github.com/tymion,Driver for camera,14,[],https://github.com/PW-Sat2/PWSat2OBC/pull/22,https://github.com/tymion,1,https://github.com/PW-Sat2/PWSat2OBC/pull/22,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,22,2016-06-27T20:00:40Z,2016-12-19T20:11:56Z,2016-12-19T20:11:56Z,CLOSED,False,1095,1,20,https://github.com/tymion,Driver for camera,14,[],https://github.com/PW-Sat2/PWSat2OBC/pull/22,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/22#issuecomment-229162726,This change is,"There are no test of any kind included in this PR.
Also include at least documentation for driver public interface & and driver overview including the high level functional states.",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,22,2016-06-27T20:00:40Z,2016-12-19T20:11:56Z,2016-12-19T20:11:56Z,CLOSED,False,1095,1,20,https://github.com/tymion,Driver for camera,14,[],https://github.com/PW-Sat2/PWSat2OBC/pull/22,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/22#issuecomment-237578287,This change is,"Reviewed 2 of 17 files at r1, 15 of 15 files at r2.
Review status: all files reviewed at latest revision, 36 unresolved discussions.

a discussion (no related file):
Camera API is static and it is not possible to mock it in tests. Create API is the way COMM does

libs/drivers/camera/CMakeLists.txt, line 11 [r2] (raw file):

add_library(${NAME} STATIC ${SOURCES})

target_link_libraries(${NAME} uart leuart logger base)

Split each library into it's own line

libs/drivers/camera/Include/camera/camera.h, line 6 [r2] (raw file):

#include ""camera_types.h""

int32_t CameraGetJPEGPicture(CameraJPEGResolution resolution, uint8_t * data, uint32_t dataLength);

Add documentation for camera API

libs/drivers/camera/Include/camera/camera_internal.h, line 4 [r2] (raw file):

#define CAMERA_INTERNAL_H_

#include ""camera_types.h""

Add conditional extern ""C""

libs/drivers/camera/Include/camera/camera_internal.h, line 7 [r2] (raw file):

#include ""stddef.h""

extern int8_t CameraGetCmdSync(void);

extern is not needed in header files

libs/drivers/camera/Include/camera/camera_types.h, line 8 [r2] (raw file):

#define CameraJPEGFormat    0x07

typedef enum CameraCmd_e {

Naming enum inside typedef is not required. typedef enum {} Name; is enough

libs/drivers/camera/Src/camera_utils.c, line 146 [r2] (raw file):

    cmdAck->ackCounter = 0;
    cmdAck->packageId = 0;
    return 0;

Why are you using 0 and -1 instead of bool or dedicated enum?

libs/drivers/uart/CMakeLists.txt, line 9 [r2] (raw file):

add_library(${NAME} STATIC ${SOURCES})

target_link_libraries(${NAME} freeRTOS base platform emlib logger)

Split into one library per line. It will be easier to merge changes later

libs/drivers/uart/uart.c, line 28 [r2] (raw file):

}

void UARTInit(xQueueHandle sink)

We've got nice abstraction over OS functions and types. Use them :)

libs/drivers/uart/uart.c, line 78 [r2] (raw file):

    uint8_t data;
    BaseType_t woken = pdFALSE;
    while (uart->STATUS & USART_STATUS_RXDATAV) {

any reason for not using emlib functions here?

platforms/DevBoard/Include/io_map.h, line 30 [r2] (raw file):

#define USART1_RX 1
#define UART_LOCATION UART_ROUTE_LOCATION_LOC1
#define USART1_BAUDRATE 9600

As this USART is used  only for camera it's better to name these defines CAMERA_USART (or just CAMERA)

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,22,2016-06-27T20:00:40Z,2016-12-19T20:11:56Z,2016-12-19T20:11:56Z,CLOSED,False,1095,1,20,https://github.com/tymion,Driver for camera,14,[],https://github.com/PW-Sat2/PWSat2OBC/pull/22,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/22#issuecomment-238345228,This change is,"Review status: all files reviewed at latest revision, 36 unresolved discussions.

libs/drivers/camera/Include/camera/camera_internal.h, line 5 [r2] (raw file):

#include ""camera_types.h""
#include ""stddef.h""

Use angle brackets for standard include files.

libs/drivers/camera/Src/camera.c, line 99 [r2] (raw file):

    }

    if (CameraPictureType_JPEG != cmdData.type || cmdData.dataLength <= 0)

cmdData.dataLength is unsigned therefore by definition cannot be less than zero. Is this comparison intended?

libs/drivers/camera/Src/camera_internal.c, line 61 [r2] (raw file):

}

static int8_t CameraGetCmd(uint8_t* cmd, int8_t timeoutMs)

Is it intended to limit the timeout to 255 ms?

libs/drivers/camera/Src/camera_internal.c, line 293 [r2] (raw file):

void CameraInit(void)
{
    uartQueue = xQueueCreate(32, sizeof(uint8_t));

Unhandled error condition.

libs/drivers/camera/Src/camera_utils.c, line 100 [r2] (raw file):

    }

    cmdData->dataLength = (((uint32_t)cmd[3]) | ((uint32_t)cmd[4] << 8) | ((uint32_t)cmd[5] << 16));

Since we know the upper limit of our memory and the maximum supported picture size wouldn't be prudent to verify that size we get even makes sense?

libs/drivers/camera/Src/camera_utils.c, line 110 [r2] (raw file):

}

CameraCmd CameraParseAckCmd(uint8_t* cmd, CameraCmdAck* cmdAck)

What is the actual buffer size?

libs/drivers/camera/Src/camera_utils.c, line 124 [r2] (raw file):

CameraGetCmdType(cmd[2]);
cmdAck->ackCounter = cmd[3];
cmdAck->packageId = ((uint16_t)cmd[4] | ((uint16_t)cmd[5] << 8)) >> 1;
For this it would be better to use base/reader.h


libs/drivers/camera/Src/camera_utils.c, line 128 [r2] (raw file):

}

CameraCmd CameraParseSyncCmd(uint8_t* cmd)

What is the actual buffer size?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,22,2016-06-27T20:00:40Z,2016-12-19T20:11:56Z,2016-12-19T20:11:56Z,CLOSED,False,1095,1,20,https://github.com/tymion,Driver for camera,14,[],https://github.com/PW-Sat2/PWSat2OBC/pull/22,https://github.com/tymion,5,https://github.com/PW-Sat2/PWSat2OBC/pull/22#issuecomment-243859612,This change is,"Review status: 9 of 19 files reviewed at latest revision, 38 unresolved discussions, some commit checks failed.

libs/drivers/camera/CMakeLists.txt, line 11 [r2] (raw file):

Previously, Novakov (Maciej T. Nowak) wrote

Split each library into it's own line

Done.


libs/drivers/camera/Include/camera/camera_internal.h, line 7 [r2] (raw file):

Previously, Novakov (Maciej T. Nowak) wrote

extern is not needed in header files

Done.


libs/drivers/camera/Include/camera/camera_types.h, line 139 [r1] (raw file):

Previously, zaq32 (ukasz ak) wrote

Do not try to hide pointer under the name of the usual object, It will only make things less obvious.

Done.


libs/drivers/camera/Include/camera/camera_types.h, line 144 [r1] (raw file):

Previously, zaq32 (ukasz ak) wrote

Do not try to hide pointer under the name of the usual object, It will only make things less obvious.

Done.


libs/drivers/camera/Include/camera/camera_types.h, line 8 [r2] (raw file):

Previously, Novakov (Maciej T. Nowak) wrote

Naming enum inside typedef is not required. typedef enum {} Name; is enough

Done.


libs/drivers/camera/Src/camera_utils.c, line 14 [r1] (raw file):

Previously, Novakov (Maciej T. Nowak) wrote

Keep it as single LOG. That way nothing will show beetwen header and data in log output

Done.


libs/drivers/uart/CMakeLists.txt, line 9 [r2] (raw file):

Previously, Novakov (Maciej T. Nowak) wrote

Split into one library per line. It will be easier to merge changes later

Done.


libs/drivers/uart/uart.c, line 21 [r1] (raw file):

Previously, zaq32 (ukasz ak) wrote

What is the point of return value here?

Done.


Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,22,2016-06-27T20:00:40Z,2016-12-19T20:11:56Z,2016-12-19T20:11:56Z,CLOSED,False,1095,1,20,https://github.com/tymion,Driver for camera,14,[],https://github.com/PW-Sat2/PWSat2OBC/pull/22,https://github.com/tymion,6,https://github.com/PW-Sat2/PWSat2OBC/pull/22#issuecomment-245392499,This change is,"Review status: 8 of 19 files reviewed at latest revision, 36 unresolved discussions, some commit checks failed.

libs/drivers/camera/Include/camera/camera_internal.h, line 4 [r2] (raw file):

Previously, Novakov (Maciej T. Nowak) wrote

Add conditional extern ""C""

Done.


libs/drivers/camera/Include/camera/camera_internal.h, line 5 [r2] (raw file):

Previously, zaq32 (ukasz ak) wrote

Use angle brackets for standard include files.

Done.


libs/drivers/camera/Include/camera/camera_types.h, line 143 [r1] (raw file):

Previously, zaq32 (ukasz ak) wrote

Why this field is 32 bit long?

Maximum data length from camera is 24 bit long, so it need to be 32 bit long.


libs/drivers/camera/Src/camera.c, line 123 [r1] (raw file):

Previously, Novakov (Maciej T. Nowak) wrote

do {} while(0) loop will give the same but without goto

Done.


Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,22,2016-06-27T20:00:40Z,2016-12-19T20:11:56Z,2016-12-19T20:11:56Z,CLOSED,False,1095,1,20,https://github.com/tymion,Driver for camera,14,[],https://github.com/PW-Sat2/PWSat2OBC/pull/22,https://github.com/tymion,7,https://github.com/PW-Sat2/PWSat2OBC/pull/22#issuecomment-245705063,This change is,"Review status: 1 of 20 files reviewed at latest revision, 36 unresolved discussions, some commit checks failed.

libs/drivers/camera/Src/camera_internal.c, line 29 [r1] (raw file):

Previously, Novakov (Maciej T. Nowak) wrote

It's tricky and makes following control flow harder. It is not expected that plain macro invocation will exit from function

Done.


libs/drivers/camera/Src/camera_internal.c, line 33 [r1] (raw file):

Previously, zaq32 (ukasz ak) wrote

Possible buffer read overflow.

Done.


libs/drivers/camera/Src/camera_internal.c, line 58 [r1] (raw file):

Previously, zaq32 (ukasz ak) wrote

Possible buffer overflow.

Done.


libs/drivers/camera/Src/camera_internal.c, line 282 [r1] (raw file):

Previously, Novakov (Maciej T. Nowak) wrote

// commented code

Done.


libs/drivers/camera/Src/camera_utils.c, line 110 [r2] (raw file):

Previously, zaq32 (ukasz ak) wrote

What is the actual buffer size?

Done.


libs/drivers/camera/Src/camera_utils.c, line 128 [r2] (raw file):

Previously, zaq32 (ukasz ak) wrote

What is the actual buffer size?

Done.


libs/drivers/camera/Src/camera_utils.c, line 146 [r2] (raw file):

Previously, Novakov (Maciej T. Nowak) wrote

Why are you using 0 and -1 instead of bool or dedicated enum?

Done.


libs/drivers/uart/uart.c, line 18 [r1] (raw file):

Previously, Novakov (Maciej T. Nowak) wrote

It should be defined in io_map as it points to specific CPU interface

Done.


libs/drivers/uart/uart.c, line 78 [r2] (raw file):

Previously, Novakov (Maciej T. Nowak) wrote

any reason for not using emlib functions here?

Done.


Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,22,2016-06-27T20:00:40Z,2016-12-19T20:11:56Z,2016-12-19T20:11:56Z,CLOSED,False,1095,1,20,https://github.com/tymion,Driver for camera,14,[],https://github.com/PW-Sat2/PWSat2OBC/pull/22,https://github.com/Novakov,8,https://github.com/PW-Sat2/PWSat2OBC/pull/22#issuecomment-259944731,This change is,[CAM] Create Camera driver.,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,22,2016-06-27T20:00:40Z,2016-12-19T20:11:56Z,2016-12-19T20:11:56Z,CLOSED,False,1095,1,20,https://github.com/tymion,Driver for camera,14,[],https://github.com/PW-Sat2/PWSat2OBC/pull/22,https://github.com/Novakov,9,https://github.com/PW-Sat2/PWSat2OBC/pull/22#issuecomment-259944733,This change is,[CAM] Create Camera driver.,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,23,2016-06-29T19:38:36Z,2016-07-06T09:15:11Z,2016-07-06T09:42:05Z,MERGED,True,2788,18,17,https://github.com/zaq32,Doxygen,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/23,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/23,"Doxygen integration.
The Doxygen utility is used for generation of the source code documentation. The documentation can be generated by either running doxygen without any parameters in the repository root directory or by invoking the cmake doc target.
Additional minor changes:

Add basic repository readme file, this file is presented by github on the main repository page and is also used as the doxygen documentation main page.
Update logger & swo endpoint documentation (introduced their own specific groups).
Update the documentation for os abstraction layer.","Doxygen integration.
The Doxygen utility is used for generation of the source code documentation. The documentation can be generated by either running doxygen without any parameters in the repository root directory or by invoking the cmake doc target.
Additional minor changes:

Add basic repository readme file, this file is presented by github on the main repository page and is also used as the doxygen documentation main page.
Update logger & swo endpoint documentation (introduced their own specific groups).
Update the documentation for os abstraction layer.",True,{'THUMBS_UP': ['https://github.com/Novakov']}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,24,2016-07-10T18:08:17Z,2016-07-13T16:39:40Z,2016-07-13T16:47:35Z,MERGED,True,395,58,10,https://github.com/Novakov,CI build update,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/24,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/24,"Few updates for build:

Count number of warnings reported during build
Generating HTML with memory usage report (segment usage and breakdown by section/archive)

Known issues

Warnings trend report is not displayed (warnings count is displayed only on build level). It's Jenkins issue (https://issues.jenkins-ci.org/browse/JENKINS-31202)
Parsing memory map file is far from elegant (but works!)","Few updates for build:

Count number of warnings reported during build
Generating HTML with memory usage report (segment usage and breakdown by section/archive)

Known issues

Warnings trend report is not displayed (warnings count is displayed only on build level). It's Jenkins issue (https://issues.jenkins-ci.org/browse/JENKINS-31202)
Parsing memory map file is far from elegant (but works!)",True,{'THUMBS_UP': ['https://github.com/zaq32']}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,25,2016-07-10T18:15:59Z,2016-07-21T18:13:31Z,2016-07-21T18:13:36Z,MERGED,True,20001,32,89,https://github.com/Novakov,File system based on yaffs and NAND memory,19,[],https://github.com/PW-Sat2/PWSat2OBC/pull/25,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/25,"File system based on Yaffs2 (http://www.yaffs.net/)
NAND memory from STK3700 is used.
Known issues:

I don't like the idea of checking GetLastError when operation fails. Any other ideas are welcome","File system based on Yaffs2 (http://www.yaffs.net/)
NAND memory from STK3700 is used.
Known issues:

I don't like the idea of checking GetLastError when operation fails. Any other ideas are welcome",True,{'THUMBS_UP': ['https://github.com/zaq32']}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,25,2016-07-10T18:15:59Z,2016-07-21T18:13:31Z,2016-07-21T18:13:36Z,MERGED,True,20001,32,89,https://github.com/Novakov,File system based on yaffs and NAND memory,19,[],https://github.com/PW-Sat2/PWSat2OBC/pull/25,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/25#issuecomment-233432512,"File system based on Yaffs2 (http://www.yaffs.net/)
NAND memory from STK3700 is used.
Known issues:

I don't like the idea of checking GetLastError when operation fails. Any other ideas are welcome","The structure of the file system driver IMHO should be updated as right now everything beneath the file system driver is closely coupled together despite several existing interfaces.
Right now the file system driver is structured like this:
FileSystem (fs library) 
  -> yaffs (external 
    -> yaffs_os_glue (fs library)
    -> Nand Driver (fs library) 
      -> FlashNandInterface (storage library)

Via direct function calls the FileSystem main interface is tied directly to the Nand driver that is part of the fs library. Additionally the Nand driver itself is closely tied to the FlashNandInterface that is part of the storage library. And as a result both libraries have to be treated as one and the fs library cannot be used without storage library.
It would be better if the storage library existed as an interface the provides common interface for NAND/NOR flash drivers.
The Nand driver should not be part of the fs library. Instead it should be placed in the separate library along with its own dedicated Flash Driver. I am not sure though how universal the current Flash driver is (FlashNandInterface) but I don't think that it can be reused in its current form for the NOR flash memory please correct me on that if I am wrong.
The fs library should not be aware what type of memory it actually uses instead it should receive pointer to the interface that provides the low level flash capabilities.",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,26,2016-07-11T18:24:45Z,2016-07-13T16:42:18Z,2016-07-13T16:47:34Z,CLOSED,False,71,9,7,https://github.com/Novakov,[WIP] Code coverage,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/26,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/26,"This branch is based on build-update branch (#24).
Added code coverage analysis with gcov. Gcovr is used to generate HTML reports.","This branch is based on build-update branch (#24).
Added code coverage analysis with gcov. Gcovr is used to generate HTML reports.",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,27,2016-07-13T16:21:45Z,2016-11-28T19:26:55Z,2016-11-28T19:26:57Z,MERGED,True,52,80,8,https://github.com/zaq32,Add support for link time optimization.,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/27,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/27,"Add possibility to opt-in to link time optimization for Release build. It can be done by setting ENABLE_LTO cmake option to TRUE.
For the moment the lto optimized build generate some warnings in some of the external libraries, therefore the lto is not enabled by default.


This change is","Add possibility to opt-in to link time optimization for Release build. It can be done by setting ENABLE_LTO cmake option to TRUE.
For the moment the lto optimized build generate some warnings in some of the external libraries, therefore the lto is not enabled by default.


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,27,2016-07-13T16:21:45Z,2016-11-28T19:26:55Z,2016-11-28T19:26:57Z,MERGED,True,52,80,8,https://github.com/zaq32,Add support for link time optimization.,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/27,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/27#issuecomment-263334606,"Add possibility to opt-in to link time optimization for Release build. It can be done by setting ENABLE_LTO cmake option to TRUE.
For the moment the lto optimized build generate some warnings in some of the external libraries, therefore the lto is not enabled by default.


This change is","I rebased this branch on top of master and fixed build errors.
LTO is enabled on CI builds.
Difference in final binary size is huge (118KB vs 73KB with LTO)",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,27,2016-07-13T16:21:45Z,2016-11-28T19:26:55Z,2016-11-28T19:26:57Z,MERGED,True,52,80,8,https://github.com/zaq32,Add support for link time optimization.,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/27,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/27#issuecomment-263367141,"Add possibility to opt-in to link time optimization for Release build. It can be done by setting ENABLE_LTO cmake option to TRUE.
For the moment the lto optimized build generate some warnings in some of the external libraries, therefore the lto is not enabled by default.


This change is",This is why I have prepared this PR in the beginning.,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,27,2016-07-13T16:21:45Z,2016-11-28T19:26:55Z,2016-11-28T19:26:57Z,MERGED,True,52,80,8,https://github.com/zaq32,Add support for link time optimization.,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/27,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/27#issuecomment-263368191,"Add possibility to opt-in to link time optimization for Release build. It can be done by setting ENABLE_LTO cmake option to TRUE.
For the moment the lto optimized build generate some warnings in some of the external libraries, therefore the lto is not enabled by default.


This change is","Reviewed 3 of 4 files at r1, 5 of 5 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,28,2016-07-13T16:41:51Z,2016-07-13T16:41:59Z,2016-07-13T16:47:34Z,MERGED,True,71,9,7,https://github.com/Novakov,Code coverage,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/28,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/28,,,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,29,2016-07-18T21:03:27Z,2016-07-19T05:40:30Z,2016-07-19T05:41:11Z,CLOSED,False,8,8,1,https://github.com/afronski,Small build fix for Linux environments,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/29,https://github.com/afronski,1,https://github.com/PW-Sat2/PWSat2OBC/pull/29,Fixing small culprit in the CMake for environments where paths are case sensitive. ;),Fixing small culprit in the CMake for environments where paths are case sensitive. ;),True,{'LAUGH': ['https://github.com/zbyszk0']}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,29,2016-07-18T21:03:27Z,2016-07-19T05:40:30Z,2016-07-19T05:41:11Z,CLOSED,False,8,8,1,https://github.com/afronski,Small build fix for Linux environments,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/29,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/29#issuecomment-233537002,Fixing small culprit in the CMake for environments where paths are case sensitive. ;),The forward slash in the name of the branch is causing CI build to fail.,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,29,2016-07-18T21:03:27Z,2016-07-19T05:40:30Z,2016-07-19T05:41:11Z,CLOSED,False,8,8,1,https://github.com/afronski,Small build fix for Linux environments,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/29,https://github.com/afronski,3,https://github.com/PW-Sat2/PWSat2OBC/pull/29#issuecomment-233537240,Fixing small culprit in the CMake for environments where paths are case sensitive. ;),"I'll close it, delete branch and prepare new one without it.",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,30,2016-07-19T05:42:03Z,2016-07-19T05:48:03Z,2016-07-19T05:48:08Z,MERGED,True,8,8,1,https://github.com/afronski,Small fix for build scripts (environments with case sensitive file paths),1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/30,https://github.com/afronski,1,https://github.com/PW-Sat2/PWSat2OBC/pull/30,Same as #29.,Same as #29.,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,31,2016-08-18T06:26:06Z,2016-08-24T19:11:14Z,2016-08-25T17:44:44Z,MERGED,True,2146,172,40,https://github.com/zaq32,Simple Persistent Monotonic Timer,22,[],https://github.com/PW-Sat2/PWSat2OBC/pull/31,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/31,"Add simple persistent monotonic timer with some utilities for time management. The timer here is supposed to measure the mission time with millisecond resolution. The added timer is capable of following:

Automatically saves its state once every 15 minutes (for now) in three separate files stored on the built in flash memory.
Automatically restore its state on startup based on the state from the files stored on built in flash memory.
Publishing passing time notification once every 5s.
Capable of providing current mission time in both milliseconds & version decoded into separate milliseconds, seconds, minutes, hours & days.

Additionally there are some utilities for time manipulation.


This change is","Add simple persistent monotonic timer with some utilities for time management. The timer here is supposed to measure the mission time with millisecond resolution. The added timer is capable of following:

Automatically saves its state once every 15 minutes (for now) in three separate files stored on the built in flash memory.
Automatically restore its state on startup based on the state from the files stored on built in flash memory.
Publishing passing time notification once every 5s.
Capable of providing current mission time in both milliseconds & version decoded into separate milliseconds, seconds, minutes, hours & days.

Additionally there are some utilities for time manipulation.


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,31,2016-08-18T06:26:06Z,2016-08-24T19:11:14Z,2016-08-25T17:44:44Z,MERGED,True,2146,172,40,https://github.com/zaq32,Simple Persistent Monotonic Timer,22,[],https://github.com/PW-Sat2/PWSat2OBC/pull/31,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/31#issuecomment-240775413,"Add simple persistent monotonic timer with some utilities for time management. The timer here is supposed to measure the mission time with millisecond resolution. The added timer is capable of following:

Automatically saves its state once every 15 minutes (for now) in three separate files stored on the built in flash memory.
Automatically restore its state on startup based on the state from the files stored on built in flash memory.
Publishing passing time notification once every 5s.
Capable of providing current mission time in both milliseconds & version decoded into separate milliseconds, seconds, minutes, hours & days.

Additionally there are some utilities for time manipulation.


This change is","Reviewed 32 of 34 files at r1.
Review status: 32 of 34 files reviewed at latest revision, 7 unresolved discussions.

integration_tests/tests/test_sail.py, line 8 [r1] (raw file):

class Test_SailTest(BaseTest):
    def test_pingpong(self):
        self.system.obc.wait_to_start();

Change it to decorator (like autoCommHandling)

libs/time/CMakeLists.txt, line 12 [r1] (raw file):

add_library(${NAME} STATIC ${SOURCES})

target_link_libraries(${NAME} base fs logger)

Place each library in separate line - it is easier to merge changes later

libs/time/include/time/TimePoint.h, line 32 [r1] (raw file):

    uint16_t day;        ///< Number of days.
    uint16_t milisecond; ///< Number of milliseconds.
} TimePoint;

I don't like the idea of non canonical state. It will force to normalize it everytime it's needed. I would prefer API similar to .NET TimeSpan (https://msdn.microsoft.com/en-US/library/system.timespan(v=vs.110).aspx): object is immutable, can be created by factory functions like FromMinutes. Modification is done by functions like AddMinutes, AddTimeSpan and they make sure that TimePoint is still valid

src/main.c, line 116 [r1] (raw file):

        LOG(LOG_LEVEL_ERROR, ""Unable to initialize persistent timer. "");
    }

We need to think about seperating initialization to other file(s).  Doesn't need to be done now. Leaving note just to remember

src/openSail.c, line 63 [r1] (raw file):

    if (span >= SAILOPENTIME)
    {
        if (System.GiveSemaphore(sailContext->SemaphoreHandle) != OSResultSuccess)

I don't like idea of callbacks here. This code will execute in context of other task and, for me, it's not necessary complication - it should be enough to give semaphore to release or event bit.

unit_tests/mock/FsMock.hpp, line 1 [r1] (raw file):

#ifndef MOCK_FS_HPP

It would be nicer to have more intelligent FS mock that will mimic real file system. It could be dead-simple like array with file name and buffer so it test it will be possible to assert file contents without mocking individual file system functions

unit_tests/time/time.cpp, line 55 [r1] (raw file):

    ASSERT_FALSE(TimePointEqual(TimePointBuild(4501, 80, 200, 150, 12548), TimePointBuild(4501, 80, 202, 150, 12548)));
    ASSERT_FALSE(TimePointEqual(TimePointBuild(4501, 80, 200, 150, 12548), TimePointBuild(4501, 83, 200, 150, 12548)));
    ASSERT_FALSE(TimePointEqual(TimePointBuild(4501, 80, 200, 150, 12548), TimePointBuild(4504, 80, 200, 150, 12548)));

Maybe contraints for TimePoints allowing to write ASSERT_THAT(TimePointBuild(...), EqTimePoint(...))?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,31,2016-08-18T06:26:06Z,2016-08-24T19:11:14Z,2016-08-25T17:44:44Z,MERGED,True,2146,172,40,https://github.com/zaq32,Simple Persistent Monotonic Timer,22,[],https://github.com/PW-Sat2/PWSat2OBC/pull/31,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/31#issuecomment-241082602,"Add simple persistent monotonic timer with some utilities for time management. The timer here is supposed to measure the mission time with millisecond resolution. The added timer is capable of following:

Automatically saves its state once every 15 minutes (for now) in three separate files stored on the built in flash memory.
Automatically restore its state on startup based on the state from the files stored on built in flash memory.
Publishing passing time notification once every 5s.
Capable of providing current mission time in both milliseconds & version decoded into separate milliseconds, seconds, minutes, hours & days.

Additionally there are some utilities for time manipulation.


This change is","Reviewed 2 of 34 files at r1.
Review status: all files reviewed at latest revision, 15 unresolved discussions.

libs/time/timer.c, line 9 [r1] (raw file):

static const char* const TimeFile0 = ""TimeState.0"";
static const char* const TimeFile1 = ""TimeState.1"";
static const char* const TimeFile2 = ""TimeState.2"";

Use full path: /TimeState.0

libs/time/timer.c, line 237 [r1] (raw file):

    if (result.saveTime)
    {
        timeProvider->PersistanceTime = 0;

Should be PersistanceTime be cleared after saving it? The same question applies to NotificationTime

libs/time/timer.c, line 282 [r1] (raw file):

    if (!ReaderStatus(&reader))
    {
        LOGF(LOG_LEVEL_WARNING, ""Not enough date read from file: %s. Length: 0x%08x"", filePath, read);

date -> data

libs/time/timer.c, line 303 [r1] (raw file):

    // every value has one initial copy (its own).
    int counters[3] = {1, 1, 1};

Maybe votes will be a better name?

libs/time/timer.c, line 336 [r1] (raw file):

    {
        selectedIndex = 2;
    }

Move it to some helper function that returns index of max value

libs/time/timer.c, line 382 [r1] (raw file):

    fs->close(handle);
}

SaveToFile & ReadToFile look like nice helper functions for FileSystem. It would be nice to move them to fs library

libs/time/timer.c, line 410 [r1] (raw file):

        SaveToFile(timeProvider->FileSystemObject, TimeFile1, buffer, length);
        SaveToFile(timeProvider->FileSystemObject, TimeFile2, buffer, length);
    }

Error while saving time requires at least some attention at this level. Even flag timeSaved here will be better. Now any errors are visible only in logs.

libs/time/include/time/timer.h, line 64 [r1] (raw file):

 * likely correct value. In case when all of the values are different the smallest one is selected as the correct one.
 */
struct TimeProvider

Why without typedef?

libs/time/include/time/timer.h, line 158 [r1] (raw file):

 * @brief This procedure can be used to move timer state forward by specified amount.
 *
 * Be aware that moving time forward far enough far enough may trigger timer notification &

(far enough)*2

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,31,2016-08-18T06:26:06Z,2016-08-24T19:11:14Z,2016-08-25T17:44:44Z,MERGED,True,2146,172,40,https://github.com/zaq32,Simple Persistent Monotonic Timer,22,[],https://github.com/PW-Sat2/PWSat2OBC/pull/31,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/31#issuecomment-241204884,"Add simple persistent monotonic timer with some utilities for time management. The timer here is supposed to measure the mission time with millisecond resolution. The added timer is capable of following:

Automatically saves its state once every 15 minutes (for now) in three separate files stored on the built in flash memory.
Automatically restore its state on startup based on the state from the files stored on built in flash memory.
Publishing passing time notification once every 5s.
Capable of providing current mission time in both milliseconds & version decoded into separate milliseconds, seconds, minutes, hours & days.

Additionally there are some utilities for time manipulation.


This change is","Review status: 18 of 39 files reviewed at latest revision, 10 unresolved discussions.

libs/time/include/time/TimePoint.h, line 32 [r1] (raw file):

Previously, Novakov (Maciej T. Nowak) wrote

I don't like the idea of non canonical state. It will force to normalize it everytime it's needed. I would prefer API similar to .NET TimeSpan (https://msdn.microsoft.com/en-US/library/system.timespan(v=vs.110).aspx): object is immutable, can be created by factory functions like FromMinutes. Modification is done by functions like AddMinutes, AddTimeSpan and they make sure that TimePoint is still valid

Fixed


Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,31,2016-08-18T06:26:06Z,2016-08-24T19:11:14Z,2016-08-25T17:44:44Z,MERGED,True,2146,172,40,https://github.com/zaq32,Simple Persistent Monotonic Timer,22,[],https://github.com/PW-Sat2/PWSat2OBC/pull/31,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/31#issuecomment-241204937,"Add simple persistent monotonic timer with some utilities for time management. The timer here is supposed to measure the mission time with millisecond resolution. The added timer is capable of following:

Automatically saves its state once every 15 minutes (for now) in three separate files stored on the built in flash memory.
Automatically restore its state on startup based on the state from the files stored on built in flash memory.
Publishing passing time notification once every 5s.
Capable of providing current mission time in both milliseconds & version decoded into separate milliseconds, seconds, minutes, hours & days.

Additionally there are some utilities for time manipulation.


This change is","Reviewed 8 of 20 files at r2.
Review status: 26 of 39 files reviewed at latest revision, 10 unresolved discussions.

libs/time/include/time/TimePoint.h, line 32 [r1] (raw file):

Previously, zaq32 (ukasz ak) wrote

Fixed

OK


Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,31,2016-08-18T06:26:06Z,2016-08-24T19:11:14Z,2016-08-25T17:44:44Z,MERGED,True,2146,172,40,https://github.com/zaq32,Simple Persistent Monotonic Timer,22,[],https://github.com/PW-Sat2/PWSat2OBC/pull/31,https://github.com/zaq32,6,https://github.com/PW-Sat2/PWSat2OBC/pull/31#issuecomment-241205451,"Add simple persistent monotonic timer with some utilities for time management. The timer here is supposed to measure the mission time with millisecond resolution. The added timer is capable of following:

Automatically saves its state once every 15 minutes (for now) in three separate files stored on the built in flash memory.
Automatically restore its state on startup based on the state from the files stored on built in flash memory.
Publishing passing time notification once every 5s.
Capable of providing current mission time in both milliseconds & version decoded into separate milliseconds, seconds, minutes, hours & days.

Additionally there are some utilities for time manipulation.


This change is","Review status: 25 of 39 files reviewed at latest revision, 8 unresolved discussions.

integration_tests/tests/test_sail.py, line 8 [r1] (raw file):

Previously, Novakov (Maciej T. Nowak) wrote

Change it to decorator (like autoCommHandling)

Fixed


libs/time/CMakeLists.txt, line 12 [r1] (raw file):

Previously, Novakov (Maciej T. Nowak) wrote

Place each library in separate line - it is easier to merge changes later

Fixed


libs/time/timer.c, line 237 [r1] (raw file):

Previously, Novakov (Maciej T. Nowak) wrote

Should be PersistanceTime be cleared after saving it? The same question applies to NotificationTime

Unfortunately it is not that simple.  In order to do it this way Ii would have to acquire two semaphores:
- one for notification
- one for timer state

which would be dangerous in this case.

libs/time/timer.c, line 303 [r1] (raw file):

Previously, Novakov (Maciej T. Nowak) wrote

Maybe votes will be a better name?

Fixed


libs/time/timer.c, line 382 [r1] (raw file):

Previously, Novakov (Maciej T. Nowak) wrote

SaveToFile & ReadToFile look like nice helper functions for FileSystem. It would be nice to move them to fs library

Fixed


unit_tests/mock/FsMock.hpp, line 1 [r1] (raw file):

Previously, Novakov (Maciej T. Nowak) wrote

It would be nicer to have more intelligent FS mock that will mimic real file system. It could be dead-simple like array with file name and buffer so it test it will be possible to assert file contents without mocking individual file system functions

Moved to separate task: https://trello.com/c/EHBre8Ci/73-ut-prepare-inteligent-file-system-mock


Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,31,2016-08-18T06:26:06Z,2016-08-24T19:11:14Z,2016-08-25T17:44:44Z,MERGED,True,2146,172,40,https://github.com/zaq32,Simple Persistent Monotonic Timer,22,[],https://github.com/PW-Sat2/PWSat2OBC/pull/31,https://github.com/Novakov,7,https://github.com/PW-Sat2/PWSat2OBC/pull/31#issuecomment-241205841,"Add simple persistent monotonic timer with some utilities for time management. The timer here is supposed to measure the mission time with millisecond resolution. The added timer is capable of following:

Automatically saves its state once every 15 minutes (for now) in three separate files stored on the built in flash memory.
Automatically restore its state on startup based on the state from the files stored on built in flash memory.
Publishing passing time notification once every 5s.
Capable of providing current mission time in both milliseconds & version decoded into separate milliseconds, seconds, minutes, hours & days.

Additionally there are some utilities for time manipulation.


This change is","Reviewed 13 of 20 files at r2.
Review status: 38 of 39 files reviewed at latest revision, 5 unresolved discussions.

integration_tests/tests/test_sail.py, line 8 [r1] (raw file):

Previously, zaq32 (ukasz ak) wrote

Fixed

Not fixed


libs/fs/Include/fs/fs.h, line 114 [r2] (raw file):

writing serialized state

Copy-paste?

libs/time/timer.c, line 9 [r1] (raw file):

Previously, Novakov (Maciej T. Nowak) wrote

Use full path: /TimeState.0

OK


Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,31,2016-08-18T06:26:06Z,2016-08-24T19:11:14Z,2016-08-25T17:44:44Z,MERGED,True,2146,172,40,https://github.com/zaq32,Simple Persistent Monotonic Timer,22,[],https://github.com/PW-Sat2/PWSat2OBC/pull/31,https://github.com/Novakov,8,https://github.com/PW-Sat2/PWSat2OBC/pull/31#issuecomment-241205929,"Add simple persistent monotonic timer with some utilities for time management. The timer here is supposed to measure the mission time with millisecond resolution. The added timer is capable of following:

Automatically saves its state once every 15 minutes (for now) in three separate files stored on the built in flash memory.
Automatically restore its state on startup based on the state from the files stored on built in flash memory.
Publishing passing time notification once every 5s.
Capable of providing current mission time in both milliseconds & version decoded into separate milliseconds, seconds, minutes, hours & days.

Additionally there are some utilities for time manipulation.


This change is","Reviewed 1 of 34 files at r1.
Review status: all files reviewed at latest revision, 3 unresolved discussions.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,31,2016-08-18T06:26:06Z,2016-08-24T19:11:14Z,2016-08-25T17:44:44Z,MERGED,True,2146,172,40,https://github.com/zaq32,Simple Persistent Monotonic Timer,22,[],https://github.com/PW-Sat2/PWSat2OBC/pull/31,https://github.com/zaq32,9,https://github.com/PW-Sat2/PWSat2OBC/pull/31#issuecomment-241206656,"Add simple persistent monotonic timer with some utilities for time management. The timer here is supposed to measure the mission time with millisecond resolution. The added timer is capable of following:

Automatically saves its state once every 15 minutes (for now) in three separate files stored on the built in flash memory.
Automatically restore its state on startup based on the state from the files stored on built in flash memory.
Publishing passing time notification once every 5s.
Capable of providing current mission time in both milliseconds & version decoded into separate milliseconds, seconds, minutes, hours & days.

Additionally there are some utilities for time manipulation.


This change is","Review status: 37 of 40 files reviewed at latest revision, 3 unresolved discussions.

integration_tests/tests/test_sail.py, line 8 [r1] (raw file):

Previously, Novakov (Maciej T. Nowak) wrote

Not fixed

try now 


Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,31,2016-08-18T06:26:06Z,2016-08-24T19:11:14Z,2016-08-25T17:44:44Z,MERGED,True,2146,172,40,https://github.com/zaq32,Simple Persistent Monotonic Timer,22,[],https://github.com/PW-Sat2/PWSat2OBC/pull/31,https://github.com/Novakov,10,https://github.com/PW-Sat2/PWSat2OBC/pull/31#issuecomment-241206746,"Add simple persistent monotonic timer with some utilities for time management. The timer here is supposed to measure the mission time with millisecond resolution. The added timer is capable of following:

Automatically saves its state once every 15 minutes (for now) in three separate files stored on the built in flash memory.
Automatically restore its state on startup based on the state from the files stored on built in flash memory.
Publishing passing time notification once every 5s.
Capable of providing current mission time in both milliseconds & version decoded into separate milliseconds, seconds, minutes, hours & days.

Additionally there are some utilities for time manipulation.


This change is","Reviewed 3 of 3 files at r3.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

integration_tests/tests/test_sail.py, line 8 [r1] (raw file):

Previously, zaq32 (ukasz ak) wrote

try now

OK


Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,31,2016-08-18T06:26:06Z,2016-08-24T19:11:14Z,2016-08-25T17:44:44Z,MERGED,True,2146,172,40,https://github.com/zaq32,Simple Persistent Monotonic Timer,22,[],https://github.com/PW-Sat2/PWSat2OBC/pull/31,https://github.com/zaq32,11,https://github.com/PW-Sat2/PWSat2OBC/pull/31#issuecomment-242125529,"Add simple persistent monotonic timer with some utilities for time management. The timer here is supposed to measure the mission time with millisecond resolution. The added timer is capable of following:

Automatically saves its state once every 15 minutes (for now) in three separate files stored on the built in flash memory.
Automatically restore its state on startup based on the state from the files stored on built in flash memory.
Publishing passing time notification once every 5s.
Capable of providing current mission time in both milliseconds & version decoded into separate milliseconds, seconds, minutes, hours & days.

Additionally there are some utilities for time manipulation.


This change is","Review status: 37 of 40 files reviewed at latest revision, 2 unresolved discussions.

libs/fs/Include/fs/fs.h, line 114 [r2] (raw file):

Previously, Novakov (Maciej T. Nowak) wrote


writing serialized state

Copy-paste?

Fixed.


libs/time/timer.c, line 410 [r1] (raw file):

Previously, Novakov (Maciej T. Nowak) wrote

Error while saving time requires at least some attention at this level. Even flag timeSaved here will be better. Now any errors are visible only in logs.

Fixed


Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,31,2016-08-18T06:26:06Z,2016-08-24T19:11:14Z,2016-08-25T17:44:44Z,MERGED,True,2146,172,40,https://github.com/zaq32,Simple Persistent Monotonic Timer,22,[],https://github.com/PW-Sat2/PWSat2OBC/pull/31,https://github.com/Novakov,12,https://github.com/PW-Sat2/PWSat2OBC/pull/31#issuecomment-242127417,"Add simple persistent monotonic timer with some utilities for time management. The timer here is supposed to measure the mission time with millisecond resolution. The added timer is capable of following:

Automatically saves its state once every 15 minutes (for now) in three separate files stored on the built in flash memory.
Automatically restore its state on startup based on the state from the files stored on built in flash memory.
Publishing passing time notification once every 5s.
Capable of providing current mission time in both milliseconds & version decoded into separate milliseconds, seconds, minutes, hours & days.

Additionally there are some utilities for time manipulation.


This change is","Reviewed 3 of 3 files at r4.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,31,2016-08-18T06:26:06Z,2016-08-24T19:11:14Z,2016-08-25T17:44:44Z,MERGED,True,2146,172,40,https://github.com/zaq32,Simple Persistent Monotonic Timer,22,[],https://github.com/PW-Sat2/PWSat2OBC/pull/31,https://github.com/Novakov,13,https://github.com/PW-Sat2/PWSat2OBC/pull/31#issuecomment-242176027,"Add simple persistent monotonic timer with some utilities for time management. The timer here is supposed to measure the mission time with millisecond resolution. The added timer is capable of following:

Automatically saves its state once every 15 minutes (for now) in three separate files stored on the built in flash memory.
Automatically restore its state on startup based on the state from the files stored on built in flash memory.
Publishing passing time notification once every 5s.
Capable of providing current mission time in both milliseconds & version decoded into separate milliseconds, seconds, minutes, hours & days.

Additionally there are some utilities for time manipulation.


This change is","Reviewed 1 of 1 files at r5.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,31,2016-08-18T06:26:06Z,2016-08-24T19:11:14Z,2016-08-25T17:44:44Z,MERGED,True,2146,172,40,https://github.com/zaq32,Simple Persistent Monotonic Timer,22,[],https://github.com/PW-Sat2/PWSat2OBC/pull/31,https://github.com/Novakov,14,https://github.com/PW-Sat2/PWSat2OBC/pull/31#issuecomment-242478273,"Add simple persistent monotonic timer with some utilities for time management. The timer here is supposed to measure the mission time with millisecond resolution. The added timer is capable of following:

Automatically saves its state once every 15 minutes (for now) in three separate files stored on the built in flash memory.
Automatically restore its state on startup based on the state from the files stored on built in flash memory.
Publishing passing time notification once every 5s.
Capable of providing current mission time in both milliseconds & version decoded into separate milliseconds, seconds, minutes, hours & days.

Additionally there are some utilities for time manipulation.


This change is",[Time] Some abstraction of time,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,32,2016-08-20T10:24:23Z,2016-09-07T07:18:07Z,2016-09-07T07:18:11Z,MERGED,True,282,150,21,https://github.com/Novakov,Use lueart over DMA + better terminal handling,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/32,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/32,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,32,2016-08-20T10:24:23Z,2016-09-07T07:18:07Z,2016-09-07T07:18:11Z,MERGED,True,282,150,21,https://github.com/Novakov,Use lueart over DMA + better terminal handling,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/32,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/32#issuecomment-242127527,This change is,"Reviewed 19 of 19 files at r1.
Review status: 12 of 20 files reviewed at latest revision, 3 unresolved discussions.

libs/drivers/leuart/Include/leuart/leuart.h, line 7 [r2] (raw file):

#include ""line_io.h""

void LeuartLineIOInit(LineIO* io);

Missing documentation.

platforms/DevBoard/Include/FreeRTOSConfig.h, line 85 [r2] (raw file):

 *----------------------------------------------------------*/

extern void assertFailed(const char* source, const char* file, uint16_t line);

Missing documentation.

platforms/DevBoard/Include/FreeRTOSConfig.h, line 87 [r2] (raw file):

extern void assertFailed(const char* source, const char* file, uint16_t line);

#define configASSERT(x)                                                                                                                    \

Provide empty version for release builds.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,32,2016-08-20T10:24:23Z,2016-09-07T07:18:07Z,2016-09-07T07:18:11Z,MERGED,True,282,150,21,https://github.com/Novakov,Use lueart over DMA + better terminal handling,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/32,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/32#issuecomment-244291675,This change is,"Reviewed 8 of 8 files at r2.
Review status: all files reviewed at latest revision, 3 unresolved discussions, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,32,2016-08-20T10:24:23Z,2016-09-07T07:18:07Z,2016-09-07T07:18:11Z,MERGED,True,282,150,21,https://github.com/Novakov,Use lueart over DMA + better terminal handling,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/32,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/32#issuecomment-244594956,This change is,"Review status: 8 of 20 files reviewed at latest revision, 3 unresolved discussions, some commit checks failed.

libs/drivers/leuart/Include/leuart/leuart.h, line 7 [r2] (raw file):

Previously, zaq32 (ukasz ak) wrote

Missing documentation.

Done.


platforms/DevBoard/Include/FreeRTOSConfig.h, line 85 [r2] (raw file):

Previously, zaq32 (ukasz ak) wrote

Missing documentation.

Done.


platforms/DevBoard/Include/FreeRTOSConfig.h, line 87 [r2] (raw file):

Previously, zaq32 (ukasz ak) wrote

Provide empty version for release builds.

Done.


Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,32,2016-08-20T10:24:23Z,2016-09-07T07:18:07Z,2016-09-07T07:18:11Z,MERGED,True,282,150,21,https://github.com/Novakov,Use lueart over DMA + better terminal handling,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/32,https://github.com/decu69,5,https://github.com/PW-Sat2/PWSat2OBC/pull/32#issuecomment-244788570,This change is,"Reviewed 1 of 19 files at r1, 13 of 13 files at r3.
Review status: all files reviewed at latest revision, 4 unresolved discussions.

platforms/DevBoard/Include/io_map.h, line 16 [r3] (raw file):

#define LEUART0_RX 5
#define LEUART0_LOCATION LEUART_ROUTE_LOCATION_LOC0
#define LEUART0_BAUDRATE 2400

is there any reason for changing this baudrate?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,32,2016-08-20T10:24:23Z,2016-09-07T07:18:07Z,2016-09-07T07:18:11Z,MERGED,True,282,150,21,https://github.com/Novakov,Use lueart over DMA + better terminal handling,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/32,https://github.com/zaq32,6,https://github.com/PW-Sat2/PWSat2OBC/pull/32#issuecomment-244789173,This change is,"Reviewed 6 of 13 files at r3.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,32,2016-08-20T10:24:23Z,2016-09-07T07:18:07Z,2016-09-07T07:18:11Z,MERGED,True,282,150,21,https://github.com/Novakov,Use lueart over DMA + better terminal handling,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/32,https://github.com/decu69,7,https://github.com/PW-Sat2/PWSat2OBC/pull/32#issuecomment-244789673,This change is,"Reviewed 3 of 19 files at r1, 4 of 8 files at r2.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,32,2016-08-20T10:24:23Z,2016-09-07T07:18:07Z,2016-09-07T07:18:11Z,MERGED,True,282,150,21,https://github.com/Novakov,Use lueart over DMA + better terminal handling,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/32,https://github.com/Novakov,8,https://github.com/PW-Sat2/PWSat2OBC/pull/32#issuecomment-244808011,This change is,"Review status: all files reviewed at latest revision, 1 unresolved discussion.

platforms/DevBoard/Include/io_map.h, line 16 [r3] (raw file):

Previously, decu69 wrote

is there any reason for changing this baudrate?

9600 does not work. Possibly as a result of error in clock generation. See EFM32GG Reference Manual, page 500, table 19.2


Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,32,2016-08-20T10:24:23Z,2016-09-07T07:18:07Z,2016-09-07T07:18:11Z,MERGED,True,282,150,21,https://github.com/Novakov,Use lueart over DMA + better terminal handling,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/32,https://github.com/zaq32,9,https://github.com/PW-Sat2/PWSat2OBC/pull/32#issuecomment-245195966,This change is,"Review status: all files reviewed at latest revision, 1 unresolved discussion.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,33,2016-08-24T15:43:18Z,2016-09-02T06:10:26Z,2016-09-02T06:10:28Z,MERGED,True,2010,228,56,https://github.com/Novakov,System state management,13,[],https://github.com/PW-Sat2/PWSat2OBC/pull/33,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/33,"Proof-of-concept of system state managements and making decisions about next actions.
Based on opening sail and ADCS.
Trello: https://trello.com/c/rZhDyhTQ/56-draft-of-system-state-management


This change is","Proof-of-concept of system state managements and making decisions about next actions.
Based on opening sail and ADCS.
Trello: https://trello.com/c/rZhDyhTQ/56-draft-of-system-state-management


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,33,2016-08-24T15:43:18Z,2016-09-02T06:10:26Z,2016-09-02T06:10:28Z,MERGED,True,2010,228,56,https://github.com/Novakov,System state management,13,[],https://github.com/PW-Sat2/PWSat2OBC/pull/33,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/33#issuecomment-242136142,"Proof-of-concept of system state managements and making decisions about next actions.
Based on opening sail and ADCS.
Trello: https://trello.com/c/rZhDyhTQ/56-draft-of-system-state-management


This change is","Review status: 0 of 53 files reviewed at latest revision, 4 unresolved discussions, some commit checks failed.

integration_tests/system/system.py, line 20 [r1] (raw file):

        self.obc = OBC(SerialPortTerminal(obc_com))
        print ""a""

what is the point of this?

libs/drivers/comm/Include/comm/comm.h, line 85 [r1] (raw file):

    /** @brief Frame content. */
    uint8_t Contents[COMM_MAX_FRAME_CONTENTS_SIZE];
} CommFrame2;

what is the purpose od this type?

libs/mission/adcs.c, line 61 [r1] (raw file):

    descriptors->Update.Name = ""ADCS Update"";
    descriptors->Update.Param = adcs;
    descriptors->Update.UpdateProc = ADCSUpdate;

Missing initializer for Condition

libs/state/Include/state/struct.h, line 14 [r1] (raw file):

/**
 * @defgroup StateDef Satellite state definition
 * aa

??

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,33,2016-08-24T15:43:18Z,2016-09-02T06:10:26Z,2016-09-02T06:10:28Z,MERGED,True,2010,228,56,https://github.com/Novakov,System state management,13,[],https://github.com/PW-Sat2/PWSat2OBC/pull/33,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/33#issuecomment-242171518,"Proof-of-concept of system state managements and making decisions about next actions.
Based on opening sail and ADCS.
Trello: https://trello.com/c/rZhDyhTQ/56-draft-of-system-state-management


This change is","Review status: 0 of 53 files reviewed at latest revision, 4 unresolved discussions, some commit checks failed.

libs/mission/adcs.c, line 61 [r1] (raw file):

Previously, zaq32 (ukasz ak) wrote

Missing initializer for Condition

It's UpdateDescriptor. Only Actions have conditions


Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,33,2016-08-24T15:43:18Z,2016-09-02T06:10:26Z,2016-09-02T06:10:28Z,MERGED,True,2010,228,56,https://github.com/Novakov,System state management,13,[],https://github.com/PW-Sat2/PWSat2OBC/pull/33,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/33#issuecomment-242478108,"Proof-of-concept of system state managements and making decisions about next actions.
Based on opening sail and ADCS.
Trello: https://trello.com/c/rZhDyhTQ/56-draft-of-system-state-management


This change is",Draft of system state management,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,33,2016-08-24T15:43:18Z,2016-09-02T06:10:26Z,2016-09-02T06:10:28Z,MERGED,True,2010,228,56,https://github.com/Novakov,System state management,13,[],https://github.com/PW-Sat2/PWSat2OBC/pull/33,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/33#issuecomment-243664898,"Proof-of-concept of system state managements and making decisions about next actions.
Based on opening sail and ADCS.
Trello: https://trello.com/c/rZhDyhTQ/56-draft-of-system-state-management


This change is","There are build warnings that should be fixed as we target clean build logs:
C:\Jenkins\jobs\OBC\branches\mission-plan\workspace\source\libs\mission\sail.c: In function 'OpenSail':
C:\Jenkins\jobs\OBC\branches\mission-plan\workspace\source\libs\mission\sail.c:40:5: warning: implicit declaration of function 'EpsOpenSail' [-Wimplicit-function-declaration]
EpsOpenSail();
C:\Jenkins\jobs\OBC\branches\mission-plan\workspace\source\unit_tests\MissionPlan\DeployAntennaActionTest.cpp:81:46: warning: ISO C99 requires rest arguments to be used
RC_ASSERT_FALSE(state.AntennaDeployed);
rapid check also generates some warnings . We have to find a way either to fix or suppress them

Review status: 0 of 56 files reviewed at latest revision, 13 unresolved discussions.

libs/external/rapidcheck/CMakeLists.txt, line 6 [r2] (raw file):

ExternalProject_Add(rapidcheck_source
  GIT_REPOSITORY https://github.com/Novakov/rapidcheck.git

shouldn't this be placed under in pwsat project?

libs/mission/Include/mission/mission.h, line 10 [r2] (raw file):

/**
 * @defgroup Mission Mission state
 * @{}

unclosed group.

libs/state/Include/state/state.h, line 14 [r2] (raw file):

/**
 * @defgroup State Satellite state management

Can you expand on that? Provide some design rationale usage examples,  expected task granularity, known issues & limitations?

src/obc.h, line 28 [r2] (raw file):

    atomic_bool initialized;

    ADCSContext adcs;

Missing documentation.

unit_tests/gmock-extensions.h, line 1 [r2] (raw file):

#ifndef UNIT_TESTS_GMOCK_EXTENSIONS_H_

Unused?

unit_tests/MissionPlan/MissionTestHelpers.h, line 6 [r2] (raw file):

#include <functional>
#include <utility>
#include ""gmock/gmock.h""

unused header

unit_tests/MissionPlan/MissionTestHelpers.h, line 7 [r2] (raw file):

#include <utility>
#include ""gmock/gmock.h""
#include ""gmock-extensions.h""

unused header

unit_tests/MissionPlan/MissionTestHelpers.h, line 12 [r2] (raw file):

#include ""system.h""

using testing::_;

dont ever put using statements in header files.

unit_tests/MissionPlan/MissionTestHelpers.h, line 13 [r2] (raw file):

using testing::_;
using testing::AtLeast;

dont ever put using statements in header files.

unit_tests/MissionPlan/MissionTestHelpers.h, line 71 [r2] (raw file):

};

class SystemAction

This class look like attempt to build mocked action. you can  used google mock for that.

unit_tests/MissionPlan/MissionTestHelpers.h, line 73 [r2] (raw file):

class SystemAction
{
  private:

whenever i look at the class i am more interested in in its interface instead of  implementation details. Therefore private elements should be last not first, and fields should be defined after the methods.

unit_tests/MissionPlan/MissionTestHelpers.h, line 74 [r2] (raw file):

{
  private:
    const char* name;

unused member.

unit_tests/time/TimeSpan.hpp, line 18 [r2] (raw file):

inline bool operator>(const TimePoint& left, const TimePoint& right)
{
    return !TimePointLessThan(left, right);

Incorrect.
What negation of < operator is >= not > .
Besides why do you need operator >? All that is really need is < and == .

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,33,2016-08-24T15:43:18Z,2016-09-02T06:10:26Z,2016-09-02T06:10:28Z,MERGED,True,2010,228,56,https://github.com/Novakov,System state management,13,[],https://github.com/PW-Sat2/PWSat2OBC/pull/33,https://github.com/zaq32,6,https://github.com/PW-Sat2/PWSat2OBC/pull/33#issuecomment-243668365,"Proof-of-concept of system state managements and making decisions about next actions.
Based on opening sail and ADCS.
Trello: https://trello.com/c/rZhDyhTQ/56-draft-of-system-state-management


This change is","There are also some doxygen issues:
workspace/source/src/mission.h:21: warning: Member Sail (variable) of class MissionState is not documented.
workspace/source/src/mission.h:23: warning: Member ADCS (variable) of class MissionState is not documented.
workspace/source/src/mission.h:25: warning: Member UpdateTime (variable) of class MissionState is not documented.
workspace/source/src/mission.h:27: warning: Member TerminalCommandUpdate (variable) of class MissionState is not documented.
workspace/source/src/mission.c:19: warning: Member update (variable) of class ModeDescriptor is not documented.
workspace/source/src/mission.c:20: warning: Member updateCount (variable) of class ModeDescriptor is not documented.
workspace/source/src/mission.c:21: warning: Member verify (variable) of class ModeDescriptor is not documented.
workspace/source/src/mission.c:22: warning: Member verifyResult (variable) of class ModeDescriptor is not documented.
workspace/source/src/mission.c:23: warning: Member verifyCount (variable) of class ModeDescriptor is not documented.
workspace/source/src/mission.c:24: warning: Member actions (variable) of class ModeDescriptor is not documented.
workspace/source/src/mission.c:25: warning: Member actionCount (variable) of class ModeDescriptor is not documented.
workspace/source/src/mission.c:26: warning: Member runnableActions (variable) of class ModeDescriptor is not documented.

Review status: 0 of 56 files reviewed at latest revision, 13 unresolved discussions.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,33,2016-08-24T15:43:18Z,2016-09-02T06:10:26Z,2016-09-02T06:10:28Z,MERGED,True,2010,228,56,https://github.com/Novakov,System state management,13,[],https://github.com/PW-Sat2/PWSat2OBC/pull/33,https://github.com/Novakov,7,https://github.com/PW-Sat2/PWSat2OBC/pull/33#issuecomment-244180237,"Proof-of-concept of system state managements and making decisions about next actions.
Based on opening sail and ADCS.
Trello: https://trello.com/c/rZhDyhTQ/56-draft-of-system-state-management


This change is","Review status: 0 of 56 files reviewed at latest revision, 13 unresolved discussions, all commit checks successful.

libs/external/rapidcheck/CMakeLists.txt, line 6 [r2] (raw file):

Previously, zaq32 (ukasz ak) wrote

shouldn't this be placed under in pwsat project?

Done.


libs/mission/Include/mission/mission.h, line 10 [r2] (raw file):

Previously, zaq32 (ukasz ak) wrote

unclosed group.

Mission group is empty by purpose. It defines root group for all other headers in this lib.


libs/state/Include/state/state.h, line 14 [r2] (raw file):

Previously, zaq32 (ukasz ak) wrote

Can you expand on that? Provide some design rationale usage examples,  expected task granularity, known issues & limitations?

Done.


src/obc.h, line 28 [r2] (raw file):

Previously, zaq32 (ukasz ak) wrote

Missing documentation.

Done.


unit_tests/gmock-extensions.h, line 1 [r2] (raw file):

Previously, zaq32 (ukasz ak) wrote

Unused?

Done.


unit_tests/MissionPlan/MissionTestHelpers.h, line 7 [r2] (raw file):

Previously, zaq32 (ukasz ak) wrote

unused header

Done.


unit_tests/MissionPlan/MissionTestHelpers.h, line 12 [r2] (raw file):

Previously, zaq32 (ukasz ak) wrote

dont ever put using statements in header files.

Done.


unit_tests/MissionPlan/MissionTestHelpers.h, line 13 [r2] (raw file):

Previously, zaq32 (ukasz ak) wrote

dont ever put using statements in header files.

Done.


unit_tests/MissionPlan/MissionTestHelpers.h, line 73 [r2] (raw file):

Previously, zaq32 (ukasz ak) wrote

whenever i look at the class i am more interested in in its interface instead of  implementation details. Therefore private elements should be last not first, and fields should be defined after the methods.

Done.


unit_tests/MissionPlan/MissionTestHelpers.h, line 74 [r2] (raw file):

Previously, zaq32 (ukasz ak) wrote

unused member.

It's passed to `SystemActionDescriptor`


unit_tests/time/TimeSpan.hpp, line 18 [r2] (raw file):

Previously, zaq32 (ukasz ak) wrote

Incorrect.
What negation of < operator is >= not > .
Besides why do you need operator >? All that is really need is < and == .

Done.


Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,33,2016-08-24T15:43:18Z,2016-09-02T06:10:26Z,2016-09-02T06:10:28Z,MERGED,True,2010,228,56,https://github.com/Novakov,System state management,13,[],https://github.com/PW-Sat2/PWSat2OBC/pull/33,https://github.com/zaq32,8,https://github.com/PW-Sat2/PWSat2OBC/pull/33#issuecomment-244291366,"Proof-of-concept of system state managements and making decisions about next actions.
Based on opening sail and ADCS.
Trello: https://trello.com/c/rZhDyhTQ/56-draft-of-system-state-management


This change is","Reviewed 24 of 55 files at r1, 17 of 25 files at r2, 18 of 18 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,34,2016-08-25T17:29:49Z,2016-08-25T18:54:46Z,2016-08-26T05:37:36Z,MERGED,True,2,0,1,https://github.com/Novakov,Enable EM1 in idle hook,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/34,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/34,"Enter Energy Mode 1 in FreeRTOS idle hook.
Average current during integration tests:

Without Energy Mode: 5,24mA
With EM1: 3,99mA

It's hard to get better comparision as it's not so easy to automate gathering measurments


This change is","Enter Energy Mode 1 in FreeRTOS idle hook.
Average current during integration tests:

Without Energy Mode: 5,24mA
With EM1: 3,99mA

It's hard to get better comparision as it's not so easy to automate gathering measurments


This change is",True,{'THUMBS_UP': ['https://github.com/zaq32']}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,34,2016-08-25T17:29:49Z,2016-08-25T18:54:46Z,2016-08-26T05:37:36Z,MERGED,True,2,0,1,https://github.com/Novakov,Enable EM1 in idle hook,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/34,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/34#issuecomment-242499621,"Enter Energy Mode 1 in FreeRTOS idle hook.
Average current during integration tests:

Without Energy Mode: 5,24mA
With EM1: 3,99mA

It's hard to get better comparision as it's not so easy to automate gathering measurments


This change is","Reviewed 1 of 1 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,34,2016-08-25T17:29:49Z,2016-08-25T18:54:46Z,2016-08-26T05:37:36Z,MERGED,True,2,0,1,https://github.com/Novakov,Enable EM1 in idle hook,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/34,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/34#issuecomment-242634872,"Enter Energy Mode 1 in FreeRTOS idle hook.
Average current during integration tests:

Without Energy Mode: 5,24mA
With EM1: 3,99mA

It's hard to get better comparision as it's not so easy to automate gathering measurments


This change is",[RND] Standby,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,35,2016-08-29T05:48:50Z,2016-08-30T19:13:43Z,2016-08-30T19:13:47Z,MERGED,True,525,317,14,https://github.com/zaq32,Much more strongly typed (and usable) file system interface.,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/35,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/35,"From now on all file system procedures receive pointer to FileSystem object as their first parameter to facilitate building abstraction layer over file system driver and allow much easier file system mocking,
Separate operation status from context information returned by the

open,
read,
write
openDirectory
procedures. From now on they returned dedicated types with separatied operation status (OSResult) and context information (i.e. fileHandle, number of bytes transfered) instead of pure ints,


Migrate from pure int return values to OSResults,
Map most of the errno error codes to OSResult enumerator,
Update interface of open file procedure to:

separate file access mode (r, w, rw), from file opening mode,
drop the mode parameter that was supposed to be hard coded and will most likely never be changed.
introduce explicit enumerators for file access mode & file opening modes


Update FsMock to support new file system interface.
Fix doxygen issues.



This change is","From now on all file system procedures receive pointer to FileSystem object as their first parameter to facilitate building abstraction layer over file system driver and allow much easier file system mocking,
Separate operation status from context information returned by the

open,
read,
write
openDirectory
procedures. From now on they returned dedicated types with separatied operation status (OSResult) and context information (i.e. fileHandle, number of bytes transfered) instead of pure ints,


Migrate from pure int return values to OSResults,
Map most of the errno error codes to OSResult enumerator,
Update interface of open file procedure to:

separate file access mode (r, w, rw), from file opening mode,
drop the mode parameter that was supposed to be hard coded and will most likely never be changed.
introduce explicit enumerators for file access mode & file opening modes


Update FsMock to support new file system interface.
Fix doxygen issues.



This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,35,2016-08-29T05:48:50Z,2016-08-30T19:13:43Z,2016-08-30T19:13:47Z,MERGED,True,525,317,14,https://github.com/zaq32,Much more strongly typed (and usable) file system interface.,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/35,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/35#issuecomment-243216769,"From now on all file system procedures receive pointer to FileSystem object as their first parameter to facilitate building abstraction layer over file system driver and allow much easier file system mocking,
Separate operation status from context information returned by the

open,
read,
write
openDirectory
procedures. From now on they returned dedicated types with separatied operation status (OSResult) and context information (i.e. fileHandle, number of bytes transfered) instead of pure ints,


Migrate from pure int return values to OSResults,
Map most of the errno error codes to OSResult enumerator,
Update interface of open file procedure to:

separate file access mode (r, w, rw), from file opening mode,
drop the mode parameter that was supposed to be hard coded and will most likely never be changed.
introduce explicit enumerators for file access mode & file opening modes


Update FsMock to support new file system interface.
Fix doxygen issues.



This change is","Reviewed 14 of 14 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,36,2016-09-07T19:40:57Z,2016-09-17T14:13:33Z,2016-09-17T14:13:33Z,MERGED,True,660,443,37,https://github.com/zaq32,Application for testing freeRTOS event groups,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/36,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/36,"Extract terminal to separate static library.
Add application for testing free rtos event group behaviour.
Fix free RTOS config -> max task priority.
Extract assert procedures to external static library.
Some minor code fixes.



This change is","Extract terminal to separate static library.
Add application for testing free rtos event group behaviour.
Fix free RTOS config -> max task priority.
Extract assert procedures to external static library.
Some minor code fixes.



This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,36,2016-09-07T19:40:57Z,2016-09-17T14:13:33Z,2016-09-17T14:13:33Z,MERGED,True,660,443,37,https://github.com/zaq32,Application for testing freeRTOS event groups,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/36,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/36#issuecomment-245503593,"Extract terminal to separate static library.
Add application for testing free rtos event group behaviour.
Fix free RTOS config -> max task priority.
Extract assert procedures to external static library.
Some minor code fixes.



This change is",Check PulseAll on EventGroup,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,36,2016-09-07T19:40:57Z,2016-09-17T14:13:33Z,2016-09-17T14:13:33Z,MERGED,True,660,443,37,https://github.com/zaq32,Application for testing freeRTOS event groups,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/36,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/36#issuecomment-245717615,"Extract terminal to separate static library.
Add application for testing free rtos event group behaviour.
Fix free RTOS config -> max task priority.
Extract assert procedures to external static library.
Some minor code fixes.



This change is","Reviewed 27 of 27 files at r1.
Review status: all files reviewed at latest revision, 3 unresolved discussions.

libs/external/FreeRTOS/CMakeLists.txt, line 18 [r1] (raw file):

target_include_directories(${NAME} PUBLIC ${CMAKE_CURRENT_LIST_DIR}/Include ${PORT_DIR})

target_link_libraries(${NAME} platform assert)

Place each reference in separate line

src/terminal.h, line 4 [r1] (raw file):

#define OBC_TERMINAL_H

#pragma once

Why pragma?

test/pulse_all/main.c, line 31 [r1] (raw file):

    UNREFERENCED_PARAMETER(argc);
    UNREFERENCED_PARAMETER(argv);
    System.EventGroupSetBits(GlobalEventGroup, 0x80);

It would be nice to wrap it as PulseAll method of OS and similar method like WaitForPulseAll (or any other better name).

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,36,2016-09-07T19:40:57Z,2016-09-17T14:13:33Z,2016-09-17T14:13:33Z,MERGED,True,660,443,37,https://github.com/zaq32,Application for testing freeRTOS event groups,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/36,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/36#issuecomment-246748626,"Extract terminal to separate static library.
Add application for testing free rtos event group behaviour.
Fix free RTOS config -> max task priority.
Extract assert procedures to external static library.
Some minor code fixes.



This change is","Review status: all files reviewed at latest revision, 3 unresolved discussions.

libs/external/FreeRTOS/CMakeLists.txt, line 18 at r1 (raw file):

Previously, Novakov (Maciej T. Nowak) wrote

Place each reference in separate line

Done.


src/terminal.h, line 4 at r1 (raw file):

Previously, Novakov (Maciej T. Nowak) wrote

Why pragma?

If it is supported it can speedup processing this particular file, if it is not it does not hurt. 


test/pulse_all/main.c, line 31 at r1 (raw file):

Previously, Novakov (Maciej T. Nowak) wrote

It would be nice to wrap it as PulseAll method of OS and similar method like WaitForPulseAll (or any other better name).

Pulse all is a concept that can be build on top of the EventGroups, I would go for the element built on top of our very think os abstraction rather than try to make it more robust. 


Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,36,2016-09-07T19:40:57Z,2016-09-17T14:13:33Z,2016-09-17T14:13:33Z,MERGED,True,660,443,37,https://github.com/zaq32,Application for testing freeRTOS event groups,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/36,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/36#issuecomment-246758104,"Extract terminal to separate static library.
Add application for testing free rtos event group behaviour.
Fix free RTOS config -> max task priority.
Extract assert procedures to external static library.
Some minor code fixes.



This change is","Reviewed 1 of 1 files at r2.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

test/pulse_all/main.c, line 31 at r1 (raw file):

Previously, zaq32 (ukasz ak) wrote

Pulse all is a concept that can be build on top of the EventGroups, I would go for the element built on top of our very think os abstraction rather than try to make it more robust.

It will be fine for me - I would like to just hide that Set/Wait options (Wait especially as there are few parameters and small mistake could have strange effects)


Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,36,2016-09-07T19:40:57Z,2016-09-17T14:13:33Z,2016-09-17T14:13:33Z,MERGED,True,660,443,37,https://github.com/zaq32,Application for testing freeRTOS event groups,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/36,https://github.com/Novakov,6,https://github.com/PW-Sat2/PWSat2OBC/pull/36#issuecomment-247768691,"Extract terminal to separate static library.
Add application for testing free rtos event group behaviour.
Fix free RTOS config -> max task priority.
Extract assert procedures to external static library.
Some minor code fixes.



This change is","Reviewed 7 of 12 files at r3.
Review status: 28 of 33 files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,36,2016-09-07T19:40:57Z,2016-09-17T14:13:33Z,2016-09-17T14:13:33Z,MERGED,True,660,443,37,https://github.com/zaq32,Application for testing freeRTOS event groups,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/36,https://github.com/Novakov,7,https://github.com/PW-Sat2/PWSat2OBC/pull/36#issuecomment-247773584,"Extract terminal to separate static library.
Add application for testing free rtos event group behaviour.
Fix free RTOS config -> max task priority.
Extract assert procedures to external static library.
Some minor code fixes.



This change is","Reviewed 4 of 6 files at r4.
Review status: 30 of 37 files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,36,2016-09-07T19:40:57Z,2016-09-17T14:13:33Z,2016-09-17T14:13:33Z,MERGED,True,660,443,37,https://github.com/zaq32,Application for testing freeRTOS event groups,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/36,https://github.com/Novakov,8,https://github.com/PW-Sat2/PWSat2OBC/pull/36#issuecomment-247773698,"Extract terminal to separate static library.
Add application for testing free rtos event group behaviour.
Fix free RTOS config -> max task priority.
Extract assert procedures to external static library.
Some minor code fixes.



This change is","Reviewed 5 of 12 files at r3, 2 of 6 files at r4.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,37,2016-09-08T17:22:23Z,2016-09-15T18:27:25Z,2016-09-15T18:27:28Z,MERGED,True,979,390,34,https://github.com/Novakov,Refactor i2c driver,17,[],https://github.com/PW-Sat2/PWSat2OBC/pull/37,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/37,"Adapt to two i2c buses
Nicer API



This change is","Adapt to two i2c buses
Nicer API



This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,37,2016-09-08T17:22:23Z,2016-09-15T18:27:25Z,2016-09-15T18:27:28Z,MERGED,True,979,390,34,https://github.com/Novakov,Refactor i2c driver,17,[],https://github.com/PW-Sat2/PWSat2OBC/pull/37,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/37#issuecomment-245672720,"Adapt to two i2c buses
Nicer API



This change is",Refactor I2C bus,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,37,2016-09-08T17:22:23Z,2016-09-15T18:27:25Z,2016-09-15T18:27:28Z,MERGED,True,979,390,34,https://github.com/Novakov,Refactor i2c driver,17,[],https://github.com/PW-Sat2/PWSat2OBC/pull/37,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/37#issuecomment-246764422,"Adapt to two i2c buses
Nicer API



This change is","Review status: 0 of 29 files reviewed at latest revision, 7 unresolved discussions.

libs/drivers/comm/comm.c, line 46 at r1 (raw file):

static bool SendCommand(CommObject* object, CommAddress address, uint8_t command)
{
    const I2CResult result = object->low->System->Write(object->low->System, address, &command, sizeof(command));

Comm should not be aware how many i2c busses are there and which one it uses. In fact Only the main module should now how many i2c busses are there.

libs/drivers/eps/eps.c, line 17 at r1 (raw file):

} EpsLcl;

static I2CInterface* i2c;

Do not use global variables unless absolutely necessary.

libs/drivers/i2c/i2c.c, line 10 at r1 (raw file):

#include ""i2c.h""

static I2CBus* buses[2] = {NULL};

This should be defined in main module not i2c driver.

libs/drivers/i2c/i2c.c, line 51 at r1 (raw file):

    }

    if (!System.QueueReceive(bus->ResultQueue, &ret, MAX_DELAY))

if there is no response on i2c bus the driver will hang here. We need timeout here to prevent that.

libs/drivers/i2c/i2c.c, line 131 at r1 (raw file):

}

void I2CDriverInit(I2CBus bus[])

Possible buffer overflow.

libs/drivers/i2c/i2c.c, line 137 at r1 (raw file):

    SetupInterface(&bus[0], I2C0, I2C0_BUS_LOCATION, I2C0_BUS_PORT, I2C0_BUS_SDA_PIN, I2C0_BUS_SCL_PIN, cmuClock_I2C0, I2C0_IRQn);
    SetupInterface(&bus[1], I2C1, I2C1_BUS_LOCATION, I2C1_BUS_PORT, I2C1_BUS_SDA_PIN, I2C1_BUS_SCL_PIN, cmuClock_I2C1, I2C1_IRQn);

I would prefer i2c driver interface that will not limit us to any arbitrary number of i2c busses.
To be reconsidered:

Should irq handler entry points  be defined inside the driver itself
Should the i2c driver decide how many there are busses availble


src/commands/i2c_test_command.c, line 14 at r1 (raw file):

    I2CBus* bus;

    if (strcmp(argv[0], ""system"") == 0)

Check the number of arguments.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,37,2016-09-08T17:22:23Z,2016-09-15T18:27:25Z,2016-09-15T18:27:28Z,MERGED,True,979,390,34,https://github.com/Novakov,Refactor i2c driver,17,[],https://github.com/PW-Sat2/PWSat2OBC/pull/37,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/37#issuecomment-246764529,"Adapt to two i2c buses
Nicer API



This change is","Reviewed 29 of 29 files at r1.
Review status: all files reviewed at latest revision, 7 unresolved discussions.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,37,2016-09-08T17:22:23Z,2016-09-15T18:27:25Z,2016-09-15T18:27:28Z,MERGED,True,979,390,34,https://github.com/Novakov,Refactor i2c driver,17,[],https://github.com/PW-Sat2/PWSat2OBC/pull/37,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/37#issuecomment-247402903,"Adapt to two i2c buses
Nicer API



This change is","Review status: 18 of 34 files reviewed at latest revision, 7 unresolved discussions.

libs/drivers/comm/comm.c, line 46 at r1 (raw file):

Previously, zaq32 (ukasz ak) wrote

Comm should not be aware how many i2c busses are there and which one it uses. In fact Only the main module should now how many i2c busses are there.

To be honest I've got a bit small dilema about how both buses will be used and what should be placed in driver and what in specific devices. 


libs/drivers/eps/eps.c, line 17 at r1 (raw file):

Previously, zaq32 (ukasz ak) wrote

Do not use global variables unless absolutely necessary.

EPS driver is still very-very-draft, will be updated when EPS ICD is (better) known


libs/drivers/i2c/i2c.c, line 10 at r1 (raw file):

Previously, zaq32 (ukasz ak) wrote

This should be defined in main module not i2c driver.

Done.


libs/drivers/i2c/i2c.c, line 51 at r1 (raw file):

Previously, zaq32 (ukasz ak) wrote

if there is no response on i2c bus the driver will hang here. We need timeout here to prevent that.

Will be done later


libs/drivers/i2c/i2c.c, line 131 at r1 (raw file):

Previously, zaq32 (ukasz ak) wrote

Possible buffer overflow.

Done.


libs/drivers/i2c/i2c.c, line 137 at r1 (raw file):

Previously, zaq32 (ukasz ak) wrote

I would prefer i2c driver interface that will not limit us to any arbitrary number of i2c busses.
To be reconsidered:

Should irq handler entry points  be defined inside the driver itself
Should the i2c driver decide how many there are busses availble

Done.




src/commands/i2c_test_command.c, line 14 at r1 (raw file):

Previously, zaq32 (ukasz ak) wrote

Check the number of arguments.

Done.


Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,37,2016-09-08T17:22:23Z,2016-09-15T18:27:25Z,2016-09-15T18:27:28Z,MERGED,True,979,390,34,https://github.com/Novakov,Refactor i2c driver,17,[],https://github.com/PW-Sat2/PWSat2OBC/pull/37,https://github.com/zaq32,6,https://github.com/PW-Sat2/PWSat2OBC/pull/37#issuecomment-247406249,"Adapt to two i2c buses
Nicer API



This change is","Reviewed 16 of 16 files at r2.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

libs/drivers/i2c/Include/i2c/i2c.h, line 136 at r2 (raw file):

 * @param[in] bus Bus associated with given hardware
 */
void IRQHandler(I2CBus* bus);

Possible name collision. I expect we will have more than once IRQHandler.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,37,2016-09-08T17:22:23Z,2016-09-15T18:27:25Z,2016-09-15T18:27:28Z,MERGED,True,979,390,34,https://github.com/Novakov,Refactor i2c driver,17,[],https://github.com/PW-Sat2/PWSat2OBC/pull/37,https://github.com/zaq32,7,https://github.com/PW-Sat2/PWSat2OBC/pull/37#issuecomment-247407809,"Adapt to two i2c buses
Nicer API



This change is","Reviewed 3 of 3 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,38,2016-09-26T14:45:03Z,2016-10-20T16:16:50Z,2016-10-20T16:16:52Z,MERGED,True,279,41,23,https://github.com/Novakov,Allow clearing state on OBC start,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/38,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/38,"Another Serial Port is used for controlling OBC (RTS -> RST, DTR -> PC0)
State (flash memory) is formatted at start if PC0 is low



This change is","Another Serial Port is used for controlling OBC (RTS -> RST, DTR -> PC0)
State (flash memory) is formatted at start if PC0 is low



This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,38,2016-09-26T14:45:03Z,2016-10-20T16:16:50Z,2016-10-20T16:16:52Z,MERGED,True,279,41,23,https://github.com/Novakov,Allow clearing state on OBC start,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/38,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/38#issuecomment-254145912,"Another Serial Port is used for controlling OBC (RTS -> RST, DTR -> PC0)
State (flash memory) is formatted at start if PC0 is low



This change is","Reviewed 24 of 24 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,39,2016-10-25T14:48:18Z,2016-11-02T17:44:38Z,2016-11-02T17:44:39Z,MERGED,True,1046,412,52,https://github.com/Novakov,Support i2c timeout,8,[],https://github.com/PW-Sat2/PWSat2OBC/pull/39,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/39,"DeviceMock has been rewritten almost from scratch, so after this PR gets to master devices must be flashed with new version.
After detecting latched SCL, power cycle is triggered


This change is","DeviceMock has been rewritten almost from scratch, so after this PR gets to master devices must be flashed with new version.
After detecting latched SCL, power cycle is triggered


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,39,2016-10-25T14:48:18Z,2016-11-02T17:44:38Z,2016-11-02T17:44:39Z,MERGED,True,1046,412,52,https://github.com/Novakov,Support i2c timeout,8,[],https://github.com/PW-Sat2/PWSat2OBC/pull/39,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/39#issuecomment-256056918,"DeviceMock has been rewritten almost from scratch, so after this PR gets to master devices must be flashed with new version.
After detecting latched SCL, power cycle is triggered


This change is",[i2c] Support timeout,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,39,2016-10-25T14:48:18Z,2016-11-02T17:44:38Z,2016-11-02T17:44:39Z,MERGED,True,1046,412,52,https://github.com/Novakov,Support i2c timeout,8,[],https://github.com/PW-Sat2/PWSat2OBC/pull/39,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/39#issuecomment-257146627,"DeviceMock has been rewritten almost from scratch, so after this PR gets to master devices must be flashed with new version.
After detecting latched SCL, power cycle is triggered


This change is","Reviewed 48 of 48 files at r1.
Review status: all files reviewed at latest revision, 12 unresolved discussions.

integration_tests/extensions/SaleaeDump.py, line 20 at r1 (raw file):

        sleep(1)
        self._connection.capture_stop()
        self._connection.save_to_file('D:/captures/%s.logicdata' % test_id)

this should be build relative path.

libs/drivers/i2c/error_handling.c, line 7 at r1 (raw file):

#include ""i2c.h""

static inline I2CErrorHandlingBus* Config(I2CBus* inner)

undocumented

libs/drivers/i2c/error_handling.c, line 25 at r1 (raw file):

}

static I2CResult WriteRead(

undocumented

libs/drivers/i2c/i2c.c, line 10 at r1 (raw file):

#include ""i2c.h""

static bool IsSclLatched(const I2CBus* bus)

undocumented

libs/drivers/i2c/i2c.c, line 15 at r1 (raw file):

}

static I2CResult ExecuteTransfer(I2CBus* bus, I2C_TransferSeq_TypeDef* seq)

undocumented

libs/drivers/i2c/i2c.c, line 48 at r1 (raw file):

        hw->CMD = I2C_CMD_STOP | I2C_CMD_ABORT;

        while (HAS_FLAG(hw->STATUS, I2C_STATUS_PABORT))

Can we make sure that this loop will not hang current task indefinitely?

libs/drivers/i2c/i2c.c, line 69 at r1 (raw file):

}

static I2CResult Write(I2CBus* bus, const I2CAddress address, const uint8_t* data, size_t length)

undocumented

libs/drivers/i2c/i2c.c, line 143 at r1 (raw file):

}

void I2CIRQHandler(I2CBus* bus)

undocumented

libs/drivers/i2c/Include/i2c/i2c.h, line 84 at r1 (raw file):

        uint16_t SCL;
        uint16_t SDA;
    } IO;

undocumented it also seems to be unused.

libs/drivers/i2c/Include/i2c/i2c.h, line 120 at r1 (raw file):

        size_t outLength //
        );
} I2CBus;

This structure is begining to grow out of control. Initially it was intended to be as close as possible to the pure interface.  Maybe we should consider separating state from the interface?
I.e.:

the field Extra is used only by fallback & error_handling layers,
fields ResultQueue, Lock & HWInterface are used only by the  actual driver  at the bottom of the stack,


libs/drivers/i2c/Include/i2c/i2c.h, line 176 at r1 (raw file):

typedef I2CResult (*BusErrorHandler)(I2CBus* bus, I2CResult result, I2CAddress address, void* context);

typedef struct

undocumented

libs/power/CMakeLists.txt, line 3 at r1 (raw file):

set(NAME power)

set(SOURCES

this looks strange.
you can also put header files in this list.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,39,2016-10-25T14:48:18Z,2016-11-02T17:44:38Z,2016-11-02T17:44:39Z,MERGED,True,1046,412,52,https://github.com/Novakov,Support i2c timeout,8,[],https://github.com/PW-Sat2/PWSat2OBC/pull/39,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/39#issuecomment-257166803,"DeviceMock has been rewritten almost from scratch, so after this PR gets to master devices must be flashed with new version.
After detecting latched SCL, power cycle is triggered


This change is","Review status: 36 of 51 files reviewed at latest revision, 12 unresolved discussions.

integration_tests/extensions/SaleaeDump.py, line 20 at r1 (raw file):

Previously, zaq32 (ukasz ak) wrote

this should be build relative path.

Done.


libs/drivers/i2c/error_handling.c, line 7 at r1 (raw file):

Previously, zaq32 (ukasz ak) wrote

undocumented

Done.


libs/drivers/i2c/error_handling.c, line 25 at r1 (raw file):

Previously, zaq32 (ukasz ak) wrote

undocumented

Done.


libs/drivers/i2c/i2c.c, line 10 at r1 (raw file):

Previously, zaq32 (ukasz ak) wrote

undocumented

Done.


libs/drivers/i2c/i2c.c, line 15 at r1 (raw file):

Previously, zaq32 (ukasz ak) wrote

undocumented

Done.


libs/drivers/i2c/i2c.c, line 48 at r1 (raw file):

Previously, zaq32 (ukasz ak) wrote

Can we make sure that this loop will not hang current task indefinitely?

Not really. ABORT command is handled directly by I2C hardware and should be executed immediately but write to CMD register is not blocking. 


libs/drivers/i2c/i2c.c, line 69 at r1 (raw file):

Previously, zaq32 (ukasz ak) wrote

undocumented

Done.


libs/drivers/i2c/i2c.c, line 143 at r1 (raw file):

Previously, zaq32 (ukasz ak) wrote

undocumented

Documented in i2c.h


libs/drivers/i2c/Include/i2c/i2c.h, line 84 at r1 (raw file):

Previously, zaq32 (ukasz ak) wrote

undocumented it also seems to be unused.

Used in `IsSclLatched` function


libs/drivers/i2c/Include/i2c/i2c.h, line 120 at r1 (raw file):

Previously, zaq32 (ukasz ak) wrote

This structure is begining to grow out of control. Initially it was intended to be as close as possible to the pure interface.  Maybe we should consider separating state from the interface?
I.e.:

the field Extra is used only by fallback & error_handling layers,
fields ResultQueue, Lock & HWInterface are used only by the  actual driver  at the bottom of the stack,

Done.




libs/drivers/i2c/Include/i2c/i2c.h, line 176 at r1 (raw file):

Previously, zaq32 (ukasz ak) wrote

undocumented

Done.


libs/power/CMakeLists.txt, line 3 at r1 (raw file):

Previously, zaq32 (ukasz ak) wrote

this looks strange.
you can also put header files in this list.

Done.


Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,39,2016-10-25T14:48:18Z,2016-11-02T17:44:38Z,2016-11-02T17:44:39Z,MERGED,True,1046,412,52,https://github.com/Novakov,Support i2c timeout,8,[],https://github.com/PW-Sat2/PWSat2OBC/pull/39,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/39#issuecomment-257168278,"DeviceMock has been rewritten almost from scratch, so after this PR gets to master devices must be flashed with new version.
After detecting latched SCL, power cycle is triggered


This change is","Reviewed 15 of 15 files at r2.
Review status: all files reviewed at latest revision, 2 unresolved discussions.

libs/drivers/i2c/error_handling.c, line 7 at r1 (raw file):

Previously, Novakov (Maciej T. Nowak) wrote

Done.

this procedure does not have parameter inner


libs/drivers/i2c/Include/i2c/i2c.h, line 76 at r2 (raw file):

{
    /** @brief Arbitrary data needed by driver */
    void* Extra;

this field is no longer used.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,39,2016-10-25T14:48:18Z,2016-11-02T17:44:38Z,2016-11-02T17:44:39Z,MERGED,True,1046,412,52,https://github.com/Novakov,Support i2c timeout,8,[],https://github.com/PW-Sat2/PWSat2OBC/pull/39,https://github.com/Novakov,6,https://github.com/PW-Sat2/PWSat2OBC/pull/39#issuecomment-257230398,"DeviceMock has been rewritten almost from scratch, so after this PR gets to master devices must be flashed with new version.
After detecting latched SCL, power cycle is triggered


This change is","Review status: all files reviewed at latest revision, 2 unresolved discussions.

libs/drivers/i2c/error_handling.c, line 7 at r1 (raw file):

Previously, zaq32 (ukasz ak) wrote

this procedure does not have parameter inner

Done.


libs/drivers/i2c/Include/i2c/i2c.h, line 76 at r2 (raw file):

Previously, zaq32 (ukasz ak) wrote

this field is no longer used.

Done.


Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,39,2016-10-25T14:48:18Z,2016-11-02T17:44:38Z,2016-11-02T17:44:39Z,MERGED,True,1046,412,52,https://github.com/Novakov,Support i2c timeout,8,[],https://github.com/PW-Sat2/PWSat2OBC/pull/39,https://github.com/zaq32,7,https://github.com/PW-Sat2/PWSat2OBC/pull/39#issuecomment-257230865,"DeviceMock has been rewritten almost from scratch, so after this PR gets to master devices must be flashed with new version.
After detecting latched SCL, power cycle is triggered


This change is","Reviewed 4 of 4 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,39,2016-10-25T14:48:18Z,2016-11-02T17:44:38Z,2016-11-02T17:44:39Z,MERGED,True,1046,412,52,https://github.com/Novakov,Support i2c timeout,8,[],https://github.com/PW-Sat2/PWSat2OBC/pull/39,https://github.com/zaq32,8,https://github.com/PW-Sat2/PWSat2OBC/pull/39#issuecomment-257942330,"DeviceMock has been rewritten almost from scratch, so after this PR gets to master devices must be flashed with new version.
After detecting latched SCL, power cycle is triggered


This change is","Reviewed 1 of 4 files at r4.
Review status: 49 of 52 files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,39,2016-10-25T14:48:18Z,2016-11-02T17:44:38Z,2016-11-02T17:44:39Z,MERGED,True,1046,412,52,https://github.com/Novakov,Support i2c timeout,8,[],https://github.com/PW-Sat2/PWSat2OBC/pull/39,https://github.com/zaq32,9,https://github.com/PW-Sat2/PWSat2OBC/pull/39#issuecomment-257942792,"DeviceMock has been rewritten almost from scratch, so after this PR gets to master devices must be flashed with new version.
After detecting latched SCL, power cycle is triggered


This change is","Reviewed 3 of 4 files at r4.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,40,2016-11-02T17:59:28Z,2016-11-24T18:14:02Z,2016-11-24T18:39:18Z,MERGED,True,2934,146,51,https://github.com/zaq32,Antenna driver,24,[],https://github.com/PW-Sat2/PWSat2OBC/pull/40,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/40,"First draft of the driver for antenna deployment system.


This change is","First draft of the driver for antenna deployment system.


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,40,2016-11-02T17:59:28Z,2016-11-24T18:14:02Z,2016-11-24T18:39:18Z,MERGED,True,2934,146,51,https://github.com/zaq32,Antenna driver,24,[],https://github.com/PW-Sat2/PWSat2OBC/pull/40,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/40#issuecomment-257988595,"First draft of the driver for antenna deployment system.


This change is",[Driver] Anteny,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,40,2016-11-02T17:59:28Z,2016-11-24T18:14:02Z,2016-11-24T18:39:18Z,MERGED,True,2934,146,51,https://github.com/zaq32,Antenna driver,24,[],https://github.com/PW-Sat2/PWSat2OBC/pull/40,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/40#issuecomment-260744519,"First draft of the driver for antenna deployment system.


This change is","Reviewed 11 of 34 files at r1, 5 of 13 files at r2, 15 of 20 files at r3, 10 of 10 files at r4, 1 of 1 files at r5.
Review status: all files reviewed at latest revision, 27 unresolved discussions.

integration_tests/devices/antenna.py, line 40 at r5 (raw file):

    on_get_temperature = None
    on_get_deployment_status = None
    on_deployment_cancel = None

As these fields are callbacks, it would be nice to have signatures here (comments are fine)

integration_tests/devices/antenna.py, line 44 at r5 (raw file):

    def __init__(self, address):
        super(AntennaController, self).__init__(address)
        self.log = logging.getLogger(""Antenna"")

Append controller address here (like Antenna.32) and don't put it in each log message

integration_tests/devices/antenna.py, line 66 at r5 (raw file):

                return result

        return default

Move it to utils

integration_tests/devices/antenna.py, line 86 at r5 (raw file):

            self.armed = self.call(self.on_arm_state_change, False, False)

    def deploy_antenna(self, antanna_id, timeout):

antenna_id
The same typo in many methods ;)

integration_tests/devices/antenna.py, line 172 at r5 (raw file):

        result = self.call(self.on_get_temperature, None)
        if result is None:
            result = 0

Coallesce by self.call(...) or 0

integration_tests/devices/antenna.py, line 174 at r5 (raw file):

            result = 0

        return [(result >> 8) & 0xff, result & 0xff]

Python have standard functions for packing values:
struct.pack('>h', result)
Docs: https://docs.python.org/2/library/struct.html

integration_tests/devices/antenna.py, line 200 at r5 (raw file):

        lsb = update_value(lsb, self.deployment_in_progress, 0x10)
        lsb = update_value(lsb, self.armed, 0x1)
        return [msb, lsb]

You can use reduce(lambda s,b:  (s << 1) | b, array_of_bools, 0) to convert array of bools to int, then pack it to two bytes.

integration_tests/devices/antenna.py, line 226 at r5 (raw file):

        self.ignore_deployment_switch = False
        self.log.debug(""Antenna deployment finished on controller: %d"", self.address)

Each device has two interfaces: API for tests and methods called via I2C. I think it would be beneficial to separete these two interfaces, for example by preceding them with _ as they are not intended to be invoked by tests
Second thing, how about putting comment with each command with paragraph from ICD (if possible)? It will be easier to find where each command is described

integration_tests/obc/antenna.py, line 72 at r5 (raw file):

    def parse_deployment_state(result):
        parts = result.split("" "");

If all values are int, it is possible to convert them all at once:
map(int, result.split("" "")
And no semicolon at the end ;)
Private methods should begin with _

integration_tests/obc/antenna.py, line 80 at r5 (raw file):

        parsedResult = AntennaStatus(True)
        for cx in range(4):
            parsedResult.DeploymentState[cx] = int(parts[cx + 1])

If input is converted to int, this loop can be simplified: parsedResult.DeploymentState = parts[1:5]

integration_tests/system/system.py, line 11 at r5 (raw file):

class System:
    def __init__(self, obc_com, sys_bus_com, payload_bus_com, use_single_bus, gpio, auto_power_on = True):
        logging.basicConfig()

Logging configuration is done in tests/__init__.py. Don't do it here.

integration_tests/system/system.py, line 49 at r5 (raw file):

        self.sys_bus.add_device(self.receiver)
        self.sys_bus.add_device(self.primary_antenna)
        self.sys_bus.add_device(self.backup_antenna)

Should backup antenna controller be on payload bus?

integration_tests/tests/test_antenna.py, line 17 at r5 (raw file):

    def wait_for_change(self, timeout = None):
        return self.flag.wait(timeout)

Move to utils

integration_tests/tests/test_antenna.py, line 23 at r5 (raw file):

        result = super(Test_Antenna, self).__init__(methodName)
        self.auto_power_on = False
        return result

I'd prefer to have this as decorator @auto_power_on(False)

integration_tests/tests/test_antenna.py, line 97 at r5 (raw file):

        self.assertFalse(result.DeploymentInProgress[1])
        self.assertFalse(result.DeploymentInProgress[2])
        self.assertTrue(result.DeploymentInProgress[3])

Fon't write assertTrue/False without meaningful message unless you love debugging series of Test failed. Expected: True Actual: False (I don't)

libs/base/reader.c, line 7 at r5 (raw file):

    if (reader->status)
    {
        reader->status = (reader->position + requestedSize) <= reader->length;

It took me a while to understand what status is. I think it will be better to name it isValid or stillInsideBuffer

libs/drivers/antenna/antenna.c, line 14 at r5 (raw file):
Copy-paste?

to be reset


libs/drivers/antenna/antenna.c, line 113 at r5 (raw file):

}

AntennaDeploymentProcessStatus IsDeploymentActive(struct AntennaDriver* driver, AntennaChannel channel)

Missing static

libs/drivers/antenna/antenna.c, line 144 at r5 (raw file):

}

OSResult GetDeploymentStatus(struct AntennaDriver* driver,

Missing static

libs/drivers/antenna/antenna.c, line 243 at r5 (raw file):

            telemetry->ActivationTime[1] = secondaryValue;
            telemetry->flags |= flags[i];
        }

Why always checking both controllers even if primary is working?

libs/drivers/antenna/miniport.c, line 22 at r5 (raw file):

    QUERY_TEMPERATURE = 0xc0,
    QUERY_DEPLOYMENT_STATUS = 0xc3
} Command;

Why are some enum names CamelCase (like OSResult) but this is upper case with underscores without any prefix?

libs/drivers/antenna/miniport.c, line 54 at r5 (raw file):

    return status;
}

I see some repeating pattern of sending commands without parameters with optional response. Just thinking maybe is useful to extract it to some common utility functions?

libs/drivers/antenna/miniport.c, line 199 at r5 (raw file):

    telemetry->IgnoringDeploymentSwitches = (value & 0x0100) != 0;
    telemetry->DeploymentSystemArmed = (value & 0x0001) != 0;
    return OSResultSuccess;

AVR-Libc defines few useful macros for bit operations: bit_is_set and bit_is_clear. I would say it will make code more readable if we include these functions in our codebase
Source: http://www.nongnu.org/avr-libc/user-manual/sfr__defs_8h_source.html#234

libs/drivers/antenna/Include/antenna/miniport.h, line 21 at r5 (raw file):

 *
 * The driver itself is responsible mainly for building & parsing frames exchanged with
 * the hardware itself any extensive data interpretation is not done t this level.

at this level

libs/drivers/antenna/Include/antenna/miniport.h, line 30 at r5 (raw file):

 * This low level driver is responsible for building/parsing frames exchanges with
 * hardware. By itself is driver is completely stateless and can be used to manage
 * multiple hardware channels at the same time (event concurrently). It is the caller

event concurrently - that's not exaclty true. You can't send two commands at the same time on two channels if they are using the same underlying hardware bus.

src/commands/antenna.c, line 63 at r5 (raw file):

{
    return value ? 1 : 0;
}

Move it to utils

unit_tests/antenna/miniport.cpp, line 133 at r5 (raw file):

            EXPECT_THAT(length, Eq(2u));
            EXPECT_THAT(inData[1], Eq(200u));
            return I2CResultOK;

(Just thinking) how about creating some matchers dedicated for I2C transfers?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,40,2016-11-02T17:59:28Z,2016-11-24T18:14:02Z,2016-11-24T18:39:18Z,MERGED,True,2934,146,51,https://github.com/zaq32,Antenna driver,24,[],https://github.com/PW-Sat2/PWSat2OBC/pull/40,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/40#issuecomment-261382375,"First draft of the driver for antenna deployment system.


This change is","Review status: 32 of 46 files reviewed at latest revision, 27 unresolved discussions.

integration_tests/devices/antenna.py, line 40 at r5 (raw file):

Previously, Novakov (Maciej T. Nowak) wrote

As these fields are callbacks, it would be nice to have signatures here (comments are fine)

Fixed


integration_tests/devices/antenna.py, line 44 at r5 (raw file):

Previously, Novakov (Maciej T. Nowak) wrote

Append controller address here (like Antenna.32) and don't put it in each log message

Fixed


integration_tests/devices/antenna.py, line 66 at r5 (raw file):

Previously, Novakov (Maciej T. Nowak) wrote

Move it to utils

Fixed


integration_tests/devices/antenna.py, line 86 at r5 (raw file):

Previously, Novakov (Maciej T. Nowak) wrote

antenna_id
The same typo in many methods ;)

Fixed


integration_tests/devices/antenna.py, line 172 at r5 (raw file):

Previously, Novakov (Maciej T. Nowak) wrote

Coallesce by self.call(...) or 0

Fixed


integration_tests/devices/antenna.py, line 174 at r5 (raw file):

Previously, Novakov (Maciej T. Nowak) wrote

Python have standard functions for packing values:
struct.pack('>h', result)
Docs: https://docs.python.org/2/library/struct.html

I am not sure that I can use it and get anything simpler than this that produces byte array


integration_tests/devices/antenna.py, line 200 at r5 (raw file):

Previously, Novakov (Maciej T. Nowak) wrote

You can use reduce(lambda s,b:  (s << 1) | b, array_of_bools, 0) to convert array of bools to int, then pack it to two bytes.

It may work but I still prefer explicit function call.


integration_tests/devices/antenna.py, line 226 at r5 (raw file):

Previously, Novakov (Maciej T. Nowak) wrote

Each device has two interfaces: API for tests and methods called via I2C. I think it would be beneficial to separete these two interfaces, for example by preceding them with _ as they are not intended to be invoked by tests
Second thing, how about putting comment with each command with paragraph from ICD (if possible)? It will be easier to find where each command is described

Fine


integration_tests/obc/antenna.py, line 72 at r5 (raw file):

Previously, Novakov (Maciej T. Nowak) wrote

If all values are int, it is possible to convert them all at once:
map(int, result.split("" "")
And no semicolon at the end ;)
Private methods should begin with _

Fixed


integration_tests/obc/antenna.py, line 80 at r5 (raw file):

Previously, Novakov (Maciej T. Nowak) wrote

If input is converted to int, this loop can be simplified: parsedResult.DeploymentState = parts[1:5]

Fixed


integration_tests/system/system.py, line 11 at r5 (raw file):

Previously, Novakov (Maciej T. Nowak) wrote

Logging configuration is done in tests/__init__.py. Don't do it here.

Fixed


integration_tests/system/system.py, line 49 at r5 (raw file):

Previously, Novakov (Maciej T. Nowak) wrote

Should backup antenna controller be on payload bus?

Right


integration_tests/tests/test_antenna.py, line 17 at r5 (raw file):

Previously, Novakov (Maciej T. Nowak) wrote

Move to utils

Fixed


integration_tests/tests/test_antenna.py, line 97 at r5 (raw file):

Previously, Novakov (Maciej T. Nowak) wrote

Fon't write assertTrue/False without meaningful message unless you love debugging series of Test failed. Expected: True Actual: False (I don't)

what would you put in such message that is not already expressed in the code?


libs/base/reader.c, line 7 at r5 (raw file):

Previously, Novakov (Maciej T. Nowak) wrote

It took me a while to understand what status is. I think it will be better to name it isValid or stillInsideBuffer

Fixed


libs/drivers/antenna/antenna.c, line 14 at r5 (raw file):

Previously, Novakov (Maciej T. Nowak) wrote

Copy-paste?

to be reset

Fixed



libs/drivers/antenna/antenna.c, line 113 at r5 (raw file):

Previously, Novakov (Maciej T. Nowak) wrote

Missing static

Fixed


libs/drivers/antenna/antenna.c, line 144 at r5 (raw file):

Previously, Novakov (Maciej T. Nowak) wrote

Missing static

Fixed


libs/drivers/antenna/antenna.c, line 243 at r5 (raw file):

Previously, Novakov (Maciej T. Nowak) wrote

Why always checking both controllers even if primary is working?

there are two temperature sensors each on each controller, I read both of them all to simplify interface as opposed to the necessity to require user to access it separately for each channel.


libs/drivers/antenna/miniport.c, line 22 at r5 (raw file):

Previously, Novakov (Maciej T. Nowak) wrote

Why are some enum names CamelCase (like OSResult) but this is upper case with underscores without any prefix?

public enums (defined in header files) are all Upper case as our coding standard defines. I define private enumerators  using CamelCase.


libs/drivers/antenna/miniport.c, line 54 at r5 (raw file):

Previously, Novakov (Maciej T. Nowak) wrote

I see some repeating pattern of sending commands without parameters with optional response. Just thinking maybe is useful to extract it to some common utility functions?

That may be useful but I would wait until we get more use cases 


libs/drivers/antenna/miniport.c, line 199 at r5 (raw file):

Previously, Novakov (Maciej T. Nowak) wrote

AVR-Libc defines few useful macros for bit operations: bit_is_set and bit_is_clear. I would say it will make code more readable if we include these functions in our codebase
Source: http://www.nongnu.org/avr-libc/user-manual/sfr__defs_8h_source.html#234

Done


libs/drivers/antenna/Include/antenna/miniport.h, line 21 at r5 (raw file):

Previously, Novakov (Maciej T. Nowak) wrote

at this level

Fixed


libs/drivers/antenna/Include/antenna/miniport.h, line 30 at r5 (raw file):

Previously, Novakov (Maciej T. Nowak) wrote

event concurrently - that's not exaclty true. You can't send two commands at the same time on two channels if they are using the same underlying hardware bus.

Fixed


src/commands/antenna.c, line 63 at r5 (raw file):

Previously, Novakov (Maciej T. Nowak) wrote

Move it to utils

Fixed


unit_tests/antenna/miniport.cpp, line 133 at r5 (raw file):

Previously, Novakov (Maciej T. Nowak) wrote

(Just thinking) how about creating some matchers dedicated for I2C transfers?

It is worth considering. Maybe I will define them next time...


Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,40,2016-11-02T17:59:28Z,2016-11-24T18:14:02Z,2016-11-24T18:39:18Z,MERGED,True,2934,146,51,https://github.com/zaq32,Antenna driver,24,[],https://github.com/PW-Sat2/PWSat2OBC/pull/40,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/40#issuecomment-261472384,"First draft of the driver for antenna deployment system.


This change is","Reviewed 1 of 10 files at r4, 14 of 14 files at r6.
Review status: all files reviewed at latest revision, 6 unresolved discussions, some commit checks failed.

integration_tests/devices/antenna.py, line 200 at r5 (raw file):

Previously, zaq32 (ukasz ak) wrote

It may work but I still prefer explicit function call.

I was thinking about:
flags = [
      not self.antenna_state[0].is_deployed(),
      self.antenna_state[0].is_being_deployed()
]


num = reduce(lambda s,b: (s << 1) | b, flags, 0)
bu I will not fight for it ;)

---

*[integration_tests/devices/antenna.py, line 226 at r5](https://reviewable.io:443/reviews/pw-sat2/pwsat2obc/40#-KWSW2sMB35JJVbg6Qj3:-KWqQT_hptmxcrAWPgiI:b-hh8hm7) ([raw file](https://github.com/pw-sat2/pwsat2obc/blob/48a3fd42571d66c79c35d75fabcbd5b232ff7b0c/integration_tests/devices/antenna.py#L226)):*
<details><summary><i>Previously, zaq32 (ukasz ak) wrote</i></summary>
> Fine
</details>
What about first part? The `_` prefix?

---

*[integration_tests/tests/__init__.py, line 14 at r6](https://reviewable.io:443/reviews/pw-sat2/pwsat2obc/40#-KWqQxZN657FCORccCA7:-KWqQxZO2-c0FkL2Il1m:b-9k4vmz) ([raw file](https://github.com/pw-sat2/pwsat2obc/blob/0ffcb080f603ab4e6a4540e95675865d0dac846f/integration_tests/tests/__init__.py#L14)):*
> ```Python
> 
> def _setup_log():
>     logging.basicConfig()
> ```

Whoa. Code below is already setting default logging config. There's no need to configure it again

---

*[integration_tests/tests/test_antenna.py, line 97 at r5](https://reviewable.io:443/reviews/pw-sat2/pwsat2obc/40#-KWdUCiqasG0Ku3CCKNa:-KWqRNE6oXf8K33x_zAp:b-sfe2pi) ([raw file](https://github.com/pw-sat2/pwsat2obc/blob/48a3fd42571d66c79c35d75fabcbd5b232ff7b0c/integration_tests/tests/test_antenna.py#L97)):*
<details><summary><i>Previously, zaq32 (ukasz ak) wrote</i></summary>
> what would you put in such message that is not already expressed in the code?
</details>
it's only about reading logs in case of tests error, all you get is 'Expected True actual: False' and you have to dig into code to find issue. I want meaningful messages in tests like 'Expected antenna 1 deployment to be in progress'

---

*[libs/drivers/antenna/miniport.c, line 22 at r5](https://reviewable.io:443/reviews/pw-sat2/pwsat2obc/40#-KWS_njzYoYc02Vzxa6B:-KWqSyEFNT50KEZRWtmp:b-vpmxn4) ([raw file](https://github.com/pw-sat2/pwsat2obc/blob/48a3fd42571d66c79c35d75fabcbd5b232ff7b0c/libs/drivers/antenna/miniport.c#L22)):*
<details><summary><i>Previously, zaq32 (ukasz ak) wrote</i></summary>
> public enums (defined in header files) are all Upper case as our coding standard defines. I define private enumerators  using CamelCase.
</details>
So most of out enums are not following that standard ;) Let's leave it for now and revise naming style of enums 

---


*Comments from [Reviewable](https://reviewable.io:443/reviews/pw-sat2/pwsat2obc/40)*
<!-- Sent from Reviewable.io -->",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,40,2016-11-02T17:59:28Z,2016-11-24T18:14:02Z,2016-11-24T18:39:18Z,MERGED,True,2934,146,51,https://github.com/zaq32,Antenna driver,24,[],https://github.com/PW-Sat2/PWSat2OBC/pull/40,https://github.com/zaq32,6,https://github.com/PW-Sat2/PWSat2OBC/pull/40#issuecomment-261475175,"First draft of the driver for antenna deployment system.


This change is","Reviewed 1 of 20 files at r3, 1 of 14 files at r6.
Review status: all files reviewed at latest revision, 4 unresolved discussions, some commit checks failed.

integration_tests/devices/antenna.py, line 200 at r5 (raw file):

Previously, Novakov (Maciej T. Nowak) wrote

I was thinking about:
flags = [
      not self.antenna_state[0].is_deployed(),
      self.antenna_state[0].is_being_deployed()
]

num = reduce(lambda s,b: (s << 1) | b, flags, 0)

bu I will not fight for it ;)

So let's leave it as it is.


integration_tests/devices/antenna.py, line 226 at r5 (raw file):

Previously, Novakov (Maciej T. Nowak) wrote

What about first part? The _ prefix?

All of the non command methods are now prefixed with underscore.


Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,40,2016-11-02T17:59:28Z,2016-11-24T18:14:02Z,2016-11-24T18:39:18Z,MERGED,True,2934,146,51,https://github.com/zaq32,Antenna driver,24,[],https://github.com/PW-Sat2/PWSat2OBC/pull/40,https://github.com/Novakov,7,https://github.com/PW-Sat2/PWSat2OBC/pull/40#issuecomment-261476520,"First draft of the driver for antenna deployment system.


This change is","Review status: all files reviewed at latest revision, 5 unresolved discussions, some commit checks failed.

integration_tests/devices/antenna.py, line 226 at r5 (raw file):

Previously, zaq32 (ukasz ak) wrote

All of the non command methods are now prefixed with underscore.

I though about prefix all i2c command methods with `_`, like `cancel_deployment` -> `_ cancel_deployment`


Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,40,2016-11-02T17:59:28Z,2016-11-24T18:14:02Z,2016-11-24T18:39:18Z,MERGED,True,2934,146,51,https://github.com/zaq32,Antenna driver,24,[],https://github.com/PW-Sat2/PWSat2OBC/pull/40,https://github.com/zaq32,8,https://github.com/PW-Sat2/PWSat2OBC/pull/40#issuecomment-261635856,"First draft of the driver for antenna deployment system.


This change is","Review status: all files reviewed at latest revision, 4 unresolved discussions, some commit checks failed.

integration_tests/devices/antenna.py, line 226 at r5 (raw file):

Previously, Novakov (Maciej T. Nowak) wrote

I though about prefix all i2c command methods with _, like cancel_deployment -> _ cancel_deployment

Changed


integration_tests/tests/init.py, line 14 at r6 (raw file):

Previously, Novakov (Maciej T. Nowak) wrote

Whoa. Code below is already setting default logging config. There's no need to configure it again

Fixed


integration_tests/tests/test_antenna.py, line 23 at r5 (raw file):

Previously, Novakov (Maciej T. Nowak) wrote

I'd prefer to have this as decorator @auto_power_on(False)

Fixed


integration_tests/tests/test_antenna.py, line 97 at r5 (raw file):

Previously, Novakov (Maciej T. Nowak) wrote

it's only about reading logs in case of tests error, all you get is 'Expected True actual: False' and you have to dig into code to find issue. I want meaningful messages in tests like 'Expected antenna 1 deployment to be in progress'

Fine


Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,40,2016-11-02T17:59:28Z,2016-11-24T18:14:02Z,2016-11-24T18:39:18Z,MERGED,True,2934,146,51,https://github.com/zaq32,Antenna driver,24,[],https://github.com/PW-Sat2/PWSat2OBC/pull/40,https://github.com/Novakov,9,https://github.com/PW-Sat2/PWSat2OBC/pull/40#issuecomment-262016678,"First draft of the driver for antenna deployment system.


This change is","Reviewed 6 of 6 files at r7.
Review status: all files reviewed at latest revision, 3 unresolved discussions.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,40,2016-11-02T17:59:28Z,2016-11-24T18:14:02Z,2016-11-24T18:39:18Z,MERGED,True,2934,146,51,https://github.com/zaq32,Antenna driver,24,[],https://github.com/PW-Sat2/PWSat2OBC/pull/40,https://github.com/Novakov,10,https://github.com/PW-Sat2/PWSat2OBC/pull/40#issuecomment-262319997,"First draft of the driver for antenna deployment system.


This change is","Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,40,2016-11-02T17:59:28Z,2016-11-24T18:14:02Z,2016-11-24T18:39:18Z,MERGED,True,2934,146,51,https://github.com/zaq32,Antenna driver,24,[],https://github.com/PW-Sat2/PWSat2OBC/pull/40,https://github.com/Novakov,11,https://github.com/PW-Sat2/PWSat2OBC/pull/40#issuecomment-262611470,"First draft of the driver for antenna deployment system.


This change is","Reviewed 27 of 35 files at r8.
Review status: all files reviewed at latest revision, 2 unresolved discussions, some commit checks failed.

src/CMakeLists.txt, line 13 at r8 (raw file):

    commands/state_command.cpp
    commands/i2c_test_command.cpp
	commands/antenna.cpp

The same file is listed twice

src/main.cpp, line 290 at r8 (raw file):

    Main.I2C.Bus = (I2CBus*)&Main.I2CBuses[I2C_SYSTEM_BUS].ErrorHandling;
    Main.I2C.Payload = (I2CBus*)&Main.I2CBuses[I2C_PAYLOAD_BUS].ErrorHandling;

This has been moved to OBC ctor. No need to do it here

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,40,2016-11-02T17:59:28Z,2016-11-24T18:14:02Z,2016-11-24T18:39:18Z,MERGED,True,2934,146,51,https://github.com/zaq32,Antenna driver,24,[],https://github.com/PW-Sat2/PWSat2OBC/pull/40,https://github.com/zaq32,12,https://github.com/PW-Sat2/PWSat2OBC/pull/40#issuecomment-262707103,"First draft of the driver for antenna deployment system.


This change is","Review status: 46 of 52 files reviewed at latest revision, 2 unresolved discussions, some commit checks failed.

src/CMakeLists.txt, line 13 at r8 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
> The same file is listed twice

Fixed

src/main.cpp, line 290 at r8 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
> This has been moved to OBC ctor. No need to do it here

Fixed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,40,2016-11-02T17:59:28Z,2016-11-24T18:14:02Z,2016-11-24T18:39:18Z,MERGED,True,2934,146,51,https://github.com/zaq32,Antenna driver,24,[],https://github.com/PW-Sat2/PWSat2OBC/pull/40,https://github.com/Novakov,13,https://github.com/PW-Sat2/PWSat2OBC/pull/40#issuecomment-262827694,"First draft of the driver for antenna deployment system.


This change is","Reviewed 8 of 9 files at r9.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,40,2016-11-02T17:59:28Z,2016-11-24T18:14:02Z,2016-11-24T18:39:18Z,MERGED,True,2934,146,51,https://github.com/zaq32,Antenna driver,24,[],https://github.com/PW-Sat2/PWSat2OBC/pull/40,https://github.com/decu69,14,https://github.com/PW-Sat2/PWSat2OBC/pull/40#issuecomment-262830413,"First draft of the driver for antenna deployment system.


This change is","integration_tests/devices/antenna.py, line 5 at r3 (raw file):

import i2cMock
from i2cMock import I2CDevice
import inspect

this import should be higher than import i2cMock as it more general package
from: https://www.python.org/dev/peps/pep-0008/#imports

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,40,2016-11-02T17:59:28Z,2016-11-24T18:14:02Z,2016-11-24T18:39:18Z,MERGED,True,2934,146,51,https://github.com/zaq32,Antenna driver,24,[],https://github.com/PW-Sat2/PWSat2OBC/pull/40,https://github.com/decu69,15,https://github.com/PW-Sat2/PWSat2OBC/pull/40#issuecomment-262830458,"First draft of the driver for antenna deployment system.


This change is","Reviewed 5 of 37 files at r1, 5 of 13 files at r2, 4 of 23 files at r3, 1 of 1 files at r5.
Review status: all files reviewed at latest revision, 8 unresolved discussions.

integration_tests/devices/init.py, line 5 at r3 (raw file):

from antenna import *
from antenna import PRIMARY_ANTENNA_CONTROLLER_ADDRESS
from antenna import BACKUP_ANTENNA_CONTROLLER_ADDRESS

so implicit or explicit import from anttenna?

integration_tests/devices/antenna.py, line 7 at r3 (raw file):

import inspect

class Antenna():

I believe it would be better to use new-style classes inherited from object. Old-ones are deprecated.
http://stackoverflow.com/questions/54867/what-is-the-difference-between-old-style-and-new-style-classes-in-python

integration_tests/devices/antenna.py, line 12 at r3 (raw file):

    is_being_deployed = False

    def is_deployed(self):

@Property?

integration_tests/devices/antenna.py, line 26 at r3 (raw file):

        self.is_being_deployed = False

PRIMARY_ANTENNA_CONTROLLER_ADDRESS = 0x32

""Constants are usually defined on a module level and written in all capital letters with underscores separating words. ""

integration_tests/devices/antenna.py, line 54 at r3 (raw file):

    @staticmethod
    def call(method, default, *args):
        if not method is None:

isnt that always true?
if method ---- would not work?
or ""if method is not None""?
I think I might not understand what do you check here.

integration_tests/obc/antenna.py, line 2 at r5 (raw file):

from .obc_mixin import OBCMixin, command, decode_return
from enum import Enum, unique

imports order

integration_tests/system/system.py, line 43 at r5 (raw file):

        self.receiver = ReceiverDevice()
        self.primary_antenna = AntennaController(PRIMARY_ANTENNA_CONTROLLER_ADDRESS)
        self.backup_antenna = AntennaController(BACKUP_ANTENNA_CONTROLLER_ADDRESS)

backup address?  why do we need backup antenna?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,41,2016-11-02T18:38:16Z,2016-11-02T21:34:37Z,2016-11-02T21:34:38Z,MERGED,True,292,319,14,https://github.com/Novakov,Treat warnings as errors,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/41,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/41,"All warnings are treated as errors
GCC updated to 5.4 (toolchain pack also)



This change is","All warnings are treated as errors
GCC updated to 5.4 (toolchain pack also)



This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,41,2016-11-02T18:38:16Z,2016-11-02T21:34:37Z,2016-11-02T21:34:38Z,MERGED,True,292,319,14,https://github.com/Novakov,Treat warnings as errors,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/41,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/41#issuecomment-258003029,"All warnings are treated as errors
GCC updated to 5.4 (toolchain pack also)



This change is","Reviewed 14 of 14 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,42,2016-11-02T19:04:01Z,2016-11-02T19:12:42Z,2016-11-02T19:12:42Z,CLOSED,False,429,39,9,https://github.com/Novakov,Heap based on FreeRTOS heap4 for unit tests,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/42,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/42,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,43,2016-11-02T19:13:33Z,2016-11-04T17:18:27Z,2016-11-04T17:18:28Z,MERGED,True,450,39,9,https://github.com/Novakov,Heap based on FreeRTOS heap4 for unit tests,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/43,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/43,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,43,2016-11-02T19:13:33Z,2016-11-04T17:18:27Z,2016-11-04T17:18:28Z,MERGED,True,450,39,9,https://github.com/Novakov,Heap based on FreeRTOS heap4 for unit tests,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/43,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/43#issuecomment-258003601,This change is,"Reviewed 6 of 9 files at r1.
Review status: 6 of 9 files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,43,2016-11-02T19:13:33Z,2016-11-04T17:18:27Z,2016-11-04T17:18:28Z,MERGED,True,450,39,9,https://github.com/Novakov,Heap based on FreeRTOS heap4 for unit tests,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/43,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/43#issuecomment-258003667,This change is,"Reviewed 1 of 9 files at r1.
Review status: 7 of 9 files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,43,2016-11-02T19:13:33Z,2016-11-04T17:18:27Z,2016-11-04T17:18:28Z,MERGED,True,450,39,9,https://github.com/Novakov,Heap based on FreeRTOS heap4 for unit tests,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/43,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/43#issuecomment-258422652,This change is,"Reviewed 3 of 3 files at r2.
Review status: all files reviewed at latest revision, 7 unresolved discussions.

unit_tests/mem.cpp, line 11 at r2 (raw file):

}

void* operator new(std::size_t sz)

You should also define following overloads of operator new:
void* operator new[](std::size_t size);          // for arrays
void* operator new(std::size_t count, const std::nothrow_t& tag);    // non throwing  variant of new operator for single objects
void* operator new[](std::size_t count, const std::nothrow_t& tag);    // non throwing  variant of new operator for arrays


unit_tests/mem.cpp, line 13 at r2 (raw file):

void* operator new(std::size_t sz)
{
    return pvPortMalloc(sz);

in case of allocation failure operator new should throw std::bad_alloc exception.

unit_tests/mem.cpp, line 15 at r2 (raw file):

    return pvPortMalloc(sz);
}
void operator delete(void* ptr) noexcept

you should also define following overloads of delete operator:
void operator delete[]( void* ptr );           // for arrays
void operator delete  ( void* ptr, const std::nothrow_t& tag );            // counterpart of non throwing variant of new operator for objects
void operator delete[]( void* ptr, const std::nothrow_t& tag );            // counterpart of non throwing variant of new operator for arrays


unit_tests/mem.cpp, line 17 at r2 (raw file):

void operator delete(void* ptr) noexcept
{
    vPortFree(ptr);

operator delete should check if ptr is null and ignore it in such case.

unit_tests/mem.cpp, line 19 at r2 (raw file):

    vPortFree(ptr);
}
void operator delete(void* ptr, std::size_t alignment) noexcept

this operator should have corresponding operator new defined:
void* operator new  ( std::size_t count, std::align_val_t al);


unit_tests/mem.cpp, line 19 at r2 (raw file):

    vPortFree(ptr);
}
void operator delete(void* ptr, std::size_t alignment) noexcept

Also when you define delete operator that supports non standard alignment you should also define following variants:
void* operator new[]( std::size_t count, std::align_val_t al);
void* operator new  ( std::size_t count, std::align_val_t al, const std::nothrow_t&);
void* operator new[]( std::size_t count, std::align_val_t al, const std::nothrow_t&);
void operator delete[]( void* ptr, std::size_t sz, std::align_val_t al);
void operator delete  ( void* ptr, std::align_val_t al, const std::nothrow_t& tag);
void operator delete[]( void* ptr, std::align_val_t al, const std::nothrow_t& tag);


unit_tests/FileSystem/FileSystemTest.cpp, line 77 at r2 (raw file):

{
    const size_t bufferSize = 10240;
    auto buffer = new uint8_t[bufferSize];

This buffer is not freed at all.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,43,2016-11-02T19:13:33Z,2016-11-04T17:18:27Z,2016-11-04T17:18:28Z,MERGED,True,450,39,9,https://github.com/Novakov,Heap based on FreeRTOS heap4 for unit tests,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/43,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/43#issuecomment-258476800,This change is,"Review status: all files reviewed at latest revision, 6 unresolved discussions.

unit_tests/mem.cpp, line 19 at r2 (raw file):

Previously, zaq32 (ukasz ak) wrote

this operator should have corresponding operator new defined:
void* operator new  ( std::size_t count, std::align_val_t al);


Actually no, this is sized delete operator from C++14. My mistake.


Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,43,2016-11-02T19:13:33Z,2016-11-04T17:18:27Z,2016-11-04T17:18:28Z,MERGED,True,450,39,9,https://github.com/Novakov,Heap based on FreeRTOS heap4 for unit tests,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/43,https://github.com/Novakov,6,https://github.com/PW-Sat2/PWSat2OBC/pull/43#issuecomment-258490036,This change is,"Review status: 7 of 9 files reviewed at latest revision, 7 unresolved discussions.

unit_tests/mem.cpp, line 13 at r2 (raw file):

Previously, zaq32 (ukasz ak) wrote

in case of allocation failure operator new should throw std::bad_alloc exception.

Done.


unit_tests/mem.cpp, line 15 at r2 (raw file):

Previously, zaq32 (ukasz ak) wrote

you should also define following overloads of delete operator:
void operator delete[]( void* ptr );           // for arrays
void operator delete  ( void* ptr, const std::nothrow_t& tag );            // counterpart of non throwing variant of new operator for objects
void operator delete[]( void* ptr, const std::nothrow_t& tag );            // counterpart of non throwing variant of new operator for arrays


It is enough to implement minimal versions


unit_tests/mem.cpp, line 17 at r2 (raw file):

Previously, zaq32 (ukasz ak) wrote

operator delete should check if ptr is null and ignore it in such case.

Done.


unit_tests/mem.cpp, line 19 at r2 (raw file):

Previously, zaq32 (ukasz ak) wrote

Actually no, this is sized delete operator from C++14. My mistake.

Done.


unit_tests/mem.cpp, line 19 at r2 (raw file):

Previously, zaq32 (ukasz ak) wrote

Also when you define delete operator that supports non standard alignment you should also define following variants:
void* operator new[]( std::size_t count, std::align_val_t al);
void* operator new  ( std::size_t count, std::align_val_t al, const std::nothrow_t&);
void* operator new[]( std::size_t count, std::align_val_t al, const std::nothrow_t&);
void operator delete[]( void* ptr, std::size_t sz, std::align_val_t al);
void operator delete  ( void* ptr, std::align_val_t al, const std::nothrow_t& tag);
void operator delete[]( void* ptr, std::align_val_t al, const std::nothrow_t& tag);


It is enough to implement minimal versions


unit_tests/FileSystem/FileSystemTest.cpp, line 77 at r2 (raw file):

Previously, zaq32 (ukasz ak) wrote

This buffer is not freed at all.

Done.


Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,43,2016-11-02T19:13:33Z,2016-11-04T17:18:27Z,2016-11-04T17:18:28Z,MERGED,True,450,39,9,https://github.com/Novakov,Heap based on FreeRTOS heap4 for unit tests,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/43,https://github.com/Novakov,7,https://github.com/PW-Sat2/PWSat2OBC/pull/43#issuecomment-258490075,This change is,"Review status: 7 of 9 files reviewed at latest revision, 6 unresolved discussions.

unit_tests/mem.cpp, line 11 at r2 (raw file):

Previously, zaq32 (ukasz ak) wrote

You should also define following overloads of operator new:
void* operator new[](std::size_t size);          // for arrays
void* operator new(std::size_t count, const std::nothrow_t& tag);    // non throwing  variant of new operator for single objects
void* operator new[](std::size_t count, const std::nothrow_t& tag);    // non throwing  variant of new operator for arrays


It is enough to implement minimal versions


Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,43,2016-11-02T19:13:33Z,2016-11-04T17:18:27Z,2016-11-04T17:18:28Z,MERGED,True,450,39,9,https://github.com/Novakov,Heap based on FreeRTOS heap4 for unit tests,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/43,https://github.com/zaq32,8,https://github.com/PW-Sat2/PWSat2OBC/pull/43#issuecomment-258491287,This change is,"Reviewed 2 of 2 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,43,2016-11-02T19:13:33Z,2016-11-04T17:18:27Z,2016-11-04T17:18:28Z,MERGED,True,450,39,9,https://github.com/Novakov,Heap based on FreeRTOS heap4 for unit tests,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/43,https://github.com/zaq32,9,https://github.com/PW-Sat2/PWSat2OBC/pull/43#issuecomment-258491350,This change is,"Review status: all files reviewed at latest revision, all discussions resolved, some commit checks pending.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,44,2016-11-03T17:35:56Z,2016-11-11T17:23:46Z,2016-11-11T17:23:47Z,MERGED,True,336,27,18,https://github.com/Novakov,Smart wait,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/44,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/44,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,44,2016-11-03T17:35:56Z,2016-11-11T17:23:46Z,2016-11-11T17:23:47Z,MERGED,True,336,27,18,https://github.com/Novakov,Smart wait,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/44,https://github.com/decu69,2,https://github.com/PW-Sat2/PWSat2OBC/pull/44#issuecomment-258251345,This change is,"libs/os/os.c, line 187 at r1 (raw file):

    OSEventBits result = EventGroupWaitForBits((OSEventGroupHandle)handle, 0x80, true, true, timeout);

    if (result == 0x80)

shouldnt be moved to some const?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,44,2016-11-03T17:35:56Z,2016-11-11T17:23:46Z,2016-11-11T17:23:47Z,MERGED,True,336,27,18,https://github.com/Novakov,Smart wait,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/44,https://github.com/decu69,3,https://github.com/PW-Sat2/PWSat2OBC/pull/44#issuecomment-258257578,This change is,"libs/time/timer.c, line 426 at r1 (raw file):

        }

        if (TimePointLessThan(time, missionTime))

dont get that. Documentation says that it should return true when time is achieved. Calling that method suggest something different.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,44,2016-11-03T17:35:56Z,2016-11-11T17:23:46Z,2016-11-11T17:23:47Z,MERGED,True,336,27,18,https://github.com/Novakov,Smart wait,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/44,https://github.com/decu69,4,https://github.com/PW-Sat2/PWSat2OBC/pull/44#issuecomment-258260505,This change is,"unit_tests/time/SmartWait.cpp, line 50 at r1 (raw file):

        }));

    auto result = TimeLongDelayUntil(&timeProvider, TimePointBuild(0, 0, 10, 0, 0));

so it will simulate 10 min delay? (called 10 times adding each time 1 minute?)

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,44,2016-11-03T17:35:56Z,2016-11-11T17:23:46Z,2016-11-11T17:23:47Z,MERGED,True,336,27,18,https://github.com/Novakov,Smart wait,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/44,https://github.com/decu69,5,https://github.com/PW-Sat2/PWSat2OBC/pull/44#issuecomment-258261817,This change is,"unit_tests/time/SmartWait.cpp, line 30 at r1 (raw file):

}

TEST_F(SmartWaitTest, ShouldReturnImmediatelyIfAlreadyAfterDesiredTime)

how do you know that is that immediately? Second part of the name of the test is not clear for me.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,44,2016-11-03T17:35:56Z,2016-11-11T17:23:46Z,2016-11-11T17:23:47Z,MERGED,True,336,27,18,https://github.com/Novakov,Smart wait,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/44,https://github.com/decu69,6,https://github.com/PW-Sat2/PWSat2OBC/pull/44#issuecomment-258262373,This change is,"Reviewed 16 of 16 files at r1.
Review status: all files reviewed at latest revision, 4 unresolved discussions.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,44,2016-11-03T17:35:56Z,2016-11-11T17:23:46Z,2016-11-11T17:23:47Z,MERGED,True,336,27,18,https://github.com/Novakov,Smart wait,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/44,https://github.com/zaq32,7,https://github.com/PW-Sat2/PWSat2OBC/pull/44#issuecomment-258430782,This change is,"Reviewed 13 of 16 files at r1.
Review status: all files reviewed at latest revision, 8 unresolved discussions.

libs/time/timer.c, line 141 at r1 (raw file):

    }

    provider->TickNotification = System.CreatePulseAll();

timer should report initialization failure when this event group could not be created.

libs/time/timer.c, line 426 at r1 (raw file):

Previously, decu69 wrote

dont get that. Documentation says that it should return true when time is achieved. Calling that method suggest something different.

yes those parameters seem to be in wrong order


libs/time/include/time/timer.h, line 112 at r1 (raw file):

    OSSemaphoreHandle notificationLock;

    OSEventGroupHandle TickNotification;

undocumented

unit_tests/time/SmartWait.cpp, line 38 at r1 (raw file):

}

TEST_F(SmartWaitTest, ShouldWaitForPulseAndReturnIfDesiredTimeReached)

I'd also test what happens when PulseWait returns error/timeout.

unit_tests/time/SmartWait.cpp, line 42 at r1 (raw file):

    timeProvider.CurrentTime = TimePointToTimeSpan(TimePointBuild(0, 0, 0, 0, 0));

    EXPECT_CALL(osMock, PulseWait(_, _))

I'd add verification how many times PulseWait procedure has been called.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,44,2016-11-03T17:35:56Z,2016-11-11T17:23:46Z,2016-11-11T17:23:47Z,MERGED,True,336,27,18,https://github.com/Novakov,Smart wait,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/44,https://github.com/Novakov,8,https://github.com/PW-Sat2/PWSat2OBC/pull/44#issuecomment-258507847,This change is,"Review status: all files reviewed at latest revision, 8 unresolved discussions.

libs/os/os.c, line 187 at r1 (raw file):

Previously, decu69 wrote

shouldnt be moved to some const?

Done.


libs/time/timer.c, line 141 at r1 (raw file):

Previously, zaq32 (ukasz ak) wrote

timer should report initialization failure when this event group could not be created.

Done.


libs/time/timer.c, line 426 at r1 (raw file):

Previously, zaq32 (ukasz ak) wrote

yes those parameters seem to be in wrong order

`TimePointLessThan(time, missionTime)` => `time < missionTime`.  Current mission time is _after_ desired time, so parameters are in good order


libs/time/include/time/timer.h, line 112 at r1 (raw file):

Previously, zaq32 (ukasz ak) wrote

undocumented

Done.


unit_tests/time/SmartWait.cpp, line 30 at r1 (raw file):

Previously, decu69 wrote

how do you know that is that immediately? Second part of the name of the test is not clear for me.

I've added another assertion


unit_tests/time/SmartWait.cpp, line 38 at r1 (raw file):

Previously, zaq32 (ukasz ak) wrote

I'd also test what happens when PulseWait returns error/timeout.

Done.


unit_tests/time/SmartWait.cpp, line 42 at r1 (raw file):

Previously, zaq32 (ukasz ak) wrote

I'd add verification how many times PulseWait procedure has been called.

Done.


unit_tests/time/SmartWait.cpp, line 50 at r1 (raw file):

Previously, decu69 wrote

so it will simulate 10 min delay? (called 10 times adding each time 1 minute?)

Right


Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,44,2016-11-03T17:35:56Z,2016-11-11T17:23:46Z,2016-11-11T17:23:47Z,MERGED,True,336,27,18,https://github.com/Novakov,Smart wait,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/44,https://github.com/zaq32,9,https://github.com/PW-Sat2/PWSat2OBC/pull/44#issuecomment-258511436,This change is,"Reviewed 8 of 8 files at r2.
Review status: all files reviewed at latest revision, 4 unresolved discussions.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,44,2016-11-03T17:35:56Z,2016-11-11T17:23:46Z,2016-11-11T17:23:47Z,MERGED,True,336,27,18,https://github.com/Novakov,Smart wait,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/44,https://github.com/decu69,10,https://github.com/PW-Sat2/PWSat2OBC/pull/44#issuecomment-258612931,This change is,"libs/time/timer.c, line 426 at r1 (raw file):

Previously, Novakov (Maciej T. Nowak) wrote

TimePointLessThan(time, missionTime) => time < missionTime.  Current mission time is after desired time, so parameters are in good order

My question was not about the order of parameters but the logic. Documentation says that the whole method TimeLongDelayUntil should return true IF desired time is achieved. This commented IF is something I dont understand why we compare desired time with mission time and we return true from it (as we need to wait to achieve desired time? as next IF checks that?)

So I believe (if I correctly understand, but it seems I do not ;)) that we should check
if desiredTime >= currentTime and then return from that loop (true)? as it would mean we achieved desired time?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,44,2016-11-03T17:35:56Z,2016-11-11T17:23:46Z,2016-11-11T17:23:47Z,MERGED,True,336,27,18,https://github.com/Novakov,Smart wait,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/44,https://github.com/decu69,11,https://github.com/PW-Sat2/PWSat2OBC/pull/44#issuecomment-258613488,This change is,"libs/os/os.c, line 187 at r1 (raw file):

Previously, Novakov (Maciej T. Nowak) wrote

Done.

fine. btw. this value comes from the system? it is always 0x80?


Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,44,2016-11-03T17:35:56Z,2016-11-11T17:23:46Z,2016-11-11T17:23:47Z,MERGED,True,336,27,18,https://github.com/Novakov,Smart wait,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/44,https://github.com/decu69,12,https://github.com/PW-Sat2/PWSat2OBC/pull/44#issuecomment-258613853,This change is,"unit_tests/time/timer.cpp, line 48 at r2 (raw file):

    ON_CALL(os, GiveSemaphore(_)).WillByDefault(Return(OSResultSuccess));

    EXPECT_CALL(os, CreatePulseAll()).WillOnce(Return(reinterpret_cast<void*>(3)));

This doesnt explain much for me. ""TimerTest"" naming not clear for me. Why here is 3? Maybe we can talk f2f to understand this ;)

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,44,2016-11-03T17:35:56Z,2016-11-11T17:23:46Z,2016-11-11T17:23:47Z,MERGED,True,336,27,18,https://github.com/Novakov,Smart wait,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/44,https://github.com/Novakov,13,https://github.com/PW-Sat2/PWSat2OBC/pull/44#issuecomment-258614076,This change is,"Review status: all files reviewed at latest revision, 3 unresolved discussions.

libs/os/os.c, line 187 at r1 (raw file):

Previously, decu69 wrote

fine. btw. this value comes from the system? it is always 0x80?

Just some number with single bit set, is could be 0x08 as well. 


libs/time/timer.c, line 426 at r1 (raw file):

Previously, decu69 wrote

My question was not about the order of parameters but the logic. Documentation says that the whole method TimeLongDelayUntil should return true IF desired time is achieved. This commented IF is something I dont understand why we compare desired time with mission time and we return true from it (as we need to wait to achieve desired time? as next IF checks that?)
So I believe (if I correctly understand, but it seems I do not ;)) that we should check
if desiredTime >= currentTime and then return from that loop (true)? as it would mean we achieved desired time?

`TimeLongDelayUntil` waits until time is achived (e.g. 5 minutes). It is done by checking mission time after each timer tick. 

It is possible that after tick, mission time and desired time are equal (second IF). More likely desired time will be between ticks, so wait will be a little long (up to tick length), so we need to check if mission time is after desired time.
Condition desiredTime >= currentTime, means that currentTime is before desiredTime, exiting in that condition will be cause no wait at all

unit_tests/time/timer.cpp, line 48 at r2 (raw file):

Previously, decu69 wrote

This doesnt explain much for me. ""TimerTest"" naming not clear for me. Why here is 3? Maybe we can talk f2f to understand this ;)

3 is as good as any other value. Some value must be returned but is has no significance in case of unit testing.

TimerTest is name of test fixture with tests related to keeping track of mission time

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,44,2016-11-03T17:35:56Z,2016-11-11T17:23:46Z,2016-11-11T17:23:47Z,MERGED,True,336,27,18,https://github.com/Novakov,Smart wait,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/44,https://github.com/Novakov,14,https://github.com/PW-Sat2/PWSat2OBC/pull/44#issuecomment-259944648,This change is,SmartWait,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,44,2016-11-03T17:35:56Z,2016-11-11T17:23:46Z,2016-11-11T17:23:47Z,MERGED,True,336,27,18,https://github.com/Novakov,Smart wait,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/44,https://github.com/decu69,15,https://github.com/PW-Sat2/PWSat2OBC/pull/44#issuecomment-260003354,This change is,"unit_tests/time/SmartWait.cpp, line 30 at r2 (raw file):

    osGuard = InstallProxy(&osMock);

    EXPECT_CALL(osMock, TakeSemaphore(_, _)).WillRepeatedly(Return(OSResultSuccess));

why is taking and giving calls here?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,44,2016-11-03T17:35:56Z,2016-11-11T17:23:46Z,2016-11-11T17:23:47Z,MERGED,True,336,27,18,https://github.com/Novakov,Smart wait,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/44,https://github.com/Novakov,16,https://github.com/PW-Sat2/PWSat2OBC/pull/44#issuecomment-260003835,This change is,"Review status: all files reviewed at latest revision, 1 unresolved discussion.

unit_tests/time/SmartWait.cpp, line 30 at r2 (raw file):

Previously, decu69 wrote

why is taking and giving calls here?

Because timer code is using semaphores but testing failures of these actions are not point of this tests, so it is easier to setup semaphore related functions to return  success


Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,44,2016-11-03T17:35:56Z,2016-11-11T17:23:46Z,2016-11-11T17:23:47Z,MERGED,True,336,27,18,https://github.com/Novakov,Smart wait,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/44,https://github.com/decu69,17,https://github.com/PW-Sat2/PWSat2OBC/pull/44#issuecomment-260005766,This change is,"Reviewed 8 of 8 files at r2.
Review status:  all files reviewed at latest revision, all discussions resolved, all commit checks successful.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,45,2016-11-06T18:28:53Z,2016-11-09T18:59:29Z,2016-11-09T18:59:30Z,MERGED,True,694,21,8,https://github.com/Novakov,Interactive console based on ipython,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/45,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/45,"Interactive console based on ipython allowing live interacting with OBC using the same API in tests (by system variable)
Log output is shown in separate window (wxWidgets).
Make target: pyconsole


This change is","Interactive console based on ipython allowing live interacting with OBC using the same API in tests (by system variable)
Log output is shown in separate window (wxWidgets).
Make target: pyconsole


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,45,2016-11-06T18:28:53Z,2016-11-09T18:59:29Z,2016-11-09T18:59:30Z,MERGED,True,694,21,8,https://github.com/Novakov,Interactive console based on ipython,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/45,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/45#issuecomment-258992625,"Interactive console based on ipython allowing live interacting with OBC using the same API in tests (by system variable)
Log output is shown in separate window (wxWidgets).
Make target: pyconsole


This change is","It would be nice to have documentation updated with information about this change at least in context of required tools & utilities.

Reviewed 8 of 8 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,46,2016-11-06T19:51:14Z,2016-11-11T10:51:31Z,2016-11-11T10:51:32Z,MERGED,True,204,65,9,https://github.com/Novakov,Refactor OBC API used in Python tests,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/46,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/46,"Separated OBCclass into base class which handles power control and command interface. All actual commands were moved to separate classes added as mixins to OBC.
Also few decorators have been defined to simplify creating command (format as attribute, base64 encoding/decoding of parameters)


This change is","Separated OBCclass into base class which handles power control and command interface. All actual commands were moved to separate classes added as mixins to OBC.
Also few decorators have been defined to simplify creating command (format as attribute, base64 encoding/decoding of parameters)


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,46,2016-11-06T19:51:14Z,2016-11-11T10:51:31Z,2016-11-11T10:51:32Z,MERGED,True,204,65,9,https://github.com/Novakov,Refactor OBC API used in Python tests,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/46,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/46#issuecomment-258994741,"Separated OBCclass into base class which handles power control and command interface. All actual commands were moved to separate classes added as mixins to OBC.
Also few decorators have been defined to simplify creating command (format as attribute, base64 encoding/decoding of parameters)


This change is","Reviewed 7 of 11 files at r1.
Review status: 7 of 11 files reviewed at latest revision, 1 unresolved discussion.

integration_tests/obc/CommandFormatter.py, line 10 at r1 (raw file):

            return b64encode(value).rstrip('=')

        return super(CommandFormatter, self).convert_field(value, conversion)

I'd prefer composition instead of inheritance especially in case of standard utilities.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,46,2016-11-06T19:51:14Z,2016-11-11T10:51:31Z,2016-11-11T10:51:32Z,MERGED,True,204,65,9,https://github.com/Novakov,Refactor OBC API used in Python tests,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/46,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/46#issuecomment-259199329,"Separated OBCclass into base class which handles power control and command interface. All actual commands were moved to separate classes added as mixins to OBC.
Also few decorators have been defined to simplify creating command (format as attribute, base64 encoding/decoding of parameters)


This change is","Review status: 7 of 11 files reviewed at latest revision, 1 unresolved discussion.

integration_tests/obc/CommandFormatter.py, line 10 at r1 (raw file):

Previously, zaq32 (ukasz ak) wrote

I'd prefer composition instead of inheritance especially in case of standard utilities.

`Formatter` is standard Python class that handles formating values. The only way to support more conversion is to subclass it. Unfortunately there is no interface-only base class 


Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,46,2016-11-06T19:51:14Z,2016-11-11T10:51:31Z,2016-11-11T10:51:32Z,MERGED,True,204,65,9,https://github.com/Novakov,Refactor OBC API used in Python tests,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/46,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/46#issuecomment-259203176,"Separated OBCclass into base class which handles power control and command interface. All actual commands were moved to separate classes added as mixins to OBC.
Also few decorators have been defined to simplify creating command (format as attribute, base64 encoding/decoding of parameters)


This change is","Review status: 7 of 11 files reviewed at latest revision, 1 unresolved discussion.

integration_tests/obc/CommandFormatter.py, line 10 at r1 (raw file):

Previously, Novakov (Maciej T. Nowak) wrote

Formatter is standard Python class that handles formating values. The only way to support more conversion is to subclass it. Unfortunately there is no interface-only base class

What about plain old aggregation/composition? 


Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,46,2016-11-06T19:51:14Z,2016-11-11T10:51:31Z,2016-11-11T10:51:32Z,MERGED,True,204,65,9,https://github.com/Novakov,Refactor OBC API used in Python tests,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/46,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/46#issuecomment-259625264,"Separated OBCclass into base class which handles power control and command interface. All actual commands were moved to separate classes added as mixins to OBC.
Also few decorators have been defined to simplify creating command (format as attribute, base64 encoding/decoding of parameters)


This change is","Review status: 5 of 10 files reviewed at latest revision, 1 unresolved discussion.

integration_tests/obc/CommandFormatter.py, line 10 at r1 (raw file):

Previously, zaq32 (ukasz ak) wrote

What about plain old aggregation/composition?

I've improved it a bit. 


Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,46,2016-11-06T19:51:14Z,2016-11-11T10:51:31Z,2016-11-11T10:51:32Z,MERGED,True,204,65,9,https://github.com/Novakov,Refactor OBC API used in Python tests,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/46,https://github.com/zaq32,6,https://github.com/PW-Sat2/PWSat2OBC/pull/46#issuecomment-259625503,"Separated OBCclass into base class which handles power control and command interface. All actual commands were moved to separate classes added as mixins to OBC.
Also few decorators have been defined to simplify creating command (format as attribute, base64 encoding/decoding of parameters)


This change is","Reviewed 1 of 3 files at r2.
Review status: 5 of 10 files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,46,2016-11-06T19:51:14Z,2016-11-11T10:51:31Z,2016-11-11T10:51:32Z,MERGED,True,204,65,9,https://github.com/Novakov,Refactor OBC API used in Python tests,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/46,https://github.com/zaq32,7,https://github.com/PW-Sat2/PWSat2OBC/pull/46#issuecomment-259932317,"Separated OBCclass into base class which handles power control and command interface. All actual commands were moved to separate classes added as mixins to OBC.
Also few decorators have been defined to simplify creating command (format as attribute, base64 encoding/decoding of parameters)


This change is","Reviewed 3 of 11 files at r1, 2 of 3 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,47,2016-11-11T14:30:14Z,2016-11-11T14:33:27Z,2016-11-11T14:33:27Z,CLOSED,False,2,0,1,https://github.com/Novakov,Exclude unit tests and external libraries from code coverage,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/47,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/47,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,48,2016-11-11T14:49:05Z,2016-11-11T14:56:04Z,2016-11-11T14:56:05Z,MERGED,True,2,0,1,https://github.com/Novakov,Exclude unit tests and external libraries from code coverage,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/48,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/48,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,48,2016-11-11T14:49:05Z,2016-11-11T14:56:04Z,2016-11-11T14:56:05Z,MERGED,True,2,0,1,https://github.com/Novakov,Exclude unit tests and external libraries from code coverage,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/48,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/48#issuecomment-259974125,This change is,"Reviewed 1 of 1 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,49,2016-11-17T10:27:29Z,2016-11-21T18:01:41Z,2016-11-24T19:24:32Z,MERGED,True,5761,5702,84,https://github.com/Novakov,C++,14,[],https://github.com/PW-Sat2/PWSat2OBC/pull/49,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/49,"Compile all files as C++ except external libs
Comm module updated to be more objective
Added GSL
OBC class will be responsible for constructing whole object graph and manage dependencies between them

Known issues:

all code except unit tests is compiled with -fno-exeptions. In case of call unit tests -> lib -> callback -> throw exception, QEmu will be terminated as there is no way to catch that exception



This change is","Compile all files as C++ except external libs
Comm module updated to be more objective
Added GSL
OBC class will be responsible for constructing whole object graph and manage dependencies between them

Known issues:

all code except unit tests is compiled with -fno-exeptions. In case of call unit tests -> lib -> callback -> throw exception, QEmu will be terminated as there is no way to catch that exception



This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,49,2016-11-17T10:27:29Z,2016-11-21T18:01:41Z,2016-11-24T19:24:32Z,MERGED,True,5761,5702,84,https://github.com/Novakov,C++,14,[],https://github.com/PW-Sat2/PWSat2OBC/pull/49,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/49#issuecomment-261311302,"Compile all files as C++ except external libs
Comm module updated to be more objective
Added GSL
OBC class will be responsible for constructing whole object graph and manage dependencies between them

Known issues:

all code except unit tests is compiled with -fno-exeptions. In case of call unit tests -> lib -> callback -> throw exception, QEmu will be terminated as there is no way to catch that exception



This change is","Reviewed 2 of 2 files at r1, 102 of 115 files at r2, 2 of 3 files at r3, 10 of 15 files at r4.
Review status: 77 of 83 files reviewed at latest revision, 3 unresolved discussions.

libs/storage/nand.cpp, line 341 at r4 (raw file):

    WriteProtect(true);

    return (FlashStatus)status;

use c++ style cast

src/commands/state_command.cpp, line 15 at r4 (raw file):

    int16_t cmd = atoi(args[0]);

    SetTerminalCommand((TerminalCommand)cmd);

use c++ style cast

unit_tests/test.cpp, line 1 at r4 (raw file):

#include <stdio.h>

use c++ version of this header: cstdio

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,49,2016-11-17T10:27:29Z,2016-11-21T18:01:41Z,2016-11-24T19:24:32Z,MERGED,True,5761,5702,84,https://github.com/Novakov,C++,14,[],https://github.com/PW-Sat2/PWSat2OBC/pull/49,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/49#issuecomment-261315742,"Compile all files as C++ except external libs
Comm module updated to be more objective
Added GSL
OBC class will be responsible for constructing whole object graph and manage dependencies between them

Known issues:

all code except unit tests is compiled with -fno-exeptions. In case of call unit tests -> lib -> callback -> throw exception, QEmu will be terminated as there is no way to catch that exception



This change is","Reviewed 5 of 115 files at r2, 5 of 15 files at r4.
Review status: all files reviewed at latest revision, 5 unresolved discussions.

libs/drivers/comm/Include/comm/comm.h, line 149 at r4 (raw file):

            {
                /**
                 * @brief Pointer to function that should be called whenever new frame is received.

out of date

libs/drivers/comm/Include/comm/comm.h, line 299 at r4 (raw file):

                 *
                 * @param[in] data Pointer to buffer that contains the frame contents.
                 * @param[in] length Size of the frame contents in bytes. This value cannot be

out of date

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,49,2016-11-17T10:27:29Z,2016-11-21T18:01:41Z,2016-11-24T19:24:32Z,MERGED,True,5761,5702,84,https://github.com/Novakov,C++,14,[],https://github.com/PW-Sat2/PWSat2OBC/pull/49,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/49#issuecomment-261317729,"Compile all files as C++ except external libs
Comm module updated to be more objective
Added GSL
OBC class will be responsible for constructing whole object graph and manage dependencies between them

Known issues:

all code except unit tests is compiled with -fno-exeptions. In case of call unit tests -> lib -> callback -> throw exception, QEmu will be terminated as there is no way to catch that exception



This change is","Review status: 78 of 83 files reviewed at latest revision, 5 unresolved discussions.

libs/drivers/comm/Include/comm/comm.h, line 149 at r4 (raw file):

Previously, zaq32 (ukasz ak) wrote

out of date

Done.


libs/drivers/comm/Include/comm/comm.h, line 299 at r4 (raw file):

Previously, zaq32 (ukasz ak) wrote

out of date

Done.


libs/storage/nand.cpp, line 341 at r4 (raw file):

Previously, zaq32 (ukasz ak) wrote

use c++ style cast

Done.


src/commands/state_command.cpp, line 15 at r4 (raw file):

Previously, zaq32 (ukasz ak) wrote

use c++ style cast

Done.


unit_tests/test.cpp, line 1 at r4 (raw file):

Previously, zaq32 (ukasz ak) wrote

use c++ version of this header: cstdio

Actually only `gtest/gtest.h` is used. removed rest of them


Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,49,2016-11-17T10:27:29Z,2016-11-21T18:01:41Z,2016-11-24T19:24:32Z,MERGED,True,5761,5702,84,https://github.com/Novakov,C++,14,[],https://github.com/PW-Sat2/PWSat2OBC/pull/49,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/49#issuecomment-261383181,"Compile all files as C++ except external libs
Comm module updated to be more objective
Added GSL
OBC class will be responsible for constructing whole object graph and manage dependencies between them

Known issues:

all code except unit tests is compiled with -fno-exeptions. In case of call unit tests -> lib -> callback -> throw exception, QEmu will be terminated as there is no way to catch that exception



This change is","Reviewed 3 of 115 files at r2, 5 of 5 files at r5.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,49,2016-11-17T10:27:29Z,2016-11-21T18:01:41Z,2016-11-24T19:24:32Z,MERGED,True,5761,5702,84,https://github.com/Novakov,C++,14,[],https://github.com/PW-Sat2/PWSat2OBC/pull/49,https://github.com/zaq32,6,https://github.com/PW-Sat2/PWSat2OBC/pull/49#issuecomment-261711099,"Compile all files as C++ except external libs
Comm module updated to be more objective
Added GSL
OBC class will be responsible for constructing whole object graph and manage dependencies between them

Known issues:

all code except unit tests is compiled with -fno-exeptions. In case of call unit tests -> lib -> callback -> throw exception, QEmu will be terminated as there is no way to catch that exception



This change is","Review status: all files reviewed at latest revision, 1 unresolved discussion, all commit checks successful.

libs/drivers/comm/Include/comm/comm.h, line 16 at r5 (raw file):

    namespace devices
    {
        namespace comm

three namespaces that's a bit too much.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,49,2016-11-17T10:27:29Z,2016-11-21T18:01:41Z,2016-11-24T19:24:32Z,MERGED,True,5761,5702,84,https://github.com/Novakov,C++,14,[],https://github.com/PW-Sat2/PWSat2OBC/pull/49,https://github.com/Novakov,7,https://github.com/PW-Sat2/PWSat2OBC/pull/49#issuecomment-261954326,"Compile all files as C++ except external libs
Comm module updated to be more objective
Added GSL
OBC class will be responsible for constructing whole object graph and manage dependencies between them

Known issues:

all code except unit tests is compiled with -fno-exeptions. In case of call unit tests -> lib -> callback -> throw exception, QEmu will be terminated as there is no way to catch that exception



This change is","Review status: 77 of 83 files reviewed at latest revision, 1 unresolved discussion.

libs/drivers/comm/Include/comm/comm.h, line 16 at r5 (raw file):
Previously, zaq32 (ukasz ak) wrote
> three namespaces that's a bit too much. 

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,49,2016-11-17T10:27:29Z,2016-11-21T18:01:41Z,2016-11-24T19:24:32Z,MERGED,True,5761,5702,84,https://github.com/Novakov,C++,14,[],https://github.com/PW-Sat2/PWSat2OBC/pull/49,https://github.com/zaq32,8,https://github.com/PW-Sat2/PWSat2OBC/pull/49#issuecomment-262017108,"Compile all files as C++ except external libs
Comm module updated to be more objective
Added GSL
OBC class will be responsible for constructing whole object graph and manage dependencies between them

Known issues:

all code except unit tests is compiled with -fno-exeptions. In case of call unit tests -> lib -> callback -> throw exception, QEmu will be terminated as there is no way to catch that exception



This change is","Reviewed 3 of 115 files at r2, 6 of 6 files at r6.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,50,2016-11-22T21:01:12Z,2016-12-01T18:06:11Z,2016-12-01T18:06:12Z,MERGED,True,812,67,33,https://github.com/Novakov,Telecommand handling,15,[],https://github.com/PW-Sat2/PWSat2OBC/pull/50,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/50,"Simple telecommand handling

no encoding, no encryption
just ping command



This change is","Simple telecommand handling

no encoding, no encryption
just ping command



This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,50,2016-11-22T21:01:12Z,2016-12-01T18:06:11Z,2016-12-01T18:06:12Z,MERGED,True,812,67,33,https://github.com/Novakov,Telecommand handling,15,[],https://github.com/PW-Sat2/PWSat2OBC/pull/50,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/50#issuecomment-262442917,"Simple telecommand handling

no encoding, no encryption
just ping command



This change is","Reviewed 26 of 36 files at r1.
Review status: 26 of 36 files reviewed at latest revision, 7 unresolved discussions, some commit checks failed.

libs/base/Include/system.h, line 4 at r1 (raw file):

#define SRC_SYSTEM_H_

#include <stddef.h>

use cstddef

libs/base/Include/system.h, line 49 at r1 (raw file):

size_t RoundToMultiply(size_t value, size_t base);

template <typename Enum> typename std::underlying_type_t<Enum> num(Enum v)

incorrect return type it should be
std::underlyingtype<Enum>::type


libs/base/Include/system.h, line 51 at r1 (raw file):

template <typename Enum> typename std::underlying_type_t<Enum> num(Enum v)
{
    return static_cast<typename std::underlying_type_t<Enum>>(v);

see above

libs/drivers/adxrs453/adxrs453.cpp, line 2 at r1 (raw file):

#include ""adxrs453.h""
#include <stdint.h>

use cstdint

libs/drivers/comm/Include/comm/comm.h, line 151 at r1 (raw file):

             *
             */
            virtual void HandleFrame(CommFrame& frame) = 0;

How are you going to send responses without access to ComObject?

platforms/DevBoard/platform.cpp, line 5 at r1 (raw file):

#include ""system.h""

alignas(4) const uint8_t EncryptionKey[] = {0xFF, 0xEE, 0xDD, 0xCC, 0xBB, 0xAA, 0x99, 0x88, 0x77, 0x66, 0x55, 0x44, 0x33, 0x22, 0x11, 0x00};

I thought this was supposed to be confidential

platforms/DevBoard/Include/platform.h, line 4 at r1 (raw file):

#define PLATFORMS_DEVBOARD_INCLUDE_PLATFORM_H_

#include <stdint.h>

use cstdint header

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,50,2016-11-22T21:01:12Z,2016-12-01T18:06:11Z,2016-12-01T18:06:12Z,MERGED,True,812,67,33,https://github.com/Novakov,Telecommand handling,15,[],https://github.com/PW-Sat2/PWSat2OBC/pull/50,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/50#issuecomment-262604318,"Simple telecommand handling

no encoding, no encryption
just ping command



This change is","Review status: 16 of 33 files reviewed at latest revision, 7 unresolved discussions.

libs/base/Include/system.h, line 4 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
> use cstddef

Done.

libs/base/Include/system.h, line 49 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
> incorrect return type it should be 
> ```
> std::underlyingtype::type
> ```

Since C++14 it is possible to use shorter version: http://en.cppreference.com/w/cpp/types/underlying_type

libs/base/Include/system.h, line 51 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
> see above

see above

libs/drivers/adxrs453/adxrs453.cpp, line 2 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
> use cstdint

Done.

libs/drivers/comm/Include/comm/comm.h, line 151 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
> How are you going to send responses without access to ComObject?

I've added dedicated interface used to send frames back. Changing to more elaborate mechanism will be added after implementing downlink protocol

platforms/DevBoard/platform.cpp, line 5 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
> I thought this was supposed to be confidential

Actually it is not needed (yet). Removed whole file

platforms/DevBoard/Include/platform.h, line 4 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
> use cstdint header

Removed file as not needed yet

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,50,2016-11-22T21:01:12Z,2016-12-01T18:06:11Z,2016-12-01T18:06:12Z,MERGED,True,812,67,33,https://github.com/Novakov,Telecommand handling,15,[],https://github.com/PW-Sat2/PWSat2OBC/pull/50,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/50#issuecomment-262819693,"Simple telecommand handling

no encoding, no encryption
just ping command



This change is","Reviewed 5 of 36 files at r1, 14 of 15 files at r2.
Review status: all files reviewed at latest revision, 15 unresolved discussions.

libs/base/utils.cpp, line 3 at r2 (raw file):

#include <stddef.h>

size_t RoundToMultiply(size_t value, size_t base)

this function is not used anywhere.

libs/drivers/adxrs453/adxrs453.cpp, line 10 at r2 (raw file):

#include ""system.h""

using namespace std;

in general using namespace is ok but I would treat it as last resort. Prefer using 'using directives' i.e.
using std::array


libs/drivers/comm/Include/comm/comm.h, line 68 at r2 (raw file):

            /** @brief Frame content. */
            std::uint8_t Contents[COMM_MAX_FRAME_CONTENTS_SIZE];

since now we are using c++ it wold there is no need to use this fixed size buffer and copy the frame contents into it every time we get a frame.
It may be simpler to just use gsl::span instead.

libs/telecommand_handling/telecommand_handling.cpp, line 3 at r2 (raw file):

#include <stdalign.h>
#include <stdint.h>
#include <em_aes.h>

unused

libs/telecommand_handling/telecommand_handling.cpp, line 27 at r2 (raw file):

void IncomingTelecommandHandler::HandleFrame(ITransmitFrame& transmitter, CommFrame& frame)
{
    uint8_t decryptedFrame[DecryptionBufferSize] = {0};

use std::array instead

libs/telecommand_handling/uplink.cpp, line 10 at r2 (raw file):

DecryptStatus UplinkProtocol::Decrypt(gsl::span<const uint8_t> frame, gsl::span<uint8_t> decrypted, size_t& decryptedDataLength)
{
    auto lastCopied = std::copy(frame.cbegin(), frame.cend(), decrypted.begin());

missing include 

libs/telecommand_handling/include/telecommand_handling/telecommand_handling.h, line 55 at r2 (raw file):

             * @return Operation status
             */
            virtual DecryptStatus Decrypt(

Use more complex return type instead of out parameters. Out parameters may be accidentally left uninitialized return value can't.

libs/telecommand_handling/include/telecommand_handling/telecommand_handling.h, line 71 at r2 (raw file):

             * @return Operation status
             */
            virtual DecodeFrameStatus Decode(

Use more complex return type instead of out parameters

libs/telecommand_handling/include/telecommand_handling/telecommand_handling.h, line 97 at r2 (raw file):

         * Incoming frame handler that is capable of decoding them and dispatching telecommands
         */
        class IncomingTelecommandHandler : public devices::comm::IHandleFrame

Consider making this class a template that takes as parameter frame decryptor

libs/telecommand_handling/include/telecommand_handling/telecommand_handling.h, line 97 at r2 (raw file):

         * Incoming frame handler that is capable of decoding them and dispatching telecommands
         */
        class IncomingTelecommandHandler : public devices::comm::IHandleFrame

if you are going to use interfaces mark their implementation as final to make it easier for the optimizer to devirtualize the functions during the optimization

libs/telecommand_handling/include/telecommand_handling/telecommand_handling.h, line 118 at r2 (raw file):

          private:
            /** @brief Frame decryption implementation */
            IDecryptFrame& _decryptFrame;

In general fields should be the last thing defined in class as they are least interesting from class user point of view

src/communication.cpp, line 1 at r2 (raw file):

#include ""communication.h""

The command handlers should be tested as well therefore they cannot be defined in main project.

src/communication.h, line 5 at r2 (raw file):

#include <gsl/span>
#include ""comm/comm.h""
#include ""i2c/i2c.h""

the only reason this header is needed is to declare the I2CBus type. We should start preparing headers with just forward declarations.

src/communication.h, line 6 at r2 (raw file):

#include ""comm/comm.h""
#include ""i2c/i2c.h""
#include ""system.h""

this header seems to be unused

unit_tests/TeleCommandHandling/TeleCommandHandlingTest.cpp, line 76 at r2 (raw file):

    EXPECT_CALL(this->deps, Decrypt(_, _, _))
        .WillOnce(Invoke([](gsl::span<const uint8_t> frame, gsl::span<uint8_t> decrypted, size_t& decryptedDataLength) {

This would be much more clear if the Decrypt method used only return value to report the results.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,50,2016-11-22T21:01:12Z,2016-12-01T18:06:11Z,2016-12-01T18:06:12Z,MERGED,True,812,67,33,https://github.com/Novakov,Telecommand handling,15,[],https://github.com/PW-Sat2/PWSat2OBC/pull/50,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/50#issuecomment-263031014,"Simple telecommand handling

no encoding, no encryption
just ping command



This change is","Review status: 10 of 32 files reviewed at latest revision, 15 unresolved discussions.

libs/drivers/adxrs453/adxrs453.cpp, line 10 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
> in general using namespace is ok but I would treat it as last resort. Prefer using 'using directives' i.e. 
> ```
> using std::array
> ```

Done.

libs/drivers/comm/Include/comm/comm.h, line 68 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
> since now we are using c++ it wold there is no need to use this fixed size buffer and copy the frame contents into it every time we get a frame. 
> It may be simpler to just use gsl::span instead.

using `gsl::span` will require changes to comm low-level driver that I'm not so sure (at least now). Currently Method `CommObject::ReceiveFrame` is filling frame object that is passed as reference. Buffer for received data is local, so span will be referencing local variable
Changed that to std::array.

libs/telecommand_handling/telecommand_handling.cpp, line 3 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
> unused

Done.

libs/telecommand_handling/telecommand_handling.cpp, line 27 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
> use std::array instead

Done.

libs/telecommand_handling/uplink.cpp, line 10 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
> missing include 

Done.

libs/telecommand_handling/include/telecommand_handling/telecommand_handling.h, line 55 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
> Use more complex return type instead of out parameters. Out parameters may be accidentally left uninitialized return value can't.

Done.

libs/telecommand_handling/include/telecommand_handling/telecommand_handling.h, line 71 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
> Use more complex return type instead of out parameters

Done.

libs/telecommand_handling/include/telecommand_handling/telecommand_handling.h, line 97 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
> if you are going to use interfaces mark their implementation as final to make it easier for the optimizer to devirtualize the functions during the optimization

Done.

libs/telecommand_handling/include/telecommand_handling/telecommand_handling.h, line 97 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
> Consider making this class a template that takes as parameter frame decryptor

Not saying no but I'm not convinced at the moment. It's quick change, maybe I'll try it later

libs/telecommand_handling/include/telecommand_handling/telecommand_handling.h, line 118 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
> In general fields should be the last thing defined in class as they are least interesting from class user point of view

Done.

src/communication.cpp, line 1 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
> The command handlers should be tested as well therefore they cannot be defined in main project.

They will be tested and will not be defined in main project. For now there's only Ping telecommand but nothing prevents them from being defined anywhere they want.

src/communication.h, line 5 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
> the only reason this header is needed is to declare the I2CBus type. We should start preparing headers with just forward declarations.

I2C driver update is coming soon

src/communication.h, line 6 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
> this header seems to be unused

Done.

unit_tests/TeleCommandHandling/TeleCommandHandlingTest.cpp, line 76 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
> This would be much more clear if the Decrypt method used only return value to report the results.

Done.

libs/base/utils.cpp, line 3 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
> this function is not used anywhere.

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,50,2016-11-22T21:01:12Z,2016-12-01T18:06:11Z,2016-12-01T18:06:12Z,MERGED,True,812,67,33,https://github.com/Novakov,Telecommand handling,15,[],https://github.com/PW-Sat2/PWSat2OBC/pull/50,https://github.com/Novakov,6,https://github.com/PW-Sat2/PWSat2OBC/pull/50#issuecomment-263061443,"Simple telecommand handling

no encoding, no encryption
just ping command



This change is",Telecommands handling,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,50,2016-11-22T21:01:12Z,2016-12-01T18:06:11Z,2016-12-01T18:06:12Z,MERGED,True,812,67,33,https://github.com/Novakov,Telecommand handling,15,[],https://github.com/PW-Sat2/PWSat2OBC/pull/50,https://github.com/zaq32,7,https://github.com/PW-Sat2/PWSat2OBC/pull/50#issuecomment-263390908,"Simple telecommand handling

no encoding, no encryption
just ping command



This change is","Reviewed 18 of 24 files at r3.
Review status: 27 of 32 files reviewed at latest revision, 2 unresolved discussions.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,50,2016-11-22T21:01:12Z,2016-12-01T18:06:11Z,2016-12-01T18:06:12Z,MERGED,True,812,67,33,https://github.com/Novakov,Telecommand handling,15,[],https://github.com/PW-Sat2/PWSat2OBC/pull/50,https://github.com/zaq32,8,https://github.com/PW-Sat2/PWSat2OBC/pull/50#issuecomment-264011778,"Simple telecommand handling

no encoding, no encryption
just ping command



This change is","Reviewed 5 of 24 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,50,2016-11-22T21:01:12Z,2016-12-01T18:06:11Z,2016-12-01T18:06:12Z,MERGED,True,812,67,33,https://github.com/Novakov,Telecommand handling,15,[],https://github.com/PW-Sat2/PWSat2OBC/pull/50,https://github.com/zaq32,9,https://github.com/PW-Sat2/PWSat2OBC/pull/50#issuecomment-264246528,"Simple telecommand handling

no encoding, no encryption
just ping command



This change is","Reviewed 1 of 16 files at r4.
Review status: 18 of 33 files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,50,2016-11-22T21:01:12Z,2016-12-01T18:06:11Z,2016-12-01T18:06:12Z,MERGED,True,812,67,33,https://github.com/Novakov,Telecommand handling,15,[],https://github.com/PW-Sat2/PWSat2OBC/pull/50,https://github.com/zaq32,10,https://github.com/PW-Sat2/PWSat2OBC/pull/50#issuecomment-264247285,"Simple telecommand handling

no encoding, no encryption
just ping command



This change is","Reviewed 15 of 16 files at r4.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,51,2016-11-23T16:33:21Z,2016-11-24T06:05:25Z,2016-11-24T19:12:48Z,MERGED,True,26,18,7,https://github.com/Novakov,Switch LF clocks to use HFCORECLK,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/51,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/51,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,51,2016-11-23T16:33:21Z,2016-11-24T06:05:25Z,2016-11-24T19:12:48Z,MERGED,True,26,18,7,https://github.com/Novakov,Switch LF clocks to use HFCORECLK,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/51,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/51#issuecomment-262697416,This change is,"Reviewed 7 of 7 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,51,2016-11-23T16:33:21Z,2016-11-24T06:05:25Z,2016-11-24T19:12:48Z,MERGED,True,26,18,7,https://github.com/Novakov,Switch LF clocks to use HFCORECLK,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/51,https://github.com/decu69,3,https://github.com/PW-Sat2/PWSat2OBC/pull/51#issuecomment-262833795,This change is,"Reviewed 7 of 7 files at r1.
Review status:  all files reviewed at latest revision, all discussions resolved, all commit checks successful.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,52,2016-11-24T08:09:33Z,2016-12-01T09:50:07Z,2016-12-01T10:40:09Z,MERGED,True,1189,1044,47,https://github.com/Novakov,Update os wrapper to cpp,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/52,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/52,"All function pointers from OS structure have been converted to static methods. Their implementions are added at link-time by linking to free_rtos_wrapper in pwsat. Also unit tests have their own mock-friendly implementations.


This change is","All function pointers from OS structure have been converted to static methods. Their implementions are added at link-time by linking to free_rtos_wrapper in pwsat. Also unit tests have their own mock-friendly implementations.


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,52,2016-11-24T08:09:33Z,2016-12-01T09:50:07Z,2016-12-01T10:40:09Z,MERGED,True,1189,1044,47,https://github.com/Novakov,Update os wrapper to cpp,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/52,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/52#issuecomment-262812715,"All function pointers from OS structure have been converted to static methods. Their implementions are added at link-time by linking to free_rtos_wrapper in pwsat. Also unit tests have their own mock-friendly implementations.


This change is","Reviewed 20 of 22 files at r1.
Review status: 19 of 20 files reviewed at latest revision, 4 unresolved discussions.

libs/base/Include/base/os.h, line 32 at r1 (raw file):

 * @brief Enumerator for all possible operating system error codes.
 */
enum OSResult

in this case enum class would be more apropriate.

libs/base/Include/base/os.h, line 204 at r1 (raw file):

    template <typename Param>
    static OSResult CreateTask(void (*entryPoint)(Param&),
        Param& param,

passing task parameter by reference is dangerous as it enforces task creator to ensure that reference parameter object  is alive for unspecified period of time.

libs/base/Include/base/os.h, line 417 at r1 (raw file):

    OSTaskHandle* taskHandle)
{
    auto entryPointPtr = reinterpret_cast<OSTaskProcedure>(entryPoint);

Converting function pointers is very risky

libs/base/Include/base/os.h, line 419 at r1 (raw file):

    auto entryPointPtr = reinterpret_cast<OSTaskProcedure>(entryPoint);

    return System::CreateTask(entryPointPtr, taskName, stackSize, &param, priority, taskHandle);

Undefined behaviour: implicit conversion from pointer to reference

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,52,2016-11-24T08:09:33Z,2016-12-01T09:50:07Z,2016-12-01T10:40:09Z,MERGED,True,1189,1044,47,https://github.com/Novakov,Update os wrapper to cpp,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/52,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/52#issuecomment-262826155,"All function pointers from OS structure have been converted to static methods. Their implementions are added at link-time by linking to free_rtos_wrapper in pwsat. Also unit tests have their own mock-friendly implementations.


This change is","Reviewed 2 of 22 files at r1.
Review status: all files reviewed at latest revision, 4 unresolved discussions.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,52,2016-11-24T08:09:33Z,2016-12-01T09:50:07Z,2016-12-01T10:40:09Z,MERGED,True,1189,1044,47,https://github.com/Novakov,Update os wrapper to cpp,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/52,https://github.com/decu69,4,https://github.com/PW-Sat2/PWSat2OBC/pull/52#issuecomment-262834387,"All function pointers from OS structure have been converted to static methods. Their implementions are added at link-time by linking to free_rtos_wrapper in pwsat. Also unit tests have their own mock-friendly implementations.


This change is","libs/base/Include/base/os.h, line 204 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
> passing task parameter by reference is dangerous as it enforces task creator to ensure that reference parameter object  is alive for unspecified period of time.

how should that be resolved correctly? 

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,52,2016-11-24T08:09:33Z,2016-12-01T09:50:07Z,2016-12-01T10:40:09Z,MERGED,True,1189,1044,47,https://github.com/Novakov,Update os wrapper to cpp,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/52,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/52#issuecomment-262849790,"All function pointers from OS structure have been converted to static methods. Their implementions are added at link-time by linking to free_rtos_wrapper in pwsat. Also unit tests have their own mock-friendly implementations.


This change is","Review status: 7 of 46 files reviewed at latest revision, 4 unresolved discussions.

libs/base/Include/base/os.h, line 32 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
> in this case enum class would be more apropriate.

Done.

libs/base/Include/base/os.h, line 204 at r1 (raw file):
Previously, decu69 wrote
> how should that be resolved correctly? 

Done.

libs/base/Include/base/os.h, line 417 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
> Converting function pointers is very risky

Done.

libs/base/Include/base/os.h, line 419 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
> Undefined behaviour: implicit conversion from pointer to reference

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,52,2016-11-24T08:09:33Z,2016-12-01T09:50:07Z,2016-12-01T10:40:09Z,MERGED,True,1189,1044,47,https://github.com/Novakov,Update os wrapper to cpp,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/52,https://github.com/zaq32,6,https://github.com/PW-Sat2/PWSat2OBC/pull/52#issuecomment-263381798,"All function pointers from OS structure have been converted to static methods. Their implementions are added at link-time by linking to free_rtos_wrapper in pwsat. Also unit tests have their own mock-friendly implementations.


This change is","Reviewed 1 of 22 files at r1, 39 of 39 files at r2.
Review status: all files reviewed at latest revision, 10 unresolved discussions.

libs/base/Include/utils.h, line 14 at r2 (raw file):

}

constexpr std::size_t operator"""" _Bytes(unsigned long long int value)

undocumented

libs/base/Include/utils.h, line 19 at r2 (raw file):

}

constexpr std::size_t operator"""" _KB(unsigned long long int value)

undocumented

libs/base/Include/utils.h, line 24 at r2 (raw file):

}

constexpr std::size_t operator"""" _MB(unsigned long long int value)

undocumented

libs/base/Include/base/os.h, line 427 at r2 (raw file):

{
    static_assert(sizeof(Param) < 16, ""WTF are you trying to do?"");
    static_assert(StackSize <= UINT16_MAX, ""Stack size must be uint16_t number"");

use std::numeric_limitsstd::uint16_t::max() or better yet make stack_size template parameter std::uint_t16 instead of size_t

libs/base/Include/base/os.h, line 441 at r2 (raw file):

     * @param[in] handler Function that will be executed in new task
     */
    Task(const char* name, Param param, HandlerType handler) : _taskName(name), _param(param), _handler(handler), _handle(nullptr)

In almost all cases constructors should not be defined inline.

libs/base/Include/base/os.h, line 441 at r2 (raw file):

     * @param[in] handler Function that will be executed in new task
     */
    Task(const char* name, Param param, HandlerType handler) : _taskName(name), _param(param), _handler(handler), _handle(nullptr)

missing std::move on handler & param.

libs/base/Include/base/os.h, line 449 at r2 (raw file):

     * @return Operation status
     */
    OSResult Create()

Prefer defining inline functions outside class definition to make the class interface more concise

libs/base/Include/base/os.h, line 451 at r2 (raw file):

    OSResult Create()
    {
        return System::CreateTask(EntryPoint, this->_taskName, StackSize, static_cast<void*>(this), Priority, &this->_handle);

As per System::Create task documentation the stack size is specified in words not bytes. This function call will in effect create stack that is two times bigger then intended.

libs/drivers/leuart/Include/leuart/line_io.h, line 32 at r2 (raw file):

    /**
     * @brief Procedure that print given buffer char-by-char. Useful for non-terminated strings

Useful for non null terminated strings.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,52,2016-11-24T08:09:33Z,2016-12-01T09:50:07Z,2016-12-01T10:40:09Z,MERGED,True,1189,1044,47,https://github.com/Novakov,Update os wrapper to cpp,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/52,https://github.com/Novakov,7,https://github.com/PW-Sat2/PWSat2OBC/pull/52#issuecomment-263623977,"All function pointers from OS structure have been converted to static methods. Their implementions are added at link-time by linking to free_rtos_wrapper in pwsat. Also unit tests have their own mock-friendly implementations.


This change is","Review status: all files reviewed at latest revision, 10 unresolved discussions.

libs/base/Include/utils.h, line 14 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
undocumented

Done.

libs/base/Include/utils.h, line 19 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
undocumented

Done.

libs/base/Include/utils.h, line 24 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
undocumented

Done.

libs/base/Include/base/os.h, line 427 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
use std::numeric_limitsstd::uint16_t::max() or better yet make stack_size template parameter std::uint_t16 instead of size_t

Done.

libs/base/Include/base/os.h, line 441 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
missing std::move on handler & param.

Done.

libs/base/Include/base/os.h, line 441 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
In almost all cases constructors should not be defined inline.

Done.

libs/base/Include/base/os.h, line 449 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
Prefer defining inline functions outside class definition to make the class interface more concise

Done.

libs/base/Include/base/os.h, line 451 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
As per System::Create task documentation the stack size is specified in words not bytes. This function call will in effect create stack that is two times bigger then intended.

Done.

libs/drivers/leuart/Include/leuart/line_io.h, line 32 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
Useful for non null terminated strings.

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,52,2016-11-24T08:09:33Z,2016-12-01T09:50:07Z,2016-12-01T10:40:09Z,MERGED,True,1189,1044,47,https://github.com/Novakov,Update os wrapper to cpp,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/52,https://github.com/zaq32,8,https://github.com/PW-Sat2/PWSat2OBC/pull/52#issuecomment-263975496,"All function pointers from OS structure have been converted to static methods. Their implementions are added at link-time by linking to free_rtos_wrapper in pwsat. Also unit tests have their own mock-friendly implementations.


This change is","Reviewed 1 of 3 files at r3.
Review status: 44 of 46 files reviewed at latest revision, 1 unresolved discussion.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,52,2016-11-24T08:09:33Z,2016-12-01T09:50:07Z,2016-12-01T10:40:09Z,MERGED,True,1189,1044,47,https://github.com/Novakov,Update os wrapper to cpp,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/52,https://github.com/zaq32,9,https://github.com/PW-Sat2/PWSat2OBC/pull/52#issuecomment-264009025,"All function pointers from OS structure have been converted to static methods. Their implementions are added at link-time by linking to free_rtos_wrapper in pwsat. Also unit tests have their own mock-friendly implementations.


This change is","Reviewed 2 of 3 files at r3.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,53,2016-11-24T20:07:15Z,2016-12-27T09:47:01Z,2016-12-27T09:47:03Z,MERGED,True,720,649,20,https://github.com/mandrek44,Converted TimerService to C++,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/53,https://github.com/mandrek44,1,https://github.com/PW-Sat2/PWSat2OBC/pull/53,"I converted TimerService to C++ implementation.


This change is","I converted TimerService to C++ implementation.


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,53,2016-11-24T20:07:15Z,2016-12-27T09:47:01Z,2016-12-27T09:47:03Z,MERGED,True,720,649,20,https://github.com/mandrek44,Converted TimerService to C++,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/53,https://github.com/decu69,2,https://github.com/PW-Sat2/PWSat2OBC/pull/53#issuecomment-262843151,"I converted TimerService to C++ implementation.


This change is","Reviewed 12 of 12 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,53,2016-11-24T20:07:15Z,2016-12-27T09:47:01Z,2016-12-27T09:47:03Z,MERGED,True,720,649,20,https://github.com/mandrek44,Converted TimerService to C++,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/53,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/53#issuecomment-262850621,"I converted TimerService to C++ implementation.


This change is","Reviewed 10 of 12 files at r1.
Review status: all files reviewed at latest revision, 5 unresolved discussions, all commit checks successful.

libs/time/include/time/timer.h, line 21 at r1 (raw file):

{
    namespace time
    {

We need to think about namespaces. It's easy to get too deep structure

libs/time/include/time/timer.h, line 89 at r1 (raw file):

             * @return True if this time snapshot is considered smaller than the other one, false otherwise.
             */
            inline bool LessThan(struct TimeSnapshot other)

@zaq32 Any objectections on overloading comparision operators for time-related types?

libs/time/include/time/timer.h, line 165 at r1 (raw file):

                 * @brief Pointer to file system object that is used to save/restore timer state.
                 */
                FileSystem* FileSystemObject;

Fields should go after methods, as they are more important

libs/time/include/time/timer.h, line 183 at r1 (raw file):

                    TimePassedCallbackType timePassedCallback, //
                    void* timePassedCallbackContext,           //
                    FileSystem* fileSystem                     //

Dependencies like FileSystem should be passed to constructur and by reference

libs/time/include/time/timer.h, line 193 at r1 (raw file):

                 * @return True on success, false otherwise.
                 */
                bool GetCurrentTime(TimeSpan* currentTime);

This method effectively returns two values: success flag and time. It will be wise to pack it together in some sort of structure (maybe some template to use is other methods?)

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,53,2016-11-24T20:07:15Z,2016-12-27T09:47:01Z,2016-12-27T09:47:03Z,MERGED,True,720,649,20,https://github.com/mandrek44,Converted TimerService to C++,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/53,https://github.com/mandrek44,4,https://github.com/PW-Sat2/PWSat2OBC/pull/53#issuecomment-263141417,"I converted TimerService to C++ implementation.


This change is","Review status: 8 of 12 files reviewed at latest revision, 5 unresolved discussions.

libs/time/include/time/timer.h, line 21 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
> We need to think about namespaces. It's easy to get too deep structure

I think that all obc related classes should be in `obc` namespace, so we don't collide with anything else (like `time`).

libs/time/include/time/timer.h, line 183 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
> Dependencies like `FileSystem` should be passed to constructur and by reference

Should it be const reference? (like `const FileSystem& fileSystem`)?

libs/time/include/time/timer.h, line 193 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
> This method effectively returns two values: success flag and time. It will be wise to pack it together in some sort of structure (maybe some template to use is other methods?)

This seems like common pattern - do we have an existing implementation?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,53,2016-11-24T20:07:15Z,2016-12-27T09:47:01Z,2016-12-27T09:47:03Z,MERGED,True,720,649,20,https://github.com/mandrek44,Converted TimerService to C++,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/53,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/53#issuecomment-263375017,"I converted TimerService to C++ implementation.


This change is","Now that we are using c++ it is worth considering using std::chrono::milliseconds type instead of TimeSpan.
Also if the std::chrono would not be used I'd recommend defining basic operators arithmetic & logic operators for TimeSpan & TimePoint types

Reviewed 6 of 7 files at r2.
Review status: 11 of 12 files reviewed at latest revision, 10 unresolved discussions.

libs/time/timer.cpp, line 23 at r2 (raw file):

    FileSystemObject = &fileSystem;
    NotificationTime = TimeSpanFromMilliseconds(0ull);
    PersistanceTime = TimeSpanFromMilliseconds(0ull);

Use class initializer list instead of  direct assignments

libs/time/include/time/timer.h, line 89 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
@zaq32 Any objectections on overloading comparision operators for time-related types?

No. In fact now that we do have use c++ it would be preferable to define at least <, ==, != operators for this type and for TimeSpan & TimePoint

libs/time/include/time/timer.h, line 183 at r1 (raw file):
Previously, mandrek44 (Mandro) wrote
Should it be const reference? (like const FileSystem& fileSystem)?

reference to const FileSystem may be temping but it would be difficult to get right the FileSystem interface itself

libs/time/include/time/timer.h, line 193 at r1 (raw file):
Previously, mandrek44 (Mandro) wrote
This seems like common pattern - do we have an existing implementation?

No yet.

libs/time/include/time/timer.h, line 278 at r2 (raw file):

                 * @brief Time period between the subsequent mission time notifications.
                 */
                const TimeSpan NotificationPeriod = {TIMER_NOTIFICATION_PERIOD};

since this value is hard coded I'd mark it as static constexpr instead of making it const member.

libs/time/include/time/timer.h, line 283 at r2 (raw file):

                 * @brief Time period between subsequent timer state saves.
                 */
                const TimeSpan SavePeriod = {TIMER_SAVE_PERIOD};

since this value is hard coded I'd mark it as static constexpr instead of making it const member.

libs/time/include/time/timer.h, line 287 at r2 (raw file):

                const char* const File0 = ""/TimeState.0"";
                const char* const File1 = ""/TimeState.1"";
                const char* const File2 = ""/TimeState.2"";

these three fields are not supposed to be changed or instance specific therefore mark them as static.

src/main.cpp, line 176 at r2 (raw file):

    ClearState(obc);

    if (!obc->timeProvider.Initialize(NULL, NULL))

use nullptr instead of NULL

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,53,2016-11-24T20:07:15Z,2016-12-27T09:47:01Z,2016-12-27T09:47:03Z,MERGED,True,720,649,20,https://github.com/mandrek44,Converted TimerService to C++,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/53,https://github.com/zaq32,6,https://github.com/PW-Sat2/PWSat2OBC/pull/53#issuecomment-263375072,"I converted TimerService to C++ implementation.


This change is","Reviewed 1 of 7 files at r2.
Review status: all files reviewed at latest revision, 10 unresolved discussions.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,53,2016-11-24T20:07:15Z,2016-12-27T09:47:01Z,2016-12-27T09:47:03Z,MERGED,True,720,649,20,https://github.com/mandrek44,Converted TimerService to C++,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/53,https://github.com/mandrek44,7,https://github.com/PW-Sat2/PWSat2OBC/pull/53#issuecomment-264561565,"I converted TimerService to C++ implementation.


This change is","Agree but I'd like to do this as seperate work / pull request

Review status: 2 of 13 files reviewed at latest revision, 10 unresolved discussions.

libs/time/include/time/timer.h, line 21 at r1 (raw file):
Previously, mandrek44 (Mandro) wrote
I think that all obc related classes should be in obc namespace, so we don't collide with anything else (like time).

I changed it to services per our discussions

libs/time/include/time/timer.h, line 89 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
No. In fact now that we do have use c++ it would be preferable to define at least <, ==, != operators for this type and for TimeSpan & TimePoint

I haven't ported the TimePoint and TimeSpan yet - I'd first finish this bit before starting new ;-)
It seems to me that if I overload the operators the LessThan and Eqaul methods can be removed, right?

libs/time/include/time/timer.h, line 193 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
No yet.

I added the Option class

libs/time/include/time/timer.h, line 278 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
since this value is hard coded I'd mark it as static constexpr instead of making it const member.

Compiler complained that it should be constexpr, but then it complained that it's undefined reference. I admin I got lost there ;-)

src/main.cpp, line 176 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
use nullptr instead of NULL

NULLs are used all over the timer.cpp - should I also changed all of them?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,53,2016-11-24T20:07:15Z,2016-12-27T09:47:01Z,2016-12-27T09:47:03Z,MERGED,True,720,649,20,https://github.com/mandrek44,Converted TimerService to C++,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/53,https://github.com/mandrek44,8,https://github.com/PW-Sat2/PWSat2OBC/pull/53#issuecomment-264561753,"I converted TimerService to C++ implementation.


This change is","Review status: 2 of 13 files reviewed at latest revision, 10 unresolved discussions.

libs/time/include/time/timer.h, line 283 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
since this value is hard coded I'd mark it as static constexpr instead of making it const member.

Compiler complained that it should be constexpr, but then it complained that it's undefined reference. I admin I got lost there ;-)

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,53,2016-11-24T20:07:15Z,2016-12-27T09:47:01Z,2016-12-27T09:47:03Z,MERGED,True,720,649,20,https://github.com/mandrek44,Converted TimerService to C++,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/53,https://github.com/mandrek44,9,https://github.com/PW-Sat2/PWSat2OBC/pull/53#issuecomment-264562078,"I converted TimerService to C++ implementation.


This change is","Review status: 2 of 13 files reviewed at latest revision, 10 unresolved discussions.

libs/time/timer.cpp, line 23 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
Use class initializer list instead of  direct assignments

Done, but clang-format has reduced the lines

libs/time/include/time/timer.h, line 165 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Fields should go after methods, as they are more important

Done.

libs/time/include/time/timer.h, line 183 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
reference to const FileSystem may be temping but it would be difficult to get right the FileSystem interface itself

Ok

libs/time/include/time/timer.h, line 287 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
these three fields are not supposed to be changed or instance specific therefore mark them as static.

A made them static constexpr

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,53,2016-11-24T20:07:15Z,2016-12-27T09:47:01Z,2016-12-27T09:47:03Z,MERGED,True,720,649,20,https://github.com/mandrek44,Converted TimerService to C++,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/53,https://github.com/Novakov,10,https://github.com/PW-Sat2/PWSat2OBC/pull/53#issuecomment-264566504,"I converted TimerService to C++ implementation.


This change is","Reviewed 2 of 7 files at r2, 11 of 11 files at r3.
Review status: all files reviewed at latest revision, 12 unresolved discussions.

libs/base/Include/utils.h, line 58 at r3 (raw file):

template <class T>
class Option

Undocumented

libs/base/Include/utils.h, line 68 at r3 (raw file):

    static Option<T> Some(T &result)
    {
        return Option<T>(true, result);

+@zaq32 Would it be better to pass result by value and use std::move?

libs/time/timer.cpp, line 23 at r2 (raw file):
Previously, mandrek44 (Mandro) wrote
Done, but clang-format has reduced the lines

You can use // at the end of line to force specific formatting. We use that trick in few places

libs/time/include/time/timer.h, line 89 at r1 (raw file):
Previously, mandrek44 (Mandro) wrote
I haven't ported the TimePoint and TimeSpan yet - I'd first finish this bit before starting new ;-)
It seems to me that if I overload the operators the LessThan and Eqaul methods can be removed, right?

Right, remove them and define operators.

libs/time/include/time/timer.h, line 193 at r1 (raw file):
Previously, mandrek44 (Mandro) wrote
I added the Option class

Update documenation to match new signature

libs/time/include/time/timer.h, line 189 at r3 (raw file):

             * This value is protected by the timerLock semaphore.
             */
            TimeSpan CurrentTime;

I think that these fields could be private

src/obc.cpp, line 6 at r3 (raw file):

OBC::OBC()
    : timeProvider(fs), I2C(&I2CBuses[I2C_SYSTEM_BUS].ErrorHandling.Base, &I2CBuses[I2C_PAYLOAD_BUS].ErrorHandling.Base),
      Communication(*I2C.Bus), terminal(this->IO)

Comments at the end of lines forced more readable/mergeable format - bring them back :)

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,53,2016-11-24T20:07:15Z,2016-12-27T09:47:01Z,2016-12-27T09:47:03Z,MERGED,True,720,649,20,https://github.com/mandrek44,Converted TimerService to C++,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/53,https://github.com/zaq32,11,https://github.com/PW-Sat2/PWSat2OBC/pull/53#issuecomment-264570251,"I converted TimerService to C++ implementation.


This change is","Review status: 12 of 13 files reviewed at latest revision, 12 unresolved discussions.

libs/base/Include/utils.h, line 68 at r3 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
+@zaq32 Would it be better to pass result by value and use std::move?

I would rather use universal reference + std::move

libs/time/timer.cpp, line 38 at r3 (raw file):

}

inline bool operator>=(const TimeSnapshot& left, const TimeSnapshot& right)

As those operators are declared inline and they are defined inside the source file (as opposed to header file) they will be unavailable to anyone outside this translation unit

libs/time/include/time/timer.h, line 278 at r2 (raw file):
Previously, mandrek44 (Mandro) wrote
Compiler complained that it should be constexpr, but then it complained that it's undefined reference. I admin I got lost there ;-)

did you make mark it static as well?

libs/time/include/time/timer.h, line 283 at r2 (raw file):
Previously, mandrek44 (Mandro) wrote
Compiler complained that it should be constexpr, but then it complained that it's undefined reference. I admin I got lost there ;-)

did you make mark it static as well?

src/main.cpp, line 176 at r2 (raw file):
Previously, mandrek44 (Mandro) wrote
NULLs are used all over the timer.cpp - should I also changed all of them?

NULL comes from C and has not type which makes it easy to misuse due to the hack in the C & C++ standards. nullptr on the other hand has its own type and cannot be misused therefore it preferable. Both are still fine. In new code prefer using nullptr in already existing one I leave it up to you

src/mission.cpp, line 44 at r3 (raw file):

    UNREFERENCED_PARAMETER(param);

    state->Time = Main.timeProvider.GetCurrentMissionTime().Value;

Update the time only if it actually has been successfully obtained.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,53,2016-11-24T20:07:15Z,2016-12-27T09:47:01Z,2016-12-27T09:47:03Z,MERGED,True,720,649,20,https://github.com/mandrek44,Converted TimerService to C++,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/53,https://github.com/zaq32,12,https://github.com/PW-Sat2/PWSat2OBC/pull/53#issuecomment-264571699,"I converted TimerService to C++ implementation.


This change is","Review status: 12 of 13 files reviewed at latest revision, 11 unresolved discussions.

libs/base/Include/utils.h, line 68 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
I would rather use universal reference + std::move


std::forward not std::move


Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,53,2016-11-24T20:07:15Z,2016-12-27T09:47:01Z,2016-12-27T09:47:03Z,MERGED,True,720,649,20,https://github.com/mandrek44,Converted TimerService to C++,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/53,https://github.com/zaq32,13,https://github.com/PW-Sat2/PWSat2OBC/pull/53#issuecomment-264574694,"I converted TimerService to C++ implementation.


This change is","Reviewed 1 of 1 files at r4.
Review status: all files reviewed at latest revision, 12 unresolved discussions.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,53,2016-11-24T20:07:15Z,2016-12-27T09:47:01Z,2016-12-27T09:47:03Z,MERGED,True,720,649,20,https://github.com/mandrek44,Converted TimerService to C++,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/53,https://github.com/mandrek44,14,https://github.com/PW-Sat2/PWSat2OBC/pull/53#issuecomment-266104148,"I converted TimerService to C++ implementation.


This change is","Review status: 2 of 18 files reviewed at latest revision, 12 unresolved discussions.

libs/base/Include/utils.h, line 58 at r3 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Undocumented

Done.

libs/base/Include/utils.h, line 68 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote

std::forward not std::move


I used std::move so that Option<T> can be constructed from rvalue references - which makes sense as long as it's used for returning value.  I had problem adopting std::forward, because for lvalue references passed to factory method (the one in global scope) the type argument is deducted as T&. As far as I understand this is a problem when returning value.
But I could got it wrong ;-)

libs/time/timer.cpp, line 23 at r2 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
You can use // at the end of line to force specific formatting. We use that trick in few places

Done.

libs/time/timer.cpp, line 38 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
As those operators are declared inline and they are defined inside the source file (as opposed to header file) they will be unavailable to anyone outside this translation unit

Done.

libs/time/include/time/timer.h, line 278 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
did you make mark it static as well?

When I change it to static constexpr TimeSpan NotificationPeriod = {TIMER_NOTIFICATION_PERIOD}; I get the following error:
..\build\DevBoard\lib\libtime.a(timer.cpp.obj): In function `services::time::TimeProvider::SetCurrentTime(TimePoint)':
C:\src\pwsat\src\libs\time/timer.cpp:117: undefined reference to `services::time::TimeProvider::NotificationPeriod'
collect2.exe: error: ld returned 1 exit status
src\CMakeFiles\pwsat.dir\build.make:497: recipe for target 'build/DevBoard/bin/pwsat' failed
make[2]: *** [build/DevBoard/bin/pwsat] Error 1
CMakeFiles\Makefile2:136: recipe for target 'src/CMakeFiles/pwsat.dir/all' failed
make[1]: *** [src/CMakeFiles/pwsat.dir/all] Error 2
makefile:82: recipe for target 'all' failed
make: *** [all] Error 2```


libs/time/include/time/timer.h, line 283 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
did you make mark it static as well?

See my comment above

libs/time/include/time/timer.h, line 189 at r3 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
I think that these fields could be private

Done.

src/mission.cpp, line 44 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
Update the time only if it actually has been successfully obtained.

Done.

src/obc.cpp, line 6 at r3 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Comments at the end of lines forced more readable/mergeable format - bring them back :)

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,53,2016-11-24T20:07:15Z,2016-12-27T09:47:01Z,2016-12-27T09:47:03Z,MERGED,True,720,649,20,https://github.com/mandrek44,Converted TimerService to C++,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/53,https://github.com/zaq32,15,https://github.com/PW-Sat2/PWSat2OBC/pull/53#issuecomment-266192342,"I converted TimerService to C++ implementation.


This change is","Reviewed 12 of 15 files at r5, 1 of 3 files at r6.
Review status: 15 of 18 files reviewed at latest revision, 9 unresolved discussions.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,53,2016-11-24T20:07:15Z,2016-12-27T09:47:01Z,2016-12-27T09:47:03Z,MERGED,True,720,649,20,https://github.com/mandrek44,Converted TimerService to C++,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/53,https://github.com/zaq32,16,https://github.com/PW-Sat2/PWSat2OBC/pull/53#issuecomment-266395207,"I converted TimerService to C++ implementation.


This change is","Reviewed 3 of 3 files at r7.
Review status: all files reviewed at latest revision, 5 unresolved discussions.

libs/time/timer.cpp, line 38 at r3 (raw file):
Previously, mandrek44 (Mandro) wrote
Done.

I would prefer have those methods defined in the header files as they are simple enough

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,53,2016-11-24T20:07:15Z,2016-12-27T09:47:01Z,2016-12-27T09:47:03Z,MERGED,True,720,649,20,https://github.com/mandrek44,Converted TimerService to C++,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/53,https://github.com/Novakov,17,https://github.com/PW-Sat2/PWSat2OBC/pull/53#issuecomment-266449406,"I converted TimerService to C++ implementation.


This change is","Reviewed 12 of 15 files at r5, 1 of 3 files at r6, 3 of 3 files at r7.
Review status: all files reviewed at latest revision, 3 unresolved discussions.

libs/base/Include/utils.h, line 129 at r7 (raw file):

template <typename T> static inline Option<std::remove_reference_t<T>> Some(T&& value)
{
    return Option<std::remove_reference_t<T>>::Some(std::forward<std::remove_reference_t<T>>(value));

You can add local type alias: using U = std::remove_ference_t<T> and simplify this statement

libs/base/Include/base/os.h, line 254 at r6 (raw file):

     *
     */
    static OSSemaphoreHandle CreateBinarySemaphore(uint8_t semaphoreId = 0);

std::uint8_t

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,53,2016-11-24T20:07:15Z,2016-12-27T09:47:01Z,2016-12-27T09:47:03Z,MERGED,True,720,649,20,https://github.com/mandrek44,Converted TimerService to C++,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/53,https://github.com/Novakov,18,https://github.com/PW-Sat2/PWSat2OBC/pull/53#issuecomment-268068526,"I converted TimerService to C++ implementation.


This change is",[Time] Some abstraction of time,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,53,2016-11-24T20:07:15Z,2016-12-27T09:47:01Z,2016-12-27T09:47:03Z,MERGED,True,720,649,20,https://github.com/mandrek44,Converted TimerService to C++,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/53,https://github.com/mandrek44,19,https://github.com/PW-Sat2/PWSat2OBC/pull/53#issuecomment-268306064,"I converted TimerService to C++ implementation.


This change is","Review status: 12 of 20 files reviewed at latest revision, 3 unresolved discussions.

libs/base/Include/utils.h, line 129 at r7 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
You can add local type alias: using U = std::remove_ference_t<T> and simplify this statement

Done.

libs/base/Include/base/os.h, line 254 at r6 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
std::uint8_t

Done.

libs/time/timer.cpp, line 38 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
I would prefer have those methods defined in the header files as they are simple enough

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,53,2016-11-24T20:07:15Z,2016-12-27T09:47:01Z,2016-12-27T09:47:03Z,MERGED,True,720,649,20,https://github.com/mandrek44,Converted TimerService to C++,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/53,https://github.com/Novakov,20,https://github.com/PW-Sat2/PWSat2OBC/pull/53#issuecomment-268308490,"I converted TimerService to C++ implementation.


This change is","Reviewed 8 of 9 files at r8.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,53,2016-11-24T20:07:15Z,2016-12-27T09:47:01Z,2016-12-27T09:47:03Z,MERGED,True,720,649,20,https://github.com/mandrek44,Converted TimerService to C++,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/53,https://github.com/zaq32,21,https://github.com/PW-Sat2/PWSat2OBC/pull/53#issuecomment-269302600,"I converted TimerService to C++ implementation.


This change is","Review status:  all files reviewed at latest revision, all discussions resolved, all commit checks successful.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,54,2016-11-26T22:09:13Z,2016-11-30T19:50:16Z,2016-11-30T19:50:17Z,MERGED,True,39,1,5,https://github.com/Novakov,tasklist terminal command,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/54,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/54,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,54,2016-11-26T22:09:13Z,2016-11-30T19:50:16Z,2016-11-30T19:50:17Z,MERGED,True,39,1,5,https://github.com/Novakov,tasklist terminal command,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/54,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/54#issuecomment-263383875,This change is,"Reviewed 5 of 5 files at r1.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

src/commands/rtos_status.cpp, line 14 at r1 (raw file):

using std::min;

static char TaskStatuses[] = ""RPBSD"";

mark it as const.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,54,2016-11-26T22:09:13Z,2016-11-30T19:50:16Z,2016-11-30T19:50:17Z,MERGED,True,39,1,5,https://github.com/Novakov,tasklist terminal command,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/54,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/54#issuecomment-263619005,This change is,"Review status: 4 of 5 files reviewed at latest revision, 1 unresolved discussion.

src/commands/rtos_status.cpp, line 14 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
mark it as const.

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,54,2016-11-26T22:09:13Z,2016-11-30T19:50:16Z,2016-11-30T19:50:17Z,MERGED,True,39,1,5,https://github.com/Novakov,tasklist terminal command,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/54,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/54#issuecomment-263975829,This change is,"Reviewed 1 of 1 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,55,2016-11-28T08:45:41Z,2016-12-05T07:47:30Z,2016-12-05T07:47:31Z,MERGED,True,1722,744,52,https://github.com/zaq32,Antenna mission,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/55,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/55,"Implementation of the 30 silent period at the beginning of the mission and the antenna deployment soon after that.
In addition cleaned up mission loop implementation from the testing logic.


This change is","Implementation of the 30 silent period at the beginning of the mission and the antenna deployment soon after that.
In addition cleaned up mission loop implementation from the testing logic.


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,55,2016-11-28T08:45:41Z,2016-12-05T07:47:30Z,2016-12-05T07:47:31Z,MERGED,True,1722,744,52,https://github.com/zaq32,Antenna mission,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/55,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/55#issuecomment-263959673,"Implementation of the 30 silent period at the beginning of the mission and the antenna deployment soon after that.
In addition cleaned up mission loop implementation from the testing logic.


This change is","Reviewed 46 of 46 files at r1.
Review status: all files reviewed at latest revision, 11 unresolved discussions.

libs/mission/antenna/antenna.cpp, line 138 at r1 (raw file):

            {ResetDriverStep, ANTENNA_BACKUP_CHANNEL, ANTENNA_AUTO_ID, 0, false},
            {RegularDeploymentStep, ANTENNA_BACKUP_CHANNEL, ANTENNA_AUTO_ID, 9, false},

Move these timeouts to constants

libs/mission/antenna/antenna.cpp, line 195 at r1 (raw file):

         * @brief Number of the first step in the deployment finalization phase.
         */
        static constexpr uint8_t FinalizationStepIndex = count_of(deploymentSteps) - 2;

Putting static_assert checking that FinalizationStepIndex and FinalizationStepIndex are FinishDeploymentStep would be nice

libs/mission/antenna/antenna.cpp, line 496 at r1 (raw file):

            return descriptor;
        }

Order of functions are making it very hard to understand. For example Action is in line 407 and Condition in 254 separated by few other functions.

libs/mission/antenna/Include/mission/antenna_state.h, line 165 at r1 (raw file):

             * @brief Current antenna driver instance.
             */
            AntennaDriver& driver;

Private fields should begin with underscore.
I will update naming conventions with new 'types of names' in C++

libs/mission/antenna/Include/mission/antenna_state.h, line 215 at r1 (raw file):

         * @returns Action descriptor that runs antenna deployment process.
         */
        SystemActionDescriptor AntennaInitializeActionDescriptor(AntennaMissionState& stateDescriptor);

Why these functions are not methods?

libs/state/Include/state/struct.h, line 48 at r1 (raw file):

        ADCSMode CurrentMode;
    } ADCS;
} SystemState;

Do we still need typedef and EXTERNC here?

src/main.cpp, line 48 at r1 (raw file):

OBC Main;
MissionState Mission(Main);

I know that order of initialization of Main and Mission does not matter but I'll fill a lot better if there is a way force proper ordering.

src/mission.cpp, line 77 at r1 (raw file):

{
    UNREFERENCED_PARAMETER(missionState);
    SystemActionDescriptor* runnableActions[COUNT_OF(NormalModeActionDescriptors)];

std::array<SystemActionDescriptor*, count_of(NormalModeActionDescriptors)>

src/commands/time.cpp, line 14 at r1 (raw file):

        TerminalPuts(&Main.terminal, ""jumpToTime <time>\n"");
    }
    else

I prefer if(something_is_invaliv) {return;] instead of nesting inside else

unit_tests/MissionPlan/MissionPlanTest.cpp, line 30 at r1 (raw file):

    ASSERT_THAT(state.AntennaDeployed, Eq(false));
}

If it is not needed anymore -> delete it.

unit_tests/MissionPlan/MissionTestHelpers.cpp, line 24 at r1 (raw file):

SystemStateUpdateResult StateUpdater::UpdateByMock(SystemState* state, void* param)
{
    return ((StateUpdater*)param)->func(state);

(I known, 'not-my-code') Use C++ style cast?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,55,2016-11-28T08:45:41Z,2016-12-05T07:47:30Z,2016-12-05T07:47:31Z,MERGED,True,1722,744,52,https://github.com/zaq32,Antenna mission,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/55,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/55#issuecomment-264008665,"Implementation of the 30 silent period at the beginning of the mission and the antenna deployment soon after that.
In addition cleaned up mission loop implementation from the testing logic.


This change is","Review status: 34 of 52 files reviewed at latest revision, 11 unresolved discussions, some commit checks failed.

libs/mission/antenna/antenna.cpp, line 138 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Move these timeouts to constants

Done

libs/mission/antenna/antenna.cpp, line 195 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Putting static_assert checking that FinalizationStepIndex and FinalizationStepIndex are FinishDeploymentStep would be nice

Done

libs/mission/antenna/antenna.cpp, line 496 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Order of functions are making it very hard to understand. For example Action is in line 407 and Condition in 254 separated by few other functions.

Should be better now

libs/mission/antenna/Include/mission/antenna_state.h, line 165 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Private fields should begin with underscore.
I will update naming conventions with new 'types of names' in C++

Done

libs/mission/antenna/Include/mission/antenna_state.h, line 215 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Why these functions are not methods?

What type exactly these methods should belong to?

libs/state/Include/state/struct.h, line 48 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Do we still need typedef and EXTERNC here?

No.

src/main.cpp, line 48 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
I know that order of initialization of Main and Mission does not matter but I'll fill a lot better if there is a way force proper ordering.

It is possible but it is not pretty. As long as we do not need exact and deterministic order  of global object construction I would like to leave it as it is.

src/mission.cpp, line 77 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
std::array<SystemActionDescriptor*, count_of(NormalModeActionDescriptors)>

Done.

src/commands/time.cpp, line 14 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
I prefer if(something_is_invaliv) {return;] instead of nesting inside else

Done.

unit_tests/MissionPlan/MissionPlanTest.cpp, line 30 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
If it is not needed anymore -> delete it.

Done.

unit_tests/MissionPlan/MissionTestHelpers.cpp, line 24 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
(I known, 'not-my-code') Use C++ style cast?

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,55,2016-11-28T08:45:41Z,2016-12-05T07:47:30Z,2016-12-05T07:47:31Z,MERGED,True,1722,744,52,https://github.com/zaq32,Antenna mission,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/55,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/55#issuecomment-264536013,"Implementation of the 30 silent period at the beginning of the mission and the antenna deployment soon after that.
In addition cleaned up mission loop implementation from the testing logic.


This change is","Reviewed 18 of 18 files at r2, 1 of 1 files at r3.
Review status: all files reviewed at latest revision, 4 unresolved discussions, some commit checks failed.

libs/mission/antenna/antenna.cpp, line 202 at r2 (raw file):

            {RegularDeploymentStep, ANTENNA_BACKUP_CHANNEL, ANTENNA2_ID, EmergemcyTimeout, true},
            {RegularDeploymentStep, ANTENNA_BACKUP_CHANNEL, ANTENNA3_ID, EmergemcyTimeout, true},
            {RegularDeploymentStep, ANTENNA_BACKUP_CHANNEL, ANTENNA4_ID, EmergemcyTimeout, true},

Typo: Emergemcy -> Emergency

libs/mission/antenna/Include/mission/antenna_state.h, line 215 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
What type exactly these methods should belong to?

Either AntennaMissionState or names should be changed telling more about ""Deploying antennas""

src/main.cpp, line 48 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
It is possible but it is not pretty. As long as we do not need exact and deterministic order  of global object construction I would like to leave it as it is.

Fine

unit_tests/MissionPlan/MissionTestHelpers.cpp, line 24 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
Done.

That was radical...

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,55,2016-11-28T08:45:41Z,2016-12-05T07:47:30Z,2016-12-05T07:47:31Z,MERGED,True,1722,744,52,https://github.com/zaq32,Antenna mission,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/55,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/55#issuecomment-264574117,"Implementation of the 30 silent period at the beginning of the mission and the antenna deployment soon after that.
In addition cleaned up mission loop implementation from the testing logic.


This change is","Review status: all files reviewed at latest revision, 4 unresolved discussions, some commit checks failed.

libs/mission/antenna/antenna.cpp, line 202 at r2 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Typo: Emergemcy -> Emergency

Fixed

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,55,2016-11-28T08:45:41Z,2016-12-05T07:47:30Z,2016-12-05T07:47:31Z,MERGED,True,1722,744,52,https://github.com/zaq32,Antenna mission,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/55,https://github.com/zaq32,6,https://github.com/PW-Sat2/PWSat2OBC/pull/55#issuecomment-264574338,"Implementation of the 30 silent period at the beginning of the mission and the antenna deployment soon after that.
In addition cleaned up mission loop implementation from the testing logic.


This change is","Review status: 48 of 52 files reviewed at latest revision, 4 unresolved discussions, some commit checks failed.

libs/mission/antenna/Include/mission/antenna_state.h, line 215 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Either AntennaMissionState or names should be changed telling more about ""Deploying antennas""

Done

unit_tests/MissionPlan/MissionTestHelpers.cpp, line 24 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
That was radical...

I may seem like this but as a result we haven't lost anything as those mocks were replaced with much more powerfull googlemocks.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,55,2016-11-28T08:45:41Z,2016-12-05T07:47:30Z,2016-12-05T07:47:31Z,MERGED,True,1722,744,52,https://github.com/zaq32,Antenna mission,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/55,https://github.com/Novakov,7,https://github.com/PW-Sat2/PWSat2OBC/pull/55#issuecomment-264577149,"Implementation of the 30 silent period at the beginning of the mission and the antenna deployment soon after that.
In addition cleaned up mission loop implementation from the testing logic.


This change is","Reviewed 4 of 4 files at r4.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,55,2016-11-28T08:45:41Z,2016-12-05T07:47:30Z,2016-12-05T07:47:31Z,MERGED,True,1722,744,52,https://github.com/zaq32,Antenna mission,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/55,https://github.com/Novakov,8,https://github.com/PW-Sat2/PWSat2OBC/pull/55#issuecomment-264651257,"Implementation of the 30 silent period at the beginning of the mission and the antenna deployment soon after that.
In addition cleaned up mission loop implementation from the testing logic.


This change is","Reviewed 13 of 13 files at r5.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,56,2016-12-05T17:22:53Z,2016-12-08T17:37:17Z,2016-12-08T17:37:18Z,MERGED,True,1271,1081,52,https://github.com/Novakov,Update i2c driver to cpp,14,[],https://github.com/PW-Sat2/PWSat2OBC/pull/56,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/56,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,56,2016-12-05T17:22:53Z,2016-12-08T17:37:17Z,2016-12-08T17:37:18Z,MERGED,True,1271,1081,52,https://github.com/Novakov,Update i2c driver to cpp,14,[],https://github.com/PW-Sat2/PWSat2OBC/pull/56,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/56#issuecomment-265240821,This change is,"Reviewed 44 of 44 files at r1.
Review status: all files reviewed at latest revision, 14 unresolved discussions.

libs/base/os_base.cpp, line 5 at r1 (raw file):

TakeSemaphore::TakeSemaphore(OSSemaphoreHandle semaphore, OSTaskTimeSpan timeout) : _semaphore(semaphore)
{
    if (OS_RESULT_SUCCEEDED(System::TakeSemaphore(this->_semaphore, timeout)))

what about this:
this->_taken = OS_RESULT_SUCCEEDED(System::TakeSemaphore(this->_semaphore, timeout);


libs/base/Include/base/os.h, line 493 at r1 (raw file):

 * @code
 * {
 * 	TakeSemaphore lock(this->_sem);

I'd prefer more less specific name in this case. How about just ""Lock""?

libs/base/Include/base/os.h, line 505 at r1 (raw file):

 * @endcode
 */
class TakeSemaphore

Provide valid move constructor/assignment operators (it is possible)  or disable them explicitly

libs/base/Include/base/os.h, line 526 at r1 (raw file):

    bool operator()();

    TakeSemaphore(const TakeSemaphore&) = delete;

move to private section.

libs/base/Include/base/os.h, line 538 at r1 (raw file):

 * @brief RTOS queue wrapper
 */
template <typename Element, std::size_t Capacity> class Queue

This class will not work for any complex type. Add static assertion that ensures that no one tries to use non pod/integral types.

libs/base/Include/base/os.h, line 553 at r1 (raw file):

     * @return Operation result
     */
    OSResult Push(Element* element, OSTaskTimeSpan timeout);

Prefer const reference instead of pointers. So there is no need to worry about nullptr parameters

libs/base/Include/base/os.h, line 560 at r1 (raw file):

     * @return Operation result
     */
    OSResult PushISR(Element* element);

Prefer const reference instead of pointers. So there is no need to worry about nullptr parameters

libs/base/Include/base/os.h, line 568 at r1 (raw file):

     * @return Operation result
     */
    OSResult Pop(Element* element, OSTaskTimeSpan timeout);

Prefer reference instead of pointers. So there is no need to worry about nullptr parameters

libs/drivers/i2c/i2c.cpp, line 107 at r1 (raw file):

    CMU_Clock_TypeDef clock,
    IRQn_Type irq)
{

use initializer list.

libs/drivers/i2c/i2c.cpp, line 150 at r1 (raw file):

    if (status == i2cTransferInProgress)
    {
        return;

shouldn't the
System::EndSwitchingISR();

be called here as well?

libs/drivers/i2c/Include/i2c/i2c.h, line 1 at r1 (raw file):

#ifndef SRC_DRIVERS_I2C_H_

I'd separate public interface a.k.a II2cBus & enumerators from the implementation (low level bus, fallback bus etc.)

src/obc.cpp, line 6 at r1 (raw file):

OBC::OBC()
    : //
      Hardware(),

redundant, default constructor will be called anyway

unit_tests/I2C/I2CMock.cpp, line 3 at r1 (raw file):

#include ""I2CMock.hpp""

I2CBusMock::I2CBusMock()

this constructor can be entirely removed

unit_tests/I2C/I2CMock.hpp, line 23 at r1 (raw file):

            ));

    decltype(auto) ExpectWriteCommand(const drivers::i2c::I2CAddress address, uint8_t command)

for consistency reason I would provide also function for read command.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,56,2016-12-05T17:22:53Z,2016-12-08T17:37:17Z,2016-12-08T17:37:18Z,MERGED,True,1271,1081,52,https://github.com/Novakov,Update i2c driver to cpp,14,[],https://github.com/PW-Sat2/PWSat2OBC/pull/56,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/56#issuecomment-265241059,This change is,"Review status: all files reviewed at latest revision, 16 unresolved discussions.

doc/groups.h, line 2 at r1 (raw file):

/**
 * @defgroup perhipheral_drivers Peripheral drivers

I wouldn't mind more detailed information what this group contains.

doc/groups.h, line 8 at r1 (raw file):

/**
 * @defgroup device_drivers Device drivers

I wouldn't mind more detailed information what this group contains.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,56,2016-12-05T17:22:53Z,2016-12-08T17:37:17Z,2016-12-08T17:37:18Z,MERGED,True,1271,1081,52,https://github.com/Novakov,Update i2c driver to cpp,14,[],https://github.com/PW-Sat2/PWSat2OBC/pull/56,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/56#issuecomment-265684126,This change is,"Review status: 30 of 52 files reviewed at latest revision, 16 unresolved discussions.

doc/groups.h, line 2 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
I wouldn't mind more detailed information what this group contains.

Done.

doc/groups.h, line 8 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
I wouldn't mind more detailed information what this group contains.

Done.

libs/base/os_base.cpp, line 5 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
what about this:
this->_taken = OS_RESULT_SUCCEEDED(System::TakeSemaphore(this->_semaphore, timeout);


What I was thinking about when I wrote that if...

libs/base/Include/base/os.h, line 493 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
I'd prefer more less specific name in this case. How about just ""Lock""?

Done.

libs/base/Include/base/os.h, line 505 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
Provide valid move constructor/assignment operators (it is possible)  or disable them explicitly

Done.

libs/base/Include/base/os.h, line 526 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
move to private section.

Done.

libs/base/Include/base/os.h, line 538 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
This class will not work for any complex type. Add static assertion that ensures that no one tries to use non pod/integral types.

Done.

libs/base/Include/base/os.h, line 553 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
Prefer const reference instead of pointers. So there is no need to worry about nullptr parameters

Done.

libs/base/Include/base/os.h, line 560 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
Prefer const reference instead of pointers. So there is no need to worry about nullptr parameters

Done.

libs/base/Include/base/os.h, line 568 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
Prefer reference instead of pointers. So there is no need to worry about nullptr parameters

Done.

libs/drivers/i2c/i2c.cpp, line 107 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
use initializer list.

Done.

libs/drivers/i2c/i2c.cpp, line 150 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
shouldn't the
System::EndSwitchingISR();

be called here as well?

Done.

libs/drivers/i2c/Include/i2c/i2c.h, line 1 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
I'd separate public interface a.k.a II2cBus & enumerators from the implementation (low level bus, fallback bus etc.)

Done.

src/obc.cpp, line 6 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
redundant, default constructor will be called anyway

Done.

unit_tests/I2C/I2CMock.cpp, line 3 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
this constructor can be entirely removed

Done.

unit_tests/I2C/I2CMock.hpp, line 23 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
for consistency reason I would provide also function for read command.

Actually it's not that easy - most read commands will require more that single byte so some complex matcher is requried (like ElementsAre(someCommand, someAddress))  and to be honest I'm not so happy with ExpectWriteCommand in it's current form - it's a bit to strict (only one byte) for general use.
I'll think of something better

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,56,2016-12-05T17:22:53Z,2016-12-08T17:37:17Z,2016-12-08T17:37:18Z,MERGED,True,1271,1081,52,https://github.com/Novakov,Update i2c driver to cpp,14,[],https://github.com/PW-Sat2/PWSat2OBC/pull/56,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/56#issuecomment-265803142,This change is,"Reviewed 22 of 22 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,57,2016-12-10T18:27:48Z,2016-12-10T19:08:14Z,2016-12-10T19:08:15Z,MERGED,True,4017,5370,34,https://github.com/Novakov,Updated FreeRTOS to 9.0.0,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/57,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/57,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,57,2016-12-10T18:27:48Z,2016-12-10T19:08:14Z,2016-12-10T19:08:15Z,MERGED,True,4017,5370,34,https://github.com/Novakov,Updated FreeRTOS to 9.0.0,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/57,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/57#issuecomment-266230328,This change is,"Reviewed 34 of 34 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,58,2016-12-12T18:54:21Z,2016-12-16T07:28:22Z,2016-12-16T07:28:23Z,MERGED,True,1703,820,50,https://github.com/zaq32,Declarative mission specification,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/58,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/58,"This change introduces mission loop coordinator with list of update/verify/action tasks specified in a completely declarative way. All mission tasks are specified as part of the mission loop variadic template parameter pack. Mission loop coordinator in turn recognizes task types, classifies and extracts the descriptors from them, and then stores them in type specific lists whose sizes are calculated to match the necessary requirements.  Majority of the work is done at compile time while the remaining (much smaller part) is done during initialization.
Additional changes:

Mission state is not longer fixed. and can be changed/replaced as long as all of the actions agree on it.
Extract all of the implicit mission tasks into standalone libraries (sail, time, adcs).
Minor doxygen configuration update.
Add possibility to suspend/resume mission processing from the terminal and run mission in manual mode.



This change is","This change introduces mission loop coordinator with list of update/verify/action tasks specified in a completely declarative way. All mission tasks are specified as part of the mission loop variadic template parameter pack. Mission loop coordinator in turn recognizes task types, classifies and extracts the descriptors from them, and then stores them in type specific lists whose sizes are calculated to match the necessary requirements.  Majority of the work is done at compile time while the remaining (much smaller part) is done during initialization.
Additional changes:

Mission state is not longer fixed. and can be changed/replaced as long as all of the actions agree on it.
Extract all of the implicit mission tasks into standalone libraries (sail, time, adcs).
Minor doxygen configuration update.
Add possibility to suspend/resume mission processing from the terminal and run mission in manual mode.



This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,58,2016-12-12T18:54:21Z,2016-12-16T07:28:22Z,2016-12-16T07:28:23Z,MERGED,True,1703,820,50,https://github.com/zaq32,Declarative mission specification,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/58,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/58#issuecomment-267164506,"This change introduces mission loop coordinator with list of update/verify/action tasks specified in a completely declarative way. All mission tasks are specified as part of the mission loop variadic template parameter pack. Mission loop coordinator in turn recognizes task types, classifies and extracts the descriptors from them, and then stores them in type specific lists whose sizes are calculated to match the necessary requirements.  Majority of the work is done at compile time while the remaining (much smaller part) is done during initialization.
Additional changes:

Mission state is not longer fixed. and can be changed/replaced as long as all of the actions agree on it.
Extract all of the implicit mission tasks into standalone libraries (sail, time, adcs).
Minor doxygen configuration update.
Add possibility to suspend/resume mission processing from the terminal and run mission in manual mode.



This change is","Reviewed 53 of 53 files at r1, 4 of 5 files at r2.
Review status: all files reviewed at latest revision, 5 unresolved discussions.

integration_tests/tests/test_antenna_deployment.py, line 56 at r2 (raw file):

        self.system.backup_antenna.on_deployment_cancel = event.set
        self.begin()
        self.next_step()

Add method next_steps(steps_count) to it will be easier to invoke N steps at once

integration_tests/tests/test_antenna_deployment.py, line 58 at r2 (raw file):

        self.next_step()
        self.next_step()
        self.next_step()

I can't think of better solution right now but I don't like the idea of invoking arbitrary number of steps to check for some action - it makes tests harder to mantain in case of changes

libs/mission/Include/mission/base.hpp, line 86 at r2 (raw file):

        UpdateWarning,
        /** @brief Fatal error during update */
        UpdateFailure

Just OK. Warning and Failure would be ok

libs/mission/Include/mission/base.hpp, line 131 at r2 (raw file):

        VerifyOK,
        /** @brief State is invalid. */
        VerifyFailure

Just OK and Failure

libs/mission/sail/include/mission/sail.hpp, line 38 at r2 (raw file):

         * @param[in] initial Initial sail deployment state.
         */
        SailTask(bool initial);

I'm naming-nazi. Name initial says more or less nothing. It's better to name it like isSailOpened.
Also the 'sail deployment state' is mentioned in few places here, maybe it will be wise to define in as enum with two members?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,58,2016-12-12T18:54:21Z,2016-12-16T07:28:22Z,2016-12-16T07:28:23Z,MERGED,True,1703,820,50,https://github.com/zaq32,Declarative mission specification,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/58,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/58#issuecomment-267418496,"This change introduces mission loop coordinator with list of update/verify/action tasks specified in a completely declarative way. All mission tasks are specified as part of the mission loop variadic template parameter pack. Mission loop coordinator in turn recognizes task types, classifies and extracts the descriptors from them, and then stores them in type specific lists whose sizes are calculated to match the necessary requirements.  Majority of the work is done at compile time while the remaining (much smaller part) is done during initialization.
Additional changes:

Mission state is not longer fixed. and can be changed/replaced as long as all of the actions agree on it.
Extract all of the implicit mission tasks into standalone libraries (sail, time, adcs).
Minor doxygen configuration update.
Add possibility to suspend/resume mission processing from the terminal and run mission in manual mode.



This change is","Review status: all files reviewed at latest revision, 5 unresolved discussions.

integration_tests/tests/test_antenna_deployment.py, line 56 at r2 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Add method next_steps(steps_count) to it will be easier to invoke N steps at once

Fixed

integration_tests/tests/test_antenna_deployment.py, line 58 at r2 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
I can't think of better solution right now but I don't like the idea of invoking arbitrary number of steps to check for some action - it makes tests harder to mantain in case of changes

I also don't like it but for the moment I don't have any better solutions

libs/mission/Include/mission/base.hpp, line 86 at r2 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Just OK. Warning and Failure would be ok

Fixed

libs/mission/Include/mission/base.hpp, line 131 at r2 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Just OK and Failure

Fixed

libs/mission/sail/include/mission/sail.hpp, line 38 at r2 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
I'm naming-nazi. Name initial says more or less nothing. It's better to name it like isSailOpened.
Also the 'sail deployment state' is mentioned in few places here, maybe it will be wise to define in as enum with two members?

Fixed

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,58,2016-12-12T18:54:21Z,2016-12-16T07:28:22Z,2016-12-16T07:28:23Z,MERGED,True,1703,820,50,https://github.com/zaq32,Declarative mission specification,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/58,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/58#issuecomment-267533976,"This change introduces mission loop coordinator with list of update/verify/action tasks specified in a completely declarative way. All mission tasks are specified as part of the mission loop variadic template parameter pack. Mission loop coordinator in turn recognizes task types, classifies and extracts the descriptors from them, and then stores them in type specific lists whose sizes are calculated to match the necessary requirements.  Majority of the work is done at compile time while the remaining (much smaller part) is done during initialization.
Additional changes:

Mission state is not longer fixed. and can be changed/replaced as long as all of the actions agree on it.
Extract all of the implicit mission tasks into standalone libraries (sail, time, adcs).
Minor doxygen configuration update.
Add possibility to suspend/resume mission processing from the terminal and run mission in manual mode.



This change is","Reviewed 12 of 12 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,59,2016-12-12T19:04:21Z,2016-12-12T19:12:51Z,2016-12-12T20:00:12Z,MERGED,True,63,21,6,https://github.com/Novakov,Compile info command,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/59,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/59,"Compile info command allowing identification of environment and source code version during compilation
Some output:
>compile_info
e02ceb6 master
DevBoard Debug
Machine metis
Built in D:/PW-Sat/obc-build
GCC:5.4.1 20160919 (release) [ARM/embedded-5-branch revision 240496]



This change is","Compile info command allowing identification of environment and source code version during compilation
Some output:
>compile_info
e02ceb6 master
DevBoard Debug
Machine metis
Built in D:/PW-Sat/obc-build
GCC:5.4.1 20160919 (release) [ARM/embedded-5-branch revision 240496]



This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,59,2016-12-12T19:04:21Z,2016-12-12T19:12:51Z,2016-12-12T20:00:12Z,MERGED,True,63,21,6,https://github.com/Novakov,Compile info command,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/59,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/59#issuecomment-266522489,"Compile info command allowing identification of environment and source code version during compilation
Some output:
>compile_info
e02ceb6 master
DevBoard Debug
Machine metis
Built in D:/PW-Sat/obc-build
GCC:5.4.1 20160919 (release) [ARM/embedded-5-branch revision 240496]



This change is","Reviewed 6 of 6 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,59,2016-12-12T19:04:21Z,2016-12-12T19:12:51Z,2016-12-12T20:00:12Z,MERGED,True,63,21,6,https://github.com/Novakov,Compile info command,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/59,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/59#issuecomment-266536067,"Compile info command allowing identification of environment and source code version during compilation
Some output:
>compile_info
e02ceb6 master
DevBoard Debug
Machine metis
Built in D:/PW-Sat/obc-build
GCC:5.4.1 20160919 (release) [ARM/embedded-5-branch revision 240496]



This change is",Embed software version and create command to retrieve it,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,60,2016-12-13T08:00:39Z,2016-12-14T17:20:44Z,2016-12-14T17:20:46Z,MERGED,True,77,78,4,https://github.com/zaq32,Documentation update,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/60,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/60,"Update doxygen configuration file to make it more suitable for c++,
Fix some doxygen issues,
Fix typo in the project documentation.



This change is","Update doxygen configuration file to make it more suitable for c++,
Fix some doxygen issues,
Fix typo in the project documentation.



This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,60,2016-12-13T08:00:39Z,2016-12-14T17:20:44Z,2016-12-14T17:20:46Z,MERGED,True,77,78,4,https://github.com/zaq32,Documentation update,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/60,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/60#issuecomment-266673166,"Update doxygen configuration file to make it more suitable for c++,
Fix some doxygen issues,
Fix typo in the project documentation.



This change is","Would it be possible to reduce Doxygen verbosity? It's hard to catch warnings in that amount of output

Reviewed 4 of 4 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,60,2016-12-13T08:00:39Z,2016-12-14T17:20:44Z,2016-12-14T17:20:46Z,MERGED,True,77,78,4,https://github.com/zaq32,Documentation update,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/60,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/60#issuecomment-266673319,"Update doxygen configuration file to make it more suitable for c++,
Fix some doxygen issues,
Fix typo in the project documentation.



This change is","Review status: all files reviewed at latest revision, 1 unresolved discussion, some commit checks pending.

a discussion (no related file):
Would it be possible to reduce Doxygen verbosity? It's hard to catch warnings in that amount of output

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,60,2016-12-13T08:00:39Z,2016-12-14T17:20:44Z,2016-12-14T17:20:46Z,MERGED,True,77,78,4,https://github.com/zaq32,Documentation update,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/60,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/60#issuecomment-266673969,"Update doxygen configuration file to make it more suitable for c++,
Fix some doxygen issues,
Fix typo in the project documentation.



This change is","Review status: 3 of 4 files reviewed at latest revision, 1 unresolved discussion.

a discussion (no related file):
Previously, Novakov (Maciej T. Nowak) wrote
Would it be possible to reduce Doxygen verbosity? It's hard to catch warnings in that amount of output

Take a look now.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,60,2016-12-13T08:00:39Z,2016-12-14T17:20:44Z,2016-12-14T17:20:46Z,MERGED,True,77,78,4,https://github.com/zaq32,Documentation update,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/60,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/60#issuecomment-267096154,"Update doxygen configuration file to make it more suitable for c++,
Fix some doxygen issues,
Fix typo in the project documentation.



This change is","Reviewed 1 of 1 files at r2.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

a discussion (no related file):
Previously, zaq32 (ukasz ak) wrote
Take a look now.

Now it is possible to see something :)

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,61,2016-12-14T20:22:26Z,2016-12-30T15:18:55Z,2016-12-30T15:18:56Z,MERGED,True,4808,2202,71,https://github.com/Novakov,N25Q flash driver,14,[],https://github.com/PW-Sat2/PWSat2OBC/pull/61,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/61,"N25Q Flash memory driver and Yaffs driver
By default STK NAND flash is used. It is possible to enable N25Q instad by using USE_EXTERNAL_FLASH=1 CMake flag,
Things to do in next pull requests:

Tidy-up SPI driver
Enable usage of many N25Q memories as different mount points



This change is","N25Q Flash memory driver and Yaffs driver
By default STK NAND flash is used. It is possible to enable N25Q instad by using USE_EXTERNAL_FLASH=1 CMake flag,
Things to do in next pull requests:

Tidy-up SPI driver
Enable usage of many N25Q memories as different mount points



This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,61,2016-12-14T20:22:26Z,2016-12-30T15:18:55Z,2016-12-30T15:18:56Z,MERGED,True,4808,2202,71,https://github.com/Novakov,N25Q flash driver,14,[],https://github.com/PW-Sat2/PWSat2OBC/pull/61,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/61#issuecomment-267856076,"N25Q Flash memory driver and Yaffs driver
By default STK NAND flash is used. It is possible to enable N25Q instad by using USE_EXTERNAL_FLASH=1 CMake flag,
Things to do in next pull requests:

Tidy-up SPI driver
Enable usage of many N25Q memories as different mount points



This change is","Reviewed 15 of 57 files at r1.
Review status: 15 of 57 files reviewed at latest revision, 3 unresolved discussions, some commit checks failed.

integration_tests/tests/base.py, line 28 at r1 (raw file):

    def tearDown(self):
        self.system.obc.sync_fs()

what is the purpose of this?

integration_tests/tests/test_antenna.py, line 15 at r1 (raw file):

        event = TestEvent()
        self.system.primary_antenna.on_reset = event.set
        self.power_on_and_wait()

why wait for obc startup?

integration_tests/tests/test_antenna.py, line 21 at r1 (raw file):

        event = TestEvent()
        self.system.backup_antenna.on_reset = event.set
        self.power_on_and_wait()

why wait for obc startup?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,61,2016-12-14T20:22:26Z,2016-12-30T15:18:55Z,2016-12-30T15:18:56Z,MERGED,True,4808,2202,71,https://github.com/Novakov,N25Q flash driver,14,[],https://github.com/PW-Sat2/PWSat2OBC/pull/61,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/61#issuecomment-267927023,"N25Q Flash memory driver and Yaffs driver
By default STK NAND flash is used. It is possible to enable N25Q instad by using USE_EXTERNAL_FLASH=1 CMake flag,
Things to do in next pull requests:

Tidy-up SPI driver
Enable usage of many N25Q memories as different mount points



This change is","Review status: 15 of 57 files reviewed at latest revision, 3 unresolved discussions, some commit checks failed.

integration_tests/tests/base.py, line 28 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
what is the purpose of this?

Mounting file system can take long time (up to 30-40 seconds). Syncing file system forces YAFFS to write checkpoint information speeding up next mount significally (40sec -> 0.1sec)

integration_tests/tests/test_antenna.py, line 15 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
why wait for obc startup?

If mouting flash will take longer that 1 second this test will fail

integration_tests/tests/test_antenna.py, line 21 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
why wait for obc startup?

If mouting flash will take longer that 1 second this test will fail

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,61,2016-12-14T20:22:26Z,2016-12-30T15:18:55Z,2016-12-30T15:18:56Z,MERGED,True,4808,2202,71,https://github.com/Novakov,N25Q flash driver,14,[],https://github.com/PW-Sat2/PWSat2OBC/pull/61,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/61#issuecomment-267927587,"N25Q Flash memory driver and Yaffs driver
By default STK NAND flash is used. It is possible to enable N25Q instad by using USE_EXTERNAL_FLASH=1 CMake flag,
Things to do in next pull requests:

Tidy-up SPI driver
Enable usage of many N25Q memories as different mount points



This change is","Reviewed 1 of 57 files at r1.
Review status: 16 of 57 files reviewed at latest revision, 1 unresolved discussion, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,61,2016-12-14T20:22:26Z,2016-12-30T15:18:55Z,2016-12-30T15:18:56Z,MERGED,True,4808,2202,71,https://github.com/Novakov,N25Q flash driver,14,[],https://github.com/PW-Sat2/PWSat2OBC/pull/61,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/61#issuecomment-268068594,"N25Q Flash memory driver and Yaffs driver
By default STK NAND flash is used. It is possible to enable N25Q instad by using USE_EXTERNAL_FLASH=1 CMake flag,
Things to do in next pull requests:

Tidy-up SPI driver
Enable usage of many N25Q memories as different mount points



This change is",[Driver] Zewntrzny FLASH,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,61,2016-12-14T20:22:26Z,2016-12-30T15:18:55Z,2016-12-30T15:18:56Z,MERGED,True,4808,2202,71,https://github.com/Novakov,N25Q flash driver,14,[],https://github.com/PW-Sat2/PWSat2OBC/pull/61,https://github.com/zaq32,6,https://github.com/PW-Sat2/PWSat2OBC/pull/61#issuecomment-269372834,"N25Q Flash memory driver and Yaffs driver
By default STK NAND flash is used. It is possible to enable N25Q instad by using USE_EXTERNAL_FLASH=1 CMake flag,
Things to do in next pull requests:

Tidy-up SPI driver
Enable usage of many N25Q memories as different mount points



This change is","Reviewed 41 of 57 files at r1.
Review status: all files reviewed at latest revision, 26 unresolved discussions, some commit checks failed.

libs/base/os_base.cpp, line 24 at r1 (raw file):

constexpr std::uint32_t MilisecondsToTicks(std::uint32_t miliseconds)

use TimeSpan type to represent time values.

libs/base/os_base.cpp, line 29 at r1 (raw file):

}

Timeout::Timeout(std::uint32_t timeout) : _expireAt(System::GetTickCount() + MilisecondsToTicks(timeout))

I'd suggest measuring time in ms not system ticks, that way you would be able to drop the private dependency on freeRTOS from this module, which seems wrong anyway

libs/base/Include/system.h, line 56 at r1 (raw file):

#define HAS_FLAG(value, flag) (has_flag(value, flag))

template <typename Enum> constexpr bool has_flag(Enum value, Enum flag)

mark it as inline

libs/base/Include/system.h, line 64 at r1 (raw file):

}

template <> constexpr bool has_flag(std::uint32_t value, std::uint32_t flag)

there is no need to specialize function template, c++ will be fine with just plain function overload.

libs/base/Include/system.h, line 64 at r1 (raw file):

}

template <> constexpr bool has_flag(std::uint32_t value, std::uint32_t flag)

mark it as inline

libs/base/Include/base/os.h, line 425 at r1 (raw file):

     * @return Number of ticks
     */
    static std::uint32_t GetTickCount();

Number of ticks of what kind exactly? GetTickCount without a unit is completely useless. And since value combined unit is a time use type that is designed to represent time.

libs/base/Include/base/os.h, line 630 at r1 (raw file):

 * This class uses system tick count to measure elapsed time.
 */
class Timeout

What is exact designed use case for this class?

libs/base/Include/base/os.h, line 637 at r1 (raw file):

     * @param[in] timeout Timeout in miliseconds
     */
    Timeout(std::uint32_t timeout);

Use TimeSpan instead

libs/drivers/n25q/n25q.cpp, line 51 at r1 (raw file):

    ReaderInitialize(&reader, response.data(), 3);

    Id id;

it would be better to initialize objects via constructors, this way it will be much harder to omit some of its fields.

libs/drivers/n25q/n25q.cpp, line 144 at r1 (raw file):

}

bool N25QDriver::WaitBusy(std::uint32_t timeout)

if there is no other way I can accept active register polling, but I would recommend at least sleeping for 0-1 ms (exact value TBD) during the iterations or at least yielding the task control so one task will not over-zealously block tasks with lover priority while not doing anything useful.

libs/drivers/n25q/Include/n25q/n25q.h, line 23 at r1 (raw file):

         * @brief Device ID structure
         */
        struct Id

raw struct like this may be useful but it is very easy to accidentally left it uninitialized. Add at least:

default constructor
parametrized constructor that initializes all fields.


libs/drivers/n25q/Include/n25q/n25q.h, line 81 at r1 (raw file):

         *  Timeouts are based on maximum times specified in datasheet + some margin of error (20%)
         */
        class N25QDriver final

Since this class is not internally synchronized am I correct in assuming that high level driver (in this case yaffs) is resposnible for doring so?

libs/drivers/n25q/Include/n25q/n25q.h, line 81 at r1 (raw file):

         *  Timeouts are based on maximum times specified in datasheet + some margin of error (20%)
         */
        class N25QDriver final

I would not mind having the operation timeout specified for each function in this driver as they are seem to quite big...

libs/drivers/n25q/Include/n25q/n25q.h, line 144 at r1 (raw file):

             * This operating can take up to 4 minutes, so be patient
             */
            OperationResult EraseChip();

If it really takes this long than it should be asynchronous.

libs/drivers/n25q/Include/n25q/n25q.h, line 159 at r1 (raw file):

             * @return true of operation finished, false on timeout
             */
            bool WaitBusy(std::uint32_t timeout);

use TimeSpan instead of raw integer

libs/drivers/n25q/Include/n25q/yaffs.h, line 137 at r1 (raw file):

        /**
         * @brief Helper class allowing to specify @ref N25QYaffsDeviceBase parameters as template arguments

what is actually the point of this? These template parameters are immediately converted to runtime parameters that can be overridden, which makes them illusion at best.

libs/drivers/spi/efm.cpp, line 11 at r1 (raw file):

void EFMSPIInterface::Select()
{
    GPIO_PinOutClear(gpioPortD, 3);

Shouldn't this be specified in io_map.h?

libs/drivers/spi/Include/spi/efm.h, line 24 at r1 (raw file):

         * @brief SPI interfaced using SPIDRV
         */
        class EFMSPIInterface final : public ISPIInterface

Who is responsible for ensuring that access to the spi is synchronized?

libs/drivers/spi/Include/spi/spi.h, line 64 at r1 (raw file):

            SPISelectSlave& operator=(const SPISelectSlave&) = delete;
            SPISelectSlave(SPISelectSlave&&) = delete;
            SPISelectSlave& operator=(SPISelectSlave&&) = delete;

move constructor & move assignment operator can be safely & correctly defined I would recommend defining those.

libs/fs/fs.cpp, line 160 at r1 (raw file):

 * @param root Root directory
 */
static void RemoveDirectoryContents(yaffs_obj* root)

I'd limit the number of possible nested calls (due to uncertain stack requirements) and in such case fallback to full driver erase.

libs/yaffs_glue/yaffs_os_glue.cpp, line 16 at r1 (raw file):

int yaffsError = 0;
unsigned int yaffs_trace_mask =
    YAFFS_TRACE_ERASE | YAFFS_TRACE_ERROR | YAFFS_TRACE_BUG | YAFFS_TRACE_BAD_BLOCKS | YAFFS_TRACE_BUFFERS | YAFFS_TRACE_MOUNT;

do we need full tracing in release builds?

src/storage.h, line 33 at r1 (raw file):

    void Initialize();

#ifdef USE_EXTERNAL_FLASH

Once or twice conditional compilation is acceptable but this symbol is used in quite a few places (here, this class methods and even main & obc commands). I would recommend moving the variable parts to two independent libraries and conditionally link them in instead of spreading #ifdefs over the code

src/commands/file_system.cpp, line 10 at r1 (raw file):

#include ""yaffs_guts.h""
#include ""yaffsfs.h""
}

provide dedicated header i.e yaffs.hpp that wold handle interfacing C with C++

unit_tests/SPI/SPIMock.h, line 32 at r1 (raw file):

};

SPIExpectSelected::SPIExpectSelected(SPIInterfaceMock& mock) : _mock(mock)

this function should be marked as inline, however as a rule constructors almost always should not be defined inline.

unit_tests/SPI/SPIMock.h, line 37 at r1 (raw file):

}

SPIExpectSelected::~SPIExpectSelected()

this function should be marked as inline, however as a rule destructors almost always should not be defined inline.

unit_tests/SPI/SPIMock.h, line 42 at r1 (raw file):

}

SPIExpectSelected SPIInterfaceMock::ExpectSelected()

this function should be marked as inline

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,61,2016-12-14T20:22:26Z,2016-12-30T15:18:55Z,2016-12-30T15:18:56Z,MERGED,True,4808,2202,71,https://github.com/Novakov,N25Q flash driver,14,[],https://github.com/PW-Sat2/PWSat2OBC/pull/61,https://github.com/Novakov,7,https://github.com/PW-Sat2/PWSat2OBC/pull/61#issuecomment-269374835,"N25Q Flash memory driver and Yaffs driver
By default STK NAND flash is used. It is possible to enable N25Q instad by using USE_EXTERNAL_FLASH=1 CMake flag,
Things to do in next pull requests:

Tidy-up SPI driver
Enable usage of many N25Q memories as different mount points



This change is","Review status: all files reviewed at latest revision, 26 unresolved discussions, some commit checks failed.

libs/base/os_base.cpp, line 29 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
I'd suggest measuring time in ms not system ticks, that way you would be able to drop the private dependency on freeRTOS from this module, which seems wrong anyway

It would be nice but currently our timer is not-moving forward unless kicked by terminal and I wanted real timeouts for flash-related operations.

libs/base/Include/system.h, line 64 at r1 (raw file):
According to http://stackoverflow.com/questions/14391272/does-constexpr-imply-inline

Yes (7.1.5/2): ""constexpr functions and constexpr constructors are implicitly inline (7.1.2).""


libs/drivers/n25q/Include/n25q/n25q.h, line 81 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
Since this class is not internally synchronized am I correct in assuming that high level driver (in this case yaffs) is resposnible for doring so?

Yes

libs/drivers/n25q/Include/n25q/n25q.h, line 81 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
I would not mind having the operation timeout specified for each function in this driver as they are seem to quite big...

There are defined (and checked) timeouts for each function (except read as they cannot timeout).
If you would like to get timeout parameter for each function in what non-default values will be used?

libs/drivers/n25q/Include/n25q/n25q.h, line 144 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
If it really takes this long than it should be asynchronous.

If you look closely, you will see that only way to invoke this method is via terminal in which you really want to wait for this operation to end.

libs/drivers/n25q/Include/n25q/yaffs.h, line 137 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
what is actually the point of this? These template parameters are immediately converted to runtime parameters that can be overridden, which makes them illusion at best.

The only reason is possiblity to see flash parameters just by looking through OBCStorage class without need to dig into it's constructor (just like with tasks)

libs/drivers/spi/efm.cpp, line 11 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
Shouldn't this be specified in io_map.h?

More reasonable SPI driver is in-progress (see Trello)

libs/drivers/spi/Include/spi/efm.h, line 24 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
Who is responsible for ensuring that access to the spi is synchronized?

More reasonable SPI driver is in-progress (see Trello)

libs/drivers/spi/Include/spi/spi.h, line 64 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
move constructor & move assignment operator can be safely & correctly defined I would recommend defining those.

Honestly, I don't see any reason to pass selected slave around. Making it impossible saves us from possible trouble of debugging when slave is selected/deselected

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,61,2016-12-14T20:22:26Z,2016-12-30T15:18:55Z,2016-12-30T15:18:56Z,MERGED,True,4808,2202,71,https://github.com/Novakov,N25Q flash driver,14,[],https://github.com/PW-Sat2/PWSat2OBC/pull/61,https://github.com/zaq32,8,https://github.com/PW-Sat2/PWSat2OBC/pull/61#issuecomment-269376171,"N25Q Flash memory driver and Yaffs driver
By default STK NAND flash is used. It is possible to enable N25Q instad by using USE_EXTERNAL_FLASH=1 CMake flag,
Things to do in next pull requests:

Tidy-up SPI driver
Enable usage of many N25Q memories as different mount points



This change is","Review status: all files reviewed at latest revision, 22 unresolved discussions, some commit checks failed.

libs/base/os_base.cpp, line 29 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
It would be nice but currently our timer is not-moving forward unless kicked by terminal and I wanted real timeouts for flash-related operations.

This has nothing to do with the timer. TimeSpan type is conceptually independent of any timer and can be used to measure time flow in general.

libs/drivers/n25q/Include/n25q/n25q.h, line 81 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
There are defined (and checked) timeouts for each function (except read as they cannot timeout).
If you would like to get timeout parameter for each function in what non-default values will be used?

I would like to have timeouts explicitly documented for each potentially long running (>= 0.5 ms)  operation.

libs/drivers/n25q/Include/n25q/n25q.h, line 144 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
If you look closely, you will see that only way to invoke this method is via terminal in which you really want to wait for this operation to end.

for the moment yes, can you guarantee that it will stay this way?

libs/drivers/n25q/Include/n25q/yaffs.h, line 137 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
The only reason is possiblity to see flash parameters just by looking through OBCStorage class without need to dig into it's constructor (just like with tasks)

So I wold recommend using those values in such way that they cannot be overwritten at runtime

libs/drivers/spi/Include/spi/spi.h, line 64 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Honestly, I don't see any reason to pass selected slave around. Making it impossible saves us from possible trouble of debugging when slave is selected/deselected

I was thinking of something like this:
SPISelectSlave Prepare();

/* ... */
{
   auto select = Prepare()
   // finish the operation
}

In essence this will allow for easy extension of the chip selection beyond the lifetime of single function call.
However this is only a suggestion...

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,61,2016-12-14T20:22:26Z,2016-12-30T15:18:55Z,2016-12-30T15:18:56Z,MERGED,True,4808,2202,71,https://github.com/Novakov,N25Q flash driver,14,[],https://github.com/PW-Sat2/PWSat2OBC/pull/61,https://github.com/Novakov,9,https://github.com/PW-Sat2/PWSat2OBC/pull/61#issuecomment-269690341,"N25Q Flash memory driver and Yaffs driver
By default STK NAND flash is used. It is possible to enable N25Q instad by using USE_EXTERNAL_FLASH=1 CMake flag,
Things to do in next pull requests:

Tidy-up SPI driver
Enable usage of many N25Q memories as different mount points



This change is","Review status: 31 of 67 files reviewed at latest revision, 21 unresolved discussions.

libs/base/os_base.cpp, line 24 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
use TimeSpan type to represent time values.

Done.

libs/base/os_base.cpp, line 29 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
This has nothing to do with the timer. TimeSpan type is conceptually independent of any timer and can be used to measure time flow in general.

Right, now I got it :)

libs/base/Include/system.h, line 64 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
there is no need to specialize function template, c++ will be fine with just plain function overload.

Unless you want to use this function with value that contains flags but is not enum (like peripheral register)

libs/base/Include/base/os.h, line 425 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
Number of ticks of what kind exactly? GetTickCount without a unit is completely useless. And since value combined unit is a time use type that is designed to represent time.

Done.

libs/base/Include/base/os.h, line 630 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
What is exact designed use case for this class?

Added to documentation

libs/base/Include/base/os.h, line 637 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
Use TimeSpan instead

Done.

libs/drivers/n25q/n25q.cpp, line 51 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
it would be better to initialize objects via constructors, this way it will be much harder to omit some of its fields.

Done.

libs/drivers/n25q/n25q.cpp, line 144 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
if there is no other way I can accept active register polling, but I would recommend at least sleeping for 0-1 ms (exact value TBD) during the iterations or at least yielding the task control so one task will not over-zealously block tasks with lover priority while not doing anything useful.

Done.

libs/drivers/n25q/Include/n25q/n25q.h, line 23 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
raw struct like this may be useful but it is very easy to accidentally left it uninitialized. Add at least:

default constructor
parametrized constructor that initializes all fields.


Done.

libs/drivers/n25q/Include/n25q/n25q.h, line 81 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
I would like to have timeouts explicitly documented for each potentially long running (>= 0.5 ms)  operation.

Done.

libs/drivers/n25q/Include/n25q/n25q.h, line 144 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
for the moment yes, can you guarantee that it will stay this way?

Total number of things I can guarantee = 0.
I can't see any reason (at least for now) and reasonable way to do it asynchronously. Doing so will require creating another task that will handle waiting for operation end - it can be created upfront (wasting memory) or on demand (harder memory calculations).

libs/drivers/n25q/Include/n25q/n25q.h, line 159 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
use TimeSpan instead of raw integer

Done.

libs/drivers/n25q/Include/n25q/yaffs.h, line 137 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
So I wold recommend using those values in such way that they cannot be overwritten at runtime

Done.

libs/drivers/spi/Include/spi/spi.h, line 64 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
I was thinking of something like this:
SPISelectSlave Prepare();

/* ... */
{
   auto select = Prepare()
   // finish the operation
}

In essence this will allow for easy extension of the chip selection beyond the lifetime of single function call.
However this is only a suggestion...

It's nice feature to have if it will be needed to pass selected slave from function to function.

libs/fs/fs.cpp, line 160 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
I'd limit the number of possible nested calls (due to uncertain stack requirements) and in such case fallback to full driver erase.

Done.

libs/yaffs_glue/yaffs_os_glue.cpp, line 16 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
do we need full tracing in release builds?

It is far from full trace ;) These flags allow to spot and diagnose the most common problems with yaffs when they occur.

src/commands/file_system.cpp, line 10 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
provide dedicated header i.e yaffs.hpp that wold handle interfacing C with C++

Done.

unit_tests/SPI/SPIMock.h, line 32 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
this function should be marked as inline, however as a rule constructors almost always should not be defined inline.

Done.

unit_tests/SPI/SPIMock.h, line 37 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
this function should be marked as inline, however as a rule destructors almost always should not be defined inline.

Done.

unit_tests/SPI/SPIMock.h, line 42 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
this function should be marked as inline

Done.

src/storage.h, line 33 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
Once or twice conditional compilation is acceptable but this symbol is used in quite a few places (here, this class methods and even main & obc commands). I would recommend moving the variable parts to two independent libraries and conditionally link them in instead of spreading #ifdefs over the code

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,61,2016-12-14T20:22:26Z,2016-12-30T15:18:55Z,2016-12-30T15:18:56Z,MERGED,True,4808,2202,71,https://github.com/Novakov,N25Q flash driver,14,[],https://github.com/PW-Sat2/PWSat2OBC/pull/61,https://github.com/zaq32,10,https://github.com/PW-Sat2/PWSat2OBC/pull/61#issuecomment-269753470,"N25Q Flash memory driver and Yaffs driver
By default STK NAND flash is used. It is possible to enable N25Q instad by using USE_EXTERNAL_FLASH=1 CMake flag,
Things to do in next pull requests:

Tidy-up SPI driver
Enable usage of many N25Q memories as different mount points



This change is","Reviewed 2 of 14 files at r2, 35 of 37 files at r3.
Review status: 66 of 67 files reviewed at latest revision, 8 unresolved discussions.

libs/base/Include/system.h, line 64 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Unless you want to use this function with value that contains flags but is not enum (like peripheral register)

Can you expand on this?

libs/base/Include/base/os.h, line 425 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Done.

I rather thought of moving the TimeSpan type from time library to base so OS layer can use it.  This way it still is integer with no semantic meaning.

libs/base/Include/base/os.h, line 637 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Done.

See above

libs/drivers/n25q/Include/n25q/n25q.h, line 26 at r3 (raw file):

        struct Id
        {
            Id(std::uint8_t manufacturer, std::uint8_t memoryType, std::uint8_t memoryCapacity)

In general constructors  should not be defined inline

libs/drivers/n25q/Include/n25q/yaffs.h, line 61 at r1 (raw file):

            N25QYaffsDeviceBase& operator=(const N25QYaffsDeviceBase&) = delete;
            N25QYaffsDeviceBase(N25QYaffsDeviceBase&&) = delete;
            N25QYaffsDeviceBase& operator=(N25QYaffsDeviceBase&&) = delete;

this will of course work but it would be much more readable if you put those declarations in a structs that
struct NotCopyable
{
    NotCopyable(const NotCopyable& arg) = delete;
    NotCopyAble& operator=(const NotCopyable& arg) = delete;
};

struct NotMoveable
{
    NotMoveable(NotMoveable&& arg) = delete;
    NotMoveable& operator=(NotMoveable&& arg) = delete;
};

And simply private inherit from those.

libs/obc/storage/Include/obc/storage.h, line 43 at r3 (raw file):

        OSResult ClearStorage();

        /** @brief Performs (potentally lengthy) erase operation */

potentially

libs/obc/storage/Include/obc/storage.h, line 46 at r3 (raw file):

        OSResult Erase();

#ifdef USE_EXTERNAL_FLASH

Since external access to those fields is not desirable I would recommend putting them in private section.

libs/obc/storage/n25q_flash/CMakeLists.txt, line 10 at r3 (raw file):

target_link_libraries(${NAME} 
	obc_storage

This is interesting. We have obc_storage library that is linked to this library & at the same time this library is linked to obc storage. As a result we have logical circular dependency something that should not have happened.
I recommend doing something like this:

dropp the obc_storage_* -> obc_storage dependency
Make the OBCStorage class a template that is instantiated on different specific driver type based on build on build option:
to do that you would have to change the class OBCStorage into something like this:

 template <typename MemDriver> class OBCStorageHandler final
{
public:
    OBCStorageHandler (drivers::spi::ISPIInterface& spi, FileSystem& fs) :
        driver(spi, fs)
    {
    }

    void Initialize()
    {
        this->driver.Initialize();
    }

    OSResult ClearStorage()
    {
        return this->driver.ClearStorage();
    }
    
    OSResult Erase()
    {
        return this->driver.Erase();
    }
    
private:
    MemDriver driver;

};

and then finally:
#ifdef USE_EXTERNAL_FLASH
    #include ""n25q.hpp""
    
    typedef OBCStorage<N25QProvider> OBCStorage;
#else
    #include ""nand.h""
    
    typedef OBCStorage<NANDProvider> OBCStorage;
#endif

This way you have single common interface without the convoluted dependency graph. However this is a suggestion and not the only solution to this situation....

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,61,2016-12-14T20:22:26Z,2016-12-30T15:18:55Z,2016-12-30T15:18:56Z,MERGED,True,4808,2202,71,https://github.com/Novakov,N25Q flash driver,14,[],https://github.com/PW-Sat2/PWSat2OBC/pull/61,https://github.com/Novakov,11,https://github.com/PW-Sat2/PWSat2OBC/pull/61#issuecomment-269776549,"N25Q Flash memory driver and Yaffs driver
By default STK NAND flash is used. It is possible to enable N25Q instad by using USE_EXTERNAL_FLASH=1 CMake flag,
Things to do in next pull requests:

Tidy-up SPI driver
Enable usage of many N25Q memories as different mount points



This change is","Review status: 57 of 71 files reviewed at latest revision, 8 unresolved discussions.

libs/base/Include/system.h, line 64 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
Can you expand on this?

Type trait std::underlying_type_t<Enum> fails when template parameter is not enum which is case when using it with registers (see libs/drivers/i2c/efm.cpp, line 50)

libs/base/Include/base/os.h, line 425 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
I rather thought of moving the TimeSpan type from time library to base so OS layer can use it.  This way it still is integer with no semantic meaning.

Good point, howver @mandrek44 will be working on incorporating std::chrono soon, so changing anything in libs/time will make harder merges.

libs/base/Include/base/os.h, line 637 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
See above

See above ;)

libs/drivers/n25q/Include/n25q/n25q.h, line 26 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
In general constructors  should not be defined inline

Done.

libs/drivers/n25q/Include/n25q/yaffs.h, line 61 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
this will of course work but it would be much more readable if you put those declarations in a structs that
struct NotCopyable
{
    NotCopyable(const NotCopyable& arg) = delete;
    NotCopyAble& operator=(const NotCopyable& arg) = delete;
};

struct NotMoveable
{
    NotMoveable(NotMoveable&& arg) = delete;
    NotMoveable& operator=(NotMoveable&& arg) = delete;
};

And simply private inherit from those.

Nice :) Done

libs/obc/storage/Include/obc/storage.h, line 43 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
potentially

Done.

libs/obc/storage/Include/obc/storage.h, line 46 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
Since external access to those fields is not desirable I would recommend putting them in private section.

Done.

libs/obc/storage/n25q_flash/CMakeLists.txt, line 10 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
This is interesting. We have obc_storage library that is linked to this library & at the same time this library is linked to obc storage. As a result we have logical circular dependency something that should not have happened.
I recommend doing something like this:

dropp the obc_storage_* -> obc_storage dependency
Make the OBCStorage class a template that is instantiated on different specific driver type based on build on build option:
to do that you would have to change the class OBCStorage into something like this:

 template <typename MemDriver> class OBCStorageHandler final
{
public:
    OBCStorageHandler (drivers::spi::ISPIInterface& spi, FileSystem& fs) :
        driver(spi, fs)
    {
    }

    void Initialize()
    {
        this->driver.Initialize();
    }

    OSResult ClearStorage()
    {
        return this->driver.ClearStorage();
    }
    
    OSResult Erase()
    {
        return this->driver.Erase();
    }
    
private:
    MemDriver driver;

};

and then finally:
#ifdef USE_EXTERNAL_FLASH
    #include ""n25q.hpp""
    
    typedef OBCStorage<N25QProvider> OBCStorage;
#else
    #include ""nand.h""
    
    typedef OBCStorage<NANDProvider> OBCStorage;
#endif

This way you have single common interface without the convoluted dependency graph. However this is a suggestion and not the only solution to this situation....

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,61,2016-12-14T20:22:26Z,2016-12-30T15:18:55Z,2016-12-30T15:18:56Z,MERGED,True,4808,2202,71,https://github.com/Novakov,N25Q flash driver,14,[],https://github.com/PW-Sat2/PWSat2OBC/pull/61,https://github.com/zaq32,12,https://github.com/PW-Sat2/PWSat2OBC/pull/61#issuecomment-269778518,"N25Q Flash memory driver and Yaffs driver
By default STK NAND flash is used. It is possible to enable N25Q instad by using USE_EXTERNAL_FLASH=1 CMake flag,
Things to do in next pull requests:

Tidy-up SPI driver
Enable usage of many N25Q memories as different mount points



This change is","Reviewed 1 of 58 files at r1, 1 of 39 files at r3, 15 of 15 files at r4.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

libs/base/Include/system.h, line 64 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Type trait std::underlying_type_t<Enum> fails when template parameter is not enum which is case when using it with registers (see libs/drivers/i2c/efm.cpp, line 50)

this is true but my point here is that you do not need template <> in front of this function declaration.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,61,2016-12-14T20:22:26Z,2016-12-30T15:18:55Z,2016-12-30T15:18:56Z,MERGED,True,4808,2202,71,https://github.com/Novakov,N25Q flash driver,14,[],https://github.com/PW-Sat2/PWSat2OBC/pull/61,https://github.com/zaq32,13,https://github.com/PW-Sat2/PWSat2OBC/pull/61#issuecomment-269782086,"N25Q Flash memory driver and Yaffs driver
By default STK NAND flash is used. It is possible to enable N25Q instad by using USE_EXTERNAL_FLASH=1 CMake flag,
Things to do in next pull requests:

Tidy-up SPI driver
Enable usage of many N25Q memories as different mount points



This change is","Reviewed 1 of 58 files at r1, 1 of 1 files at r5.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,61,2016-12-14T20:22:26Z,2016-12-30T15:18:55Z,2016-12-30T15:18:56Z,MERGED,True,4808,2202,71,https://github.com/Novakov,N25Q flash driver,14,[],https://github.com/PW-Sat2/PWSat2OBC/pull/61,https://github.com/zaq32,14,https://github.com/PW-Sat2/PWSat2OBC/pull/61#issuecomment-269782992,"N25Q Flash memory driver and Yaffs driver
By default STK NAND flash is used. It is possible to enable N25Q instad by using USE_EXTERNAL_FLASH=1 CMake flag,
Things to do in next pull requests:

Tidy-up SPI driver
Enable usage of many N25Q memories as different mount points



This change is","Review status:  all files reviewed at latest revision, all discussions resolved, all commit checks successful.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,62,2016-12-18T16:27:26Z,2016-12-19T20:41:49Z,2016-12-19T20:41:50Z,MERGED,True,692,377,13,https://github.com/zaq32,Comm get exact number of bytes from frame,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/62,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/62,"Migrate buffer reader to c++ object,
Communication module update.

From now on the communication module will first query the frame for its size and then download from the hardware the necessary minimum number of bytes needed.
Update CommFrame interface to use the someone else's memory buffer instead of its own fixed size array.
Move the frame verification logic out of frame receive procedure to ensure that invalid frame content will block the frame receive path.





This change is","Migrate buffer reader to c++ object,
Communication module update.

From now on the communication module will first query the frame for its size and then download from the hardware the necessary minimum number of bytes needed.
Update CommFrame interface to use the someone else's memory buffer instead of its own fixed size array.
Move the frame verification logic out of frame receive procedure to ensure that invalid frame content will block the frame receive path.





This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,62,2016-12-18T16:27:26Z,2016-12-19T20:41:49Z,2016-12-19T20:41:50Z,MERGED,True,692,377,13,https://github.com/zaq32,Comm get exact number of bytes from frame,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/62,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/62#issuecomment-268068637,"Migrate buffer reader to c++ object,
Communication module update.

From now on the communication module will first query the frame for its size and then download from the hardware the necessary minimum number of bytes needed.
Update CommFrame interface to use the someone else's memory buffer instead of its own fixed size array.
Move the frame verification logic out of frame receive procedure to ensure that invalid frame content will block the frame receive path.





This change is",[Comm] Get exact number of bytes from frame,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,62,2016-12-18T16:27:26Z,2016-12-19T20:41:49Z,2016-12-19T20:41:50Z,MERGED,True,692,377,13,https://github.com/zaq32,Comm get exact number of bytes from frame,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/62,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/62#issuecomment-268072524,"Migrate buffer reader to c++ object,
Communication module update.

From now on the communication module will first query the frame for its size and then download from the hardware the necessary minimum number of bytes needed.
Update CommFrame interface to use the someone else's memory buffer instead of its own fixed size array.
Move the frame verification logic out of frame receive procedure to ensure that invalid frame content will block the frame receive path.





This change is","Reviewed 13 of 13 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,63,2016-12-18T22:03:13Z,2017-01-06T11:23:10Z,2017-01-06T11:23:11Z,MERGED,True,1487,932,28,https://github.com/zaq32,Update Comm driver to support comm icd issue 1.1,9,[],https://github.com/PW-Sat2/PWSat2OBC/pull/63,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/63,"Update Comm driver to support comm icd issue 1.1,
Update comm python simulator to more closely resemble actual hardware,
Break comm header file into several headers dedicated to specific parts of the driver interface,
Update driver startup routine - from now on just hardware reset instead of hardware + software reset,
Properly handle frames with invalid state.



This change is","Update Comm driver to support comm icd issue 1.1,
Update comm python simulator to more closely resemble actual hardware,
Break comm header file into several headers dedicated to specific parts of the driver interface,
Update driver startup routine - from now on just hardware reset instead of hardware + software reset,
Properly handle frames with invalid state.



This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,63,2016-12-18T22:03:13Z,2017-01-06T11:23:10Z,2017-01-06T11:23:11Z,MERGED,True,1487,932,28,https://github.com/zaq32,Update Comm driver to support comm icd issue 1.1,9,[],https://github.com/PW-Sat2/PWSat2OBC/pull/63,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/63#issuecomment-269998382,"Update Comm driver to support comm icd issue 1.1,
Update comm python simulator to more closely resemble actual hardware,
Break comm header file into several headers dedicated to specific parts of the driver interface,
Update driver startup routine - from now on just hardware reset instead of hardware + software reset,
Properly handle frames with invalid state.



This change is","Reviewed 24 of 28 files at r1, 6 of 7 files at r2, 1 of 1 files at r3.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

libs/drivers/comm/comm.cpp, line 430 at r3 (raw file):

                    LOG(LOG_LEVEL_ERROR, ""[comm] Unable to remove frame from receiver. "");
                }
                else if (frame.Verify())


Separate single iteration into dedicated function (less nesting, so it will be easier to follow)
Removing frame before verifing it can be dangerous - if error is introduced during I2C transfer (as there are no i2c-level error checking) we will lose valid frame.


Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,63,2016-12-18T22:03:13Z,2017-01-06T11:23:10Z,2017-01-06T11:23:11Z,MERGED,True,1487,932,28,https://github.com/zaq32,Update Comm driver to support comm icd issue 1.1,9,[],https://github.com/PW-Sat2/PWSat2OBC/pull/63,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/63#issuecomment-269998518,"Update Comm driver to support comm icd issue 1.1,
Update comm python simulator to more closely resemble actual hardware,
Break comm header file into several headers dedicated to specific parts of the driver interface,
Update driver startup routine - from now on just hardware reset instead of hardware + software reset,
Properly handle frames with invalid state.



This change is",[Driver] Comm driver update,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,63,2016-12-18T22:03:13Z,2017-01-06T11:23:10Z,2017-01-06T11:23:11Z,MERGED,True,1487,932,28,https://github.com/zaq32,Update Comm driver to support comm icd issue 1.1,9,[],https://github.com/PW-Sat2/PWSat2OBC/pull/63,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/63#issuecomment-270462479,"Update Comm driver to support comm icd issue 1.1,
Update comm python simulator to more closely resemble actual hardware,
Break comm header file into several headers dedicated to specific parts of the driver interface,
Update driver startup routine - from now on just hardware reset instead of hardware + software reset,
Properly handle frames with invalid state.



This change is","Review status: 24 of 28 files reviewed at latest revision, 1 unresolved discussion.

libs/drivers/comm/comm.cpp, line 430 at r3 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote

Separate single iteration into dedicated function (less nesting, so it will be easier to follow)
Removing frame before verifing it can be dangerous - if error is introduced during I2C transfer (as there are no i2c-level error checking) we will lose valid frame.


Done

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,63,2016-12-18T22:03:13Z,2017-01-06T11:23:10Z,2017-01-06T11:23:11Z,MERGED,True,1487,932,28,https://github.com/zaq32,Update Comm driver to support comm icd issue 1.1,9,[],https://github.com/PW-Sat2/PWSat2OBC/pull/63,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/63#issuecomment-270618561,"Update Comm driver to support comm icd issue 1.1,
Update comm python simulator to more closely resemble actual hardware,
Break comm header file into several headers dedicated to specific parts of the driver interface,
Update driver startup routine - from now on just hardware reset instead of hardware + software reset,
Properly handle frames with invalid state.



This change is","Reviewed 4 of 4 files at r4.
Review status: all files reviewed at latest revision, 5 unresolved discussions.

libs/drivers/comm/Include/comm/CommDriver.hpp, line 208 at r4 (raw file):

  private:
    bool SendCommand(Address address, std::uint8_t command);

Missing documentation

libs/drivers/comm/Include/comm/CommDriver.hpp, line 210 at r4 (raw file):

    bool SendCommand(Address address, std::uint8_t command);

    bool SendCommandWithResponse(Address address, std::uint8_t command, gsl::span<std::uint8_t> outBuffer);

Missing documentation

libs/drivers/comm/Include/comm/CommDriver.hpp, line 212 at r4 (raw file):

    bool SendCommandWithResponse(Address address, std::uint8_t command, gsl::span<std::uint8_t> outBuffer);

    bool GetFrame(gsl::span<std::uint8_t> buffer, int retryCount, Frame& frame);

Missing documentation

libs/drivers/comm/Include/comm/CommDriver.hpp, line 214 at r4 (raw file):

    bool GetFrame(gsl::span<std::uint8_t> buffer, int retryCount, Frame& frame);

    void ProcessSingleFrame();

Missing documentation

libs/drivers/comm/Include/comm/CommDriver.hpp, line 216 at r4 (raw file):

    void ProcessSingleFrame();

    [[noreturn]] static void CommTask(void* param);

Missing documentation

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,63,2016-12-18T22:03:13Z,2017-01-06T11:23:10Z,2017-01-06T11:23:11Z,MERGED,True,1487,932,28,https://github.com/zaq32,Update Comm driver to support comm icd issue 1.1,9,[],https://github.com/PW-Sat2/PWSat2OBC/pull/63,https://github.com/zaq32,6,https://github.com/PW-Sat2/PWSat2OBC/pull/63#issuecomment-270759088,"Update Comm driver to support comm icd issue 1.1,
Update comm python simulator to more closely resemble actual hardware,
Break comm header file into several headers dedicated to specific parts of the driver interface,
Update driver startup routine - from now on just hardware reset instead of hardware + software reset,
Properly handle frames with invalid state.



This change is","Review status: 27 of 28 files reviewed at latest revision, 5 unresolved discussions.

libs/drivers/comm/Include/comm/CommDriver.hpp, line 208 at r4 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Missing documentation

Fixed

libs/drivers/comm/Include/comm/CommDriver.hpp, line 210 at r4 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Missing documentation

Fixed

libs/drivers/comm/Include/comm/CommDriver.hpp, line 212 at r4 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Missing documentation

Fixed

libs/drivers/comm/Include/comm/CommDriver.hpp, line 214 at r4 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Missing documentation

Fixed

libs/drivers/comm/Include/comm/CommDriver.hpp, line 216 at r4 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Missing documentation

Fixed

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,63,2016-12-18T22:03:13Z,2017-01-06T11:23:10Z,2017-01-06T11:23:11Z,MERGED,True,1487,932,28,https://github.com/zaq32,Update Comm driver to support comm icd issue 1.1,9,[],https://github.com/PW-Sat2/PWSat2OBC/pull/63,https://github.com/Novakov,7,https://github.com/PW-Sat2/PWSat2OBC/pull/63#issuecomment-270885282,"Update Comm driver to support comm icd issue 1.1,
Update comm python simulator to more closely resemble actual hardware,
Break comm header file into several headers dedicated to specific parts of the driver interface,
Update driver startup routine - from now on just hardware reset instead of hardware + software reset,
Properly handle frames with invalid state.



This change is","Reviewed 1 of 1 files at r5.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,64,2017-01-01T12:56:13Z,2017-01-12T20:34:48Z,2017-01-12T20:34:50Z,MERGED,True,3260,4530,76,https://github.com/Novakov,SPI Driver,15,[],https://github.com/PW-Sat2/PWSat2OBC/pull/64,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/64,"SPI Driver using DMA for transfers
RAII-style slave selection
Reworked io_map in much more readable (and strongly typed) manner
Compile-type verification that pins are not overlapping

EBI configuration skipped for now as it is a bit tricky





This change is","SPI Driver using DMA for transfers
RAII-style slave selection
Reworked io_map in much more readable (and strongly typed) manner
Compile-type verification that pins are not overlapping

EBI configuration skipped for now as it is a bit tricky





This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,64,2017-01-01T12:56:13Z,2017-01-12T20:34:48Z,2017-01-12T20:34:50Z,MERGED,True,3260,4530,76,https://github.com/Novakov,SPI Driver,15,[],https://github.com/PW-Sat2/PWSat2OBC/pull/64,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/64#issuecomment-269904867,"SPI Driver using DMA for transfers
RAII-style slave selection
Reworked io_map in much more readable (and strongly typed) manner
Compile-type verification that pins are not overlapping

EBI configuration skipped for now as it is a bit tricky





This change is",[SPI] Implement new driver,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,64,2017-01-01T12:56:13Z,2017-01-12T20:34:48Z,2017-01-12T20:34:50Z,MERGED,True,3260,4530,76,https://github.com/Novakov,SPI Driver,15,[],https://github.com/PW-Sat2/PWSat2OBC/pull/64,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/64#issuecomment-270019697,"SPI Driver using DMA for transfers
RAII-style slave selection
Reworked io_map in much more readable (and strongly typed) manner
Compile-type verification that pins are not overlapping

EBI configuration skipped for now as it is a bit tricky





This change is","Reviewed 45 of 69 files at r1.
Review status: 44 of 66 files reviewed at latest revision, 12 unresolved discussions.

integration_tests/obc/obc.py, line 40 at r1 (raw file):

        response = self._terminal.command(""getState"")
        while response != ""1"":
            # time.sleep(5)

if it is not needed remove it

libs/base/Include/utils.h, line 76 at r1 (raw file):

 * @return Value in Hz
 */
constexpr std::uint32_t operator"""" _MHz(unsigned long long int value)

in order to make it something more than syntactic sugar dedicated type would be preferable than raw integer

libs/drivers/gpio/Include/gpio/gpio.h, line 40 at r1 (raw file):

            inline void Low() const;
            /** @brief Toggles pin */
            inline void Toggle() const;

Is it allowed to call these functions on input pin?

libs/drivers/gpio/Include/gpio/gpio.h, line 45 at r1 (raw file):

             * @return true if pin is high
             */
            inline bool Input() const;

is it allowed to call this function on output pin?

libs/drivers/gpio/Include/gpio/gpio.h, line 51 at r1 (raw file):

            const GPIO_Port_TypeDef _port;
            /** @brief Pin */
            const std::uint16_t _pin;

these members should not be protected. If they should be accessible only in derived classes they should be accessible via dedicated protected interface.

libs/drivers/gpio/Include/gpio/gpio.h, line 79 at r1 (raw file):

         * @tparam DefaultState true if pin should be high by default
         */
        template <typename Location, bool DefaultState = true> class OutputPin final : public Pin

I'd recommend hiding Pin as private class member where its features can be controlled instead of public base class.

libs/drivers/gpio/Include/gpio/gpio.h, line 100 at r1 (raw file):

        template <typename Location, bool DefaultState> void OutputPin<Location, DefaultState>::Initialize() const
        {
            GPIO_PinModeSet(this->_port, this->_pin, gpioModePushPull, ToInt(DefaultState));

why use members instead of template parameters?

libs/drivers/gpio/Include/gpio/gpio.h, line 108 at r1 (raw file):

        * @tparam DefaultState true if pin pull up should be enabled
        */
        template <typename Location, bool DefaultState = true> class InputPin final : public Pin

I'd recommend hiding Pin as private class member where its features can be controlled instead of public base class.

libs/drivers/gpio/Include/gpio/gpio.h, line 129 at r1 (raw file):

        template <typename Location, bool DefaultState> void InputPin<Location, DefaultState>::Initialize() const
        {
            GPIO_PinModeSet(this->_port, this->_pin, gpioModeInputPull, ToInt(DefaultState));

why use members instead of template parameters?

libs/drivers/leuart/leuart.cpp, line 50 at r1 (raw file):

    //    GPIO_PinModeSet(LEUART0_PORT, LEUART0_TX, gpioModePushPull, 1);
    //    GPIO_PinModeSet(LEUART0_PORT, LEUART0_RX, gpioModeInputPull, 1);

if those line are not  needed anymore remove them

libs/drivers/n25q/n25q.cpp, line 317 at r1 (raw file):

        if (timeoutCheck.Expired())
            return OperationResult::Timeout;
    } while (true);

sleep/yield would at the end of a loop would be nice

libs/efm_support/CMakeLists.txt, line 1 at r1 (raw file):

set(NAME efm_support)

what is the purpose of this library?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,64,2017-01-01T12:56:13Z,2017-01-12T20:34:48Z,2017-01-12T20:34:50Z,MERGED,True,3260,4530,76,https://github.com/Novakov,SPI Driver,15,[],https://github.com/PW-Sat2/PWSat2OBC/pull/64,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/64#issuecomment-271174067,"SPI Driver using DMA for transfers
RAII-style slave selection
Reworked io_map in much more readable (and strongly typed) manner
Compile-type verification that pins are not overlapping

EBI configuration skipped for now as it is a bit tricky





This change is","Reviewed 20 of 69 files at r1, 3 of 6 files at r2, 9 of 9 files at r3.
Review status: all files reviewed at latest revision, 16 unresolved discussions.

libs/base/Include/base/io_map.h, line 61 at r3 (raw file):

     * @tparam TPinNumber Pin number
     */
    template <GPIO_Port_TypeDef TPort, std::uint16_t TPinNumber> struct PinLocation : public PinTag

missing include: cstdint

libs/drivers/spi/Include/spi/efm.h, line 27 at r3 (raw file):

         * This class represent EFM peripheral, to use it with specific device (slave) see @ref EFMSPISlaveInterface
         */
        class EFMSPIInterface final

There is some non obvious logic inside this class that is not tested at all.

libs/efm_support/Include/efm_support/clock.h, line 8 at r3 (raw file):

namespace efm
{
    template <typename Peripheral> constexpr CMU_Clock_TypeDef Clock(const Peripheral hw)

undocumented

libs/efm_support/Include/efm_support/dma.h, line 16 at r3 (raw file):

    };

    template <DMASignalUSART Signal> constexpr DMADRV_PeripheralSignal_t DMASignal(const USART_TypeDef* peripheral) = delete;

undocumented

libs/obc/hardware/Include/obc/gpio-internal.h, line 21 at r3 (raw file):

        /** @brief Conflict detection */
        struct Conflicts

The overall mechanism works as expected but this mechanism leaves something to be desired. As any new ping set (i.e. cameras, additional chip select pins) will require updating this implementation. Ideally it should not be aware of any specific pin group type and operate either on generic pin group type like this:
template <typename... PinLocations> struct PinGroup
{
/* (...) */
};

or pure flat set of pin locations.
Plus it is no immediately obvious that this type works only on limited set of tagged types.

libs/obc/hardware/Include/obc/gpio.h, line 83 at r3 (raw file):

    {
        /** @brief Slave Select - Flash1 */
        const drivers::gpio::OutputPin<TSlaveSelectFlash1> SlaveSelectFlash1;

I'd call it flash1ChipSelect

libs/obc/storage/n25q_flash/n25q.cpp, line 19 at r3 (raw file):

void N25QStorage::Initialize()
{
    this->ExternalFlashDriver.Reset();

Does this function guarantees that  by the time it returns the chip will already be in operational state?

libs/obc/storage/n25q_flash/Include/obc/storage/n25q.h, line 24 at r3 (raw file):

         * @brief Storage driver for N25Q
         */
        class N25QStorage final

it would be nice to have documented the purpose of this class. as it takes a while to understand it and to be strict this class is not a driver...

libs/obc/storage/n25q_flash/Include/obc/storage/n25q.h, line 54 at r3 (raw file):

            /** @brief N25Q Yaffs device */
            devices::n25q::N25QYaffsDevice<devices::n25q::BlockMapping::Sector, 512_Bytes, 16_MB> ExternalFlash;

why these fields are public? They don't seem to be used outside this class.

libs/terminal/terminal.cpp, line 101 at r3 (raw file):

        terminal->_stdio.Readline(&terminal->_stdio, input_buffer, COUNT_OF(input_buffer));

        //        LOGF(LOG_LEVEL_INFO, ""Received line %s"", input_buffer);

either remove this line or uncomment it.

src/main.cpp, line 55 at r3 (raw file):

extern ""C"" void vApplicationIdleHook(void)
{
    //    EMU_EnterEM1();

why disable EM1?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,64,2017-01-01T12:56:13Z,2017-01-12T20:34:48Z,2017-01-12T20:34:50Z,MERGED,True,3260,4530,76,https://github.com/Novakov,SPI Driver,15,[],https://github.com/PW-Sat2/PWSat2OBC/pull/64,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/64#issuecomment-271180547,"SPI Driver using DMA for transfers
RAII-style slave selection
Reworked io_map in much more readable (and strongly typed) manner
Compile-type verification that pins are not overlapping

EBI configuration skipped for now as it is a bit tricky





This change is","Review status: 52 of 66 files reviewed at latest revision, 23 unresolved discussions.

integration_tests/obc/obc.py, line 40 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
if it is not needed remove it

Done.

libs/base/Include/utils.h, line 76 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
in order to make it something more than syntactic sugar dedicated type would be preferable than raw integer

It's just syntactic sugar too avoid counting trailing zeros in numbers

libs/base/Include/base/io_map.h, line 61 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
missing include: cstdint

Done.

libs/drivers/gpio/Include/gpio/gpio.h, line 40 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
Is it allowed to call these functions on input pin?

Sure - it will enable/disable/toggle pull-up

libs/drivers/gpio/Include/gpio/gpio.h, line 45 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
is it allowed to call this function on output pin?

Sure - it will give pin value

libs/drivers/gpio/Include/gpio/gpio.h, line 51 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
these members should not be protected. If they should be accessible only in derived classes they should be accessible via dedicated protected interface.

Changed to private

libs/drivers/gpio/Include/gpio/gpio.h, line 79 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
I'd recommend hiding Pin as private class member where its features can be controlled instead of public base class.

We discussed that and decided to leave as it is now

libs/drivers/gpio/Include/gpio/gpio.h, line 100 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
why use members instead of template parameters?

Done.

libs/drivers/gpio/Include/gpio/gpio.h, line 108 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
I'd recommend hiding Pin as private class member where its features can be controlled instead of public base class.

We discussed that and decided to leave as it is now

libs/drivers/gpio/Include/gpio/gpio.h, line 129 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
why use members instead of template parameters?

Done

libs/drivers/leuart/leuart.cpp, line 50 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
if those line are not  needed anymore remove them

Done.

libs/drivers/n25q/n25q.cpp, line 317 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
sleep/yield would at the end of a loop would be nice

Done.

libs/drivers/spi/Include/spi/efm.h, line 27 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
There is some non obvious logic inside this class that is not tested at all.

How do you propose to unit test this?
To decouple SPI driver from hardware will require creating wrapper around emlib and dmadrv .

libs/efm_support/CMakeLists.txt, line 1 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
what is the purpose of this library?

When working with some periperhal (like USART1) you need to know few another constant/registers like clock (cmuClock_USART1), DMA signals (USART1_TXBL). peripheral is configured in io_map but putting there all these constants will just make that file less readable, so I created few constexprs to resolve that dependant constants. I can't put is in emlib as another file as some constants (DMA signals) comes from emdrv

libs/efm_support/Include/efm_support/clock.h, line 8 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
undocumented

Done.

libs/efm_support/Include/efm_support/dma.h, line 16 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
undocumented

Done.

libs/obc/hardware/Include/obc/gpio-internal.h, line 21 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
The overall mechanism works as expected but this mechanism leaves something to be desired. As any new ping set (i.e. cameras, additional chip select pins) will require updating this implementation. Ideally it should not be aware of any specific pin group type and operate either on generic pin group type like this:
template <typename... PinLocations> struct PinGroup
{
/* (...) */
};

or pure flat set of pin locations.
Plus it is no immediately obvious that this type works only on limited set of tagged types.

Done.

libs/obc/hardware/Include/obc/gpio.h, line 83 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
I'd call it flash1ChipSelect

Done.

libs/obc/storage/n25q_flash/n25q.cpp, line 19 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
Does this function guarantees that  by the time it returns the chip will already be in operational state?

Added operation result as return value

libs/obc/storage/n25q_flash/Include/obc/storage/n25q.h, line 24 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
it would be nice to have documented the purpose of this class. as it takes a while to understand it and to be strict this class is not a driver...

Done.

libs/obc/storage/n25q_flash/Include/obc/storage/n25q.h, line 54 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
why these fields are public? They don't seem to be used outside this class.

Done.

libs/terminal/terminal.cpp, line 101 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
either remove this line or uncomment it.

Done.

src/main.cpp, line 55 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
why disable EM1?

Debugging leftover

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,64,2017-01-01T12:56:13Z,2017-01-12T20:34:48Z,2017-01-12T20:34:50Z,MERGED,True,3260,4530,76,https://github.com/Novakov,SPI Driver,15,[],https://github.com/PW-Sat2/PWSat2OBC/pull/64,https://github.com/zaq32,6,https://github.com/PW-Sat2/PWSat2OBC/pull/64#issuecomment-271187257,"SPI Driver using DMA for transfers
RAII-style slave selection
Reworked io_map in much more readable (and strongly typed) manner
Compile-type verification that pins are not overlapping

EBI configuration skipped for now as it is a bit tricky





This change is","Reviewed 11 of 14 files at r4.
Review status: 63 of 66 files reviewed at latest revision, 6 unresolved discussions.

libs/drivers/spi/Include/spi/efm.h, line 27 at r3 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
How do you propose to unit test this?
To decouple SPI driver from hardware will require creating wrapper around emlib and dmadrv .

exactly

libs/efm_support/Include/efm_support/clock.h, line 13 at r4 (raw file):

     * @return CMU clock
     *
     * @remark Not all peripheral are supported at the moment - feel free to add new ones if needed

peripherals

libs/obc/storage/n25q_flash/n25q.cpp, line 19 at r3 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Added operation result as return value

Operation result  is one step but my point here is that device reset can take i.e. 10ms. Will the Reset procedure wait that 10ms until the device finishes its restart procedure or will it simply trigger the process & return?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,64,2017-01-01T12:56:13Z,2017-01-12T20:34:48Z,2017-01-12T20:34:50Z,MERGED,True,3260,4530,76,https://github.com/Novakov,SPI Driver,15,[],https://github.com/PW-Sat2/PWSat2OBC/pull/64,https://github.com/Novakov,7,https://github.com/PW-Sat2/PWSat2OBC/pull/64#issuecomment-271639463,"SPI Driver using DMA for transfers
RAII-style slave selection
Reworked io_map in much more readable (and strongly typed) manner
Compile-type verification that pins are not overlapping

EBI configuration skipped for now as it is a bit tricky





This change is","Review status: 49 of 76 files reviewed at latest revision, 6 unresolved discussions.

libs/drivers/spi/Include/spi/efm.h, line 27 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
exactly

I've added some basic tests.

libs/efm_support/Include/efm_support/clock.h, line 13 at r4 (raw file):
Previously, zaq32 (ukasz ak) wrote
peripherals

Done.

libs/obc/storage/n25q_flash/n25q.cpp, line 19 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
Operation result  is one step but my point here is that device reset can take i.e. 10ms. Will the Reset procedure wait that 10ms until the device finishes its restart procedure or will it simply trigger the process & return?

It will wait until device is operational (or fail with timeout)

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,64,2017-01-01T12:56:13Z,2017-01-12T20:34:48Z,2017-01-12T20:34:50Z,MERGED,True,3260,4530,76,https://github.com/Novakov,SPI Driver,15,[],https://github.com/PW-Sat2/PWSat2OBC/pull/64,https://github.com/zaq32,8,https://github.com/PW-Sat2/PWSat2OBC/pull/64#issuecomment-271674974,"SPI Driver using DMA for transfers
RAII-style slave selection
Reworked io_map in much more readable (and strongly typed) manner
Compile-type verification that pins are not overlapping

EBI configuration skipped for now as it is a bit tricky





This change is","Reviewed 3 of 14 files at r4, 24 of 24 files at r5.
Review status: all files reviewed at latest revision, 3 unresolved discussions.

libs/obc/hardware/Include/obc/gpio-internal.h, line 21 at r3 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Done.

This much better but it can be further simplified by splatting the Pin, PinGroup, PinContainer collection into flat list of the Pins and then iterating over them in the way it is already done. This way you can remove Type/GetType elements and significantly simplify Conflict type.

libs/obc/storage/n25q_flash/n25q.cpp, line 19 at r3 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
It will wait until device is operational (or fail with timeout)

this fact should be documented

unit_tests/mock/emlib.h, line 139 at r5 (raw file):

this->_released = tmp._released;
this->_holder = tmp._holder;


This is conceptual resource leak. The right way here is to simply:
using std::swap;
swap(this->_released, tmp._released);
swap(this->_holder, tmp._holder);

or better (if the class supports swapping)
using std::swap;
swap(*this, tmp);


Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,64,2017-01-01T12:56:13Z,2017-01-12T20:34:48Z,2017-01-12T20:34:50Z,MERGED,True,3260,4530,76,https://github.com/Novakov,SPI Driver,15,[],https://github.com/PW-Sat2/PWSat2OBC/pull/64,https://github.com/Novakov,9,https://github.com/PW-Sat2/PWSat2OBC/pull/64#issuecomment-271961156,"SPI Driver using DMA for transfers
RAII-style slave selection
Reworked io_map in much more readable (and strongly typed) manner
Compile-type verification that pins are not overlapping

EBI configuration skipped for now as it is a bit tricky





This change is","Review status: 73 of 76 files reviewed at latest revision, 3 unresolved discussions.

libs/obc/hardware/Include/obc/gpio-internal.h, line 21 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
This much better but it can be further simplified by splatting the Pin, PinGroup, PinContainer collection into flat list of the Pins and then iterating over them in the way it is already done. This way you can remove Type/GetType elements and significantly simplify Conflict type.

Done.

libs/obc/storage/n25q_flash/n25q.cpp, line 19 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
this fact should be documented

Done.

unit_tests/mock/emlib.h, line 139 at r5 (raw file):
Previously, zaq32 (ukasz ak) wrote

this->_released = tmp._released;
this->_holder = tmp._holder;


This is conceptual resource leak. The right way here is to simply:
using std::swap;
swap(this->_released, tmp._released);
swap(this->_holder, tmp._holder);

or better (if the class supports swapping)
using std::swap;
swap(*this, tmp);


Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,64,2017-01-01T12:56:13Z,2017-01-12T20:34:48Z,2017-01-12T20:34:50Z,MERGED,True,3260,4530,76,https://github.com/Novakov,SPI Driver,15,[],https://github.com/PW-Sat2/PWSat2OBC/pull/64,https://github.com/zaq32,10,https://github.com/PW-Sat2/PWSat2OBC/pull/64#issuecomment-272005263,"SPI Driver using DMA for transfers
RAII-style slave selection
Reworked io_map in much more readable (and strongly typed) manner
Compile-type verification that pins are not overlapping

EBI configuration skipped for now as it is a bit tricky





This change is","Reviewed 3 of 3 files at r6.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,65,2017-01-01T20:16:23Z,2017-01-09T18:52:17Z,2017-01-09T18:52:18Z,MERGED,True,789,595,27,https://github.com/Novakov,File system C++,8,[],https://github.com/PW-Sat2/PWSat2OBC/pull/65,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/65,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,65,2017-01-01T20:16:23Z,2017-01-09T18:52:17Z,2017-01-09T18:52:18Z,MERGED,True,789,595,27,https://github.com/Novakov,File system C++,8,[],https://github.com/PW-Sat2/PWSat2OBC/pull/65,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/65#issuecomment-270022337,This change is,"Reviewed 25 of 25 files at r1.
Review status: all files reviewed at latest revision, 13 unresolved discussions.

libs/fs/extension.cpp, line 58 at r1 (raw file):

}

File::File(File&& other) : _fs(other._fs), _handle(other._handle), _valid(other._valid)

mark as noexcept

libs/fs/extension.cpp, line 64 at r1 (raw file):

}

File& File::operator=(File&& other)

resource leak.
consider this:
File foo = File::Open(/* ... */);
foo = File::Open(/* ... */);


libs/fs/extension.cpp, line 64 at r1 (raw file):

}

File& File::operator=(File&& other)

mark as noexcept

libs/fs/extension.cpp, line 70 at r1 (raw file):

    this->_fs = other._fs;

    other._handle = 0;

this suggest that 0 can be used as a marker for invalid handle, with this knowledge you can drop the _valid member from this class.

libs/fs/yaffs.cpp, line 18 at r1 (raw file):

    else
    {
        return (OSResult)yaffs_get_error();

static_cast

libs/fs/Include/fs/fs.h, line 64 at r1 (raw file):

         * @brief Type that represents directory opening status.
         */
        struct DirectoryOpenResult

the FileOpenResult & DirectoryOpenResult can be merged into single template with one argument (plus typedefs to keep the type names).

libs/fs/Include/fs/fs.h, line 92 at r1 (raw file):

         * @brief Type that represents file read/write operation status.
         */
        struct IOResult

See above

libs/fs/Include/fs/fs.h, line 240 at r1 (raw file):

         * @brief Wrapper over file handle
         */
        class File : private NotCopyable

I'd also add default constructor

libs/fs/Include/fs/fs.h, line 280 at r1 (raw file):

            /**
             * @brief Factory method that opens for read

for write

libs/fs/Include/fs/fs.h, line 288 at r1 (raw file):

             */
            static File OpenWrite(
                IFileSystem& fs, const char* path, FileOpen mode = FileOpen::Existing, FileAccess access = FileAccess::WriteOnly);

shouldn't the default mode be CreateAlways?

libs/fs/Include/fs/fs.h, line 298 at r1 (raw file):

             * @return Operation result
             */
            IOResult Read(gsl::span<uint8_t> buffer);

it would be more useful to get subspan that contains the actually read data instead of the number of bytes read.

libs/obc/storage/Include/obc/storage.h, line 38 at r1 (raw file):

         * @param fs File system interface
         */
        OBCStorageHandler(drivers::spi::ISPIInterface& spi, services::fs::YaffsFileSystem& fs);

why pass implementation instead of interface?

libs/obc/storage/n25q_flash/n25q.cpp, line 17 at r1 (raw file):

void N25QStorage::Initialize()
{
    if (OS_RESULT_FAILED(this->ExternalFlash.Mount()))

why external flash is not using IFileSystem interface for volume mounting?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,65,2017-01-01T20:16:23Z,2017-01-09T18:52:17Z,2017-01-09T18:52:18Z,MERGED,True,789,595,27,https://github.com/Novakov,File system C++,8,[],https://github.com/PW-Sat2/PWSat2OBC/pull/65,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/65#issuecomment-270023104,This change is,"Review status: all files reviewed at latest revision, 13 unresolved discussions.

libs/fs/extension.cpp, line 64 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
resource leak.
consider this:
File foo = File::Open(/* ... */);
foo = File::Open(/* ... */);


or even more evil:
File foo = File::Open(/* ... */);
foo = std::move(foo);


Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,65,2017-01-01T20:16:23Z,2017-01-09T18:52:17Z,2017-01-09T18:52:18Z,MERGED,True,789,595,27,https://github.com/Novakov,File system C++,8,[],https://github.com/PW-Sat2/PWSat2OBC/pull/65,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/65#issuecomment-270172383,This change is,"Review status: 12 of 28 files reviewed at latest revision, 13 unresolved discussions.

libs/fs/extension.cpp, line 58 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
mark as noexcept

Done.

libs/fs/extension.cpp, line 64 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
or even more evil:
File foo = File::Open(/* ... */);
foo = std::move(foo);


Done.

libs/fs/extension.cpp, line 64 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
mark as noexcept

Done.

libs/fs/extension.cpp, line 70 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
this suggest that 0 can be used as a marker for invalid handle, with this knowledge you can drop the _valid member from this class.

Done.

libs/fs/yaffs.cpp, line 18 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
static_cast

Done.

libs/fs/Include/fs/fs.h, line 64 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
the FileOpenResult & DirectoryOpenResult can be merged into single template with one argument (plus typedefs to keep the type names).

Done.

libs/fs/Include/fs/fs.h, line 92 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
See above

Done.

libs/fs/Include/fs/fs.h, line 240 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
I'd also add default constructor

File needs reference to IFileSystem which cannot be set to some 'empty' value

libs/fs/Include/fs/fs.h, line 280 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
for write

Done.

libs/fs/Include/fs/fs.h, line 288 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
shouldn't the default mode be CreateAlways?

To be honest I'm thinking of removing OpenWrite - there is no good (and safe) default for open mode

libs/fs/Include/fs/fs.h, line 298 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
it would be more useful to get subspan that contains the actually read data instead of the number of bytes read.

Done.

libs/obc/storage/Include/obc/storage.h, line 38 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
why pass implementation instead of interface?

IFileSystem is independent from yaffs, drivers for storage mechansim are yaffs-only. We can (1) pollute IFileSystem with yaffs-specific details, (2) build abstractions to hide yaffs details or (3) pass Yaffs implementation to storage drivers

libs/obc/storage/n25q_flash/n25q.cpp, line 17 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
why external flash is not using IFileSystem interface for volume mounting?

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,65,2017-01-01T20:16:23Z,2017-01-09T18:52:17Z,2017-01-09T18:52:18Z,MERGED,True,789,595,27,https://github.com/Novakov,File system C++,8,[],https://github.com/PW-Sat2/PWSat2OBC/pull/65,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/65#issuecomment-270462228,This change is,"Reviewed 16 of 16 files at r2.
Review status: all files reviewed at latest revision, 8 unresolved discussions.

libs/fs/extension.cpp, line 64 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Done.

I am afraid not current implementation is actually worse than the original one as contains the resource leak plus it has unintended side effect of leaving the resource File object in invalid state.
Take the first example:
File foo = File::Open(/* ... */);   // (1)
foo = File::Open(/* ... */);          // (2)

at line 1 we have valid opened file which is indicated by the _handle member set to to some value lets use symbol A for it.
so at line 1 we have
foo:
_handle : A
_valid : true

now we at line 2 we are opening the new file. The File::Open is returning another File object which is move assigned to the foo variable. At the point of assignment in line two we have:
foo: 
_handle: A
_valid: true

<temporary>:
_handle: B
_valid: true

Now we enter the move assignment operator where this points to foo and other is bound to <temporary>
Lets see what happens inside the operator:
this->_handle = other._handle;        // foo->_handle <- B   the handle with value A is leaked here (!!!)
this->_valid = other._valid;          // foo->_valid <- true   
this->_fs = other._fs;                // this line is subject for another discussion
// here is where it gets very interesting
other._handle = this->_handle;       // <temporary>->_handle <- foo->_handle which is at this point B as it was set two line above
other._valid = this->_valid;         // <temporary>->_valid <- foo->_valid 
other._fs = this->_fs;

so after the assignment and before end of this line we have following situation:
foo: 
_handle: B
_valid: true

<temporary>:
_handle: B
_valid: true

and what happens now is the destructor for the <temporary> gets called which closes the resource B(!!!) as a result we end up with leaked file handle A and foo object that uses already destroyed file handle B.

libs/fs/extension.cpp, line 70 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Done.

This is not necessarily what I have suggested. Since 0 has been used to indicate that handle is not valid the value of the _valid member can be inferred by checking if the _handle member is set to 0 as a result the _valid member can be completely removed.

libs/fs/extension.cpp, line 58 at r2 (raw file):

}

File::File(File&& other) noexcept : _fs(other._fs), _handle(other._handle), _valid(other._valid)

see my comment regarding move assignment operator. This constructor is now suffering for the same issue.

libs/fs/Include/fs/fs.h, line 240 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
File needs reference to IFileSystem which cannot be set to some 'empty' value

Since it is a reference the File type should not be moveable as well because it is not possible to redirect once initialized reference.
Consider this:
int a = 1;
int& b = a;
int* c = &a;
int d = 4;

now b = d; is semantically equal to the *c = d;
Also the redirection possible with pointers like this: c = &d; is not possible to replicate with references.
The reason why the _fs member assignment works at all in the move constructor is caused only by the fact that in current system _fs in both source & the target variables will always point to the same service. However you will quickly start seeing unintended side effects once you start using several file system services.

libs/fs/Include/fs/fs.h, line 288 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
To be honest I'm thinking of removing OpenWrite - there is no good (and safe) default for open mode

why not just drop the default value from  opening mode argument?

libs/obc/storage/Include/obc/storage.h, line 38 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
IFileSystem is independent from yaffs, drivers for storage mechansim are yaffs-only. We can (1) pollute IFileSystem with yaffs-specific details, (2) build abstractions to hide yaffs details or (3) pass Yaffs implementation to storage drivers

what about (4) create dedicated yaffs specific interface directed at the file system providers? My point here is that I would like to see some automatic tests for the cases when storage device could not be mounted.

libs/obc/storage/n25q_flash/n25q.cpp, line 19 at r2 (raw file):

    if (OS_RESULT_FAILED(this->ExternalFlash.Mount(this->_fs)))
    {
        return;

I'd recommend returning status value that would indicate that flash is not available. so we can take proper action at the top level and perhaps adjust list of the available services.

libs/obc/storage/stk_flash/stk.cpp, line 42 at r2 (raw file):

    if (OS_RESULT_FAILED(this->_fs.AddDeviceAndMount(&rootDevice)))
    {
        return;

I'd recommend returning status value that would indicate that flash is not available. so we can take proper action at the top level and perhaps adjust list of the available services.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,65,2017-01-01T20:16:23Z,2017-01-09T18:52:17Z,2017-01-09T18:52:18Z,MERGED,True,789,595,27,https://github.com/Novakov,File system C++,8,[],https://github.com/PW-Sat2/PWSat2OBC/pull/65,https://github.com/Novakov,6,https://github.com/PW-Sat2/PWSat2OBC/pull/65#issuecomment-270614202,This change is,"Review status: 15 of 28 files reviewed at latest revision, 8 unresolved discussions.

libs/fs/extension.cpp, line 64 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
I am afraid not current implementation is actually worse than the original one as contains the resource leak plus it has unintended side effect of leaving the resource File object in invalid state.
Take the first example:
File foo = File::Open(/* ... */);   // (1)
foo = File::Open(/* ... */);          // (2)

at line 1 we have valid opened file which is indicated by the _handle member set to to some value lets use symbol A for it.
so at line 1 we have
foo:
_handle : A
_valid : true

now we at line 2 we are opening the new file. The File::Open is returning another File object which is move assigned to the foo variable. At the point of assignment in line two we have:
foo: 
_handle: A
_valid: true

<temporary>:
_handle: B
_valid: true

Now we enter the move assignment operator where this points to foo and other is bound to <temporary>
Lets see what happens inside the operator:
this->_handle = other._handle;        // foo->_handle <- B   the handle with value A is leaked here (!!!)
this->_valid = other._valid;          // foo->_valid <- true   
this->_fs = other._fs;                // this line is subject for another discussion
// here is where it gets very interesting
other._handle = this->_handle;       // <temporary>->_handle <- foo->_handle which is at this point B as it was set two line above
other._valid = this->_valid;         // <temporary>->_valid <- foo->_valid 
other._fs = this->_fs;

so after the assignment and before end of this line we have following situation:
foo: 
_handle: B
_valid: true

<temporary>:
_handle: B
_valid: true

and what happens now is the destructor for the <temporary> gets called which closes the resource B(!!!) as a result we end up with leaked file handle A and foo object that uses already destroyed file handle B.

I really wrote that? I really need more sleep/coffee.

libs/fs/extension.cpp, line 70 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
This is not necessarily what I have suggested. Since 0 has been used to indicate that handle is not valid the value of the _valid member can be inferred by checking if the _handle member is set to 0 as a result the _valid member can be completely removed.

I never intended to use _handle equal of 0 as error marker - that's why I'm using two values. Assigning 0 to _handle was by mistake

libs/fs/Include/fs/fs.h, line 240 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
Since it is a reference the File type should not be moveable as well because it is not possible to redirect once initialized reference.
Consider this:
int a = 1;
int& b = a;
int* c = &a;
int d = 4;

now b = d; is semantically equal to the *c = d;
Also the redirection possible with pointers like this: c = &d; is not possible to replicate with references.
The reason why the _fs member assignment works at all in the move constructor is caused only by the fact that in current system _fs in both source & the target variables will always point to the same service. However you will quickly start seeing unintended side effects once you start using several file system services.

So no move operations => no factory methods

libs/obc/storage/Include/obc/storage.h, line 38 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
what about (4) create dedicated yaffs specific interface directed at the file system providers? My point here is that I would like to see some automatic tests for the cases when storage device could not be mounted.

Done

libs/obc/storage/n25q_flash/n25q.cpp, line 19 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
I'd recommend returning status value that would indicate that flash is not available. so we can take proper action at the top level and perhaps adjust list of the available services.

Done.

libs/obc/storage/stk_flash/stk.cpp, line 42 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
I'd recommend returning status value that would indicate that flash is not available. so we can take proper action at the top level and perhaps adjust list of the available services.

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,65,2017-01-01T20:16:23Z,2017-01-09T18:52:17Z,2017-01-09T18:52:18Z,MERGED,True,789,595,27,https://github.com/Novakov,File system C++,8,[],https://github.com/PW-Sat2/PWSat2OBC/pull/65,https://github.com/zaq32,7,https://github.com/PW-Sat2/PWSat2OBC/pull/65#issuecomment-270754538,This change is,"Reviewed 13 of 13 files at r3.
Review status: all files reviewed at latest revision, 2 unresolved discussions.

libs/fs/extension.cpp, line 64 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
I really wrote that? I really need more sleep/coffee.

That was drastic...
but will work

libs/fs/Include/fs/fs.h, line 240 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
So no move operations => no factory methods

You may also internally use pointers and keep the reference in the interface

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,66,2017-01-08T16:14:22Z,2017-01-14T14:34:53Z,2017-01-14T14:34:54Z,MERGED,True,393,503,52,https://github.com/mandrek44,Replaced `TimeSpan with `std::chrono::duration`,8,[],https://github.com/PW-Sat2/PWSat2OBC/pull/66,https://github.com/mandrek44,1,https://github.com/PW-Sat2/PWSat2OBC/pull/66,"I replaced implementation of TimeSpan with std::chrono::duration<uint64_t>.
Some methods were removed because they duplicated std::chrono::duration built-in functionality.
I left TimePoint becasue it seems tailored for this system needs.


This change is","I replaced implementation of TimeSpan with std::chrono::duration<uint64_t>.
Some methods were removed because they duplicated std::chrono::duration built-in functionality.
I left TimePoint becasue it seems tailored for this system needs.


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,66,2017-01-08T16:14:22Z,2017-01-14T14:34:53Z,2017-01-14T14:34:54Z,MERGED,True,393,503,52,https://github.com/mandrek44,Replaced `TimeSpan with `std::chrono::duration`,8,[],https://github.com/PW-Sat2/PWSat2OBC/pull/66,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/66#issuecomment-271171081,"I replaced implementation of TimeSpan with std::chrono::duration<uint64_t>.
Some methods were removed because they duplicated std::chrono::duration built-in functionality.
I left TimePoint becasue it seems tailored for this system needs.


This change is","Reviewed 14 of 14 files at r1.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

a discussion (no related file):
There are also few functions accepting time in base/os.h. It would be nice to have them changed to std::chrono as well.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,66,2017-01-08T16:14:22Z,2017-01-14T14:34:53Z,2017-01-14T14:34:54Z,MERGED,True,393,503,52,https://github.com/mandrek44,Replaced `TimeSpan with `std::chrono::duration`,8,[],https://github.com/PW-Sat2/PWSat2OBC/pull/66,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/66#issuecomment-271175486,"I replaced implementation of TimeSpan with std::chrono::duration<uint64_t>.
Some methods were removed because they duplicated std::chrono::duration built-in functionality.
I left TimePoint becasue it seems tailored for this system needs.


This change is","Review status: all files reviewed at latest revision, 12 unresolved discussions.

libs/time/TimePoint.cpp, line 5 at r1 (raw file):

TimeSpan TimeSpanFromMilliseconds(uint64_t milliseconds)
{
    const TimeSpan span(milliseconds);

this would be much safer (in case anyone will ever get the idea of changing the base time unit):
return std::chrono::duration_cast<TimeSpan>(std::chrono::milliseconds(milliseconds));


---

*[libs/time/TimePoint.cpp, line 11 at r1](https://reviewable.io:443/reviews/pw-sat2/pwsat2obc/66#-K_zeY-Vdl5odBHM7Vsg:-K_zeY-Vdl5odBHM7Vsh:b-z379ok) ([raw file](https://github.com/pw-sat2/pwsat2obc/blob/3bec947364e5c8e1c1bf5a8eb9f7aa8039a54874/libs/time/TimePoint.cpp#L11)):*
> ```cpp
> TimeSpan TimeSpanFromSeconds(uint32_t seconds)
> {
>     return TimeSpanFromMilliseconds(seconds * 1000ull);
> ```

consider this:
```return std::chrono::duration_cast<TimeSpan>(std::chrono::seconds(seconds));```


libs/time/TimePoint.cpp, line 16 at r1 (raw file):

TimeSpan TimeSpanFromMinutes(uint32_t minutes)
{
    return TimeSpanFromMilliseconds(minutes * 60000ull);

consider this:
return std::chrono::duration_cast<TimeSpan>(std::chrono::minutes(minutes));


---

*[libs/time/TimePoint.cpp, line 21 at r1](https://reviewable.io:443/reviews/pw-sat2/pwsat2obc/66#-K_zf-fRLmFjagjXwC_O:-K_zf-fRLmFjagjXwC_P:b-ap94wi) ([raw file](https://github.com/pw-sat2/pwsat2obc/blob/3bec947364e5c8e1c1bf5a8eb9f7aa8039a54874/libs/time/TimePoint.cpp#L21)):*
> ```cpp
> TimeSpan TimeSpanFromHours(uint32_t hours)
> {
>     return TimeSpanFromMilliseconds(hours * 3600000ull);
> ```

consider this:
```return std::chrono::duration_cast<TimeSpan>(std::chrono::hours(hours));```


libs/time/TimePoint.cpp, line 26 at r1 (raw file):

TimeSpan TimeSpanFromDays(uint32_t days)
{
    return TimeSpanFromMilliseconds(days * 24ull * 3600000ull);

consider this:
return std::chrono::duration_cast<TimeSpan>(std::chrono::hours(days * 24));


---

*[libs/time/TimePoint.cpp, line 31 at r1](https://reviewable.io:443/reviews/pw-sat2/pwsat2obc/66#-K_zbjgAjUPjRmFaIstm:-K_zbjgAjUPjRmFaIstn:b-snl7sk) ([raw file](https://github.com/pw-sat2/pwsat2obc/blob/3bec947364e5c8e1c1bf5a8eb9f7aa8039a54874/libs/time/TimePoint.cpp#L31)):*
> ```cpp
> uint32_t TimeSpanToSeconds(TimeSpan span)
> {
>     return span.count() / 1000;
> ```

for time unit conversion use std::chrono::duration_cast.

---

*[libs/time/TimePoint.cpp, line 53 at r1](https://reviewable.io:443/reviews/pw-sat2/pwsat2obc/66#-K_zbwBANuNUP4nF_E6g:-K_zbwBANuNUP4nF_E6h:b558eh3) ([raw file](https://github.com/pw-sat2/pwsat2obc/blob/3bec947364e5c8e1c1bf5a8eb9f7aa8039a54874/libs/time/TimePoint.cpp#L53)):*
> ```cpp
> {
>     TimePoint point = {};
>     uint64_t span = timeSpan.count();
> ```

this code assumes that time spans are in ms. Now we can lift this assumption with std::chrono::duration_cast

---

*[libs/time/include/time/TimePoint.h, line 41 at r1](https://reviewable.io:443/reviews/pw-sat2/pwsat2obc/66#-K_zcPrdSGYKYb912KUE:-K_zcPrdSGYKYb912KUF:b-vzq8sj) ([raw file](https://github.com/pw-sat2/pwsat2obc/blob/3bec947364e5c8e1c1bf5a8eb9f7aa8039a54874/libs/time/include/time/TimePoint.h#L41)):*
> ```objc
>  * beginning of the mission itself.
>  */
> typedef std::chrono::duration<uint64_t, std::milli> TimeSpan;
> ```

There is already standard type for durations in ms: std::chrono::milliseconds. Is there any reason for not using that type?

---

*[src/commands/time.cpp, line 18 at r1](https://reviewable.io:443/reviews/pw-sat2/pwsat2obc/66#-K_zdyaseSOrnEv2QpP-:-K_zdyaseSOrnEv2QpP0:br6ih9o) ([raw file](https://github.com/pw-sat2/pwsat2obc/blob/3bec947364e5c8e1c1bf5a8eb9f7aa8039a54874/src/commands/time.cpp#L18)):*
> ```cpp
>     char* tail;
>     const TimeSpan targetTime = TimeSpanFromSeconds(strtoul(argv[0], &tail, 10));
>     LOGF(LOG_LEVEL_INFO, ""Jumping to time %lu\n"", static_cast<std::uint32_t>(targetTime.count() / 1000));
> ```

use std::chrono::duration_cast.

---

*[src/commands/time.cpp, line 32 at r1](https://reviewable.io:443/reviews/pw-sat2/pwsat2obc/66#-K_ze-zEovMtbcKWkGp5:-K_ze-zEovMtbcKWkGp6:b-41d6kq) ([raw file](https://github.com/pw-sat2/pwsat2obc/blob/3bec947364e5c8e1c1bf5a8eb9f7aa8039a54874/src/commands/time.cpp#L32)):*
> ```cpp
>     char* tail;
>     const TimeSpan targetTime = TimeSpanFromMilliseconds(strtoul(argv[0], &tail, 10));
>     LOGF(LOG_LEVEL_INFO, ""Advancing time by '%lu' seconds\n"", static_cast<std::uint32_t>(targetTime.count() / 1000));
> ```

 use std::chrono::duration_cast.

---

*[src/commands/time.cpp, line 41 at r1](https://reviewable.io:443/reviews/pw-sat2/pwsat2obc/66#-K_ze0vqRb-YmFXAEjZO:-K_ze0vqRb-YmFXAEjZP:b-41d6kq) ([raw file](https://github.com/pw-sat2/pwsat2obc/blob/3bec947364e5c8e1c1bf5a8eb9f7aa8039a54874/src/commands/time.cpp#L41)):*
> ```cpp
>     UNREFERENCED_PARAMETER(argv);
>     TimeSpan span = Main.timeProvider.GetCurrentTime().Value;
>     Main.terminal.Printf(""%lu"", static_cast<std::uint32_t>(span.count() / 1000));
> ```

 use std::chrono::duration_cast.

---


*Comments from [Reviewable](https://reviewable.io:443/reviews/pw-sat2/pwsat2obc/66)*
<!-- Sent from Reviewable.io -->",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,66,2017-01-08T16:14:22Z,2017-01-14T14:34:53Z,2017-01-14T14:34:54Z,MERGED,True,393,503,52,https://github.com/mandrek44,Replaced `TimeSpan with `std::chrono::duration`,8,[],https://github.com/PW-Sat2/PWSat2OBC/pull/66,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/66#issuecomment-271176611,"I replaced implementation of TimeSpan with std::chrono::duration<uint64_t>.
Some methods were removed because they duplicated std::chrono::duration built-in functionality.
I left TimePoint becasue it seems tailored for this system needs.


This change is",STD::Chrono [C++],True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,66,2017-01-08T16:14:22Z,2017-01-14T14:34:53Z,2017-01-14T14:34:54Z,MERGED,True,393,503,52,https://github.com/mandrek44,Replaced `TimeSpan with `std::chrono::duration`,8,[],https://github.com/PW-Sat2/PWSat2OBC/pull/66,https://github.com/mandrek44,5,https://github.com/PW-Sat2/PWSat2OBC/pull/66#issuecomment-271381821,"I replaced implementation of TimeSpan with std::chrono::duration<uint64_t>.
Some methods were removed because they duplicated std::chrono::duration built-in functionality.
I left TimePoint becasue it seems tailored for this system needs.


This change is","Review status: all files reviewed at latest revision, 12 unresolved discussions, some commit checks failed.

libs/time/include/time/TimePoint.h, line 41 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
There is already standard type for durations in ms: std::chrono::milliseconds. Is there any reason for not using that type?

std::chrono::milliseconds uses int64_t, we were using uint64_t - I didn't want to change the underlying type, but If you think it's ok to use int64_t then I'll change it

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,66,2017-01-08T16:14:22Z,2017-01-14T14:34:53Z,2017-01-14T14:34:54Z,MERGED,True,393,503,52,https://github.com/mandrek44,Replaced `TimeSpan with `std::chrono::duration`,8,[],https://github.com/PW-Sat2/PWSat2OBC/pull/66,https://github.com/zaq32,6,https://github.com/PW-Sat2/PWSat2OBC/pull/66#issuecomment-271670058,"I replaced implementation of TimeSpan with std::chrono::duration<uint64_t>.
Some methods were removed because they duplicated std::chrono::duration built-in functionality.
I left TimePoint becasue it seems tailored for this system needs.


This change is","Review status: all files reviewed at latest revision, 12 unresolved discussions, some commit checks failed.

libs/time/include/time/TimePoint.h, line 41 at r1 (raw file):
Previously, mandrek44 (Mandro) wrote
std::chrono::milliseconds uses int64_t, we were using uint64_t - I didn't want to change the underlying type, but If you think it's ok to use int64_t then I'll change it

This will not be a problem for us.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,66,2017-01-08T16:14:22Z,2017-01-14T14:34:53Z,2017-01-14T14:34:54Z,MERGED,True,393,503,52,https://github.com/mandrek44,Replaced `TimeSpan with `std::chrono::duration`,8,[],https://github.com/PW-Sat2/PWSat2OBC/pull/66,https://github.com/mandrek44,7,https://github.com/PW-Sat2/PWSat2OBC/pull/66#issuecomment-272229774,"I replaced implementation of TimeSpan with std::chrono::duration<uint64_t>.
Some methods were removed because they duplicated std::chrono::duration built-in functionality.
I left TimePoint becasue it seems tailored for this system needs.


This change is","Review status: 2 of 52 files reviewed at latest revision, 12 unresolved discussions.

a discussion (no related file):
Previously, Novakov (Maciej T. Nowak) wrote
There are also few functions accepting time in base/os.h. It would be nice to have them changed to std::chrono as well.

I removed the OSTaskTimeSpan and replaced with std::chrono::duration

libs/time/TimePoint.cpp, line 5 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
this would be much safer (in case anyone will ever get the idea of changing the base time unit):
return std::chrono::duration_cast<TimeSpan>(std::chrono::milliseconds(milliseconds));

I removed TimeSpan completely and replaced it directly with std::chrono::duration - methods like this are not needed any more

libs/time/TimePoint.cpp, line 11 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
consider this:
return std::chrono::duration_cast<TimeSpan>(std::chrono::seconds(seconds));

I removed TimeSpan completely

libs/time/TimePoint.cpp, line 16 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
consider this:
return std::chrono::duration_cast<TimeSpan>(std::chrono::minutes(minutes));

I removed TimeSpan completely

libs/time/TimePoint.cpp, line 21 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
consider this:
return std::chrono::duration_cast<TimeSpan>(std::chrono::hours(hours));

I removed TimeSpan completely

libs/time/TimePoint.cpp, line 26 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
consider this:
return std::chrono::duration_cast<TimeSpan>(std::chrono::hours(days * 24));

I removed TimeSpan completely

libs/time/TimePoint.cpp, line 31 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
for time unit conversion use std::chrono::duration_cast.

I removed TimeSpan completely

libs/time/TimePoint.cpp, line 53 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
this code assumes that time spans are in ms. Now we can lift this assumption with std::chrono::duration_cast

I removed TimeSpan completely

libs/time/include/time/TimePoint.h, line 41 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
This will not be a problem for us.

ok

src/commands/time.cpp, line 18 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
use std::chrono::duration_cast.

ok

src/commands/time.cpp, line 32 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
use std::chrono::duration_cast.

ok

src/commands/time.cpp, line 41 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
use std::chrono::duration_cast.

ok

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,66,2017-01-08T16:14:22Z,2017-01-14T14:34:53Z,2017-01-14T14:34:54Z,MERGED,True,393,503,52,https://github.com/mandrek44,Replaced `TimeSpan with `std::chrono::duration`,8,[],https://github.com/PW-Sat2/PWSat2OBC/pull/66,https://github.com/Novakov,8,https://github.com/PW-Sat2/PWSat2OBC/pull/66#issuecomment-272247142,"I replaced implementation of TimeSpan with std::chrono::duration<uint64_t>.
Some methods were removed because they duplicated std::chrono::duration built-in functionality.
I left TimePoint becasue it seems tailored for this system needs.


This change is","Reviewed 50 of 50 files at r3.
Review status: all files reviewed at latest revision, 26 unresolved discussions.

libs/adcs/adcs.cpp, line 39 at r3 (raw file):

        LOGF(LOG_LEVEL_TRACE, ""[ADCS]Running ADCS loop. Mode: %d"", context->CurrentMode);
        System::SleepTask(std::chrono::seconds(5));

I prefer using literals (http://en.cppreference.com/w/cpp/chrono/operator%22%22s)

libs/drivers/i2c/efm.cpp, line 19 at r3 (raw file):

I2CResult I2CLowLevelBus::ExecuteTransfer(I2C_TransferSeq_TypeDef* seq)
{
    Lock lock(this->_lock, std::chrono::milliseconds(MAX_DELAY));

MAX_DELAY is a bit specific one as it defines inifinite timeout. It maybe better to define constexpr InfiniteTimeout and use it here

libs/drivers/n25q/Include/n25q/n25q.h, line 210 at r3 (raw file):

            /** Erase chip operation timeout */
            static constexpr std::chrono::milliseconds EraseChipTimeOut =
                std::chrono::milliseconds(static_cast<uint64_t>(1.2 * (250 * 1000)));

This expressions can be simplified as some of them are converting seconds to milliseconds by multiplying by 1000

libs/free_rtos_wrapper/os.cpp, line 21 at r3 (raw file):

    {
        return portMAX_DELAY;
    }

see remark about InfiniteTimeout

libs/free_rtos_wrapper/os.cpp, line 203 at r3 (raw file):

std::chrono::milliseconds System::GetUptime()
{
    return std::chrono::milliseconds(static_cast<uint64_t>(portTICK_PERIOD_MS * xTaskGetTickCount()));

I think it's possible to define duration type for single RTOS tick and use duration casting to convert into into milliseconds

libs/mission/Include/mission/main.hpp, line 312 at r3 (raw file):

        {
            System::EventGroupSetBits(this->eventGroup, PauseRequestFlag);
            System::EventGroupWaitForBits(this->eventGroup, PauseAckFlag, false, true, std::chrono::milliseconds(MAX_DELAY));

See remark about InfiniteTimeout

libs/time/timer.cpp, line 72 at r3 (raw file):

void TimeProvider::AdvanceTime(milliseconds delta)
{
    if (OS_RESULT_FAILED(System::TakeSemaphore(timerLock, milliseconds(MAX_DELAY))))

See remark about InfiniteTimeout

libs/time/timer.cpp, line 91 at r3 (raw file):

{
    const milliseconds span = TimePointToTimeSpan(pointInTime);
    if (OS_RESULT_FAILED(System::TakeSemaphore(timerLock, milliseconds(MAX_DELAY))))

See remark about InfiniteTimeout

libs/time/timer.cpp, line 109 at r3 (raw file):

Option<milliseconds> TimeProvider::GetCurrentTime()
{
    if (OS_RESULT_FAILED(System::TakeSemaphore(timerLock, milliseconds(MAX_DELAY))))

See remark about InfiniteTimeout

libs/time/timer.cpp, line 134 at r3 (raw file):

void TimeProvider::ProcessChange(TimerState state)
{
    if (OS_RESULT_FAILED(System::TakeSemaphore(notificationLock, milliseconds(MAX_DELAY))))

See remark about InfiniteTimeout

libs/time/timer.cpp, line 269 at r3 (raw file):

    }

    uint8_t buffer[sizeof(milliseconds)];

That's a bit risky. You are using size of duration object not it's underlying type. Use milliseconds::rep

libs/time/timer.cpp, line 329 at r3 (raw file):

        }

        if (OS_RESULT_FAILED(System::PulseWait(TickNotification, milliseconds(MAX_DELAY))))

See remark about InfiniteTimeout

libs/time/include/time/TimePoint.h, line 60 at r3 (raw file):

 * @return Decoded time point object.
 */
TimePoint TimePointFromTimeSpan(std::chrono::milliseconds span);

It will be better to name it TimePointFromDuration

libs/yaffs_glue/yaffs_os_glue.cpp, line 22 at r3 (raw file):

void yaffsfs_Lock(void)
{
    System::TakeSemaphore(yaffsLock, std::chrono::milliseconds(MAX_DELAY));

See remark about InfiniteTimeout

unit_tests/MissionPlan/MissionTestHelpers.h, line 30 at r3 (raw file):

                milisecond);
        }
    };

Didn't tested that but rapidcheck seems to support std::chrono::duration of out box

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,66,2017-01-08T16:14:22Z,2017-01-14T14:34:53Z,2017-01-14T14:34:54Z,MERGED,True,393,503,52,https://github.com/mandrek44,Replaced `TimeSpan with `std::chrono::duration`,8,[],https://github.com/PW-Sat2/PWSat2OBC/pull/66,https://github.com/mandrek44,9,https://github.com/PW-Sat2/PWSat2OBC/pull/66#issuecomment-272565298,"I replaced implementation of TimeSpan with std::chrono::duration<uint64_t>.
Some methods were removed because they duplicated std::chrono::duration built-in functionality.
I left TimePoint becasue it seems tailored for this system needs.


This change is","Review status: 17 of 52 files reviewed at latest revision, 13 unresolved discussions.

libs/drivers/i2c/efm.cpp, line 19 at r3 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
MAX_DELAY is a bit specific one as it defines inifinite timeout. It maybe better to define constexpr InfiniteTimeout and use it here

Done.

libs/drivers/n25q/Include/n25q/n25q.h, line 210 at r3 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
This expressions can be simplified as some of them are converting seconds to milliseconds by multiplying by 1000

I left the 1.2 * (0.8 * 1000) but changed the others

libs/free_rtos_wrapper/os.cpp, line 21 at r3 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
see remark about InfiniteTimeout

Done.

libs/mission/Include/mission/main.hpp, line 312 at r3 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
See remark about InfiniteTimeout

Done.

libs/time/timer.cpp, line 72 at r3 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
See remark about InfiniteTimeout

Done.

libs/time/timer.cpp, line 91 at r3 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
See remark about InfiniteTimeout

Done.

libs/time/timer.cpp, line 109 at r3 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
See remark about InfiniteTimeout

Done.

libs/time/timer.cpp, line 134 at r3 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
See remark about InfiniteTimeout

Done.

libs/time/timer.cpp, line 269 at r3 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
That's a bit risky. You are using size of duration object not it's underlying type. Use milliseconds::rep

Done.

libs/time/timer.cpp, line 329 at r3 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
See remark about InfiniteTimeout

Done.

libs/time/include/time/TimePoint.h, line 60 at r3 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
It will be better to name it TimePointFromDuration

Done.

libs/yaffs_glue/yaffs_os_glue.cpp, line 22 at r3 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
See remark about InfiniteTimeout

Done.

unit_tests/MissionPlan/MissionTestHelpers.h, line 30 at r3 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Didn't tested that but rapidcheck seems to support std::chrono::duration of out box

It seems so, at least according to docs: https://github.com/emil-e/rapidcheck/blob/master/doc/generators.md
Do we want to use it in some specific test?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,66,2017-01-08T16:14:22Z,2017-01-14T14:34:53Z,2017-01-14T14:34:54Z,MERGED,True,393,503,52,https://github.com/mandrek44,Replaced `TimeSpan with `std::chrono::duration`,8,[],https://github.com/PW-Sat2/PWSat2OBC/pull/66,https://github.com/Novakov,10,https://github.com/PW-Sat2/PWSat2OBC/pull/66#issuecomment-272568802,"I replaced implementation of TimeSpan with std::chrono::duration<uint64_t>.
Some methods were removed because they duplicated std::chrono::duration built-in functionality.
I left TimePoint becasue it seems tailored for this system needs.


This change is","Reviewed 35 of 36 files at r4.
Review status: all files reviewed at latest revision, 2 unresolved discussions.

libs/drivers/n25q/Include/n25q/n25q.h, line 210 at r3 (raw file):
Previously, mandrek44 (Mandro) wrote
I left the 1.2 * (0.8 * 1000) but changed the others

Why? It's simple 800ms + 20%

unit_tests/MissionPlan/MissionTestHelpers.h, line 30 at r3 (raw file):
Previously, mandrek44 (Mandro) wrote
It seems so, at least according to docs: https://github.com/emil-e/rapidcheck/blob/master/doc/generators.md
Do we want to use it in some specific test?

System state related tests are using time value - that's why arbitrary was added. Let's try removing it and running all tests

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,66,2017-01-08T16:14:22Z,2017-01-14T14:34:53Z,2017-01-14T14:34:54Z,MERGED,True,393,503,52,https://github.com/mandrek44,Replaced `TimeSpan with `std::chrono::duration`,8,[],https://github.com/PW-Sat2/PWSat2OBC/pull/66,https://github.com/mandrek44,11,https://github.com/PW-Sat2/PWSat2OBC/pull/66#issuecomment-272625981,"I replaced implementation of TimeSpan with std::chrono::duration<uint64_t>.
Some methods were removed because they duplicated std::chrono::duration built-in functionality.
I left TimePoint becasue it seems tailored for this system needs.


This change is","Review status: 50 of 52 files reviewed at latest revision, 2 unresolved discussions.

libs/drivers/n25q/Include/n25q/n25q.h, line 210 at r3 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Why? It's simple 800ms + 20%

True

unit_tests/MissionPlan/MissionTestHelpers.h, line 30 at r3 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
System state related tests are using time value - that's why arbitrary was added. Let's try removing it and running all tests

I removed the generator - all seems to work ok

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,66,2017-01-08T16:14:22Z,2017-01-14T14:34:53Z,2017-01-14T14:34:54Z,MERGED,True,393,503,52,https://github.com/mandrek44,Replaced `TimeSpan with `std::chrono::duration`,8,[],https://github.com/PW-Sat2/PWSat2OBC/pull/66,https://github.com/Novakov,12,https://github.com/PW-Sat2/PWSat2OBC/pull/66#issuecomment-272627876,"I replaced implementation of TimeSpan with std::chrono::duration<uint64_t>.
Some methods were removed because they duplicated std::chrono::duration built-in functionality.
I left TimePoint becasue it seems tailored for this system needs.


This change is","Reviewed 2 of 2 files at r5.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,67,2017-01-08T20:22:31Z,2017-01-14T15:45:31Z,2017-01-14T15:45:33Z,MERGED,True,289,188,24,https://github.com/Novakov,Uplink frame format,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/67,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/67,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,67,2017-01-08T20:22:31Z,2017-01-14T15:45:31Z,2017-01-14T15:45:33Z,MERGED,True,289,188,24,https://github.com/Novakov,Uplink frame format,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/67,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/67#issuecomment-271176601,This change is,Implement uplink frame format,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,67,2017-01-08T20:22:31Z,2017-01-14T15:45:31Z,2017-01-14T15:45:33Z,MERGED,True,289,188,24,https://github.com/Novakov,Uplink frame format,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/67,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/67#issuecomment-271679967,This change is,"Reviewed 26 of 27 files at r1.
Review status: 23 of 24 files reviewed at latest revision, 2 unresolved discussions, some commit checks failed.

libs/base/Include/base/reader.h, line 126 at r1 (raw file):

     * @return Span for remaining part of buffer
     */
    gsl::span<const uint8_t> Remaining();

There is already equivalent of this: ReadArray method.

libs/telecommand_handling/uplink.cpp, line 23 at r1 (raw file):

if (frame.size() < 5)
{
return DecodeTelecommandResult::Failure(DecodeTelecommandFailureReason::MalformedFrame);
}
This can be done a posteriori by verifying the reader status and is much more failure resistant to the future changes.


Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,67,2017-01-08T20:22:31Z,2017-01-14T15:45:31Z,2017-01-14T15:45:33Z,MERGED,True,289,188,24,https://github.com/Novakov,Uplink frame format,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/67,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/67#issuecomment-271680002,This change is,"Reviewed 1 of 27 files at r1.
Review status: all files reviewed at latest revision, 2 unresolved discussions, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,67,2017-01-08T20:22:31Z,2017-01-14T15:45:31Z,2017-01-14T15:45:33Z,MERGED,True,289,188,24,https://github.com/Novakov,Uplink frame format,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/67,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/67#issuecomment-272212327,This change is,"Review status: 20 of 24 files reviewed at latest revision, 2 unresolved discussions.

libs/base/Include/base/reader.h, line 126 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
There is already equivalent of this: ReadArray method.

Sort-of equivalent - it needs size of data to read. What I need is reading everything up to the end of buffer so they are similar but not the same

libs/telecommand_handling/uplink.cpp, line 23 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote

if (frame.size() < 5)
{
return DecodeTelecommandResult::Failure(DecodeTelecommandFailureReason::MalformedFrame);
}
This can be done a posteriori by verifying the reader status and is much more failure resistant to the future changes.


Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,67,2017-01-08T20:22:31Z,2017-01-14T15:45:31Z,2017-01-14T15:45:33Z,MERGED,True,289,188,24,https://github.com/Novakov,Uplink frame format,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/67,https://github.com/zaq32,6,https://github.com/PW-Sat2/PWSat2OBC/pull/67#issuecomment-272274506,This change is,"Reviewed 4 of 4 files at r2.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

libs/base/Include/base/reader.h, line 126 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Sort-of equivalent - it needs size of data to read. What I need is reading everything up to the end of buffer so they are similar but not the same

And you can get the size by calling the RemainingSize() procedure. Why add (and maintain) function when it can be easily replicated by using already existing interface?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,67,2017-01-08T20:22:31Z,2017-01-14T15:45:31Z,2017-01-14T15:45:33Z,MERGED,True,289,188,24,https://github.com/Novakov,Uplink frame format,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/67,https://github.com/Novakov,7,https://github.com/PW-Sat2/PWSat2OBC/pull/67#issuecomment-272276535,This change is,"Review status: all files reviewed at latest revision, 1 unresolved discussion, some commit checks failed.

libs/base/Include/base/reader.h, line 126 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
And you can get the size by calling the RemainingSize() procedure. Why add (and maintain) function when it can be easily replicated by using already existing interface?

It's our code and I would like to have interface that serves our needs: Remaining() is a lot more readable than ReadArray(RemainingSize().
In case of such small functions I think that we just spent more time discussing it than we will ever spent on maintaining it.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,67,2017-01-08T20:22:31Z,2017-01-14T15:45:31Z,2017-01-14T15:45:33Z,MERGED,True,289,188,24,https://github.com/Novakov,Uplink frame format,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/67,https://github.com/zaq32,8,https://github.com/PW-Sat2/PWSat2OBC/pull/67#issuecomment-272630025,This change is,"Reviewed 5 of 6 files at r3.
Review status: 23 of 24 files reviewed at latest revision, 1 unresolved discussion.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,67,2017-01-08T20:22:31Z,2017-01-14T15:45:31Z,2017-01-14T15:45:33Z,MERGED,True,289,188,24,https://github.com/Novakov,Uplink frame format,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/67,https://github.com/zaq32,9,https://github.com/PW-Sat2/PWSat2OBC/pull/67#issuecomment-272630035,This change is,"Reviewed 1 of 6 files at r3.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,67,2017-01-08T20:22:31Z,2017-01-14T15:45:31Z,2017-01-14T15:45:33Z,MERGED,True,289,188,24,https://github.com/Novakov,Uplink frame format,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/67,https://github.com/Novakov,10,https://github.com/PW-Sat2/PWSat2OBC/pull/67#issuecomment-272631757,This change is,"Review status: 20 of 24 files reviewed at latest revision, 1 unresolved discussion.

libs/base/Include/base/reader.h, line 126 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
It's our code and I would like to have interface that serves our needs: Remaining() is a lot more readable than ReadArray(RemainingSize().
In case of such small functions I think that we just spent more time discussing it than we will ever spent on maintaining it.

Changed to ReadToArray

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,67,2017-01-08T20:22:31Z,2017-01-14T15:45:31Z,2017-01-14T15:45:33Z,MERGED,True,289,188,24,https://github.com/Novakov,Uplink frame format,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/67,https://github.com/zaq32,11,https://github.com/PW-Sat2/PWSat2OBC/pull/67#issuecomment-272632030,This change is,"Reviewed 4 of 4 files at r4.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,68,2017-01-14T16:23:48Z,2017-01-14T16:27:05Z,2017-01-14T16:27:06Z,MERGED,True,77,67,5,https://github.com/zaq32,Build update,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/68,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/68,"Updated the way that googletest & rapidcheck are included into the project.


This change is","Updated the way that googletest & rapidcheck are included into the project.


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,68,2017-01-14T16:23:48Z,2017-01-14T16:27:05Z,2017-01-14T16:27:06Z,MERGED,True,77,67,5,https://github.com/zaq32,Build update,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/68,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/68#issuecomment-272634676,"Updated the way that googletest & rapidcheck are included into the project.


This change is","Reviewed 5 of 5 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,69,2017-01-14T16:30:29Z,2017-01-23T08:49:25Z,2017-01-23T08:49:27Z,MERGED,True,1054,774,36,https://github.com/Novakov,Downlink frame format,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/69,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/69,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,69,2017-01-14T16:30:29Z,2017-01-23T08:49:25Z,2017-01-23T08:49:27Z,MERGED,True,1054,774,36,https://github.com/Novakov,Downlink frame format,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/69,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/69#issuecomment-272634926,This change is,Implement downlink frame format,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,69,2017-01-14T16:30:29Z,2017-01-23T08:49:25Z,2017-01-23T08:49:27Z,MERGED,True,1054,774,36,https://github.com/Novakov,Downlink frame format,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/69,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/69#issuecomment-274027889,This change is,"Reviewed 39 of 39 files at r1.
Review status: all files reviewed at latest revision, 3 unresolved discussions.

libs/base/Include/base/writer.h, line 115 at r1 (raw file):

     * @return Span covering used part of buffer
     */
    gsl::span<std::uint8_t> UsedSpan();

I'd prefer calling this function Capture()

libs/telecommunication/downlink.cpp, line 17 at r1 (raw file):

            uint32_t header = (num(apid) << 18) | (seq & 0x3FFFF);
            w.WriteLowerBytesBE(header, 3);

use HeaderSize instead of hard coded value

libs/telecommunication/include/telecommunication/downlink.h, line 77 at r1 (raw file):

        inline gsl::span<uint8_t> DownlinkFrame::Frame()
        {
            return gsl::make_span(this->_frame).subspan(0, HeaderSize + this->_payloadWriter.GetDataLength());

this seems wrong. Why add Header size to the size stored inside the frame writer? The value stored inside the writer already takes the header size into account (see constructor).
For that matter why not directly return this->_payloadWriter.UsedSpan()?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,69,2017-01-14T16:30:29Z,2017-01-23T08:49:25Z,2017-01-23T08:49:27Z,MERGED,True,1054,774,36,https://github.com/Novakov,Downlink frame format,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/69,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/69#issuecomment-274156510,This change is,"Review status: all files reviewed at latest revision, 3 unresolved discussions.

libs/telecommunication/include/telecommunication/downlink.h, line 77 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
this seems wrong. Why add Header size to the size stored inside the frame writer? The value stored inside the writer already takes the header size into account (see constructor).
For that matter why not directly return this->_payloadWriter.UsedSpan()?

Writer used in ctor to writer header is different writer, payload writer works only on payload part of frame, so the final frame size is header + payload size.
I was thinking about using the same writer for header and payload but in case that we add some method to writer that seeks it to the begining of span than it will overwrite header.  Also if any upper level code asks for current size of written data, it will be fooled by additional 3 bytes

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,69,2017-01-14T16:30:29Z,2017-01-23T08:49:25Z,2017-01-23T08:49:27Z,MERGED,True,1054,774,36,https://github.com/Novakov,Downlink frame format,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/69,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/69#issuecomment-274161394,This change is,"Review status: all files reviewed at latest revision, 3 unresolved discussions.

libs/telecommunication/include/telecommunication/downlink.h, line 77 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Writer used in ctor to writer header is different writer, payload writer works only on payload part of frame, so the final frame size is header + payload size.
I was thinking about using the same writer for header and payload but in case that we add some method to writer that seeks it to the begining of span than it will overwrite header.  Also if any upper level code asks for current size of written data, it will be fooled by additional 3 bytes

How could I miss the fact that it is different object?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,69,2017-01-14T16:30:29Z,2017-01-23T08:49:25Z,2017-01-23T08:49:27Z,MERGED,True,1054,774,36,https://github.com/Novakov,Downlink frame format,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/69,https://github.com/Novakov,6,https://github.com/PW-Sat2/PWSat2OBC/pull/69#issuecomment-274343802,This change is,"Review status: 26 of 35 files reviewed at latest revision, 2 unresolved discussions.

libs/base/Include/base/writer.h, line 115 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
I'd prefer calling this function Capture()

Done.

libs/telecommunication/downlink.cpp, line 17 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
use HeaderSize instead of hard coded value

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,69,2017-01-14T16:30:29Z,2017-01-23T08:49:25Z,2017-01-23T08:49:27Z,MERGED,True,1054,774,36,https://github.com/Novakov,Downlink frame format,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/69,https://github.com/zaq32,7,https://github.com/PW-Sat2/PWSat2OBC/pull/69#issuecomment-274430134,This change is,"Reviewed 9 of 9 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,70,2017-01-15T14:54:40Z,2017-01-15T14:56:19Z,2017-01-15T14:56:20Z,MERGED,True,1,1,1,https://github.com/Novakov,Fix converting RTOS ticks into duration,1,['critical'],https://github.com/PW-Sat2/PWSat2OBC/pull/70,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/70,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,70,2017-01-15T14:54:40Z,2017-01-15T14:56:19Z,2017-01-15T14:56:20Z,MERGED,True,1,1,1,https://github.com/Novakov,Fix converting RTOS ticks into duration,1,['critical'],https://github.com/PW-Sat2/PWSat2OBC/pull/70,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/70#issuecomment-272700257,This change is,"Reviewed 1 of 1 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,71,2017-01-15T15:13:01Z,2017-01-23T20:42:22Z,2017-01-23T20:42:23Z,MERGED,True,319,48,16,https://github.com/Novakov,Change FS terminal commands to allow operating on any file,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/71,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/71,"Currently writeFile and readFile commands are very limited. It is possible to write file command must fit into input buffer (100 bytes) with writeFile path content also it is not possible to write new line character as it will terminate command line reading. Simillary reading file that contains prompt (>) character will terminate reading file on Python side and lead to unusable terminal access.
This pull requests modifes writeFile and readFile commands to overcome this issues by:

Writing file in chunks
Reading exact number of bytes for terminal and not relaying on any special character



This change is","Currently writeFile and readFile commands are very limited. It is possible to write file command must fit into input buffer (100 bytes) with writeFile path content also it is not possible to write new line character as it will terminate command line reading. Simillary reading file that contains prompt (>) character will terminate reading file on Python side and lead to unusable terminal access.
This pull requests modifes writeFile and readFile commands to overcome this issues by:

Writing file in chunks
Reading exact number of bytes for terminal and not relaying on any special character



This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,71,2017-01-15T15:13:01Z,2017-01-23T20:42:22Z,2017-01-23T20:42:23Z,MERGED,True,319,48,16,https://github.com/Novakov,Change FS terminal commands to allow operating on any file,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/71,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/71#issuecomment-274034214,"Currently writeFile and readFile commands are very limited. It is possible to write file command must fit into input buffer (100 bytes) with writeFile path content also it is not possible to write new line character as it will terminate command line reading. Simillary reading file that contains prompt (>) character will terminate reading file on Python side and lead to unusable terminal access.
This pull requests modifes writeFile and readFile commands to overcome this issues by:

Writing file in chunks
Reading exact number of bytes for terminal and not relaying on any special character



This change is","Reviewed 14 of 14 files at r1.
Review status: all files reviewed at latest revision, 3 unresolved discussions.

src/commands/file_system.cpp, line 46 at r1 (raw file):

}

void FSWriteFile(uint16_t argc, char* argv[])

It would be nice if the command printed the number of bytes it actually has written to the requested file

src/commands/file_system.cpp, line 48 at r1 (raw file):

void FSWriteFile(uint16_t argc, char* argv[])
{
    UNREFERENCED_PARAMETER(argc);

verify that command has at least one argument

src/commands/file_system.cpp, line 79 at r1 (raw file):

void FSReadFile(uint16_t argc, char* argv[])
{
    UNREFERENCED_PARAMETER(argc);

verify that command has at least one argument

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,71,2017-01-15T15:13:01Z,2017-01-23T20:42:22Z,2017-01-23T20:42:23Z,MERGED,True,319,48,16,https://github.com/Novakov,Change FS terminal commands to allow operating on any file,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/71,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/71#issuecomment-274344980,"Currently writeFile and readFile commands are very limited. It is possible to write file command must fit into input buffer (100 bytes) with writeFile path content also it is not possible to write new line character as it will terminate command line reading. Simillary reading file that contains prompt (>) character will terminate reading file on Python side and lead to unusable terminal access.
This pull requests modifes writeFile and readFile commands to overcome this issues by:

Writing file in chunks
Reading exact number of bytes for terminal and not relaying on any special character



This change is","Review status: 11 of 16 files reviewed at latest revision, 3 unresolved discussions.

src/commands/file_system.cpp, line 46 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
It would be nice if the command printed the number of bytes it actually has written to the requested file

Done.

src/commands/file_system.cpp, line 48 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
verify that command has at least one argument

Done.

src/commands/file_system.cpp, line 79 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
verify that command has at least one argument

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,71,2017-01-15T15:13:01Z,2017-01-23T20:42:22Z,2017-01-23T20:42:23Z,MERGED,True,319,48,16,https://github.com/Novakov,Change FS terminal commands to allow operating on any file,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/71,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/71#issuecomment-274430380,"Currently writeFile and readFile commands are very limited. It is possible to write file command must fit into input buffer (100 bytes) with writeFile path content also it is not possible to write new line character as it will terminate command line reading. Simillary reading file that contains prompt (>) character will terminate reading file on Python side and lead to unusable terminal access.
This pull requests modifes writeFile and readFile commands to overcome this issues by:

Writing file in chunks
Reading exact number of bytes for terminal and not relaying on any special character



This change is","Reviewed 5 of 5 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,71,2017-01-15T15:13:01Z,2017-01-23T20:42:22Z,2017-01-23T20:42:23Z,MERGED,True,319,48,16,https://github.com/Novakov,Change FS terminal commands to allow operating on any file,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/71,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/71#issuecomment-274610559,"Currently writeFile and readFile commands are very limited. It is possible to write file command must fit into input buffer (100 bytes) with writeFile path content also it is not possible to write new line character as it will terminate command line reading. Simillary reading file that contains prompt (>) character will terminate reading file on Python side and lead to unusable terminal access.
This pull requests modifes writeFile and readFile commands to overcome this issues by:

Writing file in chunks
Reading exact number of bytes for terminal and not relaying on any special character



This change is","Reviewed 1 of 1 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,72,2017-01-17T19:36:07Z,2017-01-20T20:21:22Z,2017-01-20T20:21:24Z,MERGED,True,226,0,8,https://github.com/ggajoch,Reader & writer signed implementation,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/72,https://github.com/ggajoch,1,https://github.com/PW-Sat2/PWSat2OBC/pull/72,"Added implementation for reader & writer to handle 2's complement little endian 16- and 32-bit values.
Added RapidCheck tests for writer -> reader loop.


This change is","Added implementation for reader & writer to handle 2's complement little endian 16- and 32-bit values.
Added RapidCheck tests for writer -> reader loop.


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,72,2017-01-17T19:36:07Z,2017-01-20T20:21:22Z,2017-01-20T20:21:24Z,MERGED,True,226,0,8,https://github.com/ggajoch,Reader & writer signed implementation,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/72,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/72#issuecomment-274035578,"Added implementation for reader & writer to handle 2's complement little endian 16- and 32-bit values.
Added RapidCheck tests for writer -> reader loop.


This change is","Reviewed 6 of 7 files at r1.
Review status: 6 of 7 files reviewed at latest revision, 7 unresolved discussions.

libs/base/reader.cpp, line 64 at r1 (raw file):

int16_t Reader::ReadSignedWordLE()
{
    return (int16_t)(this->ReadWordLE());

use c++ style cast

libs/base/reader.cpp, line 103 at r1 (raw file):

int32_t Reader::ReadSignedDoubleWordLE()
{
    return (int32_t)(this->ReadDoubleWordLE());

use c++ style cast

libs/base/writer.cpp, line 57 at r1 (raw file):

bool WriterWriteSignedWordLE(Writer* writer, int16_t word)
{
    return WriterWriteWordLE(writer, (uint16_t)(word));

use c++ style cast

libs/base/writer.cpp, line 79 at r1 (raw file):

bool WriterWriteSignedDoubleWordLE(Writer* writer, int32_t dword)
{
    return WriterWriteDoubleWordLE(writer, (uint32_t)(dword));

use c++ style cast

libs/base/Include/base/reader.h, line 81 at r1 (raw file):

     * @brief Read single 16 bit word with little-endian memory orientation from the buffer,
     * convert it into signed value and advance the current buffer position to the next unread byte.
     * Value is read asuuming 2's complement notation.

assuming

libs/base/Include/base/reader.h, line 103 at r1 (raw file):

     * @brief Read single 32 bit word with little-endian memory orientation from the buffer,
     * convert it into signed value and advance the current buffer position to the next unread byte.
     * Value is read asuuming 2's complement notation.

assuming

unit_tests/base/RapidTest.cpp, line 65 at r1 (raw file):

{
	RC_PRE(value.size() > 0u);
	std::unique_ptr<uint8_t[]> array(new uint8_t[value.size()]);

why not simply use local std::vector?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,72,2017-01-17T19:36:07Z,2017-01-20T20:21:22Z,2017-01-20T20:21:24Z,MERGED,True,226,0,8,https://github.com/ggajoch,Reader & writer signed implementation,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/72,https://github.com/ggajoch,3,https://github.com/PW-Sat2/PWSat2OBC/pull/72#issuecomment-274049359,"Added implementation for reader & writer to handle 2's complement little endian 16- and 32-bit values.
Added RapidCheck tests for writer -> reader loop.


This change is","Review status: 3 of 7 files reviewed at latest revision, 7 unresolved discussions.

libs/base/reader.cpp, line 64 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
use c++ style cast

Fix'd

libs/base/reader.cpp, line 103 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
use c++ style cast

Fix'd

libs/base/writer.cpp, line 57 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
use c++ style cast

Fix'd

libs/base/writer.cpp, line 79 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
use c++ style cast

Fix'd

libs/base/Include/base/reader.h, line 81 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
assuming

Fix'd

libs/base/Include/base/reader.h, line 103 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
assuming

Fix'd

unit_tests/base/RapidTest.cpp, line 65 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
why not simply use local std::vector?

Fix'd

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,72,2017-01-17T19:36:07Z,2017-01-20T20:21:22Z,2017-01-20T20:21:24Z,MERGED,True,226,0,8,https://github.com/ggajoch,Reader & writer signed implementation,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/72,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/72#issuecomment-274049642,"Added implementation for reader & writer to handle 2's complement little endian 16- and 32-bit values.
Added RapidCheck tests for writer -> reader loop.


This change is","Reviewed 3 of 3 files at r2.
Review status: 6 of 7 files reviewed at latest revision, 1 unresolved discussion.

unit_tests/base/RapidTest.cpp, line 65 at r1 (raw file):
Previously, ggajoch (Grzegorz Gajoch) wrote
Fix'd

is it?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,72,2017-01-17T19:36:07Z,2017-01-20T20:21:22Z,2017-01-20T20:21:24Z,MERGED,True,226,0,8,https://github.com/ggajoch,Reader & writer signed implementation,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/72,https://github.com/ggajoch,5,https://github.com/PW-Sat2/PWSat2OBC/pull/72#issuecomment-274050446,"Added implementation for reader & writer to handle 2's complement little endian 16- and 32-bit values.
Added RapidCheck tests for writer -> reader loop.


This change is","Review status: 6 of 7 files reviewed at latest revision, 1 unresolved discussion.

unit_tests/base/RapidTest.cpp, line 65 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
is it?

Oops, did not staged this change.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,72,2017-01-17T19:36:07Z,2017-01-20T20:21:22Z,2017-01-20T20:21:24Z,MERGED,True,226,0,8,https://github.com/ggajoch,Reader & writer signed implementation,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/72,https://github.com/zaq32,6,https://github.com/PW-Sat2/PWSat2OBC/pull/72#issuecomment-274056424,"Added implementation for reader & writer to handle 2's complement little endian 16- and 32-bit values.
Added RapidCheck tests for writer -> reader loop.


This change is","Review status: 6 of 7 files reviewed at latest revision, 1 unresolved discussion.

unit_tests/base/RapidTest.cpp, line 1 at r3 (raw file):

#include ""gtest/gtest.h""

This file is not included in the test project.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,72,2017-01-17T19:36:07Z,2017-01-20T20:21:22Z,2017-01-20T20:21:24Z,MERGED,True,226,0,8,https://github.com/ggajoch,Reader & writer signed implementation,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/72,https://github.com/ggajoch,7,https://github.com/PW-Sat2/PWSat2OBC/pull/72#issuecomment-274059784,"Added implementation for reader & writer to handle 2's complement little endian 16- and 32-bit values.
Added RapidCheck tests for writer -> reader loop.


This change is","Review status: 6 of 8 files reviewed at latest revision, 1 unresolved discussion.

unit_tests/base/RapidTest.cpp, line 1 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
This file is not included in the test project.

It should be now.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,72,2017-01-17T19:36:07Z,2017-01-20T20:21:22Z,2017-01-20T20:21:24Z,MERGED,True,226,0,8,https://github.com/ggajoch,Reader & writer signed implementation,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/72,https://github.com/zaq32,8,https://github.com/PW-Sat2/PWSat2OBC/pull/72#issuecomment-274063813,"Added implementation for reader & writer to handle 2's complement little endian 16- and 32-bit values.
Added RapidCheck tests for writer -> reader loop.


This change is","Reviewed 1 of 2 files at r4.
Review status: 7 of 8 files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,72,2017-01-17T19:36:07Z,2017-01-20T20:21:22Z,2017-01-20T20:21:24Z,MERGED,True,226,0,8,https://github.com/ggajoch,Reader & writer signed implementation,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/72,https://github.com/Novakov,9,https://github.com/PW-Sat2/PWSat2OBC/pull/72#issuecomment-274155528,"Added implementation for reader & writer to handle 2's complement little endian 16- and 32-bit values.
Added RapidCheck tests for writer -> reader loop.


This change is","Review status: 7 of 8 files reviewed at latest revision, 1 unresolved discussion.

unit_tests/base/RapidTest.cpp, line 57 at r5 (raw file):

}

RC_GTEST_PROP(WriteReadRapicheck, Array, (std::vector<uint8_t> value))

There's no need to put Rapidcheck in the name of each test ;) It's like putting GoogleTest in each test or Class in the name of every class

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,72,2017-01-17T19:36:07Z,2017-01-20T20:21:22Z,2017-01-20T20:21:24Z,MERGED,True,226,0,8,https://github.com/ggajoch,Reader & writer signed implementation,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/72,https://github.com/ggajoch,10,https://github.com/PW-Sat2/PWSat2OBC/pull/72#issuecomment-274162709,"Added implementation for reader & writer to handle 2's complement little endian 16- and 32-bit values.
Added RapidCheck tests for writer -> reader loop.


This change is","Review status: 7 of 8 files reviewed at latest revision, 1 unresolved discussion.

unit_tests/base/RapidTest.cpp, line 57 at r5 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
There's no need to put Rapidcheck in the name of each test ;) It's like putting GoogleTest in each test or Class in the name of every class

Should be better now 

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,72,2017-01-17T19:36:07Z,2017-01-20T20:21:22Z,2017-01-20T20:21:24Z,MERGED,True,226,0,8,https://github.com/ggajoch,Reader & writer signed implementation,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/72,https://github.com/Novakov,11,https://github.com/PW-Sat2/PWSat2OBC/pull/72#issuecomment-274170338,"Added implementation for reader & writer to handle 2's complement little endian 16- and 32-bit values.
Added RapidCheck tests for writer -> reader loop.


This change is","Reviewed 1 of 1 files at r6.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,73,2017-01-20T09:30:19Z,2017-01-24T07:35:04Z,2017-01-24T07:35:05Z,MERGED,True,520,27,14,https://github.com/zaq32,Test commands,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/73,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/73,"Terminal commands for testing comm & antenna hardware/drivers.

New commands:

antenna_get_telemetry
antenna_reset [primary|backup]
comm_get_telemetry [transmitter|receiver]
comm_set_bitrate [1200|2400|4800|9600]


Some integration tests for new commands
Extended integration tests documentation



This change is","Terminal commands for testing comm & antenna hardware/drivers.

New commands:

antenna_get_telemetry
antenna_reset [primary|backup]
comm_get_telemetry [transmitter|receiver]
comm_set_bitrate [1200|2400|4800|9600]


Some integration tests for new commands
Extended integration tests documentation



This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,73,2017-01-20T09:30:19Z,2017-01-24T07:35:04Z,2017-01-24T07:35:05Z,MERGED,True,520,27,14,https://github.com/zaq32,Test commands,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/73,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/73#issuecomment-274158057,"Terminal commands for testing comm & antenna hardware/drivers.

New commands:

antenna_get_telemetry
antenna_reset [primary|backup]
comm_get_telemetry [transmitter|receiver]
comm_set_bitrate [1200|2400|4800|9600]


Some integration tests for new commands
Extended integration tests documentation



This change is","Reviewed 12 of 14 files at r1.
Review status: 12 of 14 files reviewed at latest revision, 2 unresolved discussions.

integration_tests/devices/antenna.py, line 109 at r1 (raw file):

    def reset(self):
        self.log.debug(""Resetting antenna controller"")
        if(call(self.on_reset, True)):

No need for parentheses around condition

src/commands/commands.h, line 34 at r1 (raw file):

void AntennaGetDeploymentStatus(std::uint16_t argc, char* argv[]);
void AntennaGetTelemetry(uint16_t argc, char* argv[]);
void AntennaReset(uint16_t argc, char* argv[]);

std::uint16_t

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,73,2017-01-20T09:30:19Z,2017-01-24T07:35:04Z,2017-01-24T07:35:05Z,MERGED,True,520,27,14,https://github.com/zaq32,Test commands,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/73,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/73#issuecomment-274160715,"Terminal commands for testing comm & antenna hardware/drivers.

New commands:

antenna_get_telemetry
antenna_reset [primary|backup]
comm_get_telemetry [transmitter|receiver]
comm_set_bitrate [1200|2400|4800|9600]


Some integration tests for new commands
Extended integration tests documentation



This change is","Review status: 10 of 14 files reviewed at latest revision, 2 unresolved discussions.

integration_tests/devices/antenna.py, line 109 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
No need for parentheses around condition

eh. c++ habbits....

src/commands/commands.h, line 34 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
std::uint16_t

Fixed

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,73,2017-01-20T09:30:19Z,2017-01-24T07:35:04Z,2017-01-24T07:35:05Z,MERGED,True,520,27,14,https://github.com/zaq32,Test commands,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/73,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/73#issuecomment-274609666,"Terminal commands for testing comm & antenna hardware/drivers.

New commands:

antenna_get_telemetry
antenna_reset [primary|backup]
comm_get_telemetry [transmitter|receiver]
comm_set_bitrate [1200|2400|4800|9600]


Some integration tests for new commands
Extended integration tests documentation



This change is","Reviewed 1 of 14 files at r1, 3 of 3 files at r2.
Review status: all files reviewed at latest revision, 2 unresolved discussions, some commit checks failed.

src/commands/antenna.cpp, line 188 at r2 (raw file):

    else
    {
        Main.terminal.Printf(""Unable to reset antenna. Status: '%d'"", result);

num(result)

src/commands/comm.cpp, line 145 at r2 (raw file):

            static_cast<int>(telemetry.AmplifierTemperature),
            static_cast<int>(telemetry.RFForwardPower),
            static_cast<int>(telemetry.TransmitterCurrentConsumption));

I prefer using int<size>_t types

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,73,2017-01-20T09:30:19Z,2017-01-24T07:35:04Z,2017-01-24T07:35:05Z,MERGED,True,520,27,14,https://github.com/zaq32,Test commands,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/73,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/73#issuecomment-274730194,"Terminal commands for testing comm & antenna hardware/drivers.

New commands:

antenna_get_telemetry
antenna_reset [primary|backup]
comm_get_telemetry [transmitter|receiver]
comm_set_bitrate [1200|2400|4800|9600]


Some integration tests for new commands
Extended integration tests documentation



This change is","Reviewed 6 of 6 files at r3.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

src/commands/antenna.cpp, line 188 at r2 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
num(result)

OK

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,74,2017-01-20T13:20:30Z,2017-01-20T13:21:43Z,2017-01-20T13:21:45Z,MERGED,True,2,2,4,https://github.com/ggajoch,Linux compile,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/74,https://github.com/ggajoch,1,https://github.com/PW-Sat2/PWSat2OBC/pull/74,"Letter case fixes to make linux compilation working.
Fixed:

I2CMock.hpp includes
renamed one directory to ""Include""



This change is","Letter case fixes to make linux compilation working.
Fixed:

I2CMock.hpp includes
renamed one directory to ""Include""



This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,74,2017-01-20T13:20:30Z,2017-01-20T13:21:43Z,2017-01-20T13:21:45Z,MERGED,True,2,2,4,https://github.com/ggajoch,Linux compile,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/74,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/74#issuecomment-274070632,"Letter case fixes to make linux compilation working.
Fixed:

I2CMock.hpp includes
renamed one directory to ""Include""



This change is","Reviewed 6 of 6 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,75,2017-01-21T16:47:00Z,2017-01-22T15:55:54Z,2017-01-22T15:55:55Z,MERGED,True,14,1,1,https://github.com/ggajoch,added pyconsole example,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/75,https://github.com/ggajoch,1,https://github.com/PW-Sat2/PWSat2OBC/pull/75,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,75,2017-01-21T16:47:00Z,2017-01-22T15:55:54Z,2017-01-22T15:55:55Z,MERGED,True,14,1,1,https://github.com/ggajoch,added pyconsole example,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/75,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/75#issuecomment-274338908,This change is,"Reviewed 1 of 1 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,76,2017-01-25T02:02:47Z,2017-01-25T08:26:10Z,2017-01-25T08:26:12Z,MERGED,True,6,7,1,https://github.com/ggajoch,Update HowToBuild.md,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/76,https://github.com/ggajoch,1,https://github.com/PW-Sat2/PWSat2OBC/pull/76,"updated toolchain version,
removed obsolete linux instruction,
rename catalog to avoid confusion during building



This change is","updated toolchain version,
removed obsolete linux instruction,
rename catalog to avoid confusion during building



This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,76,2017-01-25T02:02:47Z,2017-01-25T08:26:10Z,2017-01-25T08:26:12Z,MERGED,True,6,7,1,https://github.com/ggajoch,Update HowToBuild.md,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/76,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/76#issuecomment-275047100,"updated toolchain version,
removed obsolete linux instruction,
rename catalog to avoid confusion during building



This change is","Reviewed 1 of 1 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,77,2017-01-26T23:34:22Z,2017-01-27T15:41:32Z,2017-01-27T15:41:34Z,MERGED,True,16,12,8,https://github.com/ggajoch,Changed meaning for I2C adress to 7-bit value,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/77,https://github.com/ggajoch,1,https://github.com/PW-Sat2/PWSat2OBC/pull/77,"After physical tests it turned out that adresses in ICDs are 7-bit value without read/write marker padding.
Therefore, meaning of I2CAdress in I2C interface was changes to reflect 7-bit adress standard.


This change is","After physical tests it turned out that adresses in ICDs are 7-bit value without read/write marker padding.
Therefore, meaning of I2CAdress in I2C interface was changes to reflect 7-bit adress standard.


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,77,2017-01-26T23:34:22Z,2017-01-27T15:41:32Z,2017-01-27T15:41:34Z,MERGED,True,16,12,8,https://github.com/ggajoch,Changed meaning for I2C adress to 7-bit value,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/77,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/77#issuecomment-275695125,"After physical tests it turned out that adresses in ICDs are 7-bit value without read/write marker padding.
Therefore, meaning of I2CAdress in I2C interface was changes to reflect 7-bit adress standard.


This change is","Reviewed 8 of 8 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,78,2017-01-27T13:38:00Z,2017-02-12T17:47:20Z,2017-02-12T17:47:21Z,MERGED,True,1386,247,41,https://github.com/zaq32,Restructure adcs subsystem.,10,[],https://github.com/PW-Sat2/PWSat2OBC/pull/78,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/78,"Restructure of entire adcs subsystem. Features:

Prepare infrastructure for imtq/custom adcs integrration,
Enable imtq based detumbling once the initial silent period has passed,
Introduce adcs subsystem coordinator ensuring that only one adcs algorithm is acrtive at any given time.



This change is","Restructure of entire adcs subsystem. Features:

Prepare infrastructure for imtq/custom adcs integrration,
Enable imtq based detumbling once the initial silent period has passed,
Introduce adcs subsystem coordinator ensuring that only one adcs algorithm is acrtive at any given time.



This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,78,2017-01-27T13:38:00Z,2017-02-12T17:47:20Z,2017-02-12T17:47:21Z,MERGED,True,1386,247,41,https://github.com/zaq32,Restructure adcs subsystem.,10,[],https://github.com/PW-Sat2/PWSat2OBC/pull/78,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/78#issuecomment-276749536,"Restructure of entire adcs subsystem. Features:

Prepare infrastructure for imtq/custom adcs integrration,
Enable imtq based detumbling once the initial silent period has passed,
Introduce adcs subsystem coordinator ensuring that only one adcs algorithm is acrtive at any given time.



This change is","Reviewed 41 of 41 files at r1.
Review status: all files reviewed at latest revision, 3 unresolved discussions, some commit checks failed.

libs/adcs/AdcsCoordinator.cpp, line 6 at r1 (raw file):

namespace adcs
{
    AdcsCoordinator::AdcsCoordinator(IDetumblingSupport& primaryDetembling, //

Keep naming consistent. Not primaryDetumbling but builtinDetumbling

libs/adcs/Include/adcs/adcs.hpp, line 77 at r1 (raw file):

         */
        virtual OSResult DisableSunPointing() = 0;
    };

Any particular reason why detumbling is separated from sun pointing? From what I can see their interfaces are the same. What about simplifing them to IAdcsMode?

libs/mission/adcs/Include/mission/adcs.hpp, line 82 at r1 (raw file):

             * @brief This procedure is deployment action entry point.
             *
             * This procedure runs the antenna deployment process.

antenna?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,78,2017-01-27T13:38:00Z,2017-02-12T17:47:20Z,2017-02-12T17:47:21Z,MERGED,True,1386,247,41,https://github.com/zaq32,Restructure adcs subsystem.,10,[],https://github.com/PW-Sat2/PWSat2OBC/pull/78,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/78#issuecomment-279232577,"Restructure of entire adcs subsystem. Features:

Prepare infrastructure for imtq/custom adcs integrration,
Enable imtq based detumbling once the initial silent period has passed,
Introduce adcs subsystem coordinator ensuring that only one adcs algorithm is acrtive at any given time.



This change is","Review status: 31 of 41 files reviewed at latest revision, 3 unresolved discussions.

libs/adcs/AdcsCoordinator.cpp, line 6 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Keep naming consistent. Not primaryDetumbling but builtinDetumbling

Fixed

libs/adcs/Include/adcs/adcs.hpp, line 77 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Any particular reason why detumbling is separated from sun pointing? From what I can see their interfaces are the same. What about simplifing them to IAdcsMode?

The seperation is done to prevent mixup between the algorithms and to allow single class to implement both algorithms which may be usefull in case of our own custom adcs implementation.

libs/mission/adcs/Include/mission/adcs.hpp, line 82 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
antenna?

Fixed

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,78,2017-01-27T13:38:00Z,2017-02-12T17:47:20Z,2017-02-12T17:47:21Z,MERGED,True,1386,247,41,https://github.com/zaq32,Restructure adcs subsystem.,10,[],https://github.com/PW-Sat2/PWSat2OBC/pull/78,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/78#issuecomment-279233428,"Restructure of entire adcs subsystem. Features:

Prepare infrastructure for imtq/custom adcs integrration,
Enable imtq based detumbling once the initial silent period has passed,
Introduce adcs subsystem coordinator ensuring that only one adcs algorithm is acrtive at any given time.



This change is","Reviewed 10 of 10 files at r2.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

libs/adcs/Include/adcs/AdcsCoordinator.hpp, line 27 at r2 (raw file):

         * @param[in] primarySunPointing Reference to the sun pointing algorithm controller module.
         */
        AdcsCoordinator(IDetumblingSupport& builtinDetembling_, //

It is wise to run make doc to detect any mismatched documentation...

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,78,2017-01-27T13:38:00Z,2017-02-12T17:47:20Z,2017-02-12T17:47:21Z,MERGED,True,1386,247,41,https://github.com/zaq32,Restructure adcs subsystem.,10,[],https://github.com/PW-Sat2/PWSat2OBC/pull/78,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/78#issuecomment-279233781,"Restructure of entire adcs subsystem. Features:

Prepare infrastructure for imtq/custom adcs integrration,
Enable imtq based detumbling once the initial silent period has passed,
Introduce adcs subsystem coordinator ensuring that only one adcs algorithm is acrtive at any given time.



This change is","Review status: 40 of 41 files reviewed at latest revision, 1 unresolved discussion.

libs/adcs/Include/adcs/AdcsCoordinator.hpp, line 27 at r2 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
It is wise to run make doc to detect any mismatched documentation...

Fixed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,78,2017-01-27T13:38:00Z,2017-02-12T17:47:20Z,2017-02-12T17:47:21Z,MERGED,True,1386,247,41,https://github.com/zaq32,Restructure adcs subsystem.,10,[],https://github.com/PW-Sat2/PWSat2OBC/pull/78,https://github.com/Novakov,6,https://github.com/PW-Sat2/PWSat2OBC/pull/78#issuecomment-279235043,"Restructure of entire adcs subsystem. Features:

Prepare infrastructure for imtq/custom adcs integrration,
Enable imtq based detumbling once the initial silent period has passed,
Introduce adcs subsystem coordinator ensuring that only one adcs algorithm is acrtive at any given time.



This change is","Reviewed 1 of 1 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,79,2017-01-31T01:56:20Z,2017-02-02T14:11:08Z,2017-02-02T14:11:10Z,MERGED,True,66,2,7,https://github.com/ggajoch,I2C Read,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/79,https://github.com/ggajoch,1,https://github.com/PW-Sat2/PWSat2OBC/pull/79,"Implementation of I2C read command.
Needed for:

imtq
comm

Tested on imtq branch - works with device mock OOTB.


This change is","Implementation of I2C read command.
Needed for:

imtq
comm

Tested on imtq branch - works with device mock OOTB.


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,79,2017-01-31T01:56:20Z,2017-02-02T14:11:08Z,2017-02-02T14:11:10Z,MERGED,True,66,2,7,https://github.com/ggajoch,I2C Read,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/79,https://github.com/ggajoch,2,https://github.com/PW-Sat2/PWSat2OBC/pull/79#issuecomment-276486122,"Implementation of I2C read command.
Needed for:

imtq
comm

Tested on imtq branch - works with device mock OOTB.


This change is",I2C Read,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,79,2017-01-31T01:56:20Z,2017-02-02T14:11:08Z,2017-02-02T14:11:10Z,MERGED,True,66,2,7,https://github.com/ggajoch,I2C Read,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/79,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/79#issuecomment-276493494,"Implementation of I2C read command.
Needed for:

imtq
comm

Tested on imtq branch - works with device mock OOTB.


This change is","Reviewed 7 of 7 files at r1.
Review status: all files reviewed at latest revision, 1 unresolved discussion, some commit checks failed.

libs/drivers/i2c/Include/i2c/i2c.h, line 90 at r1 (raw file):

            virtual I2CResult Write(const I2CAddress address, gsl::span<const uint8_t> inData) = 0;

            virtual I2CResult Read(const I2CAddress address, gsl::span<uint8_t> outData) = 0;

Missing documentation

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,79,2017-01-31T01:56:20Z,2017-02-02T14:11:08Z,2017-02-02T14:11:10Z,MERGED,True,66,2,7,https://github.com/ggajoch,I2C Read,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/79,https://github.com/ggajoch,4,https://github.com/PW-Sat2/PWSat2OBC/pull/79#issuecomment-276498995,"Implementation of I2C read command.
Needed for:

imtq
comm

Tested on imtq branch - works with device mock OOTB.


This change is","Review status: 6 of 7 files reviewed at latest revision, 1 unresolved discussion, some commit checks failed.

libs/drivers/i2c/Include/i2c/i2c.h, line 90 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Missing documentation

done

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,79,2017-01-31T01:56:20Z,2017-02-02T14:11:08Z,2017-02-02T14:11:10Z,MERGED,True,66,2,7,https://github.com/ggajoch,I2C Read,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/79,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/79#issuecomment-276592171,"Implementation of I2C read command.
Needed for:

imtq
comm

Tested on imtq branch - works with device mock OOTB.


This change is","Reviewed 3 of 3 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,80,2017-01-31T19:17:38Z,2017-01-31T20:45:20Z,2017-01-31T20:45:23Z,MERGED,True,411,0,9,https://github.com/Novakov,Generate eclipse debug target as part of CMake build,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/80,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/80,"Allows generating Eclipse debug configurations as part of CMake build.
Builds are named:

[Run] <target> - Runs target with initial flashing
[Attach] <target> - Attaches to running target



This change is","Allows generating Eclipse debug configurations as part of CMake build.
Builds are named:

[Run] <target> - Runs target with initial flashing
[Attach] <target> - Attaches to running target



This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,80,2017-01-31T19:17:38Z,2017-01-31T20:45:20Z,2017-01-31T20:45:23Z,MERGED,True,411,0,9,https://github.com/Novakov,Generate eclipse debug target as part of CMake build,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/80,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/80#issuecomment-276476604,"Allows generating Eclipse debug configurations as part of CMake build.
Builds are named:

[Run] <target> - Runs target with initial flashing
[Attach] <target> - Attaches to running target



This change is","Reviewed 8 of 9 files at r1.
Review status: 8 of 9 files reviewed at latest revision, 1 unresolved discussion.

utils/functions.cmake, line 89 at r1 (raw file):

function(target_eclipse_debug_configs NAME)
#    get_filename_component(BUILD_DIR_NAME ${CMAKE_BINARY_DIR} NAME) 

remove if unneeded

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,80,2017-01-31T19:17:38Z,2017-01-31T20:45:20Z,2017-01-31T20:45:23Z,MERGED,True,411,0,9,https://github.com/Novakov,Generate eclipse debug target as part of CMake build,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/80,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/80#issuecomment-276476955,"Allows generating Eclipse debug configurations as part of CMake build.
Builds are named:

[Run] <target> - Runs target with initial flashing
[Attach] <target> - Attaches to running target



This change is","Review status: 8 of 9 files reviewed at latest revision, 1 unresolved discussion.

utils/functions.cmake, line 89 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
remove if unneeded

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,80,2017-01-31T19:17:38Z,2017-01-31T20:45:20Z,2017-01-31T20:45:23Z,MERGED,True,411,0,9,https://github.com/Novakov,Generate eclipse debug target as part of CMake build,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/80,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/80#issuecomment-276478577,"Allows generating Eclipse debug configurations as part of CMake build.
Builds are named:

[Run] <target> - Runs target with initial flashing
[Attach] <target> - Attaches to running target



This change is","Reviewed 1 of 1 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,81,2017-02-01T23:09:10Z,2017-02-02T11:39:51Z,2017-02-02T18:02:48Z,MERGED,True,89,0,4,https://github.com/pwec,Introducing Eigen lib,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/81,https://github.com/pwec,1,https://github.com/PW-Sat2/PWSat2OBC/pull/81,"Following @ggajoch suggestion would be better to do thing step by step so first one is to integrate eigen into project:

compilation time clone and config (no build - eigen is headers only) - following gsl process
UT proving integration: basic creation and operation  on matrix and vector; check if dynamic allocation of memory is disabled by flag defined during configuration



This change is","Following @ggajoch suggestion would be better to do thing step by step so first one is to integrate eigen into project:

compilation time clone and config (no build - eigen is headers only) - following gsl process
UT proving integration: basic creation and operation  on matrix and vector; check if dynamic allocation of memory is disabled by flag defined during configuration



This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,81,2017-02-01T23:09:10Z,2017-02-02T11:39:51Z,2017-02-02T18:02:48Z,MERGED,True,89,0,4,https://github.com/pwec,Introducing Eigen lib,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/81,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/81#issuecomment-276930943,"Following @ggajoch suggestion would be better to do thing step by step so first one is to integrate eigen into project:

compilation time clone and config (no build - eigen is headers only) - following gsl process
UT proving integration: basic creation and operation  on matrix and vector; check if dynamic allocation of memory is disabled by flag defined during configuration



This change is","Reviewed 4 of 4 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,81,2017-02-01T23:09:10Z,2017-02-02T11:39:51Z,2017-02-02T18:02:48Z,MERGED,True,89,0,4,https://github.com/pwec,Introducing Eigen lib,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/81,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/81#issuecomment-276935199,"Following @ggajoch suggestion would be better to do thing step by step so first one is to integrate eigen into project:

compilation time clone and config (no build - eigen is headers only) - following gsl process
UT proving integration: basic creation and operation  on matrix and vector; check if dynamic allocation of memory is disabled by flag defined during configuration



This change is","Reviewed 1 of 1 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,81,2017-02-01T23:09:10Z,2017-02-02T11:39:51Z,2017-02-02T18:02:48Z,MERGED,True,89,0,4,https://github.com/pwec,Introducing Eigen lib,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/81,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/81#issuecomment-277033876,"Following @ggajoch suggestion would be better to do thing step by step so first one is to integrate eigen into project:

compilation time clone and config (no build - eigen is headers only) - following gsl process
UT proving integration: basic creation and operation  on matrix and vector; check if dynamic allocation of memory is disabled by flag defined during configuration



This change is",Add eigen math library to project,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,82,2017-02-02T17:48:22Z,2017-02-17T16:46:48Z,2017-02-17T16:46:50Z,MERGED,True,2072,81,49,https://github.com/Novakov,Experiment fibonacci,15,[],https://github.com/PW-Sat2/PWSat2OBC/pull/82,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/82,"Infrastrucutre for running experiments + sample experiment fibonacci


This change is","Infrastrucutre for running experiments + sample experiment fibonacci


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,82,2017-02-02T17:48:22Z,2017-02-17T16:46:48Z,2017-02-17T16:46:50Z,MERGED,True,2072,81,49,https://github.com/Novakov,Experiment fibonacci,15,[],https://github.com/PW-Sat2/PWSat2OBC/pull/82,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/82#issuecomment-277033827,"Infrastrucutre for running experiments + sample experiment fibonacci


This change is",Experiment Fibonacci,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,82,2017-02-02T17:48:22Z,2017-02-17T16:46:48Z,2017-02-17T16:46:50Z,MERGED,True,2072,81,49,https://github.com/Novakov,Experiment fibonacci,15,[],https://github.com/PW-Sat2/PWSat2OBC/pull/82,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/82#issuecomment-279235008,"Infrastrucutre for running experiments + sample experiment fibonacci


This change is","Reviewed 37 of 39 files at r1.
Review status: 37 of 39 files reviewed at latest revision, 7 unresolved discussions, some commit checks failed.

libs/base/Include/utils.h, line 131 at r1 (raw file):

     * @retval true this is Some empty and other is equal to holded value
     */
    bool operator==(const T& other) const

when adding equality operator also add inequality operator

libs/base/Include/utils.h, line 149 at r1 (raw file):

     * @retval true when both are Some and underlying values are equal
     */
    bool operator==(const Option<T>& other) const

when adding equality operator also add inequality operator

libs/fs/extension.cpp, line 55 at r1 (raw file):

}

File::File() : _fs(nullptr)

uninitialized fields: _handle, _valid

libs/fs/extension.cpp, line 106 at r1 (raw file):

}

File& File::operator=(File&& other)

mark as noexcept

libs/fs/extension.cpp, line 110 at r1 (raw file):

    std::swap(this->_fs, other._fs);
    std::swap(this->_handle, other._handle);
    std::swap(this->_valid, other._valid);

swapping directly can have unexpected consequence of delayed destruction of resources managed by the assignment target,
The proper way to write this operator (when using swap based variant) looks like this:
File& operator=(File&& other) noexcept
{
    File tmp(std::move(other));
    tmp.swap(*this);
    return *this;
}

void File::swap(File& other) noexcept
{
    using std::swap;
    swap(this->_fs, other._fs);
    swap(this->_handle, other.handle);
    swap(this->_valid, other._valid);
}


libs/fs/Include/fs/fs.h, line 235 at r1 (raw file):

             * @return Reference to this
             */
            File& operator=(File&& other);

when definint move assignment operator you should also define move constructor.

src/commands/mission.cpp, line 23 at r1 (raw file):

    UNREFERENCED_PARAMETER(argv);
    LOG(LOG_LEVEL_INFO, ""Received request to resume automatic mission processing."");
    Mission.Suspend();

look like copy & paste programming on my part. This should be Mission.Resume()....

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,82,2017-02-02T17:48:22Z,2017-02-17T16:46:48Z,2017-02-17T16:46:50Z,MERGED,True,2072,81,49,https://github.com/Novakov,Experiment fibonacci,15,[],https://github.com/PW-Sat2/PWSat2OBC/pull/82,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/82#issuecomment-279253022,"Infrastrucutre for running experiments + sample experiment fibonacci


This change is","Reviewed 1 of 39 files at r1.
Review status: 38 of 39 files reviewed at latest revision, 7 unresolved discussions, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,82,2017-02-02T17:48:22Z,2017-02-17T16:46:48Z,2017-02-17T16:46:50Z,MERGED,True,2072,81,49,https://github.com/Novakov,Experiment fibonacci,15,[],https://github.com/PW-Sat2/PWSat2OBC/pull/82,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/82#issuecomment-279255088,"Infrastrucutre for running experiments + sample experiment fibonacci


This change is","Review status: 38 of 39 files reviewed at latest revision, 11 unresolved discussions, some commit checks failed.

libs/mission/experiments/experiments.cpp, line 31 at r1 (raw file):

            auto inProgress = (System::EventGroupGetBits(this->_event) & Event::InProgress) == Event::InProgress;
            if (inProgress)
                return;

this can be deceiving as user is not able to detect that another experiment is running and his request has been ignored...

libs/mission/experiments/experiments.cpp, line 33 at r1 (raw file):

                return;

            this->_requestedExperiment = Some(experiment);

as far as I can tell access to this variable should be synchronized as it is modified from at least two tasks:

mission task
experiment internal task.


libs/mission/experiments/experiments.cpp, line 82 at r1 (raw file):

            auto startResult = experiment.Start();

            if (startResult != StartResult::Success)

For the future, there should be a mechanism for propagating the status of the experiment back to the source so it can be saved and included in the full obc telemetry

libs/mission/experiments/experiments.cpp, line 182 at r1 (raw file):

            auto This = reinterpret_cast<MissionExperiment*>(param);

            System::EventGroupSetBits(This->_event, 1 << 2);

use apropriate constant.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,82,2017-02-02T17:48:22Z,2017-02-17T16:46:48Z,2017-02-17T16:46:50Z,MERGED,True,2072,81,49,https://github.com/Novakov,Experiment fibonacci,15,[],https://github.com/PW-Sat2/PWSat2OBC/pull/82,https://github.com/zaq32,6,https://github.com/PW-Sat2/PWSat2OBC/pull/82#issuecomment-279255095,"Infrastrucutre for running experiments + sample experiment fibonacci


This change is","Reviewed 1 of 39 files at r1.
Review status: all files reviewed at latest revision, 11 unresolved discussions, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,82,2017-02-02T17:48:22Z,2017-02-17T16:46:48Z,2017-02-17T16:46:50Z,MERGED,True,2072,81,49,https://github.com/Novakov,Experiment fibonacci,15,[],https://github.com/PW-Sat2/PWSat2OBC/pull/82,https://github.com/Novakov,7,https://github.com/PW-Sat2/PWSat2OBC/pull/82#issuecomment-280311324,"Infrastrucutre for running experiments + sample experiment fibonacci


This change is","Review status: 10 of 49 files reviewed at latest revision, 11 unresolved discussions.

libs/base/Include/utils.h, line 131 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
when adding equality operator also add inequality operator

Done.

libs/base/Include/utils.h, line 149 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
when adding equality operator also add inequality operator

Done.

libs/fs/extension.cpp, line 55 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
uninitialized fields: _handle, _valid

Done.

libs/fs/extension.cpp, line 106 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
mark as noexcept

Done.

libs/fs/extension.cpp, line 110 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
swapping directly can have unexpected consequence of delayed destruction of resources managed by the assignment target,
The proper way to write this operator (when using swap based variant) looks like this:
File& operator=(File&& other) noexcept
{
    File tmp(std::move(other));
    tmp.swap(*this);
    return *this;
}

void File::swap(File& other) noexcept
{
    using std::swap;
    swap(this->_fs, other._fs);
    swap(this->_handle, other.handle);
    swap(this->_valid, other._valid);
}


Done.

libs/fs/Include/fs/fs.h, line 235 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
when definint move assignment operator you should also define move constructor.

Done.

libs/mission/experiments/experiments.cpp, line 31 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
this can be deceiving as user is not able to detect that another experiment is running and his request has been ignored...

Done.

libs/mission/experiments/experiments.cpp, line 33 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
as far as I can tell access to this variable should be synchronized as it is modified from at least two tasks:

mission task
experiment internal task.


Done.

libs/mission/experiments/experiments.cpp, line 82 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
For the future, there should be a mechanism for propagating the status of the experiment back to the source so it can be saved and included in the full obc telemetry

Done.

libs/mission/experiments/experiments.cpp, line 182 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
use apropriate constant.

Done.

src/commands/mission.cpp, line 23 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
look like copy & paste programming on my part. This should be Mission.Resume()....

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,82,2017-02-02T17:48:22Z,2017-02-17T16:46:48Z,2017-02-17T16:46:50Z,MERGED,True,2072,81,49,https://github.com/Novakov,Experiment fibonacci,15,[],https://github.com/PW-Sat2/PWSat2OBC/pull/82,https://github.com/zaq32,8,https://github.com/PW-Sat2/PWSat2OBC/pull/82#issuecomment-280449898,"Infrastrucutre for running experiments + sample experiment fibonacci


This change is","Reviewed 7 of 13 files at r2, 35 of 37 files at r3.
Review status: all files reviewed at latest revision, 3 unresolved discussions.

libs/base/Include/utils.h, line 93 at r3 (raw file):

 * @brief Class that can logically contain either a value of type T or no value.
 */
template <class T> class Option

A side note (I'm not going to argue about this).
For classes like this it would be better to implement == and != operator as non member free standing functions.
To understand why consider this:
Option<int> a = 5;
int b  = 5;

const auto r1 = a == b;           // works ok 
const auto r2 = b == a;           // compile time error as ther is no equality operator that with first argument T and second Option<T>


libs/base/Include/utils.h, line 115 at r3 (raw file):

     * @return Option instance that holds a value.
     */
    static Option<T> Some(T&& value)

Again side note.
From pure language point of view this signature is less then optimal as it does not allow in-place object construction.
Something like this wold be preferable:
template <typename... Args> Option<T> Some(Args&&... args)
{
    return Option<T>(true, std::forward<Args>(args)...);
}


libs/base/Include/utils.h, line 161 at r3 (raw file):

f (!this->HasValue)
{
return false;
}

return this->Value != other;
how about implementing it like this:

bool operator!=(const T& other) const
{
    return !(*this == other);
}


Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,82,2017-02-02T17:48:22Z,2017-02-17T16:46:48Z,2017-02-17T16:46:50Z,MERGED,True,2072,81,49,https://github.com/Novakov,Experiment fibonacci,15,[],https://github.com/PW-Sat2/PWSat2OBC/pull/82,https://github.com/Novakov,9,https://github.com/PW-Sat2/PWSat2OBC/pull/82#issuecomment-280532028,"Infrastrucutre for running experiments + sample experiment fibonacci


This change is","Review status: 48 of 49 files reviewed at latest revision, 3 unresolved discussions.

libs/base/Include/utils.h, line 93 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
A side note (I'm not going to argue about this).
For classes like this it would be better to implement == and != operator as non member free standing functions.
To understand why consider this:
Option<int> a = 5;
int b  = 5;

const auto r1 = a == b;           // works ok 
const auto r2 = b == a;           // compile time error as ther is no equality operator that with first argument T and second Option<T>


Done.

libs/base/Include/utils.h, line 115 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
Again side note.
From pure language point of view this signature is less then optimal as it does not allow in-place object construction.
Something like this wold be preferable:
template <typename... Args> Option<T> Some(Args&&... args)
{
    return Option<T>(true, std::forward<Args>(args)...);
}


Done.

libs/base/Include/utils.h, line 161 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote

f (!this->HasValue)
{
return false;
}

return this->Value != other;
how about implementing it like this:

bool operator!=(const T& other) const
{
    return !(*this == other);
}


Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,82,2017-02-02T17:48:22Z,2017-02-17T16:46:48Z,2017-02-17T16:46:50Z,MERGED,True,2072,81,49,https://github.com/Novakov,Experiment fibonacci,15,[],https://github.com/PW-Sat2/PWSat2OBC/pull/82,https://github.com/zaq32,10,https://github.com/PW-Sat2/PWSat2OBC/pull/82#issuecomment-280567875,"Infrastrucutre for running experiments + sample experiment fibonacci


This change is","Reviewed 1 of 1 files at r4.
Review status: all files reviewed at latest revision, 4 unresolved discussions.

libs/base/Include/utils.h, line 109 at r4 (raw file):

        return Option<T>(false, T());
    }
    //

remove it

libs/base/Include/utils.h, line 193 at r4 (raw file):

 * @retval true lhs is Some and rhs is equal to holded value
 */
template <typename T> bool operator==(const Option<T>& lhs, const T& rhs)

so we have following variats:
operator==(Option<T>, T);
operator==(Option<T>, Option<T>);

the one that is still missing is:
operator==(T, Option);


libs/base/Include/utils.h, line 211 at r4 (raw file):

 * @retval false lhs is Some and rhs is equal to holded value
 */
template <typename T> bool operator!=(const Option<T>& lhs, const T& rhs)

mark as inline

libs/base/Include/utils.h, line 245 at r4 (raw file):

 * @retval true when both are Some and underlying values are equal
 */
template <typename T> bool operator!=(const Option<T>& lhs, const Option<T>& rhs)

mark as inline

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,82,2017-02-02T17:48:22Z,2017-02-17T16:46:48Z,2017-02-17T16:46:50Z,MERGED,True,2072,81,49,https://github.com/Novakov,Experiment fibonacci,15,[],https://github.com/PW-Sat2/PWSat2OBC/pull/82,https://github.com/Novakov,11,https://github.com/PW-Sat2/PWSat2OBC/pull/82#issuecomment-280689723,"Infrastrucutre for running experiments + sample experiment fibonacci


This change is","Review status: all files reviewed at latest revision, 4 unresolved discussions.

libs/base/Include/utils.h, line 109 at r4 (raw file):
Previously, zaq32 (ukasz ak) wrote
remove it

Done.

libs/base/Include/utils.h, line 193 at r4 (raw file):
Previously, zaq32 (ukasz ak) wrote
so we have following variats:
operator==(Option<T>, T);
operator==(Option<T>, Option<T>);

the one that is still missing is:
operator==(T, Option);
</blockquote></details>

Done.

---

*[libs/base/Include/utils.h, line 211 at r4](https://reviewable.io:443/reviews/pw-sat2/pwsat2obc/82#-Kd9mveDw3ZK_Z8zQjKv:-KdBmoabJhVjkTbBtQw1:b-896fix) ([raw file](https://github.com/pw-sat2/pwsat2obc/blob/b951e978e53fb39f4425e0a747e5e715327fe515/libs/base/Include/utils.h#L211)):*
<details><summary><i>Previously, zaq32 (ukasz ak) wrote</i></summary><blockquote>

mark as inline
</blockquote></details>

Done.

---

*[libs/base/Include/utils.h, line 245 at r4](https://reviewable.io:443/reviews/pw-sat2/pwsat2obc/82#-Kd9mxDNmVt5OyoAUijC:-KdBmnqk3fKz0zoxeJlN:b-896fix) ([raw file](https://github.com/pw-sat2/pwsat2obc/blob/b951e978e53fb39f4425e0a747e5e715327fe515/libs/base/Include/utils.h#L245)):*
<details><summary><i>Previously, zaq32 (ukasz ak) wrote</i></summary><blockquote>

mark as inline
</blockquote></details>

Done.

---


*Comments from [Reviewable](https://reviewable.io:443/reviews/pw-sat2/pwsat2obc/82)*
<!-- Sent from Reviewable.io -->",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,82,2017-02-02T17:48:22Z,2017-02-17T16:46:48Z,2017-02-17T16:46:50Z,MERGED,True,2072,81,49,https://github.com/Novakov,Experiment fibonacci,15,[],https://github.com/PW-Sat2/PWSat2OBC/pull/82,https://github.com/zaq32,12,https://github.com/PW-Sat2/PWSat2OBC/pull/82#issuecomment-280691061,"Infrastrucutre for running experiments + sample experiment fibonacci


This change is","Reviewed 1 of 1 files at r5.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,83,2017-02-02T20:42:05Z,2017-02-09T06:20:09Z,2017-02-09T06:20:10Z,MERGED,True,224,25,8,https://github.com/Novakov,EventGroup wrapper,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/83,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/83,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,83,2017-02-02T20:42:05Z,2017-02-09T06:20:09Z,2017-02-09T06:20:10Z,MERGED,True,224,25,8,https://github.com/Novakov,EventGroup wrapper,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/83,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/83#issuecomment-277450521,This change is,"Reviewed 8 of 8 files at r1.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

libs/base/Include/base/os.h, line 693 at r1 (raw file):

 * @brief Wrapper around event group synchronization primitive
 */
class EventGroup final

missing default constructor

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,83,2017-02-02T20:42:05Z,2017-02-09T06:20:09Z,2017-02-09T06:20:10Z,MERGED,True,224,25,8,https://github.com/Novakov,EventGroup wrapper,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/83,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/83#issuecomment-278036739,This change is,"Review status: 6 of 8 files reviewed at latest revision, 1 unresolved discussion.

libs/base/Include/base/os.h, line 693 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
missing default constructor

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,83,2017-02-02T20:42:05Z,2017-02-09T06:20:09Z,2017-02-09T06:20:10Z,MERGED,True,224,25,8,https://github.com/Novakov,EventGroup wrapper,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/83,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/83#issuecomment-278557517,This change is,"Reviewed 2 of 2 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,84,2017-02-03T18:21:37Z,2017-02-09T14:34:35Z,2017-02-09T14:34:36Z,MERGED,True,289,27,17,https://github.com/mandrek44,Burtc time provider,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/84,https://github.com/mandrek44,1,https://github.com/PW-Sat2/PWSat2OBC/pull/84,"Set BURTC as a tick source to TimeProvider


This change is","Set BURTC as a tick source to TimeProvider


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,84,2017-02-03T18:21:37Z,2017-02-09T14:34:35Z,2017-02-09T14:34:36Z,MERGED,True,289,27,17,https://github.com/mandrek44,Burtc time provider,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/84,https://github.com/mandrek44,2,https://github.com/PW-Sat2/PWSat2OBC/pull/84#issuecomment-277322583,"Set BURTC as a tick source to TimeProvider


This change is",BURTC,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,84,2017-02-03T18:21:37Z,2017-02-09T14:34:35Z,2017-02-09T14:34:36Z,MERGED,True,289,27,17,https://github.com/mandrek44,Burtc time provider,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/84,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/84#issuecomment-277334182,"Set BURTC as a tick source to TimeProvider


This change is","Reviewed 11 of 13 files at r1, 2 of 6 files at r2.
Review status: all files reviewed at latest revision, 7 unresolved discussions.

integration_tests/tests/test_time.py, line 32 at r1 (raw file):

        self.assertGreaterEqual(time_difference, wait_time_s - wait_time_accuracy_s)
        self.assertLessEqual(time_difference, wait_time_s + wait_time_accuracy_s)

Use self.assertAlmostEqual method

libs/drivers/burtc/burtc.cpp, line 45 at r1 (raw file):

    burtcInterruptSemaphore = System::CreateBinarySemaphore();

    System::CreateTask(Burtc::HandleTickTask, ""HandleTickTask"", 512, this, TaskPriority::P1, NULL);

We've got wrapper around RTOS tasks: Task class in base/os.h

libs/drivers/burtc/burtc.cpp, line 13 at r2 (raw file):

void BURTC_IRQHandler(void)
{
    uint32_t irq = BURTC_IntGet();

In C++ it is preffered to use std::uint32_t from cstdint header

libs/drivers/burtc/Include/burtc/burtc.hpp, line 9 at r1 (raw file):

/**
 * @defgroup burtc Backup RTC Driver

Add this group to appropriate group (perhipheral_drivers)

src/obc.cpp, line 12 at r1 (raw file):

      terminal(this->IO),                       //
      burtcHandler(timeProvider),               //
      Burtc(burtcHandler)

I think that BURTC hardware, so it can be move inside OBCHardware

src/obc.h, line 49 at r1 (raw file):

     * @param[in] interval Interval that passed since last tick
     */
    void virtual Tick(std::chrono::milliseconds interval);

add override

libs/time/CMakeLists.txt, line 15 at r1 (raw file):

	base 
	fs 
	emlib

Time should not depend on emlib

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,84,2017-02-03T18:21:37Z,2017-02-09T14:34:35Z,2017-02-09T14:34:36Z,MERGED,True,289,27,17,https://github.com/mandrek44,Burtc time provider,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/84,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/84#issuecomment-277436549,"Set BURTC as a tick source to TimeProvider


This change is","Reviewed 1 of 6 files at r2.
Review status: all files reviewed at latest revision, 9 unresolved discussions.

libs/drivers/burtc/burtc.cpp, line 30 at r2 (raw file):

    while (1)
    {
        System::TakeSemaphore(burtcInterruptSemaphore, InfiniteTimeout);

missing error handling

libs/drivers/burtc/burtc.cpp, line 38 at r2 (raw file):

void Burtc::Initialize()
{
    burtcInterruptSemaphore = System::CreateBinarySemaphore();

missing error handling

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,84,2017-02-03T18:21:37Z,2017-02-09T14:34:35Z,2017-02-09T14:34:36Z,MERGED,True,289,27,17,https://github.com/mandrek44,Burtc time provider,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/84,https://github.com/mandrek44,5,https://github.com/PW-Sat2/PWSat2OBC/pull/84#issuecomment-277459753,"Set BURTC as a tick source to TimeProvider


This change is","Review status: 4 of 17 files reviewed at latest revision, 9 unresolved discussions, some commit checks failed.

integration_tests/tests/test_time.py, line 32 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Use self.assertAlmostEqual method

Done.

libs/drivers/burtc/burtc.cpp, line 45 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
We've got wrapper around RTOS tasks: Task class in base/os.h

Done.

libs/drivers/burtc/burtc.cpp, line 13 at r2 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
In C++ it is preffered to use std::uint32_t from cstdint header

Done.

libs/drivers/burtc/burtc.cpp, line 30 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
missing error handling

Done.

libs/drivers/burtc/burtc.cpp, line 38 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
missing error handling

CreateBinarySemaphore logs error internally

libs/drivers/burtc/Include/burtc/burtc.hpp, line 9 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Add this group to appropriate group (perhipheral_drivers)

Done.

src/obc.cpp, line 12 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
I think that BURTC hardware, so it can be move inside OBCHardware

Done.

src/obc.h, line 49 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
add override

Done.

libs/time/CMakeLists.txt, line 15 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Time should not depend on emlib

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,84,2017-02-03T18:21:37Z,2017-02-09T14:34:35Z,2017-02-09T14:34:36Z,MERGED,True,289,27,17,https://github.com/mandrek44,Burtc time provider,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/84,https://github.com/Novakov,6,https://github.com/PW-Sat2/PWSat2OBC/pull/84#issuecomment-277460808,"Set BURTC as a tick source to TimeProvider


This change is","Reviewed 13 of 13 files at r3.
Review status: all files reviewed at latest revision, 2 unresolved discussions, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,84,2017-02-03T18:21:37Z,2017-02-09T14:34:35Z,2017-02-09T14:34:36Z,MERGED,True,289,27,17,https://github.com/mandrek44,Burtc time provider,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/84,https://github.com/zaq32,7,https://github.com/PW-Sat2/PWSat2OBC/pull/84#issuecomment-278556132,"Set BURTC as a tick source to TimeProvider


This change is","Review status: all files reviewed at latest revision, 2 unresolved discussions.

libs/drivers/burtc/burtc.cpp, line 38 at r2 (raw file):
Previously, mandrek44 (Mandro) wrote
CreateBinarySemaphore logs error internally

so it would be nice to propagate this error up the call stack

libs/drivers/burtc/burtc.cpp, line 39 at r4 (raw file):

        }

        burtcObject->_tickCallback.Invoke(burtcObject->_timeDelta);

this function should not be called in case of errors.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,84,2017-02-03T18:21:37Z,2017-02-09T14:34:35Z,2017-02-09T14:34:36Z,MERGED,True,289,27,17,https://github.com/mandrek44,Burtc time provider,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/84,https://github.com/mandrek44,8,https://github.com/PW-Sat2/PWSat2OBC/pull/84#issuecomment-278633164,"Set BURTC as a tick source to TimeProvider


This change is","Review status: 10 of 17 files reviewed at latest revision, 2 unresolved discussions.

libs/drivers/burtc/burtc.cpp, line 38 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
so it would be nice to propagate this error up the call stack

Done.

libs/drivers/burtc/burtc.cpp, line 39 at r4 (raw file):
Previously, zaq32 (ukasz ak) wrote
this function should not be called in case of errors.

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,84,2017-02-03T18:21:37Z,2017-02-09T14:34:35Z,2017-02-09T14:34:36Z,MERGED,True,289,27,17,https://github.com/mandrek44,Burtc time provider,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/84,https://github.com/zaq32,9,https://github.com/PW-Sat2/PWSat2OBC/pull/84#issuecomment-278635923,"Set BURTC as a tick source to TimeProvider


This change is","Reviewed 7 of 7 files at r5.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

libs/drivers/burtc/burtc.cpp, line 48 at r5 (raw file):

{
    burtcInterruptSemaphore = System::CreateBinarySemaphore();
    if (burtcInterruptSemaphore == 0)

since semaphore handle is a pointer you should use nullptr instead of zero constant.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,84,2017-02-03T18:21:37Z,2017-02-09T14:34:35Z,2017-02-09T14:34:36Z,MERGED,True,289,27,17,https://github.com/mandrek44,Burtc time provider,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/84,https://github.com/mandrek44,10,https://github.com/PW-Sat2/PWSat2OBC/pull/84#issuecomment-278650517,"Set BURTC as a tick source to TimeProvider


This change is","Review status: 16 of 17 files reviewed at latest revision, 1 unresolved discussion.

libs/drivers/burtc/burtc.cpp, line 48 at r5 (raw file):
Previously, zaq32 (ukasz ak) wrote
since semaphore handle is a pointer you should use nullptr instead of zero constant.

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,84,2017-02-03T18:21:37Z,2017-02-09T14:34:35Z,2017-02-09T14:34:36Z,MERGED,True,289,27,17,https://github.com/mandrek44,Burtc time provider,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/84,https://github.com/zaq32,11,https://github.com/PW-Sat2/PWSat2OBC/pull/84#issuecomment-278651058,"Set BURTC as a tick source to TimeProvider


This change is","Reviewed 1 of 1 files at r6.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,85,2017-02-03T20:29:42Z,2017-02-10T18:34:03Z,2017-02-10T18:34:04Z,MERGED,True,164,31,6,https://github.com/Novakov,Mount 3 external N25Q flashes,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/85,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/85,"Mount 3 external flashes when using N25Q storage


This change is","Mount 3 external flashes when using N25Q storage


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,85,2017-02-03T20:29:42Z,2017-02-10T18:34:03Z,2017-02-10T18:34:04Z,MERGED,True,164,31,6,https://github.com/Novakov,Mount 3 external N25Q flashes,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/85,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/85#issuecomment-278558736,"Mount 3 external flashes when using N25Q storage


This change is","Reviewed 6 of 6 files at r1.
Review status: all files reviewed at latest revision, 2 unresolved discussions, some commit checks failed.

libs/obc/storage/n25q_flash/n25q.cpp, line 28 at r1 (raw file):

_flashes{

Quoted 4 lines of code
>           {""/a"", pins.Flash1ChipSelect, spi, deviceOperations}, //
>           {""/b"", pins.Flash2ChipSelect, spi, deviceOperations}, //
>           {""/c"", pins.Flash3ChipSelect, spi, deviceOperations}  //
>       }

This looks suspicious, flash driver (even high level one) should not have hard coded mount moints for any device.

libs/obc/storage/n25q_flash/Include/obc/storage/n25q.h, line 4 at r1 (raw file):

#define LIBS_OBC_STORAGE_N25Q_FLASH_INCLUDE_OBC_STORAGE_N25Q_H_

#include <array>

seems unused

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,85,2017-02-03T20:29:42Z,2017-02-10T18:34:03Z,2017-02-10T18:34:04Z,MERGED,True,164,31,6,https://github.com/Novakov,Mount 3 external N25Q flashes,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/85,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/85#issuecomment-279024371,"Mount 3 external flashes when using N25Q storage


This change is","Review status: 4 of 6 files reviewed at latest revision, 2 unresolved discussions.

libs/obc/storage/n25q_flash/n25q.cpp, line 28 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote

_flashes{
{""/a"", pins.Flash1ChipSelect, spi, deviceOperations}, //
{""/b"", pins.Flash2ChipSelect, spi, deviceOperations}, //
{""/c"", pins.Flash3ChipSelect, spi, deviceOperations}  //
}
This looks suspicious, flash driver (even high level one) should not have hard coded mount moints for any device.


It's not flash driver of any kind - it's part of OBC structure - part that composes everything together

libs/obc/storage/n25q_flash/Include/obc/storage/n25q.h, line 4 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
seems unused

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,85,2017-02-03T20:29:42Z,2017-02-10T18:34:03Z,2017-02-10T18:34:04Z,MERGED,True,164,31,6,https://github.com/Novakov,Mount 3 external N25Q flashes,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/85,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/85#issuecomment-279025370,"Mount 3 external flashes when using N25Q storage


This change is","Reviewed 2 of 2 files at r2.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

libs/obc/storage/n25q_flash/n25q.cpp, line 28 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
It's not flash driver of any kind - it's part of OBC structure - part that composes everything together

ok, so why there are 3 MakeDirectory calls in main.cpp with exact same list of directory paths?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,85,2017-02-03T20:29:42Z,2017-02-10T18:34:03Z,2017-02-10T18:34:04Z,MERGED,True,164,31,6,https://github.com/Novakov,Mount 3 external N25Q flashes,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/85,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/85#issuecomment-279026433,"Mount 3 external flashes when using N25Q storage


This change is","Review status: all files reviewed at latest revision, 1 unresolved discussion.

libs/obc/storage/n25q_flash/n25q.cpp, line 28 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
ok, so why there are 3 MakeDirectory calls in main.cpp with exact same list of directory paths?

If you use development-only STK internal flash you want to mimic directory structure from flight model (N25Q flashes).

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,86,2017-02-04T15:11:31Z,2017-02-04T16:06:51Z,2017-02-04T16:06:52Z,MERGED,True,11,0,3,https://github.com/zaq32,Add command for resetting mcu from terminal.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/86,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/86,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,86,2017-02-04T15:11:31Z,2017-02-04T16:06:51Z,2017-02-04T16:06:52Z,MERGED,True,11,0,3,https://github.com/zaq32,Add command for resetting mcu from terminal.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/86,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/86#issuecomment-277455403,This change is,"Reviewed 3 of 3 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,87,2017-02-08T19:45:36Z,2017-02-10T19:26:33Z,2017-02-10T19:26:34Z,MERGED,True,36,0,7,https://github.com/Novakov,Speed up unit tests compilation,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/87,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/87,"According to https://github.com/google/googletest/blob/master/googlemock/docs/CookBook.md#making-the-compilation-faster it is wise to define constructor and destructor of mock class in single .cpp file to speed up compilation.
On my machine, command: make -C unit_tests clean all -j5
Before: ~67s
After: ~57s


This change is","According to https://github.com/google/googletest/blob/master/googlemock/docs/CookBook.md#making-the-compilation-faster it is wise to define constructor and destructor of mock class in single .cpp file to speed up compilation.
On my machine, command: make -C unit_tests clean all -j5
Before: ~67s
After: ~57s


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,87,2017-02-08T19:45:36Z,2017-02-10T19:26:33Z,2017-02-10T19:26:34Z,MERGED,True,36,0,7,https://github.com/Novakov,Speed up unit tests compilation,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/87,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/87#issuecomment-278555755,"According to https://github.com/google/googletest/blob/master/googlemock/docs/CookBook.md#making-the-compilation-faster it is wise to define constructor and destructor of mock class in single .cpp file to speed up compilation.
On my machine, command: make -C unit_tests clean all -j5
Before: ~67s
After: ~57s


This change is","You can also gain something by putting definition of all of the newly added constructors/destructors in single file.

Reviewed 7 of 7 files at r1.
Review status: all files reviewed at latest revision, 3 unresolved discussions.

unit_tests/OsMock.hpp, line 12 at r1 (raw file):

{
    OSMock();
    virtual ~OSMock();

IOS does not have virtual destructor so why this one is marked as virtual?

unit_tests/I2C/I2CMock.hpp, line 12 at r1 (raw file):

{
    I2CBusMock();
    virtual ~I2CBusMock();

drivers::i2c::II2CBus does not have virtual destructor so why this one is marked as virtual?

unit_tests/mock/FsMock.hpp, line 13 at r1 (raw file):

{
    FsMock();
    virtual ~FsMock();

IFileSystem does not have virtual destructor so why this one is marked as virtual?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,87,2017-02-08T19:45:36Z,2017-02-10T19:26:33Z,2017-02-10T19:26:34Z,MERGED,True,36,0,7,https://github.com/Novakov,Speed up unit tests compilation,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/87,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/87#issuecomment-279036119,"According to https://github.com/google/googletest/blob/master/googlemock/docs/CookBook.md#making-the-compilation-faster it is wise to define constructor and destructor of mock class in single .cpp file to speed up compilation.
On my machine, command: make -C unit_tests clean all -j5
Before: ~67s
After: ~57s


This change is","Well it's just two files that will remain mostly the same. Putting both ctors in single file will make a bit harder to find

Review status: 3 of 7 files reviewed at latest revision, 3 unresolved discussions.

unit_tests/OsMock.hpp, line 12 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
IOS does not have virtual destructor so why this one is marked as virtual?

Fixed

unit_tests/I2C/I2CMock.hpp, line 12 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
drivers::i2c::II2CBus does not have virtual destructor so why this one is marked as virtual?

Fixed

unit_tests/mock/FsMock.hpp, line 13 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
IFileSystem does not have virtual destructor so why this one is marked as virtual?

Fixed

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,87,2017-02-08T19:45:36Z,2017-02-10T19:26:33Z,2017-02-10T19:26:34Z,MERGED,True,36,0,7,https://github.com/Novakov,Speed up unit tests compilation,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/87,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/87#issuecomment-279041599,"According to https://github.com/google/googletest/blob/master/googlemock/docs/CookBook.md#making-the-compilation-faster it is wise to define constructor and destructor of mock class in single .cpp file to speed up compilation.
On my machine, command: make -C unit_tests clean all -j5
Before: ~67s
After: ~57s


This change is","just a suggestion...

Reviewed 4 of 4 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,88,2017-02-12T19:10:42Z,2017-02-20T06:22:44Z,2017-02-20T06:22:45Z,MERGED,True,362,16,11,https://github.com/mandrek44,Implemented time retrieval from RTC,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/88,https://github.com/mandrek44,1,https://github.com/PW-Sat2/PWSat2OBC/pull/88,"RTC integration - just the driver, without a mock and tests. ""rtc"" terminal command for testing the hardware. mktime used to convert RTC time to seconds for comparing.


This change is","RTC integration - just the driver, without a mock and tests. ""rtc"" terminal command for testing the hardware. mktime used to convert RTC time to seconds for comparing.


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,88,2017-02-12T19:10:42Z,2017-02-20T06:22:44Z,2017-02-20T06:22:45Z,MERGED,True,362,16,11,https://github.com/mandrek44,Implemented time retrieval from RTC,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/88,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/88#issuecomment-279243374,"RTC integration - just the driver, without a mock and tests. ""rtc"" terminal command for testing the hardware. mktime used to convert RTC time to seconds for comparing.


This change is","Reviewed 8 of 8 files at r1.
Review status: all files reviewed at latest revision, 5 unresolved discussions.

libs/drivers/rtc/rtc.cpp, line 39 at r1 (raw file):

    rtcTime.days = ConvertFromBCD(outBuffer[3], DaysNibbleMask);
    rtcTime.months = ConvertFromBCD(outBuffer[5], MonthsNibbleMask);
    rtcTime.years = ConvertFromBCD(outBuffer[6], YearsNibbleMask);

It would be better to move this method (ConvertFromBCD) to Reader class and use it here

libs/drivers/rtc/Include/rtc/rtc.hpp, line 14 at r1 (raw file):

perhipheral_drivers
Perhipheral drivers are used to control something that is built in into MCU (like timers, BURTC, I2C, etc). External RTC falls into device_drviers category


libs/drivers/rtc/Include/rtc/rtc.hpp, line 89 at r1 (raw file):

                t.tm_isdst = -1;

                return static_cast<std::uint32_t>(mktime(&t));

How about returning chrono duration from here?

src/commands/rtc.cpp, line 28 at r1 (raw file):

    else
        Main.terminal.Printf(""FAIL\r\n"");
}

What's the purpose of this function?

src/commands/rtc.cpp, line 67 at r1 (raw file):

    }

    if (command == 0)

Using strcmp directly in if is fine in case of commands - it will be easier to see what is supported

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,88,2017-02-12T19:10:42Z,2017-02-20T06:22:44Z,2017-02-20T06:22:45Z,MERGED,True,362,16,11,https://github.com/mandrek44,Implemented time retrieval from RTC,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/88,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/88#issuecomment-279245074,"RTC integration - just the driver, without a mock and tests. ""rtc"" terminal command for testing the hardware. mktime used to convert RTC time to seconds for comparing.


This change is","Review status: all files reviewed at latest revision, 6 unresolved discussions.

libs/drivers/rtc/rtc.cpp, line 31 at r1 (raw file):

    {
        LOG(LOG_LEVEL_ERROR, ""Unable read time from RTC"");
        return;

how RTC user is expected to detect failure?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,88,2017-02-12T19:10:42Z,2017-02-20T06:22:44Z,2017-02-20T06:22:45Z,MERGED,True,362,16,11,https://github.com/mandrek44,Implemented time retrieval from RTC,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/88,https://github.com/mandrek44,4,https://github.com/PW-Sat2/PWSat2OBC/pull/88#issuecomment-279529024,"RTC integration - just the driver, without a mock and tests. ""rtc"" terminal command for testing the hardware. mktime used to convert RTC time to seconds for comparing.


This change is","Review status: 5 of 11 files reviewed at latest revision, 6 unresolved discussions.

libs/drivers/rtc/rtc.cpp, line 31 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
how RTC user is expected to detect failure?

Done.

libs/drivers/rtc/rtc.cpp, line 39 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
It would be better to move this method (ConvertFromBCD) to Reader class and use it here

Done.

libs/drivers/rtc/Include/rtc/rtc.hpp, line 14 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote

perhipheral_drivers
Perhipheral drivers are used to control something that is built in into MCU (like timers, BURTC, I2C, etc). External RTC falls into device_drviers category


Done.

libs/drivers/rtc/Include/rtc/rtc.hpp, line 89 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
How about returning chrono duration from here?

Done.

src/commands/rtc.cpp, line 28 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
What's the purpose of this function?

To easily spot error in data returned from RTC - kind of healthcheck function. Should I remove it?

src/commands/rtc.cpp, line 67 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Using strcmp directly in if is fine in case of commands - it will be easier to see what is supported

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,88,2017-02-12T19:10:42Z,2017-02-20T06:22:44Z,2017-02-20T06:22:45Z,MERGED,True,362,16,11,https://github.com/mandrek44,Implemented time retrieval from RTC,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/88,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/88#issuecomment-279622616,"RTC integration - just the driver, without a mock and tests. ""rtc"" terminal command for testing the hardware. mktime used to convert RTC time to seconds for comparing.


This change is","Reviewed 6 of 6 files at r2.
Review status: all files reviewed at latest revision, 2 unresolved discussions.

libs/drivers/rtc/rtc.cpp, line 31 at r1 (raw file):
Previously, mandrek44 (Mandro) wrote
Done.

I don't think that I2CResult is proper result type... OSResult/bool would be better

src/commands/rtc.cpp, line 28 at r1 (raw file):
Previously, mandrek44 (Mandro) wrote
To easily spot error in data returned from RTC - kind of healthcheck function. Should I remove it?

As you said - ranges of some values are different from those stated in datasheet, so let's leave this method here

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,88,2017-02-12T19:10:42Z,2017-02-20T06:22:44Z,2017-02-20T06:22:45Z,MERGED,True,362,16,11,https://github.com/mandrek44,Implemented time retrieval from RTC,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/88,https://github.com/mandrek44,6,https://github.com/PW-Sat2/PWSat2OBC/pull/88#issuecomment-280830661,"RTC integration - just the driver, without a mock and tests. ""rtc"" terminal command for testing the hardware. mktime used to convert RTC time to seconds for comparing.


This change is","Review status: 6 of 11 files reviewed at latest revision, 1 unresolved discussion.

libs/drivers/rtc/rtc.cpp, line 31 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
I don't think that I2CResult is proper result type... OSResult/bool would be better

I don't like bools - changed to OSResult

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,88,2017-02-12T19:10:42Z,2017-02-20T06:22:44Z,2017-02-20T06:22:45Z,MERGED,True,362,16,11,https://github.com/mandrek44,Implemented time retrieval from RTC,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/88,https://github.com/Novakov,7,https://github.com/PW-Sat2/PWSat2OBC/pull/88#issuecomment-280834536,"RTC integration - just the driver, without a mock and tests. ""rtc"" terminal command for testing the hardware. mktime used to convert RTC time to seconds for comparing.


This change is","Reviewed 5 of 5 files at r3.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,89,2017-02-13T17:49:13Z,2017-02-21T21:09:34Z,2017-02-21T21:09:36Z,MERGED,True,823,55,33,https://github.com/Novakov,Telecommand - Downloading any file,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/89,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/89,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,89,2017-02-13T17:49:13Z,2017-02-21T21:09:34Z,2017-02-21T21:09:36Z,MERGED,True,823,55,33,https://github.com/Novakov,Telecommand - Downloading any file,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/89,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/89#issuecomment-279490415,This change is,Downloading file on telecommand,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,89,2017-02-13T17:49:13Z,2017-02-21T21:09:34Z,2017-02-21T21:09:36Z,MERGED,True,823,55,33,https://github.com/Novakov,Telecommand - Downloading any file,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/89,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/89#issuecomment-280451307,This change is,"Reviewed 15 of 33 files at r1.
Review status: 15 of 33 files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,89,2017-02-13T17:49:13Z,2017-02-21T21:09:34Z,2017-02-21T21:09:36Z,MERGED,True,823,55,33,https://github.com/Novakov,Telecommand - Downloading any file,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/89,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/89#issuecomment-281481079,This change is,"Reviewed 16 of 33 files at r1, 7 of 7 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,90,2017-02-14T22:10:43Z,2017-02-15T06:18:06Z,2017-02-15T06:18:07Z,MERGED,True,24,9,4,https://github.com/zaq32,Fix obc crash after first time update,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/90,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/90,"Problem was caused by burtc task stack overflow that  occurred due to time service saving the current time to flash memory a process that requires ~2KB of stack space in total.
Additionally stack overflow checking has been permanently enabled in debug builds.


This change is","Problem was caused by burtc task stack overflow that  occurred due to time service saving the current time to flash memory a process that requires ~2KB of stack space in total.
Additionally stack overflow checking has been permanently enabled in debug builds.


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,90,2017-02-14T22:10:43Z,2017-02-15T06:18:06Z,2017-02-15T06:18:07Z,MERGED,True,24,9,4,https://github.com/zaq32,Fix obc crash after first time update,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/90,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/90#issuecomment-279926769,"Problem was caused by burtc task stack overflow that  occurred due to time service saving the current time to flash memory a process that requires ~2KB of stack space in total.
Additionally stack overflow checking has been permanently enabled in debug builds.


This change is","Reviewed 4 of 4 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,91,2017-02-15T06:31:15Z,2017-02-21T21:09:59Z,2017-02-27T14:18:57Z,CLOSED,False,8,2,3,https://github.com/zaq32,Fix outstanding build (doxygen) warnings.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/91,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/91,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,92,2017-02-18T20:44:40Z,2017-02-20T17:24:52Z,2017-02-20T17:24:53Z,MERGED,True,18,9,4,https://github.com/Novakov,Fixed RTOS errors in Time Provider,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/92,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/92,"When external flash is enabled BURTC task tried to invoke time action
before Time Provider was initialized. That caused RTOS assert failures as queue
was not created yet.


This change is","When external flash is enabled BURTC task tried to invoke time action
before Time Provider was initialized. That caused RTOS assert failures as queue
was not created yet.


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,92,2017-02-18T20:44:40Z,2017-02-20T17:24:52Z,2017-02-20T17:24:53Z,MERGED,True,18,9,4,https://github.com/Novakov,Fixed RTOS errors in Time Provider,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/92,https://github.com/mandrek44,2,https://github.com/PW-Sat2/PWSat2OBC/pull/92#issuecomment-280912602,"When external flash is enabled BURTC task tried to invoke time action
before Time Provider was initialized. That caused RTOS assert failures as queue
was not created yet.


This change is","Review status: 0 of 4 files reviewed at latest revision, 1 unresolved discussion.

libs/drivers/burtc/burtc.cpp, line 24 at r1 (raw file):

    BURTC_IntClear(irq);
    BURTC_CompareSet(0, BURTC_CompareGet(0) + Burtc::CompareValue);
    //    LOGF_ISR(LOG_LEVEL_INFO, ""dupa %lX %ld -> %ld"", irq, BURTC_CounterGet(), BURTC_CompareGet(0));

Remove or uncomment

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,92,2017-02-18T20:44:40Z,2017-02-20T17:24:52Z,2017-02-20T17:24:53Z,MERGED,True,18,9,4,https://github.com/Novakov,Fixed RTOS errors in Time Provider,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/92,https://github.com/mandrek44,3,https://github.com/PW-Sat2/PWSat2OBC/pull/92#issuecomment-280913201,"When external flash is enabled BURTC task tried to invoke time action
before Time Provider was initialized. That caused RTOS assert failures as queue
was not created yet.


This change is","Review status: 0 of 4 files reviewed at latest revision, 2 unresolved discussions.

src/main.cpp, line 141 at r2 (raw file):

    obc->fs.MakeDirectory(""/c"");

    if (!obc->timeProvider.Initialize(nullptr, nullptr))

I wonder if it wouldn't be enough to move timeProvider initialization before obc->PostStartInitialization? This way we'd keep the hardware initialization code more cohesive

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,92,2017-02-18T20:44:40Z,2017-02-20T17:24:52Z,2017-02-20T17:24:53Z,MERGED,True,18,9,4,https://github.com/Novakov,Fixed RTOS errors in Time Provider,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/92,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/92#issuecomment-280914050,"When external flash is enabled BURTC task tried to invoke time action
before Time Provider was initialized. That caused RTOS assert failures as queue
was not created yet.


This change is","Review status: 0 of 4 files reviewed at latest revision, 2 unresolved discussions.

libs/drivers/burtc/burtc.cpp, line 24 at r1 (raw file):
Previously, mandrek44 (Mandro) wrote
Remove or uncomment

It was never there


src/main.cpp, line 141 at r2 (raw file):
Previously, mandrek44 (Mandro) wrote
I wonder if it wouldn't be enough to move timeProvider initialization before obc->PostStartInitialization? This way we'd keep the hardware initialization code more cohesive

Timeprovider depends on File system that is initialized in PostStartInitialization ;)
To be honest it would be best to think about initialization procedure as it is messy - part is done in main() some in task directly, something else is delegated to OBC structure.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,92,2017-02-18T20:44:40Z,2017-02-20T17:24:52Z,2017-02-20T17:24:53Z,MERGED,True,18,9,4,https://github.com/Novakov,Fixed RTOS errors in Time Provider,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/92,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/92#issuecomment-280997756,"When external flash is enabled BURTC task tried to invoke time action
before Time Provider was initialized. That caused RTOS assert failures as queue
was not created yet.


This change is","Reviewed 2 of 4 files at r1, 1 of 1 files at r2.
Review status: 3 of 4 files reviewed at latest revision, 2 unresolved discussions, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,92,2017-02-18T20:44:40Z,2017-02-20T17:24:52Z,2017-02-20T17:24:53Z,MERGED,True,18,9,4,https://github.com/Novakov,Fixed RTOS errors in Time Provider,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/92,https://github.com/zaq32,6,https://github.com/PW-Sat2/PWSat2OBC/pull/92#issuecomment-281000352,"When external flash is enabled BURTC task tried to invoke time action
before Time Provider was initialized. That caused RTOS assert failures as queue
was not created yet.


This change is","Review status: 3 of 4 files reviewed at latest revision, 2 unresolved discussions, some commit checks failed.

src/main.cpp, line 141 at r2 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Timeprovider depends on File system that is initialized in PostStartInitialization ;)
To be honest it would be best to think about initialization procedure as it is messy - part is done in main() some in task directly, something else is delegated to OBC structure.

There is definitely something to be said about clean & simple startup routine, plus besides the usual hardware/software initialization we have to put somewhere here the general self/test state assessment routine. For the moment I think this will do, and entire startup procedure will be topic of our next workshop anyway.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,92,2017-02-18T20:44:40Z,2017-02-20T17:24:52Z,2017-02-20T17:24:53Z,MERGED,True,18,9,4,https://github.com/Novakov,Fixed RTOS errors in Time Provider,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/92,https://github.com/zaq32,7,https://github.com/PW-Sat2/PWSat2OBC/pull/92#issuecomment-281000411,"When external flash is enabled BURTC task tried to invoke time action
before Time Provider was initialized. That caused RTOS assert failures as queue
was not created yet.


This change is","Reviewed 1 of 4 files at r1.
Review status: all files reviewed at latest revision, 2 unresolved discussions, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,93,2017-02-19T22:37:19Z,2017-07-24T05:46:30Z,2017-08-11T06:21:52Z,CLOSED,False,2191,6,34,https://github.com/eszczekocki,Ucam ii,26,[],https://github.com/PW-Sat2/PWSat2OBC/pull/93,https://github.com/eszczekocki,1,https://github.com/PW-Sat2/PWSat2OBC/pull/93,"Uart and camera drivers


This change is","Uart and camera drivers


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,93,2017-02-19T22:37:19Z,2017-07-24T05:46:30Z,2017-08-11T06:21:52Z,CLOSED,False,2191,6,34,https://github.com/eszczekocki,Ucam ii,26,[],https://github.com/PW-Sat2/PWSat2OBC/pull/93,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/93#issuecomment-281003520,"Uart and camera drivers


This change is","There is not a single unit/integration test in this PR. No documentation at all.

Reviewed 3 of 22 files at r1, 4 of 26 files at r2, 1 of 11 files at r3.
Review status: 5 of 26 files reviewed at latest revision, 30 unresolved discussions.

libs/CMakeLists.txt.BACKUP.17752.txt, line 1 at r3 (raw file):

add_subdirectory(external)


what's this doing in here?

libs/base/io_map.h, line 1 at r3 (raw file):

#ifndef SRC_IO_MAP_H_

this is old and no longer used method of defining io map that has been since removed why did you bring it back?

libs/camera/camera.cpp, line 22 at r3 (raw file):

}

bool Camera::InitializeJPEGPicture(CameraJPEGResolution resolution) {

inconsistent formatting use clang-format with our settings to fix it.

libs/camera/camera_internal.cpp, line 37 at r3 (raw file):

//uint8_t byte;
TickType_t ticks = timeoutMs < 0 ? portMAX_DELAY : timeoutMs / portTICK_PERIOD_MS;
(void)ticks;
either use it or remove it.


libs/camera/camera_utils.cpp, line 22 at r3 (raw file):

}

CameraCmd Camera::CameraGetCmdType(unsigned char cmd)

use type defined in cstdint header file.

libs/camera/camera_utils.cpp, line 90 at r3 (raw file):

}

CameraCmd Camera::CameraParseDataCmd(uint8_t* cmd, uint32_t length, CameraCmdData* cmdData)

use gsl::span instead of loosely coupled function arguments.

libs/camera/camera_utils.cpp, line 102 at r3 (raw file):

    }

    cmdData->dataLength = (((uint32_t)cmd[9]) | ((uint32_t)cmd[10] << 8) | ((uint32_t)cmd[11] << 16));

use BufferReader instead of manually poking around in memory without any boundary check.

libs/camera/camera_utils.cpp, line 112 at r3 (raw file):

}

CameraCmd Camera::CameraParseAckCmd(uint8_t* cmd, uint32_t length, CameraCmdAck* cmdAck)

use gsl::span instead of loosely coupled function arguments.

libs/camera/camera_utils.cpp, line 126 at r3 (raw file):

    cmdAck->type = CameraGetCmdType(cmd[2]);
    cmdAck->ackCounter = cmd[3];
    cmdAck->packageId = ((uint16_t)cmd[4] | ((uint16_t)cmd[5] << 8)) >> 1;

see above

libs/camera/camera_utils.cpp, line 130 at r3 (raw file):

}

CameraCmd Camera::CameraParseSyncCmd(uint8_t* cmd, uint32_t length)

use gsl::span instead of loosely coupled function arguments.

libs/camera/Include/camera/camera.h, line 8 at r3 (raw file):

namespace devices

inconsistent formatting

libs/camera/Include/camera/camera.h, line 15 at r3 (raw file):

class Camera final {

there is not a shred of documentation in here

libs/camera/Include/camera/camera.h, line 17 at r3 (raw file):

class Camera final {

private :

private members should be defined last

libs/camera/Include/camera/camera.h, line 22 at r3 (raw file):

uint8_t CameraCmdPrefix = 0xAA;
uint8_t CameraCmdLength = 6;
uint8_t CameraRetCmdLength=12;
uint8_t CameraJPEGFormat= 0x07;
if these are supposed to beb constants they should be defined static constexpr


libs/camera/Include/camera/camera.h, line 23 at r3 (raw file):

	uint8_t CameraRetCmdLength=12;
	uint8_t CameraJPEGFormat= 0x07;
	drivers::uart::Uart _uartBus;

camera driver should not be tied directly to uart implementation.

libs/camera/Include/camera/camera.h, line 102 at r3 (raw file):

public :

	bool isInitialized=false;

don't ever use public fields that are not marked as const

libs/camera/Include/camera/camera_types.h, line 4 at r3 (raw file):

#include <FreeRTOS.h>
#include <queue.h>


unused headers
you should not use freertos directly at all it prevents any real attempts to unit test the code.


libs/camera/Include/camera/camera_types.h, line 113 at r3 (raw file):

/*
struct CameraBaudRateDividers_ {
char firstDivider;
char secondDivider;
} cameraBaudRateDividers[14] =
{

Quoted 14 lines of code
>     { 0x1F, 0x2F },
>     { 0x1F, 0x17 },
>     { 0x1F, 0x0B },
>     { 0x1F, 0x05 },
>     { 0x1F, 0x02 },
>     { 0x1F, 0x01 },
>     { 0x1F, 0x00 },
>     { 0x07, 0x02 },
>     { 0x07, 0x01 },
>     { 0x07, 0x00 },
>     { 0x01, 0x01 },
>     { 0x02, 0x00 },
>     { 0x01, 0x00 },
>     { 0x00, 0x00 }

> };
> */
if it is not needed remove it.

libs/drivers/uart/Uart.cpp, line 1 at r3 (raw file):

#include <FreeRTOS.h>

inconsistent formatting in this file.

libs/drivers/uart/Uart.cpp, line 3 at r3 (raw file):

#include <queue.h>
#include <semphr.h>
you should not use freertos directly


libs/drivers/uart/Include/uart/Uart.h, line 1 at r3 (raw file):

#ifndef LIBS_DRIVERS_UART_UART_H_

inconsistent formatting.

platforms/DevBoard/Include/io_map.h, line 31 at r3 (raw file):

    };

    struct UART : public UARTPins<UART>

inconsistent formatting

src/main.cpp, line 49 at r3 (raw file):

OBC Main;
mission::ObcMission Mission(Main.timeProvider, Main.antennaDriver, false);
static uint8_t out[10000];

such static global buffers should not be needed at all

src/main.cpp, line 181 at r3 (raw file):

for(int i =0;i<255;i++){
out[i]=0x00;
}
std::memset


src/obc.h.BACKUP.4132.h, line 1 at r3 (raw file):

#ifndef OBC_H

srsly whats with the backups?

src/obc.h.LOCAL.4132.h, line 1 at r3 (raw file):

#ifndef OBC_H

and another one....

src/obc.h.orig, line 1 at r3 (raw file):

#ifndef OBC_H


....

src/obc.h.REMOTE.4132.h, line 1 at r3 (raw file):

#ifndef OBC_H

again?

src/commands/camera.c, line 17 at r3 (raw file):

#define DATA_LENGTH    160*128*3

static uint8_t data[DATA_LENGTH] = { 0x00 };

such static global buffers should not be needed at all.

src/commands/camera.c, line 17 at r3 (raw file):

#define DATA_LENGTH    160*128*3

static uint8_t data[DATA_LENGTH] = { 0x00 };

why this buffer is needed when there is already one in the main.cpp defined?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,93,2017-02-19T22:37:19Z,2017-07-24T05:46:30Z,2017-08-11T06:21:52Z,CLOSED,False,2191,6,34,https://github.com/eszczekocki,Ucam ii,26,[],https://github.com/PW-Sat2/PWSat2OBC/pull/93,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/93#issuecomment-282486053,"Uart and camera drivers


This change is","Reviewed 1 of 6 files at r4.
Review status: 6 of 26 files reviewed at latest revision, 30 unresolved discussions, some commit checks broke.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,93,2017-02-19T22:37:19Z,2017-07-24T05:46:30Z,2017-08-11T06:21:52Z,CLOSED,False,2191,6,34,https://github.com/eszczekocki,Ucam ii,26,[],https://github.com/PW-Sat2/PWSat2OBC/pull/93,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/93#issuecomment-306057446,"Uart and camera drivers


This change is","Reviewed 1 of 22 files at r1, 4 of 26 files at r2, 2 of 6 files at r4, 12 of 21 files at r5.
Review status: 23 of 34 files reviewed at latest revision, 32 unresolved discussions, some commit checks failed.

libs/drivers/uart/CMakeLists.txt, line 10 at r5 (raw file):

add_library(${NAME} STATIC ${SOURCES})

target_link_libraries(${NAME} freeRTOS)

do not link directly to freertos

libs/drivers/uart/Uart.cpp, line 1 at r5 (raw file):

#include ""uart.h""

an empty file?

libs/external/googletest/googletest-src, line 1 at r5 (raw file):

Subproject commit 0bc5edf613a4bc17c048c31ffdc8fdf79cc3834f


what is the purpose of this?

src/main.cpp, line 42 at r5 (raw file):

#include ""camera/camera.h""
#include ""uart/efm.h""
#include ""commands/commands.h""

unused header

src/main.cpp, line 185 at r5 (raw file):

void UartTask(void* param)

what is the purpose of this task?

src/main.cpp, line 185 at r5 (raw file):

void UartTask(void* param)

inconsistent formatting.

src/obc.h, line 96 at r5 (raw file):

    Terminal terminal;
    /** @brief Camera object. */
    devices::camera::Camera camera;

camera driver should be placed in OBCHardware type

src/commands/camera.cpp, line 15 at r5 (raw file):

#include ""obc.h""

void TakeJPEGPhoto(uint16_t argc, char* argv[])

an empty command?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,94,2017-02-22T02:11:26Z,2017-03-17T06:30:47Z,2017-03-17T06:30:48Z,MERGED,True,2812,24,20,https://github.com/ggajoch,Imtq driver,45,[],https://github.com/PW-Sat2/PWSat2OBC/pull/94,https://github.com/ggajoch,1,https://github.com/PW-Sat2/PWSat2OBC/pull/94,"Low level driver for Imtq.
This driver consists of:

low level imtq commands
higher level usage commands
unit tests for every command (mainly based on rapidcheck)
Imtq python mock
(disabled) integration tests, which will be enabled later when Mock will support I2C write/read.



This change is","Low level driver for Imtq.
This driver consists of:

low level imtq commands
higher level usage commands
unit tests for every command (mainly based on rapidcheck)
Imtq python mock
(disabled) integration tests, which will be enabled later when Mock will support I2C write/read.



This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,94,2017-02-22T02:11:26Z,2017-03-17T06:30:47Z,2017-03-17T06:30:48Z,MERGED,True,2812,24,20,https://github.com/ggajoch,Imtq driver,45,[],https://github.com/PW-Sat2/PWSat2OBC/pull/94,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/94#issuecomment-282485954,"Low level driver for Imtq.
This driver consists of:

low level imtq commands
higher level usage commands
unit tests for every command (mainly based on rapidcheck)
Imtq python mock
(disabled) integration tests, which will be enabled later when Mock will support I2C write/read.



This change is","Reviewed 13 of 20 files at r1.
Review status: 13 of 20 files reviewed at latest revision, 18 unresolved discussions.

libs/adcs/CMakeLists.txt, line 14 at r1 (raw file):

    base
    logger
    i2c

afaict adcs this library does not use nor need access to i2c module

libs/drivers/imtq/imtq.cpp, line 7 at r1 (raw file):

*/
#include ""imtq.h""
#include ""assert.h""

#include 

libs/drivers/imtq/imtq.cpp, line 30 at r1 (raw file):

    namespace imtq
    {
#define FOR_AXIS(var) for (uint8_t var = 0; var < 3; ++var)

use range base for instead of this poorly designed macro

libs/drivers/imtq/imtq.cpp, line 180 at r1 (raw file):

            writer.WriteWordLE(duration.count());

            return this->SendCommand(OpCode::StartActuationCurrent, parameters);

use writer.Capture to get exact array content.

libs/drivers/imtq/imtq.cpp, line 180 at r1 (raw file):

            writer.WriteWordLE(duration.count());

            return this->SendCommand(OpCode::StartActuationCurrent, parameters);

also verify writer status before using the buffer itself

libs/drivers/imtq/imtq.cpp, line 223 at r1 (raw file):

state.mode = static_cast(value[2]);
state.error = Error{value[3]};
state.anyParameterUpdatedSinceStartup = (value[4] == 1);

Reader reader{span<uint8_t, 4>(&value[5], 4)};
use reader to read all parameters


libs/drivers/imtq/imtq.cpp, line 257 at r1 (raw file):

Reader reader{value};
reader.Skip(2);


Quoted 4 lines of code
>             FOR_AXIS(i)
>             {
>                 result[i] = reader.ReadSignedWordLE();
>             }

if there was an error then there is no point to read anything.

libs/drivers/imtq/imtq.cpp, line 265 at r1 (raw file):

        {
            std::array<uint8_t, 8> value;
            bool i2cError = this->DataRequest(OpCode::GetCoilTemperatures, value);

see above

libs/drivers/imtq/imtq.cpp, line 280 at r1 (raw file):

        {
            std::array<uint8_t, 320> value;
            bool i2cError = this->DataRequest(OpCode::GetSelfTest, value);

see above

libs/drivers/imtq/imtq.cpp, line 368 at r1 (raw file):

        }

        bool ImtqDriver::GetHouseKeepingEngineering(HouseKeepingEngineering& result)

this funciton looks exactly the same as the above one. Merge them toghether.

libs/drivers/imtq/imtq.cpp, line 407 at r1 (raw file):

            writer.WriteArray(value);

            span<uint8_t> params{paramsArray.begin(), writer.GetDataLength()};

writer.Capture()

libs/drivers/imtq/imtq.cpp, line 461 at r1 (raw file):

            outputWriter.WriteArray(params);

            span<uint8_t> request{output.begin(), params.size() + 1};

writer.Capture()

libs/drivers/imtq/Include/imtq/imtq.h, line 48 at r1 (raw file):

/**
* @brief Current as returned by imtq. 1 LSB = 1e-4 A
*/
using Current = std::int16_t;


Quoted 4 lines of code
>         /**
>          * @brief Magnetic dipole as returned by imtq. 1 LSB = 1e-4 Am^2
>          */
>         using Dipole = std::int16_t;

How are you going to differentiate Current from Dipole from Temperature? 

libs/drivers/imtq/Include/imtq/imtq.h, line 113 at r1 (raw file):

            /**
             * @brief Structure containing Three-axis magnetometer measurement.

undocumented parameter

unit_tests/CMakeLists.txt, line 11 at r1 (raw file):

os/os.cpp
os/os.hpp
OsMock.hpp
assert.cpp
duplicates


unit_tests/imtq/imtqHighLevelTest.cpp, line 42 at r1 (raw file):

static const uint8_t ImtqAddress = 0x10;

#define FOR_AXIS(var) for(uint8_t var = 0; var < 3; ++var)

use range base for instead of this poorly designed macro

unit_tests/imtq/imtqTest.cpp, line 38 at r1 (raw file):

static const uint8_t ImtqAddress = 0x10;

#define FOR_AXIS(var) for (uint8_t var = 0; var < 3; ++var)

use range base for instead of this poorly designed macro

unit_tests/imtq/imtqTest.cpp, line 40 at r1 (raw file):

#define FOR_AXIS(var) for (uint8_t var = 0; var < 3; ++var)

class ImtqTest : public testing::Test

split this tests in this fixture into smaller ones that test only once case at a time

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,94,2017-02-22T02:11:26Z,2017-03-17T06:30:47Z,2017-03-17T06:30:48Z,MERGED,True,2812,24,20,https://github.com/ggajoch,Imtq driver,45,[],https://github.com/PW-Sat2/PWSat2OBC/pull/94,https://github.com/ggajoch,3,https://github.com/PW-Sat2/PWSat2OBC/pull/94#issuecomment-282491856,"Low level driver for Imtq.
This driver consists of:

low level imtq commands
higher level usage commands
unit tests for every command (mainly based on rapidcheck)
Imtq python mock
(disabled) integration tests, which will be enabled later when Mock will support I2C write/read.



This change is","Review status: 13 of 20 files reviewed at latest revision, 18 unresolved discussions.

libs/drivers/imtq/imtq.cpp, line 30 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
use range base for instead of this poorly designed macro

we've discussed it like 3 times before... but fine, I'll change it

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,94,2017-02-22T02:11:26Z,2017-03-17T06:30:47Z,2017-03-17T06:30:48Z,MERGED,True,2812,24,20,https://github.com/ggajoch,Imtq driver,45,[],https://github.com/PW-Sat2/PWSat2OBC/pull/94,https://github.com/ggajoch,4,https://github.com/PW-Sat2/PWSat2OBC/pull/94#issuecomment-282493723,"Low level driver for Imtq.
This driver consists of:

low level imtq commands
higher level usage commands
unit tests for every command (mainly based on rapidcheck)
Imtq python mock
(disabled) integration tests, which will be enabled later when Mock will support I2C write/read.



This change is","Review status: 11 of 20 files reviewed at latest revision, 18 unresolved discussions.

libs/adcs/CMakeLists.txt, line 14 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
afaict adcs this library does not use nor need access to i2c module

done

libs/drivers/imtq/imtq.cpp, line 7 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
#include 

done

libs/drivers/imtq/imtq.cpp, line 30 at r1 (raw file):
Previously, ggajoch (Grzegorz Gajoch) wrote
we've discussed it like 3 times before... but fine, I'll change it

done

libs/drivers/imtq/imtq.cpp, line 223 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote

state.mode = static_cast(value[2]);
state.error = Error{value[3]};
state.anyParameterUpdatedSinceStartup = (value[4] == 1);

Reader reader{span<uint8_t, 4>(&value[5], 4)};
use reader to read all parameters


done

unit_tests/CMakeLists.txt, line 11 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote

os/os.cpp
os/os.hpp
OsMock.hpp
assert.cpp
duplicates


done

unit_tests/imtq/imtqHighLevelTest.cpp, line 42 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
use range base for instead of this poorly designed macro

done

unit_tests/imtq/imtqTest.cpp, line 38 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
use range base for instead of this poorly designed macro

done

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,94,2017-02-22T02:11:26Z,2017-03-17T06:30:47Z,2017-03-17T06:30:48Z,MERGED,True,2812,24,20,https://github.com/ggajoch,Imtq driver,45,[],https://github.com/PW-Sat2/PWSat2OBC/pull/94,https://github.com/ggajoch,5,https://github.com/PW-Sat2/PWSat2OBC/pull/94#issuecomment-282494883,"Low level driver for Imtq.
This driver consists of:

low level imtq commands
higher level usage commands
unit tests for every command (mainly based on rapidcheck)
Imtq python mock
(disabled) integration tests, which will be enabled later when Mock will support I2C write/read.



This change is","Review status: 11 of 20 files reviewed at latest revision, 11 unresolved discussions.

libs/drivers/imtq/imtq.cpp, line 368 at r1 (raw file):

GetHouseKeepingEngineering
done


Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,94,2017-02-22T02:11:26Z,2017-03-17T06:30:47Z,2017-03-17T06:30:48Z,MERGED,True,2812,24,20,https://github.com/ggajoch,Imtq driver,45,[],https://github.com/PW-Sat2/PWSat2OBC/pull/94,https://github.com/ggajoch,6,https://github.com/PW-Sat2/PWSat2OBC/pull/94#issuecomment-282495364,"Low level driver for Imtq.
This driver consists of:

low level imtq commands
higher level usage commands
unit tests for every command (mainly based on rapidcheck)
Imtq python mock
(disabled) integration tests, which will be enabled later when Mock will support I2C write/read.



This change is","Review status: 11 of 20 files reviewed at latest revision, 10 unresolved discussions.

libs/drivers/imtq/imtq.cpp, line 180 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
use writer.Capture to get exact array content.

done

libs/drivers/imtq/imtq.cpp, line 407 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
writer.Capture()

Done.

libs/drivers/imtq/imtq.cpp, line 461 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
writer.Capture()

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,94,2017-02-22T02:11:26Z,2017-03-17T06:30:47Z,2017-03-17T06:30:48Z,MERGED,True,2812,24,20,https://github.com/ggajoch,Imtq driver,45,[],https://github.com/PW-Sat2/PWSat2OBC/pull/94,https://github.com/ggajoch,7,https://github.com/PW-Sat2/PWSat2OBC/pull/94#issuecomment-282500737,"Low level driver for Imtq.
This driver consists of:

low level imtq commands
higher level usage commands
unit tests for every command (mainly based on rapidcheck)
Imtq python mock
(disabled) integration tests, which will be enabled later when Mock will support I2C write/read.



This change is","Review status: 11 of 20 files reviewed at latest revision, 10 unresolved discussions.

libs/drivers/imtq/imtq.cpp, line 257 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote

Reader reader{value};
reader.Skip(2);

FOR_AXIS(i)
{
result[i] = reader.ReadSignedWordLE();
}
if there was an error then there is no point to read anything.


Is this a problem? Having separate if for returning false won't simplify the code, neither will speed up anything.

libs/drivers/imtq/Include/imtq/imtq.h, line 48 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote

/**
* @brief Current as returned by imtq. 1 LSB = 1e-4 A
/
using Current = std::int16_t;

/*
* @brief Magnetic dipole as returned by imtq. 1 LSB = 1e-4 Am^2
*/
using Dipole = std::int16_t;
How are you going to differentiate Current from Dipole from Temperature?


By using correct function, not by type. It will cause too much bloat have separate type defined for every measurement. Fortunately this kind of error is very simple to detect even in case of any bug.

libs/drivers/imtq/Include/imtq/imtq.h, line 113 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
undocumented parameter

Done.

unit_tests/imtq/imtqTest.cpp, line 40 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
split this tests in this fixture into smaller ones that test only once case at a time

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,94,2017-02-22T02:11:26Z,2017-03-17T06:30:47Z,2017-03-17T06:30:48Z,MERGED,True,2812,24,20,https://github.com/ggajoch,Imtq driver,45,[],https://github.com/PW-Sat2/PWSat2OBC/pull/94,https://github.com/ggajoch,8,https://github.com/PW-Sat2/PWSat2OBC/pull/94#issuecomment-282503842,"Low level driver for Imtq.
This driver consists of:

low level imtq commands
higher level usage commands
unit tests for every command (mainly based on rapidcheck)
Imtq python mock
(disabled) integration tests, which will be enabled later when Mock will support I2C write/read.



This change is","Review status: 11 of 20 files reviewed at latest revision, 10 unresolved discussions.

libs/drivers/imtq/imtq.cpp, line 180 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
also verify writer status before using the buffer itself

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,94,2017-02-22T02:11:26Z,2017-03-17T06:30:47Z,2017-03-17T06:30:48Z,MERGED,True,2812,24,20,https://github.com/ggajoch,Imtq driver,45,[],https://github.com/PW-Sat2/PWSat2OBC/pull/94,https://github.com/mandrek44,9,https://github.com/PW-Sat2/PWSat2OBC/pull/94#issuecomment-285280825,"Low level driver for Imtq.
This driver consists of:

low level imtq commands
higher level usage commands
unit tests for every command (mainly based on rapidcheck)
Imtq python mock
(disabled) integration tests, which will be enabled later when Mock will support I2C write/read.



This change is",[Driver] Magnetotorki -> i2c,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,94,2017-02-22T02:11:26Z,2017-03-17T06:30:47Z,2017-03-17T06:30:48Z,MERGED,True,2812,24,20,https://github.com/ggajoch,Imtq driver,45,[],https://github.com/PW-Sat2/PWSat2OBC/pull/94,https://github.com/zaq32,10,https://github.com/PW-Sat2/PWSat2OBC/pull/94#issuecomment-285427052,"Low level driver for Imtq.
This driver consists of:

low level imtq commands
higher level usage commands
unit tests for every command (mainly based on rapidcheck)
Imtq python mock
(disabled) integration tests, which will be enabled later when Mock will support I2C write/read.



This change is","Reviewed 4 of 20 files at r1, 2 of 5 files at r2, 1 of 3 files at r3.
Review status: 18 of 20 files reviewed at latest revision, 4 unresolved discussions.

libs/drivers/imtq/imtq.cpp, line 257 at r1 (raw file):
Previously, ggajoch (Grzegorz Gajoch) wrote
Is this a problem? Having separate if for returning false won't simplify the code, neither will speed up anything.

reading an uninitialized buffer is a problem

libs/drivers/imtq/Include/imtq/imtq.h, line 113 at r1 (raw file):
Previously, ggajoch (Grzegorz Gajoch) wrote
Done.

is it?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,94,2017-02-22T02:11:26Z,2017-03-17T06:30:47Z,2017-03-17T06:30:48Z,MERGED,True,2812,24,20,https://github.com/ggajoch,Imtq driver,45,[],https://github.com/PW-Sat2/PWSat2OBC/pull/94,https://github.com/zaq32,11,https://github.com/PW-Sat2/PWSat2OBC/pull/94#issuecomment-285427343,"Low level driver for Imtq.
This driver consists of:

low level imtq commands
higher level usage commands
unit tests for every command (mainly based on rapidcheck)
Imtq python mock
(disabled) integration tests, which will be enabled later when Mock will support I2C write/read.



This change is","Reviewed 2 of 3 files at r3.
Review status: all files reviewed at latest revision, 4 unresolved discussions.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,94,2017-02-22T02:11:26Z,2017-03-17T06:30:47Z,2017-03-17T06:30:48Z,MERGED,True,2812,24,20,https://github.com/ggajoch,Imtq driver,45,[],https://github.com/PW-Sat2/PWSat2OBC/pull/94,https://github.com/ggajoch,12,https://github.com/PW-Sat2/PWSat2OBC/pull/94#issuecomment-285514665,"Low level driver for Imtq.
This driver consists of:

low level imtq commands
higher level usage commands
unit tests for every command (mainly based on rapidcheck)
Imtq python mock
(disabled) integration tests, which will be enabled later when Mock will support I2C write/read.



This change is","Review status: 19 of 20 files reviewed at latest revision, 4 unresolved discussions, some commit checks failed.

libs/drivers/imtq/imtq.cpp, line 257 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
reading an uninitialized buffer is a problem

Where this problem exists? There is no undefined behaviour.
The values returned to the invoking function are same invalid as if the function was finishing earlier. False is returned meaning that those values are 'undefined'.
// that was like that before, but having in mind recommendations from MISRA-Cpp I've removed early return. Just want to ask why one solution is better than another...

libs/drivers/imtq/Include/imtq/imtq.h, line 113 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
is it?

Now yes... Hope this is ok, I didn't quite catch the comment...

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,94,2017-02-22T02:11:26Z,2017-03-17T06:30:47Z,2017-03-17T06:30:48Z,MERGED,True,2812,24,20,https://github.com/ggajoch,Imtq driver,45,[],https://github.com/PW-Sat2/PWSat2OBC/pull/94,https://github.com/zaq32,13,https://github.com/PW-Sat2/PWSat2OBC/pull/94#issuecomment-287146656,"Low level driver for Imtq.
This driver consists of:

low level imtq commands
higher level usage commands
unit tests for every command (mainly based on rapidcheck)
Imtq python mock
(disabled) integration tests, which will be enabled later when Mock will support I2C write/read.



This change is","Reviewed 1 of 1 files at r4.
Review status: all files reviewed at latest revision, 8 unresolved discussions, some commit checks failed.

libs/drivers/imtq/imtq.cpp, line 257 at r1 (raw file):
Previously, ggajoch (Grzegorz Gajoch) wrote
Where this problem exists? There is no undefined behaviour.
The values returned to the invoking function are same invalid as if the function was finishing earlier. False is returned meaning that those values are 'undefined'.
// that was like that before, but having in mind recommendations from MISRA-Cpp I've removed early return. Just want to ask why one solution is better than another...

the array itself remains uninitialized.

libs/drivers/imtq/imtq.cpp, line 428 at r4 (raw file):

        {
            constexpr int maximumWriteLength = 11;
            assert(params.size() <= 10);

what about release build?

libs/drivers/imtq/imtq.cpp, line 435 at r4 (raw file):

            outputWriter.WriteByte(opcodeByte);
            outputWriter.WriteArray(params);
            assert(outputWriter.Status());

what about release build?

libs/drivers/imtq/imtq.cpp, line 443 at r4 (raw file):

            auto i2cstatusRead = i2cbus.Read(I2Cadress, response);

            this->LastStatus = response[1];

reading uninitialized array

libs/drivers/imtq/imtq.cpp, line 443 at r4 (raw file):

            auto i2cstatusRead = i2cbus.Read(I2Cadress, response);

            this->LastStatus = response[1];

possible buffer overflow

libs/drivers/imtq/imtq.cpp, line 456 at r4 (raw file):

                return false;
            }
            if (opcodeByte != response[0])

possible buffer overflow

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,94,2017-02-22T02:11:26Z,2017-03-17T06:30:47Z,2017-03-17T06:30:48Z,MERGED,True,2812,24,20,https://github.com/ggajoch,Imtq driver,45,[],https://github.com/PW-Sat2/PWSat2OBC/pull/94,https://github.com/ggajoch,14,https://github.com/PW-Sat2/PWSat2OBC/pull/94#issuecomment-287225592,"Low level driver for Imtq.
This driver consists of:

low level imtq commands
higher level usage commands
unit tests for every command (mainly based on rapidcheck)
Imtq python mock
(disabled) integration tests, which will be enabled later when Mock will support I2C write/read.



This change is","Review status: 19 of 20 files reviewed at latest revision, 8 unresolved discussions, some commit checks failed.

libs/drivers/imtq/imtq.cpp, line 257 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
the array itself remains uninitialized.

donre. Now when error occurs output value will not be affected.

libs/drivers/imtq/imtq.cpp, line 265 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
see above

Done.

libs/drivers/imtq/imtq.cpp, line 280 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
see above

Done.

libs/drivers/imtq/imtq.cpp, line 428 at r4 (raw file):
Previously, zaq32 (ukasz ak) wrote
what about release build?

Done. Removed assert(outputWriter.Status()); because it it redundant.

libs/drivers/imtq/imtq.cpp, line 435 at r4 (raw file):
Previously, zaq32 (ukasz ak) wrote
what about release build?

Done.

libs/drivers/imtq/imtq.cpp, line 443 at r4 (raw file):
Previously, zaq32 (ukasz ak) wrote
reading uninitialized array

Done.

libs/drivers/imtq/imtq.cpp, line 443 at r4 (raw file):
Previously, zaq32 (ukasz ak) wrote
possible buffer overflow

Done, added asserting array size.

libs/drivers/imtq/imtq.cpp, line 456 at r4 (raw file):
Previously, zaq32 (ukasz ak) wrote
possible buffer overflow

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,94,2017-02-22T02:11:26Z,2017-03-17T06:30:47Z,2017-03-17T06:30:48Z,MERGED,True,2812,24,20,https://github.com/ggajoch,Imtq driver,45,[],https://github.com/PW-Sat2/PWSat2OBC/pull/94,https://github.com/zaq32,15,https://github.com/PW-Sat2/PWSat2OBC/pull/94#issuecomment-287277888,"Low level driver for Imtq.
This driver consists of:

low level imtq commands
higher level usage commands
unit tests for every command (mainly based on rapidcheck)
Imtq python mock
(disabled) integration tests, which will be enabled later when Mock will support I2C write/read.



This change is","Reviewed 12 of 12 files at r5.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,95,2017-02-22T16:39:46Z,2017-03-09T18:20:24Z,2017-03-09T18:20:25Z,MERGED,True,767,130,48,https://github.com/Novakov,ADCS experiment structure,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/95,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/95,"First version of detumbling experiment. Mostly structure, no real experiment logic is implemented.


This change is","First version of detumbling experiment. Mostly structure, no real experiment logic is implemented.


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,95,2017-02-22T16:39:46Z,2017-03-09T18:20:24Z,2017-03-09T18:20:25Z,MERGED,True,767,130,48,https://github.com/Novakov,ADCS experiment structure,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/95,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/95#issuecomment-282484386,"First version of detumbling experiment. Mostly structure, no real experiment logic is implemented.


This change is","Reviewed 45 of 49 files at r1.
Review status: 42 of 46 files reviewed at latest revision, 1 unresolved discussion.

libs/experiments/adcs/detumbling.cpp, line 56 at r1 (raw file):

            if (!start.HasValue)
            {
                return StartResult::Failure;

in case of failure revert adcs state.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,95,2017-02-22T16:39:46Z,2017-03-09T18:20:24Z,2017-03-09T18:20:25Z,MERGED,True,767,130,48,https://github.com/Novakov,ADCS experiment structure,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/95,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/95#issuecomment-285404684,"First version of detumbling experiment. Mostly structure, no real experiment logic is implemented.


This change is","Reviewed 4 of 49 files at r1.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,95,2017-02-22T16:39:46Z,2017-03-09T18:20:24Z,2017-03-09T18:20:25Z,MERGED,True,767,130,48,https://github.com/Novakov,ADCS experiment structure,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/95,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/95#issuecomment-285428648,"First version of detumbling experiment. Mostly structure, no real experiment logic is implemented.


This change is","Reviewed 3 of 4 files at r2.
Review status: 47 of 48 files reviewed at latest revision, 1 unresolved discussion.

libs/base/Include/utils.h, line 335 at r2 (raw file):

template <typename Action>
OnLeaveAction<Action>::OnLeaveAction(OnLeaveAction<Action>&& other) noexcept : _action(other._action), _skip(other._skip)

std::move

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,95,2017-02-22T16:39:46Z,2017-03-09T18:20:24Z,2017-03-09T18:20:25Z,MERGED,True,767,130,48,https://github.com/Novakov,ADCS experiment structure,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/95,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/95#issuecomment-285428804,"First version of detumbling experiment. Mostly structure, no real experiment logic is implemented.


This change is","Reviewed 1 of 4 files at r2.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,95,2017-02-22T16:39:46Z,2017-03-09T18:20:24Z,2017-03-09T18:20:25Z,MERGED,True,767,130,48,https://github.com/Novakov,ADCS experiment structure,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/95,https://github.com/zaq32,6,https://github.com/PW-Sat2/PWSat2OBC/pull/95#issuecomment-285430011,"First version of detumbling experiment. Mostly structure, no real experiment logic is implemented.


This change is","Reviewed 1 of 1 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,96,2017-02-26T21:54:23Z,2017-03-08T01:19:37Z,2017-03-22T20:32:21Z,MERGED,True,35,25,2,https://github.com/PetrerW,Changes on detumbling files,9,[],https://github.com/PW-Sat2/PWSat2OBC/pull/96,https://github.com/PetrerW,1,https://github.com/PW-Sat2/PWSat2OBC/pull/96,"deleted isInitialised flag. Added description and units to members of DetumblingParameters structure.


This change is","deleted isInitialised flag. Added description and units to members of DetumblingParameters structure.


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,96,2017-02-26T21:54:23Z,2017-03-08T01:19:37Z,2017-03-22T20:32:21Z,MERGED,True,35,25,2,https://github.com/PetrerW,Changes on detumbling files,9,[],https://github.com/PW-Sat2/PWSat2OBC/pull/96,https://github.com/ggajoch,2,https://github.com/PW-Sat2/PWSat2OBC/pull/96#issuecomment-282687439,"deleted isInitialised flag. Added description and units to members of DetumblingParameters structure.


This change is","Review status: 0 of 2 files reviewed at latest revision, 3 unresolved discussions, some commit checks failed.

libs/adcs_experiments/detumbling.cpp, line 34 at r2 (raw file):

 %
 %   globals       :
 %       DetumblingConst.dt       - [1x1], iteration time step, [s]

Isn't it called DetumblingParameters right now?

libs/adcs_experiments/Include/adcs_experiments/detumbling.hpp, line 56 at r2 (raw file):

        /** @brief (Draft)   */
        struct DetumblingParameters //Parameters changeable by a telecommand from Earth. Those are constants used in detumbling.

place this comment in doxygen structure

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,96,2017-02-26T21:54:23Z,2017-03-08T01:19:37Z,2017-03-22T20:32:21Z,MERGED,True,35,25,2,https://github.com/PetrerW,Changes on detumbling files,9,[],https://github.com/PW-Sat2/PWSat2OBC/pull/96,https://github.com/PetrerW,3,https://github.com/PW-Sat2/PWSat2OBC/pull/96#issuecomment-282708838,"deleted isInitialised flag. Added description and units to members of DetumblingParameters structure.


This change is","%
%   globals       :
%       DetumblingConst.dt       - [1x1], iteration time step, [s]


Isn't it called DetumblingParameters right now?

@ggajoch Yes, 'DetumblingParameters' stands for 'DetumblingConst', but important is, that members of 'DetumblingParameters' are changeable by a telecommand from earth and members of 'DetumblingState' are not.",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,97,2017-02-27T14:14:41Z,2017-03-20T19:04:55Z,2017-03-20T19:04:58Z,MERGED,True,738,41,37,https://github.com/zaq32,Mission task for beacon management,10,[],https://github.com/PW-Sat2/PWSat2OBC/pull/97,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/97,"Setting beacon once the transmitting antennas have been deployed & updating the beacon once every 5 minutes since then. For the moment beacon content is single field that contains current mission time.
Add some infrastructure for saving fields as downlink frame payload.


This change is","Setting beacon once the transmitting antennas have been deployed & updating the beacon once every 5 minutes since then. For the moment beacon content is single field that contains current mission time.
Add some infrastructure for saving fields as downlink frame payload.


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,97,2017-02-27T14:14:41Z,2017-03-20T19:04:55Z,2017-03-20T19:04:58Z,MERGED,True,738,41,37,https://github.com/zaq32,Mission task for beacon management,10,[],https://github.com/PW-Sat2/PWSat2OBC/pull/97,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/97#issuecomment-282802281,"Setting beacon once the transmitting antennas have been deployed & updating the beacon once every 5 minutes since then. For the moment beacon content is single field that contains current mission time.
Add some infrastructure for saving fields as downlink frame payload.


This change is","Reviewed 27 of 27 files at r1.
Review status: all files reviewed at latest revision, 6 unresolved discussions.

libs/mission/beacon/BeaconUpdate.cpp, line 43 at r1 (raw file):

        auto This = static_cast<BeaconUpdate*>(param);
        return state.Antenna.Deployed && state.AreTransmittingAntennasDeployed() &&
            ((state.Time - This->lastBeaconUpdate) > BeaconUpdateInterval);

I think it will be more readable if each condition will be separate, like:
if(!state.Antenna.Deployed) return false;
if(..) return false;

return true;

But that just my opinion ;)

libs/state/Include/state/struct.h, line 62 at r1 (raw file):

inline bool SystemState::AreTransmittingAntennasDeployed() const
{
    // TODO verify antennas' ids

Add trello task for it and link it here

libs/telecommunication/include/telecommunication/FrameContentWriter.hpp, line 120 at r1 (raw file):

            bool WriteFieldId(FieldId fieldId);

            Writer& writer;

Missing documentation

unit_tests/MissionPlan/beacon/BeaconUpdateTest.cpp, line 78 at r1 (raw file):

    action.actionProc(state, action.param);
    EXPECT_THAT(action.condition(state, action.param), Eq(true));
}

One test is missing: mission time = 60min && antenna deployed = false

unit_tests/mock/BeaconControllerMock.hpp, line 11 at r1 (raw file):

struct BeaconControllerMock : public devices::comm::IBeaconController
{
    MOCK_METHOD1(SetBeacon, bool(const devices::comm::Beacon& beacon));

Define default ctor explicit - to speed up compilation

unit_tests/telecommunication/FrameContentsWriterTest.cpp, line 17 at r1 (raw file):

{
    ASSERT_TRUE(std::equal(current, current + currentLength, expected, expected + expectedLength));
}

You can use Writer::Capture() and Eq matcher.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,97,2017-02-27T14:14:41Z,2017-03-20T19:04:55Z,2017-03-20T19:04:58Z,MERGED,True,738,41,37,https://github.com/zaq32,Mission task for beacon management,10,[],https://github.com/PW-Sat2/PWSat2OBC/pull/97,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/97#issuecomment-282818670,"Setting beacon once the transmitting antennas have been deployed & updating the beacon once every 5 minutes since then. For the moment beacon content is single field that contains current mission time.
Add some infrastructure for saving fields as downlink frame payload.


This change is","Review status: 21 of 28 files reviewed at latest revision, 6 unresolved discussions.

libs/mission/beacon/BeaconUpdate.cpp, line 43 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
I think it will be more readable if each condition will be separate, like:
if(!state.Antenna.Deployed) return false;
if(..) return false;

return true;

But that just my opinion ;)

How about like this?

libs/telecommunication/include/telecommunication/FrameContentWriter.hpp, line 120 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Missing documentation

Fixed

unit_tests/MissionPlan/beacon/BeaconUpdateTest.cpp, line 78 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
One test is missing: mission time = 60min && antenna deployed = false

Fixed

unit_tests/telecommunication/FrameContentsWriterTest.cpp, line 17 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
You can use Writer::Capture() and Eq matcher.

Fixed

unit_tests/mock/BeaconControllerMock.hpp, line 11 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Define default ctor explicit - to speed up compilation

Fixed

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,97,2017-02-27T14:14:41Z,2017-03-20T19:04:55Z,2017-03-20T19:04:58Z,MERGED,True,738,41,37,https://github.com/zaq32,Mission task for beacon management,10,[],https://github.com/PW-Sat2/PWSat2OBC/pull/97,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/97#issuecomment-282820937,"Setting beacon once the transmitting antennas have been deployed & updating the beacon once every 5 minutes since then. For the moment beacon content is single field that contains current mission time.
Add some infrastructure for saving fields as downlink frame payload.


This change is","Reviewed 8 of 8 files at r2.
Review status: all files reviewed at latest revision, 2 unresolved discussions.

a discussion (no related file):
Add integration test for happy path

libs/mission/beacon/BeaconUpdate.cpp, line 43 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
How about like this?

Will do :)

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,97,2017-02-27T14:14:41Z,2017-03-20T19:04:55Z,2017-03-20T19:04:58Z,MERGED,True,738,41,37,https://github.com/zaq32,Mission task for beacon management,10,[],https://github.com/PW-Sat2/PWSat2OBC/pull/97,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/97#issuecomment-282821365,"Setting beacon once the transmitting antennas have been deployed & updating the beacon once every 5 minutes since then. For the moment beacon content is single field that contains current mission time.
Add some infrastructure for saving fields as downlink frame payload.


This change is","Review status: all files reviewed at latest revision, 3 unresolved discussions.

libs/state/Include/state/struct.h, line 62 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Add trello task for it and link it here

Done: https://trello.com/c/lxKYUriB/126-verify-ids-of-antennas-responsible-for-data-transmission

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,97,2017-02-27T14:14:41Z,2017-03-20T19:04:55Z,2017-03-20T19:04:58Z,MERGED,True,738,41,37,https://github.com/zaq32,Mission task for beacon management,10,[],https://github.com/PW-Sat2/PWSat2OBC/pull/97,https://github.com/mandrek44,6,https://github.com/PW-Sat2/PWSat2OBC/pull/97#issuecomment-282849340,"Setting beacon once the transmitting antennas have been deployed & updating the beacon once every 5 minutes since then. For the moment beacon content is single field that contains current mission time.
Add some infrastructure for saving fields as downlink frame payload.


This change is","Review status: 28 of 30 files reviewed at latest revision, 5 unresolved discussions, some commit checks failed.

libs/mission/beacon/BeaconUpdate.cpp, line 18 at r3 (raw file):

     * @brief Default beacon send interval.
     */
    static constexpr std::uint16_t BeaconInterval = 30;

Could we use std::chrono here?

libs/telecommunication/include/telecommunication/FrameContentWriter.hpp, line 170 at r3 (raw file):

        inline bool FrameContentWriter::WriteFieldId(FieldId fieldId)
        {
            return writer.WriteByte(num(fieldId));

Do we need to return this value if it's ignored everywhere? (for readability sake)

unit_tests/mock/BeaconControllerMock.hpp, line 0 at r2 (raw file):
Empty file?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,97,2017-02-27T14:14:41Z,2017-03-20T19:04:55Z,2017-03-20T19:04:58Z,MERGED,True,738,41,37,https://github.com/zaq32,Mission task for beacon management,10,[],https://github.com/PW-Sat2/PWSat2OBC/pull/97,https://github.com/zaq32,7,https://github.com/PW-Sat2/PWSat2OBC/pull/97#issuecomment-282855695,"Setting beacon once the transmitting antennas have been deployed & updating the beacon once every 5 minutes since then. For the moment beacon content is single field that contains current mission time.
Add some infrastructure for saving fields as downlink frame payload.


This change is","Review status: 28 of 30 files reviewed at latest revision, 5 unresolved discussions, some commit checks failed.

libs/telecommunication/include/telecommunication/FrameContentWriter.hpp, line 170 at r3 (raw file):
Previously, mandrek44 (Mandro) wrote
Do we need to return this value if it's ignored everywhere? (for readability sake)

Maybe I have tried to retain interface from original Writer.

unit_tests/mock/BeaconControllerMock.hpp, line  at r2 (raw file):
Previously, mandrek44 (Mandro) wrote
Empty file?

No it was added and subsequently removed

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,97,2017-02-27T14:14:41Z,2017-03-20T19:04:55Z,2017-03-20T19:04:58Z,MERGED,True,738,41,37,https://github.com/zaq32,Mission task for beacon management,10,[],https://github.com/PW-Sat2/PWSat2OBC/pull/97,https://github.com/Novakov,8,https://github.com/PW-Sat2/PWSat2OBC/pull/97#issuecomment-285280739,"Setting beacon once the transmitting antennas have been deployed & updating the beacon once every 5 minutes since then. For the moment beacon content is single field that contains current mission time.
Add some infrastructure for saving fields as downlink frame payload.


This change is","Reviewed 2 of 2 files at r3.
Review status: all files reviewed at latest revision, 4 unresolved discussions, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,97,2017-02-27T14:14:41Z,2017-03-20T19:04:55Z,2017-03-20T19:04:58Z,MERGED,True,738,41,37,https://github.com/zaq32,Mission task for beacon management,10,[],https://github.com/PW-Sat2/PWSat2OBC/pull/97,https://github.com/Novakov,9,https://github.com/PW-Sat2/PWSat2OBC/pull/97#issuecomment-287526133,"Setting beacon once the transmitting antennas have been deployed & updating the beacon once every 5 minutes since then. For the moment beacon content is single field that contains current mission time.
Add some infrastructure for saving fields as downlink frame payload.


This change is","Reviewed 12 of 12 files at r4.
Review status: all files reviewed at latest revision, 4 unresolved discussions.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,97,2017-02-27T14:14:41Z,2017-03-20T19:04:55Z,2017-03-20T19:04:58Z,MERGED,True,738,41,37,https://github.com/zaq32,Mission task for beacon management,10,[],https://github.com/PW-Sat2/PWSat2OBC/pull/97,https://github.com/zaq32,10,https://github.com/PW-Sat2/PWSat2OBC/pull/97#issuecomment-287553378,"Setting beacon once the transmitting antennas have been deployed & updating the beacon once every 5 minutes since then. For the moment beacon content is single field that contains current mission time.
Add some infrastructure for saving fields as downlink frame payload.


This change is","Review status: all files reviewed at latest revision, 4 unresolved discussions.

a discussion (no related file):
Previously, Novakov (Maciej T. Nowak) wrote
Add integration test for happy path

done

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,97,2017-02-27T14:14:41Z,2017-03-20T19:04:55Z,2017-03-20T19:04:58Z,MERGED,True,738,41,37,https://github.com/zaq32,Mission task for beacon management,10,[],https://github.com/PW-Sat2/PWSat2OBC/pull/97,https://github.com/zaq32,11,https://github.com/PW-Sat2/PWSat2OBC/pull/97#issuecomment-287688891,"Setting beacon once the transmitting antennas have been deployed & updating the beacon once every 5 minutes since then. For the moment beacon content is single field that contains current mission time.
Add some infrastructure for saving fields as downlink frame payload.


This change is","Review status: 31 of 37 files reviewed at latest revision, 4 unresolved discussions.

libs/mission/beacon/BeaconUpdate.cpp, line 18 at r3 (raw file):
Previously, mandrek44 (Mandro) wrote
Could we use std::chrono here?

Done

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,97,2017-02-27T14:14:41Z,2017-03-20T19:04:55Z,2017-03-20T19:04:58Z,MERGED,True,738,41,37,https://github.com/zaq32,Mission task for beacon management,10,[],https://github.com/PW-Sat2/PWSat2OBC/pull/97,https://github.com/Novakov,12,https://github.com/PW-Sat2/PWSat2OBC/pull/97#issuecomment-287691516,"Setting beacon once the transmitting antennas have been deployed & updating the beacon once every 5 minutes since then. For the moment beacon content is single field that contains current mission time.
Add some infrastructure for saving fields as downlink frame payload.


This change is","Reviewed 6 of 6 files at r5.
Review status: all files reviewed at latest revision, 3 unresolved discussions.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,98,2017-03-02T12:45:08Z,2017-03-22T19:51:54Z,2017-03-22T19:51:55Z,MERGED,True,636,17,25,https://github.com/Novakov,RFC - Error counters,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/98,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/98,"Draft for error counting mechanism.
ToDo (in this pull request or another):

Storing current configuration in FRAM
Telecommands for changing config
Publishing error counts to global state (for telemetry)
Integration with all devices



This change is","Draft for error counting mechanism.
ToDo (in this pull request or another):

Storing current configuration in FRAM
Telecommands for changing config
Publishing error counts to global state (for telemetry)
Integration with all devices



This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,98,2017-03-02T12:45:08Z,2017-03-22T19:51:54Z,2017-03-22T19:51:55Z,MERGED,True,636,17,25,https://github.com/Novakov,RFC - Error counters,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/98,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/98#issuecomment-285412496,"Draft for error counting mechanism.
ToDo (in this pull request or another):

Storing current configuration in FRAM
Telecommands for changing config
Publishing error counts to global state (for telemetry)
Integration with all devices



This change is","Reviewed 22 of 24 files at r1.
Review status: 22 of 24 files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,98,2017-03-02T12:45:08Z,2017-03-22T19:51:54Z,2017-03-22T19:51:55Z,MERGED,True,636,17,25,https://github.com/Novakov,RFC - Error counters,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/98,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/98#issuecomment-287151982,"Draft for error counting mechanism.
ToDo (in this pull request or another):

Storing current configuration in FRAM
Telecommands for changing config
Publishing error counts to global state (for telemetry)
Integration with all devices



This change is","Reviewed 2 of 24 files at r1.
Review status: all files reviewed at latest revision, 14 unresolved discussions, some commit checks failed.

libs/drivers/comm/comm.cpp, line 122 at r1 (raw file):

bool CommObject::Reset()
{
    return this->SendCommand(Address::Receiver, num(ReceiverCommand::HardReset)) >> this->_error;

if we are to adopt device error counting then every communication transaction should affect the device's counter.

libs/error_counter/error_counter.cpp, line 7 at r1 (raw file):

    CounterValue ErrorCounting::Current(Device device) const
    {
        Lock l(this->_sync, InfiniteTimeout);

unhandled error condition

libs/error_counter/error_counter.cpp, line 15 at r1 (raw file):

        auto increment = this->_config.Increment(device);

        Lock l(this->_sync, InfiniteTimeout);

unhandled error condition

libs/error_counter/error_counter.cpp, line 23 at r1 (raw file):

            if (this->_callback != nullptr)
            {
                this->_callback->LimitReached(device, this->_counters[device]);

In general case it is rather risky to call externally provided functions while holding a lock.

libs/error_counter/error_counter.cpp, line 30 at r1 (raw file):

    void ErrorCounting::Handler(IErrorCountingCallback& callback)
    {
        Lock l(this->_sync, InfiniteTimeout);

unhandled error condition

libs/error_counter/error_counter.cpp, line 36 at r1 (raw file):

    void ErrorCounting::Success(Device device)
    {
        Lock l(this->_sync, InfiniteTimeout);

unhandled error condition

libs/error_counter/error_counter.cpp, line 47 at r1 (raw file):

this->_sync = System::CreateBinarySemaphore(1);
System::GiveSemaphore(this->_sync);
unhandled error condition


libs/error_counter/Include/error_counter/error_counter.hpp, line 62 at r1 (raw file):

     * When error limit (also configurable) is reach, callback is invoked
     */
    class ErrorCounting

I do not like the idea of monotonic counters that can only be increased or reset to zero. Such policy makes this system prone to trigger errors as soon as the requested number of errors or ignore them if one every N communication transactions succeeds. I believe the error counters should be slowly decreased (with zero cut off) in case of the successful communication. This will allow to safely overwrite infrequent problems and will still issue a red flag if errors start appearing in series.

libs/error_counter/Include/error_counter/error_counter.hpp, line 62 at r1 (raw file):

     * When error limit (also configurable) is reach, callback is invoked
     */
    class ErrorCounting

also consider using interlocks instead of semaphore.

libs/error_counter/Include/error_counter/error_counter.hpp, line 62 at r1 (raw file):

     * When error limit (also configurable) is reach, callback is invoked
     */
    class ErrorCounting

mark as final

libs/error_counter/Include/error_counter/error_counter.hpp, line 121 at r1 (raw file):

     * @tparam Device Device ID
     */
    template <Device Device> class ErrorCounter

mark as final

libs/error_counter/Include/error_counter/error_counter.hpp, line 143 at r1 (raw file):

    }

    template <Device Device> std::uint8_t ErrorCounter<Device>::Current() const

mark as inline

libs/error_counter/Include/error_counter/error_counter.hpp, line 148 at r1 (raw file):

    }

    template <Device Device> void ErrorCounter<Device>::Failure()

mark as inline

libs/error_counter/Include/error_counter/error_counter.hpp, line 153 at r1 (raw file):

    }

    template <Device Device> void ErrorCounter<Device>::Success()

mark as inline

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,98,2017-03-02T12:45:08Z,2017-03-22T19:51:54Z,2017-03-22T19:51:55Z,MERGED,True,636,17,25,https://github.com/Novakov,RFC - Error counters,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/98,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/98#issuecomment-287643223,"Draft for error counting mechanism.
ToDo (in this pull request or another):

Storing current configuration in FRAM
Telecommands for changing config
Publishing error counts to global state (for telemetry)
Integration with all devices



This change is","Review status: 9 of 25 files reviewed at latest revision, 14 unresolved discussions.

libs/drivers/comm/comm.cpp, line 122 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
if we are to adopt device error counting then every communication transaction should affect the device's counter.

Sure - just before doing that I want to get at least some feedback on the overall idea.

libs/error_counter/error_counter.cpp, line 7 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
unhandled error condition

Done.

libs/error_counter/error_counter.cpp, line 15 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
unhandled error condition

Done.

libs/error_counter/error_counter.cpp, line 23 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
In general case it is rather risky to call externally provided functions while holding a lock.

Done.

libs/error_counter/error_counter.cpp, line 30 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
unhandled error condition

Done.

libs/error_counter/error_counter.cpp, line 36 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
unhandled error condition

Done.

libs/error_counter/error_counter.cpp, line 47 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote

this->_sync = System::CreateBinarySemaphore(1);
System::GiveSemaphore(this->_sync);
unhandled error condition


Done.

libs/error_counter/Include/error_counter/error_counter.hpp, line 62 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
also consider using interlocks instead of semaphore.

Done.

libs/error_counter/Include/error_counter/error_counter.hpp, line 62 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
mark as final

Done.

libs/error_counter/Include/error_counter/error_counter.hpp, line 62 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
I do not like the idea of monotonic counters that can only be increased or reset to zero. Such policy makes this system prone to trigger errors as soon as the requested number of errors or ignore them if one every N communication transactions succeeds. I believe the error counters should be slowly decreased (with zero cut off) in case of the successful communication. This will allow to safely overwrite infrequent problems and will still issue a red flag if errors start appearing in series.

Done.

libs/error_counter/Include/error_counter/error_counter.hpp, line 121 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
mark as final

Done.

libs/error_counter/Include/error_counter/error_counter.hpp, line 143 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
mark as inline

Done.

libs/error_counter/Include/error_counter/error_counter.hpp, line 148 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
mark as inline

Done.

libs/error_counter/Include/error_counter/error_counter.hpp, line 153 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
mark as inline

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,98,2017-03-02T12:45:08Z,2017-03-22T19:51:54Z,2017-03-22T19:51:55Z,MERGED,True,636,17,25,https://github.com/Novakov,RFC - Error counters,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/98,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/98#issuecomment-288503064,"Draft for error counting mechanism.
ToDo (in this pull request or another):

Storing current configuration in FRAM
Telecommands for changing config
Publishing error counts to global state (for telemetry)
Integration with all devices



This change is","Reviewed 17 of 17 files at r2.
Review status: all files reviewed at latest revision, 2 unresolved discussions.

libs/base/Include/traits.hpp, line 105 at r2 (raw file):

 * @brief Returns integer type that is wider than given type
 */
template <typename T> struct Wider

when you depend explicitly on template specialization the default version should not be defined.

libs/error_counter/CMakeLists.txt, line 10 at r2 (raw file):

target_link_libraries(${NAME} 
	base

unused

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,98,2017-03-02T12:45:08Z,2017-03-22T19:51:54Z,2017-03-22T19:51:55Z,MERGED,True,636,17,25,https://github.com/Novakov,RFC - Error counters,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/98,https://github.com/Novakov,6,https://github.com/PW-Sat2/PWSat2OBC/pull/98#issuecomment-288507715,"Draft for error counting mechanism.
ToDo (in this pull request or another):

Storing current configuration in FRAM
Telecommands for changing config
Publishing error counts to global state (for telemetry)
Integration with all devices



This change is","Review status: 24 of 25 files reviewed at latest revision, 2 unresolved discussions.

libs/base/Include/traits.hpp, line 105 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
when you depend explicitly on template specialization the default version should not be defined.

Done

libs/error_counter/CMakeLists.txt, line 10 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
unused

traits.hpp header from base is used

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,98,2017-03-02T12:45:08Z,2017-03-22T19:51:54Z,2017-03-22T19:51:55Z,MERGED,True,636,17,25,https://github.com/Novakov,RFC - Error counters,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/98,https://github.com/zaq32,7,https://github.com/PW-Sat2/PWSat2OBC/pull/98#issuecomment-288507904,"Draft for error counting mechanism.
ToDo (in this pull request or another):

Storing current configuration in FRAM
Telecommands for changing config
Publishing error counts to global state (for telemetry)
Integration with all devices



This change is","Reviewed 1 of 1 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,99,2017-03-05T18:12:33Z,2017-03-16T17:53:57Z,2017-03-16T17:53:58Z,MERGED,True,633,56,19,https://github.com/mandrek44,Implemented time correction based on external RTC,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/99,https://github.com/mandrek44,1,https://github.com/PW-Sat2/PWSat2OBC/pull/99,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,99,2017-03-05T18:12:33Z,2017-03-16T17:53:57Z,2017-03-16T17:53:58Z,MERGED,True,633,56,19,https://github.com/mandrek44,Implemented time correction based on external RTC,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/99,https://github.com/mandrek44,2,https://github.com/PW-Sat2/PWSat2OBC/pull/99#issuecomment-285280681,This change is,[Time] Check external RTC,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,99,2017-03-05T18:12:33Z,2017-03-16T17:53:57Z,2017-03-16T17:53:58Z,MERGED,True,633,56,19,https://github.com/mandrek44,Implemented time correction based on external RTC,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/99,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/99#issuecomment-285409926,This change is,"Reviewed 15 of 15 files at r1.
Review status: all files reviewed at latest revision, 4 unresolved discussions.

libs/drivers/rtc/Include/rtc/rtc.hpp, line 42 at r1 (raw file):

              * @return Transfer result - I2CResult::OK when read was successful.
              */
            virtual OSResult ReadTime(RTCTime& rtcTime);

Extract interface

libs/time/timer.cpp, line 100 at r1 (raw file):

bool TimeProvider::SetCurrentTime(milliseconds duration)
{
    if (OS_RESULT_FAILED(System::TakeSemaphore(timerLock, InfiniteTimeout)))

You can use Lock class to take semaphore in a bit safer maner

src/obc.h, line 96 at r1 (raw file):

    /** @brief External Real Time Clock.  */
    devices::rtc::RTCObject rtc;

I thinks it should go to hardware or time-related part of OBC tree

unit_tests/MissionPlan/TimeTaskTest.cpp, line 50 at r1 (raw file):

TimeTaskTest::TimeTaskTest()
    : provider(fileSystemMock),                 //
      rtc(),                                    //

No need to call default ctor

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,99,2017-03-05T18:12:33Z,2017-03-16T17:53:57Z,2017-03-16T17:53:58Z,MERGED,True,633,56,19,https://github.com/mandrek44,Implemented time correction based on external RTC,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/99,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/99#issuecomment-285410437,This change is,"Reviewed 15 of 15 files at r1.
Review status: all files reviewed at latest revision, 9 unresolved discussions.

libs/drivers/rtc/Include/rtc/rtc.hpp, line 34 at r1 (raw file):

             */
            RTCObject(drivers::i2c::II2CBus& bus);
            virtual ~RTCObject(){};

virtual destructor is useful only when you are planning to be able to destroy object via pointer to the base class. Since we do not destroy our objects at all this seems unused.

libs/drivers/rtc/Include/rtc/rtc.hpp, line 42 at r1 (raw file):

              * @return Transfer result - I2CResult::OK when read was successful.
              */
            virtual OSResult ReadTime(RTCTime& rtcTime);

It would be better suited to provide an RTC interface so it can be abstracted away instead of making it overrideable.

libs/mission/time/time.cpp, line 5 at r1 (raw file):

#include ""state/struct.h""

#include <iostream>

we should refrain from using iostream plus this header seems unused.

libs/mission/time/time.cpp, line 99 at r1 (raw file):

        auto correctedMissionTime = lastMissionTime.Value + (deltaMcu + deltaRtc) / 2;
        auto correctionValue = correctedMissionTime > time.Value ? correctedMissionTime - time.Value : time.Value - correctedMissionTime;

how about using std::abs?

unit_tests/mock/RtcMock.hpp, line 9 at r1 (raw file):

#include ""rtc/rtc.hpp""

class RtcMock : public devices::rtc::RTCObject

why not use google mock instead of manually creating mock object?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,99,2017-03-05T18:12:33Z,2017-03-16T17:53:57Z,2017-03-16T17:53:58Z,MERGED,True,633,56,19,https://github.com/mandrek44,Implemented time correction based on external RTC,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/99,https://github.com/mandrek44,5,https://github.com/PW-Sat2/PWSat2OBC/pull/99#issuecomment-285959126,This change is,"Review status: 4 of 20 files reviewed at latest revision, 9 unresolved discussions.

libs/mission/time/time.cpp, line 99 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
how about using std::abs?

AFAIK there's not std::abs for duration. There's http://en.cppreference.com/w/cpp/chrono/duration/abs but available since C++17

src/obc.h, line 96 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
I thinks it should go to hardware or time-related part of OBC tree

What this branch should contain apart from rtc?

unit_tests/mock/RtcMock.hpp, line 9 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
why not use google mock instead of manually creating mock object?

Because now I can write rtc.AdvanceTime(duration_cast<seconds>(mission::TimeCorrectionPeriod)); which is much more readable than setting up mock object.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,99,2017-03-05T18:12:33Z,2017-03-16T17:53:57Z,2017-03-16T17:53:58Z,MERGED,True,633,56,19,https://github.com/mandrek44,Implemented time correction based on external RTC,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/99,https://github.com/mandrek44,6,https://github.com/PW-Sat2/PWSat2OBC/pull/99#issuecomment-285959149,This change is,"Review status: 4 of 20 files reviewed at latest revision, 9 unresolved discussions.

libs/drivers/rtc/Include/rtc/rtc.hpp, line 34 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
virtual destructor is useful only when you are planning to be able to destroy object via pointer to the base class. Since we do not destroy our objects at all this seems unused.

Done.

libs/drivers/rtc/Include/rtc/rtc.hpp, line 42 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Extract interface

Done.

libs/drivers/rtc/Include/rtc/rtc.hpp, line 42 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
It would be better suited to provide an RTC interface so it can be abstracted away instead of making it overrideable.

Done.

libs/mission/time/time.cpp, line 5 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
we should refrain from using iostream plus this header seems unused.

Done.

libs/time/timer.cpp, line 100 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
You can use Lock class to take semaphore in a bit safer maner

Done.

unit_tests/MissionPlan/TimeTaskTest.cpp, line 50 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
No need to call default ctor

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,99,2017-03-05T18:12:33Z,2017-03-16T17:53:57Z,2017-03-16T17:53:58Z,MERGED,True,633,56,19,https://github.com/mandrek44,Implemented time correction based on external RTC,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/99,https://github.com/mandrek44,7,https://github.com/PW-Sat2/PWSat2OBC/pull/99#issuecomment-285959254,This change is,"I needed to add the RTC Mock because time correction was disturbing the detumbling integration tests

Review status: 4 of 20 files reviewed at latest revision, 9 unresolved discussions.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,99,2017-03-05T18:12:33Z,2017-03-16T17:53:57Z,2017-03-16T17:53:58Z,MERGED,True,633,56,19,https://github.com/mandrek44,Implemented time correction based on external RTC,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/99,https://github.com/Novakov,8,https://github.com/PW-Sat2/PWSat2OBC/pull/99#issuecomment-286234925,This change is,"Reviewed 5 of 5 files at r2, 6 of 6 files at r3, 5 of 5 files at r4.
Review status: all files reviewed at latest revision, 8 unresolved discussions.

integration_tests/system/system.py, line 51 at r4 (raw file):

        self.sys_bus.add_device(self.primary_antenna)
        self.payload_bus.add_device(self.backup_antenna)
        self.sys_bus.add_device(self.rtc)

RTC will bo on PLD board so I guess it will be connected to payload bus

integration_tests/tests/test_time.py, line 37 at r4 (raw file):

    #     obc_time_difference_ms = obc_end_time_ms - obc_start_time_ms
    #
    #     self.assertAlmostEqual(obc_time_difference_ms, sys_time_difference_ms, places=None, delta=wait_time_accuracy_ms)

wat?

src/obc.h, line 96 at r1 (raw file):
Previously, mandrek44 (Mandro) wrote
What this branch should contain apart from rtc?

Maybe time provider. My point is that I would like to avoid big blob of things inside OBC structure

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,99,2017-03-05T18:12:33Z,2017-03-16T17:53:57Z,2017-03-16T17:53:58Z,MERGED,True,633,56,19,https://github.com/mandrek44,Implemented time correction based on external RTC,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/99,https://github.com/mandrek44,9,https://github.com/PW-Sat2/PWSat2OBC/pull/99#issuecomment-286235356,This change is,"Review status: all files reviewed at latest revision, 8 unresolved discussions.

integration_tests/tests/test_time.py, line 37 at r4 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
wat?

How this got there? ;-) Damn it - this whole file should not be changed in this pull request

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,99,2017-03-05T18:12:33Z,2017-03-16T17:53:57Z,2017-03-16T17:53:58Z,MERGED,True,633,56,19,https://github.com/mandrek44,Implemented time correction based on external RTC,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/99,https://github.com/mandrek44,10,https://github.com/PW-Sat2/PWSat2OBC/pull/99#issuecomment-286240056,This change is,"Review status: 18 of 19 files reviewed at latest revision, 8 unresolved discussions.

integration_tests/system/system.py, line 51 at r4 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
RTC will bo on PLD board so I guess it will be connected to payload bus

Done.

src/obc.h, line 96 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Maybe time provider. My point is that I would like to avoid big blob of things inside OBC structure

That may be hard to resolve - Hardware depends on TimeProvider, RTC depends on Hardware.  I think we'd have redesign the obc structure - i.e. look also at adcs, antenna drivers etc

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,99,2017-03-05T18:12:33Z,2017-03-16T17:53:57Z,2017-03-16T17:53:58Z,MERGED,True,633,56,19,https://github.com/mandrek44,Implemented time correction based on external RTC,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/99,https://github.com/Novakov,11,https://github.com/PW-Sat2/PWSat2OBC/pull/99#issuecomment-286243079,This change is,"Reviewed 2 of 2 files at r5.
Review status: all files reviewed at latest revision, 5 unresolved discussions.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,99,2017-03-05T18:12:33Z,2017-03-16T17:53:57Z,2017-03-16T17:53:58Z,MERGED,True,633,56,19,https://github.com/mandrek44,Implemented time correction based on external RTC,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/99,https://github.com/zaq32,12,https://github.com/PW-Sat2/PWSat2OBC/pull/99#issuecomment-287139755,This change is,"Reviewed 1 of 1 files at r6.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,100,2017-03-13T16:50:24Z,2017-03-16T20:54:35Z,2017-03-16T20:54:36Z,MERGED,True,283,74,17,https://github.com/Novakov,Enable external flash on CI,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/100,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/100,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,100,2017-03-13T16:50:24Z,2017-03-16T20:54:35Z,2017-03-16T20:54:36Z,MERGED,True,283,74,17,https://github.com/Novakov,Enable external flash on CI,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/100,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/100#issuecomment-287144221,This change is,"Reviewed 16 of 19 files at r1.
Review status: 16 of 19 files reviewed at latest revision, 8 unresolved discussions, some commit checks failed.

libs/drivers/spi/efm.cpp, line 50 at r1 (raw file):

void EFMSPIInterface::Write(gsl::span<const std::uint8_t> buffer)
{
    for (decltype(buffer.size()) offset = 0; offset < buffer.size(); offset += 1024)

size of buffer is not guarante

libs/obc/storage/Include/obc/storage.h, line 62 at r1 (raw file):

        OSResult Erase();

      public:

what is the reason?

libs/obc/storage/n25q_flash/Include/obc/storage/n25q.h, line 57 at r1 (raw file):

            OSResult Erase();

          public:

what is the reason?

libs/obc/storage/n25q_flash/Include/obc/storage/n25q.h, line 105 at r1 (raw file):

            OSResult Erase();

          public:

what is the reason?

src/commands/stress_fs.cpp, line 10 at r1 (raw file):

static bool IsDiff(gsl::span<int> prev, gsl::span<int> next)
{
    for (auto i = 0; i < YAFFS_NUMBER_OF_BLOCK_STATES; i++)

possible buffer overflow

src/commands/stress_fs.cpp, line 10 at r1 (raw file):

static bool IsDiff(gsl::span<int> prev, gsl::span<int> next)
{
    for (auto i = 0; i < YAFFS_NUMBER_OF_BLOCK_STATES; i++)

gsl::span has already overloaded == operator why not use that?

src/commands/stress_fs.cpp, line 21 at r1 (raw file):

}

extern ""C"" {

this may work but it would be preferable to update the yaffs itself to make those types public.

src/commands/stress_fs.cpp, line 49 at r1 (raw file):

};

static std::array<std::uint8_t, 1024> buffer;

seems unused

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,100,2017-03-13T16:50:24Z,2017-03-16T20:54:35Z,2017-03-16T20:54:36Z,MERGED,True,283,74,17,https://github.com/Novakov,Enable external flash on CI,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/100,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/100#issuecomment-287144796,This change is,"Reviewed 2 of 19 files at r1.
Review status: 18 of 19 files reviewed at latest revision, 9 unresolved discussions, some commit checks failed.

libs/drivers/spi/efm.cpp, line 50 at r1 (raw file):

void EFMSPIInterface::Write(gsl::span<const std::uint8_t> buffer)
{
    for (decltype(buffer.size()) offset = 0; offset < buffer.size(); offset += 1024)

size of buffer is not guaranteed to be multiplicity of 1024.

libs/drivers/spi/efm.cpp, line 87 at r1 (raw file):

void EFMSPIInterface::Read(gsl::span<std::uint8_t> buffer)
{
    for (decltype(buffer.size()) offset = 0; offset < buffer.size(); offset += 1024)

size of buffer is not guaranteed to be multiplicity of 1024.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,100,2017-03-13T16:50:24Z,2017-03-16T20:54:35Z,2017-03-16T20:54:36Z,MERGED,True,283,74,17,https://github.com/Novakov,Enable external flash on CI,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/100,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/100#issuecomment-287166168,This change is,"Review status: 12 of 17 files reviewed at latest revision, 9 unresolved discussions.

libs/drivers/spi/efm.cpp, line 50 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
size of buffer is not guaranteed to be multiplicity of 1024.

That's correct and inside loop taking part of buffer is taking less of (1024, remaining buffer size)

libs/drivers/spi/efm.cpp, line 87 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
size of buffer is not guaranteed to be multiplicity of 1024.

That's correct and inside loop taking part of buffer is taking less of (1024, remaining buffer size)

libs/obc/storage/n25q_flash/Include/obc/storage/n25q.h, line 57 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
what is the reason?

Done.

libs/obc/storage/n25q_flash/Include/obc/storage/n25q.h, line 105 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
what is the reason?

Done.

src/commands/stress_fs.cpp, line 10 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
gsl::span has already overloaded == operator why not use that?

Done.

src/commands/stress_fs.cpp, line 10 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
possible buffer overflow

Done.

src/commands/stress_fs.cpp, line 21 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
this may work but it would be preferable to update the yaffs itself to make those types public.

Whole purpose of this file was to run some quick test of yaffs - it is not intended to be used in flight software.
I removed it from CMakeList but left in repo in case of further tests.

src/commands/stress_fs.cpp, line 49 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
seems unused

Due to size I didn't want to put it on stack and increase terminal stack size just of that.

libs/obc/storage/Include/obc/storage.h, line 62 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
what is the reason?

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,100,2017-03-13T16:50:24Z,2017-03-16T20:54:35Z,2017-03-16T20:54:36Z,MERGED,True,283,74,17,https://github.com/Novakov,Enable external flash on CI,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/100,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/100#issuecomment-287187880,This change is,"Reviewed 6 of 7 files at r2.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

src/commands/stress_fs.cpp, line 49 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Due to size I didn't want to put it on stack and increase terminal stack size just of that.

but in result you've just locked out 1KB of RAM just for this single use case. At least in case of terminal stack it could also be reused elsewhere.
However closing as this file is not used in flight software

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,101,2017-03-16T12:39:33Z,2017-03-16T21:43:23Z,2017-03-16T21:43:24Z,MERGED,True,396,1,15,https://github.com/Novakov,FM25W256 driver,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/101,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/101,"Driver for FM25W256 FRAM


This change is","Driver for FM25W256 FRAM


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,101,2017-03-16T12:39:33Z,2017-03-16T21:43:23Z,2017-03-16T21:43:24Z,MERGED,True,396,1,15,https://github.com/Novakov,FM25W256 driver,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/101,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/101#issuecomment-287044676,"Driver for FM25W256 FRAM


This change is",[Driver] FRAM,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,101,2017-03-16T12:39:33Z,2017-03-16T21:43:23Z,2017-03-16T21:43:24Z,MERGED,True,396,1,15,https://github.com/Novakov,FM25W256 driver,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/101,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/101#issuecomment-287141189,"Driver for FM25W256 FRAM


This change is","Reviewed 15 of 15 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,101,2017-03-16T12:39:33Z,2017-03-16T21:43:23Z,2017-03-16T21:43:24Z,MERGED,True,396,1,15,https://github.com/Novakov,FM25W256 driver,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/101,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/101#issuecomment-287190842,"Driver for FM25W256 FRAM


This change is","Reviewed 1 of 1 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,101,2017-03-16T12:39:33Z,2017-03-16T21:43:23Z,2017-03-16T21:43:24Z,MERGED,True,396,1,15,https://github.com/Novakov,FM25W256 driver,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/101,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/101#issuecomment-287193886,"Driver for FM25W256 FRAM


This change is","Reviewed 2 of 2 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,102,2017-03-16T14:37:50Z,2017-03-16T15:24:40Z,2017-03-16T15:24:41Z,MERGED,True,6,3,1,https://github.com/mandrek44,Fixed i2cMock logs,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/102,https://github.com/mandrek44,1,https://github.com/PW-Sat2/PWSat2OBC/pull/102,"Integration tests mocks were wrong about device addresses and reported invalid commands when device was missing.


This change is","Integration tests mocks were wrong about device addresses and reported invalid commands when device was missing.


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,102,2017-03-16T14:37:50Z,2017-03-16T15:24:40Z,2017-03-16T15:24:41Z,MERGED,True,6,3,1,https://github.com/mandrek44,Fixed i2cMock logs,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/102,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/102#issuecomment-287092443,"Integration tests mocks were wrong about device addresses and reported invalid commands when device was missing.


This change is","Reviewed 1 of 1 files at r1, 1 of 1 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,103,2017-03-18T11:10:11Z,2017-03-18T15:30:22Z,2017-03-18T15:30:23Z,MERGED,True,288,4,7,https://github.com/mandrek44,Added time correction integration tests and reader unit tests,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/103,https://github.com/mandrek44,1,https://github.com/PW-Sat2/PWSat2OBC/pull/103,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,103,2017-03-18T11:10:11Z,2017-03-18T15:30:22Z,2017-03-18T15:30:23Z,MERGED,True,288,4,7,https://github.com/mandrek44,Added time correction integration tests and reader unit tests,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/103,https://github.com/mandrek44,2,https://github.com/PW-Sat2/PWSat2OBC/pull/103#issuecomment-287537375,This change is,[Mock] RTC,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,103,2017-03-18T11:10:11Z,2017-03-18T15:30:22Z,2017-03-18T15:30:23Z,MERGED,True,288,4,7,https://github.com/mandrek44,Added time correction integration tests and reader unit tests,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/103,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/103#issuecomment-287553467,This change is,"Reviewed 7 of 7 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,104,2017-03-18T12:39:08Z,2017-03-18T19:00:35Z,2017-03-18T19:00:37Z,MERGED,True,70,12,3,https://github.com/mandrek44,Added MaximumTimeCorrection treshold,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/104,https://github.com/mandrek44,1,https://github.com/PW-Sat2/PWSat2OBC/pull/104,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,104,2017-03-18T12:39:08Z,2017-03-18T19:00:35Z,2017-03-18T19:00:37Z,MERGED,True,70,12,3,https://github.com/mandrek44,Added MaximumTimeCorrection treshold,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/104,https://github.com/mandrek44,2,https://github.com/PW-Sat2/PWSat2OBC/pull/104#issuecomment-287543478,This change is,[Time] Add maximum time correction limit,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,104,2017-03-18T12:39:08Z,2017-03-18T19:00:35Z,2017-03-18T19:00:37Z,MERGED,True,70,12,3,https://github.com/mandrek44,Added MaximumTimeCorrection treshold,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/104,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/104#issuecomment-287553615,This change is,"Reviewed 3 of 3 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,105,2017-03-20T19:43:11Z,2017-03-20T20:15:42Z,2017-03-20T20:15:43Z,MERGED,True,3,3,3,https://github.com/ggajoch,Re-named files to correct linux compilation.,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/105,https://github.com/ggajoch,1,https://github.com/PW-Sat2/PWSat2OBC/pull/105,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,105,2017-03-20T19:43:11Z,2017-03-20T20:15:42Z,2017-03-20T20:15:43Z,MERGED,True,3,3,3,https://github.com/ggajoch,Re-named files to correct linux compilation.,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/105,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/105#issuecomment-287875847,This change is,"Reviewed 3 of 3 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,106,2017-03-21T19:20:36Z,2017-04-09T18:33:37Z,2017-04-09T18:33:38Z,MERGED,True,150,1,11,https://github.com/Novakov,Temperature sensor for EFM,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/106,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/106,"Dead-simple temperatue sensor based on ADC


This change is","Dead-simple temperatue sensor based on ADC


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,106,2017-03-21T19:20:36Z,2017-04-09T18:33:37Z,2017-04-09T18:33:38Z,MERGED,True,150,1,11,https://github.com/Novakov,Temperature sensor for EFM,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/106,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/106#issuecomment-288500217,"Dead-simple temperatue sensor based on ADC


This change is","Reviewed 11 of 11 files at r1.
Review status: all files reviewed at latest revision, 3 unresolved discussions.

libs/drivers/temp/CMakeLists.txt, line 1 at r1 (raw file):

set(NAME temp)

we have multiple temperature sensors this library name & location should reflect the fact that this is related to mcu internal sensor

libs/drivers/temp/efm.cpp, line 47 at r1 (raw file):

        /* Temperature gradient (from datasheet) */
        std::int8_t t_grad = -6.3 * 10;

why not just const std::int8_t t_grad = -63;?

libs/obc/hardware/Include/obc/hardware.h, line 125 at r1 (raw file):

        /** @brief Self-temperature sensor */
        temp::ADCTemperatureReader Temperature;

this name should indicate that this is for mcu internal sensor

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,106,2017-03-21T19:20:36Z,2017-04-09T18:33:37Z,2017-04-09T18:33:38Z,MERGED,True,150,1,11,https://github.com/Novakov,Temperature sensor for EFM,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/106,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/106#issuecomment-288521972,"Dead-simple temperatue sensor based on ADC


This change is","Review status: 2 of 11 files reviewed at latest revision, 3 unresolved discussions.

libs/obc/hardware/Include/obc/hardware.h, line 125 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
this name should indicate that this is for mcu internal sensor

Done.

libs/drivers/temp/CMakeLists.txt, line 1 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
we have multiple temperature sensors this library name & location should reflect the fact that this is related to mcu internal sensor

Done.

libs/drivers/temp/efm.cpp, line 47 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
why not just const std::int8_t t_grad = -63;?

-6.3 comes from datasheet. For this type of values I prefer to put them that way as it is easier to look for them (value from datasheet in code and value from code in datasheet - Ctrl+F will work)

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,106,2017-03-21T19:20:36Z,2017-04-09T18:33:37Z,2017-04-09T18:33:38Z,MERGED,True,150,1,11,https://github.com/Novakov,Temperature sensor for EFM,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/106,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/106#issuecomment-288523246,"Dead-simple temperatue sensor based on ADC


This change is","Reviewed 13 of 13 files at r2.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

libs/drivers/mcu_temp/efm.cpp, line 47 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
-6.3 comes from datasheet. For this type of values I prefer to put them that way as it is easier to look for them (value from datasheet in code and value from code in datasheet - Ctrl+F will work)

ok, but still this should be compile time constant

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,106,2017-03-21T19:20:36Z,2017-04-09T18:33:37Z,2017-04-09T18:33:38Z,MERGED,True,150,1,11,https://github.com/Novakov,Temperature sensor for EFM,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/106,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/106#issuecomment-288858768,"Dead-simple temperatue sensor based on ADC


This change is","Review status: 10 of 11 files reviewed at latest revision, 1 unresolved discussion.

libs/drivers/mcu_temp/efm.cpp, line 47 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
ok, but still this should be compile time constant

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,106,2017-03-21T19:20:36Z,2017-04-09T18:33:37Z,2017-04-09T18:33:38Z,MERGED,True,150,1,11,https://github.com/Novakov,Temperature sensor for EFM,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/106,https://github.com/zaq32,6,https://github.com/PW-Sat2/PWSat2OBC/pull/106#issuecomment-288859011,"Dead-simple temperatue sensor based on ADC


This change is","Reviewed 1 of 13 files at r2, 1 of 1 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,106,2017-03-21T19:20:36Z,2017-04-09T18:33:37Z,2017-04-09T18:33:38Z,MERGED,True,150,1,11,https://github.com/Novakov,Temperature sensor for EFM,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/106,https://github.com/zaq32,7,https://github.com/PW-Sat2/PWSat2OBC/pull/106#issuecomment-292798621,"Dead-simple temperatue sensor based on ADC


This change is","Reviewed 2 of 2 files at r4.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,106,2017-03-21T19:20:36Z,2017-04-09T18:33:37Z,2017-04-09T18:33:38Z,MERGED,True,150,1,11,https://github.com/Novakov,Temperature sensor for EFM,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/106,https://github.com/zaq32,8,https://github.com/PW-Sat2/PWSat2OBC/pull/106#issuecomment-292803069,"Dead-simple temperatue sensor based on ADC


This change is","Reviewed 3 of 3 files at r5.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,107,2017-03-22T18:39:35Z,2017-04-04T16:19:52Z,2017-04-04T16:19:53Z,MERGED,True,152,16,8,https://github.com/zaq32,[comm] Prevent beacon update from erasing frames from transmitter queue,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/107,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/107,"Update beacon setting procedure to ensure that setting beacon will not cause
transmitter to remove any frames from the outgoing frame buffer before they
are send. This is done by first sending beacon as a regular frame and checking
the number of transmitter''s output buffer free slot count.


This change is","Update beacon setting procedure to ensure that setting beacon will not cause
transmitter to remove any frames from the outgoing frame buffer before they
are send. This is done by first sending beacon as a regular frame and checking
the number of transmitter''s output buffer free slot count.


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,107,2017-03-22T18:39:35Z,2017-04-04T16:19:52Z,2017-04-04T16:19:53Z,MERGED,True,152,16,8,https://github.com/zaq32,[comm] Prevent beacon update from erasing frames from transmitter queue,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/107,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/107#issuecomment-288504361,"Update beacon setting procedure to ensure that setting beacon will not cause
transmitter to remove any frames from the outgoing frame buffer before they
are send. This is done by first sending beacon as a regular frame and checking
the number of transmitter''s output buffer free slot count.


This change is",[comm] Beacon update process should not remove any frames from transmitter queue,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,107,2017-03-22T18:39:35Z,2017-04-04T16:19:52Z,2017-04-04T16:19:53Z,MERGED,True,152,16,8,https://github.com/zaq32,[comm] Prevent beacon update from erasing frames from transmitter queue,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/107,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/107#issuecomment-289289527,"Update beacon setting procedure to ensure that setting beacon will not cause
transmitter to remove any frames from the outgoing frame buffer before they
are send. This is done by first sending beacon as a regular frame and checking
the number of transmitter''s output buffer free slot count.


This change is","Reviewed 4 of 4 files at r1.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

libs/drivers/comm/Include/comm/CommDriver.hpp, line 278 at r1 (raw file):

     * @return Operation status, true in case of success, false otherwise.
     */
    bool ScheduleFrameTransmission(gsl::span<const std::uint8_t> frame, std::uint8_t& remainingSlots);

How about using Option<T> as return type?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,107,2017-03-22T18:39:35Z,2017-04-04T16:19:52Z,2017-04-04T16:19:53Z,MERGED,True,152,16,8,https://github.com/zaq32,[comm] Prevent beacon update from erasing frames from transmitter queue,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/107,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/107#issuecomment-289317623,"Update beacon setting procedure to ensure that setting beacon will not cause
transmitter to remove any frames from the outgoing frame buffer before they
are send. This is done by first sending beacon as a regular frame and checking
the number of transmitter''s output buffer free slot count.


This change is","Review status: 1 of 8 files reviewed at latest revision, 1 unresolved discussion.

libs/drivers/comm/Include/comm/CommDriver.hpp, line 278 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
How about using Option<T> as return type?

In here it doesn't make sense as this method is pure command implementation. Did you have the ""SetBeacon"" method in mind?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,107,2017-03-22T18:39:35Z,2017-04-04T16:19:52Z,2017-04-04T16:19:53Z,MERGED,True,152,16,8,https://github.com/zaq32,[comm] Prevent beacon update from erasing frames from transmitter queue,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/107,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/107#issuecomment-290811313,"Update beacon setting procedure to ensure that setting beacon will not cause
transmitter to remove any frames from the outgoing frame buffer before they
are send. This is done by first sending beacon as a regular frame and checking
the number of transmitter''s output buffer free slot count.


This change is","Reviewed 7 of 7 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,107,2017-03-22T18:39:35Z,2017-04-04T16:19:52Z,2017-04-04T16:19:53Z,MERGED,True,152,16,8,https://github.com/zaq32,[comm] Prevent beacon update from erasing frames from transmitter queue,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/107,https://github.com/Novakov,6,https://github.com/PW-Sat2/PWSat2OBC/pull/107#issuecomment-291552967,"Update beacon setting procedure to ensure that setting beacon will not cause
transmitter to remove any frames from the outgoing frame buffer before they
are send. This is done by first sending beacon as a regular frame and checking
the number of transmitter''s output buffer free slot count.


This change is","Reviewed 2 of 2 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,108,2017-03-23T09:16:25Z,2017-03-23T09:16:58Z,2017-03-23T09:17:00Z,MERGED,True,13,8,1,https://github.com/Novakov,Ensure that 4 bytes are read from serial port,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/108,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/108,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,108,2017-03-23T09:16:25Z,2017-03-23T09:16:58Z,2017-03-23T09:17:00Z,MERGED,True,13,8,1,https://github.com/Novakov,Ensure that 4 bytes are read from serial port,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/108,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/108#issuecomment-288659947,This change is,"Reviewed 1 of 1 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,109,2017-03-23T11:16:43Z,2017-03-23T14:01:35Z,2017-03-23T14:01:37Z,MERGED,True,99,11,4,https://github.com/Novakov,Update for DeviceMock to support COMM i2c,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/109,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/109,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,109,2017-03-23T11:16:43Z,2017-03-23T14:01:35Z,2017-03-23T14:01:37Z,MERGED,True,99,11,4,https://github.com/Novakov,Update for DeviceMock to support COMM i2c,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/109,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/109#issuecomment-288728139,This change is,"Reviewed 4 of 4 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,110,2017-03-23T20:30:22Z,2017-03-31T19:24:02Z,2017-03-31T19:24:03Z,MERGED,True,119,170,14,https://github.com/zaq32,Updated version of antenna deployed algorithm,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/110,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/110,"Based on recent discussion & simplification.


This change is","Based on recent discussion & simplification.


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,110,2017-03-23T20:30:22Z,2017-03-31T19:24:02Z,2017-03-31T19:24:03Z,MERGED,True,119,170,14,https://github.com/zaq32,Updated version of antenna deployed algorithm,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/110,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/110#issuecomment-289320039,"Based on recent discussion & simplification.


This change is",[ant] Update antenna deployment algorithm,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,110,2017-03-23T20:30:22Z,2017-03-31T19:24:02Z,2017-03-31T19:24:03Z,MERGED,True,119,170,14,https://github.com/zaq32,Updated version of antenna deployed algorithm,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/110,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/110#issuecomment-290805611,"Based on recent discussion & simplification.


This change is","Reviewed 14 of 14 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,111,2017-03-24T20:22:59Z,2017-03-29T20:21:34Z,2017-06-06T16:06:34Z,MERGED,True,2,2,1,https://github.com/PetrerW,stepDetunbling() needs 3 parameters - fixed,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/111,https://github.com/PetrerW,1,https://github.com/PW-Sat2/PWSat2OBC/pull/111,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,112,2017-04-02T21:27:08Z,2017-04-09T19:06:58Z,2017-04-09T19:06:59Z,MERGED,True,1665,94,51,https://github.com/zaq32,Obc persisent state,9,[],https://github.com/PW-Sat2/PWSat2OBC/pull/112,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/112,"Add object that contains obc's persisent state & logic related for reading/writing it from dedicated memory.


This change is","Add object that contains obc's persisent state & logic related for reading/writing it from dedicated memory.


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,112,2017-04-02T21:27:08Z,2017-04-09T19:06:58Z,2017-04-09T19:06:59Z,MERGED,True,1665,94,51,https://github.com/zaq32,Obc persisent state,9,[],https://github.com/PW-Sat2/PWSat2OBC/pull/112,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/112#issuecomment-291205161,"Add object that contains obc's persisent state & logic related for reading/writing it from dedicated memory.


This change is",Prepare infrastructure to handle OBC's persistent state & configuraiton,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,112,2017-04-02T21:27:08Z,2017-04-09T19:06:58Z,2017-04-09T19:06:59Z,MERGED,True,1665,94,51,https://github.com/zaq32,Obc persisent state,9,[],https://github.com/PW-Sat2/PWSat2OBC/pull/112,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/112#issuecomment-291556832,"Add object that contains obc's persisent state & logic related for reading/writing it from dedicated memory.


This change is","Reviewed 26 of 47 files at r1, 2 of 3 files at r2.
Review status: 26 of 49 files reviewed at latest revision, 4 unresolved discussions.

src/obc.cpp, line 12 at r2 (raw file):

      Experiments(fs, this->adcs.GetAdcsController(), this->timeProvider), //
      Communication(this->Fdir, Hardware.I2C.Buses.Bus, fs, Experiments),  //
      framSpi(Hardware.SPI, Hardware.Pins.Flash1ChipSelect),               //

FRAM driver is part of hardware and should be put inside OBCHardware

unit_tests/mock/AdcsMocks.hpp, line 11 at r2 (raw file):

struct AdcsCoordinatorMock : adcs::IAdcsCoordinator
{
    ~AdcsCoordinatorMock();

Add default ctor

unit_tests/mock/AdcsMocks.hpp, line 27 at r2 (raw file):

{
    ~DetumblingMock();

Add default ctor

unit_tests/mock/AdcsMocks.hpp, line 35 at r2 (raw file):

struct SunPointingMock : adcs::ISunPointingSupport
{
    ~SunPointingMock();

Add default ctor

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,112,2017-04-02T21:27:08Z,2017-04-09T19:06:58Z,2017-04-09T19:06:59Z,MERGED,True,1665,94,51,https://github.com/zaq32,Obc persisent state,9,[],https://github.com/PW-Sat2/PWSat2OBC/pull/112,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/112#issuecomment-291581054,"Add object that contains obc's persisent state & logic related for reading/writing it from dedicated memory.


This change is","Review status: 19 of 51 files reviewed at latest revision, 4 unresolved discussions.

src/obc.cpp, line 12 at r2 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
FRAM driver is part of hardware and should be put inside OBCHardware

Done.

unit_tests/mock/AdcsMocks.hpp, line 11 at r2 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Add default ctor

Done.

unit_tests/mock/AdcsMocks.hpp, line 27 at r2 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Add default ctor

Done.

unit_tests/mock/AdcsMocks.hpp, line 35 at r2 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Add default ctor

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,112,2017-04-02T21:27:08Z,2017-04-09T19:06:58Z,2017-04-09T19:06:59Z,MERGED,True,1665,94,51,https://github.com/zaq32,Obc persisent state,9,[],https://github.com/PW-Sat2/PWSat2OBC/pull/112,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/112#issuecomment-291900561,"Add object that contains obc's persisent state & logic related for reading/writing it from dedicated memory.


This change is","Reviewed 18 of 49 files at r1, 1 of 3 files at r2, 15 of 16 files at r3.
Review status: all files reviewed at latest revision, 4 unresolved discussions, some commit checks failed.

libs/mission/state/PersistentStateSave.cpp, line 45 at r3 (raw file):

        obc::WritePersistentState(state.PersistentState, this->baseAddress, this->storageAccess);
    }
}

I don't think that it's needed to manage dirty flag of persistant state. Dumping it in each mission loop iteration won't slow it down (it should took about 40ms for whole 32KB)  and FRAM memory can't be damaged by too many writes (well, it can after 85 years of constant writes with 20MHz). in addition more frequent writes will prevent errors (maybe we will be able to skip scrubbing of FRAM)

libs/state/Include/state/PersistentState.hpp, line 26 at r3 (raw file):

     * @endcode
     */
    template <typename... Parts> class PersistentState

It would be wise to add some static_asserts:

that types are unique (git merge may went wrong and one line will get duplicated)
total size is smaller that maximum FRAM size (32KB)


libs/state/Include/state/TimeState.hpp, line 107 at r3 (raw file):

    inline constexpr std::uint32_t TimeState::Size()
    {
        return 2 * sizeof(decltype(std::declval<std::chrono::milliseconds>().count()));

count() is returning value of type rep (typedef inside duration), so this can be written as sizeof(decltype(lastMissionType)::rep) + sizeof(decltype(lastExternalTime)::rep)

libs/state/Include/state/antenna/AntennaState.hpp, line 15 at r3 (raw file):

    {
      public:
        AntennaState();

Docs?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,112,2017-04-02T21:27:08Z,2017-04-09T19:06:58Z,2017-04-09T19:06:59Z,MERGED,True,1665,94,51,https://github.com/zaq32,Obc persisent state,9,[],https://github.com/PW-Sat2/PWSat2OBC/pull/112,https://github.com/zaq32,6,https://github.com/PW-Sat2/PWSat2OBC/pull/112#issuecomment-292723537,"Add object that contains obc's persisent state & logic related for reading/writing it from dedicated memory.


This change is","Review status: 43 of 52 files reviewed at latest revision, 4 unresolved discussions.

libs/mission/state/PersistentStateSave.cpp, line 45 at r3 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
I don't think that it's needed to manage dirty flag of persistant state. Dumping it in each mission loop iteration won't slow it down (it should took about 40ms for whole 32KB)  and FRAM memory can't be damaged by too many writes (well, it can after 85 years of constant writes with 20MHz). in addition more frequent writes will prevent errors (maybe we will be able to skip scrubbing of FRAM)

I have extended the persistent state definition with customizable policy for state tracking.

libs/state/Include/state/PersistentState.hpp, line 26 at r3 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
It would be wise to add some static_asserts:

that types are unique (git merge may went wrong and one line will get duplicated)
total size is smaller that maximum FRAM size (32KB)


1- > Done.
2-> Current solution requires enough stack space to serialize entire persistent state. We will hit problems long before persistent state size reaches even 16KB

libs/state/Include/state/TimeState.hpp, line 107 at r3 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
count() is returning value of type rep (typedef inside duration), so this can be written as sizeof(decltype(lastMissionType)::rep) + sizeof(decltype(lastExternalTime)::rep)

Done

libs/state/Include/state/antenna/AntennaState.hpp, line 15 at r3 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Docs?

Done

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,112,2017-04-02T21:27:08Z,2017-04-09T19:06:58Z,2017-04-09T19:06:59Z,MERGED,True,1665,94,51,https://github.com/zaq32,Obc persisent state,9,[],https://github.com/PW-Sat2/PWSat2OBC/pull/112,https://github.com/Novakov,7,https://github.com/PW-Sat2/PWSat2OBC/pull/112#issuecomment-292793467,"Add object that contains obc's persisent state & logic related for reading/writing it from dedicated memory.


This change is","Reviewed 1 of 49 files at r1, 1 of 1 files at r4, 9 of 9 files at r5.
Review status: all files reviewed at latest revision, 2 unresolved discussions, some commit checks failed.

libs/mission/state/PersistentStateSave.cpp, line 45 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
I have extended the persistent state definition with customizable policy for state tracking.

ok, we can go with that solution for now but I don't think it will be necessary

libs/state/Include/state/PersistentState.hpp, line 26 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
1- > Done.
2-> Current solution requires enough stack space to serialize entire persistent state. We will hit problems long before persistent state size reaches even 16KB

True but I would add some sanity-check

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,112,2017-04-02T21:27:08Z,2017-04-09T19:06:58Z,2017-04-09T19:06:59Z,MERGED,True,1665,94,51,https://github.com/zaq32,Obc persisent state,9,[],https://github.com/PW-Sat2/PWSat2OBC/pull/112,https://github.com/Novakov,8,https://github.com/PW-Sat2/PWSat2OBC/pull/112#issuecomment-292803837,"Add object that contains obc's persisent state & logic related for reading/writing it from dedicated memory.


This change is","Reviewed 7 of 10 files at r6.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,113,2017-04-03T20:34:12Z,2017-05-06T22:28:24Z,2017-05-08T19:22:28Z,MERGED,True,1379,4,25,https://github.com/ggajoch,ITG-3200 gyroscope driver,17,[],https://github.com/PW-Sat2/PWSat2OBC/pull/113,https://github.com/ggajoch,1,https://github.com/PW-Sat2/PWSat2OBC/pull/113,"Basic driver for ITG-3200, along with unit, mock and integration tests.
This driver allows to:

initialise gyroscope (have to be done once), and should be repeatedly invoked to make sure that configuration is correct (SEE),
read data from gyroscope, this method can be invoked at any time data is available. After reading data will not be accessible for couple of ms (depending on configuration), so on predicted data rate they will be always accessible.



This change is","Basic driver for ITG-3200, along with unit, mock and integration tests.
This driver allows to:

initialise gyroscope (have to be done once), and should be repeatedly invoked to make sure that configuration is correct (SEE),
read data from gyroscope, this method can be invoked at any time data is available. After reading data will not be accessible for couple of ms (depending on configuration), so on predicted data rate they will be always accessible.



This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,113,2017-04-03T20:34:12Z,2017-05-06T22:28:24Z,2017-05-08T19:22:28Z,MERGED,True,1379,4,25,https://github.com/ggajoch,ITG-3200 gyroscope driver,17,[],https://github.com/PW-Sat2/PWSat2OBC/pull/113,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/113#issuecomment-295767912,"Basic driver for ITG-3200, along with unit, mock and integration tests.
This driver allows to:

initialise gyroscope (have to be done once), and should be repeatedly invoked to make sure that configuration is correct (SEE),
read data from gyroscope, this method can be invoked at any time data is available. After reading data will not be accessible for couple of ms (depending on configuration), so on predicted data rate they will be always accessible.



This change is","Reviewed 17 of 21 files at r1.
Review status: 17 of 21 files reviewed at latest revision, 4 unresolved discussions.

integration_tests/tests/test_gyro.py, line 17 at r1 (raw file):

        try:
            self.system.obc.gyro_read()
            self.assertFalse(True)

I get the idea but some custom message would be nice

libs/base/reader.cpp, line 88 at r1 (raw file):

}

int16_t Reader::ReadSignedWordBE() {

Format code ;)

src/obc.h, line 95 at r1 (raw file):

    /** @brief Gyroscope handling */
    devices::gyro::GyroDriver Gyro;

I guess it should go to Hardware part in OBC tree

src/commands/gyro.cpp, line 73 at r1 (raw file):

}

using namespace gyro_commands;

Why namespace if you are importing everything after all?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,113,2017-04-03T20:34:12Z,2017-05-06T22:28:24Z,2017-05-08T19:22:28Z,MERGED,True,1379,4,25,https://github.com/ggajoch,ITG-3200 gyroscope driver,17,[],https://github.com/PW-Sat2/PWSat2OBC/pull/113,https://github.com/ggajoch,3,https://github.com/PW-Sat2/PWSat2OBC/pull/113#issuecomment-295950545,"Basic driver for ITG-3200, along with unit, mock and integration tests.
This driver allows to:

initialise gyroscope (have to be done once), and should be repeatedly invoked to make sure that configuration is correct (SEE),
read data from gyroscope, this method can be invoked at any time data is available. After reading data will not be accessible for couple of ms (depending on configuration), so on predicted data rate they will be always accessible.



This change is","Review status: 11 of 22 files reviewed at latest revision, 4 unresolved discussions, some commit checks failed.

integration_tests/tests/test_gyro.py, line 17 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
I get the idea but some custom message would be nice

Done.

libs/base/reader.cpp, line 88 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Format code ;)

Done.

src/commands/gyro.cpp, line 73 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Why namespace if you are importing everything after all?

Done.

src/obc.h, line 95 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
I guess it should go to Hardware part in OBC tree

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,113,2017-04-03T20:34:12Z,2017-05-06T22:28:24Z,2017-05-08T19:22:28Z,MERGED,True,1379,4,25,https://github.com/ggajoch,ITG-3200 gyroscope driver,17,[],https://github.com/PW-Sat2/PWSat2OBC/pull/113,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/113#issuecomment-299632524,"Basic driver for ITG-3200, along with unit, mock and integration tests.
This driver allows to:

initialise gyroscope (have to be done once), and should be repeatedly invoked to make sure that configuration is correct (SEE),
read data from gyroscope, this method can be invoked at any time data is available. After reading data will not be accessible for couple of ms (depending on configuration), so on predicted data rate they will be always accessible.



This change is","Reviewed 1 of 21 files at r1, 10 of 19 files at r2, 7 of 8 files at r3.
Review status: 21 of 22 files reviewed at latest revision, 6 unresolved discussions, some commit checks failed.

libs/drivers/gyro/gyro.cpp, line 28 at r3 (raw file):

using namespace devices::gyro;

enum Registers

use scoped enum

libs/drivers/gyro/gyro.cpp, line 46 at r3 (raw file):

};

class DetailedDriver

To be honest I don't get the idea of spliting between driver and detailed driver

libs/drivers/gyro/gyro.cpp, line 213 at r3 (raw file):

    }

    System::SleepTask(100ms);

Put this in class as constexpr

unit_tests/gyro/gyroTest.cpp, line 88 at r3 (raw file):

        read[0] = 0b101;
        return I2CResult::OK;
    }));

If order of these operations is important wrap it in InSequence

unit_tests/gyro/gyroTest.cpp, line 142 at r3 (raw file):

}

TEST_F(GyroTest, config2Failed)

config2Failed is bad name

unit_tests/gyro/gyroTest.cpp, line 296 at r3 (raw file):

    EXPECT_EQ(rGyroY, gyroData.Value.Y);
    EXPECT_EQ(rGyroZ, gyroData.Value.Z);
}

Merge/rebase with current master branch - this test will need to be moved to other executable

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,113,2017-04-03T20:34:12Z,2017-05-06T22:28:24Z,2017-05-08T19:22:28Z,MERGED,True,1379,4,25,https://github.com/ggajoch,ITG-3200 gyroscope driver,17,[],https://github.com/PW-Sat2/PWSat2OBC/pull/113,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/113#issuecomment-299632527,"Basic driver for ITG-3200, along with unit, mock and integration tests.
This driver allows to:

initialise gyroscope (have to be done once), and should be repeatedly invoked to make sure that configuration is correct (SEE),
read data from gyroscope, this method can be invoked at any time data is available. After reading data will not be accessible for couple of ms (depending on configuration), so on predicted data rate they will be always accessible.



This change is","Reviewed 1 of 19 files at r2.
Review status: all files reviewed at latest revision, 6 unresolved discussions, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,113,2017-04-03T20:34:12Z,2017-05-06T22:28:24Z,2017-05-08T19:22:28Z,MERGED,True,1379,4,25,https://github.com/ggajoch,ITG-3200 gyroscope driver,17,[],https://github.com/PW-Sat2/PWSat2OBC/pull/113,https://github.com/ggajoch,6,https://github.com/PW-Sat2/PWSat2OBC/pull/113#issuecomment-299648602,"Basic driver for ITG-3200, along with unit, mock and integration tests.
This driver allows to:

initialise gyroscope (have to be done once), and should be repeatedly invoked to make sure that configuration is correct (SEE),
read data from gyroscope, this method can be invoked at any time data is available. After reading data will not be accessible for couple of ms (depending on configuration), so on predicted data rate they will be always accessible.



This change is","Review status: 18 of 25 files reviewed at latest revision, 6 unresolved discussions.

libs/drivers/gyro/gyro.cpp, line 28 at r3 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
use scoped enum

Done.

libs/drivers/gyro/gyro.cpp, line 46 at r3 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
To be honest I don't get the idea of spliting between driver and detailed driver

The idea is to have all internal processing and constants (such as Registers)  to not be exposed in the header. Header is now only high-level interface, and all actions are defined in .cpp file.

libs/drivers/gyro/gyro.cpp, line 213 at r3 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Put this in class as constexpr

Done.

unit_tests/drivers/gyro/gyroTest.cpp, line 88 at r3 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
If order of these operations is important wrap it in InSequence

Done.

unit_tests/drivers/gyro/gyroTest.cpp, line 142 at r3 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
config2Failed is bad name

Done.

unit_tests/drivers/gyro/gyroTest.cpp, line 296 at r3 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Merge/rebase with current master branch - this test will need to be moved to other executable

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,113,2017-04-03T20:34:12Z,2017-05-06T22:28:24Z,2017-05-08T19:22:28Z,MERGED,True,1379,4,25,https://github.com/ggajoch,ITG-3200 gyroscope driver,17,[],https://github.com/PW-Sat2/PWSat2OBC/pull/113,https://github.com/Novakov,7,https://github.com/PW-Sat2/PWSat2OBC/pull/113#issuecomment-299654914,"Basic driver for ITG-3200, along with unit, mock and integration tests.
This driver allows to:

initialise gyroscope (have to be done once), and should be repeatedly invoked to make sure that configuration is correct (SEE),
read data from gyroscope, this method can be invoked at any time data is available. After reading data will not be accessible for couple of ms (depending on configuration), so on predicted data rate they will be always accessible.



This change is","Reviewed 8 of 9 files at r4.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

libs/drivers/gyro/gyro.cpp, line 46 at r3 (raw file):
Previously, ggajoch (Grzegorz Gajoch) wrote
The idea is to have all internal processing and constants (such as Registers)  to not be exposed in the header. Header is now only high-level interface, and all actions are defined in .cpp file.

That's different approach that we've taken with other drivers but I will not argue as this is not essential driver

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,113,2017-04-03T20:34:12Z,2017-05-06T22:28:24Z,2017-05-08T19:22:28Z,MERGED,True,1379,4,25,https://github.com/ggajoch,ITG-3200 gyroscope driver,17,[],https://github.com/PW-Sat2/PWSat2OBC/pull/113,https://github.com/zaq32,8,https://github.com/PW-Sat2/PWSat2OBC/pull/113#issuecomment-299655159,"Basic driver for ITG-3200, along with unit, mock and integration tests.
This driver allows to:

initialise gyroscope (have to be done once), and should be repeatedly invoked to make sure that configuration is correct (SEE),
read data from gyroscope, this method can be invoked at any time data is available. After reading data will not be accessible for couple of ms (depending on configuration), so on predicted data rate they will be always accessible.



This change is","Reviewed 12 of 20 files at r2.
Review status: all files reviewed at latest revision, 5 unresolved discussions, all commit checks successful.

libs/drivers/gyro/Include/gyro/gyro.h, line 4 at r2 (raw file):

#define SRC_DEVICES_GYRO_H_

#include <stdbool.h>

unnecessary

libs/drivers/gyro/Include/gyro/gyro.h, line 5 at r2 (raw file):

#include <stdbool.h>
#include <array>

unused

libs/drivers/gyro/Include/gyro/gyro.h, line 6 at r2 (raw file):

#include <stdbool.h>
#include <array>
#include <chrono>

unused

libs/drivers/gyro/Include/gyro/gyro.h, line 11 at r2 (raw file):

#include ""utils.h""
#include ""base/os.h""

unused

src/commands/gyro.cpp, line 49 at r2 (raw file):

Main.terminal.Printf(""%d %d %d %d\n"",      //

Quoted 4 lines of code
>         result.Value.X,                        //
>         result.Value.Y,                        //
>         result.Value.Z,                        //
>         result.Value.temperature);             //

Buffer overflow: %d is for `int`s while you are passing `short int` -> reading 16 bytes while only 8 is provided

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,113,2017-04-03T20:34:12Z,2017-05-06T22:28:24Z,2017-05-08T19:22:28Z,MERGED,True,1379,4,25,https://github.com/ggajoch,ITG-3200 gyroscope driver,17,[],https://github.com/PW-Sat2/PWSat2OBC/pull/113,https://github.com/zaq32,9,https://github.com/PW-Sat2/PWSat2OBC/pull/113#issuecomment-299663483,"Basic driver for ITG-3200, along with unit, mock and integration tests.
This driver allows to:

initialise gyroscope (have to be done once), and should be repeatedly invoked to make sure that configuration is correct (SEE),
read data from gyroscope, this method can be invoked at any time data is available. After reading data will not be accessible for couple of ms (depending on configuration), so on predicted data rate they will be always accessible.



This change is","Reviewed 2 of 2 files at r5.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,113,2017-04-03T20:34:12Z,2017-05-06T22:28:24Z,2017-05-08T19:22:28Z,MERGED,True,1379,4,25,https://github.com/ggajoch,ITG-3200 gyroscope driver,17,[],https://github.com/PW-Sat2/PWSat2OBC/pull/113,https://github.com/zaq32,10,https://github.com/PW-Sat2/PWSat2OBC/pull/113#issuecomment-299669715,"Basic driver for ITG-3200, along with unit, mock and integration tests.
This driver allows to:

initialise gyroscope (have to be done once), and should be repeatedly invoked to make sure that configuration is correct (SEE),
read data from gyroscope, this method can be invoked at any time data is available. After reading data will not be accessible for couple of ms (depending on configuration), so on predicted data rate they will be always accessible.



This change is","Reviewed 4 of 4 files at r6.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,113,2017-04-03T20:34:12Z,2017-05-06T22:28:24Z,2017-05-08T19:22:28Z,MERGED,True,1379,4,25,https://github.com/ggajoch,ITG-3200 gyroscope driver,17,[],https://github.com/PW-Sat2/PWSat2OBC/pull/113,https://github.com/Novakov,11,https://github.com/PW-Sat2/PWSat2OBC/pull/113#issuecomment-299964857,"Basic driver for ITG-3200, along with unit, mock and integration tests.
This driver allows to:

initialise gyroscope (have to be done once), and should be repeatedly invoked to make sure that configuration is correct (SEE),
read data from gyroscope, this method can be invoked at any time data is available. After reading data will not be accessible for couple of ms (depending on configuration), so on predicted data rate they will be always accessible.



This change is",[Driver] Gyro,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,114,2017-04-03T21:14:02Z,2017-05-09T13:59:09Z,2017-05-09T13:59:10Z,MERGED,True,11865,4,13,https://github.com/pwec,Adcs integration - detumbling code,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/114,https://github.com/pwec,1,https://github.com/PW-Sat2/PWSat2OBC/pull/114,"Detumbling algorithm implemented and cross-validated with latest state of matlab simulation

public interface - types and units - follows @ggajoch imtq interfaces
cross-validation UT with test data added



This change is","Detumbling algorithm implemented and cross-validated with latest state of matlab simulation

public interface - types and units - follows @ggajoch imtq interfaces
cross-validation UT with test data added



This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,114,2017-04-03T21:14:02Z,2017-05-09T13:59:09Z,2017-05-09T13:59:10Z,MERGED,True,11865,4,13,https://github.com/pwec,Adcs integration - detumbling code,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/114,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/114#issuecomment-292720906,"Detumbling algorithm implemented and cross-validated with latest state of matlab simulation

public interface - types and units - follows @ggajoch imtq interfaces
cross-validation UT with test data added



This change is","Reviewed 1 of 9 files at r1, 7 of 10 files at r5, 4 of 4 files at r6.
Review status: all files reviewed at latest revision, 4 unresolved discussions, some commit checks failed.

libs/adcs_experiments/CMakeLists.txt, line 1 at r6 (raw file):

set(NAME adcs_experiments)

It this library implementation of ADCS experiments (Detumbling/SunPointing) or implementation of algorithms? If the latter, this library should be called adcs_experimental

libs/adcs_experiments/detumbling.cpp, line 72 at r6 (raw file):

    std::cout << ""commDipoleBdot: "";
    std::cout << commDipoleBdot << std::endl;
#endif

To be honest - that looks terrible. Could you elaborate a bit why it is needed? Maybe it is something that should be later stored as part of experiment results?

libs/adcs_experiments/Include/adcs_experiments/detumbling.hpp, line 36 at r6 (raw file):

             * @default 0.2
             */
            float dt = 0.2;

If this value is constant, it should be constexpr

unit_tests/adcs_experiments/CMakeLists.txt, line 10 at r6 (raw file):

  )
  
  include_directories(""${PROJECT_BINARY_DIR}"")

${CMAKE_CURRENT_SOURCE_DIR} and ${CMAKE_CURRENT_BINARY_DIR} are variables that you are looking for instead of path relative to project root

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,114,2017-04-03T21:14:02Z,2017-05-09T13:59:09Z,2017-05-09T13:59:10Z,MERGED,True,11865,4,13,https://github.com/pwec,Adcs integration - detumbling code,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/114,https://github.com/pwec,3,https://github.com/PW-Sat2/PWSat2OBC/pull/114#issuecomment-292728215,"Detumbling algorithm implemented and cross-validated with latest state of matlab simulation

public interface - types and units - follows @ggajoch imtq interfaces
cross-validation UT with test data added



This change is","Review status: all files reviewed at latest revision, 4 unresolved discussions, some commit checks failed.

libs/adcs_experiments/detumbling.cpp, line 72 at r6 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
To be honest - that looks terrible. Could you elaborate a bit why it is needed? Maybe it is something that should be later stored as part of experiment results?

Do you mean block of cout's? I am not really fan of it.... Hmm I understand that's only way to debug it and if cross-validation test fail this is only way to find problem (comparing to matlab steps). Do you know better way to keep such debug code without need to re-write it?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,114,2017-04-03T21:14:02Z,2017-05-09T13:59:09Z,2017-05-09T13:59:10Z,MERGED,True,11865,4,13,https://github.com/pwec,Adcs integration - detumbling code,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/114,https://github.com/pwec,4,https://github.com/PW-Sat2/PWSat2OBC/pull/114#issuecomment-293038307,"Detumbling algorithm implemented and cross-validated with latest state of matlab simulation

public interface - types and units - follows @ggajoch imtq interfaces
cross-validation UT with test data added



This change is","libs/adcs_experiments/CMakeLists.txt, line 1 at r6 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
It this library implementation of ADCS experiments (Detumbling/SunPointing) or implementation of algorithms? If the latter, this library should be called adcs_experimental

library adcs_experimental is already created in adcs/experimental so it can't be named like that or is the detumbling code should be placed under adcs/experimental? (was not aware about existence of this directory)

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,114,2017-04-03T21:14:02Z,2017-05-09T13:59:09Z,2017-05-09T13:59:10Z,MERGED,True,11865,4,13,https://github.com/pwec,Adcs integration - detumbling code,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/114,https://github.com/pwec,5,https://github.com/PW-Sat2/PWSat2OBC/pull/114#issuecomment-293049276,"Detumbling algorithm implemented and cross-validated with latest state of matlab simulation

public interface - types and units - follows @ggajoch imtq interfaces
cross-validation UT with test data added



This change is","unit_tests/adcs_experiments/CMakeLists.txt, line 10 at r6 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
${CMAKE_CURRENT_SOURCE_DIR} and ${CMAKE_CURRENT_BINARY_DIR} are variables that you are looking for instead of path relative to project root

tried, variables you mentioned about are empty/not created

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,114,2017-04-03T21:14:02Z,2017-05-09T13:59:09Z,2017-05-09T13:59:10Z,MERGED,True,11865,4,13,https://github.com/pwec,Adcs integration - detumbling code,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/114,https://github.com/Novakov,6,https://github.com/PW-Sat2/PWSat2OBC/pull/114#issuecomment-293071029,"Detumbling algorithm implemented and cross-validated with latest state of matlab simulation

public interface - types and units - follows @ggajoch imtq interfaces
cross-validation UT with test data added



This change is","Review status: all files reviewed at latest revision, 4 unresolved discussions, some commit checks failed.

libs/adcs_experiments/CMakeLists.txt, line 1 at r6 (raw file):
Previously, pwec (Piotr Weclewski) wrote
library adcs_experimental is already created in adcs/experimental so it can't be named like that or is the detumbling code should be placed under adcs/experimental? (was not aware about existence of this directory)

I think it should go there - if you don't want to integrate it with rest of OBC infrastructure you can just put in that library - not nice but will keep naming consistent

libs/adcs_experiments/detumbling.cpp, line 72 at r6 (raw file):
Previously, pwec (Piotr Weclewski) wrote
Do you mean block of cout's? I am not really fan of it.... Hmm I understand that's only way to debug it and if cross-validation test fail this is only way to find problem (comparing to matlab steps). Do you know better way to keep such debug code without need to re-write it?

I don't know - maybe some callbacks or maybe this can be separated into few methods? @zaq32 any idea?

unit_tests/adcs_experiments/CMakeLists.txt, line 10 at r6 (raw file):
Previously, pwec (Piotr Weclewski) wrote
tried, variables you mentioned about are empty/not created

They are used in many CMakeLists through out the repository - if you have problems with them, asks anybody from OBC team on slack

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,114,2017-04-03T21:14:02Z,2017-05-09T13:59:09Z,2017-05-09T13:59:10Z,MERGED,True,11865,4,13,https://github.com/pwec,Adcs integration - detumbling code,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/114,https://github.com/pwec,7,https://github.com/PW-Sat2/PWSat2OBC/pull/114#issuecomment-293098090,"Detumbling algorithm implemented and cross-validated with latest state of matlab simulation

public interface - types and units - follows @ggajoch imtq interfaces
cross-validation UT with test data added



This change is","unit_tests/adcs/experimental/CMakeLists.txt, line 10 at r6 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
They are used in many CMakeLists through out the repository - if you have problems with them, asks anybody from OBC team on slack

solved

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,114,2017-04-03T21:14:02Z,2017-05-09T13:59:09Z,2017-05-09T13:59:10Z,MERGED,True,11865,4,13,https://github.com/pwec,Adcs integration - detumbling code,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/114,https://github.com/pwec,8,https://github.com/PW-Sat2/PWSat2OBC/pull/114#issuecomment-293098241,"Detumbling algorithm implemented and cross-validated with latest state of matlab simulation

public interface - types and units - follows @ggajoch imtq interfaces
cross-validation UT with test data added



This change is","libs/adcs/experimental/Detumbling.cpp, line 72 at r6 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
I don't know - maybe some callbacks or maybe this can be separated into few methods? @zaq32 any idea?

removed

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,114,2017-04-03T21:14:02Z,2017-05-09T13:59:09Z,2017-05-09T13:59:10Z,MERGED,True,11865,4,13,https://github.com/pwec,Adcs integration - detumbling code,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/114,https://github.com/Novakov,9,https://github.com/PW-Sat2/PWSat2OBC/pull/114#issuecomment-293306054,"Detumbling algorithm implemented and cross-validated with latest state of matlab simulation

public interface - types and units - follows @ggajoch imtq interfaces
cross-validation UT with test data added



This change is","Reviewed 13 of 19 files at r7.
Review status: 9 of 13 files reviewed at latest revision, 2 unresolved discussions, some commit checks failed.

libs/adcs/experimental/Include/adcs/Detumbling.hpp, line 42 at r7 (raw file):

             * @default 0.2
             */
            float wCutOff = 0.2;

If this value is constant, it should be constexpr

libs/adcs/experimental/Include/adcs/Detumbling.hpp, line 48 at r7 (raw file):

             * @default 2.879285e-5 * 1e15 -- unit conv - original gain * convwersion
             */
            float bDotGain = 2.879285e-5 * 1e15; // unit conv - original gain * convwersion

If this value is constant, it should be constexpr

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,114,2017-04-03T21:14:02Z,2017-05-09T13:59:09Z,2017-05-09T13:59:10Z,MERGED,True,11865,4,13,https://github.com/pwec,Adcs integration - detumbling code,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/114,https://github.com/pwec,10,https://github.com/PW-Sat2/PWSat2OBC/pull/114#issuecomment-293356920,"Detumbling algorithm implemented and cross-validated with latest state of matlab simulation

public interface - types and units - follows @ggajoch imtq interfaces
cross-validation UT with test data added



This change is","libs/adcs/experimental/Include/adcs/Detumbling.hpp, line 42 at r7 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
If this value is constant, it should be constexpr

No this is not a constant, this is external parameter that could be changed from gs.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,114,2017-04-03T21:14:02Z,2017-05-09T13:59:09Z,2017-05-09T13:59:10Z,MERGED,True,11865,4,13,https://github.com/pwec,Adcs integration - detumbling code,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/114,https://github.com/pwec,11,https://github.com/PW-Sat2/PWSat2OBC/pull/114#issuecomment-293356997,"Detumbling algorithm implemented and cross-validated with latest state of matlab simulation

public interface - types and units - follows @ggajoch imtq interfaces
cross-validation UT with test data added



This change is","libs/adcs/experimental/Include/adcs/Detumbling.hpp, line 48 at r7 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
If this value is constant, it should be constexpr

No this is not a constant, this is external parameter that could be changed from gs.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,114,2017-04-03T21:14:02Z,2017-05-09T13:59:09Z,2017-05-09T13:59:10Z,MERGED,True,11865,4,13,https://github.com/pwec,Adcs integration - detumbling code,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/114,https://github.com/zaq32,12,https://github.com/PW-Sat2/PWSat2OBC/pull/114#issuecomment-294296243,"Detumbling algorithm implemented and cross-validated with latest state of matlab simulation

public interface - types and units - follows @ggajoch imtq interfaces
cross-validation UT with test data added



This change is","Reviewed 4 of 19 files at r7.
Review status: 12 of 13 files reviewed at latest revision, 4 unresolved discussions, some commit checks failed.

libs/adcs/experimental/Include/adcs/Detumbling.hpp, line 29 at r7 (raw file):

         * @brief Set of detumbling algorithm  parameters
         */
        class Parameters final

Put the Parameters type separately so we do not have to include entire detumbling header when we would like to use just its parameters

libs/adcs/experimental/Include/adcs/Detumbling.hpp, line 65 at r7 (raw file):

            State() = default;

            State(const Parameters& p)

constructors should not be defined inline

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,114,2017-04-03T21:14:02Z,2017-05-09T13:59:09Z,2017-05-09T13:59:10Z,MERGED,True,11865,4,13,https://github.com/pwec,Adcs integration - detumbling code,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/114,https://github.com/ggajoch,13,https://github.com/PW-Sat2/PWSat2OBC/pull/114#issuecomment-294344921,"Detumbling algorithm implemented and cross-validated with latest state of matlab simulation

public interface - types and units - follows @ggajoch imtq interfaces
cross-validation UT with test data added



This change is","Reviewed 2 of 17 files at r5.
Review status: 12 of 13 files reviewed at latest revision, 5 unresolved discussions, some commit checks failed.

libs/adcs_experiments/detumbling.cpp, line 59 at r5 (raw file):

    {
        commDipoleBdot = mtmDot * (-state.params.bDotGain)
                / (powf((mgmt_input).norm(), 2));

redundant parentheses

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,114,2017-04-03T21:14:02Z,2017-05-09T13:59:09Z,2017-05-09T13:59:10Z,MERGED,True,11865,4,13,https://github.com/pwec,Adcs integration - detumbling code,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/114,https://github.com/pwec,14,https://github.com/PW-Sat2/PWSat2OBC/pull/114#issuecomment-295522947,"Detumbling algorithm implemented and cross-validated with latest state of matlab simulation

public interface - types and units - follows @ggajoch imtq interfaces
cross-validation UT with test data added



This change is","libs/adcs/experimental/Include/adcs/Detumbling.hpp, line 65 at r7 (raw file):
Previously, zaq32 (ukasz ak) wrote
constructors should not be defined inline

I understand that this one default is ok and only  second one is to be moved?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,114,2017-04-03T21:14:02Z,2017-05-09T13:59:09Z,2017-05-09T13:59:10Z,MERGED,True,11865,4,13,https://github.com/pwec,Adcs integration - detumbling code,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/114,https://github.com/pwec,15,https://github.com/PW-Sat2/PWSat2OBC/pull/114#issuecomment-295523947,"Detumbling algorithm implemented and cross-validated with latest state of matlab simulation

public interface - types and units - follows @ggajoch imtq interfaces
cross-validation UT with test data added



This change is","libs/adcs/experimental/Include/adcs/Detumbling.hpp, line 29 at r7 (raw file):
Previously, zaq32 (ukasz ak) wrote
Put the Parameters type separately so we do not have to include entire detumbling header when we would like to use just its parameters

as you prefer... so understand to put them to completely separated file? let me know if you want to have state separated also - it is also created/stored externally...

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,114,2017-04-03T21:14:02Z,2017-05-09T13:59:09Z,2017-05-09T13:59:10Z,MERGED,True,11865,4,13,https://github.com/pwec,Adcs integration - detumbling code,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/114,https://github.com/Novakov,16,https://github.com/PW-Sat2/PWSat2OBC/pull/114#issuecomment-295851380,"Detumbling algorithm implemented and cross-validated with latest state of matlab simulation

public interface - types and units - follows @ggajoch imtq interfaces
cross-validation UT with test data added



This change is","Reviewed 3 of 19 files at r7.
Review status: all files reviewed at latest revision, 3 unresolved discussions, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,114,2017-04-03T21:14:02Z,2017-05-09T13:59:09Z,2017-05-09T13:59:10Z,MERGED,True,11865,4,13,https://github.com/pwec,Adcs integration - detumbling code,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/114,https://github.com/zaq32,17,https://github.com/PW-Sat2/PWSat2OBC/pull/114#issuecomment-296149425,"Detumbling algorithm implemented and cross-validated with latest state of matlab simulation

public interface - types and units - follows @ggajoch imtq interfaces
cross-validation UT with test data added



This change is","Review status: all files reviewed at latest revision, 3 unresolved discussions, some commit checks failed.

libs/adcs/experimental/Include/adcs/Detumbling.hpp, line 29 at r7 (raw file):
Previously, pwec (Piotr Weclewski) wrote
as you prefer... so understand to put them to completely separated file? let me know if you want to have state separated also - it is also created/stored externally...

The idea is to put the algorithm parameters in obc's persistent state which will allow us to modify them after the launch if need arises. Therefore the parameters type should be default constructible. Also the default constructed object should contain valid configuration that can be used to run the algorithm. Preferably this should be default algorithm configuration.

libs/adcs/experimental/Include/adcs/Detumbling.hpp, line 65 at r7 (raw file):
Previously, pwec (Piotr Weclewski) wrote
I understand that this one default is ok and only  second one is to be moved?

yes

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,114,2017-04-03T21:14:02Z,2017-05-09T13:59:09Z,2017-05-09T13:59:10Z,MERGED,True,11865,4,13,https://github.com/pwec,Adcs integration - detumbling code,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/114,https://github.com/ggajoch,18,https://github.com/PW-Sat2/PWSat2OBC/pull/114#issuecomment-296412718,"Detumbling algorithm implemented and cross-validated with latest state of matlab simulation

public interface - types and units - follows @ggajoch imtq interfaces
cross-validation UT with test data added



This change is","Review status: all files reviewed at latest revision, 3 unresolved discussions, some commit checks failed.

libs/adcs/experimental/Include/adcs/Detumbling.hpp, line 29 at r7 (raw file):
Previously, zaq32 (ukasz ak) wrote
The idea is to put the algorithm parameters in obc's persistent state which will allow us to modify them after the launch if need arises. Therefore the parameters type should be default constructible. Also the default constructed object should contain valid configuration that can be used to run the algorithm. Preferably this should be default algorithm configuration.

@zaq32: I don't think those parameters should be in persistent state. They should be send from earth in telecommand which will enable this detumbling mode - and there is no point for wasting persistent (FRAM/FLASH) memory for storing them as this algorithm will be never invoked ""by its own"". Some parameters are constant (e.g. time step) but rest has to be send in the proper TC.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,114,2017-04-03T21:14:02Z,2017-05-09T13:59:09Z,2017-05-09T13:59:10Z,MERGED,True,11865,4,13,https://github.com/pwec,Adcs integration - detumbling code,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/114,https://github.com/zaq32,19,https://github.com/PW-Sat2/PWSat2OBC/pull/114#issuecomment-296415084,"Detumbling algorithm implemented and cross-validated with latest state of matlab simulation

public interface - types and units - follows @ggajoch imtq interfaces
cross-validation UT with test data added



This change is","Review status: all files reviewed at latest revision, 3 unresolved discussions, some commit checks failed.

libs/adcs/experimental/Include/adcs/Detumbling.hpp, line 29 at r7 (raw file):
Previously, ggajoch (Grzegorz Gajoch) wrote
@zaq32: I don't think those parameters should be in persistent state. They should be send from earth in telecommand which will enable this detumbling mode - and there is no point for wasting persistent (FRAM/FLASH) memory for storing them as this algorithm will be never invoked ""by its own"". Some parameters are constant (e.g. time step) but rest has to be send in the proper TC.

ok

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,114,2017-04-03T21:14:02Z,2017-05-09T13:59:09Z,2017-05-09T13:59:10Z,MERGED,True,11865,4,13,https://github.com/pwec,Adcs integration - detumbling code,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/114,https://github.com/pwec,20,https://github.com/PW-Sat2/PWSat2OBC/pull/114#issuecomment-298205887,"Detumbling algorithm implemented and cross-validated with latest state of matlab simulation

public interface - types and units - follows @ggajoch imtq interfaces
cross-validation UT with test data added



This change is",just spotted that after unitary test split everything on this PR must be reorganised. After changes review I am confused why adcs is now in other. Anyway I wasted today on trying to make it working but I failed - don't know why h.in mechanism is not properly including files anymore... before I start to reorganise things I need confirmation if all adcs experiments should be placed in unit_tests/others/adcs/experimental/,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,114,2017-04-03T21:14:02Z,2017-05-09T13:59:09Z,2017-05-09T13:59:10Z,MERGED,True,11865,4,13,https://github.com/pwec,Adcs integration - detumbling code,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/114,https://github.com/Novakov,21,https://github.com/PW-Sat2/PWSat2OBC/pull/114#issuecomment-298335137,"Detumbling algorithm implemented and cross-validated with latest state of matlab simulation

public interface - types and units - follows @ggajoch imtq interfaces
cross-validation UT with test data added



This change is","It's under other because it does not fit elsewhere - you can create seperate executable if you like but, at least for now, it can be under unit_tests/others/adcs/experimental
If you have trouble building it's best to ask someone to help :)

Review status: 9 of 12 files reviewed at latest revision, 3 unresolved discussions.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,114,2017-04-03T21:14:02Z,2017-05-09T13:59:09Z,2017-05-09T13:59:10Z,MERGED,True,11865,4,13,https://github.com/pwec,Adcs integration - detumbling code,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/114,https://github.com/pwec,22,https://github.com/PW-Sat2/PWSat2OBC/pull/114#issuecomment-298734399,"Detumbling algorithm implemented and cross-validated with latest state of matlab simulation

public interface - types and units - follows @ggajoch imtq interfaces
cross-validation UT with test data added



This change is","@Novakov looks lie it is done, tests are passing",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,114,2017-04-03T21:14:02Z,2017-05-09T13:59:09Z,2017-05-09T13:59:10Z,MERGED,True,11865,4,13,https://github.com/pwec,Adcs integration - detumbling code,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/114,https://github.com/zaq32,23,https://github.com/PW-Sat2/PWSat2OBC/pull/114#issuecomment-299173059,"Detumbling algorithm implemented and cross-validated with latest state of matlab simulation

public interface - types and units - follows @ggajoch imtq interfaces
cross-validation UT with test data added



This change is","Reviewed 6 of 24 files at r7, 3 of 5 files at r8, 11 of 11 files at r9.
Review status: all files reviewed at latest revision, 2 unresolved discussions.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,114,2017-04-03T21:14:02Z,2017-05-09T13:59:09Z,2017-05-09T13:59:10Z,MERGED,True,11865,4,13,https://github.com/pwec,Adcs integration - detumbling code,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/114,https://github.com/zaq32,24,https://github.com/PW-Sat2/PWSat2OBC/pull/114#issuecomment-299173225,"Detumbling algorithm implemented and cross-validated with latest state of matlab simulation

public interface - types and units - follows @ggajoch imtq interfaces
cross-validation UT with test data added



This change is","Reviewed 1 of 21 files at r5.
Review status: all files reviewed at latest revision, 2 unresolved discussions.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,114,2017-04-03T21:14:02Z,2017-05-09T13:59:09Z,2017-05-09T13:59:10Z,MERGED,True,11865,4,13,https://github.com/pwec,Adcs integration - detumbling code,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/114,https://github.com/ggajoch,25,https://github.com/PW-Sat2/PWSat2OBC/pull/114#issuecomment-299662437,"Detumbling algorithm implemented and cross-validated with latest state of matlab simulation

public interface - types and units - follows @ggajoch imtq interfaces
cross-validation UT with test data added



This change is","Review status: all files reviewed at latest revision, 1 unresolved discussion, some commit checks failed.

libs/adcs/experimental/Detumbling.cpp, line 59 at r5 (raw file):
Previously, ggajoch (Grzegorz Gajoch) wrote
redundant parentheses

OK

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,114,2017-04-03T21:14:02Z,2017-05-09T13:59:09Z,2017-05-09T13:59:10Z,MERGED,True,11865,4,13,https://github.com/pwec,Adcs integration - detumbling code,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/114,https://github.com/Novakov,26,https://github.com/PW-Sat2/PWSat2OBC/pull/114#issuecomment-300073928,"Detumbling algorithm implemented and cross-validated with latest state of matlab simulation

public interface - types and units - follows @ggajoch imtq interfaces
cross-validation UT with test data added



This change is","Reviewed 1 of 1 files at r10.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,114,2017-04-03T21:14:02Z,2017-05-09T13:59:09Z,2017-05-09T13:59:10Z,MERGED,True,11865,4,13,https://github.com/pwec,Adcs integration - detumbling code,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/114,https://github.com/kfazi,27,https://github.com/PW-Sat2/PWSat2OBC/pull/114#issuecomment-300160277,"Detumbling algorithm implemented and cross-validated with latest state of matlab simulation

public interface - types and units - follows @ggajoch imtq interfaces
cross-validation UT with test data added



This change is","Reviewed 2 of 2 files at r11.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,114,2017-04-03T21:14:02Z,2017-05-09T13:59:09Z,2017-05-09T13:59:10Z,MERGED,True,11865,4,13,https://github.com/pwec,Adcs integration - detumbling code,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/114,https://github.com/kfazi,28,https://github.com/PW-Sat2/PWSat2OBC/pull/114#issuecomment-300160670,"Detumbling algorithm implemented and cross-validated with latest state of matlab simulation

public interface - types and units - follows @ggajoch imtq interfaces
cross-validation UT with test data added



This change is","Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,114,2017-04-03T21:14:02Z,2017-05-09T13:59:09Z,2017-05-09T13:59:10Z,MERGED,True,11865,4,13,https://github.com/pwec,Adcs integration - detumbling code,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/114,https://github.com/Novakov,29,https://github.com/PW-Sat2/PWSat2OBC/pull/114#issuecomment-300173187,"Detumbling algorithm implemented and cross-validated with latest state of matlab simulation

public interface - types and units - follows @ggajoch imtq interfaces
cross-validation UT with test data added



This change is","Reviewed 7 of 24 files at r7, 2 of 5 files at r8, 10 of 11 files at r9, 2 of 2 files at r11.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,115,2017-04-04T19:34:40Z,2017-04-05T05:10:22Z,2017-04-05T05:10:23Z,MERGED,True,33,7,3,https://github.com/Novakov,Fixed off by one error in RTC time encoding,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/115,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/115,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,115,2017-04-04T19:34:40Z,2017-04-05T05:10:22Z,2017-04-05T05:10:23Z,MERGED,True,33,7,3,https://github.com/Novakov,Fixed off by one error in RTC time encoding,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/115,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/115#issuecomment-291610057,This change is,"FYI: @mandrek44

Review status: 0 of 3 files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,115,2017-04-04T19:34:40Z,2017-04-05T05:10:22Z,2017-04-05T05:10:23Z,MERGED,True,33,7,3,https://github.com/Novakov,Fixed off by one error in RTC time encoding,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/115,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/115#issuecomment-291755951,This change is,"Reviewed 3 of 3 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,116,2017-04-05T15:40:19Z,2017-04-24T16:24:19Z,2017-04-24T16:24:20Z,MERGED,True,35,0,1,https://github.com/Novakov,Documented runlevels design,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/116,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/116,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,116,2017-04-05T15:40:19Z,2017-04-24T16:24:19Z,2017-04-24T16:24:20Z,MERGED,True,35,0,1,https://github.com/Novakov,Documented runlevels design,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/116,https://github.com/ggajoch,2,https://github.com/PW-Sat2/PWSat2OBC/pull/116#issuecomment-291965736,This change is,"Review status: 0 of 1 files reviewed at latest revision, 1 unresolved discussion, some commit checks failed.

doc/Runlevels.md, line 28 at r1 (raw file):

## How-to: staying on bootloader runlevel
During startup bootloader checks if pin @ref obc::OBCGPIO::SysClear is low (*TBC*). If not, normal boot procedure is executed up to run level 3. When that pin is low during startup, OBC stays in bootloader for T<sub>boot_timeout</sub> (*TBD*) seconds waiting for commands from terminal. If no command is entered in T<sub>boot\_timeout</sub> than normal boot precedure is performed.

For now on access port we have only one UART for OBC. We can add GPIO pin to fullfil this requirement but IMO it will be better to wait for UART command (similar mechanism as in bootloader). This method can also reduce fault probability (it is easier to alter pin state than send proper command via UART).

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,116,2017-04-05T15:40:19Z,2017-04-24T16:24:19Z,2017-04-24T16:24:20Z,MERGED,True,35,0,1,https://github.com/Novakov,Documented runlevels design,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/116,https://github.com/ggajoch,3,https://github.com/PW-Sat2/PWSat2OBC/pull/116#issuecomment-291965805,This change is,"Reviewed 1 of 1 files at r1.
Review status: all files reviewed at latest revision, 1 unresolved discussion, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,116,2017-04-05T15:40:19Z,2017-04-24T16:24:19Z,2017-04-24T16:24:20Z,MERGED,True,35,0,1,https://github.com/Novakov,Documented runlevels design,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/116,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/116#issuecomment-295813781,This change is,"Review status: 0 of 1 files reviewed at latest revision, 1 unresolved discussion.

doc/Runlevels.md, line 28 at r1 (raw file):
Previously, ggajoch (Grzegorz Gajoch) wrote
For now on access port we have only one UART for OBC. We can add GPIO pin to fullfil this requirement but IMO it will be better to wait for UART command (similar mechanism as in bootloader). This method can also reduce fault probability (it is easier to alter pin state than send proper command via UART).

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,116,2017-04-05T15:40:19Z,2017-04-24T16:24:19Z,2017-04-24T16:24:20Z,MERGED,True,35,0,1,https://github.com/Novakov,Documented runlevels design,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/116,https://github.com/ggajoch,5,https://github.com/PW-Sat2/PWSat2OBC/pull/116#issuecomment-295963455,This change is,"Review status: 0 of 1 files reviewed at latest revision, 1 unresolved discussion, some commit checks failed.

doc/Runlevels.md, line 28 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Done.

Will this pin be necessary on flight model? I understand that is will be helpful to speedup testing, but I don't see a usage for it on flight hardware. Maybe this should be explicitly written here?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,116,2017-04-05T15:40:19Z,2017-04-24T16:24:19Z,2017-04-24T16:24:20Z,MERGED,True,35,0,1,https://github.com/Novakov,Documented runlevels design,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/116,https://github.com/zaq32,6,https://github.com/PW-Sat2/PWSat2OBC/pull/116#issuecomment-296148434,This change is,"Review status: 0 of 1 files reviewed at latest revision, 1 unresolved discussion, some commit checks failed.

doc/Runlevels.md, line 28 at r1 (raw file):
Previously, ggajoch (Grzegorz Gajoch) wrote
Will this pin be necessary on flight model? I understand that is will be helpful to speedup testing, but I don't see a usage for it on flight hardware. Maybe this should be explicitly written here?

This description no longer mentions anything exception uart.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,116,2017-04-05T15:40:19Z,2017-04-24T16:24:19Z,2017-04-24T16:24:20Z,MERGED,True,35,0,1,https://github.com/Novakov,Documented runlevels design,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/116,https://github.com/zaq32,7,https://github.com/PW-Sat2/PWSat2OBC/pull/116#issuecomment-296719053,This change is,"Reviewed 1 of 1 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,117,2017-04-05T16:33:32Z,2017-04-05T17:35:29Z,2017-04-05T17:35:31Z,MERGED,True,51,2,6,https://github.com/Novakov,Terminal command: set comm idle state,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/117,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/117,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,117,2017-04-05T16:33:32Z,2017-04-05T17:35:29Z,2017-04-05T17:35:31Z,MERGED,True,51,2,6,https://github.com/Novakov,Terminal command: set comm idle state,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/117,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/117#issuecomment-291919526,This change is,"FYI: @ggajoch

Review status: 0 of 6 files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{'THUMBS_UP': ['https://github.com/ggajoch']}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,117,2017-04-05T16:33:32Z,2017-04-05T17:35:29Z,2017-04-05T17:35:31Z,MERGED,True,51,2,6,https://github.com/Novakov,Terminal command: set comm idle state,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/117,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/117#issuecomment-291920414,This change is,"Reviewed 6 of 6 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,118,2017-04-05T17:32:40Z,2017-04-07T13:18:47Z,2017-04-08T09:46:37Z,MERGED,True,266,216,26,https://github.com/Novakov,WIP: STM mock,10,[],https://github.com/PW-Sat2/PWSat2OBC/pull/118,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/118,"Support for STM mock


This change is","Support for STM mock


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,119,2017-04-05T18:26:30Z,2017-04-05T18:33:26Z,2017-04-05T18:33:27Z,MERGED,True,2,2,1,https://github.com/Novakov,Fix race condition in detumbling experiment test,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/119,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/119,"In detumbling experiment test, experiment was commanded to run for 4
hours. After that OBC time was advanced also by 4 hours, however it was
not enough as during next mission loop OBC time was few milliseconds
before scheduled experiment end.


This change is","In detumbling experiment test, experiment was commanded to run for 4
hours. After that OBC time was advanced also by 4 hours, however it was
not enough as during next mission loop OBC time was few milliseconds
before scheduled experiment end.


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,119,2017-04-05T18:26:30Z,2017-04-05T18:33:26Z,2017-04-05T18:33:27Z,MERGED,True,2,2,1,https://github.com/Novakov,Fix race condition in detumbling experiment test,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/119,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/119#issuecomment-291953352,"In detumbling experiment test, experiment was commanded to run for 4
hours. After that OBC time was advanced also by 4 hours, however it was
not enough as during next mission loop OBC time was few milliseconds
before scheduled experiment end.


This change is","Reviewed 1 of 1 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,120,2017-04-05T19:18:04Z,2017-04-20T18:43:54Z,2017-04-20T18:43:55Z,MERGED,True,518,264,7,https://github.com/zaq32,Update Comm driver to support isis variant of i2c implementation,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/120,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/120,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,120,2017-04-05T19:18:04Z,2017-04-20T18:43:54Z,2017-04-20T18:43:55Z,MERGED,True,518,264,7,https://github.com/zaq32,Update Comm driver to support isis variant of i2c implementation,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/120,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/120#issuecomment-291967801,This change is,[FIX] fix COMM driver to support I2C write & read,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,120,2017-04-05T19:18:04Z,2017-04-20T18:43:54Z,2017-04-20T18:43:55Z,MERGED,True,518,264,7,https://github.com/zaq32,Update Comm driver to support isis variant of i2c implementation,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/120,https://github.com/ggajoch,3,https://github.com/PW-Sat2/PWSat2OBC/pull/120#issuecomment-291969751,This change is,"Review status: 0 of 6 files reviewed at latest revision, 1 unresolved discussion.

libs/drivers/comm/comm.cpp, line 89 at r1 (raw file):

    }

    System::SleepTask(2ms);

do we need this delay? We can test it tommorow if it is necessary.
Also, take note that it will be ~10 ms delay in current FreeRTOS configuration.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,120,2017-04-05T19:18:04Z,2017-04-20T18:43:54Z,2017-04-20T18:43:55Z,MERGED,True,518,264,7,https://github.com/zaq32,Update Comm driver to support isis variant of i2c implementation,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/120,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/120#issuecomment-291971324,This change is,"Review status: 0 of 6 files reviewed at latest revision, 1 unresolved discussion.

libs/drivers/comm/comm.cpp, line 89 at r1 (raw file):
Previously, ggajoch (Grzegorz Gajoch) wrote
do we need this delay? We can test it tommorow if it is necessary.
Also, take note that it will be ~10 ms delay in current FreeRTOS configuration.

Please do test it and if possible determine if it is needed and how short it can be.
As for the actual delay length I took 2ms from our previous tests and also in case that we decide to increase FreeRTPOS systick frequency.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,120,2017-04-05T19:18:04Z,2017-04-20T18:43:54Z,2017-04-20T18:43:55Z,MERGED,True,518,264,7,https://github.com/zaq32,Update Comm driver to support isis variant of i2c implementation,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/120,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/120#issuecomment-291972066,This change is,"Reviewed 6 of 6 files at r1.
Review status: all files reviewed at latest revision, 2 unresolved discussions.

libs/drivers/comm/comm.cpp, line 72 at r1 (raw file):

}

bool CommObject::SendBufferWithResponse(Address address, //

It's tricky that inputBuffer must contain command as it first byte. I would expect that method with such signature will compose command + inputBuffer for sending - which not realy good solution for us. I would say that skipping command parameter and extracting command from first element of inputBuffer

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,120,2017-04-05T19:18:04Z,2017-04-20T18:43:54Z,2017-04-20T18:43:55Z,MERGED,True,518,264,7,https://github.com/zaq32,Update Comm driver to support isis variant of i2c implementation,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/120,https://github.com/zaq32,6,https://github.com/PW-Sat2/PWSat2OBC/pull/120#issuecomment-291978931,This change is,"Review status: 4 of 6 files reviewed at latest revision, 2 unresolved discussions.

libs/drivers/comm/comm.cpp, line 72 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
It's tricky that inputBuffer must contain command as it first byte. I would expect that method with such signature will compose command + inputBuffer for sending - which not realy good solution for us. I would say that skipping command parameter and extracting command from first element of inputBuffer

Fixed

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,120,2017-04-05T19:18:04Z,2017-04-20T18:43:54Z,2017-04-20T18:43:55Z,MERGED,True,518,264,7,https://github.com/zaq32,Update Comm driver to support isis variant of i2c implementation,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/120,https://github.com/Novakov,7,https://github.com/PW-Sat2/PWSat2OBC/pull/120#issuecomment-291979371,This change is,"Reviewed 2 of 2 files at r2.
Review status: all files reviewed at latest revision, 2 unresolved discussions.

libs/drivers/comm/Include/comm/CommDriver.hpp, line 247 at r2 (raw file):

     * i2c clock stretching for signaling that it is not ready with the answer.
     * @param[in] address Address of the device which should receive the command.
     * @param[in] command Command code of request being send. Strictly for logging purposes.

Update docs

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,120,2017-04-05T19:18:04Z,2017-04-20T18:43:54Z,2017-04-20T18:43:55Z,MERGED,True,518,264,7,https://github.com/zaq32,Update Comm driver to support isis variant of i2c implementation,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/120,https://github.com/zaq32,8,https://github.com/PW-Sat2/PWSat2OBC/pull/120#issuecomment-291980151,This change is,"Review status: 5 of 6 files reviewed at latest revision, 2 unresolved discussions.

libs/drivers/comm/Include/comm/CommDriver.hpp, line 247 at r2 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Update docs

Done

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,120,2017-04-05T19:18:04Z,2017-04-20T18:43:54Z,2017-04-20T18:43:55Z,MERGED,True,518,264,7,https://github.com/zaq32,Update Comm driver to support isis variant of i2c implementation,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/120,https://github.com/Novakov,9,https://github.com/PW-Sat2/PWSat2OBC/pull/120#issuecomment-291980375,This change is,"Reviewed 1 of 1 files at r3.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,120,2017-04-05T19:18:04Z,2017-04-20T18:43:54Z,2017-04-20T18:43:55Z,MERGED,True,518,264,7,https://github.com/zaq32,Update Comm driver to support isis variant of i2c implementation,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/120,https://github.com/zaq32,10,https://github.com/PW-Sat2/PWSat2OBC/pull/120#issuecomment-293790197,This change is,"Review status: 1 of 7 files reviewed at latest revision, 1 unresolved discussion.

libs/drivers/comm/comm.cpp, line 89 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
Please do test it and if possible determine if it is needed and how short it can be.
As for the actual delay length I took 2ms from our previous tests and also in case that we decide to increase FreeRTPOS systick frequency.

This specific fix will be postponed until the proper delay will be empircally determined.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,120,2017-04-05T19:18:04Z,2017-04-20T18:43:54Z,2017-04-20T18:43:55Z,MERGED,True,518,264,7,https://github.com/zaq32,Update Comm driver to support isis variant of i2c implementation,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/120,https://github.com/ggajoch,11,https://github.com/PW-Sat2/PWSat2OBC/pull/120#issuecomment-293858530,This change is,"Review status: 1 of 7 files reviewed at latest revision, 1 unresolved discussion.

libs/drivers/comm/comm.cpp, line 89 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
This specific fix will be postponed until the proper delay will be empircally determined.

We tried to measure it by:

increasing tick rate to 1000 Hz
removing this delay completely.

Unfortunately, removing it resulted in about 0.5ms delay between Write() and Read() and commands were executed successfully.
I don't know how to reduce the delay even more, but next time more test should be performed (e.g. sending 10k and searching for incorrect ones).

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,120,2017-04-05T19:18:04Z,2017-04-20T18:43:54Z,2017-04-20T18:43:55Z,MERGED,True,518,264,7,https://github.com/zaq32,Update Comm driver to support isis variant of i2c implementation,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/120,https://github.com/zaq32,12,https://github.com/PW-Sat2/PWSat2OBC/pull/120#issuecomment-293886197,This change is,"Review status: 1 of 7 files reviewed at latest revision, 1 unresolved discussion.

libs/drivers/comm/comm.cpp, line 89 at r1 (raw file):
Previously, ggajoch (Grzegorz Gajoch) wrote
We tried to measure it by:

increasing tick rate to 1000 Hz
removing this delay completely.

Unfortunately, removing it resulted in about 0.5ms delay between Write() and Read() and commands were executed successfully.
I don't know how to reduce the delay even more, but next time more test should be performed (e.g. sending 10k and searching for incorrect ones).

Therefore lets stick with what we have ritght now and get back to this on another PR

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,120,2017-04-05T19:18:04Z,2017-04-20T18:43:54Z,2017-04-20T18:43:55Z,MERGED,True,518,264,7,https://github.com/zaq32,Update Comm driver to support isis variant of i2c implementation,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/120,https://github.com/Novakov,13,https://github.com/PW-Sat2/PWSat2OBC/pull/120#issuecomment-295852859,This change is,"Reviewed 6 of 6 files at r4.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,121,2017-04-06T11:11:45Z,2017-04-06T11:40:42Z,2017-04-06T11:40:43Z,MERGED,True,34,0,4,https://github.com/mandrek44,Commands for testing external flashes,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/121,https://github.com/mandrek44,1,https://github.com/PW-Sat2/PWSat2OBC/pull/121,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,121,2017-04-06T11:11:45Z,2017-04-06T11:40:42Z,2017-04-06T11:40:43Z,MERGED,True,34,0,4,https://github.com/mandrek44,Commands for testing external flashes,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/121,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/121#issuecomment-292145914,This change is,"Reviewed 4 of 4 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,122,2017-04-06T12:03:20Z,2017-04-09T18:06:18Z,2017-04-09T18:06:19Z,MERGED,True,65,1,1,https://github.com/mandrek44,Commands for testing FRAMs,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/122,https://github.com/mandrek44,1,https://github.com/PW-Sat2/PWSat2OBC/pull/122,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,122,2017-04-06T12:03:20Z,2017-04-09T18:06:18Z,2017-04-09T18:06:19Z,MERGED,True,65,1,1,https://github.com/mandrek44,Commands for testing FRAMs,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/122,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/122#issuecomment-292720645,This change is,"Reviewed 1 of 1 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,123,2017-04-08T10:55:27Z,2017-04-21T10:40:49Z,2017-04-21T10:40:50Z,MERGED,True,2479,169,38,https://github.com/Novakov,EPS Driver,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/123,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/123,"TODO (next pull request): error counting integration


This change is","TODO (next pull request): error counting integration


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,123,2017-04-08T10:55:27Z,2017-04-21T10:40:49Z,2017-04-21T10:40:50Z,MERGED,True,2479,169,38,https://github.com/Novakov,EPS Driver,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/123,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/123#issuecomment-292725872,"TODO (next pull request): error counting integration


This change is","Most of this code is undocumented

Reviewed 35 of 38 files at r1.
Review status: 35 of 38 files reviewed at latest revision, 4 unresolved discussions, some commit checks failed.

libs/base/Include/utils.h, line 358 at r1 (raw file):

 * @tparam BitsCount Number of bits used by number
 */
template <typename Underlying, std::uint8_t BitsCount> class BitValue

missing assignment & comparison operators

libs/drivers/eps/Include/eps/eps.h, line 39 at r1 (raw file):

        };

        class EPSDriver

This class combines low level hardware communication (command reading/parsing & processing) with high level coordination and some knowledge that do not necessarily has to be hardcoded into the driver (like i2c bus assignment).
Perhaps splitting this driver into smaller parts would not be a bad idea?

libs/drivers/i2c/Include/i2c/forward.h, line 8 at r1 (raw file):

    namespace i2c
    {
        using I2CAddress = uint8_t;

missing include: cstdint

libs/mission/sail/Include/mission/sail.hpp, line 38 at r1 (raw file):

         *
         * To support single argument construction.
         * @param[in] isSailOpened Initial sail deployment state.

update documentation

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,123,2017-04-08T10:55:27Z,2017-04-21T10:40:49Z,2017-04-21T10:40:50Z,MERGED,True,2479,169,38,https://github.com/Novakov,EPS Driver,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/123,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/123#issuecomment-293336890,"TODO (next pull request): error counting integration


This change is","Review status: 17 of 38 files reviewed at latest revision, 4 unresolved discussions.

libs/base/Include/utils.h, line 358 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
missing assignment & comparison operators

Done.

libs/drivers/eps/Include/eps/eps.h, line 39 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
This class combines low level hardware communication (command reading/parsing & processing) with high level coordination and some knowledge that do not necessarily has to be hardcoded into the driver (like i2c bus assignment).
Perhaps splitting this driver into smaller parts would not be a bad idea?

Done

libs/drivers/i2c/Include/i2c/forward.h, line 8 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
missing include: cstdint

Done.

libs/mission/sail/Include/mission/sail.hpp, line 38 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
update documentation

Done

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,123,2017-04-08T10:55:27Z,2017-04-21T10:40:49Z,2017-04-21T10:40:50Z,MERGED,True,2479,169,38,https://github.com/Novakov,EPS Driver,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/123,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/123#issuecomment-293788628,"TODO (next pull request): error counting integration


This change is","Reviewed 19 of 20 files at r2.
Review status: 36 of 38 files reviewed at latest revision, 3 unresolved discussions.

libs/drivers/eps/Include/eps/hk.hpp, line 4 at r2 (raw file):

#define LIBS_DRIVERS_EPS_INCLUDE_EPS_HK_HPP_

#include ""base/reader.h""

use only forward declaration header

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,123,2017-04-08T10:55:27Z,2017-04-21T10:40:49Z,2017-04-21T10:40:50Z,MERGED,True,2479,169,38,https://github.com/Novakov,EPS Driver,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/123,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/123#issuecomment-294170794,"TODO (next pull request): error counting integration


This change is","Review status: 33 of 38 files reviewed at latest revision, 2 unresolved discussions.

libs/drivers/eps/Include/eps/hk.hpp, line 4 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
use only forward declaration header

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,123,2017-04-08T10:55:27Z,2017-04-21T10:40:49Z,2017-04-21T10:40:50Z,MERGED,True,2479,169,38,https://github.com/Novakov,EPS Driver,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/123,https://github.com/zaq32,6,https://github.com/PW-Sat2/PWSat2OBC/pull/123#issuecomment-294295377,"TODO (next pull request): error counting integration


This change is","Reviewed 1 of 38 files at r1, 3 of 4 files at r3.
Review status: 37 of 38 files reviewed at latest revision, 1 unresolved discussion.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,123,2017-04-08T10:55:27Z,2017-04-21T10:40:49Z,2017-04-21T10:40:50Z,MERGED,True,2479,169,38,https://github.com/Novakov,EPS Driver,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/123,https://github.com/zaq32,7,https://github.com/PW-Sat2/PWSat2OBC/pull/123#issuecomment-294295553,"TODO (next pull request): error counting integration


This change is","Review status: 37 of 38 files reviewed at latest revision, 2 unresolved discussions.

libs/drivers/eps/eps.cpp, line 99 at r3 (raw file):

        }

        bool EPSDriver::PowerCycleB()

almost exact duplicate of PowerCycleA  try to extract common parts of A & B controllers into dedicated functions/types.
This aplies to entire driver.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,123,2017-04-08T10:55:27Z,2017-04-21T10:40:49Z,2017-04-21T10:40:50Z,MERGED,True,2479,169,38,https://github.com/Novakov,EPS Driver,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/123,https://github.com/Novakov,8,https://github.com/PW-Sat2/PWSat2OBC/pull/123#issuecomment-295722016,"TODO (next pull request): error counting integration


This change is",[Driver] EPS,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,123,2017-04-08T10:55:27Z,2017-04-21T10:40:49Z,2017-04-21T10:40:50Z,MERGED,True,2479,169,38,https://github.com/Novakov,EPS Driver,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/123,https://github.com/Novakov,9,https://github.com/PW-Sat2/PWSat2OBC/pull/123#issuecomment-295841918,"TODO (next pull request): error counting integration


This change is","Review status: 34 of 38 files reviewed at latest revision, 2 unresolved discussions.

libs/drivers/eps/eps.cpp, line 99 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
almost exact duplicate of PowerCycleA  try to extract common parts of A & B controllers into dedicated functions/types.
This aplies to entire driver.

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,123,2017-04-08T10:55:27Z,2017-04-21T10:40:49Z,2017-04-21T10:40:50Z,MERGED,True,2479,169,38,https://github.com/Novakov,EPS Driver,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/123,https://github.com/zaq32,10,https://github.com/PW-Sat2/PWSat2OBC/pull/123#issuecomment-296157921,"TODO (next pull request): error counting integration


This change is","Reviewed 6 of 6 files at r4.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,124,2017-04-08T10:59:36Z,2017-04-09T17:04:08Z,2017-04-09T17:04:09Z,MERGED,True,33,26,10,https://github.com/Novakov,No busy waiting for OBC startup,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/124,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/124,"Changed busy wait for OBC initialization finish from Python tests into RTOS wait on the OBC side. Not very much but cuts about a minute from build time


This change is","Changed busy wait for OBC initialization finish from Python tests into RTOS wait on the OBC side. Not very much but cuts about a minute from build time


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,124,2017-04-08T10:59:36Z,2017-04-09T17:04:08Z,2017-04-09T17:04:09Z,MERGED,True,33,26,10,https://github.com/Novakov,No busy waiting for OBC startup,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/124,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/124#issuecomment-292798283,"Changed busy wait for OBC initialization finish from Python tests into RTOS wait on the OBC side. Not very much but cuts about a minute from build time


This change is","Reviewed 10 of 10 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,125,2017-04-08T12:15:47Z,2017-04-08T12:25:30Z,2017-04-08T12:25:31Z,MERGED,True,16,24,7,https://github.com/Novakov,You've been calculating your stack size WRONG whole time - click here to see why!,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/125,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/125,"xTaskCreate expects parameter with size of the stack for new task in words. However size of the word is port-dependent and in case of Cortex-M3 its 4 bytes not 2 as we assumed at the begining.
This change hides calculation of size in words by doing the division just before calling xTaskCreate and using size of StackType_t.


This change is","xTaskCreate expects parameter with size of the stack for new task in words. However size of the word is port-dependent and in case of Cortex-M3 its 4 bytes not 2 as we assumed at the begining.
This change hides calculation of size in words by doing the division just before calling xTaskCreate and using size of StackType_t.


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,125,2017-04-08T12:15:47Z,2017-04-08T12:25:30Z,2017-04-08T12:25:31Z,MERGED,True,16,24,7,https://github.com/Novakov,You've been calculating your stack size WRONG whole time - click here to see why!,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/125,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/125#issuecomment-292714780,"xTaskCreate expects parameter with size of the stack for new task in words. However size of the word is port-dependent and in case of Cortex-M3 its 4 bytes not 2 as we assumed at the begining.
This change hides calculation of size in words by doing the division just before calling xTaskCreate and using size of StackType_t.


This change is","Reviewed 7 of 7 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,126,2017-04-08T14:04:10Z,2017-04-08T15:04:33Z,2017-04-08T15:04:34Z,MERGED,True,82,31,10,https://github.com/Novakov,Single page with list of all telecommands,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/126,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/126,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,126,2017-04-08T14:04:10Z,2017-04-08T15:04:33Z,2017-04-08T15:04:34Z,MERGED,True,82,31,10,https://github.com/Novakov,Single page with list of all telecommands,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/126,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/126#issuecomment-292723618,This change is,"Reviewed 10 of 10 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,127,2017-04-08T21:33:31Z,2017-04-09T19:06:59Z,2017-04-09T19:06:59Z,CLOSED,False,2094,802,65,https://github.com/zaq32,[WIP] Time synchronization update,14,[],https://github.com/PW-Sat2/PWSat2OBC/pull/127,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/127,"Remove time service's serialization ability & replace it with addition to the satellite persistent state.
Update time synchronization component to make use of persistent state instead of its own in-memory state. As a result time synchronization has been simplified a bit due to it becoming stateless. In addition as a result of this change from now on time lost due to obc being powerred of is now at least partially corrected (50% due to the  mcu time being stopped during this period).
Introduced time correction configuration. This change provides possibility to adjust time synchronization algorithm in order to make it more resilient to permanent/increasing time measuring errors that may be detected after sattelite launch. It is also possible to disable one of the time sources if it starts to generate too many errors.
Extend, update persistent state & time synchronization documentation.

Awaits for integration of persistent state object into mainline.


This change is","Remove time service's serialization ability & replace it with addition to the satellite persistent state.
Update time synchronization component to make use of persistent state instead of its own in-memory state. As a result time synchronization has been simplified a bit due to it becoming stateless. In addition as a result of this change from now on time lost due to obc being powerred of is now at least partially corrected (50% due to the  mcu time being stopped during this period).
Introduced time correction configuration. This change provides possibility to adjust time synchronization algorithm in order to make it more resilient to permanent/increasing time measuring errors that may be detected after sattelite launch. It is also possible to disable one of the time sources if it starts to generate too many errors.
Extend, update persistent state & time synchronization documentation.

Awaits for integration of persistent state object into mainline.


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,127,2017-04-08T21:33:31Z,2017-04-09T19:06:59Z,2017-04-09T19:06:59Z,CLOSED,False,2094,802,65,https://github.com/zaq32,[WIP] Time synchronization update,14,[],https://github.com/PW-Sat2/PWSat2OBC/pull/127,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/127#issuecomment-292747558,"Remove time service's serialization ability & replace it with addition to the satellite persistent state.
Update time synchronization component to make use of persistent state instead of its own in-memory state. As a result time synchronization has been simplified a bit due to it becoming stateless. In addition as a result of this change from now on time lost due to obc being powerred of is now at least partially corrected (50% due to the  mcu time being stopped during this period).
Introduced time correction configuration. This change provides possibility to adjust time synchronization algorithm in order to make it more resilient to permanent/increasing time measuring errors that may be detected after sattelite launch. It is also possible to disable one of the time sources if it starts to generate too many errors.
Extend, update persistent state & time synchronization documentation.

Awaits for integration of persistent state object into mainline.


This change is",[Time] Remove auto saving from TimeProvider,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,127,2017-04-08T21:33:31Z,2017-04-09T19:06:59Z,2017-04-09T19:06:59Z,CLOSED,False,2094,802,65,https://github.com/zaq32,[WIP] Time synchronization update,14,[],https://github.com/PW-Sat2/PWSat2OBC/pull/127,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/127#issuecomment-292747567,"Remove time service's serialization ability & replace it with addition to the satellite persistent state.
Update time synchronization component to make use of persistent state instead of its own in-memory state. As a result time synchronization has been simplified a bit due to it becoming stateless. In addition as a result of this change from now on time lost due to obc being powerred of is now at least partially corrected (50% due to the  mcu time being stopped during this period).
Introduced time correction configuration. This change provides possibility to adjust time synchronization algorithm in order to make it more resilient to permanent/increasing time measuring errors that may be detected after sattelite launch. It is also possible to disable one of the time sources if it starts to generate too many errors.
Extend, update persistent state & time synchronization documentation.

Awaits for integration of persistent state object into mainline.


This change is",[Time] Time correction should use parametrized weight,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,127,2017-04-08T21:33:31Z,2017-04-09T19:06:59Z,2017-04-09T19:06:59Z,CLOSED,False,2094,802,65,https://github.com/zaq32,[WIP] Time synchronization update,14,[],https://github.com/PW-Sat2/PWSat2OBC/pull/127,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/127#issuecomment-292747577,"Remove time service's serialization ability & replace it with addition to the satellite persistent state.
Update time synchronization component to make use of persistent state instead of its own in-memory state. As a result time synchronization has been simplified a bit due to it becoming stateless. In addition as a result of this change from now on time lost due to obc being powerred of is now at least partially corrected (50% due to the  mcu time being stopped during this period).
Introduced time correction configuration. This change provides possibility to adjust time synchronization algorithm in order to make it more resilient to permanent/increasing time measuring errors that may be detected after sattelite launch. It is also possible to disable one of the time sources if it starts to generate too many errors.
Extend, update persistent state & time synchronization documentation.

Awaits for integration of persistent state object into mainline.


This change is",[Time] Use FRAM to store value of last seen RTC value,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,128,2017-04-12T19:30:52Z,2017-04-24T17:25:49Z,2017-04-24T17:25:50Z,MERGED,True,806,857,36,https://github.com/zaq32,Time synchronization update,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/128,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/128,"Remove time service's serialization ability & replace it with addition to the satellite persistent state.
Update time synchronization component to make use of persistent state instead of its own in-memory state. As a result time synchronization has been simplified a bit due to it becoming stateless. In addition as a result of this change from now on time lost due to obc being powerred of is now at least partially corrected (50% due to the  mcu time being stopped during this period).
Introduced time correction configuration. This change provides possibility to adjust time synchronization algorithm in order to make it more resilient to permanent/increasing time measuring errors that may be detected after sattelite launch. It is also possible to disable one of the time sources if it starts to generate too many errors.
Extend, update persistent state & time synchronization documentation.



This change is","Remove time service's serialization ability & replace it with addition to the satellite persistent state.
Update time synchronization component to make use of persistent state instead of its own in-memory state. As a result time synchronization has been simplified a bit due to it becoming stateless. In addition as a result of this change from now on time lost due to obc being powerred of is now at least partially corrected (50% due to the  mcu time being stopped during this period).
Introduced time correction configuration. This change provides possibility to adjust time synchronization algorithm in order to make it more resilient to permanent/increasing time measuring errors that may be detected after sattelite launch. It is also possible to disable one of the time sources if it starts to generate too many errors.
Extend, update persistent state & time synchronization documentation.



This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,128,2017-04-12T19:30:52Z,2017-04-24T17:25:49Z,2017-04-24T17:25:50Z,MERGED,True,806,857,36,https://github.com/zaq32,Time synchronization update,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/128,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/128#issuecomment-293789225,"Remove time service's serialization ability & replace it with addition to the satellite persistent state.
Update time synchronization component to make use of persistent state instead of its own in-memory state. As a result time synchronization has been simplified a bit due to it becoming stateless. In addition as a result of this change from now on time lost due to obc being powerred of is now at least partially corrected (50% due to the  mcu time being stopped during this period).
Introduced time correction configuration. This change provides possibility to adjust time synchronization algorithm in order to make it more resilient to permanent/increasing time measuring errors that may be detected after sattelite launch. It is also possible to disable one of the time sources if it starts to generate too many errors.
Extend, update persistent state & time synchronization documentation.



This change is",[Time] Remove auto saving from TimeProvider,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,128,2017-04-12T19:30:52Z,2017-04-24T17:25:49Z,2017-04-24T17:25:50Z,MERGED,True,806,857,36,https://github.com/zaq32,Time synchronization update,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/128,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/128#issuecomment-293789245,"Remove time service's serialization ability & replace it with addition to the satellite persistent state.
Update time synchronization component to make use of persistent state instead of its own in-memory state. As a result time synchronization has been simplified a bit due to it becoming stateless. In addition as a result of this change from now on time lost due to obc being powerred of is now at least partially corrected (50% due to the  mcu time being stopped during this period).
Introduced time correction configuration. This change provides possibility to adjust time synchronization algorithm in order to make it more resilient to permanent/increasing time measuring errors that may be detected after sattelite launch. It is also possible to disable one of the time sources if it starts to generate too many errors.
Extend, update persistent state & time synchronization documentation.



This change is",[Time] Time correction should use parametrized weight,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,128,2017-04-12T19:30:52Z,2017-04-24T17:25:49Z,2017-04-24T17:25:50Z,MERGED,True,806,857,36,https://github.com/zaq32,Time synchronization update,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/128,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/128#issuecomment-293789276,"Remove time service's serialization ability & replace it with addition to the satellite persistent state.
Update time synchronization component to make use of persistent state instead of its own in-memory state. As a result time synchronization has been simplified a bit due to it becoming stateless. In addition as a result of this change from now on time lost due to obc being powerred of is now at least partially corrected (50% due to the  mcu time being stopped during this period).
Introduced time correction configuration. This change provides possibility to adjust time synchronization algorithm in order to make it more resilient to permanent/increasing time measuring errors that may be detected after sattelite launch. It is also possible to disable one of the time sources if it starts to generate too many errors.
Extend, update persistent state & time synchronization documentation.



This change is",[Time] Use FRAM to store value of last seen RTC value,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,128,2017-04-12T19:30:52Z,2017-04-24T17:25:49Z,2017-04-24T17:25:50Z,MERGED,True,806,857,36,https://github.com/zaq32,Time synchronization update,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/128,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/128#issuecomment-295864090,"Remove time service's serialization ability & replace it with addition to the satellite persistent state.
Update time synchronization component to make use of persistent state instead of its own in-memory state. As a result time synchronization has been simplified a bit due to it becoming stateless. In addition as a result of this change from now on time lost due to obc being powerred of is now at least partially corrected (50% due to the  mcu time being stopped during this period).
Introduced time correction configuration. This change provides possibility to adjust time synchronization algorithm in order to make it more resilient to permanent/increasing time measuring errors that may be detected after sattelite launch. It is also possible to disable one of the time sources if it starts to generate too many errors.
Extend, update persistent state & time synchronization documentation.



This change is","Reviewed 39 of 39 files at r1.
Review status: all files reviewed at latest revision, 1 unresolved discussion, some commit checks failed.

libs/mission/time/time.cpp, line 122 at r1 (raw file):

            (deltaMcu * correctionConfiguation.MissionTimeFactor() + deltaRtc * correctionConfiguation.ExternalTimeFactor()) /
                correctionConfiguation.Total();
        auto correctionValue = correctedMissionTime > missionTime ? correctedMissionTime - missionTime : missionTime - correctedMissionTime;

I like the idea but It should be done as separate pull request - just the suggestion for future

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,128,2017-04-12T19:30:52Z,2017-04-24T17:25:49Z,2017-04-24T17:25:50Z,MERGED,True,806,857,36,https://github.com/zaq32,Time synchronization update,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/128,https://github.com/Novakov,6,https://github.com/PW-Sat2/PWSat2OBC/pull/128#issuecomment-296482570,"Remove time service's serialization ability & replace it with addition to the satellite persistent state.
Update time synchronization component to make use of persistent state instead of its own in-memory state. As a result time synchronization has been simplified a bit due to it becoming stateless. In addition as a result of this change from now on time lost due to obc being powerred of is now at least partially corrected (50% due to the  mcu time being stopped during this period).
Introduced time correction configuration. This change provides possibility to adjust time synchronization algorithm in order to make it more resilient to permanent/increasing time measuring errors that may be detected after sattelite launch. It is also possible to disable one of the time sources if it starts to generate too many errors.
Extend, update persistent state & time synchronization documentation.



This change is","Reviewed 7 of 7 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,128,2017-04-12T19:30:52Z,2017-04-24T17:25:49Z,2017-04-24T17:25:50Z,MERGED,True,806,857,36,https://github.com/zaq32,Time synchronization update,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/128,https://github.com/Novakov,7,https://github.com/PW-Sat2/PWSat2OBC/pull/128#issuecomment-296737900,"Remove time service's serialization ability & replace it with addition to the satellite persistent state.
Update time synchronization component to make use of persistent state instead of its own in-memory state. As a result time synchronization has been simplified a bit due to it becoming stateless. In addition as a result of this change from now on time lost due to obc being powerred of is now at least partially corrected (50% due to the  mcu time being stopped during this period).
Introduced time correction configuration. This change provides possibility to adjust time synchronization algorithm in order to make it more resilient to permanent/increasing time measuring errors that may be detected after sattelite launch. It is also possible to disable one of the time sources if it starts to generate too many errors.
Extend, update persistent state & time synchronization documentation.



This change is","Reviewed 5 of 5 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,129,2017-04-20T08:35:12Z,2017-04-28T05:57:52Z,2017-04-28T05:57:53Z,MERGED,True,1218,549,18,https://github.com/mandrek44,Implemented N25Q Driver with TMR,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/129,https://github.com/mandrek44,1,https://github.com/PW-Sat2/PWSat2OBC/pull/129,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,129,2017-04-20T08:35:12Z,2017-04-28T05:57:52Z,2017-04-28T05:57:53Z,MERGED,True,1218,549,18,https://github.com/mandrek44,Implemented N25Q Driver with TMR,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/129,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/129#issuecomment-295731758,This change is,"Reviewed 17 of 17 files at r1.
Review status: all files reviewed at latest revision, 5 unresolved discussions.

libs/drivers/n25q/n25q.cpp, line 20 at r1 (raw file):

using drivers::spi::ISPIInterface;
using drivers::spi::SPISelectSlave;
using redundancy::Voter;

I don't see any usage of this in this file

libs/drivers/n25q/Include/n25q/n25q.h, line 148 at r1 (raw file):

             * @param[in] offset Chunk address offset
             * @param[in] chunk Buffer
             * @return Operation waiter

Add remark (and assert)

libs/drivers/n25q/Include/n25q/n25q.h, line 165 at r1 (raw file):

             * Operation can take up to 5ms per page
             */
            OperationResult WriteMemory(size_t address, gsl::span<const uint8_t> buffer);

Writing in chunks will be enough - remove if not needed elsewhere

src/commands/file_system.cpp, line 330 at r1 (raw file):

    //
    //        Main.terminal.NewLine();
    //    }

// comments!!!!!!!1111

unit_tests/base/RedundancyTest.cpp, line 36 at r1 (raw file):

    ASSERT_THAT(corrector.Correct(0b0000001, 0b0010000, 0b0010000), Eq(0b0010000));
    ASSERT_THAT(corrector.Correct(0b0010000, 0b0010001, 0b0000000), Eq(0b0010000));
    ASSERT_THAT(corrector.Correct(0b1010101, 0b1110000, 0b0010001), Eq(0b1010001));

At least one test case is missing

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,129,2017-04-20T08:35:12Z,2017-04-28T05:57:52Z,2017-04-28T05:57:53Z,MERGED,True,1218,549,18,https://github.com/mandrek44,Implemented N25Q Driver with TMR,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/129,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/129#issuecomment-296156580,This change is,"Reviewed 2 of 5 files at r2.
Review status: 16 of 17 files reviewed at latest revision, 11 unresolved discussions, some commit checks failed.

libs/base/Include/redundancy.hpp, line 42 at r2 (raw file):

     * @tparam T Type used for majority vote. Must implement bitwise & and | operations.
     */
    template <typename T> struct BitwiseCorrector

add static_assert to ensure that T is an integral or enum type.

libs/drivers/n25q/Include/n25q/n25q.h, line 152 at r2 (raw file):

             * Operation can take up to 5ms
             */
            OperationWaiter BeginWriteChunk(size_t address, ptrdiff_t offset, gsl::span<const uint8_t> chunk);

What is the reason of using the OperationWaiter type as return value? It is not being used to allow caller to wait for operation to complete (it is done internally by the driver) and all the extra information it provides can be returned directly.

libs/drivers/n25q/Include/n25q/n25q.h, line 306 at r2 (raw file):

             * @param[in] address Start address
             * @param[out] outputBuffer Output buffer
             * @param[in] redundantBuffer1 First buffer used for redundant read

redundantBuffer1 & redundantBuffer1 are also out parameters
Documentaiton should also specify that all buffers should have the same length. This function should use length of the shortest buffer as data size if they are not equal length.

libs/drivers/n25q/Include/n25q/yaffs.h, line 39 at r2 (raw file):

         * @tparam TotalSize Total memory size
         */
        template <BlockMapping blockMapping, std::size_t ChunkSize, std::size_t TotalSize> class N25QYaffsDevice

define template methods outside class template definition

libs/drivers/n25q/Include/n25q/yaffs.h, line 58 at r2 (raw file):

BlockSize(blockMapping)
This can be done at compile time


libs/drivers/n25q/Include/n25q/yaffs.h, line 146 at r2 (raw file):

                gsl::span<uint8_t> outputBuffer(data, data_len);
                gsl::span<uint8_t> redundantBuffer1(This->_redundantReadBuffer1.data(), data_len);

assuming that data_len <= ChunkSize

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,129,2017-04-20T08:35:12Z,2017-04-28T05:57:52Z,2017-04-28T05:57:53Z,MERGED,True,1218,549,18,https://github.com/mandrek44,Implemented N25Q Driver with TMR,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/129,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/129#issuecomment-296482526,This change is,"Reviewed 1 of 5 files at r2.
Review status: all files reviewed at latest revision, 11 unresolved discussions, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,129,2017-04-20T08:35:12Z,2017-04-28T05:57:52Z,2017-04-28T05:57:53Z,MERGED,True,1218,549,18,https://github.com/mandrek44,Implemented N25Q Driver with TMR,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/129,https://github.com/mandrek44,5,https://github.com/PW-Sat2/PWSat2OBC/pull/129#issuecomment-296807740,This change is,"Review status: 9 of 18 files reviewed at latest revision, 11 unresolved discussions.

libs/base/Include/redundancy.hpp, line 42 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
add static_assert to ensure that T is an integral or enum type.

Done.

libs/drivers/n25q/n25q.cpp, line 20 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
I don't see any usage of this in this file

Done.

libs/drivers/n25q/Include/n25q/n25q.h, line 148 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Add remark (and assert)

I'm bit confused - how can I assert the length of the page? Any hint?

libs/drivers/n25q/Include/n25q/n25q.h, line 165 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Writing in chunks will be enough - remove if not needed elsewhere

Done.

libs/drivers/n25q/Include/n25q/n25q.h, line 152 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
What is the reason of using the OperationWaiter type as return value? It is not being used to allow caller to wait for operation to complete (it is done internally by the driver) and all the extra information it provides can be returned directly.

RedundantN25QDriver::WriteMemory will call BeginWritePage for all 3 chips and then wait for them to report that the operation is finished. As far I as understand it, page is writen first to chip buffer and we have to wait until chip finishes writing it to the flash storage. This allows us to initiate the writing on all 3 chips simultaneously

libs/drivers/n25q/Include/n25q/n25q.h, line 306 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
redundantBuffer1 & redundantBuffer1 are also out parameters
Documentaiton should also specify that all buffers should have the same length. This function should use length of the shortest buffer as data size if they are not equal length.

Done.

libs/drivers/n25q/Include/n25q/yaffs.h, line 39 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
define template methods outside class template definition

Done.

libs/drivers/n25q/Include/n25q/yaffs.h, line 58 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote

BlockSize(blockMapping)
This can be done at compile time


Look at the implementation - is this correct way to achieve this?

libs/drivers/n25q/Include/n25q/yaffs.h, line 146 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
assuming that data_len <= ChunkSize

Yes - I added a check and logging if it's not true

src/commands/file_system.cpp, line 330 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
// comments!!!!!!!1111

Done.

unit_tests/base/RedundancyTest.cpp, line 36 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
At least one test case is missing

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,129,2017-04-20T08:35:12Z,2017-04-28T05:57:52Z,2017-04-28T05:57:53Z,MERGED,True,1218,549,18,https://github.com/mandrek44,Implemented N25Q Driver with TMR,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/129,https://github.com/Novakov,6,https://github.com/PW-Sat2/PWSat2OBC/pull/129#issuecomment-297410590,This change is,"Reviewed 2 of 5 files at r2, 8 of 10 files at r3.
Review status: all files reviewed at latest revision, 7 unresolved discussions.

libs/drivers/n25q/Include/n25q/n25q.h, line 148 at r1 (raw file):
Previously, mandrek44 (Mandro) wrote
I'm bit confused - how can I assert the length of the page? Any hint?

It can't be static_assert, so some assert in runtime by calling extern assertFailed function (like in EFM/FreeRTOS)

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,129,2017-04-20T08:35:12Z,2017-04-28T05:57:52Z,2017-04-28T05:57:53Z,MERGED,True,1218,549,18,https://github.com/mandrek44,Implemented N25Q Driver with TMR,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/129,https://github.com/zaq32,7,https://github.com/PW-Sat2/PWSat2OBC/pull/129#issuecomment-297510861,This change is,"Review status: all files reviewed at latest revision, 3 unresolved discussions, some commit checks failed.

libs/drivers/n25q/Include/n25q/n25q.h, line 152 at r2 (raw file):
Previously, mandrek44 (Mandro) wrote
RedundantN25QDriver::WriteMemory will call BeginWritePage for all 3 chips and then wait for them to report that the operation is finished. As far I as understand it, page is writen first to chip buffer and we have to wait until chip finishes writing it to the flash storage. This allows us to initiate the writing on all 3 chips simultaneously

This is what you intended but it is not what actually happens. What happens right now is as follows:

OperationWaiter is created inside the BeginWritePage function. Lets call this object x.
return statement is being executed which will either copy or move (depending on the type & context, most likely move) object x to the outside object. Lets call it y.
Now object y contains a copy of the state of object x.
Destructor of object x is called, which calls Wait & it subsequently waits for write operation to finish
(several us later)
Destructor of object x finishes its execution
BeginWritePage function ends
user calls Wait on object y which tries to wait for the same operation to finish.

As you can see current implementation despite being intended as non blocking it is not. This makes every function call in fact fully synchronous.

libs/drivers/n25q/Include/n25q/yaffs.h, line 58 at r2 (raw file):
Previously, mandrek44 (Mandro) wrote
Look at the implementation - is this correct way to achieve this?

yes

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,129,2017-04-20T08:35:12Z,2017-04-28T05:57:52Z,2017-04-28T05:57:53Z,MERGED,True,1218,549,18,https://github.com/mandrek44,Implemented N25Q Driver with TMR,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/129,https://github.com/mandrek44,8,https://github.com/PW-Sat2/PWSat2OBC/pull/129#issuecomment-297833771,This change is,"Review status: 11 of 18 files reviewed at latest revision, 2 unresolved discussions.

libs/drivers/n25q/Include/n25q/n25q.h, line 148 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
It can't be static_assert, so some assert in runtime by calling extern assertFailed function (like in EFM/FreeRTOS)

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,129,2017-04-20T08:35:12Z,2017-04-28T05:57:52Z,2017-04-28T05:57:53Z,MERGED,True,1218,549,18,https://github.com/mandrek44,Implemented N25Q Driver with TMR,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/129,https://github.com/mandrek44,9,https://github.com/PW-Sat2/PWSat2OBC/pull/129#issuecomment-297835167,This change is,"Review status: 11 of 18 files reviewed at latest revision, 2 unresolved discussions.

libs/drivers/n25q/Include/n25q/n25q.h, line 152 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
This is what you intended but it is not what actually happens. What happens right now is as follows:

OperationWaiter is created inside the BeginWritePage function. Lets call this object x.
return statement is being executed which will either copy or move (depending on the type & context, most likely move) object x to the outside object. Lets call it y.
Now object y contains a copy of the state of object x.
Destructor of object x is called, which calls Wait & it subsequently waits for write operation to finish
(several us later)
Destructor of object x finishes its execution
BeginWritePage function ends
user calls Wait on object y which tries to wait for the same operation to finish.

As you can see current implementation despite being intended as non blocking it is not. This makes every function call in fact fully synchronous.

Good point - I changed the OperationWaiter to support move semantics, I also added unit tests to make sure everything works as expected

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,129,2017-04-20T08:35:12Z,2017-04-28T05:57:52Z,2017-04-28T05:57:53Z,MERGED,True,1218,549,18,https://github.com/mandrek44,Implemented N25Q Driver with TMR,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/129,https://github.com/zaq32,10,https://github.com/PW-Sat2/PWSat2OBC/pull/129#issuecomment-297913442,This change is,"Reviewed 7 of 9 files at r4.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,130,2017-04-20T12:35:38Z,2017-05-08T20:30:40Z,2017-05-08T20:30:41Z,MERGED,True,412,98,13,https://github.com/kfazi,[TeleComm] Added RemoveFile command,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/130,https://github.com/kfazi,1,https://github.com/PW-Sat2/PWSat2OBC/pull/130,"I had to increase stack size for CommTask from 2kB to 4kB because of failing integration tests.


This change is","I had to increase stack size for CommTask from 2kB to 4kB because of failing integration tests.


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,130,2017-04-20T12:35:38Z,2017-05-08T20:30:40Z,2017-05-08T20:30:41Z,MERGED,True,412,98,13,https://github.com/kfazi,[TeleComm] Added RemoveFile command,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/130,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/130#issuecomment-295721493,"I had to increase stack size for CommTask from 2kB to 4kB because of failing integration tests.


This change is","Reviewed 14 of 14 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,130,2017-04-20T12:35:38Z,2017-05-08T20:30:40Z,2017-05-08T20:30:41Z,MERGED,True,412,98,13,https://github.com/kfazi,[TeleComm] Added RemoveFile command,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/130,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/130#issuecomment-295853524,"I had to increase stack size for CommTask from 2kB to 4kB because of failing integration tests.


This change is","Reviewed 2 of 2 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,130,2017-04-20T12:35:38Z,2017-05-08T20:30:40Z,2017-05-08T20:30:41Z,MERGED,True,412,98,13,https://github.com/kfazi,[TeleComm] Added RemoveFile command,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/130,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/130#issuecomment-296147368,"I had to increase stack size for CommTask from 2kB to 4kB because of failing integration tests.


This change is","Review status: all files reviewed at latest revision, 2 unresolved discussions, some commit checks failed.

libs/obc/communication/telecommands/file_system.cpp, line 132 at r2 (raw file):

            {
                LOG(LOG_LEVEL_ERROR, ""Unable to open requested file"");
                DownlinkFrame errorResponse(DownlinkAPID::FileNotFound, 0);

Sending simple ""succeeded"" response won't do.  Due to the nature of the gs <-> obc communication we will not wait for the obc to respond to one TC before sending another.  threfore if a response is sent back it has to be constructed in such way that it is possible to map it to the specific request out of many that has been sent.  The very least include original tc apid  in response frame.

libs/telecommunication/include/telecommunication/downlink.h, line 28 at r2 (raw file):

            Success = 0x0,         //!< Success frame
            Pong = 0x01,           //!< Pong
            FileNotFound = 0x2,    //!< Error frame: file not found

There should be one apid assigned to be a response for purely operational commands. If we assign every possible error its own apid we will soon run out of apids for experiments. Remeber that apids are only 6bit values.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,130,2017-04-20T12:35:38Z,2017-05-08T20:30:40Z,2017-05-08T20:30:41Z,MERGED,True,412,98,13,https://github.com/kfazi,[TeleComm] Added RemoveFile command,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/130,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/130#issuecomment-298329443,"I had to increase stack size for CommTask from 2kB to 4kB because of failing integration tests.


This change is","Reviewed 8 of 11 files at r3.
Review status: 14 of 15 files reviewed at latest revision, 2 unresolved discussions, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,130,2017-04-20T12:35:38Z,2017-05-08T20:30:40Z,2017-05-08T20:30:41Z,MERGED,True,412,98,13,https://github.com/kfazi,[TeleComm] Added RemoveFile command,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/130,https://github.com/zaq32,6,https://github.com/PW-Sat2/PWSat2OBC/pull/130#issuecomment-298756169,"I had to increase stack size for CommTask from 2kB to 4kB because of failing integration tests.


This change is","Reviewed 2 of 11 files at r3.
Review status: all files reviewed at latest revision, 2 unresolved discussions, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,130,2017-04-20T12:35:38Z,2017-05-08T20:30:40Z,2017-05-08T20:30:41Z,MERGED,True,412,98,13,https://github.com/kfazi,[TeleComm] Added RemoveFile command,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/130,https://github.com/Novakov,7,https://github.com/PW-Sat2/PWSat2OBC/pull/130#issuecomment-299631468,"I had to increase stack size for CommTask from 2kB to 4kB because of failing integration tests.


This change is","Reviewed 11 of 14 files at r4.
Review status: all files reviewed at latest revision, 3 unresolved discussions.

libs/obc/communication/telecommands/file_system.cpp, line 39 at r4 (raw file):

        bool FileSender::SendPart(std::uint32_t seq)
        {
            auto maxFileDataSize = DownlinkFrame::MaxPayloadSize - 2;

constexpr in FileSender class

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,130,2017-04-20T12:35:38Z,2017-05-08T20:30:40Z,2017-05-08T20:30:41Z,MERGED,True,412,98,13,https://github.com/kfazi,[TeleComm] Added RemoveFile command,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/130,https://github.com/kfazi,8,https://github.com/PW-Sat2/PWSat2OBC/pull/130#issuecomment-299634901,"I had to increase stack size for CommTask from 2kB to 4kB because of failing integration tests.


This change is","Review status: 16 of 17 files reviewed at latest revision, 3 unresolved discussions.

libs/obc/communication/telecommands/file_system.cpp, line 132 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
Sending simple ""succeeded"" response won't do.  Due to the nature of the gs <-> obc communication we will not wait for the obc to respond to one TC before sending another.  threfore if a response is sent back it has to be constructed in such way that it is possible to map it to the specific request out of many that has been sent.  The very least include original tc apid  in response frame.

Done.

libs/obc/communication/telecommands/file_system.cpp, line 39 at r4 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
constexpr in FileSender class

This issue came from pull request #140 and it is corrected there as well

libs/telecommunication/include/telecommunication/downlink.h, line 28 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
There should be one apid assigned to be a response for purely operational commands. If we assign every possible error its own apid we will soon run out of apids for experiments. Remeber that apids are only 6bit values.

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,130,2017-04-20T12:35:38Z,2017-05-08T20:30:40Z,2017-05-08T20:30:41Z,MERGED,True,412,98,13,https://github.com/kfazi,[TeleComm] Added RemoveFile command,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/130,https://github.com/Novakov,9,https://github.com/PW-Sat2/PWSat2OBC/pull/130#issuecomment-299635094,"I had to increase stack size for CommTask from 2kB to 4kB because of failing integration tests.


This change is","Reviewed 1 of 1 files at r5.
Review status: all files reviewed at latest revision, 2 unresolved discussions.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,130,2017-04-20T12:35:38Z,2017-05-08T20:30:40Z,2017-05-08T20:30:41Z,MERGED,True,412,98,13,https://github.com/kfazi,[TeleComm] Added RemoveFile command,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/130,https://github.com/zaq32,10,https://github.com/PW-Sat2/PWSat2OBC/pull/130#issuecomment-299655726,"I had to increase stack size for CommTask from 2kB to 4kB because of failing integration tests.


This change is","Reviewed 4 of 14 files at r1, 10 of 14 files at r4, 1 of 1 files at r5.
Review status: all files reviewed at latest revision, 3 unresolved discussions, all commit checks successful.

libs/obc/communication/telecommands/file_system.cpp, line 119 at r5 (raw file):

            auto correlationId = r.ReadByte();
            auto pathLength = r.ReadByte();
            auto pathSpan = r.ReadArray(pathLength);

missing verification of reader status after the last read operation.

libs/obc/communication/telecommands/file_system.cpp, line 120 at r5 (raw file):

            auto pathLength = r.ReadByte();
            auto pathSpan = r.ReadArray(pathLength);
            auto path = reinterpret_cast<const char*>(pathSpan.data());

missing verification that path is null terminated.

libs/obc/communication/telecommands/Include/obc/telecommands/file_system.hpp, line 66 at r5 (raw file):


Array of 32-bit LE - Sequence numbers of parts that will be send
this line is not supposed to be here



Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,130,2017-04-20T12:35:38Z,2017-05-08T20:30:40Z,2017-05-08T20:30:41Z,MERGED,True,412,98,13,https://github.com/kfazi,[TeleComm] Added RemoveFile command,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/130,https://github.com/kfazi,11,https://github.com/PW-Sat2/PWSat2OBC/pull/130#issuecomment-299665650,"I had to increase stack size for CommTask from 2kB to 4kB because of failing integration tests.


This change is","Review status: 12 of 17 files reviewed at latest revision, 3 unresolved discussions, some commit checks failed.

libs/obc/communication/telecommands/file_system.cpp, line 119 at r5 (raw file):
Previously, zaq32 (ukasz ak) wrote
missing verification of reader status after the last read operation.

Done.

libs/obc/communication/telecommands/file_system.cpp, line 120 at r5 (raw file):
Previously, zaq32 (ukasz ak) wrote
missing verification that path is null terminated.

Done.

libs/obc/communication/telecommands/Include/obc/telecommands/file_system.hpp, line 66 at r5 (raw file):
Previously, zaq32 (ukasz ak) wrote


Array of 32-bit LE - Sequence numbers of parts that will be send
this line is not supposed to be here



Why not? This allows to download files in chunks.
And this line corresponds to DownloadFileTelecommand, which I'm refactoring in PR #140

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,130,2017-04-20T12:35:38Z,2017-05-08T20:30:40Z,2017-05-08T20:30:41Z,MERGED,True,412,98,13,https://github.com/kfazi,[TeleComm] Added RemoveFile command,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/130,https://github.com/zaq32,12,https://github.com/PW-Sat2/PWSat2OBC/pull/130#issuecomment-299669820,"I had to increase stack size for CommTask from 2kB to 4kB because of failing integration tests.


This change is","Reviewed 1 of 14 files at r4, 5 of 5 files at r6.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,130,2017-04-20T12:35:38Z,2017-05-08T20:30:40Z,2017-05-08T20:30:41Z,MERGED,True,412,98,13,https://github.com/kfazi,[TeleComm] Added RemoveFile command,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/130,https://github.com/Novakov,13,https://github.com/PW-Sat2/PWSat2OBC/pull/130#issuecomment-299981815,"I had to increase stack size for CommTask from 2kB to 4kB because of failing integration tests.


This change is","Reviewed 1 of 5 files at r7.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,131,2017-04-22T08:59:51Z,2017-04-22T23:45:29Z,2017-04-22T23:45:30Z,MERGED,True,7,4,4,https://github.com/Novakov,Fix stack sizes,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/131,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/131,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,131,2017-04-22T08:59:51Z,2017-04-22T23:45:29Z,2017-04-22T23:45:30Z,MERGED,True,7,4,4,https://github.com/Novakov,Fix stack sizes,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/131,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/131#issuecomment-296408942,This change is,"Reviewed 4 of 4 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,132,2017-04-22T09:01:15Z,2017-04-24T15:23:09Z,2017-04-24T15:23:10Z,MERGED,True,196,3,15,https://github.com/Novakov,Driver for internal watchdog,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/132,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/132,"Driver for internal watchdog

~1sec period
kicked on each system tick



This change is","Driver for internal watchdog

~1sec period
kicked on each system tick



This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,132,2017-04-22T09:01:15Z,2017-04-24T15:23:09Z,2017-04-24T15:23:10Z,MERGED,True,196,3,15,https://github.com/Novakov,Driver for internal watchdog,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/132,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/132#issuecomment-296370680,"Driver for internal watchdog

~1sec period
kicked on each system tick



This change is",Driver do watchdoga wewntrznego,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,132,2017-04-22T09:01:15Z,2017-04-24T15:23:09Z,2017-04-24T15:23:10Z,MERGED,True,196,3,15,https://github.com/Novakov,Driver for internal watchdog,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/132,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/132#issuecomment-296409131,"Driver for internal watchdog

~1sec period
kicked on each system tick



This change is","Reviewed 15 of 15 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,133,2017-04-22T18:14:42Z,2017-04-26T17:39:10Z,2017-04-26T17:39:11Z,MERGED,True,273,21,18,https://github.com/Novakov,EPS error counters,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/133,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/133,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,133,2017-04-22T18:14:42Z,2017-04-26T17:39:10Z,2017-04-26T17:39:11Z,MERGED,True,273,21,18,https://github.com/Novakov,EPS error counters,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/133,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/133#issuecomment-296391536,This change is,[EPS] Error counters,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,133,2017-04-22T18:14:42Z,2017-04-26T17:39:10Z,2017-04-26T17:39:11Z,MERGED,True,273,21,18,https://github.com/Novakov,EPS error counters,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/133,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/133#issuecomment-296415110,This change is,"Reviewed 6 of 18 files at r1.
Review status: 6 of 18 files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,133,2017-04-22T18:14:42Z,2017-04-26T17:39:10Z,2017-04-26T17:39:11Z,MERGED,True,273,21,18,https://github.com/Novakov,EPS error counters,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/133,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/133#issuecomment-296807884,This change is,"Reviewed 12 of 18 files at r1.
Review status: all files reviewed at latest revision, 3 unresolved discussions, some commit checks failed.

libs/base/Include/traits.hpp, line 167 at r1 (raw file):

  public:
    /** @brief Value indicating whether type is in list */
    static constexpr bool value = Check<0, List...>();

put public members before private members

libs/base/Include/traits.hpp, line 202 at r1 (raw file):

  public:
    /** @brief Value indicating whether types in template pack are unique */
    static constexpr bool value = IsUnique<0, Ts...>();

put public members before private members

libs/drivers/eps/eps.cpp, line 30 at r1 (raw file):

template <error_counter::Device Device>
static constexpr I2CResult operator>>(I2CResult result, error_counter::ErrorCounter& counter)
{
(result == I2CResult::OK) >> counter;
        return result;
    }


Quoted 4 lines of code
>         template 
>         static constexpr ErrorCode operator>>(ErrorCode result, error_counter::ErrorCounter& counter)
>         {
>             (result == ErrorCode::NoError) >> counter;

> 
>             return result;
>         }
Any reason why these cannot be put in the same library as error counting implementation?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,133,2017-04-22T18:14:42Z,2017-04-26T17:39:10Z,2017-04-26T17:39:11Z,MERGED,True,273,21,18,https://github.com/Novakov,EPS error counters,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/133,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/133#issuecomment-297138389,This change is,"Review status: all files reviewed at latest revision, 3 unresolved discussions, some commit checks failed.

libs/drivers/eps/eps.cpp, line 30 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote

template <error_counter::Device Device>
static constexpr I2CResult operator>>(I2CResult result, error_counter::ErrorCounter& counter)
{
(result == I2CResult::OK) >> counter;
        return result;
    }

    template <error_counter::Device Device>
    static constexpr ErrorCode operator>>(ErrorCode result, error_counter::ErrorCounter<Device>& counter)
    {
        (result == ErrorCode::NoError) >> counter;

        return result;
    }


Any reason why these cannot be put in the same library as error counting implementation?

I2CResult comes from i2c library, putting this operator into error counters library will make it dependant on i2c - which will be strange.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,133,2017-04-22T18:14:42Z,2017-04-26T17:39:10Z,2017-04-26T17:39:11Z,MERGED,True,273,21,18,https://github.com/Novakov,EPS error counters,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/133,https://github.com/zaq32,6,https://github.com/PW-Sat2/PWSat2OBC/pull/133#issuecomment-297478007,This change is,"Reviewed 6 of 6 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,134,2017-04-24T19:06:45Z,2017-04-26T16:34:35Z,2017-04-26T16:34:36Z,MERGED,True,298,83,17,https://github.com/Novakov,Telecommand: abort experiment,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/134,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/134,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,134,2017-04-24T19:06:45Z,2017-04-26T16:34:35Z,2017-04-26T16:34:36Z,MERGED,True,298,83,17,https://github.com/Novakov,Telecommand: abort experiment,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/134,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/134#issuecomment-296797574,This change is,[TC] Abort experiment,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,134,2017-04-24T19:06:45Z,2017-04-26T16:34:35Z,2017-04-26T16:34:36Z,MERGED,True,298,83,17,https://github.com/Novakov,Telecommand: abort experiment,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/134,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/134#issuecomment-296805939,This change is,"Reviewed 17 of 17 files at r1.
Review status: all files reviewed at latest revision, 5 unresolved discussions.

libs/base/Include/traits.hpp, line 137 at r1 (raw file):

 * @brief Compile time traits for values
 */
template <typename ValueType> struct ValuesTrait

By convention single type should provide only one operation and name of the type should be related to the operation.

libs/experiments/experiments.cpp, line 119 at r1 (raw file):

        do
        {
            if (this->_event.IsSet(Event::AbortRequest))

use Wait() with timeout set to 0 and auto reset set to true

libs/obc/communication/Include/obc/communication.h, line 30 at r1 (raw file):

     * @tparam Telecommands Types of telecommands
     */
    template <typename... Telecommands> class TelecommandsHolder final

This type is independent of obc specific logic. Move it to the obc independent library

libs/obc/communication/Include/obc/communication.h, line 68 at r1 (raw file):
Quoted 4 lines of code
>         /** @brief Telecommand instances */
>         std::tuple _telecommands;
>         /** @brief Pointers to telecommands */
>         std::array _pointers;

Class fields should be defined at the end

libs/obc/communication/Include/obc/communication.h, line 72 at r1 (raw file):

        /**
         * @brief
         * @return

?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,134,2017-04-24T19:06:45Z,2017-04-26T16:34:35Z,2017-04-26T16:34:36Z,MERGED,True,298,83,17,https://github.com/Novakov,Telecommand: abort experiment,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/134,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/134#issuecomment-296811862,This change is,"Review status: all files reviewed at latest revision, 5 unresolved discussions.

libs/obc/communication/Include/obc/communication.h, line 30 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
This type is independent of obc specific logic. Move it to the obc independent library

It is dependent as it checks if suppiled  types are valid telecommands. Stripping it from telecommands specifics won't give us any good

libs/obc/communication/Include/obc/communication.h, line 68 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote

    /** @brief Telecommand instances */
    std::tuple<Telecommands...> _telecommands;
    /** @brief Pointers to telecommands */
    std::array<telecommunication::uplink::IHandleTeleCommand*, sizeof...(Telecommands)> _pointers;


Class fields should be defined at the end

Yeah but my intention was to keep static assert stuff together (and putting it at the beginning of the class will 'hide' purpose of whole class)

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,134,2017-04-24T19:06:45Z,2017-04-26T16:34:35Z,2017-04-26T16:34:36Z,MERGED,True,298,83,17,https://github.com/Novakov,Telecommand: abort experiment,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/134,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/134#issuecomment-297127079,This change is,"Review status: all files reviewed at latest revision, 5 unresolved discussions.

libs/base/Include/traits.hpp, line 137 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
By convention single type should provide only one operation and name of the type should be related to the operation.

Done.

libs/experiments/experiments.cpp, line 119 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
use Wait() with timeout set to 0 and auto reset set to true

Done.

libs/obc/communication/Include/obc/communication.h, line 72 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
?

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,134,2017-04-24T19:06:45Z,2017-04-26T16:34:35Z,2017-04-26T16:34:36Z,MERGED,True,298,83,17,https://github.com/Novakov,Telecommand: abort experiment,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/134,https://github.com/zaq32,6,https://github.com/PW-Sat2/PWSat2OBC/pull/134#issuecomment-297468568,This change is,"Reviewed 4 of 4 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,135,2017-04-27T08:03:11Z,2017-04-28T12:48:55Z,2017-04-28T12:48:56Z,MERGED,True,9445,9031,163,https://github.com/Novakov,Split unit tests,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/135,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/135,"Splitted unit tests into few executables. Linking of single executable takes few seconds (~5secs) instead for almost 16secs


This change is","Splitted unit tests into few executables. Linking of single executable takes few seconds (~5secs) instead for almost 16secs


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,135,2017-04-27T08:03:11Z,2017-04-28T12:48:55Z,2017-04-28T12:48:56Z,MERGED,True,9445,9031,163,https://github.com/Novakov,Split unit tests,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/135,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/135#issuecomment-297663820,"Splitted unit tests into few executables. Linking of single executable takes few seconds (~5secs) instead for almost 16secs


This change is","Reviewed 101 of 213 files at r1.
Review status: 53 of 116 files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,135,2017-04-27T08:03:11Z,2017-04-28T12:48:55Z,2017-04-28T12:48:56Z,MERGED,True,9445,9031,163,https://github.com/Novakov,Split unit tests,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/135,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/135#issuecomment-297914486,"Splitted unit tests into few executables. Linking of single executable takes few seconds (~5secs) instead for almost 16secs


This change is","Reviewed 112 of 213 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,135,2017-04-27T08:03:11Z,2017-04-28T12:48:55Z,2017-04-28T12:48:56Z,MERGED,True,9445,9031,163,https://github.com/Novakov,Split unit tests,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/135,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/135#issuecomment-297979585,"Splitted unit tests into few executables. Linking of single executable takes few seconds (~5secs) instead for almost 16secs


This change is","Reviewed 1 of 213 files at r1, 8 of 8 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,136,2017-04-29T10:22:52Z,2017-04-29T10:53:24Z,2017-04-29T10:53:25Z,MERGED,True,5,0,1,https://github.com/mandrek44,Fixed compilation error when compiling for STK Storage,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/136,https://github.com/mandrek44,1,https://github.com/PW-Sat2/PWSat2OBC/pull/136,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,136,2017-04-29T10:22:52Z,2017-04-29T10:53:24Z,2017-04-29T10:53:25Z,MERGED,True,5,0,1,https://github.com/mandrek44,Fixed compilation error when compiling for STK Storage,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/136,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/136#issuecomment-298160542,This change is,"Reviewed 1 of 1 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,137,2017-05-02T19:27:26Z,2017-05-04T17:40:38Z,2017-05-04T17:40:41Z,MERGED,True,3,3,2,https://github.com/pwec,fixing header paths names due to compilation issues on linux,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/137,https://github.com/pwec,1,https://github.com/PW-Sat2/PWSat2OBC/pull/137,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,137,2017-05-02T19:27:26Z,2017-05-04T17:40:38Z,2017-05-04T17:40:41Z,MERGED,True,3,3,2,https://github.com/pwec,fixing header paths names due to compilation issues on linux,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/137,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/137#issuecomment-298737034,This change is,"Reviewed 2 of 2 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,138,2017-05-02T19:42:33Z,2017-05-08T15:34:27Z,2017-05-08T15:34:28Z,MERGED,True,1444,32,30,https://github.com/zaq32,Telemetry management,9,[],https://github.com/PW-Sat2/PWSat2OBC/pull/138,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/138,"This type adds mechanism for keeping track of all telemetry elements, detect changes in them (while disregarding minor state fluctuations) and saving the detected telemetry changes in dedicated binary events file(s).
For the moment single telemetry event file can be up to 512KB long and at most two files are used for keeping saving the telemetry changes. In addition the state of the telemetry object is not preserved over the obc reboot , therefore as a result once the obc starts up and starts collecting the telemetry from its  devices first snapshot of the telemetry state will be written to the telemetry file.
The telemetry container is kept as part of the global obc state, while state changes are detected & saved as part of mission loop.
Questions yet to be answered:

What should be the maximal size of the telemetry file?
The exact telemetry file format. The one used right now is rather easy to generate on the fly a little bit harder to analyze & navigate, plus it is rather not particularly resistant for data corruption.
Should the telemetry be preserved over the OBC reboots?



This change is","This type adds mechanism for keeping track of all telemetry elements, detect changes in them (while disregarding minor state fluctuations) and saving the detected telemetry changes in dedicated binary events file(s).
For the moment single telemetry event file can be up to 512KB long and at most two files are used for keeping saving the telemetry changes. In addition the state of the telemetry object is not preserved over the obc reboot , therefore as a result once the obc starts up and starts collecting the telemetry from its  devices first snapshot of the telemetry state will be written to the telemetry file.
The telemetry container is kept as part of the global obc state, while state changes are detected & saved as part of mission loop.
Questions yet to be answered:

What should be the maximal size of the telemetry file?
The exact telemetry file format. The one used right now is rather easy to generate on the fly a little bit harder to analyze & navigate, plus it is rather not particularly resistant for data corruption.
Should the telemetry be preserved over the OBC reboots?



This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,138,2017-05-02T19:42:33Z,2017-05-08T15:34:27Z,2017-05-08T15:34:28Z,MERGED,True,1444,32,30,https://github.com/zaq32,Telemetry management,9,[],https://github.com/PW-Sat2/PWSat2OBC/pull/138,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/138#issuecomment-298754084,"This type adds mechanism for keeping track of all telemetry elements, detect changes in them (while disregarding minor state fluctuations) and saving the detected telemetry changes in dedicated binary events file(s).
For the moment single telemetry event file can be up to 512KB long and at most two files are used for keeping saving the telemetry changes. In addition the state of the telemetry object is not preserved over the obc reboot , therefore as a result once the obc starts up and starts collecting the telemetry from its  devices first snapshot of the telemetry state will be written to the telemetry file.
The telemetry container is kept as part of the global obc state, while state changes are detected & saved as part of mission loop.
Questions yet to be answered:

What should be the maximal size of the telemetry file?
The exact telemetry file format. The one used right now is rather easy to generate on the fly a little bit harder to analyze & navigate, plus it is rather not particularly resistant for data corruption.
Should the telemetry be preserved over the OBC reboots?



This change is",[Telemetry] Implement telemetry management POC mechanism,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,138,2017-05-02T19:42:33Z,2017-05-08T15:34:27Z,2017-05-08T15:34:28Z,MERGED,True,1444,32,30,https://github.com/zaq32,Telemetry management,9,[],https://github.com/PW-Sat2/PWSat2OBC/pull/138,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/138#issuecomment-299633924,"This type adds mechanism for keeping track of all telemetry elements, detect changes in them (while disregarding minor state fluctuations) and saving the detected telemetry changes in dedicated binary events file(s).
For the moment single telemetry event file can be up to 512KB long and at most two files are used for keeping saving the telemetry changes. In addition the state of the telemetry object is not preserved over the obc reboot , therefore as a result once the obc starts up and starts collecting the telemetry from its  devices first snapshot of the telemetry state will be written to the telemetry file.
The telemetry container is kept as part of the global obc state, while state changes are detected & saved as part of mission loop.
Questions yet to be answered:

What should be the maximal size of the telemetry file?
The exact telemetry file format. The one used right now is rather easy to generate on the fly a little bit harder to analyze & navigate, plus it is rather not particularly resistant for data corruption.
Should the telemetry be preserved over the OBC reboots?



This change is","Reviewed 29 of 29 files at r1.
Review status: all files reviewed at latest revision, 2 unresolved discussions, some commit checks failed.

libs/mission/telemetry/telemetry.cpp, line 59 at r1 (raw file):

    }

    bool TelemetryTask::SaveToFile(gsl::span<const std::uint8_t> frame)

I think that frame is not the best name

libs/state/time.cpp, line 43 at r1 (raw file):

        const auto missionDifference = duration_cast<seconds>(this->lastMissionTime - state.lastMissionTime);
        const auto externalDifference = duration_cast<seconds>(this->lastExternalTime - state.lastExternalTime);
        return std::abs(missionDifference.count()) >= 60 || std::abs(externalDifference.count()) >= 60;

60 of what? years? nanoseconds? Also it would be nice to get this value as constant in TimeState class (easier to find)

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,138,2017-05-02T19:42:33Z,2017-05-08T15:34:27Z,2017-05-08T15:34:28Z,MERGED,True,1444,32,30,https://github.com/zaq32,Telemetry management,9,[],https://github.com/PW-Sat2/PWSat2OBC/pull/138,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/138#issuecomment-299781278,"This type adds mechanism for keeping track of all telemetry elements, detect changes in them (while disregarding minor state fluctuations) and saving the detected telemetry changes in dedicated binary events file(s).
For the moment single telemetry event file can be up to 512KB long and at most two files are used for keeping saving the telemetry changes. In addition the state of the telemetry object is not preserved over the obc reboot , therefore as a result once the obc starts up and starts collecting the telemetry from its  devices first snapshot of the telemetry state will be written to the telemetry file.
The telemetry container is kept as part of the global obc state, while state changes are detected & saved as part of mission loop.
Questions yet to be answered:

What should be the maximal size of the telemetry file?
The exact telemetry file format. The one used right now is rather easy to generate on the fly a little bit harder to analyze & navigate, plus it is rather not particularly resistant for data corruption.
Should the telemetry be preserved over the OBC reboots?



This change is","Review status: 26 of 31 files reviewed at latest revision, 2 unresolved discussions, some commit checks failed.

libs/mission/telemetry/telemetry.cpp, line 59 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
I think that frame is not the best name

Fixed.

libs/state/time.cpp, line 43 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
60 of what? years? nanoseconds? Also it would be nice to get this value as constant in TimeState class (easier to find)

60 seconds. this was written this way as there is no built in abs for chrono in c++ 14. Anyway I have backported it from c++17.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,138,2017-05-02T19:42:33Z,2017-05-08T15:34:27Z,2017-05-08T15:34:28Z,MERGED,True,1444,32,30,https://github.com/zaq32,Telemetry management,9,[],https://github.com/PW-Sat2/PWSat2OBC/pull/138,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/138#issuecomment-299902309,"This type adds mechanism for keeping track of all telemetry elements, detect changes in them (while disregarding minor state fluctuations) and saving the detected telemetry changes in dedicated binary events file(s).
For the moment single telemetry event file can be up to 512KB long and at most two files are used for keeping saving the telemetry changes. In addition the state of the telemetry object is not preserved over the obc reboot , therefore as a result once the obc starts up and starts collecting the telemetry from its  devices first snapshot of the telemetry state will be written to the telemetry file.
The telemetry container is kept as part of the global obc state, while state changes are detected & saved as part of mission loop.
Questions yet to be answered:

What should be the maximal size of the telemetry file?
The exact telemetry file format. The one used right now is rather easy to generate on the fly a little bit harder to analyze & navigate, plus it is rather not particularly resistant for data corruption.
Should the telemetry be preserved over the OBC reboots?



This change is","Reviewed 4 of 4 files at r2, 3 of 3 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,139,2017-05-04T16:17:22Z,2017-05-06T19:02:24Z,2017-05-06T19:02:27Z,MERGED,True,17312,82,140,https://github.com/Novakov,BSP from ESL,23,[],https://github.com/PW-Sat2/PWSat2OBC/pull/139,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/139,"Import of BSP + bootloader +sample application for CubeComputer from ESL.
Changes required to build & run tests on EM successfully.


This change is","Import of BSP + bootloader +sample application for CubeComputer from ESL.
Changes required to build & run tests on EM successfully.


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,139,2017-05-04T16:17:22Z,2017-05-06T19:02:24Z,2017-05-06T19:02:27Z,MERGED,True,17312,82,140,https://github.com/Novakov,BSP from ESL,23,[],https://github.com/PW-Sat2/PWSat2OBC/pull/139,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/139#issuecomment-299257621,"Import of BSP + bootloader +sample application for CubeComputer from ESL.
Changes required to build & run tests on EM successfully.


This change is","Reviewed 3 of 95 files at r1, 17 of 77 files at r5.
Review status: 20 of 138 files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,139,2017-05-04T16:17:22Z,2017-05-06T19:02:24Z,2017-05-06T19:02:27Z,MERGED,True,17312,82,140,https://github.com/Novakov,BSP from ESL,23,[],https://github.com/PW-Sat2/PWSat2OBC/pull/139,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/139#issuecomment-299654942,"Import of BSP + bootloader +sample application for CubeComputer from ESL.
Changes required to build & run tests on EM successfully.


This change is","Reviewed 60 of 95 files at r1, 1 of 3 files at r2, 5 of 19 files at r3, 53 of 77 files at r5.
Review status: all files reviewed at latest revision, 6 unresolved discussions, some commit checks failed.

libs/drivers/uart/uart.cpp, line 15 at r5 (raw file):

#define DEBUG_UART

__attribute__((optimize(""O3""))) void UART1_RX_IRQHandler()

we do not put interrupt handlers in driver libraries. put it in main and redirect from there to the driver object.

libs/drivers/uart/uart.cpp, line 19 at r5 (raw file):

#ifdef DEBUG_UART
    GPIO->P[gpioPortC].DOUTCLR = 1 << 11;
//    GPIO_PinOutClear(gpioPortC, 11);

do not leave commented out code. either remove it or use #if 0

libs/drivers/uart/uart.cpp, line 115 at r5 (raw file):

            This->_event.Clear(Event::LineEndReceived);

            GPIO_PinOutClear(gpioPortC, 12);

I'd rather have pins defined in io_map then hardcoded in uart driver

libs/drivers/uart/Include/uart/uart.h, line 14 at r5 (raw file):

    namespace uart
    {
        class UART

missing documentation

platforms/DevBoard/Include/io_map.h, line 21 at r5 (raw file):

    using SlaveSelectFlash3 = PinLocation<gpioPortB, 12>;

    using SlaveSelectFram1 = PinLocation<gpioPortA, 11>;

This pin is not available on devboard

src/commands/ping.cpp, line 7 at r5 (raw file):

#include <em_system.h>
#include <core_cm3.h>
duplicated below


Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,139,2017-05-04T16:17:22Z,2017-05-06T19:02:24Z,2017-05-06T19:02:27Z,MERGED,True,17312,82,140,https://github.com/Novakov,BSP from ESL,23,[],https://github.com/PW-Sat2/PWSat2OBC/pull/139,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/139#issuecomment-299657134,"Import of BSP + bootloader +sample application for CubeComputer from ESL.
Changes required to build & run tests on EM successfully.


This change is","Review status: all files reviewed at latest revision, 6 unresolved discussions, some commit checks failed.

libs/drivers/uart/uart.cpp, line 15 at r5 (raw file):
Previously, zaq32 (ukasz ak) wrote
we do not put interrupt handlers in driver libraries. put it in main and redirect from there to the driver object.

Done.

libs/drivers/uart/uart.cpp, line 19 at r5 (raw file):
Previously, zaq32 (ukasz ak) wrote
do not leave commented out code. either remove it or use #if 0

Done.

libs/drivers/uart/uart.cpp, line 115 at r5 (raw file):
Previously, zaq32 (ukasz ak) wrote
I'd rather have pins defined in io_map then hardcoded in uart driver

When I will be satisfied with stability of the UART driver I will remove them

libs/drivers/uart/Include/uart/uart.h, line 14 at r5 (raw file):
Previously, zaq32 (ukasz ak) wrote
missing documentation

Done.

platforms/DevBoard/Include/io_map.h, line 21 at r5 (raw file):
Previously, zaq32 (ukasz ak) wrote
This pin is not available on devboard

Done.

src/commands/ping.cpp, line 7 at r5 (raw file):
Previously, zaq32 (ukasz ak) wrote

#include <em_system.h>
#include <core_cm3.h>
duplicated below


Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,139,2017-05-04T16:17:22Z,2017-05-06T19:02:24Z,2017-05-06T19:02:27Z,MERGED,True,17312,82,140,https://github.com/Novakov,BSP from ESL,23,[],https://github.com/PW-Sat2/PWSat2OBC/pull/139,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/139#issuecomment-299657514,"Import of BSP + bootloader +sample application for CubeComputer from ESL.
Changes required to build & run tests on EM successfully.


This change is","Reviewed 10 of 10 files at r6.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,140,2017-05-05T16:59:51Z,2017-05-09T05:02:05Z,2017-05-09T05:02:08Z,MERGED,True,5,4,3,https://github.com/kfazi,[TeleComm] Refactored DownloadFile command,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/140,https://github.com/kfazi,1,https://github.com/PW-Sat2/PWSat2OBC/pull/140,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,140,2017-05-05T16:59:51Z,2017-05-09T05:02:05Z,2017-05-09T05:02:08Z,MERGED,True,5,4,3,https://github.com/kfazi,[TeleComm] Refactored DownloadFile command,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/140,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/140#issuecomment-299631646,This change is,"Reviewed 6 of 6 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,140,2017-05-05T16:59:51Z,2017-05-09T05:02:05Z,2017-05-09T05:02:08Z,MERGED,True,5,4,3,https://github.com/kfazi,[TeleComm] Refactored DownloadFile command,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/140,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/140#issuecomment-299635408,This change is,"Reviewed 1 of 1 files at r2.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

libs/obc/communication/telecommands/file_system.cpp, line 39 at r2 (raw file):

        bool FileSender::SendPart(std::uint32_t seq)
        {
            constexpr uint8_t maxFileDataSize = DownlinkFrame::MaxPayloadSize - 2;

Put this inside FileSender class header - so it will be easier to find

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,140,2017-05-05T16:59:51Z,2017-05-09T05:02:05Z,2017-05-09T05:02:08Z,MERGED,True,5,4,3,https://github.com/kfazi,[TeleComm] Refactored DownloadFile command,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/140,https://github.com/kfazi,4,https://github.com/PW-Sat2/PWSat2OBC/pull/140#issuecomment-299645597,This change is,"Review status: all files reviewed at latest revision, 1 unresolved discussion.

libs/obc/communication/telecommands/file_system.cpp, line 39 at r2 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Put this inside FileSender class header - so it will be easier to find

But it's used only in this one method. What's the point of putting it into outer scope?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,140,2017-05-05T16:59:51Z,2017-05-09T05:02:05Z,2017-05-09T05:02:08Z,MERGED,True,5,4,3,https://github.com/kfazi,[TeleComm] Refactored DownloadFile command,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/140,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/140#issuecomment-299668082,This change is,"Reviewed 4 of 4 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

libs/obc/communication/telecommands/file_system.cpp, line 39 at r2 (raw file):
Previously, kfazi wrote
But it's used only in this one method. What's the point of putting it into outer scope?

This value is answer to question 'How much data fits in single frame?' which is perfectly valid question from OPER team. If this value is in class header it will be much easier to find.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,140,2017-05-05T16:59:51Z,2017-05-09T05:02:05Z,2017-05-09T05:02:08Z,MERGED,True,5,4,3,https://github.com/kfazi,[TeleComm] Refactored DownloadFile command,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/140,https://github.com/kfazi,6,https://github.com/PW-Sat2/PWSat2OBC/pull/140#issuecomment-299672616,This change is,"Review status: 4 of 6 files reviewed at latest revision, 1 unresolved discussion, some commit checks failed.

libs/obc/communication/telecommands/file_system.cpp, line 39 at r2 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
This value is answer to question 'How much data fits in single frame?' which is perfectly valid question from OPER team. If this value is in class header it will be much easier to find.

Fair enough

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,140,2017-05-05T16:59:51Z,2017-05-09T05:02:05Z,2017-05-09T05:02:08Z,MERGED,True,5,4,3,https://github.com/kfazi,[TeleComm] Refactored DownloadFile command,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/140,https://github.com/Novakov,7,https://github.com/PW-Sat2/PWSat2OBC/pull/140#issuecomment-299735053,This change is,"Reviewed 2 of 2 files at r4.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,140,2017-05-05T16:59:51Z,2017-05-09T05:02:05Z,2017-05-09T05:02:08Z,MERGED,True,5,4,3,https://github.com/kfazi,[TeleComm] Refactored DownloadFile command,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/140,https://github.com/Novakov,8,https://github.com/PW-Sat2/PWSat2OBC/pull/140#issuecomment-299989773,This change is,"Reviewed 3 of 5 files at r5.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,141,2017-05-05T21:02:49Z,2017-05-09T08:41:31Z,2017-05-09T12:41:56Z,MERGED,True,724,106,42,https://github.com/kfazi,[TeleComm] Added Idle telecommand,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/141,https://github.com/kfazi,1,https://github.com/PW-Sat2/PWSat2OBC/pull/141,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,141,2017-05-05T21:02:49Z,2017-05-09T08:41:31Z,2017-05-09T12:41:56Z,MERGED,True,724,106,42,https://github.com/kfazi,[TeleComm] Added Idle telecommand,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/141,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/141#issuecomment-299656295,This change is,"Reviewed 43 of 44 files at r1, 1 of 1 files at r2.
Review status: all files reviewed at latest revision, 4 unresolved discussions.

libs/drivers/comm/Include/comm/CommDriver.hpp, line 151 at r2 (raw file):

     * @return Operation status, true in case of success, false otherwise.
     */
    bool SetTransmitterStateWhenIdle(IdleState requestedState);

missing specifier: override

libs/mission/comm/Include/mission/idle_state_controller.hpp, line 15 at r2 (raw file):

    struct IIdleStateController
    {
        virtual bool EnterTransmitterStateWhenIdle(std::chrono::milliseconds turnOffTime) = 0;

undocumented

libs/mission/comm/Include/mission/idle_state_controller.hpp, line 17 at r2 (raw file):

        virtual bool EnterTransmitterStateWhenIdle(std::chrono::milliseconds turnOffTime) = 0;

        virtual bool LeaveTransmitterStateWhenIdle() = 0;

undocumented

libs/obc/communication/telecommands/comm.cpp, line 37 at r2 (raw file):

            auto disableTime = now + std::chrono::seconds(duration);

            const auto status = _idleStateController.EnterTransmitterStateWhenIdle(disableTime);

telecommands are executed in different task than mission therefore this function call should be synchronized.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,141,2017-05-05T21:02:49Z,2017-05-09T08:41:31Z,2017-05-09T12:41:56Z,MERGED,True,724,106,42,https://github.com/kfazi,[TeleComm] Added Idle telecommand,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/141,https://github.com/kfazi,3,https://github.com/PW-Sat2/PWSat2OBC/pull/141#issuecomment-299665570,This change is,"Review status: 30 of 44 files reviewed at latest revision, 4 unresolved discussions, some commit checks failed.

libs/drivers/comm/Include/comm/CommDriver.hpp, line 151 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
missing specifier: override

Done.

libs/mission/comm/Include/mission/idle_state_controller.hpp, line 15 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
undocumented

Done.

libs/mission/comm/Include/mission/idle_state_controller.hpp, line 17 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
undocumented

Done.

libs/obc/communication/telecommands/comm.cpp, line 37 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
telecommands are executed in different task than mission therefore this function call should be synchronized.

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,141,2017-05-05T21:02:49Z,2017-05-09T08:41:31Z,2017-05-09T12:41:56Z,MERGED,True,724,106,42,https://github.com/kfazi,[TeleComm] Added Idle telecommand,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/141,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/141#issuecomment-299670002,This change is,"Reviewed 14 of 14 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,141,2017-05-05T21:02:49Z,2017-05-09T08:41:31Z,2017-05-09T12:41:56Z,MERGED,True,724,106,42,https://github.com/kfazi,[TeleComm] Added Idle telecommand,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/141,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/141#issuecomment-299783351,This change is,"Reviewed 6 of 6 files at r4.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,141,2017-05-05T21:02:49Z,2017-05-09T08:41:31Z,2017-05-09T12:41:56Z,MERGED,True,724,106,42,https://github.com/kfazi,[TeleComm] Added Idle telecommand,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/141,https://github.com/zaq32,6,https://github.com/PW-Sat2/PWSat2OBC/pull/141#issuecomment-300071315,This change is,"Reviewed 9 of 9 files at r5, 7 of 9 files at r6.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,141,2017-05-05T21:02:49Z,2017-05-09T08:41:31Z,2017-05-09T12:41:56Z,MERGED,True,724,106,42,https://github.com/kfazi,[TeleComm] Added Idle telecommand,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/141,https://github.com/Novakov,7,https://github.com/PW-Sat2/PWSat2OBC/pull/141#issuecomment-300071833,This change is,"Reviewed 1 of 44 files at r1, 1 of 9 files at r5.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,141,2017-05-05T21:02:49Z,2017-05-09T08:41:31Z,2017-05-09T12:41:56Z,MERGED,True,724,106,42,https://github.com/kfazi,[TeleComm] Added Idle telecommand,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/141,https://github.com/zaq32,8,https://github.com/PW-Sat2/PWSat2OBC/pull/141#issuecomment-300099858,This change is,"Reviewed 4 of 4 files at r7.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,141,2017-05-05T21:02:49Z,2017-05-09T08:41:31Z,2017-05-09T12:41:56Z,MERGED,True,724,106,42,https://github.com/kfazi,[TeleComm] Added Idle telecommand,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/141,https://github.com/Novakov,9,https://github.com/PW-Sat2/PWSat2OBC/pull/141#issuecomment-300150703,This change is,[TC] COMM - Komenda - wczenie nonej na okrelony czas,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,142,2017-05-06T19:12:26Z,2017-05-06T20:20:55Z,2017-05-06T20:20:56Z,MERGED,True,324,14,10,https://github.com/Novakov,Safe mode skeleton program,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/142,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/142,"Dummy program that can be flashed to EEPROM and executed as safe-mode. It prints '!' each seconds and restarts MCU after pressing 'r'


This change is","Dummy program that can be flashed to EEPROM and executed as safe-mode. It prints '!' each seconds and restarts MCU after pressing 'r'


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,142,2017-05-06T19:12:26Z,2017-05-06T20:20:55Z,2017-05-06T20:20:56Z,MERGED,True,324,14,10,https://github.com/Novakov,Safe mode skeleton program,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/142,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/142#issuecomment-299663637,"Dummy program that can be flashed to EEPROM and executed as safe-mode. It prints '!' each seconds and restarts MCU after pressing 'r'


This change is","Reviewed 10 of 10 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,143,2017-05-06T20:28:00Z,2017-05-08T18:37:01Z,2017-05-08T18:37:02Z,MERGED,True,5244,5040,44,https://github.com/Novakov,Bootloader cleanup,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/143,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/143,"Major clean-up to bootloader:

Compile as C++
Simplify command parsing



This change is","Major clean-up to bootloader:

Compile as C++
Simplify command parsing



This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,143,2017-05-06T20:28:00Z,2017-05-08T18:37:01Z,2017-05-08T18:37:02Z,MERGED,True,5244,5040,44,https://github.com/Novakov,Bootloader cleanup,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/143,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/143#issuecomment-299665223,"Major clean-up to bootloader:

Compile as C++
Simplify command parsing



This change is","Reviewed 57 of 63 files at r1.
Review status: 39 of 44 files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,143,2017-05-06T20:28:00Z,2017-05-08T18:37:01Z,2017-05-08T18:37:02Z,MERGED,True,5244,5040,44,https://github.com/Novakov,Bootloader cleanup,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/143,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/143#issuecomment-299864127,"Major clean-up to bootloader:

Compile as C++
Simplify command parsing



This change is","Reviewed 6 of 63 files at r1.
Review status: all files reviewed at latest revision, 8 unresolved discussions.

boot/commands/booting.cpp, line 11 at r1 (raw file):

{
    char debugStr[60] = {0};
    auto debugLen = sprintf((char*)debugStr, ""\n\nBooting to upper half "");

Unnecessary. constant string literals like this one can be written directly to the output.

boot/commands/booting.cpp, line 24 at r1 (raw file):

    if (index > BOOT_TABLE_SIZE)
    {
        auto debugLen = sprintf((char*)debugStr, ""\n\nError: Boot index out of bounds!"");

Unnecessary. constant string literals like this one can be written directly to the output.

boot/commands/settings.cpp, line 14 at r1 (raw file):

    auto index = USART_Rx(BSP_UART_DEBUG);

    debugLen = sprintf((char*)debugStr, ""%d"", index);

format entire string here

boot/commands/upload.cpp, line 21 at r1 (raw file):

    if (index == 0x00)
    {
        debugLen = sprintf((char*)debugStr, ""\nError: Cant override safe mode program!"");

Unnecessary. constant string literals like this one can be written directly to the output.

boot/commands/upload.cpp, line 27 at r1 (raw file):

    if (index > BOOT_TABLE_SIZE)
    {
        debugLen = sprintf((char*)debugStr, ""\nError: Boot index out of bounds!"");

Unnecessary. constant string literals like this one can be written directly to the output.

boot/commands/upload.cpp, line 32 at r1 (raw file):

    }

    debugLen = sprintf((char*)debugStr, ""\nUpload Binary: "");

Unnecessary. constant string literals like this one can be written directly to the output.

boot/commands/upload.cpp, line 51 at r1 (raw file):

    BOOT_setValid(index);

    debugLen = sprintf((char*)debugStr, ""\nBoot Description: "");

Unnecessary. constant string literals like this one can be written directly to the output.

boot/commands/upload.cpp, line 70 at r1 (raw file):

    // update entry description
    BOOT_programDescription(index, desc);

is the desc supposed to be null terminated or fixed size?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,143,2017-05-06T20:28:00Z,2017-05-08T18:37:01Z,2017-05-08T18:37:02Z,MERGED,True,5244,5040,44,https://github.com/Novakov,Bootloader cleanup,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/143,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/143#issuecomment-299941950,"Major clean-up to bootloader:

Compile as C++
Simplify command parsing



This change is","Review status: 40 of 44 files reviewed at latest revision, 8 unresolved discussions.

boot/commands/booting.cpp, line 11 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
Unnecessary. constant string literals like this one can be written directly to the output.

Done.

boot/commands/booting.cpp, line 24 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
Unnecessary. constant string literals like this one can be written directly to the output.

Done.

boot/commands/settings.cpp, line 14 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
format entire string here

Done.

boot/commands/upload.cpp, line 21 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
Unnecessary. constant string literals like this one can be written directly to the output.

Done.

boot/commands/upload.cpp, line 27 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
Unnecessary. constant string literals like this one can be written directly to the output.

Done.

boot/commands/upload.cpp, line 32 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
Unnecessary. constant string literals like this one can be written directly to the output.

Done.

boot/commands/upload.cpp, line 51 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
Unnecessary. constant string literals like this one can be written directly to the output.

Done.

boot/commands/upload.cpp, line 70 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
is the desc supposed to be null terminated or fixed size?

I retained the original structure - description is loaded up to size or new line (whichever is receives first). When displaying it is displayed up to null terminator, new line character or maximum size

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,143,2017-05-06T20:28:00Z,2017-05-08T18:37:01Z,2017-05-08T18:37:02Z,MERGED,True,5244,5040,44,https://github.com/Novakov,Bootloader cleanup,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/143,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/143#issuecomment-299945181,"Major clean-up to bootloader:

Compile as C++
Simplify command parsing



This change is","Reviewed 4 of 4 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,144,2017-05-08T15:45:24Z,2017-05-08T16:34:48Z,2017-05-08T16:34:49Z,MERGED,True,28,7,16,https://github.com/zaq32,Extend doxygen generated documentation.,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/144,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/144,"Add dedicated page with list of mission tasks
Add dedicated page with list of telemetry elements
Add dedicated page with list of parsistent state parts.



This change is","Add dedicated page with list of mission tasks
Add dedicated page with list of telemetry elements
Add dedicated page with list of parsistent state parts.



This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,144,2017-05-08T15:45:24Z,2017-05-08T16:34:48Z,2017-05-08T16:34:49Z,MERGED,True,28,7,16,https://github.com/zaq32,Extend doxygen generated documentation.,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/144,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/144#issuecomment-299906436,"Add dedicated page with list of mission tasks
Add dedicated page with list of telemetry elements
Add dedicated page with list of parsistent state parts.



This change is","Reviewed 16 of 16 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,145,2017-05-08T15:46:08Z,2017-05-08T17:37:18Z,2017-05-08T17:37:19Z,MERGED,True,36,38,19,https://github.com/zaq32,Drop the const qualifier from the state parameter of Action Descriptor action procedure.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/145,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/145,"Recent additions to obc's state showed that there are cases when actions also
have to change (although in a very limited way) obc state.


This change is","Recent additions to obc's state showed that there are cases when actions also
have to change (although in a very limited way) obc state.


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,145,2017-05-08T15:46:08Z,2017-05-08T17:37:18Z,2017-05-08T17:37:19Z,MERGED,True,36,38,19,https://github.com/zaq32,Drop the const qualifier from the state parameter of Action Descriptor action procedure.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/145,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/145#issuecomment-299907614,"Recent additions to obc's state showed that there are cases when actions also
have to change (although in a very limited way) obc state.


This change is","Reviewed 19 of 19 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,145,2017-05-08T15:46:08Z,2017-05-08T17:37:18Z,2017-05-08T17:37:19Z,MERGED,True,36,38,19,https://github.com/zaq32,Drop the const qualifier from the state parameter of Action Descriptor action procedure.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/145,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/145#issuecomment-299935952,"Recent additions to obc's state showed that there are cases when actions also
have to change (although in a very limited way) obc state.


This change is","Reviewed 7 of 7 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,146,2017-05-08T18:56:12Z,2017-05-09T06:11:18Z,2017-05-10T16:45:46Z,MERGED,True,127,7,20,https://github.com/Novakov,Shared area between bootloader and application,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/146,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/146,"Proof-of-concept of passing information from boot time to application via shared section in internal MCU RAM.
Presence of boot information is determined by magic number that is set in boot loader


This change is","Proof-of-concept of passing information from boot time to application via shared section in internal MCU RAM.
Presence of boot information is determined by magic number that is set in boot loader


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,146,2017-05-08T18:56:12Z,2017-05-09T06:11:18Z,2017-05-10T16:45:46Z,MERGED,True,127,7,20,https://github.com/Novakov,Shared area between bootloader and application,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/146,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/146#issuecomment-299988360,"Proof-of-concept of passing information from boot time to application via shared section in internal MCU RAM.
Presence of boot information is determined by magic number that is set in boot loader


This change is","Reviewed 20 of 20 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,147,2017-05-09T17:02:57Z,2017-05-18T06:26:04Z,2017-05-18T06:26:06Z,MERGED,True,187,2,10,https://github.com/Novakov,Bootloader support for application TMR,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/147,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/147,"Mechanism for booting application with TMR.
For now just building block with hardcoded slots 1,2,3, does not affect normal booting process


This change is","Mechanism for booting application with TMR.
For now just building block with hardcoded slots 1,2,3, does not affect normal booting process


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,147,2017-05-09T17:02:57Z,2017-05-18T06:26:04Z,2017-05-18T06:26:06Z,MERGED,True,187,2,10,https://github.com/Novakov,Bootloader support for application TMR,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/147,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/147#issuecomment-302127610,"Mechanism for booting application with TMR.
For now just building block with hardcoded slots 1,2,3, does not affect normal booting process


This change is","Reviewed 11 of 11 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,147,2017-05-09T17:02:57Z,2017-05-18T06:26:04Z,2017-05-18T06:26:06Z,MERGED,True,187,2,10,https://github.com/Novakov,Bootloader support for application TMR,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/147,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/147#issuecomment-302213935,"Mechanism for booting application with TMR.
For now just building block with hardcoded slots 1,2,3, does not affect normal booting process


This change is","Reviewed 1 of 1 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,148,2017-05-11T08:22:15Z,2017-05-11T10:24:45Z,2017-05-11T10:24:47Z,MERGED,True,18,19,7,https://github.com/Novakov,Use FlightModel platform on CI builds,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/148,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/148,"EM is now connected to CI machine. This pull requests changes CI builds to use FlightModel platform instead of DevBoard.
Older branches (with DevBoard CI build) will still work - both environments are available


This change is","EM is now connected to CI machine. This pull requests changes CI builds to use FlightModel platform instead of DevBoard.
Older branches (with DevBoard CI build) will still work - both environments are available


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,148,2017-05-11T08:22:15Z,2017-05-11T10:24:45Z,2017-05-11T10:24:47Z,MERGED,True,18,19,7,https://github.com/Novakov,Use FlightModel platform on CI builds,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/148,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/148#issuecomment-300748592,"EM is now connected to CI machine. This pull requests changes CI builds to use FlightModel platform instead of DevBoard.
Older branches (with DevBoard CI build) will still work - both environments are available


This change is","Reviewed 7 of 7 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,149,2017-05-15T12:43:13Z,2017-05-17T19:54:09Z,2017-05-17T19:54:11Z,MERGED,True,626,52,40,https://github.com/zaq32,Telemetry acquisition,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/149,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/149,"Add task that is responsible for querying devices for their current telemetry & store it using in available telemetry container.  This change also includes separation of telemetry acquisition from main mission loop as the telemetry acquisition process should not be interrupted with tasks that have undetermined execution which could significantly affect telemetry collection frequency.
The only potentially long running task in telemetry acquisition is task that is responsible for serializing current telemetry state and save it to file.
The acquisition process itself is based on the same mechanism as the main mission loop, the only difference is that both tasks loops are using different state objects.


This change is","Add task that is responsible for querying devices for their current telemetry & store it using in available telemetry container.  This change also includes separation of telemetry acquisition from main mission loop as the telemetry acquisition process should not be interrupted with tasks that have undetermined execution which could significantly affect telemetry collection frequency.
The only potentially long running task in telemetry acquisition is task that is responsible for serializing current telemetry state and save it to file.
The acquisition process itself is based on the same mechanism as the main mission loop, the only difference is that both tasks loops are using different state objects.


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,149,2017-05-15T12:43:13Z,2017-05-17T19:54:09Z,2017-05-17T19:54:11Z,MERGED,True,626,52,40,https://github.com/zaq32,Telemetry acquisition,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/149,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/149#issuecomment-301541128,"Add task that is responsible for querying devices for their current telemetry & store it using in available telemetry container.  This change also includes separation of telemetry acquisition from main mission loop as the telemetry acquisition process should not be interrupted with tasks that have undetermined execution which could significantly affect telemetry collection frequency.
The only potentially long running task in telemetry acquisition is task that is responsible for serializing current telemetry state and save it to file.
The acquisition process itself is based on the same mechanism as the main mission loop, the only difference is that both tasks loops are using different state objects.


This change is","Reviewed 34 of 41 files at r1.
Review status: 33 of 40 files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,149,2017-05-15T12:43:13Z,2017-05-17T19:54:09Z,2017-05-17T19:54:11Z,MERGED,True,626,52,40,https://github.com/zaq32,Telemetry acquisition,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/149,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/149#issuecomment-302109356,"Add task that is responsible for querying devices for their current telemetry & store it using in available telemetry container.  This change also includes separation of telemetry acquisition from main mission loop as the telemetry acquisition process should not be interrupted with tasks that have undetermined execution which could significantly affect telemetry collection frequency.
The only potentially long running task in telemetry acquisition is task that is responsible for serializing current telemetry state and save it to file.
The acquisition process itself is based on the same mechanism as the main mission loop, the only difference is that both tasks loops are using different state objects.


This change is","Reviewed 7 of 41 files at r1, 1 of 1 files at r2.
Review status: all files reviewed at latest revision, 3 unresolved discussions.

libs/drivers/comm/comm.cpp, line 458 at r2 (raw file):

    }

    telemetry = CommTelemetry(receiver, transmitter, state);

I would say that even partial telemtry is worth receiving, so read all values, put them in telemetry and return false if anything failed

libs/drivers/comm/CommTelemetry.cpp, line 85 at r2 (raw file):

        this->transmitterState.BeaconState != arg.transmitterState.BeaconState ||       //
        this->transmitterState.StateWhenIdle != arg.transmitterState.StateWhenIdle ||   //
        this->transmitterState.TransmitterBitRate != arg.transmitterState.TransmitterBitRate;

Can we ""template"" it in some easy way? It's fairly easy to make mistake in all these equality chcecks

libs/telemetry/comm/Include/telemetry/collect_comm.hpp, line 50 at r2 (raw file):

         * @brief Reference to comm driver.
         */
        devices::comm::ICommTelemetryProvider* provider;

Why pointer?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,149,2017-05-15T12:43:13Z,2017-05-17T19:54:09Z,2017-05-17T19:54:11Z,MERGED,True,626,52,40,https://github.com/zaq32,Telemetry acquisition,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/149,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/149#issuecomment-302131618,"Add task that is responsible for querying devices for their current telemetry & store it using in available telemetry container.  This change also includes separation of telemetry acquisition from main mission loop as the telemetry acquisition process should not be interrupted with tasks that have undetermined execution which could significantly affect telemetry collection frequency.
The only potentially long running task in telemetry acquisition is task that is responsible for serializing current telemetry state and save it to file.
The acquisition process itself is based on the same mechanism as the main mission loop, the only difference is that both tasks loops are using different state objects.


This change is","Review status: all files reviewed at latest revision, 3 unresolved discussions.

libs/drivers/comm/comm.cpp, line 458 at r2 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
I would say that even partial telemtry is worth receiving, so read all values, put them in telemetry and return false if anything failed

Partial telemetry is worse then not having it as there is no way of knowing which part is valid and which could not be acquired.

libs/drivers/comm/CommTelemetry.cpp, line 85 at r2 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Can we ""template"" it in some easy way? It's fairly easy to make mistake in all these equality chcecks

Not to my knowledge.  However this part of the telemetry acquisition mechanism will most likely not survive our next workshop.

libs/telemetry/comm/Include/telemetry/collect_comm.hpp, line 50 at r2 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Why pointer?

The only reason is to be able to copy the object. In this case it is mostly just a habit.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,149,2017-05-15T12:43:13Z,2017-05-17T19:54:09Z,2017-05-17T19:54:11Z,MERGED,True,626,52,40,https://github.com/zaq32,Telemetry acquisition,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/149,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/149#issuecomment-302213544,"Add task that is responsible for querying devices for their current telemetry & store it using in available telemetry container.  This change also includes separation of telemetry acquisition from main mission loop as the telemetry acquisition process should not be interrupted with tasks that have undetermined execution which could significantly affect telemetry collection frequency.
The only potentially long running task in telemetry acquisition is task that is responsible for serializing current telemetry state and save it to file.
The acquisition process itself is based on the same mechanism as the main mission loop, the only difference is that both tasks loops are using different state objects.


This change is","Review status: all files reviewed at latest revision, 1 unresolved discussion.

libs/drivers/comm/comm.cpp, line 458 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
Partial telemetry is worse then not having it as there is no way of knowing which part is valid and which could not be acquired.

On the other hand it would be beneficial for OPER to know everything and let it decide what is what but in case of COMM any error in getting telemetry from device will mean that there is no communication with GS at all

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,150,2017-05-15T13:34:23Z,2017-05-15T17:12:14Z,2017-05-15T17:12:15Z,MERGED,True,2,46,1,https://github.com/zaq32,[CI] Run state unit tests on Jenkins.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/150,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/150,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,150,2017-05-15T13:34:23Z,2017-05-15T17:12:14Z,2017-05-15T17:12:15Z,MERGED,True,2,46,1,https://github.com/zaq32,[CI] Run state unit tests on Jenkins.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/150,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/150#issuecomment-301540358,This change is,"Reviewed 1 of 1 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,151,2017-05-18T10:37:51Z,2017-07-13T06:46:08Z,2017-07-13T06:46:09Z,MERGED,True,1739,431,42,https://github.com/kfazi,[ADCS] Added experimental detumbling,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/151,https://github.com/kfazi,1,https://github.com/PW-Sat2/PWSat2OBC/pull/151,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,151,2017-05-18T10:37:51Z,2017-07-13T06:46:08Z,2017-07-13T06:46:09Z,MERGED,True,1739,431,42,https://github.com/kfazi,[ADCS] Added experimental detumbling,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/151,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/151#issuecomment-306034711,This change is,"Reviewed 18 of 32 files at r1, 9 of 11 files at r2, 9 of 9 files at r3.
Review status: all files reviewed at latest revision, 10 unresolved discussions.

libs/adcs/AdcsCoordinator.cpp, line 105 at r3 (raw file):
Quoted 6 lines of code
>         if (this->currentMode == AdcsMode::Disabled)
>         {
>             LOG(LOG_LEVEL_TRACE, ""[ADCS] Running ADCS loop. No mode enabled"");
>             System::SleepTask(std::chrono::seconds(1));
>             return;
>         }

Disabled adcs is not an exception is normal operational state. this if will needlessly generate one log entry every second as long as adcs is not enabled. 
Also consider suspending this task altogether when adcs is disabled instead of waking it up once every second.

libs/adcs/builtin/BuiltinDetumbling.cpp, line 26 at r3 (raw file):

    std::chrono::hertz BuiltinDetumbling::GetFrequency() const
    {
        return std::chrono::hertz(1);

since automatic detumbling can work for longer periods of time perhaps it we could lower its frequency to one iteration every several  (> 30?) seconds?

libs/adcs/builtin/Include/adcs/BuiltinDetumbling.hpp, line 19 at r3 (raw file):

    {
      public:
        BuiltinDetumbling(devices::imtq::IImtqDriver& imtqDriver_);

undocumented

libs/adcs/experimental/ExperimentalDetumbling.cpp, line 26 at r3 (raw file):

        }

        System::SleepTask(10ms);

imtq self test takes at least a second and according to manufacturer somewhere around 15 seconds

libs/adcs/experimental/ExperimentalDetumbling.cpp, line 51 at r3 (raw file):

            }

            switch (step.actualStep)

since there are issues in imtq firmware that manifest in failures being always reported in its self test using its result to disable some of the coils is probably not a good idea.

libs/adcs/experimental/Include/adcs/ExperimentalSunPointing.hpp, line 16 at r3 (raw file):

    {
      public:
        ExperimentalSunPointing(devices::imtq::IImtqDriver& imtqDriver_);

undocumented

libs/adcs/Include/adcs/AdcsCoordinator.hpp, line 46 at r3 (raw file):

    virtual AdcsMode CurrentMode() const final override;

    virtual OSResult EnableBuiltinDetumbling() final override;

    virtual OSResult EnableExperimentalDetumbling() final override;

    virtual OSResult EnableSunPointing() final override;

    virtual OSResult Disable() final override;


These methods should be synchronized as they are used by at least telecommands & mission loop

libs/base/Include/base/hertz.hpp, line 6 at r3 (raw file):

#include <chrono>

namespace std

c++ standard explicitly forbids injecting anything into std ""namespace""

libs/obc/adcs/Include/obc/adcs.hpp, line 29 at r3 (raw file):

      public:
        /** ctor. */
        Adcs(devices::imtq::IImtqDriver& imtqDriver_, services::time::ICurrentTime& currentTime_);

undocumented arguments

unit_tests/base/Include/mock/AdcsMocks.hpp, line 41 at r3 (raw file):

};

struct SunPointingMock : adcs::IAdcsProcessor

consider:
typedef DetumblingMock SunpointingMock;


---


*Comments from [Reviewable](https://reviewable.io:443/reviews/pw-sat2/pwsat2obc/151)*
<!-- Sent from Reviewable.io -->",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,151,2017-05-18T10:37:51Z,2017-07-13T06:46:08Z,2017-07-13T06:46:09Z,MERGED,True,1739,431,42,https://github.com/kfazi,[ADCS] Added experimental detumbling,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/151,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/151#issuecomment-307300430,This change is,"Reviewed 1 of 32 files at r1, 6 of 6 files at r4.
Review status: all files reviewed at latest revision, 10 unresolved discussions, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,151,2017-05-18T10:37:51Z,2017-07-13T06:46:08Z,2017-07-13T06:46:09Z,MERGED,True,1739,431,42,https://github.com/kfazi,[ADCS] Added experimental detumbling,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/151,https://github.com/kfazi,4,https://github.com/PW-Sat2/PWSat2OBC/pull/151#issuecomment-310386406,This change is,"Review status: 14 of 36 files reviewed at latest revision, 10 unresolved discussions.

libs/adcs/AdcsCoordinator.cpp, line 105 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote

    if (this->currentMode == AdcsMode::Disabled)
    {
        LOG(LOG_LEVEL_TRACE, ""[ADCS] Running ADCS loop. No mode enabled"");
        System::SleepTask(std::chrono::seconds(1));
        return;
    }


Disabled adcs is not an exception is normal operational state. this if will needlessly generate one log entry every second as long as adcs is not enabled.
Also consider suspending this task altogether when adcs is disabled instead of waking it up once every second.

Fixed. Logging is removed and I added task suspension. I don't know whether task can suspend itself, so I left the sleep there and added suspension to the method that creates this task.

libs/adcs/builtin/BuiltinDetumbling.cpp, line 26 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
since automatic detumbling can work for longer periods of time perhaps it we could lower its frequency to one iteration every several  (> 30?) seconds?

Done.

libs/adcs/builtin/Include/adcs/BuiltinDetumbling.hpp, line 19 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
undocumented

Done.

libs/adcs/experimental/ExperimentalDetumbling.cpp, line 26 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
imtq self test takes at least a second and according to manufacturer somewhere around 15 seconds

Done.

libs/adcs/experimental/ExperimentalDetumbling.cpp, line 51 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
since there are issues in imtq firmware that manifest in failures being always reported in its self test using its result to disable some of the coils is probably not a good idea.

For now I'm assuming self-test always passes. I'm logging reported errors.

libs/adcs/experimental/Include/adcs/ExperimentalSunPointing.hpp, line 16 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
undocumented

Done.

libs/adcs/Include/adcs/AdcsCoordinator.hpp, line 46 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote

    virtual AdcsMode CurrentMode() const final override;

    virtual OSResult EnableBuiltinDetumbling() final override;

    virtual OSResult EnableExperimentalDetumbling() final override;

    virtual OSResult EnableSunPointing() final override;

    virtual OSResult Disable() final override;


These methods should be synchronized as they are used by at least telecommands & mission loop

Done.

libs/base/Include/base/hertz.hpp, line 6 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
c++ standard explicitly forbids injecting anything into std ""namespace""

Fixed.

libs/obc/adcs/Include/obc/adcs.hpp, line 29 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
undocumented arguments

Done.

unit_tests/base/Include/mock/AdcsMocks.hpp, line 41 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
consider:
typedef DetumblingMock SunpointingMock;

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,151,2017-05-18T10:37:51Z,2017-07-13T06:46:08Z,2017-07-13T06:46:09Z,MERGED,True,1739,431,42,https://github.com/kfazi,[ADCS] Added experimental detumbling,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/151,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/151#issuecomment-310971637,This change is,"Reviewed 22 of 23 files at r5.
Review status: all files reviewed at latest revision, 3 unresolved discussions, some commit checks failed.

libs/adcs/AdcsCoordinator.cpp, line 105 at r3 (raw file):
Previously, kfazi wrote
Fixed. Logging is removed and I added task suspension. I don't know whether task can suspend itself, so I left the sleep there and added suspension to the method that creates this task.

The task can suspend itself. You can do it like this:
System::SuspendTask(nullptr);


libs/adcs/AdcsCoordinator.cpp, line 30 at r5 (raw file):

        result = System::GiveSemaphore(this->sync);
        if (!OS_RESULT_SUCCEEDED(result))

there is also OS_RESULT_FAILED macro

libs/adcs/AdcsCoordinator.cpp, line 126 at r5 (raw file):

    }

    OSResult AdcsCoordinator::EnableSunPointing()

The difference between the Enable... methods is single constant value (the AdcsMode value). Merge them together.

libs/adcs/builtin/Include/adcs/BuiltinDetumbling.hpp, line 35 at r5 (raw file):

        /** @brief Algorithm refresh frequency. */
        static constexpr chrono_extensions::hertz Frequency = chrono_extensions::hertz{0.03};

since float are costly to use consider using mHz or uHz as frequency unit.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,151,2017-05-18T10:37:51Z,2017-07-13T06:46:08Z,2017-07-13T06:46:09Z,MERGED,True,1739,431,42,https://github.com/kfazi,[ADCS] Added experimental detumbling,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/151,https://github.com/zaq32,6,https://github.com/PW-Sat2/PWSat2OBC/pull/151#issuecomment-312239391,This change is,"Reviewed 24 of 24 files at r6.
Review status: all files reviewed at latest revision, 6 unresolved discussions.

libs/adcs/experimental/ExperimentalDetumbling.cpp, line 15 at r6 (raw file):

tryToFixIsisErrors(false)
Shouldn't this value be set to true? We know that imtq built-in self test will report failures no matter what.


src/commands/imtq.cpp, line 369 at r6 (raw file):

            return;
        }
        std::string fixText(argv[0]);

do not use heap in production code. Our current memory manager does not support freeing memory blocks.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,151,2017-05-18T10:37:51Z,2017-07-13T06:46:08Z,2017-07-13T06:46:09Z,MERGED,True,1739,431,42,https://github.com/kfazi,[ADCS] Added experimental detumbling,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/151,https://github.com/kfazi,7,https://github.com/PW-Sat2/PWSat2OBC/pull/151#issuecomment-313394998,This change is,"Review status: 25 of 42 files reviewed at latest revision, 6 unresolved discussions.

libs/adcs/AdcsCoordinator.cpp, line 105 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
The task can suspend itself. You can do it like this:
System::SuspendTask(nullptr);


Done.

libs/adcs/AdcsCoordinator.cpp, line 30 at r5 (raw file):
Previously, zaq32 (ukasz ak) wrote
there is also OS_RESULT_FAILED macro

Done.

libs/adcs/AdcsCoordinator.cpp, line 126 at r5 (raw file):
Previously, zaq32 (ukasz ak) wrote
The difference between the Enable... methods is single constant value (the AdcsMode value). Merge them together.

Done.

libs/adcs/builtin/Include/adcs/BuiltinDetumbling.hpp, line 35 at r5 (raw file):
Previously, zaq32 (ukasz ak) wrote
since float are costly to use consider using mHz or uHz as frequency unit.

Experimental detumbling algorithm is using floating point in it's frequency calculations. I changed GetFrequency to GetWait method, which returns milliseconds. Because frequencies are constexpr the wait time should be calculated during build. I would like to leave frequencies as the parameter, because all talks with ADCS guys mention frequencies instead of waiting time

libs/adcs/experimental/ExperimentalDetumbling.cpp, line 15 at r6 (raw file):
Previously, zaq32 (ukasz ak) wrote

tryToFixIsisErrors(false)
Shouldn't this value be set to true? We know that imtq built-in self test will report failures no matter what.


I would like to test this implementation on real hardware before we will enable it by default.
The custom self test is written based on the emails from isis where they only give a hint on how it could be done.

src/commands/imtq.cpp, line 369 at r6 (raw file):
Previously, zaq32 (ukasz ak) wrote
do not use heap in production code. Our current memory manager does not support freeing memory blocks.

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,151,2017-05-18T10:37:51Z,2017-07-13T06:46:08Z,2017-07-13T06:46:09Z,MERGED,True,1739,431,42,https://github.com/kfazi,[ADCS] Added experimental detumbling,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/151,https://github.com/zaq32,8,https://github.com/PW-Sat2/PWSat2OBC/pull/151#issuecomment-314514488,This change is,"Reviewed 17 of 17 files at r7.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,151,2017-05-18T10:37:51Z,2017-07-13T06:46:08Z,2017-07-13T06:46:09Z,MERGED,True,1739,431,42,https://github.com/kfazi,[ADCS] Added experimental detumbling,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/151,https://github.com/zaq32,9,https://github.com/PW-Sat2/PWSat2OBC/pull/151#issuecomment-314987303,This change is,"Reviewed 5 of 5 files at r8.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,152,2017-05-18T19:31:39Z,2017-05-29T17:37:05Z,2017-05-29T17:37:06Z,MERGED,True,2100,92,58,https://github.com/Novakov,Upload application,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/152,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/152,"Uploading new application using telecommands


This change is","Uploading new application using telecommands


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,152,2017-05-18T19:31:39Z,2017-05-29T17:37:05Z,2017-05-29T17:37:06Z,MERGED,True,2100,92,58,https://github.com/Novakov,Upload application,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/152,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/152#issuecomment-302517844,"Uploading new application using telecommands


This change is",[TC] Uploading new version of application,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,152,2017-05-18T19:31:39Z,2017-05-29T17:37:05Z,2017-05-29T17:37:06Z,MERGED,True,2100,92,58,https://github.com/Novakov,Upload application,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/152,https://github.com/kfazi,3,https://github.com/PW-Sat2/PWSat2OBC/pull/152#issuecomment-302528357,"Uploading new application using telecommands


This change is","Reviewed 55 of 55 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,152,2017-05-18T19:31:39Z,2017-05-29T17:37:05Z,2017-05-29T17:37:06Z,MERGED,True,2100,92,58,https://github.com/Novakov,Upload application,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/152,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/152#issuecomment-304390045,"Uploading new application using telecommands


This change is","Reviewed 28 of 55 files at r1, 1 of 7 files at r3.
Review status: 50 of 57 files reviewed at latest revision, 1 unresolved discussion, some commit checks failed.

libs/drivers/program_flash/boot_table.cpp, line 18 at r1 (raw file):

        this->_bootConfig = this->_flash.BootConfig();

        while (this->_deviceId != 0x00530000 || this->_bootConfig != 0x00000002)

Is this supposed to be here?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,152,2017-05-18T19:31:39Z,2017-05-29T17:37:05Z,2017-05-29T17:37:06Z,MERGED,True,2100,92,58,https://github.com/Novakov,Upload application,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/152,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/152#issuecomment-304590653,"Uploading new application using telecommands


This change is","Reviewed 20 of 55 files at r1, 1 of 1 files at r2, 1 of 7 files at r3.
Review status: 52 of 57 files reviewed at latest revision, 3 unresolved discussions, some commit checks failed.

libs/base/Include/utils.h, line 318 at r3 (raw file):

TSuccess _success;
/** @brief Error value */
TError _error;
consider using an union


libs/obc/hardware/hardware.cpp, line 76 at r3 (raw file):

    error_counter::ErrorCounting& errorCounting, services::power::IPowerControl& powerControl, TimeAction& burtcTickHandler)
    : I2C(powerControl),                                               //
      FlashDriver(reinterpret_cast<std::uint8_t*>(0x84000000)),        //

where this value came from?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,152,2017-05-18T19:31:39Z,2017-05-29T17:37:05Z,2017-05-29T17:37:06Z,MERGED,True,2100,92,58,https://github.com/Novakov,Upload application,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/152,https://github.com/Novakov,6,https://github.com/PW-Sat2/PWSat2OBC/pull/152#issuecomment-304699202,"Uploading new application using telecommands


This change is","Review status: 52 of 57 files reviewed at latest revision, 3 unresolved discussions, some commit checks failed.

libs/base/Include/utils.h, line 318 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote

TSuccess _success;
/** @brief Error value */
TError _error;
consider using an union


It would be nice but union is messing with copy-ctor. I don't want to invest more time in it (at least now)

libs/drivers/program_flash/boot_table.cpp, line 18 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
Is this supposed to be here?

Yes - these are expected ID's of the flash device.

libs/obc/hardware/hardware.cpp, line 76 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
where this value came from?

It's a base address for EBI-mapped flash device (BANK1) .

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,152,2017-05-18T19:31:39Z,2017-05-29T17:37:05Z,2017-05-29T17:37:06Z,MERGED,True,2100,92,58,https://github.com/Novakov,Upload application,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/152,https://github.com/zaq32,7,https://github.com/PW-Sat2/PWSat2OBC/pull/152#issuecomment-304700990,"Uploading new application using telecommands


This change is","Review status: 50 of 58 files reviewed at latest revision, 3 unresolved discussions.

libs/base/Include/utils.h, line 318 at r3 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
It would be nice but union is messing with copy-ctor. I don't want to invest more time in it (at least now)

Not as much as messing as you would have to provide your own constructors, destructor, assignment operators. Right now this type introduces unnecessary overhead of keeping/copying unused half of its state.

libs/drivers/program_flash/boot_table.cpp, line 18 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Yes - these are expected ID's of the flash device.

I don't like the idea of hardcoding the devices ids for no obvious reason.

libs/obc/hardware/hardware.cpp, line 76 at r3 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
It's a base address for EBI-mapped flash device (BANK1) .

Isn't platform supposed to provide things like that?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,152,2017-05-18T19:31:39Z,2017-05-29T17:37:05Z,2017-05-29T17:37:06Z,MERGED,True,2100,92,58,https://github.com/Novakov,Upload application,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/152,https://github.com/zaq32,8,https://github.com/PW-Sat2/PWSat2OBC/pull/152#issuecomment-304701032,"Uploading new application using telecommands


This change is","Reviewed 1 of 4 files at r4.
Review status: 51 of 58 files reviewed at latest revision, 3 unresolved discussions.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,152,2017-05-18T19:31:39Z,2017-05-29T17:37:05Z,2017-05-29T17:37:06Z,MERGED,True,2100,92,58,https://github.com/Novakov,Upload application,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/152,https://github.com/Novakov,9,https://github.com/PW-Sat2/PWSat2OBC/pull/152#issuecomment-304702686,"Uploading new application using telecommands


This change is","Review status: 51 of 58 files reviewed at latest revision, 3 unresolved discussions.

libs/base/Include/utils.h, line 318 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
Not as much as messing as you would have to provide your own constructors, destructor, assignment operators. Right now this type introduces unnecessary overhead of keeping/copying unused half of its state.

Let's just wait for std::variant ;)

libs/drivers/program_flash/boot_table.cpp, line 18 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
I don't like the idea of hardcoding the devices ids for no obvious reason.

It is just for checking if the device is really there (useful for debugging)

libs/obc/hardware/hardware.cpp, line 76 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
Isn't platform supposed to provide things like that?

As you can see I moved it to io_map

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,152,2017-05-18T19:31:39Z,2017-05-29T17:37:05Z,2017-05-29T17:37:06Z,MERGED,True,2100,92,58,https://github.com/Novakov,Upload application,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/152,https://github.com/zaq32,10,https://github.com/PW-Sat2/PWSat2OBC/pull/152#issuecomment-304705036,"Uploading new application using telecommands


This change is","Reviewed 4 of 7 files at r3, 3 of 4 files at r4.
Review status: all files reviewed at latest revision, 4 unresolved discussions.

libs/drivers/program_flash/flash_driver.cpp, line 20 at r4 (raw file):

        System::GiveSemaphore(this->_sync);

        Lock lock(this->_sync, InfiniteTimeout);

As we do not use exceptions status of the lock has to be verified after construction.

libs/drivers/program_flash/flash_driver.cpp, line 29 at r4 (raw file):

    FlashStatus FlashDriver::EraseSector(std::size_t sectorOfffset)
    {
        Lock lock(this->_sync, InfiniteTimeout);

As we do not use exceptions status of the lock has to be verified after construction.

libs/drivers/program_flash/flash_driver.cpp, line 43 at r4 (raw file):

    FlashStatus FlashDriver::Program(std::size_t offset, std::uint8_t value)
    {
        Lock lock(this->_sync, InfiniteTimeout);

As we do not use exceptions status of the lock has to be verified after construction.

libs/drivers/program_flash/flash_driver.cpp, line 55 at r4 (raw file):

    FlashStatus FlashDriver::Program(std::size_t offset, gsl::span<const std::uint8_t> value)
    {
        Lock lock(this->_sync, InfiniteTimeout);

As we do not use exceptions status of the lock has to be verified after construction.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,152,2017-05-18T19:31:39Z,2017-05-29T17:37:05Z,2017-05-29T17:37:06Z,MERGED,True,2100,92,58,https://github.com/Novakov,Upload application,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/152,https://github.com/zaq32,11,https://github.com/PW-Sat2/PWSat2OBC/pull/152#issuecomment-304705726,"Uploading new application using telecommands


This change is","Reviewed 1 of 55 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,153,2017-05-20T10:45:01Z,2017-05-20T12:46:59Z,2017-05-20T12:47:00Z,MERGED,True,86,1,5,https://github.com/Novakov,Tools for running unit tests & python tests from cmdline,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/153,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/153,"Tools:

<build>/tools/unit_tests.cmd <binary> <args> - running unit tests using QEMU
<build>/tools/pytests.cmd <args> - running python tests (all required configuration is passed as it should be)



This change is","Tools:

<build>/tools/unit_tests.cmd <binary> <args> - running unit tests using QEMU
<build>/tools/pytests.cmd <args> - running python tests (all required configuration is passed as it should be)



This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,153,2017-05-20T10:45:01Z,2017-05-20T12:46:59Z,2017-05-20T12:47:00Z,MERGED,True,86,1,5,https://github.com/Novakov,Tools for running unit tests & python tests from cmdline,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/153,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/153#issuecomment-302865693,"Tools:

<build>/tools/unit_tests.cmd <binary> <args> - running unit tests using QEMU
<build>/tools/pytests.cmd <args> - running python tests (all required configuration is passed as it should be)



This change is","Reviewed 4 of 4 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,153,2017-05-20T10:45:01Z,2017-05-20T12:46:59Z,2017-05-20T12:47:00Z,MERGED,True,86,1,5,https://github.com/Novakov,Tools for running unit tests & python tests from cmdline,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/153,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/153#issuecomment-302865780,"Tools:

<build>/tools/unit_tests.cmd <binary> <args> - running unit tests using QEMU
<build>/tools/pytests.cmd <args> - running python tests (all required configuration is passed as it should be)



This change is","Add some documentation how to use these scripts.

Review status: all files reviewed at latest revision, all discussions resolved, some commit checks pending.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,153,2017-05-20T10:45:01Z,2017-05-20T12:46:59Z,2017-05-20T12:47:00Z,MERGED,True,86,1,5,https://github.com/Novakov,Tools for running unit tests & python tests from cmdline,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/153,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/153#issuecomment-302865812,"Tools:

<build>/tools/unit_tests.cmd <binary> <args> - running unit tests using QEMU
<build>/tools/pytests.cmd <args> - running python tests (all required configuration is passed as it should be)



This change is","Review status: all files reviewed at latest revision, 2 unresolved discussions, some commit checks pending.

tools/pytests.cmd.template, line 1 at r1 (raw file):

@echo off


Add some documentation how to use this scripts.

tools/unit_tests.cmd.template, line 1 at r1 (raw file):

@echo off


Add some documentation how to use this scripts.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,153,2017-05-20T10:45:01Z,2017-05-20T12:46:59Z,2017-05-20T12:47:00Z,MERGED,True,86,1,5,https://github.com/Novakov,Tools for running unit tests & python tests from cmdline,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/153,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/153#issuecomment-302866598,"Tools:

<build>/tools/unit_tests.cmd <binary> <args> - running unit tests using QEMU
<build>/tools/pytests.cmd <args> - running python tests (all required configuration is passed as it should be)



This change is","Review status: 4 of 5 files reviewed at latest revision, 2 unresolved discussions.

tools/pytests.cmd.template, line 1 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
Add some documentation how to use this scripts.

Done.

tools/unit_tests.cmd.template, line 1 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
Add some documentation how to use this scripts.

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,153,2017-05-20T10:45:01Z,2017-05-20T12:46:59Z,2017-05-20T12:47:00Z,MERGED,True,86,1,5,https://github.com/Novakov,Tools for running unit tests & python tests from cmdline,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/153,https://github.com/zaq32,6,https://github.com/PW-Sat2/PWSat2OBC/pull/153#issuecomment-302871071,"Tools:

<build>/tools/unit_tests.cmd <binary> <args> - running unit tests using QEMU
<build>/tools/pytests.cmd <args> - running python tests (all required configuration is passed as it should be)



This change is","Reviewed 1 of 1 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,154,2017-05-20T11:12:06Z,2017-05-26T23:55:57Z,2017-06-02T07:12:36Z,CLOSED,False,661,25,21,https://github.com/kfazi,[TeleComm] Added SetTimeCorrectionConfig telecommand,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/154,https://github.com/kfazi,1,https://github.com/PW-Sat2/PWSat2OBC/pull/154,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,154,2017-05-20T11:12:06Z,2017-05-26T23:55:57Z,2017-06-02T07:12:36Z,CLOSED,False,661,25,21,https://github.com/kfazi,[TeleComm] Added SetTimeCorrectionConfig telecommand,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/154,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/154#issuecomment-302871713,This change is,[TC] Set time correction configuration,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,154,2017-05-20T11:12:06Z,2017-05-26T23:55:57Z,2017-06-02T07:12:36Z,CLOSED,False,661,25,21,https://github.com/kfazi,[TeleComm] Added SetTimeCorrectionConfig telecommand,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/154,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/154#issuecomment-302921635,This change is,"Reviewed 13 of 14 files at r1.
Review status: 13 of 14 files reviewed at latest revision, 4 unresolved discussions, some commit checks failed.

libs/base/Include/base/IHasState.hpp, line 7 at r1 (raw file):

/**
 * @brief Interface marking object as stateful.

add it to StateDef doxygen group.

libs/obc/communication/Include/obc/communication.h, line 140 at r1 (raw file):

            services::time::ICurrentTime& currentTime,
            mission::IIdleStateController& idleStateController,
            IHasState<SystemState>& stateContainer,

undocumented

libs/obc/communication/telecommands/time.cpp, line 48 at r1 (raw file):

            auto& persistentState = stateContainer.GetState().PersistentState;
            persistentState.Set(state::TimeCorrectionConfiguration(missionTimeWeight, externalTimeWeight));

This call has to be synchronized.

libs/obc/communication/telecommands/Include/obc/telecommands/time.hpp, line 31 at r1 (raw file):

             * @brief Ctor
             */
            SetTimeCorrectionConfigTelecommand(IHasState<SystemState>& stateContainer_);

undocumented argument.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,154,2017-05-20T11:12:06Z,2017-05-26T23:55:57Z,2017-06-02T07:12:36Z,CLOSED,False,661,25,21,https://github.com/kfazi,[TeleComm] Added SetTimeCorrectionConfig telecommand,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/154,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/154#issuecomment-303948476,This change is,"Reviewed 1 of 14 files at r1.
Review status: all files reviewed at latest revision, 4 unresolved discussions, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,155,2017-05-20T13:58:23Z,2017-05-26T21:23:11Z,2017-05-26T21:23:12Z,MERGED,True,560,57,13,https://github.com/mandrek44,Redundant fm25w driver,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/155,https://github.com/mandrek44,1,https://github.com/PW-Sat2/PWSat2OBC/pull/155,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,155,2017-05-20T13:58:23Z,2017-05-26T21:23:11Z,2017-05-26T21:23:12Z,MERGED,True,560,57,13,https://github.com/mandrek44,Redundant fm25w driver,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/155,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/155#issuecomment-302884067,This change is,"Reviewed 8 of 13 files at r1.
Review status: 8 of 13 files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,155,2017-05-20T13:58:23Z,2017-05-26T21:23:11Z,2017-05-26T21:23:12Z,MERGED,True,560,57,13,https://github.com/mandrek44,Redundant fm25w driver,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/155,https://github.com/mandrek44,3,https://github.com/PW-Sat2/PWSat2OBC/pull/155#issuecomment-302931636,This change is,[TMR] FRAM,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,155,2017-05-20T13:58:23Z,2017-05-26T21:23:11Z,2017-05-26T21:23:12Z,MERGED,True,560,57,13,https://github.com/mandrek44,Redundant fm25w driver,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/155,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/155#issuecomment-302932544,This change is,"Review status: 8 of 13 files reviewed at latest revision, 1 unresolved discussion.

libs/drivers/fm25w/fm25w.cpp, line 73 at r1 (raw file):

auto status1 = _fm25wDrivers[0]->ReadStatus();
auto status2 = _fm25wDrivers[1]->ReadStatus();
auto status3 = _fm25wDrivers[2]->ReadStatus();
        return Vote(status1.Value, status2.Value, status3.Value);


This code ignores the fact that drivers can by itself return ""None"" value

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,155,2017-05-20T13:58:23Z,2017-05-26T21:23:11Z,2017-05-26T21:23:12Z,MERGED,True,560,57,13,https://github.com/mandrek44,Redundant fm25w driver,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/155,https://github.com/mandrek44,5,https://github.com/PW-Sat2/PWSat2OBC/pull/155#issuecomment-302932806,This change is,"Review status: 8 of 13 files reviewed at latest revision, 1 unresolved discussion.

libs/drivers/fm25w/fm25w.cpp, line 73 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote

auto status1 = _fm25wDrivers[0]->ReadStatus();
auto status2 = _fm25wDrivers[1]->ReadStatus();
auto status3 = _fm25wDrivers[2]->ReadStatus();
        return Vote(status1.Value, status2.Value, status3.Value);


This code ignores the fact that drivers can by itself return ""None"" value

OK

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,155,2017-05-20T13:58:23Z,2017-05-26T21:23:11Z,2017-05-26T21:23:12Z,MERGED,True,560,57,13,https://github.com/mandrek44,Redundant fm25w driver,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/155,https://github.com/zaq32,6,https://github.com/PW-Sat2/PWSat2OBC/pull/155#issuecomment-303948290,This change is,"Reviewed 4 of 13 files at r1, 1 of 1 files at r2.
Review status: all files reviewed at latest revision, 5 unresolved discussions.

libs/obc/hardware/Include/obc/PersistentStorageAccess.hpp, line 27 at r2 (raw file):

         * @param[in] spi Reference to spi bus controller that should be used to access the memory.
         */
        PersistentStorageAccess(std::array<drivers::spi::ISPIInterface*, 3> spis);

update the documentation to match the changes

src/commands/fram.cpp, line 20 at r2 (raw file):

if (fram == nullptr)

Quoted 4 lines of code
>     {
>         Main.terminal.Puts(""Invalid fram\n"");
>         return;
>     }

Pass argument by reference and drop this condition.

src/commands/fram.cpp, line 32 at r2 (raw file):
Quoted 5 lines of code
>     if (fram == nullptr)
>     {
>         Main.terminal.Puts(""Invalid fram\n"");
>         return;
>     }

Pass argument by reference and drop this condition.

src/commands/fram.cpp, line 44 at r2 (raw file):
Quoted 5 lines of code
>     if (fram == nullptr)
>     {
>         Main.terminal.Puts(""Invalid fram\n"");
>         return;
>     }

Pass argument by reference and drop this condition.

src/commands/fram.cpp, line 135 at r2 (raw file):

devices::fm25w::FM25WDriver fram1(spi1);
devices::fm25w::FM25WDriver fram2(spi2);
devices::fm25w::FM25WDriver fram3(spi3);


Are you sure that independent asynchronous access to spi bus and chip select pins will not cause problems with fram communication?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,155,2017-05-20T13:58:23Z,2017-05-26T21:23:11Z,2017-05-26T21:23:12Z,MERGED,True,560,57,13,https://github.com/mandrek44,Redundant fm25w driver,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/155,https://github.com/zaq32,7,https://github.com/PW-Sat2/PWSat2OBC/pull/155#issuecomment-304389694,This change is,"Reviewed 4 of 4 files at r3.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

libs/obc/hardware/Include/obc/PersistentStorageAccess.hpp, line 27 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
update the documentation to match the changes

mismatched parameter name

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,156,2017-05-20T17:59:02Z,2017-05-20T18:35:06Z,2017-05-20T18:35:08Z,MERGED,True,93,8,3,https://github.com/Novakov,Fix FM terminal,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/156,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/156,"FM terminal program was missing UART1_RX interrupt handler.


This change is","FM terminal program was missing UART1_RX interrupt handler.


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,156,2017-05-20T17:59:02Z,2017-05-20T18:35:06Z,2017-05-20T18:35:08Z,MERGED,True,93,8,3,https://github.com/Novakov,Fix FM terminal,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/156,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/156#issuecomment-302890415,"FM terminal program was missing UART1_RX interrupt handler.


This change is","Reviewed 3 of 3 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,157,2017-05-21T11:12:22Z,2017-05-21T12:37:00Z,2017-05-21T12:37:02Z,MERGED,True,18,6,3,https://github.com/Novakov,Change comm loop timings,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/157,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/157,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,157,2017-05-21T11:12:22Z,2017-05-21T12:37:00Z,2017-05-21T12:37:02Z,MERGED,True,18,6,3,https://github.com/Novakov,Change comm loop timings,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/157,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/157#issuecomment-302931947,This change is,"Reviewed 3 of 3 files at r1.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

libs/drivers/comm/comm.cpp, line 559 at r1 (raw file):

        else
        {
            anyFrameReceived = comm->PollHardware();

consider this:
while(com->PollHardware()){}


---


*Comments from [Reviewable](https://reviewable.io:443/reviews/pw-sat2/pwsat2obc/157)*
<!-- Sent from Reviewable.io -->",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,157,2017-05-21T11:12:22Z,2017-05-21T12:37:00Z,2017-05-21T12:37:02Z,MERGED,True,18,6,3,https://github.com/Novakov,Change comm loop timings,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/157,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/157#issuecomment-302932210,This change is,"Reviewed 1 of 1 files at r2.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,158,2017-05-21T19:16:07Z,2017-05-23T14:53:07Z,2017-05-23T14:53:09Z,MERGED,True,195,6,10,https://github.com/mandrek44,Task for creating YAFFS checkpoints every 10 minutes,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/158,https://github.com/mandrek44,1,https://github.com/PW-Sat2/PWSat2OBC/pull/158,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,158,2017-05-21T19:16:07Z,2017-05-23T14:53:07Z,2017-05-23T14:53:09Z,MERGED,True,195,6,10,https://github.com/mandrek44,Task for creating YAFFS checkpoints every 10 minutes,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/158,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/158#issuecomment-302957936,This change is,"Reviewed 10 of 10 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,159,2017-05-22T15:29:53Z,2017-05-25T09:16:22Z,2017-05-25T09:16:23Z,MERGED,True,4,1,1,https://github.com/Novakov,use memcmp for TMR compare instead of span compare,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/159,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/159,"memcmp is about 45 times faster than span compare

This change is","memcmp is about 45 times faster than span compare

This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,159,2017-05-22T15:29:53Z,2017-05-25T09:16:22Z,2017-05-25T09:16:23Z,MERGED,True,4,1,1,https://github.com/Novakov,use memcmp for TMR compare instead of span compare,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/159,https://github.com/mandrek44,2,https://github.com/PW-Sat2/PWSat2OBC/pull/159#issuecomment-303940079,"memcmp is about 45 times faster than span compare

This change is","Reviewed 1 of 1 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,159,2017-05-22T15:29:53Z,2017-05-25T09:16:22Z,2017-05-25T09:16:23Z,MERGED,True,4,1,1,https://github.com/Novakov,use memcmp for TMR compare instead of span compare,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/159,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/159#issuecomment-303946431,"memcmp is about 45 times faster than span compare

This change is","Reviewed 1 of 1 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,160,2017-05-22T19:02:28Z,2017-05-29T19:33:49Z,2017-05-29T19:33:50Z,MERGED,True,227,2,13,https://github.com/Novakov,RAM Scrubbing,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/160,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/160,"IMPORTANT: Scrubbing handler has hardcoded list of DMA channels in use - when using new one that list must be updated as well


This change is","IMPORTANT: Scrubbing handler has hardcoded list of DMA channels in use - when using new one that list must be updated as well


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,160,2017-05-22T19:02:28Z,2017-05-29T19:33:49Z,2017-05-29T19:33:50Z,MERGED,True,227,2,13,https://github.com/Novakov,RAM Scrubbing,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/160,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/160#issuecomment-303445763,"IMPORTANT: Scrubbing handler has hardcoded list of DMA channels in use - when using new one that list must be updated as well


This change is",Scrubing RAM,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,160,2017-05-22T19:02:28Z,2017-05-29T19:33:49Z,2017-05-29T19:33:50Z,MERGED,True,227,2,13,https://github.com/Novakov,RAM Scrubbing,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/160,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/160#issuecomment-304706215,"IMPORTANT: Scrubbing handler has hardcoded list of DMA channels in use - when using new one that list must be updated as well


This change is","Reviewed 11 of 13 files at r1.
Review status: 11 of 13 files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,160,2017-05-22T19:02:28Z,2017-05-29T19:33:49Z,2017-05-29T19:33:50Z,MERGED,True,227,2,13,https://github.com/Novakov,RAM Scrubbing,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/160,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/160#issuecomment-304706231,"IMPORTANT: Scrubbing handler has hardcoded list of DMA channels in use - when using new one that list must be updated as well


This change is","Reviewed 1 of 13 files at r1.
Review status: 12 of 13 files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,160,2017-05-22T19:02:28Z,2017-05-29T19:33:49Z,2017-05-29T19:33:50Z,MERGED,True,227,2,13,https://github.com/Novakov,RAM Scrubbing,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/160,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/160#issuecomment-304707583,"IMPORTANT: Scrubbing handler has hardcoded list of DMA channels in use - when using new one that list must be updated as well


This change is","Reviewed 1 of 13 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,160,2017-05-22T19:02:28Z,2017-05-29T19:33:49Z,2017-05-29T19:33:50Z,MERGED,True,227,2,13,https://github.com/Novakov,RAM Scrubbing,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/160,https://github.com/zaq32,6,https://github.com/PW-Sat2/PWSat2OBC/pull/160#issuecomment-304707700,"IMPORTANT: Scrubbing handler has hardcoded list of DMA channels in use - when using new one that list must be updated as well


This change is","Reviewed 6 of 6 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,161,2017-05-24T17:41:35Z,2017-05-29T21:00:30Z,2017-05-29T21:00:31Z,MERGED,True,647,278,19,https://github.com/Novakov,List files telecommand,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/161,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/161,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,161,2017-05-24T17:41:35Z,2017-05-29T21:00:30Z,2017-05-29T21:00:31Z,MERGED,True,647,278,19,https://github.com/Novakov,List files telecommand,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/161,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/161#issuecomment-303798288,This change is,[TC] List files (with sizes),True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,161,2017-05-24T17:41:35Z,2017-05-29T21:00:30Z,2017-05-29T21:00:31Z,MERGED,True,647,278,19,https://github.com/Novakov,List files telecommand,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/161,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/161#issuecomment-303946257,This change is,"Reviewed 18 of 18 files at r1.
Review status: all files reviewed at latest revision, 5 unresolved discussions.

libs/fs/yaffs.cpp, line 242 at r1 (raw file):

extern ""C"" struct yaffs_obj* yaffsfs_FindObject(
struct yaffs_obj* relDir, const YCHAR* path, int symDepth, int getEquiv, struct yaffs_obj** dirOut, int* notDir, int* loop);
This declaration should be stored inside one of the yaffs  headers and not in here.


libs/fs/Include/fs/fs.h, line 239 at r1 (raw file):

             * @param dir Directory containing file
             * @param file File name
             * @return Size of file

or -1 in case of errors

libs/obc/communication/telecommands/file_system.cpp, line 174 at r1 (raw file):

            auto correlationid = r.ReadByte();
            auto path = reinterpret_cast<const char*>(r.ReadToEnd().data());

verify that path is null-terminated

libs/obc/communication/telecommands/file_system.cpp, line 175 at r1 (raw file):

            auto correlationid = r.ReadByte();
            auto path = reinterpret_cast<const char*>(r.ReadToEnd().data());
            auto dir = this->_fs.OpenDirectory(path);

unverified reader status.

libs/obc/communication/telecommands/file_system.cpp, line 199 at r1 (raw file):

             DownlinkFrame response(DownlinkAPID::Operation, seq);
            writer.WriteByte(correlationid);


I have seen this code duplicated several times already. Perhaps it would be useful to add DownlinkFrame wrapper that takes corelation as its construction parameter?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,161,2017-05-24T17:41:35Z,2017-05-29T21:00:30Z,2017-05-29T21:00:31Z,MERGED,True,647,278,19,https://github.com/Novakov,List files telecommand,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/161,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/161#issuecomment-304713180,This change is,"Review status: 5 of 16 files reviewed at latest revision, 5 unresolved discussions.

libs/fs/yaffs.cpp, line 242 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote

extern ""C"" struct yaffs_obj* yaffsfs_FindObject(
struct yaffs_obj* relDir, const YCHAR* path, int symDepth, int getEquiv, struct yaffs_obj** dirOut, int* notDir, int* loop);
This declaration should be stored inside one of the yaffs  headers and not in here.


Done.

libs/fs/Include/fs/fs.h, line 239 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
or -1 in case of errors

Done.

libs/obc/communication/telecommands/file_system.cpp, line 174 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
verify that path is null-terminated

Done.

libs/obc/communication/telecommands/file_system.cpp, line 175 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
unverified reader status.

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,161,2017-05-24T17:41:35Z,2017-05-29T21:00:30Z,2017-05-29T21:00:31Z,MERGED,True,647,278,19,https://github.com/Novakov,List files telecommand,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/161,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/161#issuecomment-304713760,This change is,"Reviewed 11 of 12 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,161,2017-05-24T17:41:35Z,2017-05-29T21:00:30Z,2017-05-29T21:00:31Z,MERGED,True,647,278,19,https://github.com/Novakov,List files telecommand,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/161,https://github.com/zaq32,6,https://github.com/PW-Sat2/PWSat2OBC/pull/161#issuecomment-304716216,This change is,"Reviewed 3 of 4 files at r3.
Review status: 18 of 19 files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,161,2017-05-24T17:41:35Z,2017-05-29T21:00:30Z,2017-05-29T21:00:31Z,MERGED,True,647,278,19,https://github.com/Novakov,List files telecommand,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/161,https://github.com/zaq32,7,https://github.com/PW-Sat2/PWSat2OBC/pull/161#issuecomment-304716241,This change is,"Reviewed 1 of 18 files at r1.
Review status: 18 of 19 files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,161,2017-05-24T17:41:35Z,2017-05-29T21:00:30Z,2017-05-29T21:00:31Z,MERGED,True,647,278,19,https://github.com/Novakov,List files telecommand,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/161,https://github.com/zaq32,8,https://github.com/PW-Sat2/PWSat2OBC/pull/161#issuecomment-304716311,This change is,"Reviewed 1 of 4 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,162,2017-05-24T17:52:51Z,2017-07-13T13:15:25Z,2017-08-13T18:27:16Z,CLOSED,False,696,20,20,https://github.com/tom4r,Time telecommand,10,[],https://github.com/PW-Sat2/PWSat2OBC/pull/162,https://github.com/tom4r,1,https://github.com/PW-Sat2/PWSat2OBC/pull/162,"Telecomand for handling time operations:

setting time
setting time correction factor
setting external correction factor



This change is","Telecomand for handling time operations:

setting time
setting time correction factor
setting external correction factor



This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,163,2017-05-26T21:26:21Z,2017-05-27T11:12:31Z,2017-05-27T11:12:32Z,MERGED,True,31,18,5,https://github.com/zaq32,Fixes for various doxygen issues.,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/163,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/163,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,163,2017-05-26T21:26:21Z,2017-05-27T11:12:31Z,2017-05-27T11:12:32Z,MERGED,True,31,18,5,https://github.com/zaq32,Fixes for various doxygen issues.,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/163,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/163#issuecomment-304445560,This change is,"Reviewed 5 of 5 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,164,2017-05-26T23:09:31Z,2017-06-01T19:23:28Z,2017-06-01T19:23:29Z,MERGED,True,1508,672,30,https://github.com/zaq32,Update telemetry acquisition mechanism to support new requirements,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/164,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/164,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,164,2017-05-26T23:09:31Z,2017-06-01T19:23:28Z,2017-06-01T19:23:29Z,MERGED,True,1508,672,30,https://github.com/zaq32,Update telemetry acquisition mechanism to support new requirements,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/164,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/164#issuecomment-304589458,This change is,[Telemetry] Add mechanism of gathering the telemetry from obc components,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,164,2017-05-26T23:09:31Z,2017-06-01T19:23:28Z,2017-06-01T19:23:29Z,MERGED,True,1508,672,30,https://github.com/zaq32,Update telemetry acquisition mechanism to support new requirements,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/164,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/164#issuecomment-305399689,This change is,"Reviewed 28 of 28 files at r1, 4 of 4 files at r2.
Review status: all files reviewed at latest revision, 1 unresolved discussion, some commit checks failed.

libs/base/BitWriter.cpp, line 86 at r2 (raw file):

    const std::uint32_t bits = length + this->_bitPosition;
    const std::uint32_t bytes = BitsToByes(bits);

typo

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,164,2017-05-26T23:09:31Z,2017-06-01T19:23:28Z,2017-06-01T19:23:29Z,MERGED,True,1508,672,30,https://github.com/zaq32,Update telemetry acquisition mechanism to support new requirements,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/164,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/164#issuecomment-305401101,This change is,"Review status: 28 of 30 files reviewed at latest revision, 1 unresolved discussion.

libs/base/BitWriter.cpp, line 86 at r2 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
typo

Fixed

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,164,2017-05-26T23:09:31Z,2017-06-01T19:23:28Z,2017-06-01T19:23:29Z,MERGED,True,1508,672,30,https://github.com/zaq32,Update telemetry acquisition mechanism to support new requirements,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/164,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/164#issuecomment-305404201,This change is,"Reviewed 1 of 28 files at r1, 2 of 2 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,165,2017-05-26T23:53:31Z,2017-07-13T12:41:00Z,2017-07-13T12:41:01Z,MERGED,True,754,120,34,https://github.com/kfazi,[TeleComm] Added SetTimeCorrectionConfig telecommand,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/165,https://github.com/kfazi,1,https://github.com/PW-Sat2/PWSat2OBC/pull/165,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,165,2017-05-26T23:53:31Z,2017-07-13T12:41:00Z,2017-07-13T12:41:01Z,MERGED,True,754,120,34,https://github.com/kfazi,[TeleComm] Added SetTimeCorrectionConfig telecommand,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/165,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/165#issuecomment-304708159,This change is,"Reviewed 17 of 21 files at r1.
Review status: 17 of 21 files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,165,2017-05-26T23:53:31Z,2017-07-13T12:41:00Z,2017-07-13T12:41:01Z,MERGED,True,754,120,34,https://github.com/kfazi,[TeleComm] Added SetTimeCorrectionConfig telecommand,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/165,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/165#issuecomment-306032289,This change is,"Reviewed 2 of 21 files at r1, 4 of 7 files at r2, 9 of 9 files at r3.
Review status: all files reviewed at latest revision, 13 unresolved discussions, some commit checks broke.

libs/base/os_base.cpp, line 31 at r3 (raw file):

System::GiveSemaphore(resourceSemaphore);
System::GiveSemaphore(readCountSemaphore);
System::GiveSemaphore(serviceSemaphore);


Unhandled error conditions

libs/base/os_base.cpp, line 41 at r3 (raw file):

    }

    if (!OS_RESULT_SUCCEEDED(System::TakeSemaphore(readCountSemaphore, InfiniteTimeout)))

what is the exact purpose of this semaphore? As I see it it does not protect anything

libs/base/os_base.cpp, line 87 at r3 (raw file):

bool ReaderWriterLock::ReleaseReaderLock()
{
    if (readCount == 0)

data race

libs/base/os_base.cpp, line 121 at r3 (raw file):

bool ReaderWriterLock::IsReaderLockAcquired() const
{
    return readCount > 0;

data race

libs/base/os_base.cpp, line 126 at r3 (raw file):

bool ReaderWriterLock::IsWriterLockAcquired() const
{
    return isWriterLockAcquired;

data race

libs/base/os_base.cpp, line 144 at r3 (raw file):

}

bool ReaderLock::operator()()

this function should be defined inline

libs/base/os_base.cpp, line 164 at r3 (raw file):

}

bool WriterLock::operator()()

this function should be defined inline

libs/base/Include/base/os.h, line 582 at r3 (raw file):

 * @brief Reader-Writer lock state.
 */
struct ReaderWriterLock final : private NotCopyable, private NotMoveable

This implementation puts writers in huge disadvantage and bears a very big risk of writer starvation

libs/base/Include/base/os.h, line 593 at r3 (raw file):

     * @brief Acquires reader lock
     */
    bool AcquireReaderLock();

This operation should support timeout

libs/base/Include/base/os.h, line 598 at r3 (raw file):

     * @brief Acquires writer lock
     */
    bool AcquireWriterLock();

This operation should support timeout

libs/mission/time/time.cpp, line 112 at r3 (raw file):

    }

    {
        WriterLock lock(state.PersistentState.Lock);


Usually this is done by promoting reader to writer. Doing this way introduces a possibility of overwriting of someone else's changes that are made in between the two braces.

libs/state/Include/state/PersistentState.hpp, line 122 at r3 (raw file):

     * @endcode
     */
    template <typename StatePolicy, typename... Parts> class PersistentState

I would expect that multithreading would not part of this class and instead provided in form of wrapper type.

libs/state/Include/state/PersistentState.hpp, line 137 at r3 (raw file):

        /** @brief Reader-Writer lock object for synchronization */
        static ReaderWriterLock Lock;

This member should not be defined as static

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,165,2017-05-26T23:53:31Z,2017-07-13T12:41:00Z,2017-07-13T12:41:01Z,MERGED,True,754,120,34,https://github.com/kfazi,[TeleComm] Added SetTimeCorrectionConfig telecommand,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/165,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/165#issuecomment-307300180,This change is,"Reviewed 16 of 23 files at r4.
Review status: 24 of 31 files reviewed at latest revision, 15 unresolved discussions, some commit checks failed.

libs/base/CMakeLists.txt, line 22 at r4 (raw file):

target_link_libraries(${NAME}
    gsl
    freeRTOS

this library should not be needed here.

libs/base/Include/base/os.h, line 158 at r4 (raw file):

/** @brief Type definition of semaphore buffer for static allocation. */
using OSSemaphoreBuffer = StaticSemaphore_t;

This type should be opaque struct that has the same size as the one expected by the freertos.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,165,2017-05-26T23:53:31Z,2017-07-13T12:41:00Z,2017-07-13T12:41:01Z,MERGED,True,754,120,34,https://github.com/kfazi,[TeleComm] Added SetTimeCorrectionConfig telecommand,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/165,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/165#issuecomment-307300557,This change is,"Reviewed 2 of 23 files at r4.
Review status: 26 of 31 files reviewed at latest revision, 15 unresolved discussions, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,165,2017-05-26T23:53:31Z,2017-07-13T12:41:00Z,2017-07-13T12:41:01Z,MERGED,True,754,120,34,https://github.com/kfazi,[TeleComm] Added SetTimeCorrectionConfig telecommand,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/165,https://github.com/zaq32,6,https://github.com/PW-Sat2/PWSat2OBC/pull/165#issuecomment-312232519,This change is,"Reviewed 11 of 18 files at r5.
Review status: 22 of 26 files reviewed at latest revision, 5 unresolved discussions, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,165,2017-05-26T23:53:31Z,2017-07-13T12:41:00Z,2017-07-13T12:41:01Z,MERGED,True,754,120,34,https://github.com/kfazi,[TeleComm] Added SetTimeCorrectionConfig telecommand,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/165,https://github.com/kfazi,7,https://github.com/PW-Sat2/PWSat2OBC/pull/165#issuecomment-313397073,This change is,"Review status: 8 of 27 files reviewed at latest revision, 15 unresolved discussions.

libs/base/os_base.cpp, line 31 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote

System::GiveSemaphore(resourceSemaphore);
System::GiveSemaphore(readCountSemaphore);
System::GiveSemaphore(serviceSemaphore);


Unhandled error conditions

This class has been removed

libs/base/os_base.cpp, line 41 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
what is the exact purpose of this semaphore? As I see it it does not protect anything

This class has been removed. This semaphore was used to protect readCount field

libs/base/os_base.cpp, line 87 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
data race

Done.

libs/base/os_base.cpp, line 121 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
data race

Done.

libs/base/os_base.cpp, line 126 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
data race

Done.

libs/base/os_base.cpp, line 144 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
this function should be defined inline

Done.

libs/base/os_base.cpp, line 164 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
this function should be defined inline

Done.

libs/base/Include/base/os.h, line 582 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
This implementation puts writers in huge disadvantage and bears a very big risk of writer starvation

Done.

libs/base/Include/base/os.h, line 593 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
This operation should support timeout

Done.

libs/base/Include/base/os.h, line 598 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
This operation should support timeout

Done.

libs/base/Include/base/os.h, line 158 at r4 (raw file):
Previously, zaq32 (ukasz ak) wrote
This type should be opaque struct that has the same size as the one expected by the freertos.

Removed. I tried to replace all dynamic allocation with static one, but because there is no dynamic allocation of collections, there is no place where memory could leak. It is simply not worth it.

libs/mission/time/time.cpp, line 112 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote

    }

    {
        WriterLock lock(state.PersistentState.Lock);


Usually this is done by promoting reader to writer. Doing this way introduces a possibility of overwriting of someone else's changes that are made in between the two braces.

Done. I replaced PersistentState.Lock with a derived class that handles synchronization internally

libs/state/Include/state/PersistentState.hpp, line 122 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
I would expect that multithreading would not part of this class and instead provided in form of wrapper type.

Done.

libs/state/Include/state/PersistentState.hpp, line 137 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
This member should not be defined as static

Done.

libs/base/CMakeLists.txt, line 22 at r4 (raw file):
Previously, zaq32 (ukasz ak) wrote
this library should not be needed here.

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,165,2017-05-26T23:53:31Z,2017-07-13T12:41:00Z,2017-07-13T12:41:01Z,MERGED,True,754,120,34,https://github.com/kfazi,[TeleComm] Added SetTimeCorrectionConfig telecommand,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/165,https://github.com/zaq32,8,https://github.com/PW-Sat2/PWSat2OBC/pull/165#issuecomment-314519753,This change is,"Reviewed 1 of 18 files at r5, 19 of 22 files at r6.
Review status: all files reviewed at latest revision, 8 unresolved discussions, some commit checks failed.

libs/state/Include/state/LockablePersistentState.hpp, line 9 at r6 (raw file):

namespace state
{
    template <typename StatePolicy, typename... Parts> class LockablePersistentState : public PersistentState<StatePolicy, Parts...>

Although correct, implementation inheritance in here seems a bit strange. Without virtual interface there is a risk that one will use unsynchronized procedure from base class instead of its replacement from derived class. Can inheritance be replaced by the composition?

libs/state/Include/state/LockablePersistentState.hpp, line 90 at r6 (raw file):

        }

        return Base::template Get<Object>();

Unfortunately this will not work as expected as this function does not copy the protected memory area it only returns reference (pointer) to it. Therefore by the time this function caller will try to access the object referenced by the reference returned from this function it will no longer have exclusive access to it as the lock created by this function will no longer be held.
For this to work the signature of this function has to be changed to this:
bool Get(Object& object)
{ 
    Lock lock(this->object);
    if(!lock)
    {
        return false;
    }

    object = Base::template Get<Object>();
    return true;
}


libs/state/Include/state/LockablePersistentState.hpp, line 100 at r6 (raw file):

        if (!lock())
        {
            LOG(LOG_LEVEL_ERROR, ""Unable to acquire PersistentState lock."");

When lock could not be acquired try to avoid accessing protected state.

libs/state/Include/state/LockablePersistentState.hpp, line 111 at r6 (raw file):

        if (!lock())
        {
            LOG(LOG_LEVEL_ERROR, ""Unable to acquire PersistentState lock."");

When lock could not be acquired try to avoid accessing protected state.

libs/state/Include/state/LockablePersistentState.hpp, line 122 at r6 (raw file):

        if (!lock())
        {
            LOG(LOG_LEVEL_ERROR, ""Unable to acquire PersistentState lock."");

When lock could not be acquired try to avoid accessing protected state.

libs/state/Include/state/LockablePersistentState.hpp, line 133 at r6 (raw file):

        if (!lock())
        {
            LOG(LOG_LEVEL_ERROR, ""Unable to acquire PersistentState lock."");

When lock could not be acquired try to avoid accessing protected state.

libs/state/Include/state/LockablePersistentState.hpp, line 144 at r6 (raw file):

        if (!lock())
        {
            LOG(LOG_LEVEL_ERROR, ""Unable to acquire PersistentState lock."");

When lock could not be acquired try to avoid accessing protected state.

libs/state/Include/state/SynchronizedPersistentState.hpp, line 1 at r6 (raw file):

#ifndef LIBS_STATE_SYNCHRONIZED_PERSISTENT_STATE_HPP

There is some missing documentation in this file.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,165,2017-05-26T23:53:31Z,2017-07-13T12:41:00Z,2017-07-13T12:41:01Z,MERGED,True,754,120,34,https://github.com/kfazi,[TeleComm] Added SetTimeCorrectionConfig telecommand,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/165,https://github.com/kfazi,9,https://github.com/PW-Sat2/PWSat2OBC/pull/165#issuecomment-315064459,This change is,"Review status: 15 of 34 files reviewed at latest revision, 8 unresolved discussions.

libs/state/Include/state/LockablePersistentState.hpp, line 9 at r6 (raw file):
Previously, zaq32 (ukasz ak) wrote
Although correct, implementation inheritance in here seems a bit strange. Without virtual interface there is a risk that one will use unsynchronized procedure from base class instead of its replacement from derived class. Can inheritance be replaced by the composition?

Done. Replaced by the composition

libs/state/Include/state/LockablePersistentState.hpp, line 90 at r6 (raw file):
Previously, zaq32 (ukasz ak) wrote
Unfortunately this will not work as expected as this function does not copy the protected memory area it only returns reference (pointer) to it. Therefore by the time this function caller will try to access the object referenced by the reference returned from this function it will no longer have exclusive access to it as the lock created by this function will no longer be held.
For this to work the signature of this function has to be changed to this:
bool Get(Object& object)
{ 
    Lock lock(this->object);
    if(!lock)
    {
        return false;
    }

    object = Base::template Get<Object>();
    return true;
}


Done.

libs/state/Include/state/LockablePersistentState.hpp, line 100 at r6 (raw file):
Previously, zaq32 (ukasz ak) wrote
When lock could not be acquired try to avoid accessing protected state.

Done.

libs/state/Include/state/LockablePersistentState.hpp, line 111 at r6 (raw file):
Previously, zaq32 (ukasz ak) wrote
When lock could not be acquired try to avoid accessing protected state.

Done.

libs/state/Include/state/LockablePersistentState.hpp, line 122 at r6 (raw file):
Previously, zaq32 (ukasz ak) wrote
When lock could not be acquired try to avoid accessing protected state.

Done.

libs/state/Include/state/LockablePersistentState.hpp, line 133 at r6 (raw file):
Previously, zaq32 (ukasz ak) wrote
When lock could not be acquired try to avoid accessing protected state.

Done.

libs/state/Include/state/LockablePersistentState.hpp, line 144 at r6 (raw file):
Previously, zaq32 (ukasz ak) wrote
When lock could not be acquired try to avoid accessing protected state.

Done.

libs/state/Include/state/SynchronizedPersistentState.hpp, line 1 at r6 (raw file):
Previously, zaq32 (ukasz ak) wrote
There is some missing documentation in this file.

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,165,2017-05-26T23:53:31Z,2017-07-13T12:41:00Z,2017-07-13T12:41:01Z,MERGED,True,754,120,34,https://github.com/kfazi,[TeleComm] Added SetTimeCorrectionConfig telecommand,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/165,https://github.com/zaq32,10,https://github.com/PW-Sat2/PWSat2OBC/pull/165#issuecomment-315065756,This change is,"Reviewed 20 of 21 files at r7.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,166,2017-06-01T12:45:37Z,2017-06-01T17:50:29Z,2017-06-01T17:50:30Z,MERGED,True,31,8,4,https://github.com/Novakov,Fix TMR tests,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/166,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/166,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,166,2017-06-01T12:45:37Z,2017-06-01T17:50:29Z,2017-06-01T17:50:30Z,MERGED,True,31,8,4,https://github.com/Novakov,Fix TMR tests,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/166,https://github.com/mandrek44,2,https://github.com/PW-Sat2/PWSat2OBC/pull/166#issuecomment-305534892,This change is,"Reviewed 2 of 2 files at r1, 2 of 2 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,166,2017-06-01T12:45:37Z,2017-06-01T17:50:29Z,2017-06-01T17:50:30Z,MERGED,True,31,8,4,https://github.com/Novakov,Fix TMR tests,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/166,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/166#issuecomment-305569239,This change is,"Reviewed 2 of 2 files at r1, 2 of 2 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,167,2017-06-01T15:59:18Z,2017-06-09T12:20:55Z,2017-06-09T12:20:56Z,MERGED,True,378,63,5,https://github.com/mandrek44,Implemented error counters for Comm,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/167,https://github.com/mandrek44,1,https://github.com/PW-Sat2/PWSat2OBC/pull/167,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,167,2017-06-01T15:59:18Z,2017-06-09T12:20:55Z,2017-06-09T12:20:56Z,MERGED,True,378,63,5,https://github.com/mandrek44,Implemented error counters for Comm,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/167,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/167#issuecomment-305612013,This change is,Error Counters - Comm,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,167,2017-06-01T15:59:18Z,2017-06-09T12:20:55Z,2017-06-09T12:20:56Z,MERGED,True,378,63,5,https://github.com/mandrek44,Implemented error counters for Comm,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/167,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/167#issuecomment-306032994,This change is,"Reviewed 4 of 5 files at r1.
Review status: 4 of 5 files reviewed at latest revision, 5 unresolved discussions.

libs/drivers/comm/comm.cpp, line 124 at r1 (raw file):

OSResult CommObject::Initialize()
{
    auto result = this->_pollingTaskFlags.Initialize();

mark as const

libs/drivers/comm/Include/comm/CommDriver.hpp, line 244 at r1 (raw file):

     * @return Operation status, true in case of success, false otherwise.
     */
    bool SendCommand(Address address, std::uint8_t command, error_counter::AggregatedErrorCounter& resultAggregator);

I am curious why propagate error counting logic down the call stack instead of observing the top level operation results?

libs/error_counter/error_counter.cpp, line 56 at r1 (raw file):

    }

    void AggregatedErrorCounter::Failure()

define this function inline

libs/error_counter/error_counter.cpp, line 61 at r1 (raw file):

    }

    bool AggregatedErrorCounter::GetAggregatedResult()

define this function inline

libs/error_counter/Include/error_counter/error_counter.hpp, line 167 at r1 (raw file):

         * @return Current aggregated result value
         */
        bool GetAggregatedResult();

mark as const

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,167,2017-06-01T15:59:18Z,2017-06-09T12:20:55Z,2017-06-09T12:20:56Z,MERGED,True,378,63,5,https://github.com/mandrek44,Implemented error counters for Comm,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/167,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/167#issuecomment-306032998,This change is,"Reviewed 1 of 5 files at r1.
Review status: all files reviewed at latest revision, 5 unresolved discussions.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,167,2017-06-01T15:59:18Z,2017-06-09T12:20:55Z,2017-06-09T12:20:56Z,MERGED,True,378,63,5,https://github.com/mandrek44,Implemented error counters for Comm,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/167,https://github.com/mandrek44,5,https://github.com/PW-Sat2/PWSat2OBC/pull/167#issuecomment-306867870,This change is,"Review status: 0 of 5 files reviewed at latest revision, 5 unresolved discussions.

libs/drivers/comm/comm.cpp, line 124 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
mark as const

Code was modified meantime - const not needed anymore

libs/drivers/comm/Include/comm/CommDriver.hpp, line 244 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
I am curious why propagate error counting logic down the call stack instead of observing the top level operation results?

I observed that not every false is reason for incrementing error counters - i.e. if I2C fails then it's a good reason, but if send data buffer is empty then  we just do nothing.

libs/error_counter/error_counter.cpp, line 56 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
define this function inline

Done.

libs/error_counter/error_counter.cpp, line 61 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
define this function inline

Done.

libs/error_counter/Include/error_counter/error_counter.hpp, line 167 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
mark as const

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,167,2017-06-01T15:59:18Z,2017-06-09T12:20:55Z,2017-06-09T12:20:56Z,MERGED,True,378,63,5,https://github.com/mandrek44,Implemented error counters for Comm,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/167,https://github.com/zaq32,6,https://github.com/PW-Sat2/PWSat2OBC/pull/167#issuecomment-307299467,This change is,"Reviewed 5 of 5 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,168,2017-06-01T19:25:59Z,2017-06-01T20:32:15Z,2017-06-01T20:32:48Z,MERGED,True,520,14,24,https://github.com/zaq32,Extend telemetry acquisition with software boot time information,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/168,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/168,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,168,2017-06-01T19:25:59Z,2017-06-01T20:32:15Z,2017-06-01T20:32:48Z,MERGED,True,520,14,24,https://github.com/zaq32,Extend telemetry acquisition with software boot time information,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/168,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/168#issuecomment-305597155,This change is,"Reviewed 26 of 26 files at r1.
Review status: all files reviewed at latest revision, 2 unresolved discussions, some commit checks failed.

platforms/DevBoard/Include/mcu.h, line 4 at r1 (raw file):

#define PLATFORMS_DEVBOARD_INCLUDE_MCU_H_

#include ""efm32gg990f1024.h""

You should be including em_device.h

platforms/FlightModel/Include/mcu.h, line 4 at r1 (raw file):

#define PLATFORMS_FLIGHTMODEL_INCLUDE_MCU_H_

#include ""efm32gg280f1024.h""

You should be including em_device.h

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,168,2017-06-01T19:25:59Z,2017-06-01T20:32:15Z,2017-06-01T20:32:48Z,MERGED,True,520,14,24,https://github.com/zaq32,Extend telemetry acquisition with software boot time information,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/168,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/168#issuecomment-305603564,This change is,"Review status: 23 of 24 files reviewed at latest revision, 2 unresolved discussions.

platforms/DevBoard/Include/mcu.h, line 4 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
You should be including em_device.h

Fixed

platforms/FlightModel/Include/mcu.h, line 4 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
You should be including em_device.h

Fixed

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,168,2017-06-01T19:25:59Z,2017-06-01T20:32:15Z,2017-06-01T20:32:48Z,MERGED,True,520,14,24,https://github.com/zaq32,Extend telemetry acquisition with software boot time information,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/168,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/168#issuecomment-305604378,This change is,"Reviewed 3 of 3 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,168,2017-06-01T19:25:59Z,2017-06-01T20:32:15Z,2017-06-01T20:32:48Z,MERGED,True,520,14,24,https://github.com/zaq32,Extend telemetry acquisition with software boot time information,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/168,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/168#issuecomment-305611917,This change is,[Telemetry] Add mechanism of gathering the telemetry from obc components,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,169,2017-06-02T05:06:00Z,2017-06-05T19:55:20Z,2017-06-05T21:16:36Z,MERGED,True,851,406,29,https://github.com/zaq32,Extend telemetry acquisition to include data from gyroscope ,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/169,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/169,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,169,2017-06-02T05:06:00Z,2017-06-05T19:55:20Z,2017-06-05T21:16:36Z,MERGED,True,851,406,29,https://github.com/zaq32,Extend telemetry acquisition to include data from gyroscope ,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/169,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/169#issuecomment-305886384,This change is,"Reviewed 18 of 29 files at r1.
Review status: 18 of 29 files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,169,2017-06-02T05:06:00Z,2017-06-05T19:55:20Z,2017-06-05T21:16:36Z,MERGED,True,851,406,29,https://github.com/zaq32,Extend telemetry acquisition to include data from gyroscope ,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/169,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/169#issuecomment-306285865,This change is,"Reviewed 11 of 29 files at r1, 2 of 2 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,169,2017-06-02T05:06:00Z,2017-06-05T19:55:20Z,2017-06-05T21:16:36Z,MERGED,True,851,406,29,https://github.com/zaq32,Extend telemetry acquisition to include data from gyroscope ,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/169,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/169#issuecomment-306312690,This change is,[Telemetry] Add mechanism of gathering the telemetry from obc components,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,170,2017-06-03T20:32:08Z,2017-06-04T16:42:31Z,2017-06-04T16:42:32Z,MERGED,True,746,502,60,https://github.com/Novakov,Runlevel,10,[],https://github.com/PW-Sat2/PWSat2OBC/pull/170,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/170,"Runlevel implementation:

Runlevel 0 - Bootloader
Runlevel 1 - OBC running, no autonomous operation (no missiom, comm, telemetry)
Runlevel 2 (default) - OBC running, all autonomous actions are performed



This change is","Runlevel implementation:

Runlevel 0 - Bootloader
Runlevel 1 - OBC running, no autonomous operation (no missiom, comm, telemetry)
Runlevel 2 (default) - OBC running, all autonomous actions are performed



This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,170,2017-06-03T20:32:08Z,2017-06-04T16:42:31Z,2017-06-04T16:42:32Z,MERGED,True,746,502,60,https://github.com/Novakov,Runlevel,10,[],https://github.com/PW-Sat2/PWSat2OBC/pull/170,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/170#issuecomment-306002659,"Runlevel implementation:

Runlevel 0 - Bootloader
Runlevel 1 - OBC running, no autonomous operation (no missiom, comm, telemetry)
Runlevel 2 (default) - OBC running, all autonomous actions are performed



This change is",Runlevels,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,170,2017-06-03T20:32:08Z,2017-06-04T16:42:31Z,2017-06-04T16:42:32Z,MERGED,True,746,502,60,https://github.com/Novakov,Runlevel,10,[],https://github.com/PW-Sat2/PWSat2OBC/pull/170,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/170#issuecomment-306031532,"Runlevel implementation:

Runlevel 0 - Bootloader
Runlevel 1 - OBC running, no autonomous operation (no missiom, comm, telemetry)
Runlevel 2 (default) - OBC running, all autonomous actions are performed



This change is","Reviewed 60 of 60 files at r1.
Review status: all files reviewed at latest revision, 9 unresolved discussions, some commit checks failed.

libs/drivers/comm/comm.cpp, line 46 at r1 (raw file):

    : _error(errors),             //
      _low(low),                  //
      _frameHandler(nullptr),     //

why frame handler is not provided at construction time?

libs/drivers/comm/Include/comm/CommDriver.hpp, line 62 at r1 (raw file):

     * @return Operation result
     */
    bool Resume();

This function should not be public

libs/drivers/comm/Include/comm/CommDriver.hpp, line 349 at r1 (raw file):

inline void CommObject::SetFrameHandler(IHandleFrame& handler)
{
    this->_frameHandler = &handler;

data race

libs/obc/communication/communication.cpp, line 51 at r1 (raw file):

        LOG(LOG_LEVEL_ERROR, ""Unable to restart comm"");
    }
    this->Comm.Resume();

restart automatically resumes

src/obc.cpp, line 47 at r1 (raw file):

}

OSResult OBC::InitializeRunlevel1()

what is the point of returning status if almost all of the initialization steps statuses are ignored?

src/obc.h, line 131 at r1 (raw file):

    scrubber::RAMScrubber<io_map::RAMScrubbing::MemoryStart, io_map::RAMScrubbing::MemorySize, io_map::RAMScrubbing::CycleSize>;

static constexpr std::uint32_t PersistentStateBaseAddress = 4;

this value should not be exposed to anyone except telemetry storage component

unit_tests/drivers/Comm/CommTest.cpp, line 869 at r1 (raw file):

    }

    TEST_F(CommTest, TestRestartTaskCreationFailure)

Write coresponding test for Initialize method

unit_tests/drivers/Comm/CommTest.cpp, line 876 at r1 (raw file):

    }

    TEST_F(CommTest, TestRestart)

This test should also verify that comm task is resumed

unit_tests/drivers/Comm/CommTest.cpp, line 883 at r1 (raw file):

    }

    TEST_F(CommTest, TestDoubleRestart)

This test should not be removed

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,170,2017-06-03T20:32:08Z,2017-06-04T16:42:31Z,2017-06-04T16:42:32Z,MERGED,True,746,502,60,https://github.com/Novakov,Runlevel,10,[],https://github.com/PW-Sat2/PWSat2OBC/pull/170,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/170#issuecomment-306035313,"Runlevel implementation:

Runlevel 0 - Bootloader
Runlevel 1 - OBC running, no autonomous operation (no missiom, comm, telemetry)
Runlevel 2 (default) - OBC running, all autonomous actions are performed



This change is","Review status: 52 of 60 files reviewed at latest revision, 9 unresolved discussions.

libs/drivers/comm/comm.cpp, line 46 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
why frame handler is not provided at construction time?

To provide clear initialization path: first COMM driver is initialized, than communication layer plugs in to receive all incoming frames.

libs/drivers/comm/Include/comm/CommDriver.hpp, line 62 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
This function should not be public

Done.

libs/drivers/comm/Include/comm/CommDriver.hpp, line 349 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
data race

Yes and no:

In Cortex-M3 all 32-bit aligned writes are atomic (_frameHandler is 32-bit pointer)
This value is written only in OBC initialization and before COMM task (which reads this value) is resumed


libs/obc/communication/communication.cpp, line 51 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
restart automatically resumes

Done.

src/obc.cpp, line 47 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
what is the point of returning status if almost all of the initialization steps statuses are ignored?

I'm still thinking about how to approach errors (and what error there can be) during initialization - it easier to leave placeholders for statuses and than remove them than remove them in first place than add them again

src/obc.h, line 131 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
this value should not be exposed to anyone except telemetry storage component

It is used in two places: persistent store saving/reading (passed as argument to mission ctor) and cleaning persistent state on OBC startup (now inside obc.cpp).
Being here is provides simple answer for question 'Where in FRAM begins OBC state?'

unit_tests/drivers/Comm/CommTest.cpp, line 869 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
Write coresponding test for Initialize method

Done.

unit_tests/drivers/Comm/CommTest.cpp, line 876 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
This test should also verify that comm task is resumed

Done.

unit_tests/drivers/Comm/CommTest.cpp, line 883 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
This test should not be removed

Actually no harm is done (beside restarting COMM hardware) if driver is restarted again - ResumeTask call for running task is no-op

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,170,2017-06-03T20:32:08Z,2017-06-04T16:42:31Z,2017-06-04T16:42:32Z,MERGED,True,746,502,60,https://github.com/Novakov,Runlevel,10,[],https://github.com/PW-Sat2/PWSat2OBC/pull/170,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/170#issuecomment-306039671,"Runlevel implementation:

Runlevel 0 - Bootloader
Runlevel 1 - OBC running, no autonomous operation (no missiom, comm, telemetry)
Runlevel 2 (default) - OBC running, all autonomous actions are performed



This change is","Reviewed 2 of 6 files at r2, 6 of 6 files at r3.
Review status: all files reviewed at latest revision, 2 unresolved discussions.

libs/drivers/comm/Include/comm/CommDriver.hpp, line 349 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Yes and no:

In Cortex-M3 all 32-bit aligned writes are atomic (_frameHandler is 32-bit pointer)
This value is written only in OBC initialization and before COMM task (which reads this value) is resumed


Therefore at least document it so it will not get lost in time.

unit_tests/drivers/Comm/CommTest.cpp, line 883 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Actually no harm is done (beside restarting COMM hardware) if driver is restarted again - ResumeTask call for running task is no-op

this may cause unexpected behaviour when the comm driver is currently processing received frames

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,170,2017-06-03T20:32:08Z,2017-06-04T16:42:31Z,2017-06-04T16:42:32Z,MERGED,True,746,502,60,https://github.com/Novakov,Runlevel,10,[],https://github.com/PW-Sat2/PWSat2OBC/pull/170,https://github.com/Novakov,6,https://github.com/PW-Sat2/PWSat2OBC/pull/170#issuecomment-306043767,"Runlevel implementation:

Runlevel 0 - Bootloader
Runlevel 1 - OBC running, no autonomous operation (no missiom, comm, telemetry)
Runlevel 2 (default) - OBC running, all autonomous actions are performed



This change is","Review status: all files reviewed at latest revision, 2 unresolved discussions.

libs/drivers/comm/Include/comm/CommDriver.hpp, line 349 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
Therefore at least document it so it will not get lost in time.

Done.

unit_tests/drivers/Comm/CommTest.cpp, line 883 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
this may cause unexpected behaviour when the comm driver is currently processing received frames

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,170,2017-06-03T20:32:08Z,2017-06-04T16:42:31Z,2017-06-04T16:42:32Z,MERGED,True,746,502,60,https://github.com/Novakov,Runlevel,10,[],https://github.com/PW-Sat2/PWSat2OBC/pull/170,https://github.com/zaq32,7,https://github.com/PW-Sat2/PWSat2OBC/pull/170#issuecomment-306044227,"Runlevel implementation:

Runlevel 0 - Bootloader
Runlevel 1 - OBC running, no autonomous operation (no missiom, comm, telemetry)
Runlevel 2 (default) - OBC running, all autonomous actions are performed



This change is","Reviewed 3 of 3 files at r4.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

libs/drivers/comm/comm.cpp, line 612 at r4 (raw file):

            comm->_pollingTaskFlags.Clear(TaskFlagRunning);
            comm->_pollingTaskFlags.Set(TaskFlagAck);
            System::SuspendTask(NULL);

Once the task is resumed the TaskFlagRunning will have invalid state.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,170,2017-06-03T20:32:08Z,2017-06-04T16:42:31Z,2017-06-04T16:42:32Z,MERGED,True,746,502,60,https://github.com/Novakov,Runlevel,10,[],https://github.com/PW-Sat2/PWSat2OBC/pull/170,https://github.com/Novakov,8,https://github.com/PW-Sat2/PWSat2OBC/pull/170#issuecomment-306044788,"Runlevel implementation:

Runlevel 0 - Bootloader
Runlevel 1 - OBC running, no autonomous operation (no missiom, comm, telemetry)
Runlevel 2 (default) - OBC running, all autonomous actions are performed



This change is","Review status: 59 of 60 files reviewed at latest revision, 1 unresolved discussion.

libs/drivers/comm/comm.cpp, line 612 at r4 (raw file):
Previously, zaq32 (ukasz ak) wrote
Once the task is resumed the TaskFlagRunning will have invalid state.

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,170,2017-06-03T20:32:08Z,2017-06-04T16:42:31Z,2017-06-04T16:42:32Z,MERGED,True,746,502,60,https://github.com/Novakov,Runlevel,10,[],https://github.com/PW-Sat2/PWSat2OBC/pull/170,https://github.com/zaq32,9,https://github.com/PW-Sat2/PWSat2OBC/pull/170#issuecomment-306044831,"Runlevel implementation:

Runlevel 0 - Bootloader
Runlevel 1 - OBC running, no autonomous operation (no missiom, comm, telemetry)
Runlevel 2 (default) - OBC running, all autonomous actions are performed



This change is","Reviewed 1 of 1 files at r5.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,171,2017-06-05T19:44:58Z,2017-06-11T11:06:56Z,2017-06-11T11:06:58Z,MERGED,True,1710,549,58,https://github.com/Novakov,Bootloader update,21,[],https://github.com/PW-Sat2/PWSat2OBC/pull/171,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/171,"Store boot loader settings in FRAM
TMR boot by default
Two sets of slots: primary and failsafe
Watchdog guarding boot process
Fallback to failsafe slots if boot failed
Boot table clean-up



This change is","Store boot loader settings in FRAM
TMR boot by default
Two sets of slots: primary and failsafe
Watchdog guarding boot process
Fallback to failsafe slots if boot failed
Boot table clean-up



This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,171,2017-06-05T19:44:58Z,2017-06-11T11:06:56Z,2017-06-11T11:06:58Z,MERGED,True,1710,549,58,https://github.com/Novakov,Bootloader update,21,[],https://github.com/PW-Sat2/PWSat2OBC/pull/171,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/171#issuecomment-306283402,"Store boot loader settings in FRAM
TMR boot by default
Two sets of slots: primary and failsafe
Watchdog guarding boot process
Fallback to failsafe slots if boot failed
Boot table clean-up



This change is",[Bootloader] [Update] Zaimplementowa logik updatu softu + configa bootloadera + przywracanie,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,171,2017-06-05T19:44:58Z,2017-06-11T11:06:56Z,2017-06-11T11:06:58Z,MERGED,True,1710,549,58,https://github.com/Novakov,Bootloader update,21,[],https://github.com/PW-Sat2/PWSat2OBC/pull/171,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/171#issuecomment-307371566,"Store boot loader settings in FRAM
TMR boot by default
Two sets of slots: primary and failsafe
Watchdog guarding boot process
Fallback to failsafe slots if boot failed
Boot table clean-up



This change is","Reviewed 49 of 53 files at r1, 7 of 7 files at r2.
Review status: all files reviewed at latest revision, 8 unresolved discussions, some commit checks failed.

boot/boot.cpp, line 266 at r2 (raw file):

        BootToAddress(BOOT_APPLICATION_BASE);
    }
    else if (!IsBootSlotsValid(slotsMask))

Am I correct in assuming that obc will be launched with all six slots having a copy of the initial software?

boot/xmodem.cpp, line 209 at r2 (raw file):

            //                data = pkt->data[i];
            //                lld_ProgramOp(base, (offset + i), data);
            //            }

If this block is not needed remove it.

boot/commands/upload.cpp, line 13 at r2 (raw file):

    // get boot index
    auto index = USART_Rx(BSP_UART_DEBUG);

Shouldn't this function use character as boot index instead of raw byte just like the ReadBootIndex() function?

doc/boot_table.pdn, line 0 at r2 (raw file):
what is the purpose of this file?

libs/boot_settings/settings.cpp, line 15 at r2 (raw file):

    }

    bool BootSettings::CheckMagicNumber() const

I'd suggest keeping all the offsets in one place so they can be easily tracked. And initialize them in such way that the subsequent fields will never overlap.

libs/boot_settings/Include/boot/settings.hpp, line 17 at r2 (raw file):

     * @ingroup boot_settings
     */
    class BootSettings final

Add possibility to erase all settings.

libs/boot_settings/Include/boot/settings.hpp, line 63 at r2 (raw file):

         * @return Boot counter value
         */
        std::uint16_t BootCounter() const;

16bit boot counter may not be enough

libs/boot_settings/Include/boot/settings.hpp, line 93 at r2 (raw file):

         * @return Operation result
         */
        bool UnconfirmLastBoot();

This will work but it will not give us information how many times boot process has failed. How about storing the  boot counter of last successful boot process.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,171,2017-06-05T19:44:58Z,2017-06-11T11:06:56Z,2017-06-11T11:06:58Z,MERGED,True,1710,549,58,https://github.com/Novakov,Bootloader update,21,[],https://github.com/PW-Sat2/PWSat2OBC/pull/171,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/171#issuecomment-307372407,"Store boot loader settings in FRAM
TMR boot by default
Two sets of slots: primary and failsafe
Watchdog guarding boot process
Fallback to failsafe slots if boot failed
Boot table clean-up



This change is","Review status: all files reviewed at latest revision, 8 unresolved discussions, some commit checks failed.

boot/boot.cpp, line 266 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
Am I correct in assuming that obc will be launched with all six slots having a copy of the initial software?

It's reasonable approach

doc/boot_table.pdn, line  at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
what is the purpose of this file?

It's Paint.NET file with boot table layout

libs/boot_settings/Include/boot/settings.hpp, line 93 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
This will work but it will not give us information how many times boot process has failed. How about storing the  boot counter of last successful boot process.

The main purpose is to check if last boot was successful or not and bootloader should fallback to previous set of boot slots

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,171,2017-06-05T19:44:58Z,2017-06-11T11:06:56Z,2017-06-11T11:06:58Z,MERGED,True,1710,549,58,https://github.com/Novakov,Bootloader update,21,[],https://github.com/PW-Sat2/PWSat2OBC/pull/171,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/171#issuecomment-307373551,"Store boot loader settings in FRAM
TMR boot by default
Two sets of slots: primary and failsafe
Watchdog guarding boot process
Fallback to failsafe slots if boot failed
Boot table clean-up



This change is","Review status: all files reviewed at latest revision, 6 unresolved discussions, some commit checks failed.

doc/boot_table.pdn, line  at r2 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
It's Paint.NET file with boot table layout

I know that, but we also have a png version of the boot table layout.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,171,2017-06-05T19:44:58Z,2017-06-11T11:06:56Z,2017-06-11T11:06:58Z,MERGED,True,1710,549,58,https://github.com/Novakov,Bootloader update,21,[],https://github.com/PW-Sat2/PWSat2OBC/pull/171,https://github.com/zaq32,6,https://github.com/PW-Sat2/PWSat2OBC/pull/171#issuecomment-307373683,"Store boot loader settings in FRAM
TMR boot by default
Two sets of slots: primary and failsafe
Watchdog guarding boot process
Fallback to failsafe slots if boot failed
Boot table clean-up



This change is","Review status: all files reviewed at latest revision, 7 unresolved discussions, some commit checks failed.

libs/boot_settings/Include/boot/settings.hpp, line 93 at r2 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
The main purpose is to check if last boot was successful or not and bootloader should fallback to previous set of boot slots

So one failed attempt at boot will cause boot loader to load old application version?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,171,2017-06-05T19:44:58Z,2017-06-11T11:06:56Z,2017-06-11T11:06:58Z,MERGED,True,1710,549,58,https://github.com/Novakov,Bootloader update,21,[],https://github.com/PW-Sat2/PWSat2OBC/pull/171,https://github.com/Novakov,7,https://github.com/PW-Sat2/PWSat2OBC/pull/171#issuecomment-307374297,"Store boot loader settings in FRAM
TMR boot by default
Two sets of slots: primary and failsafe
Watchdog guarding boot process
Fallback to failsafe slots if boot failed
Boot table clean-up



This change is","Review status: all files reviewed at latest revision, 7 unresolved discussions, some commit checks failed.

doc/boot_table.pdn, line  at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
I know that, but we also have a png version of the boot table layout.

PNG is included in Doxygen (raw pdn can't), this file is in repo in case we will be updating boot table layout - it's easier to edit PDN than PNG ;)

libs/boot_settings/Include/boot/settings.hpp, line 93 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
So one failed attempt at boot will cause boot loader to load old application version?

yes,

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,171,2017-06-05T19:44:58Z,2017-06-11T11:06:56Z,2017-06-11T11:06:58Z,MERGED,True,1710,549,58,https://github.com/Novakov,Bootloader update,21,[],https://github.com/PW-Sat2/PWSat2OBC/pull/171,https://github.com/zaq32,8,https://github.com/PW-Sat2/PWSat2OBC/pull/171#issuecomment-307374653,"Store boot loader settings in FRAM
TMR boot by default
Two sets of slots: primary and failsafe
Watchdog guarding boot process
Fallback to failsafe slots if boot failed
Boot table clean-up



This change is","Review status: all files reviewed at latest revision, 6 unresolved discussions, some commit checks failed.

libs/boot_settings/Include/boot/settings.hpp, line 93 at r2 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
yes,

this will make next to impossible to reliably upload the application. as one unlucky startup will cause boot loader to switch banks

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,171,2017-06-05T19:44:58Z,2017-06-11T11:06:56Z,2017-06-11T11:06:58Z,MERGED,True,1710,549,58,https://github.com/Novakov,Bootloader update,21,[],https://github.com/PW-Sat2/PWSat2OBC/pull/171,https://github.com/Novakov,9,https://github.com/PW-Sat2/PWSat2OBC/pull/171#issuecomment-307378876,"Store boot loader settings in FRAM
TMR boot by default
Two sets of slots: primary and failsafe
Watchdog guarding boot process
Fallback to failsafe slots if boot failed
Boot table clean-up



This change is","Review status: all files reviewed at latest revision, 6 unresolved discussions, some commit checks failed.

libs/boot_settings/Include/boot/settings.hpp, line 93 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
this will make next to impossible to reliably upload the application. as one unlucky startup will cause boot loader to switch banks

Only slots will be switched, so next try will require just changing selected boot slots - no need to upload whole application again.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,171,2017-06-05T19:44:58Z,2017-06-11T11:06:56Z,2017-06-11T11:06:58Z,MERGED,True,1710,549,58,https://github.com/Novakov,Bootloader update,21,[],https://github.com/PW-Sat2/PWSat2OBC/pull/171,https://github.com/Novakov,10,https://github.com/PW-Sat2/PWSat2OBC/pull/171#issuecomment-307467212,"Store boot loader settings in FRAM
TMR boot by default
Two sets of slots: primary and failsafe
Watchdog guarding boot process
Fallback to failsafe slots if boot failed
Boot table clean-up



This change is","Review status: all files reviewed at latest revision, 6 unresolved discussions, some commit checks failed.

boot/xmodem.cpp, line 209 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
If this block is not needed remove it.

Done.

boot/commands/upload.cpp, line 13 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
Shouldn't this function use character as boot index instead of raw byte just like the ReadBootIndex() function?

Done.

libs/boot_settings/settings.cpp, line 15 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
I'd suggest keeping all the offsets in one place so they can be easily tracked. And initialize them in such way that the subsequent fields will never overlap.

Done.

libs/boot_settings/Include/boot/settings.hpp, line 17 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
Add possibility to erase all settings.

Done.

libs/boot_settings/Include/boot/settings.hpp, line 63 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
16bit boot counter may not be enough

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,171,2017-06-05T19:44:58Z,2017-06-11T11:06:56Z,2017-06-11T11:06:58Z,MERGED,True,1710,549,58,https://github.com/Novakov,Bootloader update,21,[],https://github.com/PW-Sat2/PWSat2OBC/pull/171,https://github.com/zaq32,11,https://github.com/PW-Sat2/PWSat2OBC/pull/171#issuecomment-307622388,"Store boot loader settings in FRAM
TMR boot by default
Two sets of slots: primary and failsafe
Watchdog guarding boot process
Fallback to failsafe slots if boot failed
Boot table clean-up



This change is","Reviewed 11 of 11 files at r3, 2 of 2 files at r4.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,172,2017-06-05T21:12:52Z,2017-06-06T16:05:57Z,2017-06-06T16:06:15Z,MERGED,True,284,28,15,https://github.com/zaq32,[telemetry] Extend telemetry acquisition of error counters state,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/172,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/172,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,172,2017-06-05T21:12:52Z,2017-06-06T16:05:57Z,2017-06-06T16:06:15Z,MERGED,True,284,28,15,https://github.com/zaq32,[telemetry] Extend telemetry acquisition of error counters state,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/172,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/172#issuecomment-306312741,This change is,[Telemetry] Add mechanism of gathering the telemetry from obc components,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,172,2017-06-05T21:12:52Z,2017-06-06T16:05:57Z,2017-06-06T16:06:15Z,MERGED,True,284,28,15,https://github.com/zaq32,[telemetry] Extend telemetry acquisition of error counters state,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/172,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/172#issuecomment-306516906,This change is,"Reviewed 14 of 14 files at r1.
Review status: all files reviewed at latest revision, 2 unresolved discussions.

unit_tests/state/telemetry/ErrorCountingTelemetryTest.cpp, line 23 at r1 (raw file):

    TEST(ErrorCountersTest, TestSerialization)
    {
        std::uint8_t expected[] = {0x11, 0x22, 0x33, 0x44, 0x55, 0x66, 0x77, 0x88, 0x99, 0xaa};

It is not consistent with telemetry definition - there should be 16 values

unit_tests/state/telemetry/ErrorCountingTelemetryTest.cpp, line 24 at r1 (raw file):

    {
        std::uint8_t expected[] = {0x11, 0x22, 0x33, 0x44, 0x55, 0x66, 0x77, 0x88, 0x99, 0xaa};
        std::array<std::uint8_t, (ErrorCountingTelemetry::BitSize() + 7) / 8> buffer;

I don't think +7 is needed here

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,172,2017-06-05T21:12:52Z,2017-06-06T16:05:57Z,2017-06-06T16:06:15Z,MERGED,True,284,28,15,https://github.com/zaq32,[telemetry] Extend telemetry acquisition of error counters state,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/172,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/172#issuecomment-306520092,This change is,"Review status: 13 of 15 files reviewed at latest revision, 2 unresolved discussions.

unit_tests/state/telemetry/ErrorCountingTelemetryTest.cpp, line 23 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
It is not consistent with telemetry definition - there should be 16 values

Fixed

unit_tests/state/telemetry/ErrorCountingTelemetryTest.cpp, line 24 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
I don't think +7 is needed here

Strictly speaking it is not neccessary, but it does not have any negative impact and it is more resistant to future changes.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,172,2017-06-05T21:12:52Z,2017-06-06T16:05:57Z,2017-06-06T16:06:15Z,MERGED,True,284,28,15,https://github.com/zaq32,[telemetry] Extend telemetry acquisition of error counters state,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/172,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/172#issuecomment-306521454,This change is,"Reviewed 2 of 2 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,173,2017-06-06T16:15:46Z,2017-06-06T19:49:17Z,2017-06-06T19:49:18Z,MERGED,True,1514,490,30,https://github.com/zaq32,Extend telemetry acquisition with eps state.,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/173,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/173,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,173,2017-06-06T16:15:46Z,2017-06-06T19:49:17Z,2017-06-06T19:49:18Z,MERGED,True,1514,490,30,https://github.com/zaq32,Extend telemetry acquisition with eps state.,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/173,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/173#issuecomment-306593434,This change is,"Reviewed 30 of 30 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,174,2017-06-06T17:48:05Z,2017-06-06T18:34:36Z,2017-06-06T18:34:37Z,MERGED,True,21,6,2,https://github.com/zaq32,[comm] Add verification that incoming number of frames does not exceed hardware limit,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/174,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/174,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,174,2017-06-06T17:48:05Z,2017-06-06T18:34:36Z,2017-06-06T18:34:37Z,MERGED,True,21,6,2,https://github.com/zaq32,[comm] Add verification that incoming number of frames does not exceed hardware limit,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/174,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/174#issuecomment-306564538,This change is,[BUG] COMM task tries to handle more > 40 frames,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,174,2017-06-06T17:48:05Z,2017-06-06T18:34:36Z,2017-06-06T18:34:37Z,MERGED,True,21,6,2,https://github.com/zaq32,[comm] Add verification that incoming number of frames does not exceed hardware limit,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/174,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/174#issuecomment-306567794,This change is,"Reviewed 2 of 2 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks broke.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,175,2017-06-06T20:03:15Z,2017-06-12T09:09:58Z,2017-06-12T19:55:12Z,MERGED,True,115,21,7,https://github.com/zaq32,[telemetry] Query telemetry once every 30s and save it once every 5 minutes.,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/175,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/175,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,175,2017-06-06T20:03:15Z,2017-06-12T09:09:58Z,2017-06-12T19:55:12Z,MERGED,True,115,21,7,https://github.com/zaq32,[telemetry] Query telemetry once every 30s and save it once every 5 minutes.,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/175,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/175#issuecomment-307616985,This change is,"Reviewed 7 of 7 files at r1.
Review status: all files reviewed at latest revision, 1 unresolved discussion, some commit checks failed.

libs/mission/telemetry/telemetry.cpp, line 35 at r1 (raw file):

        }

        return state.telemetry.IsModified() && This->delay++ == 0;

Just to confirm: telemetry will be saved after This->frequency mission iterations with modified telemetry?
Also: It would be more readable if this will be splited into few ifs

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,175,2017-06-06T20:03:15Z,2017-06-12T09:09:58Z,2017-06-12T19:55:12Z,MERGED,True,115,21,7,https://github.com/zaq32,[telemetry] Query telemetry once every 30s and save it once every 5 minutes.,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/175,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/175#issuecomment-307623585,This change is,"Review status: 4 of 7 files reviewed at latest revision, 1 unresolved discussion.

libs/mission/telemetry/telemetry.cpp, line 35 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Just to confirm: telemetry will be saved after This->frequency mission iterations with modified telemetry?
Also: It would be more readable if this will be splited into few ifs

Right, it was supposed to be save telemetry once every N iterations if the telemetry has been changed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,175,2017-06-06T20:03:15Z,2017-06-12T09:09:58Z,2017-06-12T19:55:12Z,MERGED,True,115,21,7,https://github.com/zaq32,[telemetry] Query telemetry once every 30s and save it once every 5 minutes.,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/175,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/175#issuecomment-307623826,This change is,"Reviewed 3 of 3 files at r2.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

libs/mission/telemetry/telemetry.cpp, line 35 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
Right, it was supposed to be save telemetry once every N iterations if the telemetry has been changed.


spliting this condition into separate ifs will improve readibility
Changing state of task inside condition is a bad idea - move incrementing to update phase as it can be called only one during mission loop


Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,175,2017-06-06T20:03:15Z,2017-06-12T09:09:58Z,2017-06-12T19:55:12Z,MERGED,True,115,21,7,https://github.com/zaq32,[telemetry] Query telemetry once every 30s and save it once every 5 minutes.,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/175,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/175#issuecomment-307715716,This change is,"Reviewed 3 of 3 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,176,2017-06-08T09:32:26Z,2017-06-09T05:31:02Z,2017-06-09T05:31:03Z,MERGED,True,24,44,7,https://github.com/Novakov,Fix downlink frame bit ordering,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/176,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/176,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,176,2017-06-08T09:32:26Z,2017-06-09T05:31:02Z,2017-06-09T05:31:03Z,MERGED,True,24,44,7,https://github.com/Novakov,Fix downlink frame bit ordering,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/176,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/176#issuecomment-307051230,This change is,Fix downlink frame bit ordering,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,176,2017-06-08T09:32:26Z,2017-06-09T05:31:02Z,2017-06-09T05:31:03Z,MERGED,True,24,44,7,https://github.com/Novakov,Fix downlink frame bit ordering,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/176,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/176#issuecomment-307055747,This change is,"Reviewed 4 of 4 files at r1.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

libs/telecommunication/downlink.cpp, line 19 at r1 (raw file):

w.WriteWord(seq & 0xFF, 8);
w.WriteWord((seq & 0xFF00) >> 8, 8);
w.WriteWord((seq & 0xFF0000) >> 16, 2);

why not simply:
w.WriteDoubleWord(seq, 18);
?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,176,2017-06-08T09:32:26Z,2017-06-09T05:31:02Z,2017-06-09T05:31:03Z,MERGED,True,24,44,7,https://github.com/Novakov,Fix downlink frame bit ordering,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/176,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/176#issuecomment-307070958,This change is,"Review status: 3 of 7 files reviewed at latest revision, 1 unresolved discussion.

libs/telecommunication/downlink.cpp, line 19 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote

w.WriteWord(seq & 0xFF, 8);
w.WriteWord((seq & 0xFF00) >> 8, 8);
w.WriteWord((seq & 0xFF0000) >> 16, 2);

why not simply:
w.WriteDoubleWord(seq, 18);
?

Debugging leftover - fixed

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,176,2017-06-08T09:32:26Z,2017-06-09T05:31:02Z,2017-06-09T05:31:03Z,MERGED,True,24,44,7,https://github.com/Novakov,Fix downlink frame bit ordering,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/176,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/176#issuecomment-307299207,This change is,"Reviewed 4 of 4 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,177,2017-06-08T09:51:38Z,2017-06-12T10:29:44Z,2017-06-12T10:29:45Z,MERGED,True,558,95,35,https://github.com/Novakov,Watchdog update,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/177,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/177,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,177,2017-06-08T09:51:38Z,2017-06-12T10:29:44Z,2017-06-12T10:29:45Z,MERGED,True,558,95,35,https://github.com/Novakov,Watchdog update,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/177,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/177#issuecomment-307055986,This change is,Watchdogs,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,177,2017-06-08T09:51:38Z,2017-06-12T10:29:44Z,2017-06-12T10:29:45Z,MERGED,True,558,95,35,https://github.com/Novakov,Watchdog update,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/177,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/177#issuecomment-307299073,This change is,"Reviewed 38 of 38 files at r1.
Review status: all files reviewed at latest revision, 3 unresolved discussions.

boot/main.cpp, line 7 at r1 (raw file):

  * @version 2.0
  ******************************************************************************/
#include <em_rmu.h>

is this actually needed?

libs/drivers/watchdog/Include/watchdog/external.hpp, line 9 at r1 (raw file):

         * @ingroup watchdog
         */
        class ExternalWatchdog

how about making this class a template with Pin being its parameter?

libs/mission/watchdog/Include/mission/watchdog.hpp, line 44 at r1 (raw file):

        /** @brief EPS driver */
        devices::eps::EPSDriver& _eps;

how about making this task capable of kicking anything that implements specific interface?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,177,2017-06-08T09:51:38Z,2017-06-12T10:29:44Z,2017-06-12T10:29:45Z,MERGED,True,558,95,35,https://github.com/Novakov,Watchdog update,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/177,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/177#issuecomment-307371950,This change is,"Review status: 25 of 34 files reviewed at latest revision, 3 unresolved discussions.

libs/mission/watchdog/Include/mission/watchdog.hpp, line 44 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
how about making this task capable of kicking anything that implements specific interface?

Done.

boot/main.cpp, line 7 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
is this actually needed?

Done.

libs/drivers/watchdog/Include/watchdog/external.hpp, line 9 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
how about making this class a template with Pin being its parameter?

Nice idea :) Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,177,2017-06-08T09:51:38Z,2017-06-12T10:29:44Z,2017-06-12T10:29:45Z,MERGED,True,558,95,35,https://github.com/Novakov,Watchdog update,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/177,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/177#issuecomment-307372537,This change is,"Reviewed 11 of 13 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,177,2017-06-08T09:51:38Z,2017-06-12T10:29:44Z,2017-06-12T10:29:45Z,MERGED,True,558,95,35,https://github.com/Novakov,Watchdog update,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/177,https://github.com/Novakov,6,https://github.com/PW-Sat2/PWSat2OBC/pull/177#issuecomment-307616859,This change is,Driver do watchdoga zewntrznego,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,177,2017-06-08T09:51:38Z,2017-06-12T10:29:44Z,2017-06-12T10:29:45Z,MERGED,True,558,95,35,https://github.com/Novakov,Watchdog update,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/177,https://github.com/zaq32,7,https://github.com/PW-Sat2/PWSat2OBC/pull/177#issuecomment-307622415,This change is,"Reviewed 1 of 1 files at r4.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,177,2017-06-08T09:51:38Z,2017-06-12T10:29:44Z,2017-06-12T10:29:45Z,MERGED,True,558,95,35,https://github.com/Novakov,Watchdog update,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/177,https://github.com/zaq32,8,https://github.com/PW-Sat2/PWSat2OBC/pull/177#issuecomment-307717244,This change is,"Reviewed 5 of 5 files at r5.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,177,2017-06-08T09:51:38Z,2017-06-12T10:29:44Z,2017-06-12T10:29:45Z,MERGED,True,558,95,35,https://github.com/Novakov,Watchdog update,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/177,https://github.com/zaq32,9,https://github.com/PW-Sat2/PWSat2OBC/pull/177#issuecomment-307742663,This change is,"Reviewed 2 of 2 files at r6.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,178,2017-06-10T10:32:38Z,2017-06-14T08:35:04Z,2017-06-14T08:35:05Z,MERGED,True,212,61,8,https://github.com/mandrek44,Error counters for IMTQ,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/178,https://github.com/mandrek44,1,https://github.com/PW-Sat2/PWSat2OBC/pull/178,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,178,2017-06-10T10:32:38Z,2017-06-14T08:35:04Z,2017-06-14T08:35:05Z,MERGED,True,212,61,8,https://github.com/mandrek44,Error counters for IMTQ,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/178,https://github.com/mandrek44,2,https://github.com/PW-Sat2/PWSat2OBC/pull/178#issuecomment-307556987,This change is,[IMTQ] Error Counters,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,178,2017-06-10T10:32:38Z,2017-06-14T08:35:04Z,2017-06-14T08:35:05Z,MERGED,True,212,61,8,https://github.com/mandrek44,Error counters for IMTQ,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/178,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/178#issuecomment-307915280,This change is,"Reviewed 6 of 8 files at r1.
Review status: 6 of 8 files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,178,2017-06-10T10:32:38Z,2017-06-14T08:35:04Z,2017-06-14T08:35:05Z,MERGED,True,212,61,8,https://github.com/mandrek44,Error counters for IMTQ,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/178,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/178#issuecomment-307916866,This change is,"Reviewed 2 of 8 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,178,2017-06-10T10:32:38Z,2017-06-14T08:35:04Z,2017-06-14T08:35:05Z,MERGED,True,212,61,8,https://github.com/mandrek44,Error counters for IMTQ,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/178,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/178#issuecomment-308178570,This change is,"Reviewed 2 of 2 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks broke.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,179,2017-06-10T10:39:41Z,2017-06-12T22:21:29Z,2017-06-12T22:21:30Z,MERGED,True,47,6,7,https://github.com/mandrek44,Error counter for RTC driver,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/179,https://github.com/mandrek44,1,https://github.com/PW-Sat2/PWSat2OBC/pull/179,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,179,2017-06-10T10:39:41Z,2017-06-12T22:21:29Z,2017-06-12T22:21:30Z,MERGED,True,47,6,7,https://github.com/mandrek44,Error counter for RTC driver,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/179,https://github.com/mandrek44,2,https://github.com/PW-Sat2/PWSat2OBC/pull/179#issuecomment-307557306,This change is,[RTC] Error Counters,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,179,2017-06-10T10:39:41Z,2017-06-12T22:21:29Z,2017-06-12T22:21:30Z,MERGED,True,47,6,7,https://github.com/mandrek44,Error counter for RTC driver,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/179,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/179#issuecomment-307624087,This change is,"Reviewed 8 of 8 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,180,2017-06-11T11:06:23Z,2017-06-13T11:52:00Z,2017-06-19T20:40:39Z,MERGED,True,161,35,10,https://github.com/mandrek44,Error counters for N25Q flash,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/180,https://github.com/mandrek44,1,https://github.com/PW-Sat2/PWSat2OBC/pull/180,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,180,2017-06-11T11:06:23Z,2017-06-13T11:52:00Z,2017-06-19T20:40:39Z,MERGED,True,161,35,10,https://github.com/mandrek44,Error counters for N25Q flash,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/180,https://github.com/mandrek44,2,https://github.com/PW-Sat2/PWSat2OBC/pull/180#issuecomment-307622386,This change is,[N25Q] Error Counters,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,180,2017-06-11T11:06:23Z,2017-06-13T11:52:00Z,2017-06-19T20:40:39Z,MERGED,True,161,35,10,https://github.com/mandrek44,Error counters for N25Q flash,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/180,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/180#issuecomment-307626977,This change is,"Reviewed 10 of 10 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,180,2017-06-11T11:06:23Z,2017-06-13T11:52:00Z,2017-06-19T20:40:39Z,MERGED,True,161,35,10,https://github.com/mandrek44,Error counters for N25Q flash,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/180,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/180#issuecomment-308079719,This change is,"Reviewed 2 of 2 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,181,2017-06-11T14:04:15Z,2017-06-18T09:02:45Z,2017-06-21T08:34:19Z,MERGED,True,429,77,26,https://github.com/Novakov,Telecommand for setting boot slots,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/181,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/181,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,181,2017-06-11T14:04:15Z,2017-06-18T09:02:45Z,2017-06-21T08:34:19Z,MERGED,True,429,77,26,https://github.com/Novakov,Telecommand for setting boot slots,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/181,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/181#issuecomment-307913265,This change is,"Reviewed 25 of 25 files at r1.
Review status: all files reviewed at latest revision, 1 unresolved discussion, some commit checks failed.

libs/obc/communication/telecommands/boot_settings.cpp, line 24 at r1 (raw file):

            auto failsafeBootSlots = r.ReadByte();

            if (!r.Status())

verify whether the bootSlots & failSafeBootSlots are valid

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,181,2017-06-11T14:04:15Z,2017-06-18T09:02:45Z,2017-06-21T08:34:19Z,MERGED,True,429,77,26,https://github.com/Novakov,Telecommand for setting boot slots,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/181,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/181#issuecomment-309218944,This change is,"Review status: 18 of 25 files reviewed at latest revision, 1 unresolved discussion.

libs/obc/communication/telecommands/boot_settings.cpp, line 24 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
verify whether the bootSlots & failSafeBootSlots are valid

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,181,2017-06-11T14:04:15Z,2017-06-18T09:02:45Z,2017-06-21T08:34:19Z,MERGED,True,429,77,26,https://github.com/Novakov,Telecommand for setting boot slots,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/181,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/181#issuecomment-309265391,This change is,"Reviewed 8 of 8 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,181,2017-06-11T14:04:15Z,2017-06-18T09:02:45Z,2017-06-21T08:34:19Z,MERGED,True,429,77,26,https://github.com/Novakov,Telecommand for setting boot slots,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/181,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/181#issuecomment-310007542,This change is,[TC] Set boot slots,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,182,2017-06-11T14:39:32Z,2017-06-12T05:43:35Z,2017-06-12T05:45:05Z,CLOSED,False,12,14,3,https://github.com/mandrek44,Refactored logs generated by integration tests,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/182,https://github.com/mandrek44,1,https://github.com/PW-Sat2/PWSat2OBC/pull/182,"Fixed device address in I2C logs - it was shifted by 1 bit.
When I2C mock handles incoming request, it logs the device and handler name, i.e.:

2017-06-11 16:15:29,581 DEBUG: [I2C.BUS] Device(0x60) write(['21'])
2017-06-11 16:15:29,582 INFO: [Device 0x60] ReceiverDevice._get_number_of_frames([])


Changed log levels so that only by looking at info it's easy to see what's going on - I2C logs are all debug, only new handler log with readable names is info. Also terminal commands are info instead of debug.



This change is","Fixed device address in I2C logs - it was shifted by 1 bit.
When I2C mock handles incoming request, it logs the device and handler name, i.e.:

2017-06-11 16:15:29,581 DEBUG: [I2C.BUS] Device(0x60) write(['21'])
2017-06-11 16:15:29,582 INFO: [Device 0x60] ReceiverDevice._get_number_of_frames([])


Changed log levels so that only by looking at info it's easy to see what's going on - I2C logs are all debug, only new handler log with readable names is info. Also terminal commands are info instead of debug.



This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,182,2017-06-11T14:39:32Z,2017-06-12T05:43:35Z,2017-06-12T05:45:05Z,CLOSED,False,12,14,3,https://github.com/mandrek44,Refactored logs generated by integration tests,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/182,https://github.com/mandrek44,2,https://github.com/PW-Sat2/PWSat2OBC/pull/182#issuecomment-307694796,"Fixed device address in I2C logs - it was shifted by 1 bit.
When I2C mock handles incoming request, it logs the device and handler name, i.e.:

2017-06-11 16:15:29,581 DEBUG: [I2C.BUS] Device(0x60) write(['21'])
2017-06-11 16:15:29,582 INFO: [Device 0x60] ReceiverDevice._get_number_of_frames([])


Changed log levels so that only by looking at info it's easy to see what's going on - I2C logs are all debug, only new handler log with readable names is info. Also terminal commands are info instead of debug.



This change is",Renamed branch to something shorter: #184,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,183,2017-06-12T05:41:11Z,2017-06-12T07:49:42Z,2017-06-12T07:49:43Z,MERGED,True,16,23,6,https://github.com/mandrek44,Moved prompt handling to inside uart driver,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/183,https://github.com/mandrek44,1,https://github.com/PW-Sat2/PWSat2OBC/pull/183,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,183,2017-06-12T05:41:11Z,2017-06-12T07:49:42Z,2017-06-12T07:49:43Z,MERGED,True,16,23,6,https://github.com/mandrek44,Moved prompt handling to inside uart driver,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/183,https://github.com/mandrek44,2,https://github.com/PW-Sat2/PWSat2OBC/pull/183#issuecomment-307694390,This change is,[UART][Bug] Sometimes terminal commands response is empty,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,183,2017-06-12T05:41:11Z,2017-06-12T07:49:42Z,2017-06-12T07:49:43Z,MERGED,True,16,23,6,https://github.com/mandrek44,Moved prompt handling to inside uart driver,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/183,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/183#issuecomment-307694564,This change is,"Reviewed 6 of 6 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,184,2017-06-12T05:44:46Z,2017-06-13T10:12:23Z,2017-06-13T10:12:24Z,MERGED,True,16,14,4,https://github.com/mandrek44,Refactored logs generated by integration tests,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/184,https://github.com/mandrek44,1,https://github.com/PW-Sat2/PWSat2OBC/pull/184,"Fixed device address in I2C logs - it was shifted by 1 bit.
When I2C mock handles incoming request, it logs the device and handler name, i.e.:

2017-06-11 16:15:29,581 DEBUG: [I2C.BUS] Device(0x60) write(['21'])
2017-06-11 16:15:29,582 INFO: [Device 0x60] ReceiverDevice._get_number_of_frames([])


Changed log levels so that only by looking at info it's easy to see what's going on - I2C logs are all debug, only new handler log with readable names is info. Also terminal commands are info instead of debug.



This change is","Fixed device address in I2C logs - it was shifted by 1 bit.
When I2C mock handles incoming request, it logs the device and handler name, i.e.:

2017-06-11 16:15:29,581 DEBUG: [I2C.BUS] Device(0x60) write(['21'])
2017-06-11 16:15:29,582 INFO: [Device 0x60] ReceiverDevice._get_number_of_frames([])


Changed log levels so that only by looking at info it's easy to see what's going on - I2C logs are all debug, only new handler log with readable names is info. Also terminal commands are info instead of debug.



This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,184,2017-06-12T05:44:46Z,2017-06-13T10:12:23Z,2017-06-13T10:12:24Z,MERGED,True,16,14,4,https://github.com/mandrek44,Refactored logs generated by integration tests,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/184,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/184#issuecomment-307902922,"Fixed device address in I2C logs - it was shifted by 1 bit.
When I2C mock handles incoming request, it logs the device and handler name, i.e.:

2017-06-11 16:15:29,581 DEBUG: [I2C.BUS] Device(0x60) write(['21'])
2017-06-11 16:15:29,582 INFO: [Device 0x60] ReceiverDevice._get_number_of_frames([])


Changed log levels so that only by looking at info it's easy to see what's going on - I2C logs are all debug, only new handler log with readable names is info. Also terminal commands are info instead of debug.



This change is","Reviewed 3 of 3 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,184,2017-06-12T05:44:46Z,2017-06-13T10:12:23Z,2017-06-13T10:12:24Z,MERGED,True,16,14,4,https://github.com/mandrek44,Refactored logs generated by integration tests,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/184,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/184#issuecomment-307909853,"Fixed device address in I2C logs - it was shifted by 1 bit.
When I2C mock handles incoming request, it logs the device and handler name, i.e.:

2017-06-11 16:15:29,581 DEBUG: [I2C.BUS] Device(0x60) write(['21'])
2017-06-11 16:15:29,582 INFO: [Device 0x60] ReceiverDevice._get_number_of_frames([])


Changed log levels so that only by looking at info it's easy to see what's going on - I2C logs are all debug, only new handler log with readable names is info. Also terminal commands are info instead of debug.



This change is","Reviewed 3 of 3 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,184,2017-06-12T05:44:46Z,2017-06-13T10:12:23Z,2017-06-13T10:12:24Z,MERGED,True,16,14,4,https://github.com/mandrek44,Refactored logs generated by integration tests,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/184,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/184#issuecomment-308068966,"Fixed device address in I2C logs - it was shifted by 1 bit.
When I2C mock handles incoming request, it logs the device and handler name, i.e.:

2017-06-11 16:15:29,581 DEBUG: [I2C.BUS] Device(0x60) write(['21'])
2017-06-11 16:15:29,582 INFO: [Device 0x60] ReceiverDevice._get_number_of_frames([])


Changed log levels so that only by looking at info it's easy to see what's going on - I2C logs are all debug, only new handler log with readable names is info. Also terminal commands are info instead of debug.



This change is","Reviewed 1 of 1 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,184,2017-06-12T05:44:46Z,2017-06-13T10:12:23Z,2017-06-13T10:12:24Z,MERGED,True,16,14,4,https://github.com/mandrek44,Refactored logs generated by integration tests,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/184,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/184#issuecomment-308070956,"Fixed device address in I2C logs - it was shifted by 1 bit.
When I2C mock handles incoming request, it logs the device and handler name, i.e.:

2017-06-11 16:15:29,581 DEBUG: [I2C.BUS] Device(0x60) write(['21'])
2017-06-11 16:15:29,582 INFO: [Device 0x60] ReceiverDevice._get_number_of_frames([])


Changed log levels so that only by looking at info it's easy to see what's going on - I2C logs are all debug, only new handler log with readable names is info. Also terminal commands are info instead of debug.



This change is","Reviewed 1 of 1 files at r2.
Review status:  all files reviewed at latest revision, all discussions resolved, all commit checks successful.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,185,2017-06-12T16:57:26Z,2017-08-07T06:34:05Z,2017-08-07T06:34:06Z,MERGED,True,389,36,13,https://github.com/ggajoch,SunPointing ICD,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/185,https://github.com/ggajoch,1,https://github.com/PW-Sat2/PWSat2OBC/pull/185,"ICD proposal for SunPointing.
Reflects algorithm actions and interfaces for the rest of OBC.


This change is","ICD proposal for SunPointing.
Reflects algorithm actions and interfaces for the rest of OBC.


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,185,2017-06-12T16:57:26Z,2017-08-07T06:34:05Z,2017-08-07T06:34:06Z,MERGED,True,389,36,13,https://github.com/ggajoch,SunPointing ICD,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/185,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/185#issuecomment-309265648,"ICD proposal for SunPointing.
Reflects algorithm actions and interfaces for the rest of OBC.


This change is","There are several outstanding doxygen issuses in this PR.

Reviewed 12 of 12 files at r1.
Review status: all files reviewed at latest revision, 1 unresolved discussion, some commit checks failed.

libs/adcs/experimental/Include/adcs/SunPointing.hpp, line 182 at r1 (raw file):

            State() = default;

            State(const Parameters& p)

do not define constructors inline

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,185,2017-06-12T16:57:26Z,2017-08-07T06:34:05Z,2017-08-07T06:34:06Z,MERGED,True,389,36,13,https://github.com/ggajoch,SunPointing ICD,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/185,https://github.com/pwec,3,https://github.com/PW-Sat2/PWSat2OBC/pull/185#issuecomment-311225041,"ICD proposal for SunPointing.
Reflects algorithm actions and interfaces for the rest of OBC.


This change is","libs/adcs/experimental/Include/adcs/SunPointing.hpp, line 182 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
do not define constructors inline

done

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,185,2017-06-12T16:57:26Z,2017-08-07T06:34:05Z,2017-08-07T06:34:06Z,MERGED,True,389,36,13,https://github.com/ggajoch,SunPointing ICD,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/185,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/185#issuecomment-317325555,"ICD proposal for SunPointing.
Reflects algorithm actions and interfaces for the rest of OBC.


This change is","Reviewed 2 of 2 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,185,2017-06-12T16:57:26Z,2017-08-07T06:34:05Z,2017-08-07T06:34:06Z,MERGED,True,389,36,13,https://github.com/ggajoch,SunPointing ICD,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/185,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/185#issuecomment-320249692,"ICD proposal for SunPointing.
Reflects algorithm actions and interfaces for the rest of OBC.


This change is","Reviewed 55 of 221 files at r3, 5 of 113 files at r4.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,186,2017-06-12T19:50:07Z,2017-06-13T05:02:01Z,2017-06-13T05:02:01Z,CLOSED,False,377,13,16,https://github.com/zaq32,Extend telemetry acquisition with experiment state.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/186,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/186,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,186,2017-06-12T19:50:07Z,2017-06-13T05:02:01Z,2017-06-13T05:02:01Z,CLOSED,False,377,13,16,https://github.com/zaq32,Extend telemetry acquisition with experiment state.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/186,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/186#issuecomment-307902686,This change is,[Telemetry] Add mechanism of gathering the telemetry from obc components,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,187,2017-06-13T05:49:23Z,2017-06-13T08:59:53Z,2017-06-13T08:59:54Z,MERGED,True,377,13,16,https://github.com/zaq32,Extend telemetry acquisition with experiment state.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/187,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/187,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,187,2017-06-13T05:49:23Z,2017-06-13T08:59:53Z,2017-06-13T08:59:54Z,MERGED,True,377,13,16,https://github.com/zaq32,Extend telemetry acquisition with experiment state.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/187,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/187#issuecomment-308013581,This change is,[Telemetry] Add mechanism of gathering the telemetry from obc components,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,187,2017-06-13T05:49:23Z,2017-06-13T08:59:53Z,2017-06-13T08:59:54Z,MERGED,True,377,13,16,https://github.com/zaq32,Extend telemetry acquisition with experiment state.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/187,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/187#issuecomment-308016494,This change is,"Reviewed 16 of 16 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,188,2017-06-13T20:08:27Z,2017-06-17T08:11:00Z,2017-06-17T08:11:01Z,MERGED,True,506,110,33,https://github.com/zaq32,Connect beacon & telemetry acquisition,8,[],https://github.com/PW-Sat2/PWSat2OBC/pull/188,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/188,"Separate telemetry serialization & storage
Generate beacon using serialized form of the latest telemetry object



This change is","Separate telemetry serialization & storage
Generate beacon using serialized form of the latest telemetry object



This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,188,2017-06-13T20:08:27Z,2017-06-17T08:11:00Z,2017-06-17T08:11:01Z,MERGED,True,506,110,33,https://github.com/zaq32,Connect beacon & telemetry acquisition,8,[],https://github.com/PW-Sat2/PWSat2OBC/pull/188,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/188#issuecomment-308233721,"Separate telemetry serialization & storage
Generate beacon using serialized form of the latest telemetry object



This change is",[Telemetry] Add mechanism of gathering the telemetry from obc components,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,188,2017-06-13T20:08:27Z,2017-06-17T08:11:00Z,2017-06-17T08:11:01Z,MERGED,True,506,110,33,https://github.com/zaq32,Connect beacon & telemetry acquisition,8,[],https://github.com/PW-Sat2/PWSat2OBC/pull/188,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/188#issuecomment-308694860,"Separate telemetry serialization & storage
Generate beacon using serialized form of the latest telemetry object



This change is","Reviewed 29 of 34 files at r1.
Review status: 27 of 31 files reviewed at latest revision, 1 unresolved discussion, some commit checks failed.

doc/HowToBuild.md, line 49 at r1 (raw file):

`ENABLE_COVERAGE`  | 0                    | Set to 1 to enable code-coverage for unit tests
`JLINK_SN`         | _None_               | Serial number of J-Link that will be used to flash EFM
`IPYTHON_PATH`     | _None_               | Path to folder that contains IronPython interpreter

It's IPython. IronPython is totally different thing :)

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,188,2017-06-13T20:08:27Z,2017-06-17T08:11:00Z,2017-06-17T08:11:01Z,MERGED,True,506,110,33,https://github.com/zaq32,Connect beacon & telemetry acquisition,8,[],https://github.com/PW-Sat2/PWSat2OBC/pull/188,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/188#issuecomment-308967429,"Separate telemetry serialization & storage
Generate beacon using serialized form of the latest telemetry object



This change is","Review status: 26 of 31 files reviewed at latest revision, 1 unresolved discussion.

doc/HowToBuild.md, line 49 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
It's IPython. IronPython is totally different thing :)

Fixed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,188,2017-06-13T20:08:27Z,2017-06-17T08:11:00Z,2017-06-17T08:11:01Z,MERGED,True,506,110,33,https://github.com/zaq32,Connect beacon & telemetry acquisition,8,[],https://github.com/PW-Sat2/PWSat2OBC/pull/188,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/188#issuecomment-309200993,"Separate telemetry serialization & storage
Generate beacon using serialized form of the latest telemetry object



This change is","Reviewed 4 of 34 files at r1, 1 of 1 files at r2, 5 of 5 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,189,2017-06-14T17:50:40Z,2017-06-15T10:29:18Z,2017-06-15T10:29:19Z,MERGED,True,133,36,14,https://github.com/mandrek44,Error counter for RedundantFM25WDriver,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/189,https://github.com/mandrek44,1,https://github.com/PW-Sat2/PWSat2OBC/pull/189,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,189,2017-06-14T17:50:40Z,2017-06-15T10:29:18Z,2017-06-15T10:29:19Z,MERGED,True,133,36,14,https://github.com/mandrek44,Error counter for RedundantFM25WDriver,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/189,https://github.com/mandrek44,2,https://github.com/PW-Sat2/PWSat2OBC/pull/189#issuecomment-308508388,This change is,[FRAM] TMR Error Counters,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,189,2017-06-14T17:50:40Z,2017-06-15T10:29:18Z,2017-06-15T10:29:19Z,MERGED,True,133,36,14,https://github.com/mandrek44,Error counter for RedundantFM25WDriver,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/189,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/189#issuecomment-308692997,This change is,"Reviewed 14 of 14 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,190,2017-06-17T10:50:02Z,2017-06-19T20:48:05Z,2017-06-19T20:48:07Z,MERGED,True,1916,243,72,https://github.com/Novakov,Scrubbing: program & bootloader,20,[],https://github.com/PW-Sat2/PWSat2OBC/pull/190,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/190,"Scrubbing of program (both primary & failsafe) and bootloader (copies & MCU)


This change is","Scrubbing of program (both primary & failsafe) and bootloader (copies & MCU)


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,190,2017-06-17T10:50:02Z,2017-06-19T20:48:05Z,2017-06-19T20:48:07Z,MERGED,True,1916,243,72,https://github.com/Novakov,Scrubbing: program & bootloader,20,[],https://github.com/PW-Sat2/PWSat2OBC/pull/190,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/190#issuecomment-309219080,"Scrubbing of program (both primary & failsafe) and bootloader (copies & MCU)


This change is",[Bootloader] Wrowadzi redundancj bootladera w dwoch wolnych slotach - scrubing bootladera,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,190,2017-06-17T10:50:02Z,2017-06-19T20:48:05Z,2017-06-19T20:48:07Z,MERGED,True,1916,243,72,https://github.com/Novakov,Scrubbing: program & bootloader,20,[],https://github.com/PW-Sat2/PWSat2OBC/pull/190,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/190#issuecomment-309265160,"Scrubbing of program (both primary & failsafe) and bootloader (copies & MCU)


This change is","Reviewed 73 of 73 files at r1.
Review status: all files reviewed at latest revision, 13 unresolved discussions.

boot/boot.cpp, line 110 at r1 (raw file):

    auto internalFlashBase = reinterpret_cast<const std::uint8_t*>(BOOT_APPLICATION_BASE);

    alignas(4) std::array<std::uint8_t, PageSize> pageBuffer;

alignining class objects to less then sizeof(double)  relaxes default alignment constraint

boot/commands/upload.cpp, line 73 at r1 (raw file):

    gsl::span<std::uint8_t> sourceSpan(reinterpret_cast<std::uint8_t*>(1), 64_KB - 1);
    //    auto firstByteOfBootloader = reinterpret_cast<volatile std::uint8_t*>(0xABCD);

remove if unused

libs/base/Include/utils.h, line 619 at r1 (raw file):

template <std::size_t Alignment> constexpr bool IsAligned(const void* ptr)
{
    return (reinterpret_cast<std::size_t>(ptr) & (Alignment - 1)) == 0;

add static assert to check that alignment is power of 2

libs/base/Include/base/array_map.hpp, line 4 at r1 (raw file):

#define LIBS_BASE_INCLUDE_BASE_ARRAY_MAP_HPP_

template <typename Input, std::size_t Count, typename Mapper, typename Output = decltype(std::declval<Mapper>()(std::declval<Input&>()))>

This is already available in much more generic version in standard library as std::transform algorithm.

libs/base/Include/base/array_map.hpp, line 17 at r1 (raw file):

template <typename Input, std::size_t Count, typename Mapper, typename Output = decltype(std::declval<Mapper>()(std::declval<Input&>()))>
std::array<Output, Count> Map(std::array<Input, Count>& input, Mapper map)

see above

libs/base/Include/base/counter.hpp, line 105 at r1 (raw file):

if (this->IsBottom())
{
action();
}
    this->GoDown();


consider this:
if (this->GoDown())
{
    action();
}


libs/base/Include/base/counter.hpp, line 117 at r1 (raw file):

    inline void Counter<Type, Bottom, Top, Start>::DoAndGoUp(Action action)
    {
        if (this->IsTop())

see above

libs/drivers/program_flash/Include/program_flash/boot_table.hpp, line 163 at r1 (raw file):

    /**
     * @brief Bootloader copy

Can you be more specific in regards the purpose of  this class?

libs/external/emlib/CMakeLists.txt, line 8 at r1 (raw file):

EM_MSC_RUN_FROM_FLASH
is this flag used ?


libs/obc/scrubbing/Include/obc/scrubbing.hpp, line 38 at r1 (raw file):

        ScrubbingStatus(std::uint32_t iterationsCount,
            const scrubber::ProgramScrubbingStatus primarySlots,
            const scrubber::ProgramScrubbingStatus secondarySlots,

consider scrubbing secondary program slots only if their corrected validity flag is true.

libs/scrubber/bootloader.cpp, line 46 at r1 (raw file):

        };

        std::array<gsl::span<const std::uint8_t>, 5> spans = Map(copies, [](BootloaderCopy& copy) { return copy.Content(); });

consider this:
std::array<gsl::span<const std::uint8_t>, 5> spans;
std::transform(std::begin(copies), std::end(copies), std::begin(spans), [](auto* copy){ return copy.Content();});


libs/scrubber/program.cpp, line 14 at r1 (raw file):

    static inline bool FastSpanCompare(const gsl::span<const uint8_t> a, const gsl::span<const uint8_t> b)
    {
        return memcmp(a.data(), b.data(), a.size()) == 0;

buffer overflow

platforms/FlightModel/efm32gg_upper.ld, line 17 at r1 (raw file):

{
  FLASH (rx) : ORIGIN = 0x00080000, LENGTH = 524288
  RAM (rwx)  : ORIGIN = 0x88000000, LENGTH = 262144


what is the purpose of this change?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,190,2017-06-17T10:50:02Z,2017-06-19T20:48:05Z,2017-06-19T20:48:07Z,MERGED,True,1916,243,72,https://github.com/Novakov,Scrubbing: program & bootloader,20,[],https://github.com/PW-Sat2/PWSat2OBC/pull/190,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/190#issuecomment-309271751,"Scrubbing of program (both primary & failsafe) and bootloader (copies & MCU)


This change is","Review status: all files reviewed at latest revision, 13 unresolved discussions, some commit checks failed.

libs/base/Include/base/counter.hpp, line 105 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote

if (this->IsBottom())
{
action();
}
    this->GoDown();


consider this:
if (this->GoDown())
{
    action();
}
</blockquote></details>

After submitting this pull request I realized that counter-based approach is not the best one, so in next PR I'm going to replace them with something else, so whole `Counter` class will be removed

---

*[libs/base/Include/base/counter.hpp, line 117 at r1](https://reviewable.io:443/reviews/pw-sat2/pwsat2obc/190#-KmuPKlBFEX-yH61ED-J:-Kmuvixk_om7KnnxQnLh:b-jcxzo) ([raw file](https://github.com/pw-sat2/pwsat2obc/blob/8192d56dd83919ef60dbe84367fea16c7f7b4f1f/libs/base/Include/base/counter.hpp#L117)):*
<details><summary><i>Previously, zaq32 (ukasz ak) wrote</i></summary><blockquote>

see above
</blockquote></details>

After submitting this pull request I realized that counter-based approach is not the best one, so in next PR I'm going to replace them with something else, so whole `Counter` class will be removed

---

*[libs/drivers/program_flash/Include/program_flash/boot_table.hpp, line 163 at r1](https://reviewable.io:443/reviews/pw-sat2/pwsat2obc/190#-KmuL724Vv6QpUOvIwhz:-Kmuvjv05LO8burPDQFD:b-33sr5e) ([raw file](https://github.com/pw-sat2/pwsat2obc/blob/8192d56dd83919ef60dbe84367fea16c7f7b4f1f/libs/drivers/program_flash/Include/program_flash/boot_table.hpp#L163)):*
<details><summary><i>Previously, zaq32 (ukasz ak) wrote</i></summary><blockquote>

Can you be more specific in regards the purpose of  this class?
</blockquote></details>

It represents bootloader copy (nothing more)

---

*[libs/external/emlib/CMakeLists.txt, line 8 at r1](https://reviewable.io:443/reviews/pw-sat2/pwsat2obc/190#-KmuPQj6vvfqqQ_X2t3A:-KmuvqLNUeKDdJIS4uKu:b5q2p63) ([raw file](https://github.com/pw-sat2/pwsat2obc/blob/8192d56dd83919ef60dbe84367fea16c7f7b4f1f/libs/external/emlib/CMakeLists.txt#L8)):*
<details><summary><i>Previously, zaq32 (ukasz ak) wrote</i></summary><blockquote>

> EM_MSC_RUN_FROM_FLASH
is this flag used ?
</blockquote></details>

Yes, it is used by emlib (`em_msc` to be specific). By default all MSC-related functions are copied to RAM during startup and executed from them - this flag disables that behaviour

---

*[libs/obc/scrubbing/Include/obc/scrubbing.hpp, line 38 at r1](https://reviewable.io:443/reviews/pw-sat2/pwsat2obc/190#-KmuPj7oVEr1J8c4cl50:-Kmuw92JHdunaT96u9W-:b-vtdmyf) ([raw file](https://github.com/pw-sat2/pwsat2obc/blob/8192d56dd83919ef60dbe84367fea16c7f7b4f1f/libs/obc/scrubbing/Include/obc/scrubbing.hpp#L38)):*
<details><summary><i>Previously, zaq32 (ukasz ak) wrote</i></summary><blockquote>

consider scrubbing secondary program slots only if their corrected validity flag is true.
</blockquote></details>

During program upload slot is marked as invalid until finalizing entire process. By not checking validity flag, also slots with partial program are scrubbed (increasing chances of successful upload)

---

*[libs/scrubber/program.cpp, line 14 at r1](https://reviewable.io:443/reviews/pw-sat2/pwsat2obc/190#-KmuMqdQs3EZz5GLdj3x:-Kmuwhv716fvMIvUnYkV:b-2uqhja) ([raw file](https://github.com/pw-sat2/pwsat2obc/blob/8192d56dd83919ef60dbe84367fea16c7f7b4f1f/libs/scrubber/program.cpp#L14)):*
<details><summary><i>Previously, zaq32 (ukasz ak) wrote</i></summary><blockquote>

buffer overflow
</blockquote></details>

`a` and `b` will have the same size (and always `ScrubSize`). 

---

*[platforms/FlightModel/efm32gg_upper.ld, line 17 at r1](https://reviewable.io:443/reviews/pw-sat2/pwsat2obc/190#-KmuO4qEXz69QNzw6Pga:-Kmux3X88UmBODhmjnNr:b-k44nud) ([raw file](https://github.com/pw-sat2/pwsat2obc/blob/8192d56dd83919ef60dbe84367fea16c7f7b4f1f/platforms/FlightModel/efm32gg_upper.ld#L17)):*
<details><summary><i>Previously, zaq32 (ukasz ak) wrote</i></summary><blockquote>

what is the purpose of this change?
</blockquote></details>

We need 64KB buffer for scrubbing, it hardly fit into 128KB of RAM

---


*Comments from [Reviewable](https://reviewable.io:443/reviews/pw-sat2/pwsat2obc/190)*
<!-- Sent from Reviewable.io -->",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,190,2017-06-17T10:50:02Z,2017-06-19T20:48:05Z,2017-06-19T20:48:07Z,MERGED,True,1916,243,72,https://github.com/Novakov,Scrubbing: program & bootloader,20,[],https://github.com/PW-Sat2/PWSat2OBC/pull/190,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/190#issuecomment-309285636,"Scrubbing of program (both primary & failsafe) and bootloader (copies & MCU)


This change is","Review status: 60 of 72 files reviewed at latest revision, 13 unresolved discussions.

boot/commands/upload.cpp, line 73 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
remove if unused

Done.

libs/base/Include/utils.h, line 619 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
add static assert to check that alignment is power of 2

Done.

libs/scrubber/bootloader.cpp, line 46 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
consider this:
std::array<gsl::span<const std::uint8_t>, 5> spans;
std::transform(std::begin(copies), std::end(copies), std::begin(spans), [](auto* copy){ return copy.Content();});


Done.

libs/base/Include/base/array_map.hpp, line 4 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
This is already available in much more generic version in standard library as std::transform algorithm.

Done.

libs/base/Include/base/array_map.hpp, line 17 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
see above

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,190,2017-06-17T10:50:02Z,2017-06-19T20:48:05Z,2017-06-19T20:48:07Z,MERGED,True,1916,243,72,https://github.com/Novakov,Scrubbing: program & bootloader,20,[],https://github.com/PW-Sat2/PWSat2OBC/pull/190,https://github.com/zaq32,6,https://github.com/PW-Sat2/PWSat2OBC/pull/190#issuecomment-309569119,"Scrubbing of program (both primary & failsafe) and bootloader (copies & MCU)


This change is","Reviewed 8 of 8 files at r2, 6 of 6 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,191,2017-06-18T08:59:30Z,2017-06-19T18:41:48Z,2017-06-19T18:41:50Z,MERGED,True,258,3,16,https://github.com/zaq32,Extend telemetry acquisition with current mcu temperature.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/191,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/191,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,191,2017-06-18T08:59:30Z,2017-06-19T18:41:48Z,2017-06-19T18:41:50Z,MERGED,True,258,3,16,https://github.com/zaq32,Extend telemetry acquisition with current mcu temperature.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/191,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/191#issuecomment-309265300,This change is,[Telemetry] Add mechanism of gathering the telemetry from obc components,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,191,2017-06-18T08:59:30Z,2017-06-19T18:41:48Z,2017-06-19T18:41:50Z,MERGED,True,258,3,16,https://github.com/zaq32,Extend telemetry acquisition with current mcu temperature.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/191,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/191#issuecomment-309508235,This change is,"Reviewed 16 of 16 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,191,2017-06-18T08:59:30Z,2017-06-19T18:41:48Z,2017-06-19T18:41:50Z,MERGED,True,258,3,16,https://github.com/zaq32,Extend telemetry acquisition with current mcu temperature.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/191,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/191#issuecomment-309523589,This change is,"Reviewed 1 of 1 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,192,2017-06-20T05:46:11Z,2017-06-20T07:02:41Z,2017-06-20T07:02:42Z,MERGED,True,222,4,7,https://github.com/Novakov,Bootloader command: check settings,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/192,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/192,"Adds Health check command to bootloader that verifies:

Selected boot slots
Program copies
Bootloader copies
Bootloader in MCU



This change is","Adds Health check command to bootloader that verifies:

Selected boot slots
Program copies
Bootloader copies
Bootloader in MCU



This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,192,2017-06-20T05:46:11Z,2017-06-20T07:02:41Z,2017-06-20T07:02:42Z,MERGED,True,222,4,7,https://github.com/Novakov,Bootloader command: check settings,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/192,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/192#issuecomment-309663416,"Adds Health check command to bootloader that verifies:

Selected boot slots
Program copies
Bootloader copies
Bootloader in MCU



This change is","Reviewed 7 of 7 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,193,2017-06-20T18:04:11Z,2017-07-03T16:04:44Z,2017-07-03T16:04:45Z,MERGED,True,312,266,9,https://github.com/Novakov,Timed scrubbing,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/193,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/193,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,193,2017-06-20T18:04:11Z,2017-07-03T16:04:44Z,2017-07-03T16:04:45Z,MERGED,True,312,266,9,https://github.com/Novakov,Timed scrubbing,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/193,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/193#issuecomment-310967719,This change is,"Reviewed 8 of 8 files at r1.
Review status: all files reviewed at latest revision, 2 unresolved discussions, some commit checks failed.

libs/base/Include/base/time_counter.hpp, line 61 at r1 (raw file):

         * @param param Parameter that will be passed to callback
         */
        TimeCounter(CounterAction<Param> action, Param param);

since you are using template anyway why you are restricting this class to just function pointers? Use function objects instead.

libs/base/Include/base/time_counter.hpp, line 152 at r1 (raw file):

    template <typename... Counters> std::chrono::milliseconds SleepTime(Counters&... counters)
    {
        std::array<std::chrono::milliseconds, sizeof...(Counters)> times{counters.TimeToZero()...};

verify that array is not empty.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,193,2017-06-20T18:04:11Z,2017-07-03T16:04:44Z,2017-07-03T16:04:45Z,MERGED,True,312,266,9,https://github.com/Novakov,Timed scrubbing,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/193,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/193#issuecomment-311938643,This change is,"Review status: 5 of 9 files reviewed at latest revision, 2 unresolved discussions.

libs/base/Include/base/time_counter.hpp, line 61 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
since you are using template anyway why you are restricting this class to just function pointers? Use function objects instead.

Done.

libs/base/Include/base/time_counter.hpp, line 152 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
verify that array is not empty.

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,193,2017-06-20T18:04:11Z,2017-07-03T16:04:44Z,2017-07-03T16:04:45Z,MERGED,True,312,266,9,https://github.com/Novakov,Timed scrubbing,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/193,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/193#issuecomment-312224815,This change is,"Reviewed 4 of 4 files at r2.
Review status: all files reviewed at latest revision, 2 unresolved discussions.

libs/base/Include/base/time_counter.hpp, line 90 at r2 (raw file):

_action(nullptr)
This will work as long _action is a pointer or can be initialized by pointer


libs/base/Include/base/time_counter.hpp, line 96 at r2 (raw file):

: _value(StartDelay::value), _action(action), _param(param)

_action(std::move(action)), _param(std::move(param))

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,193,2017-06-20T18:04:11Z,2017-07-03T16:04:44Z,2017-07-03T16:04:45Z,MERGED,True,312,266,9,https://github.com/Novakov,Timed scrubbing,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/193,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/193#issuecomment-312483371,This change is,"Review status: all files reviewed at latest revision, 2 unresolved discussions.

libs/base/Include/base/time_counter.hpp, line 90 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote

_action(nullptr)
This will work as long _action is a pointer or can be initialized by pointer


Done.

libs/base/Include/base/time_counter.hpp, line 96 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote

: _value(StartDelay::value), _action(action), _param(param)

_action(std::move(action)), _param(std::move(param))

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,193,2017-06-20T18:04:11Z,2017-07-03T16:04:44Z,2017-07-03T16:04:45Z,MERGED,True,312,266,9,https://github.com/Novakov,Timed scrubbing,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/193,https://github.com/zaq32,6,https://github.com/PW-Sat2/PWSat2OBC/pull/193#issuecomment-312487309,This change is,"Reviewed 1 of 1 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,194,2017-06-22T19:01:17Z,2017-06-25T10:10:15Z,2017-06-25T10:10:16Z,MERGED,True,367,154,31,https://github.com/zaq32,Add command to request immediate beacon retransmission,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/194,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/194,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,194,2017-06-22T19:01:17Z,2017-06-25T10:10:15Z,2017-06-25T10:10:16Z,MERGED,True,367,154,31,https://github.com/zaq32,Add command to request immediate beacon retransmission,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/194,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/194#issuecomment-310475255,This change is,[TC] Send beacon immediately,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,194,2017-06-22T19:01:17Z,2017-06-25T10:10:15Z,2017-06-25T10:10:16Z,MERGED,True,367,154,31,https://github.com/zaq32,Add command to request immediate beacon retransmission,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/194,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/194#issuecomment-310475352,This change is,"Reviewed 23 of 23 files at r1.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

unit_tests/communication/Telecommands/EnterIdleStateTelecommandTest.cpp, line 51 at r1 (raw file):

    TEST_F(EnterIdleStateTelecommandTest, ShouldSetIdleState)
    {
        System::Yield(); // TODO find out what's going on

what? yielding in unit tests does not make sense

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,194,2017-06-22T19:01:17Z,2017-06-25T10:10:15Z,2017-06-25T10:10:16Z,MERGED,True,367,154,31,https://github.com/zaq32,Add command to request immediate beacon retransmission,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/194,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/194#issuecomment-310491799,This change is,"Reviewed 2 of 2 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,194,2017-06-22T19:01:17Z,2017-06-25T10:10:15Z,2017-06-25T10:10:16Z,MERGED,True,367,154,31,https://github.com/zaq32,Add command to request immediate beacon retransmission,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/194,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/194#issuecomment-310846913,This change is,"Reviewed 10 of 10 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,195,2017-06-24T19:31:04Z,2017-06-27T17:33:21Z,2017-07-03T16:55:18Z,MERGED,True,484,80,36,https://github.com/Novakov,SRAM recovery mechanism,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/195,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/195,"Implemented mechanism for handling SRAM latch-up and recovery.
Recovery process can be invoked manually terminal command. After merging #193 recovery will be executed periodically by scrubber task


This change is","Implemented mechanism for handling SRAM latch-up and recovery.
Recovery process can be invoked manually terminal command. After merging #193 recovery will be executed periodically by scrubber task


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,195,2017-06-24T19:31:04Z,2017-06-27T17:33:21Z,2017-07-03T16:55:18Z,MERGED,True,484,80,36,https://github.com/Novakov,SRAM recovery mechanism,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/195,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/195#issuecomment-310969901,"Implemented mechanism for handling SRAM latch-up and recovery.
Recovery process can be invoked manually terminal command. After merging #193 recovery will be executed periodically by scrubber task


This change is","Reviewed 35 of 35 files at r1.
Review status: all files reviewed at latest revision, 3 unresolved discussions, some commit checks failed.

boot/comms.cpp, line 38 at r1 (raw file):

static void PrintHelp();

static std::array<Command, 18> Commands = {

consider this:
static Command Commands[] = {
// list of commands
};

And now you do not have to fill in the size everytime command is added/removed.

integration_tests/tests/test_telecommands_boot_settings.py, line 20 at r1 (raw file):

        self.system.comm.on_hardware_reset = on_reset

        self.power_on_obc(clean_state=True)

how is the obc state being reset right now?

platforms/FlightModel/Include/io_map.h, line 29 at r1 (raw file):

    using Led1 = PinLocation<gpioPortD, 2>;

    using SysClear = PinLocation<gpioPortC, 0>;

Update project documentation to reflect this change.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,195,2017-06-24T19:31:04Z,2017-06-27T17:33:21Z,2017-07-03T16:55:18Z,MERGED,True,484,80,36,https://github.com/Novakov,SRAM recovery mechanism,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/195,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/195#issuecomment-311402397,"Implemented mechanism for handling SRAM latch-up and recovery.
Recovery process can be invoked manually terminal command. After merging #193 recovery will be executed periodically by scrubber task


This change is","Review status: 34 of 36 files reviewed at latest revision, 3 unresolved discussions, some commit checks broke.

integration_tests/tests/test_telecommands_boot_settings.py, line 20 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
how is the obc state being reset right now?

Our current tests do not relay on clear state - the only persistent part is time which is set to proper values as needed. However this functionality may be achived by bootloader interaction

platforms/FlightModel/Include/io_map.h, line 29 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
Update project documentation to reflect this change.

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,195,2017-06-24T19:31:04Z,2017-06-27T17:33:21Z,2017-07-03T16:55:18Z,MERGED,True,484,80,36,https://github.com/Novakov,SRAM recovery mechanism,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/195,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/195#issuecomment-311422228,"Implemented mechanism for handling SRAM latch-up and recovery.
Recovery process can be invoked manually terminal command. After merging #193 recovery will be executed periodically by scrubber task


This change is","Review status: 31 of 36 files reviewed at latest revision, 3 unresolved discussions.

boot/comms.cpp, line 38 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
consider this:
static Command Commands[] = {
// list of commands
};

And now you do not have to fill in the size everytime command is added/removed.

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,195,2017-06-24T19:31:04Z,2017-06-27T17:33:21Z,2017-07-03T16:55:18Z,MERGED,True,484,80,36,https://github.com/Novakov,SRAM recovery mechanism,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/195,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/195#issuecomment-311429768,"Implemented mechanism for handling SRAM latch-up and recovery.
Recovery process can be invoked manually terminal command. After merging #193 recovery will be executed periodically by scrubber task


This change is","Reviewed 5 of 5 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,195,2017-06-24T19:31:04Z,2017-06-27T17:33:21Z,2017-07-03T16:55:18Z,MERGED,True,484,80,36,https://github.com/Novakov,SRAM recovery mechanism,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/195,https://github.com/Novakov,6,https://github.com/PW-Sat2/PWSat2OBC/pull/195#issuecomment-312693563,"Implemented mechanism for handling SRAM latch-up and recovery.
Recovery process can be invoked manually terminal command. After merging #193 recovery will be executed periodically by scrubber task


This change is",[FDIR] Handle FPGA information pins (latch-up/errors),True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,196,2017-06-26T05:28:38Z,2017-07-03T19:28:19Z,2017-07-03T19:28:20Z,MERGED,True,1162,311,37,https://github.com/zaq32,Extend telemetry acquisition with antenna telemetry.,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/196,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/196,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,196,2017-06-26T05:28:38Z,2017-07-03T19:28:19Z,2017-07-03T19:28:20Z,MERGED,True,1162,311,37,https://github.com/zaq32,Extend telemetry acquisition with antenna telemetry.,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/196,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/196#issuecomment-310971767,This change is,[Telemetry] Add mechanism of gathering the telemetry from obc components,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,196,2017-06-26T05:28:38Z,2017-07-03T19:28:19Z,2017-07-03T19:28:20Z,MERGED,True,1162,311,37,https://github.com/zaq32,Extend telemetry acquisition with antenna telemetry.,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/196,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/196#issuecomment-312697454,This change is,"Reviewed 37 of 37 files at r1, 3 of 3 files at r2.
Review status: all files reviewed at latest revision, 2 unresolved discussions.

libs/drivers/antenna/telemetry.cpp, line 30 at r2 (raw file):

        ActivationTimes::ActivationTimes()
        {
            this->times[0] = this->times[1] = this->times[2] = this->times[3] = 0s;

You can use fill method of std::array or call second ctor (like with ActivationCounts)

libs/drivers/antenna/Include/antenna/driver.h, line 145 at r2 (raw file):

     * @brief Pointer to the procedure that queries hardware for its current state.
     * @param[in] driver Current driver instance.
     * @param[out] telemetry Reference to boject that should be filled with updated antenna telemetry.

What is boject? ;)

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,196,2017-06-26T05:28:38Z,2017-07-03T19:28:19Z,2017-07-03T19:28:20Z,MERGED,True,1162,311,37,https://github.com/zaq32,Extend telemetry acquisition with antenna telemetry.,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/196,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/196#issuecomment-312702847,This change is,"Review status: 35 of 37 files reviewed at latest revision, 2 unresolved discussions.

libs/drivers/antenna/telemetry.cpp, line 30 at r2 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
You can use fill method of std::array or call second ctor (like with ActivationCounts)

fixed

libs/drivers/antenna/Include/antenna/driver.h, line 145 at r2 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
What is boject? ;)

fixed

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,196,2017-06-26T05:28:38Z,2017-07-03T19:28:19Z,2017-07-03T19:28:20Z,MERGED,True,1162,311,37,https://github.com/zaq32,Extend telemetry acquisition with antenna telemetry.,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/196,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/196#issuecomment-312703297,This change is,"Reviewed 2 of 2 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,197,2017-06-29T11:52:10Z,2017-07-24T05:41:59Z,2017-07-24T05:42:00Z,MERGED,True,2911,8,57,https://github.com/tom4r,Payload driver,29,[],https://github.com/PW-Sat2/PWSat2OBC/pull/197,https://github.com/tom4r,1,https://github.com/PW-Sat2/PWSat2OBC/pull/197,"Created Payload Driver.


This change is","Created Payload Driver.


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,197,2017-06-29T11:52:10Z,2017-07-24T05:41:59Z,2017-07-24T05:42:00Z,MERGED,True,2911,8,57,https://github.com/tom4r,Payload driver,29,[],https://github.com/PW-Sat2/PWSat2OBC/pull/197,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/197#issuecomment-311946902,"Created Payload Driver.


This change is","Reviewed 25 of 53 files at r1.
Review status: 25 of 53 files reviewed at latest revision, 2 unresolved discussions.

unit_tests/base/Include/mock/InterruptPinDriverMock.hpp, line 11 at r1 (raw file):

using testing::Invoke;

class InterruptPinDriverMock : public drivers::gpio::IInterruptPinDriver

Dont' define mock constructors inline - it makes compilation/linking longer

unit_tests/base/Include/mock/PayloadHardwareDriverMock.hpp, line 12 at r1 (raw file):

{
  public:
    MOCK_CONST_METHOD0(IsBusy, bool());

Don't define mock constructors inline

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,197,2017-06-29T11:52:10Z,2017-07-24T05:41:59Z,2017-07-24T05:42:00Z,MERGED,True,2911,8,57,https://github.com/tom4r,Payload driver,29,[],https://github.com/PW-Sat2/PWSat2OBC/pull/197,https://github.com/ggajoch,3,https://github.com/PW-Sat2/PWSat2OBC/pull/197#issuecomment-311993247,"Created Payload Driver.


This change is","Review status: 25 of 53 files reviewed at latest revision, 4 unresolved discussions.

libs/drivers/payload/Include/payload/devices.h, line 40 at r1 (raw file):

             * @return Result status.
             */
            virtual OSResult GetWhoami(PayloadTelemetry::Status& output) override;

shouldn't there be also a method to check value of WhoAmI register?
When PLD will be turned on OBC should check this register for correctness, in addition to writing it to experiment data.
However, I am not sure if we should abort the experiment in case PLD will respond (ACK on I2C) but returned incorrect WhoAmI data.

libs/drivers/payload/Include/payload/commands/base_code.hpp, line 46 at r1 (raw file):

    // Validation should not cancel save.
    result = Validate();

validation result should be ignored (as it is right now) and performed only on ground.
Then, is the validating code needed here?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,197,2017-06-29T11:52:10Z,2017-07-24T05:41:59Z,2017-07-24T05:42:00Z,MERGED,True,2911,8,57,https://github.com/tom4r,Payload driver,29,[],https://github.com/PW-Sat2/PWSat2OBC/pull/197,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/197#issuecomment-312237474,"Created Payload Driver.


This change is","Reviewed 31 of 53 files at r1.
Review status: 31 of 53 files reviewed at latest revision, 10 unresolved discussions.

libs/drivers/gpio/Include/gpio/InterruptPinDriver.h, line 60 at r1 (raw file):

             * @brief Returns mask for setting and clearing interrupt registers. Calculated from interrupt pin number.
             */
            inline uint32_t IRQMask()

define outside class definition

libs/drivers/payload/Include/payload/payload.h, line 94 at r1 (raw file):

          private:
            static constexpr uint32_t InterruptPriority = 6;

values like this should not be hardcoded inside the driver.

libs/drivers/payload/Include/payload/telemetry.h, line 88 at r1 (raw file):

                std::uint32_t temperature;
                std::array<std::uint32_t, 3> vth;
            } __attribute__((packed));

what is the purpose of this attribute?

libs/drivers/payload/Include/payload/commands/base.h, line 25 at r1 (raw file):

                 * @param[in] driver A reference to hardware driver for payload.
                 */
                PayloadCommand(IPayloadDriver& driver) : _driver(driver)

define constructor outside template definition

libs/drivers/payload/Include/payload/commands/base.h, line 74 at r1 (raw file):

                 * @brief The hardware driver.
                 */
                IPayloadDriver& _driver;

do not use public member fields

src/obc.cpp, line 103 at r1 (raw file):

    {
        LOGF(LOG_LEVEL_FATAL, ""Storage initialization failed %d"", num(result));
        return result;

why this has been removed?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,197,2017-06-29T11:52:10Z,2017-07-24T05:41:59Z,2017-07-24T05:42:00Z,MERGED,True,2911,8,57,https://github.com/tom4r,Payload driver,29,[],https://github.com/PW-Sat2/PWSat2OBC/pull/197,https://github.com/tom4r,5,https://github.com/PW-Sat2/PWSat2OBC/pull/197#issuecomment-312454025,"Created Payload Driver.


This change is","Review status: 21 of 56 files reviewed at latest revision, 10 unresolved discussions.

libs/drivers/gpio/Include/gpio/InterruptPinDriver.h, line 60 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
define outside class definition

Fixed

libs/drivers/payload/Include/payload/devices.h, line 40 at r1 (raw file):
Previously, ggajoch (Grzegorz Gajoch) wrote
shouldn't there be also a method to check value of WhoAmI register?
When PLD will be turned on OBC should check this register for correctness, in addition to writing it to experiment data.
However, I am not sure if we should abort the experiment in case PLD will respond (ACK on I2C) but returned incorrect WhoAmI data.

Added ValidateWhoami method for checking if value returned from payload is correct.

libs/drivers/payload/Include/payload/payload.h, line 94 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
values like this should not be hardcoded inside the driver.

Moved to io_map like for example in UART driver.

libs/drivers/payload/Include/payload/telemetry.h, line 88 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
what is the purpose of this attribute?

This is the GCC-specific attribute that removes byte(s) of padding between structure fields. Here used for removing padding between status and temperature fields.

libs/drivers/payload/Include/payload/commands/base.h, line 25 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
define constructor outside template definition

Fixed.

libs/drivers/payload/Include/payload/commands/base.h, line 74 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
do not use public member fields

This field is protected.

libs/drivers/payload/Include/payload/commands/base_code.hpp, line 46 at r1 (raw file):
Previously, ggajoch (Grzegorz Gajoch) wrote
validation result should be ignored (as it is right now) and performed only on ground.
Then, is the validating code needed here?

Removed all validation code in commands.

src/obc.cpp, line 103 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
why this has been removed?

It was removed after discussion with Maciek, because currently it causes hardfault several lines of code later in scenario when Flash completely doesn't work or is not connected (like in my first setup without payload board), because it skips the rest of required initialization.
With return removed, at least OBC starts.

unit_tests/base/Include/mock/InterruptPinDriverMock.hpp, line 11 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Dont' define mock constructors inline - it makes compilation/linking longer

Fixed.

unit_tests/base/Include/mock/PayloadHardwareDriverMock.hpp, line 12 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Don't define mock constructors inline

Fixed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,197,2017-06-29T11:52:10Z,2017-07-24T05:41:59Z,2017-07-24T05:42:00Z,MERGED,True,2911,8,57,https://github.com/tom4r,Payload driver,29,[],https://github.com/PW-Sat2/PWSat2OBC/pull/197,https://github.com/Novakov,6,https://github.com/PW-Sat2/PWSat2OBC/pull/197#issuecomment-312483842,"Created Payload Driver.


This change is","Reviewed 1 of 30 files at r2.
Review status: 22 of 56 files reviewed at latest revision, 9 unresolved discussions.

libs/drivers/payload/Include/payload/commands/Housekeeping.h, line 35 at r2 (raw file):

                    std::array<uint8_t, sizeof(PayloadTelemetry::Housekeeping)> buffer;
                    static_assert(sizeof(data) == sizeof(buffer), ""Incorrect size buffered Telemetry"");
                } _telemetry;

It's bad idea to relay on struct members order when reading response from any device. Normally we use following procedure:

Read response bytes into buffer
Use Reader to extract values from buffer into dedicated response structure


Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,197,2017-06-29T11:52:10Z,2017-07-24T05:41:59Z,2017-07-24T05:42:00Z,MERGED,True,2911,8,57,https://github.com/tom4r,Payload driver,29,[],https://github.com/PW-Sat2/PWSat2OBC/pull/197,https://github.com/tom4r,7,https://github.com/PW-Sat2/PWSat2OBC/pull/197#issuecomment-312498769,"Created Payload Driver.


This change is","Review status: 22 of 56 files reviewed at latest revision, 9 unresolved discussions.

libs/drivers/payload/Include/payload/commands/Housekeeping.h, line 35 at r2 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
It's bad idea to relay on struct members order when reading response from any device. Normally we use following procedure:

Read response bytes into buffer
Use Reader to extract values from buffer into dedicated response structure


OK. I ""demagicified"" the ""I2C data serialization"" code. :)

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,197,2017-06-29T11:52:10Z,2017-07-24T05:41:59Z,2017-07-24T05:42:00Z,MERGED,True,2911,8,57,https://github.com/tom4r,Payload driver,29,[],https://github.com/PW-Sat2/PWSat2OBC/pull/197,https://github.com/Novakov,8,https://github.com/PW-Sat2/PWSat2OBC/pull/197#issuecomment-312715766,"Created Payload Driver.


This change is","Reviewed 4 of 53 files at r1, 15 of 30 files at r2, 15 of 15 files at r3.
Review status: all files reviewed at latest revision, 19 unresolved discussions, some commit checks failed.

integration_tests/devices/payload.py, line 22 at r3 (raw file):

        self.RadFET = [0xFF, 0xFFFFFFFF, 0xFFFFFFFF, 0xFFFFFFFF, 0xFFFFFFFF]
        self.default_processing_time = 1
        self.long_processing_time = 10

It will be better to provide callback methods returning processing time (or no time at all)

integration_tests/devices/payload.py, line 195 at r3 (raw file):

    @i2cMock.command([41])
    def read_radfet(self):
        self.log.debug(""Read RadFET"")

By default all calls to I2C Device methods are logged - no need to log them second time

libs/drivers/payload/commands/SunS.cpp, line 35 at r3 (raw file):

    {
        LOGF(LOG_LEVEL_DEBUG, ""SunS Ref voltage %u: %u"", i + 1, output.voltages[i]);
    }

I don't think it is necessary to log every received value

libs/drivers/payload/commands/Whoami.cpp, line 17 at r3 (raw file):

    if (_driver.IsBusy())
    {
        LOG(LOG_LEVEL_WARNING, ""Payload busy. Ignoring command"");

We tend to use [module] Message convention for log message - just a suggestion

libs/drivers/payload/Include/payload/payload.h, line 97 at r3 (raw file):

             * @brief DefaultTimeout Default timeout for Payload operations. 30 minutes.
             */
            static constexpr std::chrono::milliseconds DefaultTimeout = std::chrono::milliseconds(1800000);

30 minutes is quite a long time...

libs/drivers/payload/Include/payload/telemetry.h, line 87 at r3 (raw file):

                std::uint16_t obc_3v3d;
                static constexpr uint8_t DeviceDataAddress = 37;
                static constexpr uint8_t DeviceDataLength = 4;

You can streamline form of this code a bit by defining base struct taking address and length as template parameters and exposing them as constexprs

libs/drivers/payload/Include/payload/telemetry.h, line 103 at r3 (raw file):

        };

        static_assert(std::is_pod<PayloadTelemetry>::value, ""POD"");

As you are no longer relaying on memory layout you can remove this assert

libs/drivers/payload/Include/payload/commands/base.h, line 75 at r3 (raw file):

        }
    }
}

I think it is possible to remove almost all virtual calls by using constexprs inside command classes (for data address and buffer). Most of the code in commands is the same

libs/drivers/payload/Include/payload/commands/base_code.hpp, line 86 at r3 (raw file):

    return OSResult::Success;
}

why splitting into two files?

platforms/FlightModel/Include/io_map.h, line 32 at r3 (raw file):

    {
        static constexpr std::uint8_t InterruptPriority = 6;
        using PayloadInterrupt = PinLocation<gpioPortE, 0>;

During last tests we found out that different pin is used for payload interrupt - verify with @ggajoch and @begreeen

src/commands/payload.cpp, line 233 at r3 (raw file):

    cmd(driver, argc - 1, &argv[1]);
}

In all commands: provide labels for each value in output. It's much easier to understand (and determine if it's correct)

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,197,2017-06-29T11:52:10Z,2017-07-24T05:41:59Z,2017-07-24T05:42:00Z,MERGED,True,2911,8,57,https://github.com/tom4r,Payload driver,29,[],https://github.com/PW-Sat2/PWSat2OBC/pull/197,https://github.com/tom4r,9,https://github.com/PW-Sat2/PWSat2OBC/pull/197#issuecomment-313314400,"Created Payload Driver.


This change is","Review status: 28 of 56 files reviewed at latest revision, 19 unresolved discussions, some commit checks failed.

integration_tests/devices/payload.py, line 22 at r3 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
It will be better to provide callback methods returning processing time (or no time at all)

Added callback function returning time. No function set is timeout 0.

integration_tests/devices/payload.py, line 195 at r3 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
By default all calls to I2C Device methods are logged - no need to log them second time

Logging removed.

libs/drivers/payload/commands/SunS.cpp, line 35 at r3 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
I don't think it is necessary to log every received value

Logging values in driver removed.

libs/drivers/payload/commands/Whoami.cpp, line 17 at r3 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
We tend to use [module] Message convention for log message - just a suggestion

Changed logging messages to include [Payload] tag

libs/drivers/payload/Include/payload/payload.h, line 97 at r3 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
30 minutes is quite a long time...

Reduced timeout to 5 minutes (5*expected RadFET measurement).

libs/drivers/payload/Include/payload/telemetry.h, line 87 at r3 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
You can streamline form of this code a bit by defining base struct taking address and length as template parameters and exposing them as constexprs

Fixed.

libs/drivers/payload/Include/payload/telemetry.h, line 103 at r3 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
As you are no longer relaying on memory layout you can remove this assert

Removed

libs/drivers/payload/Include/payload/commands/base.h, line 75 at r3 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
I think it is possible to remove almost all virtual calls by using constexprs inside command classes (for data address and buffer). Most of the code in commands is the same

Fixed

libs/drivers/payload/Include/payload/commands/base_code.hpp, line 86 at r3 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
why splitting into two files?

I wanted to separate declarations from ""definitions"" and reduce adding unnecessary includes to other areas. I can merge those two files if it would be better.

platforms/FlightModel/Include/io_map.h, line 32 at r3 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
During last tests we found out that different pin is used for payload interrupt - verify with @ggajoch and @begreeen

Discussed and I will update it after new platform code will be ready

src/commands/payload.cpp, line 233 at r3 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
In all commands: provide labels for each value in output. It's much easier to understand (and determine if it's correct)

Labels for values added

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,197,2017-06-29T11:52:10Z,2017-07-24T05:41:59Z,2017-07-24T05:42:00Z,MERGED,True,2911,8,57,https://github.com/tom4r,Payload driver,29,[],https://github.com/PW-Sat2/PWSat2OBC/pull/197,https://github.com/Novakov,10,https://github.com/PW-Sat2/PWSat2OBC/pull/197#issuecomment-313366796,"Created Payload Driver.


This change is","Reviewed 30 of 30 files at r4.
Review status: all files reviewed at latest revision, 11 unresolved discussions.

integration_tests/tests/test_payload.py, line 15 at r4 (raw file):

    def decode_result(self, result_string):

empty lines?

integration_tests/tests/test_payload.py, line 104 at r4 (raw file):

        self.system.payload.set_timeout_callback()
        result = self.system.obc.payload_radfet_off()

You can move decoding results to decorator on methods in OBC mixin - that way it will work also in pyconsole

libs/drivers/payload/Include/payload/commands/Housekeeping.h, line 19 at r4 (raw file):

                                            PayloadTelemetry::Housekeeping,
                                            PayloadTelemetry::Housekeeping::DeviceDataAddress,
                                            PayloadTelemetry::Housekeeping::DeviceDataLength>

If we assume (I think we can) that all telemetry classes will have members DeviceDataAddress and DeviceDataLength than there is no need to pass them by template parameters.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,197,2017-06-29T11:52:10Z,2017-07-24T05:41:59Z,2017-07-24T05:42:00Z,MERGED,True,2911,8,57,https://github.com/tom4r,Payload driver,29,[],https://github.com/PW-Sat2/PWSat2OBC/pull/197,https://github.com/tom4r,11,https://github.com/PW-Sat2/PWSat2OBC/pull/197#issuecomment-313466161,"Created Payload Driver.


This change is","Review status: 46 of 57 files reviewed at latest revision, 11 unresolved discussions.

integration_tests/tests/test_payload.py, line 15 at r4 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
empty lines?

Fixed.

integration_tests/tests/test_payload.py, line 104 at r4 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
You can move decoding results to decorator on methods in OBC mixin - that way it will work also in pyconsole

Done.

libs/drivers/payload/Include/payload/commands/Housekeeping.h, line 19 at r4 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
If we assume (I think we can) that all telemetry classes will have members DeviceDataAddress and DeviceDataLength than there is no need to pass them by template parameters.

Thank you. Removed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,197,2017-06-29T11:52:10Z,2017-07-24T05:41:59Z,2017-07-24T05:42:00Z,MERGED,True,2911,8,57,https://github.com/tom4r,Payload driver,29,[],https://github.com/PW-Sat2/PWSat2OBC/pull/197,https://github.com/Novakov,12,https://github.com/PW-Sat2/PWSat2OBC/pull/197#issuecomment-313846576,"Created Payload Driver.


This change is","Reviewed 11 of 11 files at r5.
Review status: all files reviewed at latest revision, 6 unresolved discussions, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,197,2017-06-29T11:52:10Z,2017-07-24T05:41:59Z,2017-07-24T05:42:00Z,MERGED,True,2911,8,57,https://github.com/tom4r,Payload driver,29,[],https://github.com/PW-Sat2/PWSat2OBC/pull/197,https://github.com/Novakov,13,https://github.com/PW-Sat2/PWSat2OBC/pull/197#issuecomment-313921174,"Created Payload Driver.


This change is","Reviewed 13 of 14 files at r6.
Review status: all files reviewed at latest revision, 6 unresolved discussions.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,197,2017-06-29T11:52:10Z,2017-07-24T05:41:59Z,2017-07-24T05:42:00Z,MERGED,True,2911,8,57,https://github.com/tom4r,Payload driver,29,[],https://github.com/PW-Sat2/PWSat2OBC/pull/197,https://github.com/zaq32,14,https://github.com/PW-Sat2/PWSat2OBC/pull/197#issuecomment-314533302,"Created Payload Driver.


This change is","Reviewed 5 of 30 files at r2, 8 of 30 files at r4, 3 of 11 files at r5, 6 of 14 files at r6.
Review status: all files reviewed at latest revision, 2 unresolved discussions, some commit checks failed.

integration_tests/devices/payload.py, line 9 at r6 (raw file):

class Payload(I2CDevice):

it would be usefull to have a way of hooking into the mock to be able to customize its behaviour in tests

libs/drivers/payload/Include/payload/commands/base.h, line 74 at r1 (raw file):
Previously, tom4r wrote
This field is protected.

Protected field is just as bad as public one. The only difference is the length of the list of its potential victims

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,197,2017-06-29T11:52:10Z,2017-07-24T05:41:59Z,2017-07-24T05:42:00Z,MERGED,True,2911,8,57,https://github.com/tom4r,Payload driver,29,[],https://github.com/PW-Sat2/PWSat2OBC/pull/197,https://github.com/zaq32,15,https://github.com/PW-Sat2/PWSat2OBC/pull/197#issuecomment-314534492,"Created Payload Driver.


This change is","Reviewed 1 of 53 files at r1, 6 of 30 files at r2, 6 of 30 files at r4, 5 of 11 files at r5, 7 of 14 files at r6.
Review status: all files reviewed at latest revision, 2 unresolved discussions, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,197,2017-06-29T11:52:10Z,2017-07-24T05:41:59Z,2017-07-24T05:42:00Z,MERGED,True,2911,8,57,https://github.com/tom4r,Payload driver,29,[],https://github.com/PW-Sat2/PWSat2OBC/pull/197,https://github.com/tom4r,16,https://github.com/PW-Sat2/PWSat2OBC/pull/197#issuecomment-315020429,"Created Payload Driver.


This change is","Review status: 52 of 57 files reviewed at latest revision, 2 unresolved discussions, some commit checks failed.

integration_tests/devices/payload.py, line 9 at r6 (raw file):
Previously, zaq32 (ukasz ak) wrote
it would be usefull to have a way of hooking into the mock to be able to customize its behaviour in tests

Rewritten driver to allow overriding payload processing mocks and changed internal values from magical lists to proper classes.

libs/drivers/payload/Include/payload/commands/base.h, line 74 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
Protected field is just as bad as public one. The only difference is the length of the list of its potential victims

You are right, fixed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,197,2017-06-29T11:52:10Z,2017-07-24T05:41:59Z,2017-07-24T05:42:00Z,MERGED,True,2911,8,57,https://github.com/tom4r,Payload driver,29,[],https://github.com/PW-Sat2/PWSat2OBC/pull/197,https://github.com/zaq32,17,https://github.com/PW-Sat2/PWSat2OBC/pull/197#issuecomment-315608746,"Created Payload Driver.


This change is","Reviewed 1 of 53 files at r1, 1 of 30 files at r2, 11 of 12 files at r7.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,197,2017-06-29T11:52:10Z,2017-07-24T05:41:59Z,2017-07-24T05:42:00Z,MERGED,True,2911,8,57,https://github.com/tom4r,Payload driver,29,[],https://github.com/PW-Sat2/PWSat2OBC/pull/197,https://github.com/zaq32,18,https://github.com/PW-Sat2/PWSat2OBC/pull/197#issuecomment-317324534,"Created Payload Driver.


This change is","Reviewed 4 of 5 files at r8.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,198,2017-07-01T08:01:37Z,2017-07-08T21:44:17Z,2017-07-08T21:44:18Z,MERGED,True,1227,122,59,https://github.com/zaq32,"[platforms] Move FlightModel platform to EngModel, add platform for true FlightModel.",14,[],https://github.com/PW-Sat2/PWSat2OBC/pull/198,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/198,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,198,2017-07-01T08:01:37Z,2017-07-08T21:44:17Z,2017-07-08T21:44:18Z,MERGED,True,1227,122,59,https://github.com/zaq32,"[platforms] Move FlightModel platform to EngModel, add platform for true FlightModel.",14,[],https://github.com/PW-Sat2/PWSat2OBC/pull/198,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/198#issuecomment-312685808,This change is,"Reviewed 11 of 12 files at r1.
Review status: 11 of 12 files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,198,2017-07-01T08:01:37Z,2017-07-08T21:44:17Z,2017-07-08T21:44:18Z,MERGED,True,1227,122,59,https://github.com/zaq32,"[platforms] Move FlightModel platform to EngModel, add platform for true FlightModel.",14,[],https://github.com/PW-Sat2/PWSat2OBC/pull/198,https://github.com/begreeen,3,https://github.com/PW-Sat2/PWSat2OBC/pull/198#issuecomment-312689177,This change is,"platforms/FlightModel/Include/io_map.h, line 18 at r1 (raw file):

namespace io_map
{
    using SlaveSelectFlash1 = PinLocation<gpioPortA, 13>;

should be PB12 since PA13 and PB12 are swapped on OBC FM

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,198,2017-07-01T08:01:37Z,2017-07-08T21:44:17Z,2017-07-08T21:44:18Z,MERGED,True,1227,122,59,https://github.com/zaq32,"[platforms] Move FlightModel platform to EngModel, add platform for true FlightModel.",14,[],https://github.com/PW-Sat2/PWSat2OBC/pull/198,https://github.com/begreeen,4,https://github.com/PW-Sat2/PWSat2OBC/pull/198#issuecomment-312689238,This change is,"platforms/FlightModel/Include/io_map.h, line 27 at r1 (raw file):

    using Led0 = PinLocation<gpioPortD, 1>;
    using Led1 = PinLocation<gpioPortD, 2>;

do these leds exist on FM?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,198,2017-07-01T08:01:37Z,2017-07-08T21:44:17Z,2017-07-08T21:44:18Z,MERGED,True,1227,122,59,https://github.com/zaq32,"[platforms] Move FlightModel platform to EngModel, add platform for true FlightModel.",14,[],https://github.com/PW-Sat2/PWSat2OBC/pull/198,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/198#issuecomment-313848198,This change is,"Reviewed 80 of 80 files at r2.
Review status: all files reviewed at latest revision, 4 unresolved discussions.

platforms/mcu/EngModel/Include/mcu/io_map.h, line 18 at r2 (raw file):

namespace io_map
{
    using VirtualPA13 = PinLocation<gpioPortA, 13>;

Remapping MCU pins to other pins is confusing - you can use Piggyback42 (don't remember the exact number) instead

platforms/payload/Mock/Include/payload/io_map.h, line 28 at r2 (raw file):

/** @endcond */

#endif

Don't reinvent the names - we call it PLD DM, so name should be DM

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,198,2017-07-01T08:01:37Z,2017-07-08T21:44:17Z,2017-07-08T21:44:18Z,MERGED,True,1227,122,59,https://github.com/zaq32,"[platforms] Move FlightModel platform to EngModel, add platform for true FlightModel.",14,[],https://github.com/PW-Sat2/PWSat2OBC/pull/198,https://github.com/zaq32,6,https://github.com/PW-Sat2/PWSat2OBC/pull/198#issuecomment-313864848,This change is,"Review status: 52 of 59 files reviewed at latest revision, 4 unresolved discussions.

platforms/mcu/EngModel/Include/mcu/io_map.h, line 18 at r1 (raw file):
Previously, begreeen wrote
should be PB12 since PA13 and PB12 are swapped on OBC FM

Done

platforms/mcu/EngModel/Include/mcu/io_map.h, line 27 at r1 (raw file):
Previously, begreeen wrote
do these leds exist on FM?

No but it easier to keep them instead of try to build platform specific functionality.

platforms/mcu/EngModel/Include/mcu/io_map.h, line 18 at r2 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Remapping MCU pins to other pins is confusing - you can use Piggyback42 (don't remember the exact number) instead

Done

platforms/payload/DM/Include/payload/io_map.h, line 28 at r2 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Don't reinvent the names - we call it PLD DM, so name should be DM

Done

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,198,2017-07-01T08:01:37Z,2017-07-08T21:44:17Z,2017-07-08T21:44:18Z,MERGED,True,1227,122,59,https://github.com/zaq32,"[platforms] Move FlightModel platform to EngModel, add platform for true FlightModel.",14,[],https://github.com/PW-Sat2/PWSat2OBC/pull/198,https://github.com/Novakov,7,https://github.com/PW-Sat2/PWSat2OBC/pull/198#issuecomment-313865062,This change is,"Reviewed 2 of 82 files at r2, 9 of 9 files at r3.
Review status: all files reviewed at latest revision, 2 unresolved discussions.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,198,2017-07-01T08:01:37Z,2017-07-08T21:44:17Z,2017-07-08T21:44:18Z,MERGED,True,1227,122,59,https://github.com/zaq32,"[platforms] Move FlightModel platform to EngModel, add platform for true FlightModel.",14,[],https://github.com/PW-Sat2/PWSat2OBC/pull/198,https://github.com/Novakov,8,https://github.com/PW-Sat2/PWSat2OBC/pull/198#issuecomment-313880591,This change is,"Reviewed 1 of 1 files at r4.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,199,2017-07-01T09:52:35Z,2017-07-02T19:11:45Z,2017-07-22T12:34:56Z,CLOSED,False,7691,53,36,https://github.com/mandrek44,OBC Emulator,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/199,https://github.com/mandrek44,1,https://github.com/PW-Sat2/PWSat2OBC/pull/199,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,199,2017-07-01T09:52:35Z,2017-07-02T19:11:45Z,2017-07-22T12:34:56Z,CLOSED,False,7691,53,36,https://github.com/mandrek44,OBC Emulator,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/199,https://github.com/mandrek44,2,https://github.com/PW-Sat2/PWSat2OBC/pull/199#issuecomment-312510974,This change is,Closing - I'll make another when with telemetry branch,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,200,2017-07-02T17:31:42Z,2017-07-02T19:43:31Z,2017-07-02T19:43:32Z,MERGED,True,36,6,6,https://github.com/Novakov,Watchdog fix,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/200,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/200,"Internal watchdog was enabled in runlevel 1 and time service was enabled in runlevel 2. That mismatch caused OBC to restart after ~1 minute.


This change is","Internal watchdog was enabled in runlevel 1 and time service was enabled in runlevel 2. That mismatch caused OBC to restart after ~1 minute.


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,200,2017-07-02T17:31:42Z,2017-07-02T19:43:31Z,2017-07-02T19:43:32Z,MERGED,True,36,6,6,https://github.com/Novakov,Watchdog fix,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/200,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/200#issuecomment-312505507,"Internal watchdog was enabled in runlevel 1 and time service was enabled in runlevel 2. That mismatch caused OBC to restart after ~1 minute.


This change is","Reviewed 6 of 6 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,201,2017-07-02T20:13:57Z,2017-07-03T17:42:41Z,2017-07-03T17:42:42Z,MERGED,True,37,19,5,https://github.com/Novakov,EPS: remove error code as first byte,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/201,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/201,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,201,2017-07-02T20:13:57Z,2017-07-03T17:42:41Z,2017-07-03T17:42:42Z,MERGED,True,37,19,5,https://github.com/Novakov,EPS: remove error code as first byte,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/201,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/201#issuecomment-312514422,This change is,"Reviewed 4 of 4 files at r1.
Review status: all files reviewed at latest revision, 2 unresolved discussions.

libs/drivers/eps/eps.cpp, line 201 at r1 (raw file):

            if (controller == Controller::A)
            {
                command[0] = 0x4B;

can you name this constant?

libs/drivers/eps/eps.cpp, line 205 at r1 (raw file):

            else
            {
                command[0] = 0x07;

can you name this constant?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,201,2017-07-02T20:13:57Z,2017-07-03T17:42:41Z,2017-07-03T17:42:42Z,MERGED,True,37,19,5,https://github.com/Novakov,EPS: remove error code as first byte,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/201,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/201#issuecomment-312693898,This change is,"Review status: all files reviewed at latest revision, 2 unresolved discussions, some commit checks failed.

libs/drivers/eps/eps.cpp, line 201 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
can you name this constant?

Done.

libs/drivers/eps/eps.cpp, line 205 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
can you name this constant?

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,201,2017-07-02T20:13:57Z,2017-07-03T17:42:41Z,2017-07-03T17:42:42Z,MERGED,True,37,19,5,https://github.com/Novakov,EPS: remove error code as first byte,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/201,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/201#issuecomment-312694070,This change is,"Reviewed 2 of 2 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,201,2017-07-02T20:13:57Z,2017-07-03T17:42:41Z,2017-07-03T17:42:42Z,MERGED,True,37,19,5,https://github.com/Novakov,EPS: remove error code as first byte,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/201,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/201#issuecomment-312701962,This change is,[BUG] EPS driver cannot not read device telemetry,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,202,2017-07-03T15:39:53Z,2017-07-03T16:54:09Z,2017-07-03T16:54:10Z,MERGED,True,522,55,36,https://github.com/Novakov,Telecommand: stop antenna deploymen,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/202,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/202,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,202,2017-07-03T15:39:53Z,2017-07-03T16:54:09Z,2017-07-03T16:54:10Z,MERGED,True,522,55,36,https://github.com/Novakov,Telecommand: stop antenna deploymen,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/202,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/202#issuecomment-312683191,This change is,"Reviewed 37 of 37 files at r1.
Review status: all files reviewed at latest revision, 3 unresolved discussions.

libs/mission/antenna/Include/mission/antenna_task.hpp, line 61 at r1 (raw file):

        };

        class StopAntennaDeploymentTask : public mission::Action, public IDisableAntennaDeployment

Why to build this task instead of updating antenna configuration stored in persistent state directly from telecommand?

libs/obc/communication/telecommands/Include/obc/telecommands/antenna.hpp, line 12 at r1 (raw file):

    namespace telecommands
    {
        class StopAntennaDeployment : public telecommunication::uplink::Telecommand<0xA3>

undocumented

libs/state/Antenna.cpp, line 23 at r1 (raw file):

        if (!isDeploymentDisabled)
        {
            LOG(LOG_LEVEL_INFO, ""[TUTUAJ]"");

??

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,202,2017-07-03T15:39:53Z,2017-07-03T16:54:09Z,2017-07-03T16:54:10Z,MERGED,True,522,55,36,https://github.com/Novakov,Telecommand: stop antenna deploymen,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/202,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/202#issuecomment-312683861,This change is,"Review status: 31 of 36 files reviewed at latest revision, 3 unresolved discussions.

libs/mission/antenna/Include/mission/antenna_task.hpp, line 61 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
Why to build this task instead of updating antenna configuration stored in persistent state directly from telecommand?

Mainly to coordinate with end of antenna deployment process, also to avoid any synchronization problems with persistant state

libs/obc/communication/telecommands/Include/obc/telecommands/antenna.hpp, line 12 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
undocumented

Done.

libs/state/Antenna.cpp, line 23 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
??

Yep, realised 5 seconds after pushing

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,202,2017-07-03T15:39:53Z,2017-07-03T16:54:09Z,2017-07-03T16:54:10Z,MERGED,True,522,55,36,https://github.com/Novakov,Telecommand: stop antenna deploymen,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/202,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/202#issuecomment-312684450,This change is,"Reviewed 6 of 6 files at r2.
Review status: all files reviewed at latest revision, 1 unresolved discussion, some commit checks failed.

libs/mission/antenna/Include/mission/antenna_task.hpp, line 61 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Mainly to coordinate with end of antenna deployment process, also to avoid any synchronization problems with persistant state

the persistent state will have to be synchronized anyway as there will be more telecommands that need to either read or write it i.e. TimeTelecommand. However such synchronization is progressing very slowly.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,202,2017-07-03T15:39:53Z,2017-07-03T16:54:09Z,2017-07-03T16:54:10Z,MERGED,True,522,55,36,https://github.com/Novakov,Telecommand: stop antenna deploymen,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/202,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/202#issuecomment-312684869,This change is,"Review status: all files reviewed at latest revision, 1 unresolved discussion, some commit checks failed.

libs/mission/antenna/Include/mission/antenna_task.hpp, line 61 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
the persistent state will have to be synchronized anyway as there will be more telecommands that need to either read or write it i.e. TimeTelecommand. However such synchronization is progressing very slowly.

That's true but using mission task is simple way of coordinating with antenna deployment and achieving 'Do it when you can' behavior

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,203,2017-07-03T17:43:49Z,2017-07-05T05:09:36Z,2017-07-05T05:09:37Z,MERGED,True,170,10,13,https://github.com/Novakov,Boot settings scrubber,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/203,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/203,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,203,2017-07-03T17:43:49Z,2017-07-05T05:09:36Z,2017-07-05T05:09:37Z,MERGED,True,170,10,13,https://github.com/Novakov,Boot settings scrubber,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/203,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/203#issuecomment-312702297,This change is,Scrubbing FRAM,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,203,2017-07-03T17:43:49Z,2017-07-05T05:09:36Z,2017-07-05T05:09:37Z,MERGED,True,170,10,13,https://github.com/Novakov,Boot settings scrubber,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/203,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/203#issuecomment-312781625,This change is,"Reviewed 11 of 11 files at r1.
Review status: all files reviewed at latest revision, 2 unresolved discussions, some commit checks failed.

libs/scrubber/Include/scrubber/boot_settings.hpp, line 22 at r1 (raw file):

         * @param bootSettings Boot settings (used for locking)
         */
        BootSettingsScrubber(devices::fm25w::IFM25WDriver& fram, boot::BootSettings& bootSettings)

do not define constructors inline

libs/scrubber/Include/scrubber/boot_settings.hpp, line 34 at r1 (raw file):

      private:
        /** @brief Size of scrubbed area */
        static constexpr std::size_t Size = 16;

shouldn't this value come from boot settings?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,203,2017-07-03T17:43:49Z,2017-07-05T05:09:36Z,2017-07-05T05:09:37Z,MERGED,True,170,10,13,https://github.com/Novakov,Boot settings scrubber,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/203,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/203#issuecomment-312897813,This change is,"Review status: all files reviewed at latest revision, 2 unresolved discussions, some commit checks failed.

libs/scrubber/Include/scrubber/boot_settings.hpp, line 22 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
do not define constructors inline

Done.

libs/scrubber/Include/scrubber/boot_settings.hpp, line 34 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
shouldn't this value come from boot settings?

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,203,2017-07-03T17:43:49Z,2017-07-05T05:09:36Z,2017-07-05T05:09:37Z,MERGED,True,170,10,13,https://github.com/Novakov,Boot settings scrubber,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/203,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/203#issuecomment-312911812,This change is,"Reviewed 4 of 4 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,204,2017-07-03T19:38:48Z,2017-07-06T06:42:09Z,2017-07-06T06:42:10Z,MERGED,True,1324,75,62,https://github.com/zaq32,"Extend telemetry with state of boot reason, gpios, filesystem, time & program ",9,[],https://github.com/PW-Sat2/PWSat2OBC/pull/204,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/204,"In addition there are some small fixes:

update eps telemetry to reflect recent changes.
bug fixes for telemetry serialization: always save entire telemetry regardless whether it has been recently modified or not



This change is","In addition there are some small fixes:

update eps telemetry to reflect recent changes.
bug fixes for telemetry serialization: always save entire telemetry regardless whether it has been recently modified or not



This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,204,2017-07-03T19:38:48Z,2017-07-06T06:42:09Z,2017-07-06T06:42:10Z,MERGED,True,1324,75,62,https://github.com/zaq32,"Extend telemetry with state of boot reason, gpios, filesystem, time & program ",9,[],https://github.com/PW-Sat2/PWSat2OBC/pull/204,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/204#issuecomment-312720778,"In addition there are some small fixes:

update eps telemetry to reflect recent changes.
bug fixes for telemetry serialization: always save entire telemetry regardless whether it has been recently modified or not



This change is",[Telemetry] Add mechanism of gathering the telemetry from obc components,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,204,2017-07-03T19:38:48Z,2017-07-06T06:42:09Z,2017-07-06T06:42:10Z,MERGED,True,1324,75,62,https://github.com/zaq32,"Extend telemetry with state of boot reason, gpios, filesystem, time & program ",9,[],https://github.com/PW-Sat2/PWSat2OBC/pull/204,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/204#issuecomment-313209187,"In addition there are some small fixes:

update eps telemetry to reflect recent changes.
bug fixes for telemetry serialization: always save entire telemetry regardless whether it has been recently modified or not



This change is","Reviewed 63 of 63 files at r1.
Review status: all files reviewed at latest revision, 1 unresolved discussion, some commit checks failed.

libs/obc/hardware/Include/obc/gpio.h, line 100 at r1 (raw file):

        typename TLed1,
        typename TSPI,
#ifdef USE_LEUART

I think we can get rid of LEUART

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,204,2017-07-03T19:38:48Z,2017-07-06T06:42:09Z,2017-07-06T06:42:10Z,MERGED,True,1324,75,62,https://github.com/zaq32,"Extend telemetry with state of boot reason, gpios, filesystem, time & program ",9,[],https://github.com/PW-Sat2/PWSat2OBC/pull/204,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/204#issuecomment-313220828,"In addition there are some small fixes:

update eps telemetry to reflect recent changes.
bug fixes for telemetry serialization: always save entire telemetry regardless whether it has been recently modified or not



This change is","Review status: all files reviewed at latest revision, 1 unresolved discussion, some commit checks failed.

libs/obc/hardware/Include/obc/gpio.h, line 100 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
I think we can get rid of LEUART

Probably, but if we are going to do it, lets do it in separate PR.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,204,2017-07-03T19:38:48Z,2017-07-06T06:42:09Z,2017-07-06T06:42:10Z,MERGED,True,1324,75,62,https://github.com/zaq32,"Extend telemetry with state of boot reason, gpios, filesystem, time & program ",9,[],https://github.com/PW-Sat2/PWSat2OBC/pull/204,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/204#issuecomment-313305592,"In addition there are some small fixes:

update eps telemetry to reflect recent changes.
bug fixes for telemetry serialization: always save entire telemetry regardless whether it has been recently modified or not



This change is","Review status: all files reviewed at latest revision, 1 unresolved discussion, some commit checks failed.

libs/obc/hardware/Include/obc/gpio.h, line 100 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
Probably, but if we are going to do it, lets do it in separate PR.

That's fine

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,204,2017-07-03T19:38:48Z,2017-07-06T06:42:09Z,2017-07-06T06:42:10Z,MERGED,True,1324,75,62,https://github.com/zaq32,"Extend telemetry with state of boot reason, gpios, filesystem, time & program ",9,[],https://github.com/PW-Sat2/PWSat2OBC/pull/204,https://github.com/Novakov,6,https://github.com/PW-Sat2/PWSat2OBC/pull/204#issuecomment-313307807,"In addition there are some small fixes:

update eps telemetry to reflect recent changes.
bug fixes for telemetry serialization: always save entire telemetry regardless whether it has been recently modified or not



This change is","Reviewed 2 of 2 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,205,2017-07-03T19:42:47Z,2017-07-04T16:04:39Z,2017-07-04T16:04:40Z,MERGED,True,36,1,3,https://github.com/Novakov,Support backspace in terminal,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/205,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/205,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,205,2017-07-03T19:42:47Z,2017-07-04T16:04:39Z,2017-07-04T16:04:40Z,MERGED,True,36,1,3,https://github.com/Novakov,Support backspace in terminal,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/205,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/205#issuecomment-312726089,This change is,"Reviewed 3 of 3 files at r1.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

libs/drivers/uart/uart.cpp, line 165 at r1 (raw file):

                        {
                            this->_buffer--;
                        }

consider this:
if (this->_buffer - this->_bufferBegin > 2)
{
    this->_buffer -= 2;
}
else
{
    --this->_buffer;
}

*this->_buffer = '\0';
break;


Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,205,2017-07-03T19:42:47Z,2017-07-04T16:04:39Z,2017-07-04T16:04:40Z,MERGED,True,36,1,3,https://github.com/Novakov,Support backspace in terminal,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/205,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/205#issuecomment-312726347,This change is,"Review status: all files reviewed at latest revision, 2 unresolved discussions.

libs/drivers/uart/uart.cpp, line 15 at r1 (raw file):

    namespace uart
    {
        UART::UART() : _lineEditing(false)

uninitialized members:
_buffer
_bufferEnd
_rxChannel
_txChannel

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,205,2017-07-03T19:42:47Z,2017-07-04T16:04:39Z,2017-07-04T16:04:40Z,MERGED,True,36,1,3,https://github.com/Novakov,Support backspace in terminal,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/205,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/205#issuecomment-312886399,This change is,"Review status: 2 of 3 files reviewed at latest revision, 2 unresolved discussions.

libs/drivers/uart/uart.cpp, line 15 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
uninitialized members:
_buffer
_bufferEnd
_rxChannel
_txChannel

Done.

libs/drivers/uart/uart.cpp, line 165 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
consider this:
if (this->_buffer - this->_bufferBegin > 2)
{
    this->_buffer -= 2;
}
else
{
    --this->_buffer;
}

*this->_buffer = '\0';
break;


Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,205,2017-07-03T19:42:47Z,2017-07-04T16:04:39Z,2017-07-04T16:04:40Z,MERGED,True,36,1,3,https://github.com/Novakov,Support backspace in terminal,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/205,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/205#issuecomment-312911671,This change is,"Reviewed 1 of 1 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,206,2017-07-06T14:01:11Z,2017-07-08T15:14:44Z,2017-07-08T15:14:45Z,MERGED,True,8416,48,49,https://github.com/mandrek44,OBC Emulator,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/206,https://github.com/mandrek44,1,https://github.com/PW-Sat2/PWSat2OBC/pull/206,"emulator (available with pyconsole target)
time-related commands use timedelta
additional SWO logs



This change is","emulator (available with pyconsole target)
time-related commands use timedelta
additional SWO logs



This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,206,2017-07-06T14:01:11Z,2017-07-08T15:14:44Z,2017-07-08T15:14:45Z,MERGED,True,8416,48,49,https://github.com/mandrek44,OBC Emulator,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/206,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/206#issuecomment-313847294,"emulator (available with pyconsole target)
time-related commands use timedelta
additional SWO logs



This change is","Reviewed 7 of 47 files at r1, 1 of 3 files at r2.
Review status: 8 of 49 files reviewed at latest revision, 1 unresolved discussion, some commit checks failed.

integration_tests/devices/comm.py, line 264 at r2 (raw file):

    self.current_beacon = data[3:]
    self.current_beacon_timestamp = time.localtime()


This should be executed only if the on_set_beacon hook allows it

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,206,2017-07-06T14:01:11Z,2017-07-08T15:14:44Z,2017-07-08T15:14:45Z,MERGED,True,8416,48,49,https://github.com/mandrek44,OBC Emulator,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/206,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/206#issuecomment-313847516,"emulator (available with pyconsole target)
time-related commands use timedelta
additional SWO logs



This change is","Reviewed 13 of 47 files at r1, 2 of 3 files at r2.
Review status: 23 of 49 files reviewed at latest revision, 2 unresolved discussions, some commit checks failed.

src/commands/time.cpp, line 22 at r2 (raw file):

    char* tail;
    const auto targetTime = milliseconds(strtoul(argv[0], &tail, 10));

I hope you've updated all the tests as well

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,206,2017-07-06T14:01:11Z,2017-07-08T15:14:44Z,2017-07-08T15:14:45Z,MERGED,True,8416,48,49,https://github.com/mandrek44,OBC Emulator,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/206,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/206#issuecomment-313847750,"emulator (available with pyconsole target)
time-related commands use timedelta
additional SWO logs



This change is","Reviewed 19 of 47 files at r1.
Review status: 42 of 49 files reviewed at latest revision, 4 unresolved discussions, some commit checks failed.

integration_tests/emulator/beacon_parser/controller_a_telemetry_parser.py, line 4 at r2 (raw file):

class ControllerATelemetryParser(Parser):

The name should indicate that it is part of eps telemetry

integration_tests/emulator/beacon_parser/controller_b_telemetry_parser.py, line 4 at r2 (raw file):

class ControllerBTelemetryParser(Parser):

the name should indicate that it is part of eps telemetry

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,206,2017-07-06T14:01:11Z,2017-07-08T15:14:44Z,2017-07-08T15:14:45Z,MERGED,True,8416,48,49,https://github.com/mandrek44,OBC Emulator,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/206,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/206#issuecomment-313849729,"emulator (available with pyconsole target)
time-related commands use timedelta
additional SWO logs



This change is","Review status: 42 of 49 files reviewed at latest revision, 4 unresolved discussions, some commit checks failed.

integration_tests/devices/comm.py, line 264 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote

    self.current_beacon = data[3:]
    self.current_beacon_timestamp = time.localtime()


This should be executed only if the on_set_beacon hook allows it

Done

integration_tests/emulator/beacon_parser/controller_a_telemetry_parser.py, line 4 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
The name should indicate that it is part of eps telemetry

Done

integration_tests/emulator/beacon_parser/controller_b_telemetry_parser.py, line 4 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
the name should indicate that it is part of eps telemetry

Done

src/commands/time.cpp, line 22 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
I hope you've updated all the tests as well

All OBC time-related commands are now using timedelta parameters which are formeted to milliseconds

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,206,2017-07-06T14:01:11Z,2017-07-08T15:14:44Z,2017-07-08T15:14:45Z,MERGED,True,8416,48,49,https://github.com/mandrek44,OBC Emulator,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/206,https://github.com/zaq32,6,https://github.com/PW-Sat2/PWSat2OBC/pull/206#issuecomment-313861738,"emulator (available with pyconsole target)
time-related commands use timedelta
additional SWO logs



This change is","Reviewed 6 of 49 files at r1, 11 of 11 files at r3.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,207,2017-07-08T16:20:22Z,2017-07-08T16:29:19Z,2017-07-08T16:29:20Z,MERGED,True,181,138,24,https://github.com/Novakov,Ability to run test suite in single restart,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/207,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/207,"Small improvment that allows run whole Python test suite in single restart


This change is","Small improvment that allows run whole Python test suite in single restart


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,207,2017-07-08T16:20:22Z,2017-07-08T16:29:19Z,2017-07-08T16:29:20Z,MERGED,True,181,138,24,https://github.com/Novakov,Ability to run test suite in single restart,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/207,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/207#issuecomment-313866218,"Small improvment that allows run whole Python test suite in single restart


This change is","Reviewed 24 of 24 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,208,2017-07-08T18:23:59Z,2017-07-13T08:46:14Z,2017-07-13T08:46:16Z,MERGED,True,895,276,33,https://github.com/Novakov,Updated sail opening procedure,10,[],https://github.com/PW-Sat2/PWSat2OBC/pull/208,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/208,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,208,2017-07-08T18:23:59Z,2017-07-13T08:46:14Z,2017-07-13T08:46:16Z,MERGED,True,895,276,33,https://github.com/Novakov,Updated sail opening procedure,10,[],https://github.com/PW-Sat2/PWSat2OBC/pull/208,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/208#issuecomment-314523440,This change is,"Reviewed 30 of 30 files at r1.
Review status: all files reviewed at latest revision, 2 unresolved discussions.

libs/mission/sail/sail.cpp, line 147 at r1 (raw file):

            if (step.AfterStepDelay != decltype(step.AfterStepDelay)::zero())
            {
                This->_nextStepAfter = state.Time + step.AfterStepDelay;

adding anything to max will cause an overflow in this case signed integer overflow (undefined behaviour by standard) In our case it will case This->_nextStepAfter to be negative

libs/state/Include/state/sail/SailState.hpp, line 31 at r1 (raw file):

         * @brief Ctor
         */
        SailState() : _currentState(SailOpeningState::Waiting)

Define class methods outside class definition

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,208,2017-07-08T18:23:59Z,2017-07-13T08:46:14Z,2017-07-13T08:46:16Z,MERGED,True,895,276,33,https://github.com/Novakov,Updated sail opening procedure,10,[],https://github.com/PW-Sat2/PWSat2OBC/pull/208,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/208#issuecomment-314818906,This change is,"Review status: 28 of 32 files reviewed at latest revision, 2 unresolved discussions.

libs/mission/sail/sail.cpp, line 147 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
adding anything to max will cause an overflow in this case signed integer overflow (undefined behaviour by standard) In our case it will case This->_nextStepAfter to be negative

Done.

libs/state/Include/state/sail/SailState.hpp, line 31 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
Define class methods outside class definition

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,208,2017-07-08T18:23:59Z,2017-07-13T08:46:14Z,2017-07-13T08:46:16Z,MERGED,True,895,276,33,https://github.com/Novakov,Updated sail opening procedure,10,[],https://github.com/PW-Sat2/PWSat2OBC/pull/208,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/208#issuecomment-314988221,This change is,"Reviewed 7 of 7 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,208,2017-07-08T18:23:59Z,2017-07-13T08:46:14Z,2017-07-13T08:46:16Z,MERGED,True,895,276,33,https://github.com/Novakov,Updated sail opening procedure,10,[],https://github.com/PW-Sat2/PWSat2OBC/pull/208,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/208#issuecomment-315013546,This change is,"Reviewed 2 of 2 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,209,2017-07-10T13:49:57Z,2017-07-10T19:38:51Z,2017-07-10T19:38:52Z,MERGED,True,445,8,30,https://github.com/Novakov,Safe mode,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/209,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/209,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,209,2017-07-10T13:49:57Z,2017-07-10T19:38:51Z,2017-07-10T19:38:52Z,MERGED,True,445,8,30,https://github.com/Novakov,Safe mode,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/209,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/209#issuecomment-314212255,This change is,"Reviewed 34 of 34 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,210,2017-07-13T13:13:17Z,2017-08-11T13:59:09Z,2017-08-11T13:59:10Z,MERGED,True,332,9,16,https://github.com/kfazi,[TeleComm] Added SetTime telecommand,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/210,https://github.com/kfazi,1,https://github.com/PW-Sat2/PWSat2OBC/pull/210,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,210,2017-07-13T13:13:17Z,2017-08-11T13:59:09Z,2017-08-11T13:59:10Z,MERGED,True,332,9,16,https://github.com/kfazi,[TeleComm] Added SetTime telecommand,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/210,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/210#issuecomment-315133903,This change is,"Reviewed 13 of 13 files at r1.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

libs/obc/communication/telecommands/time.cpp, line 68 at r1 (raw file):

        }

        void SetTimeTelecommand::Handle(devices::comm::ITransmitter& transmitter, gsl::span<const std::uint8_t> parameters)

From technical standpoint this function is very much correct but there is a conceptual problem here....
And it will surface when time synchronization task will be executed concurrently to this telecommand, which can result in changes done by this telecommand being completely overwritten by time synchronization task while GS would still receive response indicating a success.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,210,2017-07-13T13:13:17Z,2017-08-11T13:59:09Z,2017-08-11T13:59:10Z,MERGED,True,332,9,16,https://github.com/kfazi,[TeleComm] Added SetTime telecommand,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/210,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/210#issuecomment-317324439,This change is,"Reviewed 12 of 12 files at r2.
Review status: all files reviewed at latest revision, 5 unresolved discussions, some commit checks failed.

libs/obc/communication/telecommands/time.cpp, line 97 at r2 (raw file):

                response.PayloadWriter().WriteByte(-1);
                transmitter.SendFrame(response.Frame());
                return;

Time Synchronization  is still locked in here. Use RAII wrapper (preferably Lock type itself)  to control synchronization  scope

libs/obc/communication/telecommands/time.cpp, line 114 at r2 (raw file):

                response.PayloadWriter().WriteByte(-2);
                transmitter.SendFrame(response.Frame());
                return;

Time Synchronization  is still locked in here. Use RAII wrapper (preferably Lock type itself)  to control synchronization  scope

libs/obc/communication/telecommands/time.cpp, line 123 at r2 (raw file):

                response.PayloadWriter().WriteByte(-3);
                transmitter.SendFrame(response.Frame());
                return;

Time Synchronization  is still locked in here. Use RAII wrapper (preferably Lock type itself)  to control synchronization  scope

unit_tests/communication/Telecommands/SetTimeTelecommandTest.cpp, line 50 at r2 (raw file):

    };

    SetTimeTelecommandTest::SetTimeTelecommandTest()

Perhaps some synchronization tests?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,210,2017-07-13T13:13:17Z,2017-08-11T13:59:09Z,2017-08-11T13:59:10Z,MERGED,True,332,9,16,https://github.com/kfazi,[TeleComm] Added SetTime telecommand,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/210,https://github.com/kfazi,4,https://github.com/PW-Sat2/PWSat2OBC/pull/210#issuecomment-321775734,This change is,"Review status: 5 of 16 files reviewed at latest revision, 5 unresolved discussions, some commit checks failed.

libs/obc/communication/telecommands/time.cpp, line 68 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
From technical standpoint this function is very much correct but there is a conceptual problem here....
And it will surface when time synchronization task will be executed concurrently to this telecommand, which can result in changes done by this telecommand being completely overwritten by time synchronization task while GS would still receive response indicating a success.

Done.

libs/obc/communication/telecommands/time.cpp, line 97 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
Time Synchronization  is still locked in here. Use RAII wrapper (preferably Lock type itself)  to control synchronization  scope

Done.

libs/obc/communication/telecommands/time.cpp, line 114 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
Time Synchronization  is still locked in here. Use RAII wrapper (preferably Lock type itself)  to control synchronization  scope

Done.

libs/obc/communication/telecommands/time.cpp, line 123 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
Time Synchronization  is still locked in here. Use RAII wrapper (preferably Lock type itself)  to control synchronization  scope

Done.

unit_tests/communication/Telecommands/SetTimeTelecommandTest.cpp, line 50 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
Perhaps some synchronization tests?

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,210,2017-07-13T13:13:17Z,2017-08-11T13:59:09Z,2017-08-11T13:59:10Z,MERGED,True,332,9,16,https://github.com/kfazi,[TeleComm] Added SetTime telecommand,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/210,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/210#issuecomment-321781123,This change is,"Reviewed 10 of 11 files at r3.
Review status: 15 of 16 files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,210,2017-07-13T13:13:17Z,2017-08-11T13:59:09Z,2017-08-11T13:59:10Z,MERGED,True,332,9,16,https://github.com/kfazi,[TeleComm] Added SetTime telecommand,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/210,https://github.com/zaq32,6,https://github.com/PW-Sat2/PWSat2OBC/pull/210#issuecomment-321807329,This change is,"Reviewed 11 of 11 files at r4.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,211,2017-07-13T16:57:47Z,2017-07-22T21:57:06Z,2017-07-22T21:57:07Z,MERGED,True,836,408,53,https://github.com/Novakov,Flatsat tools,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/211,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/211,"This pull requests adds:

Buliding additional platforms on CI builds
Basic set of tools for working with OBC on flatsat (flashing, running integration tests)
Copying build artifacts to flatsat OBC computer

More tools will come in future


This change is","This pull requests adds:

Buliding additional platforms on CI builds
Basic set of tools for working with OBC on flatsat (flashing, running integration tests)
Copying build artifacts to flatsat OBC computer

More tools will come in future


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,211,2017-07-13T16:57:47Z,2017-07-22T21:57:06Z,2017-07-22T21:57:07Z,MERGED,True,836,408,53,https://github.com/Novakov,Flatsat tools,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/211,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/211#issuecomment-315139020,"This pull requests adds:

Buliding additional platforms on CI builds
Basic set of tools for working with OBC on flatsat (flashing, running integration tests)
Copying build artifacts to flatsat OBC computer

More tools will come in future


This change is",Tools for working with flatsat,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,211,2017-07-13T16:57:47Z,2017-07-22T21:57:06Z,2017-07-22T21:57:07Z,MERGED,True,836,408,53,https://github.com/Novakov,Flatsat tools,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/211,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/211#issuecomment-315608632,"This pull requests adds:

Buliding additional platforms on CI builds
Basic set of tools for working with OBC on flatsat (flashing, running integration tests)
Copying build artifacts to flatsat OBC computer

More tools will come in future


This change is","Reviewed 9 of 9 files at r1, 45 of 45 files at r2.
Review status: all files reviewed at latest revision, 3 unresolved discussions, some commit checks failed.

flatsat_tools/test.txt, line 1 at r2 (raw file):

sfsf


what is the purpose of this?

libs/boot_settings/Include/boot/fwd.hpp, line 4 at r2 (raw file):

#define LIBS_BOOT_SETTINGS_INCLUDE_BOOT_FWD_HPP_

#include <cstdint>

size_t is defined in cstddef

src/obc.h, line 147 at r2 (raw file):

using ExternalWatchdog = drivers::watchdog::PinWatchdog<io_map::Watchdog::ExternalWatchdogPin>;

void X4();

??

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,211,2017-07-13T16:57:47Z,2017-07-22T21:57:06Z,2017-07-22T21:57:07Z,MERGED,True,836,408,53,https://github.com/Novakov,Flatsat tools,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/211,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/211#issuecomment-317203077,"This pull requests adds:

Buliding additional platforms on CI builds
Basic set of tools for working with OBC on flatsat (flashing, running integration tests)
Copying build artifacts to flatsat OBC computer

More tools will come in future


This change is","Review status: 49 of 53 files reviewed at latest revision, 3 unresolved discussions.

libs/boot_settings/Include/boot/fwd.hpp, line 4 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
size_t is defined in cstddef

Done.

flatsat_tools/test.txt, line 1 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
what is the purpose of this?

Done.

src/obc.h, line 147 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
??

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,211,2017-07-13T16:57:47Z,2017-07-22T21:57:06Z,2017-07-22T21:57:07Z,MERGED,True,836,408,53,https://github.com/Novakov,Flatsat tools,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/211,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/211#issuecomment-317213034,"This pull requests adds:

Buliding additional platforms on CI builds
Basic set of tools for working with OBC on flatsat (flashing, running integration tests)
Copying build artifacts to flatsat OBC computer

More tools will come in future


This change is","Reviewed 6 of 6 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,212,2017-07-13T18:40:22Z,2017-07-14T20:17:12Z,2017-07-14T20:17:13Z,MERGED,True,226,7,12,https://github.com/Novakov,Power cycle telecommand,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/212,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/212,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,212,2017-07-13T18:40:22Z,2017-07-14T20:17:12Z,2017-07-14T20:17:13Z,MERGED,True,226,7,12,https://github.com/Novakov,Power cycle telecommand,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/212,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/212#issuecomment-315166138,This change is,[TC] Power Cycle,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,212,2017-07-13T18:40:22Z,2017-07-14T20:17:12Z,2017-07-14T20:17:13Z,MERGED,True,226,7,12,https://github.com/Novakov,Power cycle telecommand,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/212,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/212#issuecomment-315457190,This change is,"Reviewed 12 of 12 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,213,2017-07-14T15:58:05Z,2017-07-22T13:59:50Z,2017-07-22T13:59:52Z,MERGED,True,305,43,6,https://github.com/zaq32,Updated antenna deployment algorithm,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/213,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/213,"Harden antenna deployment against situation when hardware either does not respond at all or tries to lie and consistently insists that deployment process is always in progress.


This change is","Harden antenna deployment against situation when hardware either does not respond at all or tries to lie and consistently insists that deployment process is always in progress.


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,213,2017-07-14T15:58:05Z,2017-07-22T13:59:50Z,2017-07-22T13:59:52Z,MERGED,True,305,43,6,https://github.com/zaq32,Updated antenna deployment algorithm,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/213,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/213#issuecomment-315397395,"Harden antenna deployment against situation when hardware either does not respond at all or tries to lie and consistently insists that deployment process is always in progress.


This change is",[BUG] Antenna deployment does not proceed to next step when antenna controller hangs,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,213,2017-07-14T15:58:05Z,2017-07-22T13:59:50Z,2017-07-22T13:59:52Z,MERGED,True,305,43,6,https://github.com/zaq32,Updated antenna deployment algorithm,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/213,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/213#issuecomment-317176245,"Harden antenna deployment against situation when hardware either does not respond at all or tries to lie and consistently insists that deployment process is always in progress.


This change is","Tested: looks fine

Reviewed 6 of 6 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,214,2017-07-16T13:08:11Z,2017-07-27T19:47:40Z,2017-07-27T19:47:42Z,MERGED,True,420,374,33,https://github.com/zaq32,Extend telemetry with support for memory scrubbing,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/214,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/214,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,214,2017-07-16T13:08:11Z,2017-07-27T19:47:40Z,2017-07-27T19:47:42Z,MERGED,True,420,374,33,https://github.com/zaq32,Extend telemetry with support for memory scrubbing,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/214,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/214#issuecomment-315608822,This change is,[Telemetry] Add mechanism of gathering the telemetry from obc components,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,214,2017-07-16T13:08:11Z,2017-07-27T19:47:40Z,2017-07-27T19:47:42Z,MERGED,True,420,374,33,https://github.com/zaq32,Extend telemetry with support for memory scrubbing,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/214,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/214#issuecomment-317854971,This change is,"Reviewed 30 of 33 files at r1, 3 of 3 files at r2.
Review status: all files reviewed at latest revision, 2 unresolved discussions, some commit checks failed.

integration_tests/emulator/beacon_parser/scrubbing_telemetry_parser.py, line 9 at r2 (raw file):

    def get_bit_count(self):
        return 32 + 32 + 32

Shouldn't it be 32 + 3 + 3?

libs/scrubber/Include/scrubber/ram.hpp, line 77 at r2 (raw file):

        BUS_RegBitWrite(&DMA->CHREQMASKS, 3, 1);

        std::uint32_t* start = _current;

In this interrupt handler every microsecond counts. 32-bit reads/writes are atomic so there is no need for explicit atomic.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,214,2017-07-16T13:08:11Z,2017-07-27T19:47:40Z,2017-07-27T19:47:42Z,MERGED,True,420,374,33,https://github.com/zaq32,Extend telemetry with support for memory scrubbing,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/214,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/214#issuecomment-318459548,This change is,"Review status: 27 of 33 files reviewed at latest revision, 2 unresolved discussions.

integration_tests/emulator/beacon_parser/scrubbing_telemetry_parser.py, line 9 at r2 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Shouldn't it be 32 + 3 + 3?

Right.

libs/scrubber/Include/scrubber/ram.hpp, line 77 at r2 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
In this interrupt handler every microsecond counts. 32-bit reads/writes are atomic so there is no need for explicit atomic.

Updated.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,214,2017-07-16T13:08:11Z,2017-07-27T19:47:40Z,2017-07-27T19:47:42Z,MERGED,True,420,374,33,https://github.com/zaq32,Extend telemetry with support for memory scrubbing,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/214,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/214#issuecomment-318461395,This change is,"Reviewed 6 of 6 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,215,2017-07-19T17:38:05Z,2017-07-20T17:14:21Z,2017-07-20T17:14:22Z,MERGED,True,38,21,3,https://github.com/tom4r,Fixed infinite lock and semaphore leak on Persistent State.,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/215,https://github.com/tom4r,1,https://github.com/PW-Sat2/PWSat2OBC/pull/215,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,215,2017-07-19T17:38:05Z,2017-07-20T17:14:21Z,2017-07-20T17:14:22Z,MERGED,True,38,21,3,https://github.com/tom4r,Fixed infinite lock and semaphore leak on Persistent State.,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/215,https://github.com/tom4r,2,https://github.com/PW-Sat2/PWSat2OBC/pull/215#issuecomment-316467110,This change is,Request halted - will be resolved by other solution.,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,215,2017-07-19T17:38:05Z,2017-07-20T17:14:21Z,2017-07-20T17:14:22Z,MERGED,True,38,21,3,https://github.com/tom4r,Fixed infinite lock and semaphore leak on Persistent State.,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/215,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/215#issuecomment-316648684,This change is,"Reviewed 2 of 3 files at r1.
Review status: 2 of 3 files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,215,2017-07-19T17:38:05Z,2017-07-20T17:14:21Z,2017-07-20T17:14:22Z,MERGED,True,38,21,3,https://github.com/tom4r,Fixed infinite lock and semaphore leak on Persistent State.,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/215,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/215#issuecomment-316650846,This change is,"Reviewed 1 of 3 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,215,2017-07-19T17:38:05Z,2017-07-20T17:14:21Z,2017-07-20T17:14:22Z,MERGED,True,38,21,3,https://github.com/tom4r,Fixed infinite lock and semaphore leak on Persistent State.,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/215,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/215#issuecomment-316651969,This change is,"Reviewed 1 of 1 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,216,2017-07-20T09:23:32Z,2017-07-24T17:41:50Z,2017-07-24T17:41:51Z,MERGED,True,102,42,14,https://github.com/mandrek44,N25q tmr error counters,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/216,https://github.com/mandrek44,1,https://github.com/PW-Sat2/PWSat2OBC/pull/216,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,216,2017-07-20T09:23:32Z,2017-07-24T17:41:50Z,2017-07-24T17:41:51Z,MERGED,True,102,42,14,https://github.com/mandrek44,N25q tmr error counters,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/216,https://github.com/mandrek44,2,https://github.com/PW-Sat2/PWSat2OBC/pull/216#issuecomment-316648451,This change is,[N25Q] TMR Error Counters,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,216,2017-07-20T09:23:32Z,2017-07-24T17:41:50Z,2017-07-24T17:41:51Z,MERGED,True,102,42,14,https://github.com/mandrek44,N25q tmr error counters,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/216,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/216#issuecomment-316651388,This change is,"Reviewed 8 of 8 files at r1, 6 of 6 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,216,2017-07-20T09:23:32Z,2017-07-24T17:41:50Z,2017-07-24T17:41:51Z,MERGED,True,102,42,14,https://github.com/mandrek44,N25q tmr error counters,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/216,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/216#issuecomment-317484653,This change is,"Reviewed 3 of 3 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,217,2017-07-20T14:16:31Z,2017-08-02T18:32:45Z,2017-08-02T18:32:46Z,MERGED,True,486,362,14,https://github.com/mandrek44,"Renamed UART to UART_1, added pinout for UART_0, refactored Uart drive",1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/217,https://github.com/mandrek44,1,https://github.com/PW-Sat2/PWSat2OBC/pull/217,"... to support different ports


This change is","... to support different ports


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,217,2017-07-20T14:16:31Z,2017-08-02T18:32:45Z,2017-08-02T18:32:46Z,MERGED,True,486,362,14,https://github.com/mandrek44,"Renamed UART to UART_1, added pinout for UART_0, refactored Uart drive",1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/217,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/217#issuecomment-316757223,"... to support different ports


This change is","Reviewed 12 of 12 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,217,2017-07-20T14:16:31Z,2017-08-02T18:32:45Z,2017-08-02T18:32:46Z,MERGED,True,486,362,14,https://github.com/mandrek44,"Renamed UART to UART_1, added pinout for UART_0, refactored Uart drive",1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/217,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/217#issuecomment-318127850,"... to support different ports


This change is","Reviewed 8 of 8 files at r2.
Review status: all files reviewed at latest revision, 2 unresolved discussions.

libs/drivers/uart/Include/uart/uart.hpp, line 284 at r2 (raw file):

                this);

            _event.WaitAll(Event::TransferRXFinished, true, InfiniteTimeout);

It maybe worth putting some timeout here as it is possible to loose some of incoming bytes.

libs/obc/hardware/hardware.cpp, line 65 at r2 (raw file):

    this->I2C.Initialize();

#ifndef USE_LEUART

I guess we ca remove usage of that not defined define :)

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,217,2017-07-20T14:16:31Z,2017-08-02T18:32:45Z,2017-08-02T18:32:46Z,MERGED,True,486,362,14,https://github.com/mandrek44,"Renamed UART to UART_1, added pinout for UART_0, refactored Uart drive",1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/217,https://github.com/mandrek44,4,https://github.com/PW-Sat2/PWSat2OBC/pull/217#issuecomment-318711739,"... to support different ports


This change is","Review status: 10 of 14 files reviewed at latest revision, 2 unresolved discussions.

libs/drivers/uart/Include/uart/uart.hpp, line 284 at r2 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
It maybe worth putting some timeout here as it is possible to loose some of incoming bytes.

Done.

libs/obc/hardware/hardware.cpp, line 65 at r2 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
I guess we ca remove usage of that not defined define :)

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,217,2017-07-20T14:16:31Z,2017-08-02T18:32:45Z,2017-08-02T18:32:46Z,MERGED,True,486,362,14,https://github.com/mandrek44,"Renamed UART to UART_1, added pinout for UART_0, refactored Uart drive",1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/217,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/217#issuecomment-318745367,"... to support different ports


This change is","Reviewed 4 of 8 files at r2, 4 of 4 files at r3.
Review status: all files reviewed at latest revision, 2 unresolved discussions, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,218,2017-07-20T17:18:39Z,2017-07-20T18:05:23Z,2017-07-20T18:05:24Z,MERGED,True,638,212,19,https://github.com/Novakov,Stranger things: DMA transfers hanging,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/218,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/218,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,218,2017-07-20T17:18:39Z,2017-07-20T18:05:23Z,2017-07-20T18:05:24Z,MERGED,True,638,212,19,https://github.com/Novakov,Stranger things: DMA transfers hanging,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/218,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/218#issuecomment-316773337,This change is,"Reviewed 19 of 19 files at r1.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

test/flash/main.cpp, line 94 at r1 (raw file):

    //    LOGF(LOG_LEVEL_INFO, ""Reset: %d"", num(r));

    //    while (true)

remove this

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,218,2017-07-20T17:18:39Z,2017-07-20T18:05:23Z,2017-07-20T18:05:24Z,MERGED,True,638,212,19,https://github.com/Novakov,Stranger things: DMA transfers hanging,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/218,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/218#issuecomment-316777669,This change is,"Review status: all files reviewed at latest revision, 1 unresolved discussion.

test/flash/main.cpp, line 94 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
remove this

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,218,2017-07-20T17:18:39Z,2017-07-20T18:05:23Z,2017-07-20T18:05:24Z,MERGED,True,638,212,19,https://github.com/Novakov,Stranger things: DMA transfers hanging,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/218,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/218#issuecomment-316780189,This change is,"Reviewed 1 of 1 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,219,2017-07-22T10:35:29Z,2017-07-22T12:04:00Z,2017-07-22T12:04:01Z,MERGED,True,19,3,4,https://github.com/Novakov,Fix race condition between OBC start and I2C mock start,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/219,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/219,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,219,2017-07-22T10:35:29Z,2017-07-22T12:04:00Z,2017-07-22T12:04:01Z,MERGED,True,19,3,4,https://github.com/Novakov,Fix race condition between OBC start and I2C mock start,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/219,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/219#issuecomment-317179016,This change is,"Reviewed 4 of 4 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,220,2017-07-22T18:20:03Z,2017-07-25T20:14:52Z,2017-07-25T20:14:54Z,MERGED,True,659,81,36,https://github.com/Novakov,Control antenna LCL during antenna deployment process,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/220,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/220,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,220,2017-07-22T18:20:03Z,2017-07-25T20:14:52Z,2017-07-25T20:14:54Z,MERGED,True,659,81,36,https://github.com/Novakov,Control antenna LCL during antenna deployment process,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/220,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/220#issuecomment-317323922,This change is,"Reviewed 28 of 28 files at r1.
Review status: all files reviewed at latest revision, 4 unresolved discussions, some commit checks failed.

libs/mission/antenna/antenna.cpp, line 470 at r1 (raw file):

            else
            {
                stateDescriptor.Retry(StepRetryLimit, GetTimeout(step));

This is a bit tricky. in case of obc being unable to power on the antenna controller half of the deployment procedure will not work at all and it will only generate a lot of false errors and slow down the process.

libs/mission/antenna/Include/mission/antenna_state.h, line 9 at r1 (raw file):

#include ""base/os.h""
#include ""mission/base.hpp""
#include ""power/power.h""

full IPowerControl interface definition is not needed here

libs/mission/antenna/Include/mission/antenna_task.hpp, line 21 at r1 (raw file):

         * @ingroup mission_atenna
         */
        struct IAntennaTelemetryProvider

I'd move the definition of this interface to the antenna driver module event if implementation is not done there.

src/obc.cpp, line 157 at r1 (raw file):

    }

    static_cast<mission::antenna::AntennaTask&>(Mission).Initialize();

Reduntant call. All mission elements are initialized during mission initialization.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,220,2017-07-22T18:20:03Z,2017-07-25T20:14:52Z,2017-07-25T20:14:54Z,MERGED,True,659,81,36,https://github.com/Novakov,Control antenna LCL during antenna deployment process,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/220,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/220#issuecomment-317820168,This change is,"Review status: 12 of 32 files reviewed at latest revision, 4 unresolved discussions.

libs/mission/antenna/antenna.cpp, line 470 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
This is a bit tricky. in case of obc being unable to power on the antenna controller half of the deployment procedure will not work at all and it will only generate a lot of false errors and slow down the process.

Updates as discussed - check LCL during deployment

libs/mission/antenna/Include/mission/antenna_state.h, line 9 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
full IPowerControl interface definition is not needed here

Done.

libs/mission/antenna/Include/mission/antenna_task.hpp, line 21 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
I'd move the definition of this interface to the antenna driver module event if implementation is not done there.

Done.

src/obc.cpp, line 157 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
Reduntant call. All mission elements are initialized during mission initialization.

They are now :)

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,220,2017-07-22T18:20:03Z,2017-07-25T20:14:52Z,2017-07-25T20:14:54Z,MERGED,True,659,81,36,https://github.com/Novakov,Control antenna LCL during antenna deployment process,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/220,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/220#issuecomment-317826898,This change is,"Reviewed 21 of 21 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,220,2017-07-22T18:20:03Z,2017-07-25T20:14:52Z,2017-07-25T20:14:54Z,MERGED,True,659,81,36,https://github.com/Novakov,Control antenna LCL during antenna deployment process,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/220,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/220#issuecomment-317858504,This change is,"Reviewed 5 of 5 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,221,2017-07-24T16:13:53Z,2017-07-27T17:16:00Z,2017-07-27T17:16:02Z,MERGED,True,980,48,41,https://github.com/Novakov,Power cycle on error limit,9,[],https://github.com/PW-Sat2/PWSat2OBC/pull/221,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/221,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,221,2017-07-24T16:13:53Z,2017-07-27T17:16:00Z,2017-07-27T17:16:02Z,MERGED,True,980,48,41,https://github.com/Novakov,Power cycle on error limit,9,[],https://github.com/PW-Sat2/PWSat2OBC/pull/221,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/221#issuecomment-317484457,This change is,"Reviewed 41 of 41 files at r1.
Review status: all files reviewed at latest revision, 1 unresolved discussion, some commit checks failed.

toolchain.cmake, line 37 at r1 (raw file):

set(CMAKE_EXECUTABLE_FORMAT ELF)

if(${CMAKE_GENERATOR} STREQUAL ""MinGW Makefiles"")

I am also using ""Unix Makefiles""

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,221,2017-07-24T16:13:53Z,2017-07-27T17:16:00Z,2017-07-27T17:16:02Z,MERGED,True,980,48,41,https://github.com/Novakov,Power cycle on error limit,9,[],https://github.com/PW-Sat2/PWSat2OBC/pull/221,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/221#issuecomment-317489131,This change is,"Review status: all files reviewed at latest revision, 1 unresolved discussion, some commit checks failed.

toolchain.cmake, line 37 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
I am also using ""Unix Makefiles""

And it will (should?) work. MinGW Makefiles looks for mingw32-make.exe as make program however our toolchain contains make.exe

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,221,2017-07-24T16:13:53Z,2017-07-27T17:16:00Z,2017-07-27T17:16:02Z,MERGED,True,980,48,41,https://github.com/Novakov,Power cycle on error limit,9,[],https://github.com/PW-Sat2/PWSat2OBC/pull/221,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/221#issuecomment-318414063,This change is,"Reviewed 5 of 5 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,221,2017-07-24T16:13:53Z,2017-07-27T17:16:00Z,2017-07-27T17:16:02Z,MERGED,True,980,48,41,https://github.com/Novakov,Power cycle on error limit,9,[],https://github.com/PW-Sat2/PWSat2OBC/pull/221,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/221#issuecomment-318420185,This change is,"Reviewed 2 of 2 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,222,2017-07-24T16:18:58Z,2017-07-24T16:36:39Z,2017-07-24T16:36:41Z,MERGED,True,6775,1,4,https://github.com/tom4r,Payload emulator,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/222,https://github.com/tom4r,1,https://github.com/PW-Sat2/PWSat2OBC/pull/222,"Extending the emulator by Payload controls.


This change is","Extending the emulator by Payload controls.


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,222,2017-07-24T16:18:58Z,2017-07-24T16:36:39Z,2017-07-24T16:36:41Z,MERGED,True,6775,1,4,https://github.com/tom4r,Payload emulator,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/222,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/222#issuecomment-317479983,"Extending the emulator by Payload controls.


This change is","Reviewed 4 of 4 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,223,2017-07-24T19:01:38Z,2017-07-24T19:12:36Z,2017-07-24T19:12:38Z,MERGED,True,71,32,9,https://github.com/tom4r,Payload errorcounters,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/223,https://github.com/tom4r,1,https://github.com/PW-Sat2/PWSat2OBC/pull/223,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,223,2017-07-24T19:01:38Z,2017-07-24T19:12:36Z,2017-07-24T19:12:38Z,MERGED,True,71,32,9,https://github.com/tom4r,Payload errorcounters,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/223,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/223#issuecomment-317525229,This change is,"Reviewed 10 of 10 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,224,2017-07-24T19:21:20Z,2017-08-11T15:04:21Z,2017-08-11T15:04:50Z,MERGED,True,492,33,11,https://github.com/kfazi,[TeleComm] Added raw I2C telecommand,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/224,https://github.com/kfazi,1,https://github.com/PW-Sat2/PWSat2OBC/pull/224,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,224,2017-07-24T19:21:20Z,2017-08-11T15:04:21Z,2017-08-11T15:04:50Z,MERGED,True,492,33,11,https://github.com/kfazi,[TeleComm] Added raw I2C telecommand,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/224,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/224#issuecomment-317533447,This change is,"Reviewed 11 of 11 files at r1.
Review status: all files reviewed at latest revision, 3 unresolved discussions, some commit checks failed.

libs/obc/communication/telecommands/i2c.cpp, line 26 at r1 (raw file):

            auto correlationId = r.ReadByte();
            auto address = r.ReadByte();
            auto data = r.ReadToEnd();

verify reader status.

libs/obc/communication/telecommands/i2c.cpp, line 37 at r1 (raw file):

            std::fill(responseBuf.begin(), responseBuf.end(), 0);

            auto result = this->i2cBus.WriteRead(address, data, responseBuf);

since some of the devices do not work with combined write/read transaction it would be better to use separated read/write operations with some delay in between (preferably parametrized)

libs/obc/communication/telecommands/Include/obc/telecommands/i2c.hpp, line 24 at r1 (raw file):

         *  - Array of 8-bit - Data to send to I2C bus
         */
        class RawI2CTelecommand final : public telecommunication::uplink::Telecommand<0x80>

ideally we would like to be able to access selected i2c bus - either bus or payload depending on the telecommand parameter.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,224,2017-07-24T19:21:20Z,2017-08-11T15:04:21Z,2017-08-11T15:04:50Z,MERGED,True,492,33,11,https://github.com/kfazi,[TeleComm] Added raw I2C telecommand,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/224,https://github.com/kfazi,3,https://github.com/PW-Sat2/PWSat2OBC/pull/224#issuecomment-321796382,This change is,"Review status: 0 of 11 files reviewed at latest revision, 3 unresolved discussions.

libs/obc/communication/telecommands/i2c.cpp, line 26 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
verify reader status.

Done.

libs/obc/communication/telecommands/i2c.cpp, line 37 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
since some of the devices do not work with combined write/read transaction it would be better to use separated read/write operations with some delay in between (preferably parametrized)

Done.

libs/obc/communication/telecommands/Include/obc/telecommands/i2c.hpp, line 24 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
ideally we would like to be able to access selected i2c bus - either bus or payload depending on the telecommand parameter.

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,224,2017-07-24T19:21:20Z,2017-08-11T15:04:21Z,2017-08-11T15:04:50Z,MERGED,True,492,33,11,https://github.com/kfazi,[TeleComm] Added raw I2C telecommand,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/224,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/224#issuecomment-321798398,This change is,"Reviewed 11 of 11 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,224,2017-07-24T19:21:20Z,2017-08-11T15:04:21Z,2017-08-11T15:04:50Z,MERGED,True,492,33,11,https://github.com/kfazi,[TeleComm] Added raw I2C telecommand,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/224,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/224#issuecomment-321810381,This change is,"Reviewed 4 of 4 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,224,2017-07-24T19:21:20Z,2017-08-11T15:04:21Z,2017-08-11T15:04:50Z,MERGED,True,492,33,11,https://github.com/kfazi,[TeleComm] Added raw I2C telecommand,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/224,https://github.com/zaq32,6,https://github.com/PW-Sat2/PWSat2OBC/pull/224#issuecomment-321838225,This change is,"Reviewed 5 of 5 files at r4.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,224,2017-07-24T19:21:20Z,2017-08-11T15:04:21Z,2017-08-11T15:04:50Z,MERGED,True,492,33,11,https://github.com/kfazi,[TeleComm] Added raw I2C telecommand,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/224,https://github.com/zaq32,7,https://github.com/PW-Sat2/PWSat2OBC/pull/224#issuecomment-321838367,This change is,[TC] RAW I2C Interface to GS,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,225,2017-07-26T17:34:47Z,2017-07-27T18:17:46Z,2017-07-27T18:17:47Z,MERGED,True,227,15,16,https://github.com/Novakov,Open sail telecommand,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/225,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/225,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,225,2017-07-26T17:34:47Z,2017-07-27T18:17:46Z,2017-07-27T18:17:47Z,MERGED,True,227,15,16,https://github.com/Novakov,Open sail telecommand,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/225,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/225#issuecomment-318131600,This change is,[TC] Open Sail,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,225,2017-07-26T17:34:47Z,2017-07-27T18:17:46Z,2017-07-27T18:17:47Z,MERGED,True,227,15,16,https://github.com/Novakov,Open sail telecommand,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/225,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/225#issuecomment-318413640,This change is,"Reviewed 15 of 16 files at r1.
Review status: 15 of 16 files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,225,2017-07-26T17:34:47Z,2017-07-27T18:17:46Z,2017-07-27T18:17:47Z,MERGED,True,227,15,16,https://github.com/Novakov,Open sail telecommand,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/225,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/225#issuecomment-318413665,This change is,"Reviewed 1 of 16 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,225,2017-07-26T17:34:47Z,2017-07-27T18:17:46Z,2017-07-27T18:17:47Z,MERGED,True,227,15,16,https://github.com/Novakov,Open sail telecommand,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/225,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/225#issuecomment-318431741,This change is,"Reviewed 8 of 9 files at r2.
Review status: 16 of 17 files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,226,2017-07-27T09:54:16Z,2017-07-27T19:02:21Z,2017-07-27T19:02:22Z,MERGED,True,128,12,9,https://github.com/Novakov,Safe mode: erase N25Q flashes,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/226,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/226,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,226,2017-07-27T09:54:16Z,2017-07-27T19:02:21Z,2017-07-27T19:02:22Z,MERGED,True,128,12,9,https://github.com/Novakov,Safe mode: erase N25Q flashes,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/226,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/226#issuecomment-318412839,This change is,"Reviewed 9 of 9 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,227,2017-07-27T13:37:39Z,2017-07-27T16:04:52Z,2017-07-27T16:04:53Z,MERGED,True,107,38,7,https://github.com/Novakov,Blinking time indicator,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/227,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/227,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,227,2017-07-27T13:37:39Z,2017-07-27T16:04:52Z,2017-07-27T16:04:53Z,MERGED,True,107,38,7,https://github.com/Novakov,Blinking time indicator,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/227,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/227#issuecomment-318364681,This change is,LED Blink,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,227,2017-07-27T13:37:39Z,2017-07-27T16:04:52Z,2017-07-27T16:04:53Z,MERGED,True,107,38,7,https://github.com/Novakov,Blinking time indicator,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/227,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/227#issuecomment-318408164,This change is,"Reviewed 7 of 7 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,228,2017-07-27T15:53:13Z,2017-08-07T07:28:45Z,2017-08-07T07:28:46Z,MERGED,True,1082,57,40,https://github.com/kfazi,Added Sun Sensor driver,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/228,https://github.com/kfazi,1,https://github.com/PW-Sat2/PWSat2OBC/pull/228,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,228,2017-07-27T15:53:13Z,2017-08-07T07:28:45Z,2017-08-07T07:28:46Z,MERGED,True,1082,57,40,https://github.com/kfazi,Added Sun Sensor driver,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/228,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/228#issuecomment-318411780,This change is,"Reviewed 24 of 24 files at r1.
Review status: all files reviewed at latest revision, 2 unresolved discussions, some commit checks failed.

libs/drivers/suns/suns.cpp, line 42 at r1 (raw file):

            }

            System::SleepTask(4s);

suns is using interrupt to signal completed operation.

unit_tests/base/Include/mock/SunSDriverMock.hpp, line 8 at r1 (raw file):

SunSDriverMock() = default;
~SunSDriverMock() = default;
Define those explicitly to save a bit of linker time.


Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,228,2017-07-27T15:53:13Z,2017-08-07T07:28:45Z,2017-08-07T07:28:46Z,MERGED,True,1082,57,40,https://github.com/kfazi,Added Sun Sensor driver,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/228,https://github.com/kfazi,3,https://github.com/PW-Sat2/PWSat2OBC/pull/228#issuecomment-318639333,This change is,"Review status: 13 of 31 files reviewed at latest revision, 2 unresolved discussions.

libs/drivers/suns/suns.cpp, line 42 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
suns is using interrupt to signal completed operation.

Fixed

unit_tests/base/Include/mock/SunSDriverMock.hpp, line 8 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote

SunSDriverMock() = default;
~SunSDriverMock() = default;
Define those explicitly to save a bit of linker time.


Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,228,2017-07-27T15:53:13Z,2017-08-07T07:28:45Z,2017-08-07T07:28:46Z,MERGED,True,1082,57,40,https://github.com/kfazi,Added Sun Sensor driver,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/228,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/228#issuecomment-318643649,This change is,"Reviewed 17 of 18 files at r2.
Review status: 29 of 31 files reviewed at latest revision, 2 unresolved discussions.

src/main.cpp, line 109 at r2 (raw file):

        Main.Hardware.PayloadDriver.IRQHandler();
    }
    else if (irq & Main.Hardware.SunSInterruptDriver.IRQMask())

there may be more than one interrupt reported at the same time

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,228,2017-07-27T15:53:13Z,2017-08-07T07:28:45Z,2017-08-07T07:28:46Z,MERGED,True,1082,57,40,https://github.com/kfazi,Added Sun Sensor driver,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/228,https://github.com/kfazi,5,https://github.com/PW-Sat2/PWSat2OBC/pull/228#issuecomment-318705177,This change is,"Review status: 23 of 34 files reviewed at latest revision, 1 unresolved discussion.

src/main.cpp, line 109 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
there may be more than one interrupt reported at the same time

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,228,2017-07-27T15:53:13Z,2017-08-07T07:28:45Z,2017-08-07T07:28:46Z,MERGED,True,1082,57,40,https://github.com/kfazi,Added Sun Sensor driver,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/228,https://github.com/begreeen,6,https://github.com/PW-Sat2/PWSat2OBC/pull/228#issuecomment-319346012,This change is,"Review status: 23 of 35 files reviewed at latest revision, 6 unresolved discussions.

integration_tests/system/system.py, line 51 at r3 (raw file):

        self.i2c.add_pld_device(self.backup_antenna)
        self.i2c.add_bus_device(self.imtq)
        self.i2c.add_bus_device(self.suns)

the SunS is connected to pld i2c bus, so add_pld_device should be here

libs/drivers/suns/suns.cpp, line 85 at r3 (raw file):

            ErrorReporter errorContext(this->errors);

            std::array<uint8_t, 536> response;

why so large array? the SunS has 67 bytes long register array.

libs/drivers/suns/suns.cpp, line 87 at r3 (raw file):

            std::array<uint8_t, 536> response;

            auto i2cstatusRead = this->i2cbus.Read(I2CAddress, response);

to read from the SunS you have to write a byte at first - a number of the first byte from the SunS register thet you want to read. Exactly the same as it is done in payload (pld and suns I2C communication use common protocol). In this case you probably want to write just 0 to fetch whole data from sensor.

libs/drivers/suns/suns.cpp, line 97 at r3 (raw file):

            Reader reader{response};

            auto opCode = reader.ReadByte();

to be removed - see below

libs/drivers/suns/suns.cpp, line 98 at r3 (raw file):

            auto opCode = reader.ReadByte();
            if (opCode != 0x80)

the first byte in the SunS registers is WhoAmI, 0x80 byte does not exist.

libs/obc/hardware/hardware.cpp, line 99 at r3 (raw file):

      Imtq(errorCounting, I2C.Buses.Bus),                                           //
      SunSInterruptDriver(this->Pins.SunSInterrupt),                                //
      SunS(errorCounting, I2C.Buses.Bus, SunSInterruptDriver),                      //

the SunS uses I2C.Buses.Payload

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,228,2017-07-27T15:53:13Z,2017-08-07T07:28:45Z,2017-08-07T07:28:46Z,MERGED,True,1082,57,40,https://github.com/kfazi,Added Sun Sensor driver,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/228,https://github.com/Novakov,7,https://github.com/PW-Sat2/PWSat2OBC/pull/228#issuecomment-319881901,This change is,"Review status: 23 of 35 files reviewed at latest revision, 6 unresolved discussions, some commit checks failed.

integration_tests/system/system.py, line 51 at r3 (raw file):
Previously, begreeen wrote
the SunS is connected to pld i2c bus, so add_pld_device should be here

Done

libs/drivers/suns/suns.cpp, line 85 at r3 (raw file):
Previously, begreeen wrote
why so large array? the SunS has 67 bytes long register array.

Done

libs/drivers/suns/suns.cpp, line 87 at r3 (raw file):
Previously, begreeen wrote
to read from the SunS you have to write a byte at first - a number of the first byte from the SunS register thet you want to read. Exactly the same as it is done in payload (pld and suns I2C communication use common protocol). In this case you probably want to write just 0 to fetch whole data from sensor.

Done

libs/drivers/suns/suns.cpp, line 97 at r3 (raw file):
Previously, begreeen wrote
to be removed - see below

Done

libs/drivers/suns/suns.cpp, line 98 at r3 (raw file):
Previously, begreeen wrote
the first byte in the SunS registers is WhoAmI, 0x80 byte does not exist.

Done

libs/obc/hardware/hardware.cpp, line 99 at r3 (raw file):
Previously, begreeen wrote
the SunS uses I2C.Buses.Payload

Done

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,228,2017-07-27T15:53:13Z,2017-08-07T07:28:45Z,2017-08-07T07:28:46Z,MERGED,True,1082,57,40,https://github.com/kfazi,Added Sun Sensor driver,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/228,https://github.com/Novakov,8,https://github.com/PW-Sat2/PWSat2OBC/pull/228#issuecomment-319949312,This change is,[Driver] SunSensor eksperymentalny,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,228,2017-07-27T15:53:13Z,2017-08-07T07:28:45Z,2017-08-07T07:28:46Z,MERGED,True,1082,57,40,https://github.com/kfazi,Added Sun Sensor driver,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/228,https://github.com/begreeen,9,https://github.com/PW-Sat2/PWSat2OBC/pull/228#issuecomment-319986057,This change is,"Reviewed 1 of 15 files at r5.
Review status: 19 of 40 files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,228,2017-07-27T15:53:13Z,2017-08-07T07:28:45Z,2017-08-07T07:28:46Z,MERGED,True,1082,57,40,https://github.com/kfazi,Added Sun Sensor driver,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/228,https://github.com/zaq32,10,https://github.com/PW-Sat2/PWSat2OBC/pull/228#issuecomment-320239902,This change is,"Reviewed 4 of 12 files at r3, 3 of 6 files at r4, 15 of 15 files at r5.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,228,2017-07-27T15:53:13Z,2017-08-07T07:28:45Z,2017-08-07T07:28:46Z,MERGED,True,1082,57,40,https://github.com/kfazi,Added Sun Sensor driver,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/228,https://github.com/zaq32,11,https://github.com/PW-Sat2/PWSat2OBC/pull/228#issuecomment-320580592,This change is,"Reviewed 4 of 4 files at r6.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,229,2017-07-28T17:21:54Z,2017-07-28T17:56:00Z,2017-07-28T17:56:01Z,MERGED,True,7,7,2,https://github.com/kfazi,Fixed usage of wrong command in MTM,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/229,https://github.com/kfazi,1,https://github.com/PW-Sat2/PWSat2OBC/pull/229,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,229,2017-07-28T17:21:54Z,2017-07-28T17:56:00Z,2017-07-28T17:56:01Z,MERGED,True,7,7,2,https://github.com/kfazi,Fixed usage of wrong command in MTM,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/229,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/229#issuecomment-318713456,This change is,"Reviewed 2 of 2 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,230,2017-07-29T13:16:47Z,2017-08-08T11:42:35Z,2017-08-08T11:42:37Z,MERGED,True,652,11,27,https://github.com/Novakov,Message: Resistance is futile,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/230,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/230,"You will be assimilated


This change is","You will be assimilated


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,230,2017-07-29T13:16:47Z,2017-08-08T11:42:35Z,2017-08-08T11:42:37Z,MERGED,True,652,11,27,https://github.com/Novakov,Message: Resistance is futile,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/230,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/230#issuecomment-318833816,"You will be assimilated


This change is",Resistance is futile,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,230,2017-07-29T13:16:47Z,2017-08-08T11:42:35Z,2017-08-08T11:42:37Z,MERGED,True,652,11,27,https://github.com/Novakov,Message: Resistance is futile,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/230,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/230#issuecomment-318985955,"You will be assimilated


This change is","Reviewed 27 of 27 files at r1.
Review status: all files reviewed at latest revision, 2 unresolved discussions.

libs/mission/comm/comm.cpp, line 116 at r1 (raw file):
Quoted 4 lines of code
>         if (!This->_lastSentAt.HasValue)
>         {
>             return true;
>         }

> 
you may want to check this before accessing persistent state

libs/state/comm.cpp, line 14 at r1 (raw file):

        ""technological distinctiveness to our own. Your culture will adapt to service us. Resistance is futile."";

    MessageState::MessageState() : _interval(5min), _repeatCount(3)

we would have to think about the frequency

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,230,2017-07-29T13:16:47Z,2017-08-08T11:42:35Z,2017-08-08T11:42:37Z,MERGED,True,652,11,27,https://github.com/Novakov,Message: Resistance is futile,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/230,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/230#issuecomment-320712392,"You will be assimilated


This change is","Review status: 17 of 27 files reviewed at latest revision, 2 unresolved discussions.

libs/mission/comm/comm.cpp, line 116 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote

    if (!This->_lastSentAt.HasValue)
    {
        return true;
    }


you may want to check this before accessing persistent state


Done.

libs/state/comm.cpp, line 14 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
we would have to think about the frequency

Done

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,230,2017-07-29T13:16:47Z,2017-08-08T11:42:35Z,2017-08-08T11:42:37Z,MERGED,True,652,11,27,https://github.com/Novakov,Message: Resistance is futile,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/230,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/230#issuecomment-320713804,"You will be assimilated


This change is","Reviewed 10 of 10 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,230,2017-07-29T13:16:47Z,2017-08-08T11:42:35Z,2017-08-08T11:42:37Z,MERGED,True,652,11,27,https://github.com/Novakov,Message: Resistance is futile,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/230,https://github.com/zaq32,6,https://github.com/PW-Sat2/PWSat2OBC/pull/230#issuecomment-320896142,"You will be assimilated


This change is","Reviewed 2 of 2 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,231,2017-07-29T20:00:43Z,2017-07-31T07:06:57Z,2017-07-31T07:06:58Z,MERGED,True,239,51,16,https://github.com/Novakov,Telecommand: get error counters config,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/231,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/231,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,231,2017-07-29T20:00:43Z,2017-07-31T07:06:57Z,2017-07-31T07:06:58Z,MERGED,True,239,51,16,https://github.com/Novakov,Telecommand: get error counters config,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/231,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/231#issuecomment-318855509,This change is,[TC] Get error counters config,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,231,2017-07-29T20:00:43Z,2017-07-31T07:06:57Z,2017-07-31T07:06:58Z,MERGED,True,239,51,16,https://github.com/Novakov,Telecommand: get error counters config,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/231,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/231#issuecomment-318986510,This change is,"Reviewed 16 of 16 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,232,2017-08-03T09:28:36Z,2017-08-10T06:03:48Z,2017-08-10T06:03:49Z,MERGED,True,1399,21,41,https://github.com/tom4r,Experiment leop,12,[],https://github.com/PW-Sat2/PWSat2OBC/pull/232,https://github.com/tom4r,1,https://github.com/PW-Sat2/PWSat2OBC/pull/232,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,232,2017-08-03T09:28:36Z,2017-08-10T06:03:48Z,2017-08-10T06:03:49Z,MERGED,True,1399,21,41,https://github.com/tom4r,Experiment leop,12,[],https://github.com/PW-Sat2/PWSat2OBC/pull/232,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/232#issuecomment-319949282,This change is,[Experiment] LEOP,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,232,2017-08-03T09:28:36Z,2017-08-10T06:03:48Z,2017-08-10T06:03:49Z,MERGED,True,1399,21,41,https://github.com/tom4r,Experiment leop,12,[],https://github.com/PW-Sat2/PWSat2OBC/pull/232,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/232#issuecomment-319958759,This change is,"Reviewed 26 of 26 files at r1.
Review status: 24 of 26 files reviewed at latest revision, 5 unresolved discussions.

integration_tests/tests/test_experiment_leop.py, line 29 at r1 (raw file):

    @runlevel(2)
    def test_should_perform_experiment(self):

Use @clear_state()

libs/experiments/fs/ExperimentFile.cpp, line 130 at r1 (raw file):

    if (_time != nullptr)
    {
        const auto& timestamp = _time->GetCurrentTime();

I don't think that using reference here is valid

libs/experiments/fs/Include/fs/ExperimentFile.hpp, line 41 at r1 (raw file):

          public:
            /** @brief Data packet length.  */
            static constexpr uint16_t PacketLength = 232;

Add static_assert somewhere to validate that this size matches size of payload in downlink frame.
Also each frame with part of file contains correlation ID, so there is 231 bytes for data

libs/mission/leop/leop.cpp, line 15 at r1 (raw file):

    namespace leop
    {
        LEOPTask::LEOPTask(::experiments::ExperimentController& experimentController) : _experimentController(experimentController)

Use interface IExperimentController here

libs/mission/leop/Include/mission/leop_task.hpp, line 53 at r1 (raw file):

            /** @brief Flag indicating whether experiment is enabled */
            std::atomic<bool> _isEnabled{true};

Change name of this field to something more meaningful

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,232,2017-08-03T09:28:36Z,2017-08-10T06:03:48Z,2017-08-10T06:03:49Z,MERGED,True,1399,21,41,https://github.com/tom4r,Experiment leop,12,[],https://github.com/PW-Sat2/PWSat2OBC/pull/232,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/232#issuecomment-320053656,This change is,"Review status: 24 of 26 files reviewed at latest revision, 6 unresolved discussions, some commit checks failed.

libs/experiments/fs/Include/fs/ExperimentFile.hpp, line 37 at r1 (raw file):

         * until the end - padding data (0xFF)
         */
        class ExperimentFile

There is a resource leak in this class. If it's destroyed without calling Close there underlying file handle will never be closed

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,232,2017-08-03T09:28:36Z,2017-08-10T06:03:48Z,2017-08-10T06:03:49Z,MERGED,True,1399,21,41,https://github.com/tom4r,Experiment leop,12,[],https://github.com/PW-Sat2/PWSat2OBC/pull/232,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/232#issuecomment-320248854,This change is,"Reviewed 24 of 26 files at r1, 2 of 2 files at r2.
Review status: all files reviewed at latest revision, 15 unresolved discussions, some commit checks failed.

libs/experiments/fs/ExperimentFile.cpp, line 130 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
I don't think that using reference here is valid

Its not an error here.

libs/experiments/fs/ExperimentFile.cpp, line 45 at r2 (raw file):

        _writer.WriteByte(num(pid));
        _writer.WriteArray(data);


the length of data may be larger than frame free space limit. Either use WriteBiggerThanFrame method or recheck the space size again

libs/experiments/fs/ExperimentFile.cpp, line 66 at r2 (raw file):

    uint32_t length = _writer.RemainingSize() - PIDSize;
    if (length > dataRemaining)
        length = dataRemaining;


const auto length = std::min(dataRemaining, writer.RemainingSize() - PIDSize);

libs/experiments/fs/ExperimentFile.cpp, line 68 at r2 (raw file):

            length = dataRemaining;

        auto&& subpart = data.subspan(offset, length);

why not simply auto subpart?

libs/experiments/fs/ExperimentFile.cpp, line 118 at r2 (raw file):

for (int i = 1; i < freeSpace; ++i)
{
_writer.WriteByte(0xFF);
}
consider extending writer with bool Fill(std::uint8_t byte) method


libs/experiments/fs/ExperimentFile.cpp, line 118 at r2 (raw file):

    for (int i = 1; i < freeSpace; ++i)
    {
        _writer.WriteByte(0xFF);

use PID::Padding instead of hardcoded value

libs/experiments/fs/Include/fs/ExperimentFile.hpp, line 37 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
There is a resource leak in this class. If it's destroyed without calling Close there underlying file handle will never be closed

the services::fs::File class is responsible for closing underlying file handle,
However if this class is destroyed without calling close the last opened frame will be lost.

libs/experiments/fs/Include/fs/ExperimentFile.hpp, line 60 at r2 (raw file):

            /**
             * @brief Default constrctor
             * @param time Optional time provider. If set, each packet automatically has timestamp.

has -> have a

libs/experiments/fs/Include/fs/ExperimentFile.hpp, line 111 at r2 (raw file):

FillBufferWithPadding();
void InitializePacket();
        OSResu


methods should be declared before fields.

libs/experiments/leop/leop.cpp, line 61 at r2 (raw file):

            }

            return IterationResult::WaitForNextCycle;

i do not think that > 10 delays are acceptable here. Although this experiment is not fully defined it does says something like this:
Start gyroscopes acquisition with high sample rate

https://team.pw-sat.pl/w/oper/mission_plan/

libs/mission/leop/leop.cpp, line 9 at r2 (raw file):

#include ""system.h""

using namespace std::chrono_literals;

unused

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,232,2017-08-03T09:28:36Z,2017-08-10T06:03:48Z,2017-08-10T06:03:49Z,MERGED,True,1399,21,41,https://github.com/tom4r,Experiment leop,12,[],https://github.com/PW-Sat2/PWSat2OBC/pull/232,https://github.com/Novakov,6,https://github.com/PW-Sat2/PWSat2OBC/pull/232#issuecomment-320516879,This change is,"Reviewed 1 of 2 files at r3, 25 of 25 files at r4.
Review status: all files reviewed at latest revision, 12 unresolved discussions.

integration_tests/tests/test_experiment_leop.py, line 77 at r4 (raw file):

        # wait until all mission descriptors will be processed
        sleep(20)

whoa... that's really not nice

src/checks/checks.cpp, line 7 at r4 (raw file):

{
    static_assert(experiments::fs::ExperimentFile::PacketLength == telecommunication::downlink::DownlinkFrame::MaxPayloadSize,
        ""Packet Length is not equal to downlink frame size"");

Downloading file uses CorrelatedDownlinkFrame which has one byte less space than DownlinkFrame

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,232,2017-08-03T09:28:36Z,2017-08-10T06:03:48Z,2017-08-10T06:03:49Z,MERGED,True,1399,21,41,https://github.com/tom4r,Experiment leop,12,[],https://github.com/PW-Sat2/PWSat2OBC/pull/232,https://github.com/Novakov,7,https://github.com/PW-Sat2/PWSat2OBC/pull/232#issuecomment-320517367,This change is,"Review status: all files reviewed at latest revision, 13 unresolved discussions.

libs/mission/leop/leop.cpp, line 58 at r4 (raw file):

            return This->_isStartAllowed && isTimeForStart;
        }

You can just wait for currentTime >= 1min

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,232,2017-08-03T09:28:36Z,2017-08-10T06:03:48Z,2017-08-10T06:03:49Z,MERGED,True,1399,21,41,https://github.com/tom4r,Experiment leop,12,[],https://github.com/PW-Sat2/PWSat2OBC/pull/232,https://github.com/tom4r,8,https://github.com/PW-Sat2/PWSat2OBC/pull/232#issuecomment-320523678,This change is,"Review status: 39 of 41 files reviewed at latest revision, 18 unresolved discussions.

integration_tests/tests/test_experiment_leop.py, line 29 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Use @clear_state()

Done.

libs/experiments/fs/ExperimentFile.cpp, line 130 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
Its not an error here.

I removed the reference.

libs/experiments/fs/ExperimentFile.cpp, line 45 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote

        _writer.WriteByte(num(pid));
        _writer.WriteArray(data);


the length of data may be larger than frame free space limit. Either use WriteBiggerThanFrame method or recheck the space size again

Fixed.

libs/experiments/fs/ExperimentFile.cpp, line 66 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote

    uint32_t length = _writer.RemainingSize() - PIDSize;
    if (length > dataRemaining)
        length = dataRemaining;


const auto length = std::min(dataRemaining, writer.RemainingSize() - PIDSize);

Done.

libs/experiments/fs/ExperimentFile.cpp, line 68 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
why not simply auto subpart?

Fixed.

libs/experiments/fs/ExperimentFile.cpp, line 118 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote

for (int i = 1; i < freeSpace; ++i)
{
_writer.WriteByte(0xFF);
}
consider extending writer with bool Fill(std::uint8_t byte) method


Added Fill to Writer.

libs/experiments/fs/ExperimentFile.cpp, line 118 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
use PID::Padding instead of hardcoded value

Added PaddingData Constexpr.
This and PID is not exactly the same by design. PID should be easily expanded to 16 bits and here should be always 0xFF.
I created manual file explaining the concepts behind that file format.

libs/experiments/fs/Include/fs/ExperimentFile.hpp, line 37 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
the services::fs::File class is responsible for closing underlying file handle,
However if this class is destroyed without calling close the last opened frame will be lost.

Added desctuctor that closes file and saves last frame if it has any real data.

libs/experiments/fs/Include/fs/ExperimentFile.hpp, line 41 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Add static_assert somewhere to validate that this size matches size of payload in downlink frame.
Also each frame with part of file contains correlation ID, so there is 231 bytes for data

Added.

libs/experiments/fs/Include/fs/ExperimentFile.hpp, line 60 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
has -> have a

Fixed.

libs/experiments/fs/Include/fs/ExperimentFile.hpp, line 111 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote

FillBufferWithPadding();
void InitializePacket();
        OSResu


methods should be declared before fields.

Fixed.

libs/experiments/leop/leop.cpp, line 61 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
i do not think that > 10 delays are acceptable here. Although this experiment is not fully defined it does says something like this:
Start gyroscopes acquisition with high sample rate

https://team.pw-sat.pl/w/oper/mission_plan/

Fixed.
The high sample rate is now defined as 1Hz.

libs/mission/leop/leop.cpp, line 15 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Use interface IExperimentController here

Fixed.

libs/mission/leop/leop.cpp, line 9 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
unused

Removed

libs/mission/leop/Include/mission/leop_task.hpp, line 53 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Change name of this field to something more meaningful

Field renamed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,232,2017-08-03T09:28:36Z,2017-08-10T06:03:48Z,2017-08-10T06:03:49Z,MERGED,True,1399,21,41,https://github.com/tom4r,Experiment leop,12,[],https://github.com/PW-Sat2/PWSat2OBC/pull/232,https://github.com/zaq32,9,https://github.com/PW-Sat2/PWSat2OBC/pull/232#issuecomment-320572332,This change is,"Reviewed 1 of 2 files at r3, 23 of 25 files at r4, 1 of 2 files at r5.
Review status: 40 of 41 files reviewed at latest revision, 5 unresolved discussions, some commit checks failed.

unit_tests/others/base/WriterTest.cpp, line 277 at r5 (raw file):

    }

    TEST(WriterTest, TestFill)

you may want to test Fill on empty/full buffer.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,232,2017-08-03T09:28:36Z,2017-08-10T06:03:48Z,2017-08-10T06:03:49Z,MERGED,True,1399,21,41,https://github.com/tom4r,Experiment leop,12,[],https://github.com/PW-Sat2/PWSat2OBC/pull/232,https://github.com/zaq32,10,https://github.com/PW-Sat2/PWSat2OBC/pull/232#issuecomment-320572391,This change is,"Reviewed 1 of 25 files at r4.
Review status: 40 of 41 files reviewed at latest revision, 5 unresolved discussions, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,232,2017-08-03T09:28:36Z,2017-08-10T06:03:48Z,2017-08-10T06:03:49Z,MERGED,True,1399,21,41,https://github.com/tom4r,Experiment leop,12,[],https://github.com/PW-Sat2/PWSat2OBC/pull/232,https://github.com/Novakov,11,https://github.com/PW-Sat2/PWSat2OBC/pull/232#issuecomment-320591949,This change is,"Reviewed 1 of 2 files at r5.
Review status: all files reviewed at latest revision, 4 unresolved discussions, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,232,2017-08-03T09:28:36Z,2017-08-10T06:03:48Z,2017-08-10T06:03:49Z,MERGED,True,1399,21,41,https://github.com/tom4r,Experiment leop,12,[],https://github.com/PW-Sat2/PWSat2OBC/pull/232,https://github.com/tom4r,12,https://github.com/PW-Sat2/PWSat2OBC/pull/232#issuecomment-320779917,This change is,"Review status: 30 of 41 files reviewed at latest revision, 4 unresolved discussions.

integration_tests/tests/test_experiment_leop.py, line 77 at r4 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
whoa... that's really not nice

Ugly code removed.

libs/mission/leop/leop.cpp, line 58 at r4 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
You can just wait for currentTime >= 1min

Done.

src/checks/checks.cpp, line 7 at r4 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Downloading file uses CorrelatedDownlinkFrame which has one byte less space than DownlinkFrame

Fixed.

unit_tests/others/base/WriterTest.cpp, line 277 at r5 (raw file):
Previously, zaq32 (ukasz ak) wrote
you may want to test Fill on empty/full buffer.

Tests added.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,232,2017-08-03T09:28:36Z,2017-08-10T06:03:48Z,2017-08-10T06:03:49Z,MERGED,True,1399,21,41,https://github.com/tom4r,Experiment leop,12,[],https://github.com/PW-Sat2/PWSat2OBC/pull/232,https://github.com/Novakov,13,https://github.com/PW-Sat2/PWSat2OBC/pull/232#issuecomment-321066575,This change is,"Reviewed 14 of 14 files at r6.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,232,2017-08-03T09:28:36Z,2017-08-10T06:03:48Z,2017-08-10T06:03:49Z,MERGED,True,1399,21,41,https://github.com/tom4r,Experiment leop,12,[],https://github.com/PW-Sat2/PWSat2OBC/pull/232,https://github.com/zaq32,14,https://github.com/PW-Sat2/PWSat2OBC/pull/232#issuecomment-321459208,This change is,"Reviewed 5 of 14 files at r6, 6 of 6 files at r7.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,233,2017-08-03T12:01:13Z,2017-08-04T16:05:03Z,2017-08-04T16:05:05Z,MERGED,True,250,2,10,https://github.com/Novakov,Set RTC time if not correct,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/233,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/233,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,233,2017-08-03T12:01:13Z,2017-08-04T16:05:03Z,2017-08-04T16:05:05Z,MERGED,True,250,2,10,https://github.com/Novakov,Set RTC time if not correct,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/233,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/233#issuecomment-319949266,This change is,RTC is not reset to valid state,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,233,2017-08-03T12:01:13Z,2017-08-04T16:05:03Z,2017-08-04T16:05:05Z,MERGED,True,250,2,10,https://github.com/Novakov,Set RTC time if not correct,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/233,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/233#issuecomment-319949957,This change is,"Reviewed 10 of 10 files at r1.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

libs/base/Include/base/writer.h, line 137 at r1 (raw file):

    bool WriteLowerBytesBE(std::uint32_t number, std::uint8_t bytesCount);

    bool WriteByteBCD(std::uint8_t value);

undocumented

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,233,2017-08-03T12:01:13Z,2017-08-04T16:05:03Z,2017-08-04T16:05:05Z,MERGED,True,250,2,10,https://github.com/Novakov,Set RTC time if not correct,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/233,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/233#issuecomment-319952240,This change is,"Review status: 9 of 10 files reviewed at latest revision, 1 unresolved discussion.

libs/base/Include/base/writer.h, line 137 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
undocumented

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,233,2017-08-03T12:01:13Z,2017-08-04T16:05:03Z,2017-08-04T16:05:05Z,MERGED,True,250,2,10,https://github.com/Novakov,Set RTC time if not correct,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/233,https://github.com/begreeen,5,https://github.com/PW-Sat2/PWSat2OBC/pull/233#issuecomment-319980473,This change is,"Test report:
=> initial state: rtc runs with random values in its registers (year 150)
=> code from this PR uploaded and run:
Hello I'm PW-SAT2 OBC
ebug]   Received boot information from bootloader
[Info]    Starting initialization task...
[Info]    Requested runlevel 2
[Info]    [rtc] Integrity flag: 0xD0
[Warning] [rtc] Integrity not guaranteed. Reseting RTC to 0
[Info]    yaffs: yaffs: Mounting /

The OBC correctly recognized that RTC contains wrong time.
=> so it set up a time:
>rtc get
0-1-1 0:1:3 (946684863 sec since epoch)

=> after OBC reboot (rtc supplied all the time):
Hello I'm PW-SAT2 OBC
ebug]   Received boot information from bootloader
[Info]    Starting initialization task...
[Info]    Requested runlevel 2
[Info]    [rtc] Integrity flag: 0x48
[Info]    yaffs: yaffs: Mounting /

OBC detects proper time and has no doubt about time integrity so it should not set time again
=> as expected, the time is still running, without setting it up again after reboot
>rtc get
0-1-1 0:3:39 (946685019 sec since epoch)

=> rtc powered down (backup power capacitor discharged intentionally), OBC reboot:
>rtc get
0-1-1 0:0:16 (946684816 sec since epoch)

the rtc clock integrity is not valid, so OBC detects it and set a time again",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,233,2017-08-03T12:01:13Z,2017-08-04T16:05:03Z,2017-08-04T16:05:05Z,MERGED,True,250,2,10,https://github.com/Novakov,Set RTC time if not correct,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/233,https://github.com/zaq32,6,https://github.com/PW-Sat2/PWSat2OBC/pull/233#issuecomment-320240038,This change is,"Reviewed 1 of 1 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,234,2017-08-03T13:41:20Z,2017-08-03T14:02:53Z,2017-08-03T14:02:55Z,MERGED,True,4,4,2,https://github.com/begreeen,IO map fix - payload pfm 1.01 and 2.02 have wrong pin naming,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/234,https://github.com/begreeen,1,https://github.com/PW-Sat2/PWSat2OBC/pull/234,"IO map fix - payload pfm 1.01 and 2.02 have wrong pin naming details can be found here: https://team.pw-sat.pl/F5527 and https://team.pw-sat.pl/w/pld/pfm/#important-issue-for-both)


This change is","IO map fix - payload pfm 1.01 and 2.02 have wrong pin naming details can be found here: https://team.pw-sat.pl/F5527 and https://team.pw-sat.pl/w/pld/pfm/#important-issue-for-both)


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,234,2017-08-03T13:41:20Z,2017-08-03T14:02:53Z,2017-08-03T14:02:55Z,MERGED,True,4,4,2,https://github.com/begreeen,IO map fix - payload pfm 1.01 and 2.02 have wrong pin naming,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/234,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/234#issuecomment-319978093,"IO map fix - payload pfm 1.01 and 2.02 have wrong pin naming details can be found here: https://team.pw-sat.pl/F5527 and https://team.pw-sat.pl/w/pld/pfm/#important-issue-for-both)


This change is","Reviewed 2 of 2 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,235,2017-08-04T09:58:59Z,2017-08-04T10:50:43Z,2017-08-04T10:50:45Z,MERGED,True,5,2,1,https://github.com/decu69,Catching and logging exception regarding full queue,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/235,https://github.com/decu69,1,https://github.com/PW-Sat2/PWSat2OBC/pull/235,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,235,2017-08-04T09:58:59Z,2017-08-04T10:50:43Z,2017-08-04T10:50:45Z,MERGED,True,5,2,1,https://github.com/decu69,Catching and logging exception regarding full queue,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/235,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/235#issuecomment-320210177,This change is,"Reviewed 1 of 1 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,236,2017-08-04T20:22:15Z,2017-08-09T06:43:22Z,2017-08-09T06:43:24Z,MERGED,True,3094,549,50,https://github.com/zaq32,Telemetry imtq,18,[],https://github.com/PW-Sat2/PWSat2OBC/pull/236,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/236,"Extend telemetry acquisition with imtq state.
The imtq telemetry collection is collected as the imtq driver is being used by different obc elements (mainly adcs plugins and/or experiments).  Mainly because of the following reasons:

adcs experimens (sunpointing/detumbling) are not very tolerant for unexpected unbounded delays in the middle that could be caused by the asynchronous process trying to collect telemetry.
it is difficult to collect imtq magnetometer measurements, b-dot & dipoles without knowing exact current imtq (adcs) operating mode. In case of imtq built-in detumbling they are acquired using get detumble data, however in case of experimental detumbling/sunpointing get detumble data cannot be used and those telemetry parts have to be acquired using other means.

Based on that the proxy layer for imtq drver has been implemented that captures the necessary telemetry elements as they are available and stored in the temporary storage.  The actual acquisition element only captures the telemetry from that temporary storage.
Additional small changes:

Replaced several small telemetry elements with single template based implementation & some typedefs with tags.



This change is","Extend telemetry acquisition with imtq state.
The imtq telemetry collection is collected as the imtq driver is being used by different obc elements (mainly adcs plugins and/or experiments).  Mainly because of the following reasons:

adcs experimens (sunpointing/detumbling) are not very tolerant for unexpected unbounded delays in the middle that could be caused by the asynchronous process trying to collect telemetry.
it is difficult to collect imtq magnetometer measurements, b-dot & dipoles without knowing exact current imtq (adcs) operating mode. In case of imtq built-in detumbling they are acquired using get detumble data, however in case of experimental detumbling/sunpointing get detumble data cannot be used and those telemetry parts have to be acquired using other means.

Based on that the proxy layer for imtq drver has been implemented that captures the necessary telemetry elements as they are available and stored in the temporary storage.  The actual acquisition element only captures the telemetry from that temporary storage.
Additional small changes:

Replaced several small telemetry elements with single template based implementation & some typedefs with tags.



This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,236,2017-08-04T20:22:15Z,2017-08-09T06:43:22Z,2017-08-09T06:43:24Z,MERGED,True,3094,549,50,https://github.com/zaq32,Telemetry imtq,18,[],https://github.com/PW-Sat2/PWSat2OBC/pull/236,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/236#issuecomment-320346803,"Extend telemetry acquisition with imtq state.
The imtq telemetry collection is collected as the imtq driver is being used by different obc elements (mainly adcs plugins and/or experiments).  Mainly because of the following reasons:

adcs experimens (sunpointing/detumbling) are not very tolerant for unexpected unbounded delays in the middle that could be caused by the asynchronous process trying to collect telemetry.
it is difficult to collect imtq magnetometer measurements, b-dot & dipoles without knowing exact current imtq (adcs) operating mode. In case of imtq built-in detumbling they are acquired using get detumble data, however in case of experimental detumbling/sunpointing get detumble data cannot be used and those telemetry parts have to be acquired using other means.

Based on that the proxy layer for imtq drver has been implemented that captures the necessary telemetry elements as they are available and stored in the temporary storage.  The actual acquisition element only captures the telemetry from that temporary storage.
Additional small changes:

Replaced several small telemetry elements with single template based implementation & some typedefs with tags.



This change is",[Telemetry] Add mechanism of gathering the telemetry from obc components,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,236,2017-08-04T20:22:15Z,2017-08-09T06:43:22Z,2017-08-09T06:43:24Z,MERGED,True,3094,549,50,https://github.com/zaq32,Telemetry imtq,18,[],https://github.com/PW-Sat2/PWSat2OBC/pull/236,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/236#issuecomment-320990815,"Extend telemetry acquisition with imtq state.
The imtq telemetry collection is collected as the imtq driver is being used by different obc elements (mainly adcs plugins and/or experiments).  Mainly because of the following reasons:

adcs experimens (sunpointing/detumbling) are not very tolerant for unexpected unbounded delays in the middle that could be caused by the asynchronous process trying to collect telemetry.
it is difficult to collect imtq magnetometer measurements, b-dot & dipoles without knowing exact current imtq (adcs) operating mode. In case of imtq built-in detumbling they are acquired using get detumble data, however in case of experimental detumbling/sunpointing get detumble data cannot be used and those telemetry parts have to be acquired using other means.

Based on that the proxy layer for imtq drver has been implemented that captures the necessary telemetry elements as they are available and stored in the temporary storage.  The actual acquisition element only captures the telemetry from that temporary storage.
Additional small changes:

Replaced several small telemetry elements with single template based implementation & some typedefs with tags.



This change is","Reviewed 41 of 46 files at r1, 11 of 11 files at r2.
Review status: all files reviewed at latest revision, 1 unresolved discussion, some commit checks failed.

libs/telemetry/imtq/ImtqTelemetryCollector.cpp, line 12 at r2 (raw file):

        ImtqTelemetryCollector::ImtqTelemetryCollector(IImtqDriver& driver) : next(driver), semaphore(nullptr)
        {
            std::uninitialized_fill(elementUpdated.begin(), elementUpdated.end(), false);

why not elementUpdated.fill(false)?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,236,2017-08-04T20:22:15Z,2017-08-09T06:43:22Z,2017-08-09T06:43:24Z,MERGED,True,3094,549,50,https://github.com/zaq32,Telemetry imtq,18,[],https://github.com/PW-Sat2/PWSat2OBC/pull/236,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/236#issuecomment-321155085,"Extend telemetry acquisition with imtq state.
The imtq telemetry collection is collected as the imtq driver is being used by different obc elements (mainly adcs plugins and/or experiments).  Mainly because of the following reasons:

adcs experimens (sunpointing/detumbling) are not very tolerant for unexpected unbounded delays in the middle that could be caused by the asynchronous process trying to collect telemetry.
it is difficult to collect imtq magnetometer measurements, b-dot & dipoles without knowing exact current imtq (adcs) operating mode. In case of imtq built-in detumbling they are acquired using get detumble data, however in case of experimental detumbling/sunpointing get detumble data cannot be used and those telemetry parts have to be acquired using other means.

Based on that the proxy layer for imtq drver has been implemented that captures the necessary telemetry elements as they are available and stored in the temporary storage.  The actual acquisition element only captures the telemetry from that temporary storage.
Additional small changes:

Replaced several small telemetry elements with single template based implementation & some typedefs with tags.



This change is","Review status: 42 of 50 files reviewed at latest revision, 1 unresolved discussion.

libs/telemetry/imtq/ImtqTelemetryCollector.cpp, line 12 at r2 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
why not elementUpdated.fill(false)?

in this case both will work just fine.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,236,2017-08-04T20:22:15Z,2017-08-09T06:43:22Z,2017-08-09T06:43:24Z,MERGED,True,3094,549,50,https://github.com/zaq32,Telemetry imtq,18,[],https://github.com/PW-Sat2/PWSat2OBC/pull/236,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/236#issuecomment-321167748,"Extend telemetry acquisition with imtq state.
The imtq telemetry collection is collected as the imtq driver is being used by different obc elements (mainly adcs plugins and/or experiments).  Mainly because of the following reasons:

adcs experimens (sunpointing/detumbling) are not very tolerant for unexpected unbounded delays in the middle that could be caused by the asynchronous process trying to collect telemetry.
it is difficult to collect imtq magnetometer measurements, b-dot & dipoles without knowing exact current imtq (adcs) operating mode. In case of imtq built-in detumbling they are acquired using get detumble data, however in case of experimental detumbling/sunpointing get detumble data cannot be used and those telemetry parts have to be acquired using other means.

Based on that the proxy layer for imtq drver has been implemented that captures the necessary telemetry elements as they are available and stored in the temporary storage.  The actual acquisition element only captures the telemetry from that temporary storage.
Additional small changes:

Replaced several small telemetry elements with single template based implementation & some typedefs with tags.



This change is","Reviewed 8 of 8 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,237,2017-08-06T16:05:44Z,2017-08-07T05:19:37Z,2017-08-07T05:19:38Z,MERGED,True,69,1,2,https://github.com/Novakov,Log COMM frame and OBC PyTerm,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/237,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/237,"IPython-based OBC terminal
Just mocks: log transmitted frames to file



This change is","IPython-based OBC terminal
Just mocks: log transmitted frames to file



This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,237,2017-08-06T16:05:44Z,2017-08-07T05:19:37Z,2017-08-07T05:19:38Z,MERGED,True,69,1,2,https://github.com/Novakov,Log COMM frame and OBC PyTerm,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/237,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/237#issuecomment-320570994,"IPython-based OBC terminal
Just mocks: log transmitted frames to file



This change is","Reviewed 2 of 2 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,238,2017-08-07T18:57:19Z,2017-08-07T19:26:59Z,2017-08-07T19:27:00Z,MERGED,True,45,1,4,https://github.com/Novakov,Query antenna controller in mission update only if it is powered on,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/238,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/238,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,238,2017-08-07T18:57:19Z,2017-08-07T19:26:59Z,2017-08-07T19:27:00Z,MERGED,True,45,1,4,https://github.com/Novakov,Query antenna controller in mission update only if it is powered on,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/238,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/238#issuecomment-320750481,This change is,Antenna controller is queried even if not powered on,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,238,2017-08-07T18:57:19Z,2017-08-07T19:26:59Z,2017-08-07T19:27:00Z,MERGED,True,45,1,4,https://github.com/Novakov,Query antenna controller in mission update only if it is powered on,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/238,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/238#issuecomment-320751541,This change is,"Reviewed 4 of 4 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,239,2017-08-07T20:00:20Z,2017-08-08T09:01:09Z,2017-08-08T09:01:10Z,MERGED,True,17,2,2,https://github.com/Novakov,Interleave EPS controllers on power cycle,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/239,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/239,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,239,2017-08-07T20:00:20Z,2017-08-08T09:01:09Z,2017-08-08T09:01:10Z,MERGED,True,17,2,2,https://github.com/Novakov,Interleave EPS controllers on power cycle,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/239,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/239#issuecomment-320764898,This change is,After SCL latch on BUS all power cycle attempts tries using it,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,239,2017-08-07T20:00:20Z,2017-08-08T09:01:09Z,2017-08-08T09:01:10Z,MERGED,True,17,2,2,https://github.com/Novakov,Interleave EPS controllers on power cycle,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/239,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/239#issuecomment-320896002,This change is,"Reviewed 2 of 2 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,240,2017-08-07T20:50:59Z,2017-08-09T14:10:49Z,2017-08-09T16:40:29Z,MERGED,True,71,60,11,https://github.com/zaq32,[telemetry][eps] Eps driver & telemetrt update.,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/240,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/240,"Update eps driver to match recent firmware changes:

[CtrlA] Remove DISTR.TEMP
[CtrlA] Rename ERR -> SAFETY_CTR
[CtrlA] Add SUPP_TEMP after TEMP, 10 bits
[CtrlB] Rename ERR -> SAFETY_CTR
[CtrlB] Add SUPP_TEMP after TEMP, 10 bits


Update eps telemetry to match driver changes,
Update eps integration tests,
Update eps telemetry element parser



This change is","Update eps driver to match recent firmware changes:

[CtrlA] Remove DISTR.TEMP
[CtrlA] Rename ERR -> SAFETY_CTR
[CtrlA] Add SUPP_TEMP after TEMP, 10 bits
[CtrlB] Rename ERR -> SAFETY_CTR
[CtrlB] Add SUPP_TEMP after TEMP, 10 bits


Update eps telemetry to match driver changes,
Update eps integration tests,
Update eps telemetry element parser



This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,240,2017-08-07T20:50:59Z,2017-08-09T14:10:49Z,2017-08-09T16:40:29Z,MERGED,True,71,60,11,https://github.com/zaq32,[telemetry][eps] Eps driver & telemetrt update.,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/240,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/240#issuecomment-320777105,"Update eps driver to match recent firmware changes:

[CtrlA] Remove DISTR.TEMP
[CtrlA] Rename ERR -> SAFETY_CTR
[CtrlA] Add SUPP_TEMP after TEMP, 10 bits
[CtrlB] Rename ERR -> SAFETY_CTR
[CtrlB] Add SUPP_TEMP after TEMP, 10 bits


Update eps telemetry to match driver changes,
Update eps integration tests,
Update eps telemetry element parser



This change is",[EPS] Update HK,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,240,2017-08-07T20:50:59Z,2017-08-09T14:10:49Z,2017-08-09T16:40:29Z,MERGED,True,71,60,11,https://github.com/zaq32,[telemetry][eps] Eps driver & telemetrt update.,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/240,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/240#issuecomment-321252990,"Update eps driver to match recent firmware changes:

[CtrlA] Remove DISTR.TEMP
[CtrlA] Rename ERR -> SAFETY_CTR
[CtrlA] Add SUPP_TEMP after TEMP, 10 bits
[CtrlB] Rename ERR -> SAFETY_CTR
[CtrlB] Add SUPP_TEMP after TEMP, 10 bits


Update eps telemetry to match driver changes,
Update eps integration tests,
Update eps telemetry element parser



This change is","Reviewed 9 of 10 files at r1, 1 of 1 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,240,2017-08-07T20:50:59Z,2017-08-09T14:10:49Z,2017-08-09T16:40:29Z,MERGED,True,71,60,11,https://github.com/zaq32,[telemetry][eps] Eps driver & telemetrt update.,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/240,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/240#issuecomment-321264892,"Update eps driver to match recent firmware changes:

[CtrlA] Remove DISTR.TEMP
[CtrlA] Rename ERR -> SAFETY_CTR
[CtrlA] Add SUPP_TEMP after TEMP, 10 bits
[CtrlB] Rename ERR -> SAFETY_CTR
[CtrlB] Add SUPP_TEMP after TEMP, 10 bits


Update eps telemetry to match driver changes,
Update eps integration tests,
Update eps telemetry element parser



This change is","Reviewed 1 of 1 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,241,2017-08-08T19:21:11Z,2017-08-10T09:08:34Z,2017-08-10T09:08:35Z,MERGED,True,382,69,18,https://github.com/Novakov,Response for experiments TCs,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/241,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/241,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,241,2017-08-08T19:21:11Z,2017-08-10T09:08:34Z,2017-08-10T09:08:35Z,MERGED,True,382,69,18,https://github.com/Novakov,Response for experiments TCs,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/241,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/241#issuecomment-321343052,This change is,No response frame from experiments TCs,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,241,2017-08-08T19:21:11Z,2017-08-10T09:08:34Z,2017-08-10T09:08:35Z,MERGED,True,382,69,18,https://github.com/Novakov,Response for experiments TCs,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/241,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/241#issuecomment-321462155,This change is,"Reviewed 17 of 17 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,241,2017-08-08T19:21:11Z,2017-08-10T09:08:34Z,2017-08-10T09:08:35Z,MERGED,True,382,69,18,https://github.com/Novakov,Response for experiments TCs,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/241,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/241#issuecomment-321487811,This change is,"Reviewed 5 of 5 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,242,2017-08-10T08:39:12Z,2017-08-10T13:44:58Z,2017-08-10T13:44:59Z,MERGED,True,1518,92,70,https://github.com/Novakov,SunS experiment,16,[],https://github.com/PW-Sat2/PWSat2OBC/pull/242,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/242,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,242,2017-08-10T08:39:12Z,2017-08-10T13:44:58Z,2017-08-10T13:44:59Z,MERGED,True,1518,92,70,https://github.com/Novakov,SunS experiment,16,[],https://github.com/PW-Sat2/PWSat2OBC/pull/242,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/242#issuecomment-321511029,This change is,[Experiment] SunS,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,242,2017-08-10T08:39:12Z,2017-08-10T13:44:58Z,2017-08-10T13:44:59Z,MERGED,True,1518,92,70,https://github.com/Novakov,SunS experiment,16,[],https://github.com/PW-Sat2/PWSat2OBC/pull/242,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/242#issuecomment-321524012,This change is,"Reviewed 69 of 69 files at r1.
Review status: all files reviewed at latest revision, 3 unresolved discussions.

libs/experiments/suns/suns.cpp, line 65 at r1 (raw file):

            this->_remainingSessions = this->_parameters.SamplingSessionsCount();

            this->_primaryDataSet.Open(this->_fs, this->_primaryFileName, FileOpen::CreateAlways, FileAccess::WriteOnly);

unhandled error condition

libs/experiments/suns/suns.cpp, line 66 at r1 (raw file):

            this->_primaryDataSet.Open(this->_fs, this->_primaryFileName, FileOpen::CreateAlways, FileAccess::WriteOnly);
            this->_secondaryDataSet.Open(this->_fs, this->_secondaryFileName, FileOpen::CreateAlways, FileAccess::WriteOnly);

unhandled error condition

libs/experiments/suns/Include/experiment/suns/suns.hpp, line 32 at r1 (raw file):

        {
          public:
            SunSExperimentParams() = default;

default constructor is not sufficient for this class

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,242,2017-08-10T08:39:12Z,2017-08-10T13:44:58Z,2017-08-10T13:44:59Z,MERGED,True,1518,92,70,https://github.com/Novakov,SunS experiment,16,[],https://github.com/PW-Sat2/PWSat2OBC/pull/242,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/242#issuecomment-321529381,This change is,"Review status: 66 of 69 files reviewed at latest revision, 3 unresolved discussions.

libs/experiments/suns/suns.cpp, line 65 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
unhandled error condition

Done.

libs/experiments/suns/suns.cpp, line 66 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
unhandled error condition

Done.

libs/experiments/suns/Include/experiment/suns/suns.hpp, line 32 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
default constructor is not sufficient for this class

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,242,2017-08-10T08:39:12Z,2017-08-10T13:44:58Z,2017-08-10T13:44:59Z,MERGED,True,1518,92,70,https://github.com/Novakov,SunS experiment,16,[],https://github.com/PW-Sat2/PWSat2OBC/pull/242,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/242#issuecomment-321529520,This change is,"Reviewed 3 of 3 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,242,2017-08-10T08:39:12Z,2017-08-10T13:44:58Z,2017-08-10T13:44:59Z,MERGED,True,1518,92,70,https://github.com/Novakov,SunS experiment,16,[],https://github.com/PW-Sat2/PWSat2OBC/pull/242,https://github.com/zaq32,6,https://github.com/PW-Sat2/PWSat2OBC/pull/242#issuecomment-321555275,This change is,"Reviewed 1 of 1 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,243,2017-08-10T08:45:30Z,2017-08-11T06:18:22Z,2017-08-11T06:18:23Z,MERGED,True,1350,26,32,https://github.com/mandrek44,Refactored camera,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/243,https://github.com/mandrek44,1,https://github.com/PW-Sat2/PWSat2OBC/pull/243,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,243,2017-08-10T08:45:30Z,2017-08-11T06:18:22Z,2017-08-11T06:18:23Z,MERGED,True,1350,26,32,https://github.com/mandrek44,Refactored camera,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/243,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/243#issuecomment-321501504,This change is,"Reviewed 28 of 28 files at r1.
Review status: all files reviewed at latest revision, 6 unresolved discussions, some commit checks failed.

libs/drivers/camera/camera.cpp, line 87 at r1 (raw file):

            CameraCmd::None,                             //
            i & 0xff,                                    //
            (uint8_t)(i >> 8),                           //

Use single 16-bit parameter

libs/drivers/camera/camera.cpp, line 89 at r1 (raw file):

            (uint8_t)(i >> 8),                           //
            buffer.subspan(bufferIndex, dataToTake + 6), //
            dataToTake + 6);

You can get length from span size

libs/drivers/camera/Include/camera/camera.h, line 42 at r1 (raw file):

             * @return True if initialization succeeded, false otherwise
             */
            bool Initialize();

We need number of sync retries that were neccessary to sync camera

libs/drivers/camera/Include/camera/camera_types.h, line 198 at r1 (raw file):

            /** @brief Initializes the data structure */
            PictureData() : type(CameraPictureType::Enum::Invalid), dataLength(0)

Do not define ctors inline

libs/drivers/camera/Include/camera/camera_types.h, line 207 at r1 (raw file):

             * @return True if parsed correctly, false if not valid picture data response.
             */
            bool Parse(gsl::span<const uint8_t> command)

Move to .cpp

libs/drivers/camera/Include/camera/camera_types.h, line 215 at r1 (raw file):

                dataLength = (((uint32_t)command[3]) | ((uint32_t)command[4] << 8) | ((uint32_t)command[5] << 16));
                type = CameraPictureType::GetPictureType(command[2]);

You can use Reader here

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,243,2017-08-10T08:45:30Z,2017-08-11T06:18:22Z,2017-08-11T06:18:23Z,MERGED,True,1350,26,32,https://github.com/mandrek44,Refactored camera,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/243,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/243#issuecomment-321527359,This change is,"Reviewed 28 of 28 files at r1.
Review status: all files reviewed at latest revision, 7 unresolved discussions, some commit checks failed.

libs/drivers/camera/command_factory.cpp, line 6 at r1 (raw file):

using namespace devices::camera;

void CommandFactory::BuildAck(Frame cmd, CameraCmd cmdAck, uint8_t packageIdLow, uint8_t packageIdHigh)

use c++ style casts instead of C style casts

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,243,2017-08-10T08:45:30Z,2017-08-11T06:18:22Z,2017-08-11T06:18:23Z,MERGED,True,1350,26,32,https://github.com/mandrek44,Refactored camera,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/243,https://github.com/mandrek44,4,https://github.com/PW-Sat2/PWSat2OBC/pull/243#issuecomment-321536370,This change is,"Review status: 20 of 32 files reviewed at latest revision, 7 unresolved discussions.

libs/drivers/camera/camera.cpp, line 87 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Use single 16-bit parameter

Done.

libs/drivers/camera/camera.cpp, line 89 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
You can get length from span size

Done.

libs/drivers/camera/command_factory.cpp, line 6 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
use c++ style casts instead of C style casts

Done.

libs/drivers/camera/Include/camera/camera.h, line 42 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
We need number of sync retries that were neccessary to sync camera

Done.

libs/drivers/camera/Include/camera/camera_types.h, line 198 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Do not define ctors inline

Done.

libs/drivers/camera/Include/camera/camera_types.h, line 207 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Move to .cpp

Done.

libs/drivers/camera/Include/camera/camera_types.h, line 215 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
You can use Reader here

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,243,2017-08-10T08:45:30Z,2017-08-11T06:18:22Z,2017-08-11T06:18:23Z,MERGED,True,1350,26,32,https://github.com/mandrek44,Refactored camera,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/243,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/243#issuecomment-321615551,This change is,"Reviewed 18 of 18 files at r2.
Review status: all files reviewed at latest revision, 2 unresolved discussions.

libs/drivers/camera/camera.cpp, line 110 at r2 (raw file):

}

uint8_t Camera::CameraSync(uint8_t& syncCount)

Why passing reference if you are zero it and return?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,243,2017-08-10T08:45:30Z,2017-08-11T06:18:22Z,2017-08-11T06:18:23Z,MERGED,True,1350,26,32,https://github.com/mandrek44,Refactored camera,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/243,https://github.com/mandrek44,6,https://github.com/PW-Sat2/PWSat2OBC/pull/243#issuecomment-321639737,This change is,"Review status: 30 of 32 files reviewed at latest revision, 2 unresolved discussions.

libs/drivers/camera/camera.cpp, line 110 at r2 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Why passing reference if you are zero it and return?

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,243,2017-08-10T08:45:30Z,2017-08-11T06:18:22Z,2017-08-11T06:18:23Z,MERGED,True,1350,26,32,https://github.com/mandrek44,Refactored camera,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/243,https://github.com/Novakov,7,https://github.com/PW-Sat2/PWSat2OBC/pull/243#issuecomment-321736780,This change is,"Reviewed 2 of 2 files at r3.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,243,2017-08-10T08:45:30Z,2017-08-11T06:18:22Z,2017-08-11T06:18:23Z,MERGED,True,1350,26,32,https://github.com/mandrek44,Refactored camera,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/243,https://github.com/zaq32,8,https://github.com/PW-Sat2/PWSat2OBC/pull/243#issuecomment-321738795,This change is,"Reviewed 16 of 18 files at r2, 2 of 2 files at r3.
Review status:  all files reviewed at latest revision, all discussions resolved, all commit checks successful.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,244,2017-08-11T06:45:33Z,2017-08-11T09:13:28Z,2017-08-11T12:14:21Z,MERGED,True,696,92,40,https://github.com/Novakov,Erase flash experiment,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/244,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/244,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,244,2017-08-11T06:45:33Z,2017-08-11T09:13:28Z,2017-08-11T12:14:21Z,MERGED,True,696,92,40,https://github.com/Novakov,Erase flash experiment,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/244,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/244#issuecomment-321742946,This change is,"Reviewed 29 of 34 files at r1.
Review status: 29 of 34 files reviewed at latest revision, 1 unresolved discussion.

integration_tests/obc/experiments.py, line 14 at r1 (raw file):

    LEOP = 3
    SunS = 4
    EraseFlash = 7

7 is reserved for Sail

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,244,2017-08-11T06:45:33Z,2017-08-11T09:13:28Z,2017-08-11T12:14:21Z,MERGED,True,696,92,40,https://github.com/Novakov,Erase flash experiment,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/244,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/244#issuecomment-321744840,This change is,[TC] Experiment - Erase flash,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,244,2017-08-11T06:45:33Z,2017-08-11T09:13:28Z,2017-08-11T12:14:21Z,MERGED,True,696,92,40,https://github.com/Novakov,Erase flash experiment,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/244,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/244#issuecomment-321751165,This change is,"Reviewed 5 of 34 files at r1, 1 of 1 files at r2.
Review status: all files reviewed at latest revision, 3 unresolved discussions, some commit checks failed.

libs/experiments/flash/flash.cpp, line 38 at r1 (raw file):

            yaffsfs_Unlock();

            CorrelatedDownlinkFrame frame(DownlinkAPID::Operation, 0, 0x67);

hard coded id?

libs/experiments/flash/Include/experiment/flash/flash.hpp, line 47 at r1 (raw file):

            /** @brief Experiment code */
            static constexpr experiments::ExperimentCode Code = 0x7;

7 is reserved for sail experiment

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,244,2017-08-11T06:45:33Z,2017-08-11T09:13:28Z,2017-08-11T12:14:21Z,MERGED,True,696,92,40,https://github.com/Novakov,Erase flash experiment,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/244,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/244#issuecomment-321757505,This change is,"Review status: all files reviewed at latest revision, 3 unresolved discussions, some commit checks failed.

integration_tests/obc/experiments.py, line 14 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
7 is reserved for Sail

Done.

libs/experiments/flash/flash.cpp, line 38 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
hard coded id?

Done.

libs/experiments/flash/Include/experiment/flash/flash.hpp, line 47 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
7 is reserved for sail experiment

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,244,2017-08-11T06:45:33Z,2017-08-11T09:13:28Z,2017-08-11T12:14:21Z,MERGED,True,696,92,40,https://github.com/Novakov,Erase flash experiment,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/244,https://github.com/Novakov,6,https://github.com/PW-Sat2/PWSat2OBC/pull/244#issuecomment-321757743,This change is,Zweryfikowa IDki eksperymentw,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,244,2017-08-11T06:45:33Z,2017-08-11T09:13:28Z,2017-08-11T12:14:21Z,MERGED,True,696,92,40,https://github.com/Novakov,Erase flash experiment,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/244,https://github.com/zaq32,7,https://github.com/PW-Sat2/PWSat2OBC/pull/244#issuecomment-321759141,This change is,"Reviewed 3 of 3 files at r3, 8 of 8 files at r4.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,245,2017-08-11T08:18:03Z,2017-08-11T17:03:20Z,2017-08-11T17:03:22Z,MERGED,True,1589,9,28,https://github.com/Novakov,Photo service,15,[],https://github.com/PW-Sat2/PWSat2OBC/pull/245,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/245,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,245,2017-08-11T08:18:03Z,2017-08-11T17:03:20Z,2017-08-11T17:03:22Z,MERGED,True,1589,9,28,https://github.com/Novakov,Photo service,15,[],https://github.com/PW-Sat2/PWSat2OBC/pull/245,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/245#issuecomment-321754994,This change is,Photo taking task,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,245,2017-08-11T08:18:03Z,2017-08-11T17:03:20Z,2017-08-11T17:03:22Z,MERGED,True,1589,9,28,https://github.com/Novakov,Photo service,15,[],https://github.com/PW-Sat2/PWSat2OBC/pull/245,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/245#issuecomment-321767098,This change is,"Reviewed 28 of 28 files at r1.
Review status: all files reviewed at latest revision, 1 unresolved discussion, some commit checks failed.

libs/base/Include/base/os.h, line 603 at r1 (raw file):

template <typename Element, std::size_t Capacity> class Queue final
{
    static_assert(std::is_standard_layout<Element>::value, ""Queue works only for standard layout types"");

free rtoses queues are only compatible with pods

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,245,2017-08-11T08:18:03Z,2017-08-11T17:03:20Z,2017-08-11T17:03:22Z,MERGED,True,1589,9,28,https://github.com/Novakov,Photo service,15,[],https://github.com/PW-Sat2/PWSat2OBC/pull/245,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/245#issuecomment-321767392,This change is,"Review status: all files reviewed at latest revision, 7 unresolved discussions, some commit checks failed.

libs/photo/Include/photo/photo_service.hpp, line 60 at r1 (raw file):

        {
          public:
            DisableCamera() = default;

uninitialized field: _which

libs/photo/Include/photo/photo_service.hpp, line 89 at r1 (raw file):

        {
          public:
            EnableCamera() = default;

uninitialized field: _which

libs/photo/Include/photo/photo_service.hpp, line 118 at r1 (raw file):

        {
          public:
            TakePhoto() = default;

uninitialized fields: _which, _resolution

libs/photo/Include/photo/photo_service.hpp, line 161 at r1 (raw file):

        {
          public:
            DownloadPhoto() = default;

uninitialized fields: _which _bufferId

libs/photo/Include/photo/photo_service.hpp, line 204 at r1 (raw file):

        {
          public:
            SavePhoto() = default;

default constructor is not sufficient for this type

libs/photo/Include/photo/photo_service.hpp, line 245 at r1 (raw file):

        {
          public:
            Sleep() = default;

uninitialized field: _duration

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,245,2017-08-11T08:18:03Z,2017-08-11T17:03:20Z,2017-08-11T17:03:22Z,MERGED,True,1589,9,28,https://github.com/Novakov,Photo service,15,[],https://github.com/PW-Sat2/PWSat2OBC/pull/245,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/245#issuecomment-321802211,This change is,"Review status: 24 of 28 files reviewed at latest revision, 1 unresolved discussion.

libs/base/Include/base/os.h, line 603 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
free rtoses queues are only compatible with pods

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,245,2017-08-11T08:18:03Z,2017-08-11T17:03:20Z,2017-08-11T17:03:22Z,MERGED,True,1589,9,28,https://github.com/Novakov,Photo service,15,[],https://github.com/PW-Sat2/PWSat2OBC/pull/245,https://github.com/zaq32,6,https://github.com/PW-Sat2/PWSat2OBC/pull/245#issuecomment-321802214,This change is,"Reviewed 4 of 4 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,245,2017-08-11T08:18:03Z,2017-08-11T17:03:20Z,2017-08-11T17:03:22Z,MERGED,True,1589,9,28,https://github.com/Novakov,Photo service,15,[],https://github.com/PW-Sat2/PWSat2OBC/pull/245,https://github.com/zaq32,7,https://github.com/PW-Sat2/PWSat2OBC/pull/245#issuecomment-321866539,This change is,"Reviewed 1 of 1 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,246,2017-08-11T12:15:58Z,2017-08-13T15:28:34Z,2017-08-13T15:28:35Z,MERGED,True,194,19,5,https://github.com/Novakov,COMM client,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/246,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/246,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,246,2017-08-11T12:15:58Z,2017-08-13T15:28:34Z,2017-08-13T15:28:35Z,MERGED,True,194,19,5,https://github.com/Novakov,COMM client,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/246,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/246#issuecomment-321966671,This change is,"Reviewed 5 of 5 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,247,2017-08-11T12:21:29Z,2017-08-11T18:12:53Z,2017-08-11T18:12:54Z,MERGED,True,781,166,19,https://github.com/mandrek44,Ucam II unit tests,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/247,https://github.com/mandrek44,1,https://github.com/PW-Sat2/PWSat2OBC/pull/247,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,247,2017-08-11T12:21:29Z,2017-08-11T18:12:53Z,2017-08-11T18:12:54Z,MERGED,True,781,166,19,https://github.com/mandrek44,Ucam II unit tests,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/247,https://github.com/mandrek44,2,https://github.com/PW-Sat2/PWSat2OBC/pull/247#issuecomment-321800630,This change is,[CAM] Unit tests,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,247,2017-08-11T12:21:29Z,2017-08-11T18:12:53Z,2017-08-11T18:12:54Z,MERGED,True,781,166,19,https://github.com/mandrek44,Ucam II unit tests,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/247,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/247#issuecomment-321811717,This change is,"Reviewed 10 of 17 files at r1, 9 of 9 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,247,2017-08-11T12:21:29Z,2017-08-11T18:12:53Z,2017-08-11T18:12:54Z,MERGED,True,781,166,19,https://github.com/mandrek44,Ucam II unit tests,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/247,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/247#issuecomment-321870032,This change is,"Reviewed 3 of 3 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,247,2017-08-11T12:21:29Z,2017-08-11T18:12:53Z,2017-08-11T18:12:54Z,MERGED,True,781,166,19,https://github.com/mandrek44,Ucam II unit tests,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/247,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/247#issuecomment-321871876,This change is,[CAM] Error Counters,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,248,2017-08-12T17:06:48Z,2017-08-13T19:22:00Z,2017-08-13T19:22:01Z,MERGED,True,763,6,17,https://github.com/kfazi,Added RadFET experiment,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/248,https://github.com/kfazi,1,https://github.com/PW-Sat2/PWSat2OBC/pull/248,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,248,2017-08-12T17:06:48Z,2017-08-13T19:22:00Z,2017-08-13T19:22:01Z,MERGED,True,763,6,17,https://github.com/kfazi,Added RadFET experiment,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/248,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/248#issuecomment-322049808,This change is,"Reviewed 17 of 17 files at r1.
Review status: all files reviewed at latest revision, 3 unresolved discussions, some commit checks failed.

libs/experiments/radfet/radfet.cpp, line 41 at r1 (raw file):

        }

        experiments::StartResult RadFETExperiment::Start()

this function needs better error handling. Ensure that nothing is left open/enabled/initialized in case of failures.

libs/experiments/radfet/radfet.cpp, line 122 at r1 (raw file):

        }

        void RadFETExperiment::Stop(experiments::IterationResult /* lastResult */)

in case of this function early escape may not be the best approach.  It would be better to proceed to the end regardless of errors

libs/experiments/radfet/radfet.cpp, line 198 at r1 (raw file):

        }

        bool RadFETExperiment::SaveEndTelemetry(

this function differs from the above one with only with one value. Merge those together

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,248,2017-08-12T17:06:48Z,2017-08-13T19:22:00Z,2017-08-13T19:22:01Z,MERGED,True,763,6,17,https://github.com/kfazi,Added RadFET experiment,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/248,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/248#issuecomment-322058221,This change is,[Experiment] RadFET,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,248,2017-08-12T17:06:48Z,2017-08-13T19:22:00Z,2017-08-13T19:22:01Z,MERGED,True,763,6,17,https://github.com/kfazi,Added RadFET experiment,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/248,https://github.com/kfazi,4,https://github.com/PW-Sat2/PWSat2OBC/pull/248#issuecomment-322058732,This change is,"Review status: 15 of 17 files reviewed at latest revision, 3 unresolved discussions.

libs/experiments/radfet/radfet.cpp, line 41 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
this function needs better error handling. Ensure that nothing is left open/enabled/initialized in case of failures.

Done.

libs/experiments/radfet/radfet.cpp, line 122 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
in case of this function early escape may not be the best approach.  It would be better to proceed to the end regardless of errors

Done.

libs/experiments/radfet/radfet.cpp, line 198 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
this function differs from the above one with only with one value. Merge those together

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,248,2017-08-12T17:06:48Z,2017-08-13T19:22:00Z,2017-08-13T19:22:01Z,MERGED,True,763,6,17,https://github.com/kfazi,Added RadFET experiment,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/248,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/248#issuecomment-322058877,This change is,"Reviewed 2 of 2 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,249,2017-08-12T20:30:34Z,2017-08-14T07:57:50Z,2017-08-14T07:57:51Z,MERGED,True,515,42,14,https://github.com/mandrek44,SunS Telecommand,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/249,https://github.com/mandrek44,1,https://github.com/PW-Sat2/PWSat2OBC/pull/249,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,249,2017-08-12T20:30:34Z,2017-08-14T07:57:50Z,2017-08-14T07:57:51Z,MERGED,True,515,42,14,https://github.com/mandrek44,SunS Telecommand,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/249,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/249#issuecomment-322049089,This change is,"Reviewed 14 of 14 files at r1.
Review status: all files reviewed at latest revision, 1 unresolved discussion, some commit checks failed.

libs/obc/communication/telecommands/suns.cpp, line 37 at r1 (raw file):

            uint8_t correlationId = reader.ReadByte();
            uint8_t gain = reader.ReadByte();
            uint8_t itime = reader.ReadByte();

verify reader status before proceeding

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,249,2017-08-12T20:30:34Z,2017-08-14T07:57:50Z,2017-08-14T07:57:51Z,MERGED,True,515,42,14,https://github.com/mandrek44,SunS Telecommand,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/249,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/249#issuecomment-322058209,This change is,[TC] get sample from SunS,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,249,2017-08-12T20:30:34Z,2017-08-14T07:57:50Z,2017-08-14T07:57:51Z,MERGED,True,515,42,14,https://github.com/mandrek44,SunS Telecommand,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/249,https://github.com/mandrek44,4,https://github.com/PW-Sat2/PWSat2OBC/pull/249#issuecomment-322114521,This change is,"Review status: 7 of 14 files reviewed at latest revision, 1 unresolved discussion.

libs/obc/communication/telecommands/suns.cpp, line 37 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
verify reader status before proceeding

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,249,2017-08-12T20:30:34Z,2017-08-14T07:57:50Z,2017-08-14T07:57:51Z,MERGED,True,515,42,14,https://github.com/mandrek44,SunS Telecommand,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/249,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/249#issuecomment-322115155,This change is,"Reviewed 4 of 4 files at r2, 3 of 3 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,250,2017-08-13T14:20:25Z,2017-08-14T06:52:57Z,2017-08-14T06:52:59Z,MERGED,True,418,2,13,https://github.com/Novakov,Experiment file parser,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/250,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/250,"Fix for SunS experiment data (one temperature was missing)
Experiment file parser. Sample output:

Parsed data:
'Synchronization'
{'time': datetime.timedelta(0, 1, 234000)}
{'ExpSunS.Primary': {'Status': {'ALS_ACK': 13107,
                                'ALS_ADC_Valid': 8738,
                                'ALS_Presence': 4369},
                     'Temperatures': {'A': 30583,
                                      'B': 34952,
                                      'C': 39321,
                                      'D': 43690,
                                      'Structure': 26214},
                     'VisibleLight': [[41120, 41377, 41634, 41891],
                                      [45232, 45489, 45746, 46003],
                                      [49344, 49601, 49858, 50115]],
                     'WhoAmI ': 17}}
{'RefSunS': {'Volatages': [57568, 57825, 58082, 58339, 58596]}}
{'Gyro': {'Temperature': 28543, 'X': 3871, 'Y': 12095, 'Z': 20319}}
{'Padding': 159}




This change is","Fix for SunS experiment data (one temperature was missing)
Experiment file parser. Sample output:

Parsed data:
'Synchronization'
{'time': datetime.timedelta(0, 1, 234000)}
{'ExpSunS.Primary': {'Status': {'ALS_ACK': 13107,
                                'ALS_ADC_Valid': 8738,
                                'ALS_Presence': 4369},
                     'Temperatures': {'A': 30583,
                                      'B': 34952,
                                      'C': 39321,
                                      'D': 43690,
                                      'Structure': 26214},
                     'VisibleLight': [[41120, 41377, 41634, 41891],
                                      [45232, 45489, 45746, 46003],
                                      [49344, 49601, 49858, 50115]],
                     'WhoAmI ': 17}}
{'RefSunS': {'Volatages': [57568, 57825, 58082, 58339, 58596]}}
{'Gyro': {'Temperature': 28543, 'X': 3871, 'Y': 12095, 'Z': 20319}}
{'Padding': 159}




This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,250,2017-08-13T14:20:25Z,2017-08-14T06:52:57Z,2017-08-14T06:52:59Z,MERGED,True,418,2,13,https://github.com/Novakov,Experiment file parser,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/250,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/250#issuecomment-322050099,"Fix for SunS experiment data (one temperature was missing)
Experiment file parser. Sample output:

Parsed data:
'Synchronization'
{'time': datetime.timedelta(0, 1, 234000)}
{'ExpSunS.Primary': {'Status': {'ALS_ACK': 13107,
                                'ALS_ADC_Valid': 8738,
                                'ALS_Presence': 4369},
                     'Temperatures': {'A': 30583,
                                      'B': 34952,
                                      'C': 39321,
                                      'D': 43690,
                                      'Structure': 26214},
                     'VisibleLight': [[41120, 41377, 41634, 41891],
                                      [45232, 45489, 45746, 46003],
                                      [49344, 49601, 49858, 50115]],
                     'WhoAmI ': 17}}
{'RefSunS': {'Volatages': [57568, 57825, 58082, 58339, 58596]}}
{'Gyro': {'Temperature': 28543, 'X': 3871, 'Y': 12095, 'Z': 20319}}
{'Padding': 159}




This change is","Reviewed 12 of 12 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,250,2017-08-13T14:20:25Z,2017-08-14T06:52:57Z,2017-08-14T06:52:59Z,MERGED,True,418,2,13,https://github.com/Novakov,Experiment file parser,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/250,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/250#issuecomment-322106538,"Fix for SunS experiment data (one temperature was missing)
Experiment file parser. Sample output:

Parsed data:
'Synchronization'
{'time': datetime.timedelta(0, 1, 234000)}
{'ExpSunS.Primary': {'Status': {'ALS_ACK': 13107,
                                'ALS_ADC_Valid': 8738,
                                'ALS_Presence': 4369},
                     'Temperatures': {'A': 30583,
                                      'B': 34952,
                                      'C': 39321,
                                      'D': 43690,
                                      'Structure': 26214},
                     'VisibleLight': [[41120, 41377, 41634, 41891],
                                      [45232, 45489, 45746, 46003],
                                      [49344, 49601, 49858, 50115]],
                     'WhoAmI ': 17}}
{'RefSunS': {'Volatages': [57568, 57825, 58082, 58339, 58596]}}
{'Gyro': {'Temperature': 28543, 'X': 3871, 'Y': 12095, 'Z': 20319}}
{'Padding': 159}




This change is",Dekoder plikw eksperymentw,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,250,2017-08-13T14:20:25Z,2017-08-14T06:52:57Z,2017-08-14T06:52:59Z,MERGED,True,418,2,13,https://github.com/Novakov,Experiment file parser,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/250,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/250#issuecomment-322108012,"Fix for SunS experiment data (one temperature was missing)
Experiment file parser. Sample output:

Parsed data:
'Synchronization'
{'time': datetime.timedelta(0, 1, 234000)}
{'ExpSunS.Primary': {'Status': {'ALS_ACK': 13107,
                                'ALS_ADC_Valid': 8738,
                                'ALS_Presence': 4369},
                     'Temperatures': {'A': 30583,
                                      'B': 34952,
                                      'C': 39321,
                                      'D': 43690,
                                      'Structure': 26214},
                     'VisibleLight': [[41120, 41377, 41634, 41891],
                                      [45232, 45489, 45746, 46003],
                                      [49344, 49601, 49858, 50115]],
                     'WhoAmI ': 17}}
{'RefSunS': {'Volatages': [57568, 57825, 58082, 58339, 58596]}}
{'Gyro': {'Temperature': 28543, 'X': 3871, 'Y': 12095, 'Z': 20319}}
{'Padding': 159}




This change is","Reviewed 1 of 1 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,251,2017-08-13T18:21:37Z,2017-08-14T13:30:19Z,2017-08-14T13:30:20Z,MERGED,True,1693,262,48,https://github.com/zaq32,Add Sail Experiment,34,[],https://github.com/PW-Sat2/PWSat2OBC/pull/251,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/251,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,251,2017-08-13T18:21:37Z,2017-08-14T13:30:19Z,2017-08-14T13:30:20Z,MERGED,True,1693,262,48,https://github.com/zaq32,Add Sail Experiment,34,[],https://github.com/PW-Sat2/PWSat2OBC/pull/251,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/251#issuecomment-322058194,This change is,[Experiment] SAIL,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,251,2017-08-13T18:21:37Z,2017-08-14T13:30:19Z,2017-08-14T13:30:20Z,MERGED,True,1693,262,48,https://github.com/zaq32,Add Sail Experiment,34,[],https://github.com/PW-Sat2/PWSat2OBC/pull/251,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/251#issuecomment-322126839,This change is,"Reviewed 35 of 46 files at r1, 1 of 1 files at r2.
Review status: 36 of 47 files reviewed at latest revision, 1 unresolved discussion, some commit checks failed.

unit_tests/communication/CMakeLists.txt, line 38 at r2 (raw file):

    obc_telecommands
    boot_settings
    experiments

Never not too much experiments ;

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,251,2017-08-13T18:21:37Z,2017-08-14T13:30:19Z,2017-08-14T13:30:20Z,MERGED,True,1693,262,48,https://github.com/zaq32,Add Sail Experiment,34,[],https://github.com/PW-Sat2/PWSat2OBC/pull/251,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/251#issuecomment-322142732,This change is,"Review status: 24 of 47 files reviewed at latest revision, 1 unresolved discussion.

unit_tests/communication/CMakeLists.txt, line 38 at r2 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Never not too much experiments ;

Fixed

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,251,2017-08-13T18:21:37Z,2017-08-14T13:30:19Z,2017-08-14T13:30:20Z,MERGED,True,1693,262,48,https://github.com/zaq32,Add Sail Experiment,34,[],https://github.com/PW-Sat2/PWSat2OBC/pull/251,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/251#issuecomment-322151647,This change is,"Reviewed 11 of 46 files at r1.
Review status: 33 of 47 files reviewed at latest revision, 4 unresolved discussions.

integration_tests/tests/test_experiment_sail.py, line 29 at r2 (raw file):

        self.assertEqual(frame.correlation_id, 10);

    def test_experiment_startup(self):

join test_experiment_start and test_experiment_startup

libs/experiments/sail/sail.cpp, line 316 at r3 (raw file):

        void SailExperiment::SavePhotos()
        {
            for (std::uint8_t index = 0; !this->_photoService.IsEmpty(index); ++index)

Do not abort after first empty buffer

unit_tests/others/photos/PhotoServiceTest.cpp, line 88 at r2 (raw file):

    }

    TEST_F(PhotoServiceTest, AllBuffersAreEmptBeyondLimit)

Empty

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,251,2017-08-13T18:21:37Z,2017-08-14T13:30:19Z,2017-08-14T13:30:20Z,MERGED,True,1693,262,48,https://github.com/zaq32,Add Sail Experiment,34,[],https://github.com/PW-Sat2/PWSat2OBC/pull/251,https://github.com/Novakov,6,https://github.com/PW-Sat2/PWSat2OBC/pull/251#issuecomment-322151862,This change is,"Reviewed 14 of 14 files at r3.
Review status: all files reviewed at latest revision, 3 unresolved discussions.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,251,2017-08-13T18:21:37Z,2017-08-14T13:30:19Z,2017-08-14T13:30:20Z,MERGED,True,1693,262,48,https://github.com/zaq32,Add Sail Experiment,34,[],https://github.com/PW-Sat2/PWSat2OBC/pull/251,https://github.com/zaq32,7,https://github.com/PW-Sat2/PWSat2OBC/pull/251#issuecomment-322160243,This change is,"Review status: 44 of 48 files reviewed at latest revision, 3 unresolved discussions.

integration_tests/tests/test_experiment_sail.py, line 29 at r2 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
join test_experiment_start and test_experiment_startup

Fixed

libs/experiments/sail/sail.cpp, line 316 at r3 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Do not abort after first empty buffer

Fixed

unit_tests/others/photos/PhotoServiceTest.cpp, line 88 at r2 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Empty

Fixed

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,251,2017-08-13T18:21:37Z,2017-08-14T13:30:19Z,2017-08-14T13:30:20Z,MERGED,True,1693,262,48,https://github.com/zaq32,Add Sail Experiment,34,[],https://github.com/PW-Sat2/PWSat2OBC/pull/251,https://github.com/Novakov,8,https://github.com/PW-Sat2/PWSat2OBC/pull/251#issuecomment-322161680,This change is,"Reviewed 4 of 4 files at r4.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,252,2017-08-14T02:26:51Z,2017-08-14T05:54:00Z,2017-08-14T05:54:01Z,MERGED,True,1,1,1,https://github.com/pkuligowski,EPS HK/UPTIME printf specifier fix in OBC terminal,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/252,https://github.com/pkuligowski,1,https://github.com/PW-Sat2/PWSat2OBC/pull/252,"0xFFFF was printed as -1 in OBC terminal (long uint conversion to long int). This number should be printed as 4294967295. The %lu instead of %ld printf specifier fixes this issue.


This change is","0xFFFF was printed as -1 in OBC terminal (long uint conversion to long int). This number should be printed as 4294967295. The %lu instead of %ld printf specifier fixes this issue.


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,252,2017-08-14T02:26:51Z,2017-08-14T05:54:00Z,2017-08-14T05:54:01Z,MERGED,True,1,1,1,https://github.com/pkuligowski,EPS HK/UPTIME printf specifier fix in OBC terminal,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/252,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/252#issuecomment-322105754,"0xFFFF was printed as -1 in OBC terminal (long uint conversion to long int). This number should be printed as 4294967295. The %lu instead of %ld printf specifier fixes this issue.


This change is","Reviewed 1 of 1 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,253,2017-08-14T10:34:05Z,2017-08-14T17:50:32Z,2017-08-14T17:50:33Z,MERGED,True,81,30,6,https://github.com/mandrek44,Added camera related commands to ease cam operations,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/253,https://github.com/mandrek44,1,https://github.com/PW-Sat2/PWSat2OBC/pull/253,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,253,2017-08-14T10:34:05Z,2017-08-14T17:50:32Z,2017-08-14T17:50:33Z,MERGED,True,81,30,6,https://github.com/mandrek44,Added camera related commands to ease cam operations,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/253,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/253#issuecomment-322162131,This change is,"Reviewed 6 of 6 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,254,2017-08-14T10:57:37Z,2017-08-14T20:23:09Z,2017-08-14T20:23:10Z,MERGED,True,176,9,12,https://github.com/zaq32,[mission][comm] Synchronize mission with comm hardware polling task.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/254,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/254,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,254,2017-08-14T10:57:37Z,2017-08-14T20:23:09Z,2017-08-14T20:23:10Z,MERGED,True,176,9,12,https://github.com/zaq32,[mission][comm] Synchronize mission with comm hardware polling task.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/254,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/254#issuecomment-322161578,This change is,Watchdog dla COMMa w formie blokowania misji,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,254,2017-08-14T10:57:37Z,2017-08-14T20:23:09Z,2017-08-14T20:23:10Z,MERGED,True,176,9,12,https://github.com/zaq32,[mission][comm] Synchronize mission with comm hardware polling task.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/254,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/254#issuecomment-322254874,This change is,"Reviewed 12 of 12 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,254,2017-08-14T10:57:37Z,2017-08-14T20:23:09Z,2017-08-14T20:23:10Z,MERGED,True,176,9,12,https://github.com/zaq32,[mission][comm] Synchronize mission with comm hardware polling task.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/254,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/254#issuecomment-322293969,This change is,"Reviewed 2 of 2 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,255,2017-08-14T12:21:03Z,2017-08-16T14:23:06Z,2017-08-16T14:23:08Z,MERGED,True,144,5,4,https://github.com/kfazi,Made CommObject thread-safe,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/255,https://github.com/kfazi,1,https://github.com/PW-Sat2/PWSat2OBC/pull/255,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,255,2017-08-14T12:21:03Z,2017-08-16T14:23:06Z,2017-08-16T14:23:08Z,MERGED,True,144,5,4,https://github.com/kfazi,Made CommObject thread-safe,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/255,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/255#issuecomment-322178429,This change is,Make COMM driver thread-safe,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,255,2017-08-14T12:21:03Z,2017-08-16T14:23:06Z,2017-08-16T14:23:08Z,MERGED,True,144,5,4,https://github.com/kfazi,Made CommObject thread-safe,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/255,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/255#issuecomment-322187638,This change is,"Reviewed 1 of 4 files at r1.
Review status: 1 of 4 files reviewed at latest revision, 1 unresolved discussion.

libs/drivers/comm/comm.cpp, line 66 at r1 (raw file):

    }
}

Have you just created wrapper around RTOS semaphore that adapts it to UniqueLock? Why not plain semaphore + Lock?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,255,2017-08-14T12:21:03Z,2017-08-16T14:23:06Z,2017-08-16T14:23:08Z,MERGED,True,144,5,4,https://github.com/kfazi,Made CommObject thread-safe,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/255,https://github.com/kfazi,4,https://github.com/PW-Sat2/PWSat2OBC/pull/255#issuecomment-322188340,This change is,"Review status: 1 of 4 files reviewed at latest revision, 1 unresolved discussion.

libs/drivers/comm/comm.cpp, line 66 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Have you just created wrapper around RTOS semaphore that adapts it to UniqueLock? Why not plain semaphore + Lock?

At first I thought there will be more places that need synchronization and implementation persisted. Do you want me to simplify this?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,255,2017-08-14T12:21:03Z,2017-08-16T14:23:06Z,2017-08-16T14:23:08Z,MERGED,True,144,5,4,https://github.com/kfazi,Made CommObject thread-safe,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/255,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/255#issuecomment-322189178,This change is,"Review status: 1 of 4 files reviewed at latest revision, 1 unresolved discussion.

libs/drivers/comm/comm.cpp, line 66 at r1 (raw file):
Previously, kfazi wrote
At first I thought there will be more places that need synchronization and implementation persisted. Do you want me to simplify this?

Yes, please :)

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,255,2017-08-14T12:21:03Z,2017-08-16T14:23:06Z,2017-08-16T14:23:08Z,MERGED,True,144,5,4,https://github.com/kfazi,Made CommObject thread-safe,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/255,https://github.com/zaq32,6,https://github.com/PW-Sat2/PWSat2OBC/pull/255#issuecomment-322190053,This change is,"Reviewed 4 of 4 files at r1.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,255,2017-08-14T12:21:03Z,2017-08-16T14:23:06Z,2017-08-16T14:23:08Z,MERGED,True,144,5,4,https://github.com/kfazi,Made CommObject thread-safe,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/255,https://github.com/kfazi,7,https://github.com/PW-Sat2/PWSat2OBC/pull/255#issuecomment-322191255,This change is,"Review status: 2 of 4 files reviewed at latest revision, 1 unresolved discussion, some commit checks failed.

libs/drivers/comm/comm.cpp, line 66 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Yes, please :)

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,255,2017-08-14T12:21:03Z,2017-08-16T14:23:06Z,2017-08-16T14:23:08Z,MERGED,True,144,5,4,https://github.com/kfazi,Made CommObject thread-safe,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/255,https://github.com/zaq32,8,https://github.com/PW-Sat2/PWSat2OBC/pull/255#issuecomment-322674073,This change is,"Reviewed 2 of 2 files at r2.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,256,2017-08-14T12:30:34Z,2017-08-14T15:03:16Z,2017-08-14T15:03:17Z,MERGED,True,80,2,6,https://github.com/zaq32,Sail parser,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/256,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/256,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,256,2017-08-14T12:30:34Z,2017-08-14T15:03:16Z,2017-08-14T15:03:17Z,MERGED,True,80,2,6,https://github.com/zaq32,Sail parser,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/256,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/256#issuecomment-322190737,This change is,"Reviewed 6 of 6 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,257,2017-08-14T13:45:04Z,2017-08-16T15:38:59Z,2017-08-17T08:14:26Z,MERGED,True,372,17,17,https://github.com/zaq32,[Telecommand] Take photo,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/257,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/257,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,257,2017-08-14T13:45:04Z,2017-08-16T15:38:59Z,2017-08-17T08:14:26Z,MERGED,True,372,17,17,https://github.com/zaq32,[Telecommand] Take photo,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/257,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/257#issuecomment-322194090,This change is,[TC] Take photo,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,257,2017-08-14T13:45:04Z,2017-08-16T15:38:59Z,2017-08-17T08:14:26Z,MERGED,True,372,17,17,https://github.com/zaq32,[Telecommand] Take photo,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/257,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/257#issuecomment-322790566,This change is,"Reviewed 12 of 17 files at r1, 5 of 5 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,258,2017-08-14T15:33:34Z,2017-08-14T16:27:54Z,2017-08-14T16:29:54Z,MERGED,True,225,500,14,https://github.com/Novakov,Photo service API rework,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/258,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/258,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,258,2017-08-14T15:33:34Z,2017-08-14T16:27:54Z,2017-08-14T16:29:54Z,MERGED,True,225,500,14,https://github.com/Novakov,Photo service API rework,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/258,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/258#issuecomment-322238447,This change is,"Reviewed 14 of 14 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,258,2017-08-14T15:33:34Z,2017-08-14T16:27:54Z,2017-08-14T16:29:54Z,MERGED,True,225,500,14,https://github.com/Novakov,Photo service API rework,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/258,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/258#issuecomment-322238973,This change is,[PhotoService] Constructors for commands,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,258,2017-08-14T15:33:34Z,2017-08-14T16:27:54Z,2017-08-14T16:29:54Z,MERGED,True,225,500,14,https://github.com/Novakov,Photo service API rework,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/258,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/258#issuecomment-322239005,This change is,Extend photo service with possibility to clear command queue,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,259,2017-08-14T18:33:45Z,2017-08-14T19:16:40Z,2017-08-17T08:14:25Z,MERGED,True,5,2,1,https://github.com/zaq32,[n25q][error_counters] Mask n25q error counters so they will not trig,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/259,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/259,"ger power cycle in case of repeated errors.


This change is","ger power cycle in case of repeated errors.


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,259,2017-08-14T18:33:45Z,2017-08-14T19:16:40Z,2017-08-17T08:14:25Z,MERGED,True,5,2,1,https://github.com/zaq32,[n25q][error_counters] Mask n25q error counters so they will not trig,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/259,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/259#issuecomment-322271550,"ger power cycle in case of repeated errors.


This change is",Mask N25Q flashes from error counters,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,259,2017-08-14T18:33:45Z,2017-08-14T19:16:40Z,2017-08-17T08:14:25Z,MERGED,True,5,2,1,https://github.com/zaq32,[n25q][error_counters] Mask n25q error counters so they will not trig,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/259,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/259#issuecomment-322272012,"ger power cycle in case of repeated errors.


This change is","Reviewed 1 of 1 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,260,2017-08-14T19:37:08Z,2017-08-19T08:55:28Z,2017-08-19T08:55:30Z,MERGED,True,1154,41,33,https://github.com/tom4r,Experiment payload,13,[],https://github.com/PW-Sat2/PWSat2OBC/pull/260,https://github.com/tom4r,1,https://github.com/PW-Sat2/PWSat2OBC/pull/260,"Camera commisionning is separated to another pull request.
OBC telemetry may be unfinished.



This change is","Camera commisionning is separated to another pull request.
OBC telemetry may be unfinished.



This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,260,2017-08-14T19:37:08Z,2017-08-19T08:55:28Z,2017-08-19T08:55:30Z,MERGED,True,1154,41,33,https://github.com/tom4r,Experiment payload,13,[],https://github.com/PW-Sat2/PWSat2OBC/pull/260,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/260#issuecomment-322288657,"Camera commisionning is separated to another pull request.
OBC telemetry may be unfinished.



This change is","Reviewed 16 of 28 files at r1.
Review status: 16 of 28 files reviewed at latest revision, 2 unresolved discussions.

src/obc.cpp, line 98 at r1 (raw file):

          this->Hardware.Pins.SailIndicator, //
          this->Hardware.EPS,
          &(this->Fdir),

unnecessary parenthesis

src/obc.cpp, line 99 at r1 (raw file):

          this->Hardware.EPS,
          &(this->Fdir),
          &(this->Hardware.MCUTemperature)), //

unnecessary parenthesis

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,260,2017-08-14T19:37:08Z,2017-08-19T08:55:28Z,2017-08-19T08:55:30Z,MERGED,True,1154,41,33,https://github.com/tom4r,Experiment payload,13,[],https://github.com/PW-Sat2/PWSat2OBC/pull/260,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/260#issuecomment-322289625,"Camera commisionning is separated to another pull request.
OBC telemetry may be unfinished.



This change is","Review status: 16 of 28 files reviewed at latest revision, 3 unresolved discussions.

libs/experiments/fs/ExperimentFile.cpp, line 35 at r1 (raw file):

if (this != &other)
{
this->_time = other._time;
this->_hasPayloadInFrame = other._hasPayloadInFrame;
std::swap(_buffer, other._buffer);
_writer.InitializeAndTryRestore(_buffer, other._writer);
}

try this:
ExperimentFile tmp(std::move(other));
tmp.swap(*this);
return *this;


Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,260,2017-08-14T19:37:08Z,2017-08-19T08:55:28Z,2017-08-19T08:55:30Z,MERGED,True,1154,41,33,https://github.com/tom4r,Experiment payload,13,[],https://github.com/PW-Sat2/PWSat2OBC/pull/260,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/260#issuecomment-322290613,"Camera commisionning is separated to another pull request.
OBC telemetry may be unfinished.



This change is","Reviewed 1 of 28 files at r1.
Review status: 17 of 28 files reviewed at latest revision, 7 unresolved discussions.

libs/experiments/fs/ExperimentFile.cpp, line 19 at r1 (raw file):

}

ExperimentFile::ExperimentFile(ExperimentFile&& other) : _time(other._time), _hasPayloadInFrame(other._hasPayloadInFrame)

mark as noexcept

libs/experiments/fs/ExperimentFile.cpp, line 24 at r1 (raw file):

    other._hasPayloadInFrame = 0;
    _file = std::move(other._file);
    std::swap(_buffer, other._buffer);

buffer can be simply copied in here.

libs/experiments/fs/ExperimentFile.cpp, line 25 at r1 (raw file):

    _file = std::move(other._file);
    std::swap(_buffer, other._buffer);
    _writer.InitializeAndTryRestore(_buffer, other._writer);

consider this:
_writer.Initialize(_buffer);          // <- this can be replaced with constructor call in initializer list
_writer.Reserve(other._writer.GetDataLength());


libs/experiments/fs/ExperimentFile.cpp, line 28 at r1 (raw file):

}

ExperimentFile& ExperimentFile::operator=(ExperimentFile&& other)

mark as noexcept

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,260,2017-08-14T19:37:08Z,2017-08-19T08:55:28Z,2017-08-19T08:55:30Z,MERGED,True,1154,41,33,https://github.com/tom4r,Experiment payload,13,[],https://github.com/PW-Sat2/PWSat2OBC/pull/260,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/260#issuecomment-322290846,"Camera commisionning is separated to another pull request.
OBC telemetry may be unfinished.



This change is","Reviewed 2 of 28 files at r1.
Review status: 19 of 28 files reviewed at latest revision, 7 unresolved discussions.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,260,2017-08-14T19:37:08Z,2017-08-19T08:55:28Z,2017-08-19T08:55:30Z,MERGED,True,1154,41,33,https://github.com/tom4r,Experiment payload,13,[],https://github.com/PW-Sat2/PWSat2OBC/pull/260,https://github.com/zaq32,6,https://github.com/PW-Sat2/PWSat2OBC/pull/260#issuecomment-322291250,"Camera commisionning is separated to another pull request.
OBC telemetry may be unfinished.



This change is","Reviewed 5 of 28 files at r1.
Review status: 24 of 28 files reviewed at latest revision, 7 unresolved discussions.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,260,2017-08-14T19:37:08Z,2017-08-19T08:55:28Z,2017-08-19T08:55:30Z,MERGED,True,1154,41,33,https://github.com/tom4r,Experiment payload,13,[],https://github.com/PW-Sat2/PWSat2OBC/pull/260,https://github.com/tom4r,7,https://github.com/PW-Sat2/PWSat2OBC/pull/260#issuecomment-322440870,"Camera commisionning is separated to another pull request.
OBC telemetry may be unfinished.



This change is","Review status: 20 of 27 files reviewed at latest revision, 7 unresolved discussions, some commit checks failed.

libs/experiments/fs/ExperimentFile.cpp, line 19 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
mark as noexcept

Done.

libs/experiments/fs/ExperimentFile.cpp, line 24 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
buffer can be simply copied in here.

Fixed.

libs/experiments/fs/ExperimentFile.cpp, line 25 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
consider this:
_writer.Initialize(_buffer);          // <- this can be replaced with constructor call in initializer list
_writer.Reserve(other._writer.GetDataLength());


Fixed.

libs/experiments/fs/ExperimentFile.cpp, line 28 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
mark as noexcept

Done.

libs/experiments/fs/ExperimentFile.cpp, line 35 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote

if (this != &other)
{
this->_time = other._time;
this->_hasPayloadInFrame = other._hasPayloadInFrame;
std::swap(_buffer, other._buffer);
_writer.InitializeAndTryRestore(_buffer, other._writer);
}

try this:
ExperimentFile tmp(std::move(other));
tmp.swap(*this);
return *this;


Done.

src/obc.cpp, line 98 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
unnecessary parenthesis

Fixed.

src/obc.cpp, line 99 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
unnecessary parenthesis

Fixed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,260,2017-08-14T19:37:08Z,2017-08-19T08:55:28Z,2017-08-19T08:55:30Z,MERGED,True,1154,41,33,https://github.com/tom4r,Experiment payload,13,[],https://github.com/PW-Sat2/PWSat2OBC/pull/260,https://github.com/zaq32,8,https://github.com/PW-Sat2/PWSat2OBC/pull/260#issuecomment-322673858,"Camera commisionning is separated to another pull request.
OBC telemetry may be unfinished.



This change is","Reviewed 3 of 4 files at r2.
Review status: 23 of 27 files reviewed at latest revision, 1 unresolved discussion, some commit checks failed.

libs/experiments/fs/ExperimentFile.cpp, line 35 at r1 (raw file):
Previously, tom4r wrote
Done.

This will not work as std::swap is using move assignment operator therefore this function should crash with stack overflow (infinite recurency)

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,260,2017-08-14T19:37:08Z,2017-08-19T08:55:28Z,2017-08-19T08:55:30Z,MERGED,True,1154,41,33,https://github.com/tom4r,Experiment payload,13,[],https://github.com/PW-Sat2/PWSat2OBC/pull/260,https://github.com/zaq32,9,https://github.com/PW-Sat2/PWSat2OBC/pull/260#issuecomment-322674258,"Camera commisionning is separated to another pull request.
OBC telemetry may be unfinished.



This change is",[Experiment] PLD commissioning,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,260,2017-08-14T19:37:08Z,2017-08-19T08:55:28Z,2017-08-19T08:55:30Z,MERGED,True,1154,41,33,https://github.com/tom4r,Experiment payload,13,[],https://github.com/PW-Sat2/PWSat2OBC/pull/260,https://github.com/tom4r,10,https://github.com/PW-Sat2/PWSat2OBC/pull/260#issuecomment-322861989,"Camera commisionning is separated to another pull request.
OBC telemetry may be unfinished.



This change is","Review status: 15 of 27 files reviewed at latest revision, 1 unresolved discussion.

libs/experiments/fs/ExperimentFile.cpp, line 35 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
This will not work as std::swap is using move assignment operator therefore this function should crash with stack overflow (infinite recurency)

Right, should be better now.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,260,2017-08-14T19:37:08Z,2017-08-19T08:55:28Z,2017-08-19T08:55:30Z,MERGED,True,1154,41,33,https://github.com/tom4r,Experiment payload,13,[],https://github.com/PW-Sat2/PWSat2OBC/pull/260,https://github.com/zaq32,11,https://github.com/PW-Sat2/PWSat2OBC/pull/260#issuecomment-322987896,"Camera commisionning is separated to another pull request.
OBC telemetry may be unfinished.



This change is","Reviewed 4 of 28 files at r1, 4 of 5 files at r3, 4 of 4 files at r4.
Review status: all files reviewed at latest revision, 3 unresolved discussions, some commit checks failed.

libs/experiments/payload/payload_exp.cpp, line 41 at r4 (raw file):

        {
            std::strncpy(this->_fileName, fileName, sizeof(this->_fileName));
            *std::end(this->_fileName) = '\0';

buffer overflow std::end returns iterator to first element after the buffer end.

libs/experiments/payload/payload_exp.cpp, line 113 at r4 (raw file):

            _powerControl.SensPower(false);

            return IterationResult::WaitForNextCycle;

this will introduce > 10 delay to the next iteration is this intended?

libs/obc/communication/telecommands/experiments.cpp, line 244 at r4 (raw file):

            memcpy(filePath, outputFile.data(), outputFile.size());
            filePath[count_of(filePath) - 1] = '\0';

this will not work if the filename is shorter than 30 characters as null terminating character is not included in the span returned from the reader.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,260,2017-08-14T19:37:08Z,2017-08-19T08:55:28Z,2017-08-19T08:55:30Z,MERGED,True,1154,41,33,https://github.com/tom4r,Experiment payload,13,[],https://github.com/PW-Sat2/PWSat2OBC/pull/260,https://github.com/zaq32,12,https://github.com/PW-Sat2/PWSat2OBC/pull/260#issuecomment-322988049,"Camera commisionning is separated to another pull request.
OBC telemetry may be unfinished.



This change is","Review status: all files reviewed at latest revision, 3 unresolved discussions, some commit checks failed.

libs/obc/communication/telecommands/experiments.cpp, line 244 at r4 (raw file):
Previously, zaq32 (ukasz ak) wrote
this will not work if the filename is shorter than 30 characters as null terminating character is not included in the span returned from the reader.

Which most likely means that ReadString does not correctly account for the terminating null character.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,260,2017-08-14T19:37:08Z,2017-08-19T08:55:28Z,2017-08-19T08:55:30Z,MERGED,True,1154,41,33,https://github.com/tom4r,Experiment payload,13,[],https://github.com/PW-Sat2/PWSat2OBC/pull/260,https://github.com/tom4r,13,https://github.com/PW-Sat2/PWSat2OBC/pull/260#issuecomment-323011771,"Camera commisionning is separated to another pull request.
OBC telemetry may be unfinished.



This change is","Review status: 17 of 27 files reviewed at latest revision, 3 unresolved discussions.

libs/experiments/payload/payload_exp.cpp, line 41 at r4 (raw file):
Previously, zaq32 (ukasz ak) wrote
buffer overflow std::end returns iterator to first element after the buffer end.

Fixed.

libs/experiments/payload/payload_exp.cpp, line 113 at r4 (raw file):
Previously, zaq32 (ukasz ak) wrote
this will introduce > 10 delay to the next iteration is this intended?

Not really. Changed to LoopImmediately

libs/obc/communication/telecommands/experiments.cpp, line 244 at r4 (raw file):
Previously, zaq32 (ukasz ak) wrote
Which most likely means that ReadString does not correctly account for the terminating null character.

Fixed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,260,2017-08-14T19:37:08Z,2017-08-19T08:55:28Z,2017-08-19T08:55:30Z,MERGED,True,1154,41,33,https://github.com/tom4r,Experiment payload,13,[],https://github.com/PW-Sat2/PWSat2OBC/pull/260,https://github.com/zaq32,14,https://github.com/PW-Sat2/PWSat2OBC/pull/260#issuecomment-323164123,"Camera commisionning is separated to another pull request.
OBC telemetry may be unfinished.



This change is","Reviewed 11 of 11 files at r5.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

libs/obc/communication/telecommands/experiments.cpp, line 244 at r4 (raw file):
Previously, tom4r wrote
Fixed.

unfortunatelly its not. right now we have possble read buffer overflow on outputfile span

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,260,2017-08-14T19:37:08Z,2017-08-19T08:55:28Z,2017-08-19T08:55:30Z,MERGED,True,1154,41,33,https://github.com/tom4r,Experiment payload,13,[],https://github.com/PW-Sat2/PWSat2OBC/pull/260,https://github.com/Novakov,15,https://github.com/PW-Sat2/PWSat2OBC/pull/260#issuecomment-323164963,"Camera commisionning is separated to another pull request.
OBC telemetry may be unfinished.



This change is","Reviewed 13 of 28 files at r1.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

libs/obc/communication/telecommands/experiments.cpp, line 244 at r4 (raw file):
Previously, zaq32 (ukasz ak) wrote
unfortunatelly its not. right now we have possble read buffer overflow on outputfile span

If Payload experiment is copying file name to internal field (which it does) there is no need to copy it from parameters to local variable

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,260,2017-08-14T19:37:08Z,2017-08-19T08:55:28Z,2017-08-19T08:55:30Z,MERGED,True,1154,41,33,https://github.com/tom4r,Experiment payload,13,[],https://github.com/PW-Sat2/PWSat2OBC/pull/260,https://github.com/zaq32,16,https://github.com/PW-Sat2/PWSat2OBC/pull/260#issuecomment-323165372,"Camera commisionning is separated to another pull request.
OBC telemetry may be unfinished.



This change is","Review status: all files reviewed at latest revision, 1 unresolved discussion.

libs/obc/communication/telecommands/experiments.cpp, line 244 at r4 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
If Payload experiment is copying file name to internal field (which it does) there is no need to copy it from parameters to local variable

you can also try this:
vsnprintf(filePath, count_of(filePath), ""%.*s"", outputFile.size(), outputFile.data());


Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,260,2017-08-14T19:37:08Z,2017-08-19T08:55:28Z,2017-08-19T08:55:30Z,MERGED,True,1154,41,33,https://github.com/tom4r,Experiment payload,13,[],https://github.com/PW-Sat2/PWSat2OBC/pull/260,https://github.com/tom4r,17,https://github.com/PW-Sat2/PWSat2OBC/pull/260#issuecomment-323428766,"Camera commisionning is separated to another pull request.
OBC telemetry may be unfinished.



This change is","Review status: 23 of 33 files reviewed at latest revision, 1 unresolved discussion.

libs/obc/communication/telecommands/experiments.cpp, line 244 at r4 (raw file):
Previously, zaq32 (ukasz ak) wrote
you can also try this:
vsnprintf(filePath, count_of(filePath), ""%.*s"", outputFile.size(), outputFile.data());


I hope now it would work correctly. :)

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,260,2017-08-14T19:37:08Z,2017-08-19T08:55:28Z,2017-08-19T08:55:30Z,MERGED,True,1154,41,33,https://github.com/tom4r,Experiment payload,13,[],https://github.com/PW-Sat2/PWSat2OBC/pull/260,https://github.com/zaq32,18,https://github.com/PW-Sat2/PWSat2OBC/pull/260#issuecomment-323510802,"Camera commisionning is separated to another pull request.
OBC telemetry may be unfinished.



This change is","Reviewed 10 of 10 files at r6.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,261,2017-08-15T16:41:59Z,2017-08-17T07:29:02Z,2017-08-17T07:29:03Z,MERGED,True,18,14,11,https://github.com/mandrek44,"Update experiment codes, changed telemetry to use 4 bits for experiment code",1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/261,https://github.com/mandrek44,1,https://github.com/PW-Sat2/PWSat2OBC/pull/261,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,261,2017-08-15T16:41:59Z,2017-08-17T07:29:02Z,2017-08-17T07:29:03Z,MERGED,True,18,14,11,https://github.com/mandrek44,"Update experiment codes, changed telemetry to use 4 bits for experiment code",1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/261,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/261#issuecomment-322521328,This change is,"Reviewed 9 of 9 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,261,2017-08-15T16:41:59Z,2017-08-17T07:29:02Z,2017-08-17T07:29:03Z,MERGED,True,18,14,11,https://github.com/mandrek44,"Update experiment codes, changed telemetry to use 4 bits for experiment code",1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/261,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/261#issuecomment-322673018,This change is,"Reviewed 9 of 9 files at r1, 1 of 1 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,261,2017-08-15T16:41:59Z,2017-08-17T07:29:02Z,2017-08-17T07:29:03Z,MERGED,True,18,14,11,https://github.com/mandrek44,"Update experiment codes, changed telemetry to use 4 bits for experiment code",1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/261,https://github.com/mandrek44,4,https://github.com/PW-Sat2/PWSat2OBC/pull/261#issuecomment-322894878,This change is,[BUG][Experiments] Fix experiment code parsing in emulator,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,261,2017-08-15T16:41:59Z,2017-08-17T07:29:02Z,2017-08-17T07:29:03Z,MERGED,True,18,14,11,https://github.com/mandrek44,"Update experiment codes, changed telemetry to use 4 bits for experiment code",1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/261,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/261#issuecomment-322974663,This change is,"Reviewed 1 of 1 files at r2, 1 of 1 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,261,2017-08-15T16:41:59Z,2017-08-17T07:29:02Z,2017-08-17T07:29:03Z,MERGED,True,18,14,11,https://github.com/mandrek44,"Update experiment codes, changed telemetry to use 4 bits for experiment code",1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/261,https://github.com/Novakov,6,https://github.com/PW-Sat2/PWSat2OBC/pull/261#issuecomment-322983140,This change is,"Reviewed 1 of 1 files at r4.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,262,2017-08-16T16:01:18Z,2017-08-16T17:08:30Z,2017-08-16T17:08:31Z,MERGED,True,17,2,3,https://github.com/Novakov,Fix RadFET experiment setup,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/262,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/262,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,262,2017-08-16T16:01:18Z,2017-08-16T17:08:30Z,2017-08-16T17:08:31Z,MERGED,True,17,2,3,https://github.com/Novakov,Fix RadFET experiment setup,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/262,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/262#issuecomment-322819101,This change is,RadFET experiment is accessing random memory for file name,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,262,2017-08-16T16:01:18Z,2017-08-16T17:08:30Z,2017-08-16T17:08:31Z,MERGED,True,17,2,3,https://github.com/Novakov,Fix RadFET experiment setup,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/262,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/262#issuecomment-322837606,This change is,"Reviewed 3 of 3 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,263,2017-08-16T20:48:37Z,2017-08-17T06:17:05Z,2017-08-17T07:35:46Z,MERGED,True,837,6,28,https://github.com/mandrek44,SADS mission,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/263,https://github.com/mandrek44,1,https://github.com/PW-Sat2/PWSat2OBC/pull/263,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,263,2017-08-16T20:48:37Z,2017-08-17T06:17:05Z,2017-08-17T07:35:46Z,MERGED,True,837,6,28,https://github.com/mandrek44,SADS mission,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/263,https://github.com/mandrek44,2,https://github.com/PW-Sat2/PWSat2OBC/pull/263#issuecomment-322895058,This change is,[Experiments] SADS,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,263,2017-08-16T20:48:37Z,2017-08-17T06:17:05Z,2017-08-17T07:35:46Z,MERGED,True,837,6,28,https://github.com/mandrek44,SADS mission,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/263,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/263#issuecomment-322979001,This change is,"Reviewed 28 of 28 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,263,2017-08-16T20:48:37Z,2017-08-17T06:17:05Z,2017-08-17T07:35:46Z,MERGED,True,837,6,28,https://github.com/mandrek44,SADS mission,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/263,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/263#issuecomment-322992911,This change is,[Experiment] SADS,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,264,2017-08-17T15:20:33Z,2017-08-18T15:01:02Z,2017-08-18T15:01:03Z,MERGED,True,193,0,2,https://github.com/Novakov,Camera mock,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/264,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/264,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,264,2017-08-17T15:20:33Z,2017-08-18T15:01:02Z,2017-08-18T15:01:03Z,MERGED,True,193,0,2,https://github.com/Novakov,Camera mock,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/264,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/264#issuecomment-323289349,This change is,"Reviewed 2 of 2 files at r1.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

integration_tests/camera_mock.py, line 134 at r1 (raw file):

wing = CameraMock('COM15')
wing.on_get_photo = lambda r: read_file('D:\tmp\photos\mock\wing_{}_small.jpg'.format(str(r)[:-1]))
nadir = CameraMock('COM14')
nadir.on_get_photo = lambda r: read_file('D:\tmp\photos\mock\nadir_{}_small.jpg'.format(str(r)[:-1]))
could you make those configurable?


Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,264,2017-08-17T15:20:33Z,2017-08-18T15:01:02Z,2017-08-18T15:01:03Z,MERGED,True,193,0,2,https://github.com/Novakov,Camera mock,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/264,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/264#issuecomment-323289491,This change is,[Mock] Camera mock,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,264,2017-08-17T15:20:33Z,2017-08-18T15:01:02Z,2017-08-18T15:01:03Z,MERGED,True,193,0,2,https://github.com/Novakov,Camera mock,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/264,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/264#issuecomment-323377582,This change is,"Reviewed 2 of 2 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,265,2017-08-17T15:41:33Z,2017-08-19T08:55:30Z,2017-08-19T08:55:30Z,CLOSED,False,1898,201,44,https://github.com/mandrek44,WIP: SADS Experiment,13,[],https://github.com/PW-Sat2/PWSat2OBC/pull/265,https://github.com/mandrek44,1,https://github.com/PW-Sat2/PWSat2OBC/pull/265,"Warning: this PR targets experiment_payload for code review


This change is","Warning: this PR targets experiment_payload for code review


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,266,2017-08-18T14:57:49Z,2017-08-20T11:03:50Z,2017-08-20T16:01:02Z,MERGED,True,354,76,25,https://github.com/zaq32,[TC] Add command to obtain current raw copy of the persistent state.,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/266,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/266,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,266,2017-08-18T14:57:49Z,2017-08-20T11:03:50Z,2017-08-20T16:01:02Z,MERGED,True,354,76,25,https://github.com/zaq32,[TC] Add command to obtain current raw copy of the persistent state.,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/266,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/266#issuecomment-323376982,This change is,[TC] Dump persistent state,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,266,2017-08-18T14:57:49Z,2017-08-20T11:03:50Z,2017-08-20T16:01:02Z,MERGED,True,354,76,25,https://github.com/zaq32,[TC] Add command to obtain current raw copy of the persistent state.,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/266,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/266#issuecomment-323520529,This change is,"Reviewed 22 of 22 files at r1.
Review status: all files reviewed at latest revision, 2 unresolved discussions, some commit checks failed.

integration_tests/persistent_state/init.py, line 11 at r1 (raw file):

PersistentStateParser = joint(
    count(AntennaConfiguration, 1),

No need to use count if you want to match single element

integration_tests/persistent_state/base.py, line 41 at r1 (raw file):

int16 = packed('<h')

uint32 = packed('<L')

As these utils are quite useful you can put it in separate file and use from persistent_state and from experiment_file

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,266,2017-08-18T14:57:49Z,2017-08-20T11:03:50Z,2017-08-20T16:01:02Z,MERGED,True,354,76,25,https://github.com/zaq32,[TC] Add command to obtain current raw copy of the persistent state.,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/266,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/266#issuecomment-323575712,This change is,"Review status: 10 of 25 files reviewed at latest revision, 2 unresolved discussions, some commit checks failed.

integration_tests/persistent_state/init.py, line 11 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
No need to use count if you want to match single element

Done.

integration_tests/persistent_state/base.py, line 41 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
As these utils are quite useful you can put it in separate file and use from persistent_state and from experiment_file

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,266,2017-08-18T14:57:49Z,2017-08-20T11:03:50Z,2017-08-20T16:01:02Z,MERGED,True,354,76,25,https://github.com/zaq32,[TC] Add command to obtain current raw copy of the persistent state.,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/266,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/266#issuecomment-323575918,This change is,"Reviewed 2 of 2 files at r2, 14 of 14 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,267,2017-08-18T14:58:46Z,2017-08-19T12:26:39Z,2017-08-19T12:26:40Z,MERGED,True,1,0,1,https://github.com/zaq32,[experiments][sail] Purge pending photo service commands at the end of experiment.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/267,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/267,"Necessary in case of delays caused by the communication problems.


This change is","Necessary in case of delays caused by the communication problems.


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,267,2017-08-18T14:58:46Z,2017-08-19T12:26:39Z,2017-08-19T12:26:40Z,MERGED,True,1,0,1,https://github.com/zaq32,[experiments][sail] Purge pending photo service commands at the end of experiment.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/267,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/267#issuecomment-323418693,"Necessary in case of delays caused by the communication problems.


This change is","Reviewed 1 of 1 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,268,2017-08-18T14:59:39Z,2017-08-20T09:44:46Z,2017-08-20T09:44:47Z,MERGED,True,15,7,4,https://github.com/zaq32,[telecommand][take_photo] Add delay parameter to take photo command.,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/268,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/268,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,268,2017-08-18T14:59:39Z,2017-08-20T09:44:46Z,2017-08-20T09:44:47Z,MERGED,True,15,7,4,https://github.com/zaq32,[telecommand][take_photo] Add delay parameter to take photo command.,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/268,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/268#issuecomment-323377241,This change is,[TC] Add photo delay parameter,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,268,2017-08-18T14:59:39Z,2017-08-20T09:44:46Z,2017-08-20T09:44:47Z,MERGED,True,15,7,4,https://github.com/zaq32,[telecommand][take_photo] Add delay parameter to take photo command.,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/268,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/268#issuecomment-323418942,This change is,"Reviewed 4 of 4 files at r1.
Review status: all files reviewed at latest revision, 1 unresolved discussion, some commit checks failed.

integration_tests/tests/test_telecommands_photo.py, line 31 at r1 (raw file):

        sail_opening = TestEvent()

        self.system.comm.put_frame(TakePhotoTelecommand(10, CameraLocation.Wing, PhotoResolution.p128, 30, 0, ""photo.jpg""))

Use timedelta parameters, not raw numbers

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,268,2017-08-18T14:59:39Z,2017-08-20T09:44:46Z,2017-08-20T09:44:47Z,MERGED,True,15,7,4,https://github.com/zaq32,[telecommand][take_photo] Add delay parameter to take photo command.,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/268,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/268#issuecomment-323572894,This change is,"Review status: 2 of 4 files reviewed at latest revision, 1 unresolved discussion.

integration_tests/tests/test_telecommands_photo.py, line 31 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Use timedelta parameters, not raw numbers

Fixed

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,268,2017-08-18T14:59:39Z,2017-08-20T09:44:46Z,2017-08-20T09:44:47Z,MERGED,True,15,7,4,https://github.com/zaq32,[telecommand][take_photo] Add delay parameter to take photo command.,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/268,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/268#issuecomment-323574658,This change is,"Reviewed 2 of 2 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,269,2017-08-18T15:37:16Z,2017-08-23T19:15:17Z,2017-08-23T19:15:19Z,MERGED,True,19,16,5,https://github.com/zaq32,[eps][telemetry] Eps telemetry update.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/269,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/269,"Temperatures in battery pack in controller A telemetry are now 13 bit.


This change is","Temperatures in battery pack in controller A telemetry are now 13 bit.


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,269,2017-08-18T15:37:16Z,2017-08-23T19:15:17Z,2017-08-23T19:15:19Z,MERGED,True,19,16,5,https://github.com/zaq32,[eps][telemetry] Eps telemetry update.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/269,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/269#issuecomment-323387204,"Temperatures in battery pack in controller A telemetry are now 13 bit.


This change is",[EPS] Update telemetry,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,269,2017-08-18T15:37:16Z,2017-08-23T19:15:17Z,2017-08-23T19:15:19Z,MERGED,True,19,16,5,https://github.com/zaq32,[eps][telemetry] Eps telemetry update.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/269,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/269#issuecomment-323419168,"Temperatures in battery pack in controller A telemetry are now 13 bit.


This change is","Reviewed 5 of 5 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,269,2017-08-18T15:37:16Z,2017-08-23T19:15:17Z,2017-08-23T19:15:19Z,MERGED,True,19,16,5,https://github.com/zaq32,[eps][telemetry] Eps telemetry update.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/269,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/269#issuecomment-323419280,"Temperatures in battery pack in controller A telemetry are now 13 bit.


This change is","Review status: all files reviewed at latest revision, 1 unresolved discussion, all commit checks successful.

a discussion (no related file):
Waiting for @begreeen to verify

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,269,2017-08-18T15:37:16Z,2017-08-23T19:15:17Z,2017-08-23T19:15:19Z,MERGED,True,19,16,5,https://github.com/zaq32,[eps][telemetry] Eps telemetry update.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/269,https://github.com/ggajoch,5,https://github.com/PW-Sat2/PWSat2OBC/pull/269#issuecomment-324133699,"Temperatures in battery pack in controller A telemetry are now 13 bit.


This change is","Review status: all files reviewed at latest revision, 1 unresolved discussion, some commit checks failed.

a discussion (no related file):
Previously, Novakov (Maciej T. Nowak) wrote
Waiting for @begreeen to verify

LGTM. Final verification will be performed with connected sensors.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,269,2017-08-18T15:37:16Z,2017-08-23T19:15:17Z,2017-08-23T19:15:19Z,MERGED,True,19,16,5,https://github.com/zaq32,[eps][telemetry] Eps telemetry update.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/269,https://github.com/ggajoch,6,https://github.com/PW-Sat2/PWSat2OBC/pull/269#issuecomment-324133732,"Temperatures in battery pack in controller A telemetry are now 13 bit.


This change is","Review status: all files reviewed at latest revision, 1 unresolved discussion, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,269,2017-08-18T15:37:16Z,2017-08-23T19:15:17Z,2017-08-23T19:15:19Z,MERGED,True,19,16,5,https://github.com/zaq32,[eps][telemetry] Eps telemetry update.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/269,https://github.com/Novakov,7,https://github.com/PW-Sat2/PWSat2OBC/pull/269#issuecomment-324435123,"Temperatures in battery pack in controller A telemetry are now 13 bit.


This change is","Reviewed 2 of 2 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,270,2017-08-19T11:42:42Z,2017-08-20T13:21:58Z,2017-08-20T13:22:01Z,MERGED,True,3816,1485,14,https://github.com/Novakov,Emulator UI update,8,[],https://github.com/PW-Sat2/PWSat2OBC/pull/270,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/270,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,270,2017-08-19T11:42:42Z,2017-08-20T13:21:58Z,2017-08-20T13:22:01Z,MERGED,True,3816,1485,14,https://github.com/Novakov,Emulator UI update,8,[],https://github.com/PW-Sat2/PWSat2OBC/pull/270,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/270#issuecomment-323518154,This change is,[Emulator] Lepszy ukad UI,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,270,2017-08-19T11:42:42Z,2017-08-20T13:21:58Z,2017-08-20T13:22:01Z,MERGED,True,3816,1485,14,https://github.com/Novakov,Emulator UI update,8,[],https://github.com/PW-Sat2/PWSat2OBC/pull/270,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/270#issuecomment-323541983,This change is,[Emulator] Podgld ramek,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,270,2017-08-19T11:42:42Z,2017-08-20T13:21:58Z,2017-08-20T13:22:01Z,MERGED,True,3816,1485,14,https://github.com/Novakov,Emulator UI update,8,[],https://github.com/PW-Sat2/PWSat2OBC/pull/270,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/270#issuecomment-323576032,This change is,"Reviewed 16 of 16 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,271,2017-08-19T19:06:53Z,2017-08-20T12:09:40Z,2017-08-20T12:09:41Z,MERGED,True,620,107,36,https://github.com/Novakov,Experiment detumbling,10,[],https://github.com/PW-Sat2/PWSat2OBC/pull/271,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/271,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,271,2017-08-19T19:06:53Z,2017-08-20T12:09:40Z,2017-08-20T12:09:41Z,MERGED,True,620,107,36,https://github.com/Novakov,Experiment detumbling,10,[],https://github.com/PW-Sat2/PWSat2OBC/pull/271,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/271#issuecomment-323541952,This change is,[Experiment] ADCS Detumbling,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,271,2017-08-19T19:06:53Z,2017-08-20T12:09:40Z,2017-08-20T12:09:41Z,MERGED,True,620,107,36,https://github.com/Novakov,Experiment detumbling,10,[],https://github.com/PW-Sat2/PWSat2OBC/pull/271,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/271#issuecomment-323576780,This change is,"Reviewed 35 of 35 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,271,2017-08-19T19:06:53Z,2017-08-20T12:09:40Z,2017-08-20T12:09:41Z,MERGED,True,620,107,36,https://github.com/Novakov,Experiment detumbling,10,[],https://github.com/PW-Sat2/PWSat2OBC/pull/271,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/271#issuecomment-323576846,This change is,"Review status: all files reviewed at latest revision, 1 unresolved discussion, some commit checks failed.

libs/telemetry/imtq/ImtqTelemetryCollector.cpp, line 262 at r1 (raw file):

        }

        bool ImtqTelemetryCollector::GetLastMagnetometerMeasurement(telemetry::ImtqMagnetometerMeasurements& measurements)

merge this function with the following one to remove the necessity of taking the same lock multiple times.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,271,2017-08-19T19:06:53Z,2017-08-20T12:09:40Z,2017-08-20T12:09:41Z,MERGED,True,620,107,36,https://github.com/Novakov,Experiment detumbling,10,[],https://github.com/PW-Sat2/PWSat2OBC/pull/271,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/271#issuecomment-323578590,This change is,"Review status: 26 of 36 files reviewed at latest revision, 1 unresolved discussion.

libs/telemetry/imtq/ImtqTelemetryCollector.cpp, line 262 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
merge this function with the following one to remove the necessity of taking the same lock multiple times.

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,271,2017-08-19T19:06:53Z,2017-08-20T12:09:40Z,2017-08-20T12:09:41Z,MERGED,True,620,107,36,https://github.com/Novakov,Experiment detumbling,10,[],https://github.com/PW-Sat2/PWSat2OBC/pull/271,https://github.com/zaq32,6,https://github.com/PW-Sat2/PWSat2OBC/pull/271#issuecomment-323579881,This change is,"Reviewed 5 of 5 files at r2, 5 of 5 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,272,2017-08-21T16:45:00Z,2017-08-21T18:06:57Z,2017-08-21T18:06:58Z,MERGED,True,156,32,11,https://github.com/zaq32,[TC][purge_photo] Add command to reset state of the photo service.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/272,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/272,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,272,2017-08-21T16:45:00Z,2017-08-21T18:06:57Z,2017-08-21T18:06:58Z,MERGED,True,156,32,11,https://github.com/zaq32,[TC][purge_photo] Add command to reset state of the photo service.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/272,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/272#issuecomment-323795639,This change is,[TC] Purge PhotoService,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,272,2017-08-21T16:45:00Z,2017-08-21T18:06:57Z,2017-08-21T18:06:58Z,MERGED,True,156,32,11,https://github.com/zaq32,[TC][purge_photo] Add command to reset state of the photo service.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/272,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/272#issuecomment-323801110,This change is,"Reviewed 11 of 11 files at r1.
Review status: all files reviewed at latest revision, 2 unresolved discussions.

integration_tests/tests/test_telecommands_photo.py, line 50 at r1 (raw file):

        self._start()

        sail_opening = TestEvent()

huh?

libs/obc/communication/telecommands/Include/obc/telecommands/photo.hpp, line 43 at r1 (raw file):

        /**
         * @brief Take photo telecommand

Not really...

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,272,2017-08-21T16:45:00Z,2017-08-21T18:06:57Z,2017-08-21T18:06:58Z,MERGED,True,156,32,11,https://github.com/zaq32,[TC][purge_photo] Add command to reset state of the photo service.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/272,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/272#issuecomment-323803714,This change is,"Review status: 9 of 11 files reviewed at latest revision, 2 unresolved discussions.

integration_tests/tests/test_telecommands_photo.py, line 50 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
huh?

Done.

libs/obc/communication/telecommands/Include/obc/telecommands/photo.hpp, line 43 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Not really...

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,272,2017-08-21T16:45:00Z,2017-08-21T18:06:57Z,2017-08-21T18:06:58Z,MERGED,True,156,32,11,https://github.com/zaq32,[TC][purge_photo] Add command to reset state of the photo service.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/272,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/272#issuecomment-323804252,This change is,"Reviewed 2 of 2 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,273,2017-08-21T18:02:27Z,2017-08-24T14:34:49Z,2017-08-24T14:34:51Z,MERGED,True,762,192,29,https://github.com/mandrek44,SADS Experiment,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/273,https://github.com/mandrek44,1,https://github.com/PW-Sat2/PWSat2OBC/pull/273,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,273,2017-08-21T18:02:27Z,2017-08-24T14:34:49Z,2017-08-24T14:34:51Z,MERGED,True,762,192,29,https://github.com/mandrek44,SADS Experiment,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/273,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/273#issuecomment-323815227,This change is,"Reviewed 27 of 30 files at r1.
Review status: 27 of 30 files reviewed at latest revision, 2 unresolved discussions, some commit checks failed.

integration_tests/obc/experiments.py, line 18 at r1 (raw file):

    Fibo = 8
    Payload = 9,
    SADS=10

originally sads were supposed to be available under id equal to 6

libs/experiments/fs/Include/fs/ExperimentFile.hpp, line 71 at r1 (raw file):

                PayloadExperimentMainTelemetry = 0x36,

                SADSTemperature = 0x31, // 2 bytes of data

conflicting id

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,273,2017-08-21T18:02:27Z,2017-08-24T14:34:49Z,2017-08-24T14:34:51Z,MERGED,True,762,192,29,https://github.com/mandrek44,SADS Experiment,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/273,https://github.com/mandrek44,3,https://github.com/PW-Sat2/PWSat2OBC/pull/273#issuecomment-323829602,This change is,[Experiment] SADS,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,273,2017-08-21T18:02:27Z,2017-08-24T14:34:49Z,2017-08-24T14:34:51Z,MERGED,True,762,192,29,https://github.com/mandrek44,SADS Experiment,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/273,https://github.com/mandrek44,4,https://github.com/PW-Sat2/PWSat2OBC/pull/273#issuecomment-323836553,This change is,"Review status: 21 of 30 files reviewed at latest revision, 1 unresolved discussion.

libs/experiments/fs/Include/fs/ExperimentFile.hpp, line 71 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
conflicting id

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,273,2017-08-21T18:02:27Z,2017-08-24T14:34:49Z,2017-08-24T14:34:51Z,MERGED,True,762,192,29,https://github.com/mandrek44,SADS Experiment,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/273,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/273#issuecomment-324146984,This change is,"Reviewed 2 of 30 files at r1, 7 of 7 files at r2.
Review status: all files reviewed at latest revision, 1 unresolved discussion, some commit checks failed.

libs/experiments/sads/sads.cpp, line 141 at r2 (raw file):

            this->_photoService.DisableCamera(Camera::Nadir);
            this->_photoService.DisableCamera(Camera::Wing);

nadir camera is not used in this experiment

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,273,2017-08-21T18:02:27Z,2017-08-24T14:34:49Z,2017-08-24T14:34:51Z,MERGED,True,762,192,29,https://github.com/mandrek44,SADS Experiment,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/273,https://github.com/mandrek44,6,https://github.com/PW-Sat2/PWSat2OBC/pull/273#issuecomment-324415438,This change is,"Review status: 29 of 30 files reviewed at latest revision, 1 unresolved discussion.

libs/experiments/sads/sads.cpp, line 141 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
nadir camera is not used in this experiment

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,273,2017-08-21T18:02:27Z,2017-08-24T14:34:49Z,2017-08-24T14:34:51Z,MERGED,True,762,192,29,https://github.com/mandrek44,SADS Experiment,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/273,https://github.com/Novakov,7,https://github.com/PW-Sat2/PWSat2OBC/pull/273#issuecomment-324576872,This change is,"Reviewed 1 of 1 files at r3.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,273,2017-08-21T18:02:27Z,2017-08-24T14:34:49Z,2017-08-24T14:34:51Z,MERGED,True,762,192,29,https://github.com/mandrek44,SADS Experiment,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/273,https://github.com/zaq32,8,https://github.com/PW-Sat2/PWSat2OBC/pull/273#issuecomment-324639656,This change is,"Reviewed 1 of 1 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,274,2017-08-21T18:51:19Z,2017-08-31T05:24:18Z,2017-08-31T05:24:20Z,MERGED,True,790,24,26,https://github.com/tom4r,Camera Commissioning experiment,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/274,https://github.com/tom4r,1,https://github.com/PW-Sat2/PWSat2OBC/pull/274,"Including upgrading Payload Commissioning Experiment to include Camera Commissioning.


This change is","Including upgrading Payload Commissioning Experiment to include Camera Commissioning.


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,274,2017-08-21T18:51:19Z,2017-08-31T05:24:18Z,2017-08-31T05:24:20Z,MERGED,True,790,24,26,https://github.com/tom4r,Camera Commissioning experiment,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/274,https://github.com/tom4r,2,https://github.com/PW-Sat2/PWSat2OBC/pull/274#issuecomment-323830164,"Including upgrading Payload Commissioning Experiment to include Camera Commissioning.


This change is",https://trello.com/c/dyRBmU6e,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,274,2017-08-21T18:51:19Z,2017-08-31T05:24:18Z,2017-08-31T05:24:20Z,MERGED,True,790,24,26,https://github.com/tom4r,Camera Commissioning experiment,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/274,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/274#issuecomment-323920502,"Including upgrading Payload Commissioning Experiment to include Camera Commissioning.


This change is","Reviewed 16 of 26 files at r1.
Review status: 16 of 26 files reviewed at latest revision, 1 unresolved discussion.

libs/experiments/fs/Include/fs/ExperimentFile.hpp, line 59 at r1 (raw file):

                SupplySADSTemperature = 0x17,     // Temperature data, 4 bytes
                Sail = 0x18,                      // 3 bytes of data
                CameraSyncCount = 0x19,           // 1 byte of data

conflicting id

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,274,2017-08-21T18:51:19Z,2017-08-31T05:24:18Z,2017-08-31T05:24:20Z,MERGED,True,790,24,26,https://github.com/tom4r,Camera Commissioning experiment,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/274,https://github.com/tom4r,4,https://github.com/PW-Sat2/PWSat2OBC/pull/274#issuecomment-323950452,"Including upgrading Payload Commissioning Experiment to include Camera Commissioning.


This change is","Review status: 15 of 26 files reviewed at latest revision, 1 unresolved discussion.

libs/experiments/fs/Include/fs/ExperimentFile.hpp, line 59 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
conflicting id

Fixed

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,274,2017-08-21T18:51:19Z,2017-08-31T05:24:18Z,2017-08-31T05:24:20Z,MERGED,True,790,24,26,https://github.com/tom4r,Camera Commissioning experiment,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/274,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/274#issuecomment-324145795,"Including upgrading Payload Commissioning Experiment to include Camera Commissioning.


This change is","Reviewed 6 of 26 files at r1, 1 of 1 files at r2.
Review status: 22 of 26 files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,274,2017-08-21T18:51:19Z,2017-08-31T05:24:18Z,2017-08-31T05:24:20Z,MERGED,True,790,24,26,https://github.com/tom4r,Camera Commissioning experiment,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/274,https://github.com/zaq32,6,https://github.com/PW-Sat2/PWSat2OBC/pull/274#issuecomment-325264999,"Including upgrading Payload Commissioning Experiment to include Camera Commissioning.


This change is","Reviewed 11 of 12 files at r3.
Review status: 23 of 26 files reviewed at latest revision, 1 unresolved discussion, some commit checks failed.

libs/obc/communication/telecommands/experiments.cpp, line 296 at r3 (raw file):

        void PerformCameraCommisioningExperiment::Handle(devices::comm::ITransmitter& transmitter, gsl::span<const std::uint8_t> parameters)
        {
            char filePath[30];

this buffer is not used.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,274,2017-08-21T18:51:19Z,2017-08-31T05:24:18Z,2017-08-31T05:24:20Z,MERGED,True,790,24,26,https://github.com/tom4r,Camera Commissioning experiment,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/274,https://github.com/tom4r,7,https://github.com/PW-Sat2/PWSat2OBC/pull/274#issuecomment-325335143,"Including upgrading Payload Commissioning Experiment to include Camera Commissioning.


This change is","Review status: 18 of 26 files reviewed at latest revision, 1 unresolved discussion.

libs/obc/communication/telecommands/experiments.cpp, line 296 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
this buffer is not used.

Fixed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,274,2017-08-21T18:51:19Z,2017-08-31T05:24:18Z,2017-08-31T05:24:20Z,MERGED,True,790,24,26,https://github.com/tom4r,Camera Commissioning experiment,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/274,https://github.com/zaq32,8,https://github.com/PW-Sat2/PWSat2OBC/pull/274#issuecomment-325339800,"Including upgrading Payload Commissioning Experiment to include Camera Commissioning.


This change is","Reviewed 1 of 26 files at r1, 1 of 12 files at r3, 5 of 5 files at r4.
Review status: 25 of 26 files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,274,2017-08-21T18:51:19Z,2017-08-31T05:24:18Z,2017-08-31T05:24:20Z,MERGED,True,790,24,26,https://github.com/tom4r,Camera Commissioning experiment,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/274,https://github.com/zaq32,9,https://github.com/PW-Sat2/PWSat2OBC/pull/274#issuecomment-326047069,"Including upgrading Payload Commissioning Experiment to include Camera Commissioning.


This change is","Reviewed 1 of 26 files at r1.
Review status: all files reviewed at latest revision, 3 unresolved discussions.

libs/experiments/camera/camera_exp.cpp, line 22 at r4 (raw file):

              _controller(_experimentFile, photoService), _currentStep(0)
        {
            strsafecpy(_fileName, DefaultFileName, 30);

Controller's output is left uninitialized

libs/experiments/camera/camera_exp.cpp, line 29 at r4 (raw file):

              _photoService(other._photoService), _controller(_experimentFile, _photoService), _currentStep(other._currentStep)
        {
            strsafecpy(_fileName, other._fileName, count_of(other._fileName));

Controller's output is left uninitialized

libs/experiments/camera/Include/experiment/camera/CameraExperimentController.hpp, line 14 at r4 (raw file):

    {
        /**
         * @brief Class that does Camera Commisioning Experiment logic.

Commissioning

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,274,2017-08-21T18:51:19Z,2017-08-31T05:24:18Z,2017-08-31T05:24:20Z,MERGED,True,790,24,26,https://github.com/tom4r,Camera Commissioning experiment,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/274,https://github.com/tom4r,10,https://github.com/PW-Sat2/PWSat2OBC/pull/274#issuecomment-326109431,"Including upgrading Payload Commissioning Experiment to include Camera Commissioning.


This change is","Review status: 23 of 26 files reviewed at latest revision, 3 unresolved discussions.

libs/experiments/camera/camera_exp.cpp, line 22 at r4 (raw file):
Previously, zaq32 (ukasz ak) wrote
Controller's output is left uninitialized

Fixed

libs/experiments/camera/camera_exp.cpp, line 29 at r4 (raw file):
Previously, zaq32 (ukasz ak) wrote
Controller's output is left uninitialized

Fixed

libs/experiments/camera/Include/experiment/camera/CameraExperimentController.hpp, line 14 at r4 (raw file):
Previously, zaq32 (ukasz ak) wrote
Commissioning

Fixed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,274,2017-08-21T18:51:19Z,2017-08-31T05:24:18Z,2017-08-31T05:24:20Z,MERGED,True,790,24,26,https://github.com/tom4r,Camera Commissioning experiment,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/274,https://github.com/zaq32,11,https://github.com/PW-Sat2/PWSat2OBC/pull/274#issuecomment-326114625,"Including upgrading Payload Commissioning Experiment to include Camera Commissioning.


This change is","Reviewed 3 of 3 files at r5.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,275,2017-08-22T16:09:36Z,2017-08-22T20:40:51Z,2017-08-22T20:40:53Z,MERGED,True,710,747,35,https://github.com/Novakov,Property grid with beacon,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/275,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/275,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,275,2017-08-22T16:09:36Z,2017-08-22T20:40:51Z,2017-08-22T20:40:53Z,MERGED,True,710,747,35,https://github.com/Novakov,Property grid with beacon,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/275,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/275#issuecomment-324145473,This change is,"Reviewed 5 of 10 files at r1, 25 of 26 files at r2, 5 of 5 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,276,2017-08-22T17:57:17Z,2017-08-28T05:24:47Z,2017-08-28T05:24:48Z,MERGED,True,181,3,10,https://github.com/Novakov,Telecommand: send periodic message now,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/276,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/276,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,276,2017-08-22T17:57:17Z,2017-08-28T05:24:47Z,2017-08-28T05:24:48Z,MERGED,True,181,3,10,https://github.com/Novakov,Telecommand: send periodic message now,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/276,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/276#issuecomment-324104110,This change is,[TC] Request periodic message,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,276,2017-08-22T17:57:17Z,2017-08-28T05:24:47Z,2017-08-28T05:24:48Z,MERGED,True,181,3,10,https://github.com/Novakov,Telecommand: send periodic message now,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/276,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/276#issuecomment-324144498,This change is,"Reviewed 13 of 13 files at r1.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

libs/obc/communication/telecommands/Include/obc/telecommands/periodic_message.hpp, line 42 at r1 (raw file):

         * @telecommand
         *
         * Parameters: None

the original request was to either sent as many messages as possible (i.e. 40) or make this value configurable. As this command is supposed to be used to keep comm transmitting indefinatelly

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,276,2017-08-22T17:57:17Z,2017-08-28T05:24:47Z,2017-08-28T05:24:48Z,MERGED,True,181,3,10,https://github.com/Novakov,Telecommand: send periodic message now,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/276,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/276#issuecomment-324575608,This change is,"Review status: 2 of 10 files reviewed at latest revision, 1 unresolved discussion.

libs/obc/communication/telecommands/Include/obc/telecommands/periodic_message.hpp, line 42 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
the original request was to either sent as many messages as possible (i.e. 40) or make this value configurable. As this command is supposed to be used to keep comm transmitting indefinatelly

Done

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,276,2017-08-22T17:57:17Z,2017-08-28T05:24:47Z,2017-08-28T05:24:48Z,MERGED,True,181,3,10,https://github.com/Novakov,Telecommand: send periodic message now,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/276,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/276#issuecomment-325262705,This change is,"Reviewed 8 of 13 files at r2, 2 of 2 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,277,2017-08-23T14:45:59Z,2017-08-24T12:52:08Z,2017-08-24T12:52:09Z,MERGED,True,150,27,15,https://github.com/Novakov,Detumbling improvments,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/277,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/277,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,277,2017-08-23T14:45:59Z,2017-08-24T12:52:08Z,2017-08-24T12:52:09Z,MERGED,True,150,27,15,https://github.com/Novakov,Detumbling improvments,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/277,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/277#issuecomment-324368580,This change is,"Reviewed 15 of 15 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,277,2017-08-23T14:45:59Z,2017-08-24T12:52:08Z,2017-08-24T12:52:09Z,MERGED,True,150,27,15,https://github.com/Novakov,Detumbling improvments,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/277,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/277#issuecomment-324623318,This change is,"Reviewed 1 of 1 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,278,2017-08-23T21:48:56Z,2017-09-04T17:18:49Z,2017-09-04T17:18:51Z,MERGED,True,218,28,14,https://github.com/kfazi,Added automatic telemetry sending during Sail experiment,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/278,https://github.com/kfazi,1,https://github.com/PW-Sat2/PWSat2OBC/pull/278,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,278,2017-08-23T21:48:56Z,2017-09-04T17:18:49Z,2017-09-04T17:18:51Z,MERGED,True,218,28,14,https://github.com/kfazi,Added automatic telemetry sending during Sail experiment,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/278,https://github.com/kfazi,2,https://github.com/PW-Sat2/PWSat2OBC/pull/278#issuecomment-325982844,This change is,Send automatically output from sail experiment as it progresses,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,278,2017-08-23T21:48:56Z,2017-09-04T17:18:49Z,2017-09-04T17:18:51Z,MERGED,True,218,28,14,https://github.com/kfazi,Added automatic telemetry sending during Sail experiment,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/278,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/278#issuecomment-326004059,This change is,"Reviewed 15 of 15 files at r1.
Review status: all files reviewed at latest revision, 2 unresolved discussions.

libs/experiments/sail/sail.cpp, line 335 at r1 (raw file):

        }

        void SailExperiment::SendTelemetry(const gsl::span<uint8_t>& data)

I would say that it's not telemetry, more like 'experiment data'

libs/experiments/sail/sail.cpp, line 339 at r1 (raw file):

            LOGF(LOG_LEVEL_INFO, ""[exp_sail] Sending telemetry, sequence %lu"", telemetrySequence);

            CorrelatedDownlinkFrame message(DownlinkAPID::Operation, telemetrySequence++, correlationId);

Data send from sail experiment should have dedicated APID (we've got lots of them) .

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,278,2017-08-23T21:48:56Z,2017-09-04T17:18:49Z,2017-09-04T17:18:51Z,MERGED,True,218,28,14,https://github.com/kfazi,Added automatic telemetry sending during Sail experiment,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/278,https://github.com/kfazi,4,https://github.com/PW-Sat2/PWSat2OBC/pull/278#issuecomment-326240174,This change is,"Review status: 7 of 18 files reviewed at latest revision, 2 unresolved discussions, some commit checks failed.

libs/experiments/sail/sail.cpp, line 335 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
I would say that it's not telemetry, more like 'experiment data'

Done.

libs/experiments/sail/sail.cpp, line 339 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Data send from sail experiment should have dedicated APID (we've got lots of them) .

Done. Only automatic replies have separate APID, because experiment is started by experiment telecommand which has operation APID

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,278,2017-08-23T21:48:56Z,2017-09-04T17:18:49Z,2017-09-04T17:18:51Z,MERGED,True,218,28,14,https://github.com/kfazi,Added automatic telemetry sending during Sail experiment,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/278,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/278#issuecomment-326562769,This change is,"Reviewed 6 of 15 files at r1, 11 of 11 files at r2.
Review status: all files reviewed at latest revision, 11 unresolved discussions.

libs/base/Include/base/delegate.hpp, line 9 at r2 (raw file):

 * This object stores pointer to class and it's member.
 */
template <typename TReturn, typename... TParams> class Delegate

define class methods outside class definition

libs/base/Include/base/delegate.hpp, line 11 at r2 (raw file):

template <typename TReturn, typename... TParams> class Delegate
{
    typedef TReturn (*Type)(void* callee, TParams...);

this type should be public as it is used in public interface of this class

libs/base/Include/base/delegate.hpp, line 42 at r2 (raw file):

    TReturn operator()(TParams... params) const
    {
        return (*function)(callee, params...);

std::move(params)...

libs/base/Include/base/delegate.hpp, line 53 at r2 (raw file):

    {
        T* object = static_cast<T*>(callee);
        return (object->*TMethod)(params...);

std::move(params)...

libs/experiments/sail/sail.cpp, line 62 at r2 (raw file):

              _timeProvider(timeProvider),                 //
              _sailState(sailState),                       //
              transmitter(transmitter)                     //

uninitialized: telemetrySequence, correlationId

libs/experiments/sail/Include/experiment/sail/sail.hpp, line 37 at r2 (raw file):

             * @param experimentEnd New experiment end time.
             */
            virtual void SetExperimentEnd(std::chrono::milliseconds experimentEnd) = 0;

unused method

libs/experiments/sail/Include/experiment/sail/sail.hpp, line 43 at r2 (raw file):

             * @param nextTelemetryAcquisition Next telemetry acquisition time.
             */
            virtual void SetNextTelemetryAcquisition(std::chrono::milliseconds nextTelemetryAcquisition) = 0;

unused method

libs/experiments/sail/Include/experiment/sail/sail.hpp, line 49 at r2 (raw file):

             * @param nextPhotoTaken Next photo time.
             */
            virtual void SetNextPhotoTaken(std::chrono::milliseconds nextPhotoTaken) = 0;

unused method

libs/experiments/sail/Include/experiment/sail/sail.hpp, line 273 at r2 (raw file):

            uint32_t telemetrySequence;

            uint8_t correlationId;

unused field

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,278,2017-08-23T21:48:56Z,2017-09-04T17:18:49Z,2017-09-04T17:18:51Z,MERGED,True,218,28,14,https://github.com/kfazi,Added automatic telemetry sending during Sail experiment,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/278,https://github.com/kfazi,6,https://github.com/PW-Sat2/PWSat2OBC/pull/278#issuecomment-326625393,This change is,"Review status: 10 of 15 files reviewed at latest revision, 11 unresolved discussions.

libs/base/Include/base/delegate.hpp, line 9 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
define class methods outside class definition

Done.

libs/base/Include/base/delegate.hpp, line 11 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
this type should be public as it is used in public interface of this class

Done.

libs/base/Include/base/delegate.hpp, line 42 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
std::move(params)...

Done.

libs/base/Include/base/delegate.hpp, line 53 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
std::move(params)...

Done.

libs/experiments/sail/sail.cpp, line 62 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
uninitialized: telemetrySequence, correlationId

Removed correlationId, initialized telemetrySequence

libs/experiments/sail/Include/experiment/sail/sail.hpp, line 37 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
unused method

Removed

libs/experiments/sail/Include/experiment/sail/sail.hpp, line 43 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
unused method

Removed

libs/experiments/sail/Include/experiment/sail/sail.hpp, line 49 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
unused method

Removed

libs/experiments/sail/Include/experiment/sail/sail.hpp, line 273 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
unused field

Removed

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,278,2017-08-23T21:48:56Z,2017-09-04T17:18:49Z,2017-09-04T17:18:51Z,MERGED,True,218,28,14,https://github.com/kfazi,Added automatic telemetry sending during Sail experiment,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/278,https://github.com/zaq32,7,https://github.com/PW-Sat2/PWSat2OBC/pull/278#issuecomment-326995543,This change is,"Reviewed 6 of 10 files at r3.
Review status: all files reviewed at latest revision, 2 unresolved discussions, some commit checks failed.

libs/base/Include/base/delegate.hpp, line 53 at r2 (raw file):
Previously, kfazi wrote
Done.

incorrect order of parenthesis and ... operator. This construction will only work for single argument delegates.

libs/base/Include/base/delegate.hpp, line 62 at r3 (raw file):

template <typename TReturn, typename... TParams> inline TReturn Delegate<TReturn, TParams...>::operator()(TParams... params) const
{
    return (*function)(callee, std::move(params...));

incorrect order of parenthesis (')') and '...' operator. This construction will only work for single argument delegates.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,278,2017-08-23T21:48:56Z,2017-09-04T17:18:49Z,2017-09-04T17:18:51Z,MERGED,True,218,28,14,https://github.com/kfazi,Added automatic telemetry sending during Sail experiment,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/278,https://github.com/kfazi,8,https://github.com/PW-Sat2/PWSat2OBC/pull/278#issuecomment-326998093,This change is,"Review status: 13 of 14 files reviewed at latest revision, 2 unresolved discussions.

libs/base/Include/base/delegate.hpp, line 53 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
incorrect order of parenthesis and ... operator. This construction will only work for single argument delegates.

Fixed

libs/base/Include/base/delegate.hpp, line 62 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
incorrect order of parenthesis (')') and '...' operator. This construction will only work for single argument delegates.

Right, fixed

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,278,2017-08-23T21:48:56Z,2017-09-04T17:18:49Z,2017-09-04T17:18:51Z,MERGED,True,218,28,14,https://github.com/kfazi,Added automatic telemetry sending during Sail experiment,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/278,https://github.com/zaq32,9,https://github.com/PW-Sat2/PWSat2OBC/pull/278#issuecomment-326998482,This change is,"Reviewed 1 of 1 files at r4.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,279,2017-08-24T12:51:27Z,2017-08-29T14:00:13Z,2017-08-29T14:00:15Z,MERGED,True,30,77,24,https://github.com/mandrek44,Beacon in property grid is now ordered according to telemetry,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/279,https://github.com/mandrek44,1,https://github.com/PW-Sat2/PWSat2OBC/pull/279,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,279,2017-08-24T12:51:27Z,2017-08-29T14:00:13Z,2017-08-29T14:00:15Z,MERGED,True,30,77,24,https://github.com/mandrek44,Beacon in property grid is now ordered according to telemetry,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/279,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/279#issuecomment-325263016,This change is,"Reviewed 24 of 24 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,280,2017-08-24T15:24:37Z,2017-08-24T16:43:16Z,2017-08-24T16:43:17Z,MERGED,True,7,5,3,https://github.com/Novakov,Device Mock version 5,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/280,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/280,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,280,2017-08-24T15:24:37Z,2017-08-24T16:43:16Z,2017-08-24T16:43:17Z,MERGED,True,7,5,3,https://github.com/Novakov,Device Mock version 5,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/280,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/280#issuecomment-324669958,This change is,"Reviewed 3 of 3 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,281,2017-08-28T19:41:03Z,2017-08-29T05:20:36Z,2017-08-29T05:20:37Z,MERGED,True,80,45,7,https://github.com/tom4r,Fixed PLD and Suns interrupt handlers in case of extra glitches on GPIO,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/281,https://github.com/tom4r,1,https://github.com/PW-Sat2/PWSat2OBC/pull/281,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,281,2017-08-28T19:41:03Z,2017-08-29T05:20:36Z,2017-08-29T05:20:37Z,MERGED,True,80,45,7,https://github.com/tom4r,Fixed PLD and Suns interrupt handlers in case of extra glitches on GPIO,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/281,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/281#issuecomment-325458149,This change is,"Reviewed 7 of 7 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,281,2017-08-28T19:41:03Z,2017-08-29T05:20:36Z,2017-08-29T05:20:37Z,MERGED,True,80,45,7,https://github.com/tom4r,Fixed PLD and Suns interrupt handlers in case of extra glitches on GPIO,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/281,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/281#issuecomment-325458964,This change is,"Review status: all files reviewed at latest revision, 1 unresolved discussion, some commit checks pending.

libs/drivers/payload/payload.cpp, line 71 at r1 (raw file):

{
    ErrorReporter errorContext(_error);
    _event.Clear(InterruptFlagFinished);

This has a potential to not work correctly as by the time caller gets there the interrupt may already have happened in the past.
Consider this:
payload.Write(/*...*/);

eps.DoSomething();            // <- payload interrupt happens here

payload.WaitForData();     // <- and here gets erased.


Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,281,2017-08-28T19:41:03Z,2017-08-29T05:20:36Z,2017-08-29T05:20:37Z,MERGED,True,80,45,7,https://github.com/tom4r,Fixed PLD and Suns interrupt handlers in case of extra glitches on GPIO,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/281,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/281#issuecomment-325459560,This change is,"Reviewed 7 of 7 files at r1.
Review status: all files reviewed at latest revision, 2 unresolved discussions.

libs/drivers/suns/suns.cpp, line 145 at r1 (raw file):

            ErrorReporter errorContext(this->errors);

            this->event.Clear(InterruptFlagFinished);

see my comment in payload driver

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,281,2017-08-28T19:41:03Z,2017-08-29T05:20:36Z,2017-08-29T05:20:37Z,MERGED,True,80,45,7,https://github.com/tom4r,Fixed PLD and Suns interrupt handlers in case of extra glitches on GPIO,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/281,https://github.com/tom4r,5,https://github.com/PW-Sat2/PWSat2OBC/pull/281#issuecomment-325466081,This change is,"Review status: 3 of 7 files reviewed at latest revision, 2 unresolved discussions.

libs/drivers/payload/payload.cpp, line 71 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
This has a potential to not work correctly as by the time caller gets there the interrupt may already have happened in the past.
Consider this:
payload.Write(/*...*/);

eps.DoSomething();            // <- payload interrupt happens here

payload.WaitForData();     // <- and here gets erased.


Fixed.

libs/drivers/suns/suns.cpp, line 145 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
see my comment in payload driver

Fixed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,281,2017-08-28T19:41:03Z,2017-08-29T05:20:36Z,2017-08-29T05:20:37Z,MERGED,True,80,45,7,https://github.com/tom4r,Fixed PLD and Suns interrupt handlers in case of extra glitches on GPIO,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/281,https://github.com/zaq32,6,https://github.com/PW-Sat2/PWSat2OBC/pull/281#issuecomment-325558004,This change is,"Reviewed 4 of 4 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,282,2017-08-30T16:21:59Z,2017-08-30T17:34:03Z,2017-08-30T17:34:04Z,MERGED,True,11,6,4,https://github.com/tom4r,Made LEOP experiment not overwrite data file after system restart,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/282,https://github.com/tom4r,1,https://github.com/PW-Sat2/PWSat2OBC/pull/282,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,282,2017-08-30T16:21:59Z,2017-08-30T17:34:03Z,2017-08-30T17:34:04Z,MERGED,True,11,6,4,https://github.com/tom4r,Made LEOP experiment not overwrite data file after system restart,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/282,https://github.com/tom4r,2,https://github.com/PW-Sat2/PWSat2OBC/pull/282#issuecomment-326044637,This change is,LEOP: restart during experiment causes lost of all accumulated data,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,282,2017-08-30T16:21:59Z,2017-08-30T17:34:03Z,2017-08-30T17:34:04Z,MERGED,True,11,6,4,https://github.com/tom4r,Made LEOP experiment not overwrite data file after system restart,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/282,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/282#issuecomment-326044677,This change is,"Reviewed 3 of 3 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,282,2017-08-30T16:21:59Z,2017-08-30T17:34:03Z,2017-08-30T17:34:04Z,MERGED,True,11,6,4,https://github.com/tom4r,Made LEOP experiment not overwrite data file after system restart,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/282,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/282#issuecomment-326063734,This change is,"Reviewed 1 of 1 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,283,2017-08-30T19:44:38Z,2017-08-30T20:35:35Z,2017-08-30T20:35:36Z,MERGED,True,46,4,2,https://github.com/Novakov,Camera: retrying photo download,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/283,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/283,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,283,2017-08-30T19:44:38Z,2017-08-30T20:35:35Z,2017-08-30T20:35:36Z,MERGED,True,46,4,2,https://github.com/Novakov,Camera: retrying photo download,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/283,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/283#issuecomment-326098447,This change is,[Cam] Retry downloading single packages,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,283,2017-08-30T19:44:38Z,2017-08-30T20:35:35Z,2017-08-30T20:35:36Z,MERGED,True,46,4,2,https://github.com/Novakov,Camera: retrying photo download,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/283,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/283#issuecomment-326098749,This change is,"Reviewed 2 of 2 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,284,2017-08-30T20:37:16Z,2017-08-31T16:50:21Z,2017-09-04T20:23:02Z,MERGED,True,747,3788,11,https://github.com/Novakov,Pyconsole improvments,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/284,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/284,"EPS/COMM watchdog kick time
Ability to restart OBC with normal boot procedure (upper is still default)
Script for downloading files from OBC via COMM



This change is","EPS/COMM watchdog kick time
Ability to restart OBC with normal boot procedure (upper is still default)
Script for downloading files from OBC via COMM



This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,284,2017-08-30T20:37:16Z,2017-08-31T16:50:21Z,2017-09-04T20:23:02Z,MERGED,True,747,3788,11,https://github.com/Novakov,Pyconsole improvments,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/284,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/284#issuecomment-326111666,"EPS/COMM watchdog kick time
Ability to restart OBC with normal boot procedure (upper is still default)
Script for downloading files from OBC via COMM



This change is",[Emulator] Ostatnie kopnicie watchodoga COMMa,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,284,2017-08-30T20:37:16Z,2017-08-31T16:50:21Z,2017-09-04T20:23:02Z,MERGED,True,747,3788,11,https://github.com/Novakov,Pyconsole improvments,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/284,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/284#issuecomment-326111687,"EPS/COMM watchdog kick time
Ability to restart OBC with normal boot procedure (upper is still default)
Script for downloading files from OBC via COMM



This change is",[Emulator] Ostatnie kopnicie watchodoga EPSa,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,284,2017-08-30T20:37:16Z,2017-08-31T16:50:21Z,2017-09-04T20:23:02Z,MERGED,True,747,3788,11,https://github.com/Novakov,Pyconsole improvments,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/284,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/284#issuecomment-326206728,"EPS/COMM watchdog kick time
Ability to restart OBC with normal boot procedure (upper is still default)
Script for downloading files from OBC via COMM



This change is","Reviewed 11 of 11 files at r1.
Review status: all files reviewed at latest revision, 1 unresolved discussion, some commit checks failed.

integration_tests/telecommand/init.py, line 41 at r1 (raw file):

    'PerformSailExperiment',
    'TakePhotoTelecommand',
    'DeploySolarArrayTelecommand',

what is the reason?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,284,2017-08-30T20:37:16Z,2017-08-31T16:50:21Z,2017-09-04T20:23:02Z,MERGED,True,747,3788,11,https://github.com/Novakov,Pyconsole improvments,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/284,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/284#issuecomment-326207441,"EPS/COMM watchdog kick time
Ability to restart OBC with normal boot procedure (upper is still default)
Script for downloading files from OBC via COMM



This change is","Review status: all files reviewed at latest revision, 1 unresolved discussion, some commit checks failed.

integration_tests/telecommand/init.py, line 41 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
what is the reason?

SADS are deployed only as part of experiment.
I believe @mandrek44 added telecommand for deploying SADS only than removed it but entry in __all__ remained

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,285,2017-08-31T05:56:17Z,2017-08-31T08:25:37Z,2017-08-31T08:25:39Z,MERGED,True,376,218,30,https://github.com/tom4r,Experiment file cleanup,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/285,https://github.com/tom4r,1,https://github.com/PW-Sat2/PWSat2OBC/pull/285,"And parser enhancements


This change is","And parser enhancements


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,285,2017-08-31T05:56:17Z,2017-08-31T08:25:37Z,2017-08-31T08:25:39Z,MERGED,True,376,218,30,https://github.com/tom4r,Experiment file cleanup,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/285,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/285#issuecomment-326198753,"And parser enhancements


This change is","Reviewed 27 of 27 files at r1.
Review status: all files reviewed at latest revision, 5 unresolved discussions.

integration_tests/devices/suns.py, line 69 at r1 (raw file):

            self.gpio_interrupt_low()

        t = Timer(0.1, finish)

It would be nice to get configurable callback delay

integration_tests/experiment_file/camera.py, line 6 at r1 (raw file):

from parsing import byte

CameraSyncCount = pid(0x37) >> count(byte, 1)

Count is not needed here

integration_tests/experiment_file/payload.py, line 66 at r1 (raw file):

        while len(parsers) > 0:
            parser = parsers.pop()
            parser.parse()

It would be nice to move this code to some utitily function - is it few places already

integration_tests/experiment_file/payload.py, line 72 at r1 (raw file):

        return Value.failure(index, 'Decode failed')

PayloadObcTelemetry = pid(0x36) >> count(PayloadParser, 1)

Count is not needed here

unit_tests/properties/Experiments/SunSDataPointTest.cpp, line 139 at r1 (raw file):

        w.WriteByte(num(ExperimentFile::PID::ExperimentalSunSPrimary));
        w.WriteByte(point.ExperimentalSunS.whoami);

Constant is better is this test

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,285,2017-08-31T05:56:17Z,2017-08-31T08:25:37Z,2017-08-31T08:25:39Z,MERGED,True,376,218,30,https://github.com/tom4r,Experiment file cleanup,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/285,https://github.com/tom4r,3,https://github.com/PW-Sat2/PWSat2OBC/pull/285#issuecomment-326201040,"And parser enhancements


This change is",[Experiment File] Extend parser and cleanup,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,285,2017-08-31T05:56:17Z,2017-08-31T08:25:37Z,2017-08-31T08:25:39Z,MERGED,True,376,218,30,https://github.com/tom4r,Experiment file cleanup,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/285,https://github.com/tom4r,4,https://github.com/PW-Sat2/PWSat2OBC/pull/285#issuecomment-326212264,"And parser enhancements


This change is","Review status: 23 of 28 files reviewed at latest revision, 5 unresolved discussions.

integration_tests/devices/suns.py, line 69 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
It would be nice to get configurable callback delay

Done

integration_tests/experiment_file/camera.py, line 6 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Count is not needed here

Fixed

integration_tests/experiment_file/payload.py, line 66 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
It would be nice to move this code to some utitily function - is it few places already

Done

integration_tests/experiment_file/payload.py, line 72 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Count is not needed here

Fixed

unit_tests/properties/Experiments/SunSDataPointTest.cpp, line 139 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Constant is better is this test

Reverted

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,285,2017-08-31T05:56:17Z,2017-08-31T08:25:37Z,2017-08-31T08:25:39Z,MERGED,True,376,218,30,https://github.com/tom4r,Experiment file cleanup,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/285,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/285#issuecomment-326212846,"And parser enhancements


This change is","Reviewed 6 of 6 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,285,2017-08-31T05:56:17Z,2017-08-31T08:25:37Z,2017-08-31T08:25:39Z,MERGED,True,376,218,30,https://github.com/tom4r,Experiment file cleanup,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/285,https://github.com/Novakov,6,https://github.com/PW-Sat2/PWSat2OBC/pull/285#issuecomment-326226612,"And parser enhancements


This change is","Reviewed 3 of 3 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,286,2017-08-31T09:46:35Z,2017-08-31T10:41:55Z,2017-08-31T10:41:57Z,MERGED,True,462,5,7,https://github.com/tom4r,Experiment file generator update,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/286,https://github.com/tom4r,1,https://github.com/PW-Sat2/PWSat2OBC/pull/286,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,286,2017-08-31T09:46:35Z,2017-08-31T10:41:55Z,2017-08-31T10:41:57Z,MERGED,True,462,5,7,https://github.com/tom4r,Experiment file generator update,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/286,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/286#issuecomment-326246986,This change is,"Reviewed 7 of 7 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,287,2017-08-31T11:15:47Z,2017-09-01T12:03:58Z,2017-09-01T12:03:59Z,MERGED,True,4,2,2,https://github.com/kfazi,Added error counters to Comm driver,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/287,https://github.com/kfazi,1,https://github.com/PW-Sat2/PWSat2OBC/pull/287,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,287,2017-08-31T11:15:47Z,2017-09-01T12:03:58Z,2017-09-01T12:03:59Z,MERGED,True,4,2,2,https://github.com/kfazi,Added error counters to Comm driver,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/287,https://github.com/kfazi,2,https://github.com/PW-Sat2/PWSat2OBC/pull/287#issuecomment-326265394,This change is,Error counter on comm send frame,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,287,2017-08-31T11:15:47Z,2017-09-01T12:03:58Z,2017-09-01T12:03:59Z,MERGED,True,4,2,2,https://github.com/kfazi,Added error counters to Comm driver,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/287,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/287#issuecomment-326563293,This change is,"Reviewed 2 of 2 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,288,2017-08-31T13:02:45Z,2017-08-31T15:21:29Z,2017-08-31T15:21:30Z,MERGED,True,4,4,4,https://github.com/kfazi,Increased RAM available for FreeRTOS by 224KB,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/288,https://github.com/kfazi,1,https://github.com/PW-Sat2/PWSat2OBC/pull/288,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,288,2017-08-31T13:02:45Z,2017-08-31T15:21:29Z,2017-08-31T15:21:30Z,MERGED,True,4,4,4,https://github.com/kfazi,Increased RAM available for FreeRTOS by 224KB,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/288,https://github.com/kfazi,2,https://github.com/PW-Sat2/PWSat2OBC/pull/288#issuecomment-326288599,This change is,Extend FreeRTOS to eat all remaining RAM,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,288,2017-08-31T13:02:45Z,2017-08-31T15:21:29Z,2017-08-31T15:21:30Z,MERGED,True,4,4,4,https://github.com/kfazi,Increased RAM available for FreeRTOS by 224KB,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/288,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/288#issuecomment-326329600,This change is,"Reviewed 4 of 4 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,289,2017-08-31T14:05:38Z,2017-09-05T17:07:44Z,2017-09-05T17:07:46Z,MERGED,True,197,3,12,https://github.com/kfazi,[TeleComm] Added SetBitrate telecommand,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/289,https://github.com/kfazi,1,https://github.com/PW-Sat2/PWSat2OBC/pull/289,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,289,2017-08-31T14:05:38Z,2017-09-05T17:07:44Z,2017-09-05T17:07:46Z,MERGED,True,197,3,12,https://github.com/kfazi,[TeleComm] Added SetBitrate telecommand,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/289,https://github.com/kfazi,2,https://github.com/PW-Sat2/PWSat2OBC/pull/289#issuecomment-326305900,This change is,[TC] Set COMM bitrate,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,289,2017-08-31T14:05:38Z,2017-09-05T17:07:44Z,2017-09-05T17:07:46Z,MERGED,True,197,3,12,https://github.com/kfazi,[TeleComm] Added SetBitrate telecommand,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/289,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/289#issuecomment-326330406,This change is,"Reviewed 8 of 8 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,289,2017-08-31T14:05:38Z,2017-09-05T17:07:44Z,2017-09-05T17:07:46Z,MERGED,True,197,3,12,https://github.com/kfazi,[TeleComm] Added SetBitrate telecommand,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/289,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/289#issuecomment-326559517,This change is,"Reviewed 5 of 7 files at r2.
Review status: 10 of 12 files reviewed at latest revision, 1 unresolved discussion.

integration_tests/response_frames/init.py, line 24 at r2 (raw file):

frame_types += map(lambda t: t[1], inspect.getmembers(set_bitrate, predicate=inspect.isclass))
frame_types = filter(lambda t: issubclass(t, ResponseFrame) and t != ResponseFrame, frame_types)
frame_types = reduce(lambda t, x: t + [x] if x not in t else t, frame_types, [])

what is the purpose of this?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,289,2017-08-31T14:05:38Z,2017-09-05T17:07:44Z,2017-09-05T17:07:46Z,MERGED,True,197,3,12,https://github.com/kfazi,[TeleComm] Added SetBitrate telecommand,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/289,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/289#issuecomment-326559583,This change is,"Reviewed 2 of 7 files at r2.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,289,2017-08-31T14:05:38Z,2017-09-05T17:07:44Z,2017-09-05T17:07:46Z,MERGED,True,197,3,12,https://github.com/kfazi,[TeleComm] Added SetBitrate telecommand,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/289,https://github.com/kfazi,6,https://github.com/PW-Sat2/PWSat2OBC/pull/289#issuecomment-326565819,This change is,"Review status: all files reviewed at latest revision, 1 unresolved discussion, some commit checks failed.

integration_tests/response_frames/init.py, line 24 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
what is the purpose of this?

This is needed to remove duplicate frame types.
inspect.getmembers() returns inherited classes and for example:
class SetBitrateSuccessFrame(OperationSuccessFrame)
will be resolved as both SetBitrateSuccessFrame and OperationSuccessFrame
what will cause exception in 
  
    
      PWSat2OBC/integration_tests/response_frames/downlink_frame_factory.py
    
    
         Line 27
      in
      654a246
    
  
  
    

        
          
           raise MultipleMatchingFrameTypes(frame) 
        
    
  



Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,289,2017-08-31T14:05:38Z,2017-09-05T17:07:44Z,2017-09-05T17:07:46Z,MERGED,True,197,3,12,https://github.com/kfazi,[TeleComm] Added SetBitrate telecommand,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/289,https://github.com/zaq32,7,https://github.com/PW-Sat2/PWSat2OBC/pull/289#issuecomment-326994975,This change is,"Reviewed 5 of 5 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,289,2017-08-31T14:05:38Z,2017-09-05T17:07:44Z,2017-09-05T17:07:46Z,MERGED,True,197,3,12,https://github.com/kfazi,[TeleComm] Added SetBitrate telecommand,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/289,https://github.com/zaq32,8,https://github.com/PW-Sat2/PWSat2OBC/pull/289#issuecomment-327241741,This change is,"Reviewed 5 of 5 files at r4.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,290,2017-08-31T15:34:53Z,2017-09-05T05:02:14Z,2017-09-05T05:02:16Z,MERGED,True,291,13,18,https://github.com/kfazi,[TeleComm] Added DisableOverheatSubmode command,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/290,https://github.com/kfazi,1,https://github.com/PW-Sat2/PWSat2OBC/pull/290,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,290,2017-08-31T15:34:53Z,2017-09-05T05:02:14Z,2017-09-05T05:02:16Z,MERGED,True,291,13,18,https://github.com/kfazi,[TeleComm] Added DisableOverheatSubmode command,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/290,https://github.com/kfazi,2,https://github.com/PW-Sat2/PWSat2OBC/pull/290#issuecomment-326333815,This change is,[TC] Disable EPS overheat submode,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,290,2017-08-31T15:34:53Z,2017-09-05T05:02:14Z,2017-09-05T05:02:16Z,MERGED,True,291,13,18,https://github.com/kfazi,[TeleComm] Added DisableOverheatSubmode command,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/290,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/290#issuecomment-326560127,This change is,"Reviewed 18 of 18 files at r1.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

unit_tests/base/Include/mock/eps.hpp, line 22 at r1 (raw file):

MOCK_METHOD0(ReadHousekeepingA, Option<devices::eps::hk::ControllerATelemetry>());

MOCK_METHOD0(ReadHousekeepingB, Option<devices::eps::hk::ControllerBTelemetry>());


IEPSDriver interface does not have such members.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,290,2017-08-31T15:34:53Z,2017-09-05T05:02:14Z,2017-09-05T05:02:16Z,MERGED,True,291,13,18,https://github.com/kfazi,[TeleComm] Added DisableOverheatSubmode command,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/290,https://github.com/kfazi,4,https://github.com/PW-Sat2/PWSat2OBC/pull/290#issuecomment-326567865,This change is,"Review status: all files reviewed at latest revision, 1 unresolved discussion, some commit checks failed.

unit_tests/base/Include/mock/eps.hpp, line 22 at r1 (raw file):

struct IEPSDriver : public IEpsTelemetryProvider

It inherits from IEpsTelemetryProvider, so it has these members

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,290,2017-08-31T15:34:53Z,2017-09-05T05:02:14Z,2017-09-05T05:02:16Z,MERGED,True,291,13,18,https://github.com/kfazi,[TeleComm] Added DisableOverheatSubmode command,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/290,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/290#issuecomment-326994893,This change is,"Reviewed 1 of 18 files at r1, 6 of 6 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,290,2017-08-31T15:34:53Z,2017-09-05T05:02:14Z,2017-09-05T05:02:16Z,MERGED,True,291,13,18,https://github.com/kfazi,[TeleComm] Added DisableOverheatSubmode command,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/290,https://github.com/zaq32,6,https://github.com/PW-Sat2/PWSat2OBC/pull/290#issuecomment-327071803,This change is,"Reviewed 3 of 3 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,291,2017-09-01T14:20:45Z,2017-09-01T19:12:15Z,2017-09-01T19:12:17Z,MERGED,True,166,19,15,https://github.com/zaq32,[telecommand] Add command to request build information.,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/291,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/291,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,291,2017-09-01T14:20:45Z,2017-09-01T19:12:15Z,2017-09-01T19:12:17Z,MERGED,True,166,19,15,https://github.com/zaq32,[telecommand] Add command to request build information.,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/291,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/291#issuecomment-326593316,This change is,[TC] Send back compile info,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,291,2017-09-01T14:20:45Z,2017-09-01T19:12:15Z,2017-09-01T19:12:17Z,MERGED,True,166,19,15,https://github.com/zaq32,[telecommand] Add command to request build information.,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/291,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/291#issuecomment-326594432,This change is,"Reviewed 11 of 11 files at r1.
Review status: all files reviewed at latest revision, 2 unresolved discussions.

libs/obc/communication/telecommands/compile_info.cpp, line 32 at r1 (raw file):

                const std::uint8_t array[] = VERSION;
                writer.WriteByte(0);
                writer.WriteArray(array);

It would be nice to have static_assert to verify that VERSION will fit into single frame

libs/obc/communication/telecommands/Include/obc/telecommands/compile_info.hpp, line 22 at r1 (raw file):

         *
         * Parameters:
         *  - 8-bit - APID that will be used in response

Not APID but correlation id

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,291,2017-09-01T14:20:45Z,2017-09-01T19:12:15Z,2017-09-01T19:12:17Z,MERGED,True,166,19,15,https://github.com/zaq32,[telecommand] Add command to request build information.,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/291,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/291#issuecomment-326625514,This change is,"Review status: 7 of 15 files reviewed at latest revision, 2 unresolved discussions.

libs/obc/communication/telecommands/compile_info.cpp, line 32 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
It would be nice to have static_assert to verify that VERSION will fit into single frame

There were cases that version info was longer then downlink frame payload size. So I have added separate apid for version info and split entire information in two frames

libs/obc/communication/telecommands/Include/obc/telecommands/compile_info.hpp, line 22 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Not APID but correlation id

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,291,2017-09-01T14:20:45Z,2017-09-01T19:12:15Z,2017-09-01T19:12:17Z,MERGED,True,166,19,15,https://github.com/zaq32,[telecommand] Add command to request build information.,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/291,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/291#issuecomment-326661962,This change is,"Reviewed 8 of 8 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,292,2017-09-01T20:50:58Z,2017-09-04T19:00:25Z,2017-09-04T20:25:02Z,MERGED,True,418,3,17,https://github.com/Novakov,Periodic power cycle,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/292,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/292,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,292,2017-09-01T20:50:58Z,2017-09-04T19:00:25Z,2017-09-04T20:25:02Z,MERGED,True,418,3,17,https://github.com/Novakov,Periodic power cycle,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/292,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/292#issuecomment-326681138,This change is,Periodic Power Cycle,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,292,2017-09-01T20:50:58Z,2017-09-04T19:00:25Z,2017-09-04T20:25:02Z,MERGED,True,418,3,17,https://github.com/Novakov,Periodic power cycle,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/292,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/292#issuecomment-326996814,This change is,"Reviewed 17 of 17 files at r1.
Review status: all files reviewed at latest revision, 2 unresolved discussions, some commit checks failed.

libs/mission/power/power_cycle.cpp, line 35 at r1 (raw file):

            {
                auto currentTime = state.Time;
                This->_bootTime = Some(currentTime);

This will cause some problems when we decide to manually adjust time

libs/mission/power/power_cycle.cpp, line 63 at r1 (raw file):

            auto experimentState = This->_experiments.CurrentState();

            if (experimentState.CurrentExperiment.HasValue)

These conditions are inherently non deterministic

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,293,2017-09-01T20:52:54Z,2017-09-07T13:27:03Z,2017-09-07T13:27:05Z,MERGED,True,371,226,53,https://github.com/tom4r,[APID Cleanup] Replaced Operation by command specific apids.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/293,https://github.com/tom4r,1,https://github.com/PW-Sat2/PWSat2OBC/pull/293,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,293,2017-09-01T20:52:54Z,2017-09-07T13:27:03Z,2017-09-07T13:27:05Z,MERGED,True,371,226,53,https://github.com/tom4r,[APID Cleanup] Replaced Operation by command specific apids.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/293,https://github.com/tom4r,2,https://github.com/PW-Sat2/PWSat2OBC/pull/293#issuecomment-326731179,This change is,APIDy odpowiedzi,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,293,2017-09-01T20:52:54Z,2017-09-07T13:27:03Z,2017-09-07T13:27:05Z,MERGED,True,371,226,53,https://github.com/tom4r,[APID Cleanup] Replaced Operation by command specific apids.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/293,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/293#issuecomment-326969179,This change is,"Reviewed 52 of 52 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,293,2017-09-01T20:52:54Z,2017-09-07T13:27:03Z,2017-09-07T13:27:05Z,MERGED,True,371,226,53,https://github.com/tom4r,[APID Cleanup] Replaced Operation by command specific apids.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/293,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/293#issuecomment-326994574,This change is,"Reviewed 52 of 52 files at r1.
Review status: all files reviewed at latest revision, 1 unresolved discussion, all commit checks successful.

libs/telecommunication/include/telecommunication/downlink.h, line 55 at r1 (raw file):

            Comm = 0x17,                        //!< Commands for Comm subsystem
            I2C = 0x1A,                         //!< I2C Raw
            Forbidden = (BeaconMarker & 0x3ff), //!< Reserved apid due to beacon collision

incorrect APID is 6 bit long therefore mask should also be 6 bits long.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,293,2017-09-01T20:52:54Z,2017-09-07T13:27:03Z,2017-09-07T13:27:05Z,MERGED,True,371,226,53,https://github.com/tom4r,[APID Cleanup] Replaced Operation by command specific apids.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/293,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/293#issuecomment-327002337,This change is,"Reviewed 2 of 2 files at r2.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,293,2017-09-01T20:52:54Z,2017-09-07T13:27:03Z,2017-09-07T13:27:05Z,MERGED,True,371,226,53,https://github.com/tom4r,[APID Cleanup] Replaced Operation by command specific apids.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/293,https://github.com/tom4r,6,https://github.com/PW-Sat2/PWSat2OBC/pull/293#issuecomment-327002654,This change is,"Review status: all files reviewed at latest revision, 1 unresolved discussion, some commit checks pending.

libs/telecommunication/include/telecommunication/downlink.h, line 55 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
incorrect APID is 6 bit long therefore mask should also be 6 bits long.

Fixed

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,293,2017-09-01T20:52:54Z,2017-09-07T13:27:03Z,2017-09-07T13:27:05Z,MERGED,True,371,226,53,https://github.com/tom4r,[APID Cleanup] Replaced Operation by command specific apids.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/293,https://github.com/Novakov,7,https://github.com/PW-Sat2/PWSat2OBC/pull/293#issuecomment-327229560,This change is,"Reviewed 6 of 6 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,293,2017-09-01T20:52:54Z,2017-09-07T13:27:03Z,2017-09-07T13:27:05Z,MERGED,True,371,226,53,https://github.com/tom4r,[APID Cleanup] Replaced Operation by command specific apids.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/293,https://github.com/zaq32,8,https://github.com/PW-Sat2/PWSat2OBC/pull/293#issuecomment-327379589,This change is,"Reviewed 2 of 6 files at r3, 5 of 5 files at r4.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,293,2017-09-01T20:52:54Z,2017-09-07T13:27:03Z,2017-09-07T13:27:05Z,MERGED,True,371,226,53,https://github.com/tom4r,[APID Cleanup] Replaced Operation by command specific apids.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/293,https://github.com/zaq32,9,https://github.com/PW-Sat2/PWSat2OBC/pull/293#issuecomment-327767464,This change is,"Reviewed 1 of 6 files at r3.
Review status:  all files reviewed at latest revision, all discussions resolved, all commit checks successful.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,293,2017-09-01T20:52:54Z,2017-09-07T13:27:03Z,2017-09-07T13:27:05Z,MERGED,True,371,226,53,https://github.com/tom4r,[APID Cleanup] Replaced Operation by command specific apids.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/293,https://github.com/Novakov,10,https://github.com/PW-Sat2/PWSat2OBC/pull/293#issuecomment-327798681,This change is,"Reviewed 1 of 1 files at r5.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,294,2017-09-02T13:32:36Z,2017-09-03T12:11:57Z,2017-09-03T12:11:58Z,MERGED,True,32,0,2,https://github.com/tom4r,[Firmware upload scripts] Check if provided file is in correct format.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/294,https://github.com/tom4r,1,https://github.com/PW-Sat2/PWSat2OBC/pull/294,"Simple check if user during uploadin doesn't try to provide file in incorrect format.


This change is","Simple check if user during uploadin doesn't try to provide file in incorrect format.


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,294,2017-09-02T13:32:36Z,2017-09-03T12:11:57Z,2017-09-03T12:11:58Z,MERGED,True,32,0,2,https://github.com/tom4r,[Firmware upload scripts] Check if provided file is in correct format.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/294,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/294#issuecomment-326801072,"Simple check if user during uploadin doesn't try to provide file in incorrect format.


This change is","Reviewed 2 of 2 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,295,2017-09-03T09:52:05Z,2017-09-04T08:49:39Z,2017-09-04T08:49:40Z,MERGED,True,160,25,8,https://github.com/tom4r,[Emulator Addons] Simulated frame sending and parsing time.,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/295,https://github.com/tom4r,1,https://github.com/PW-Sat2/PWSat2OBC/pull/295,"Added transmitter simulator. When it is enabled it gets one by one frame from the queue.
Mission Time and External time is converted to readable string.



This change is","Added transmitter simulator. When it is enabled it gets one by one frame from the queue.
Mission Time and External time is converted to readable string.



This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,295,2017-09-03T09:52:05Z,2017-09-04T08:49:39Z,2017-09-04T08:49:40Z,MERGED,True,160,25,8,https://github.com/tom4r,[Emulator Addons] Simulated frame sending and parsing time.,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/295,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/295#issuecomment-326801867,"Added transmitter simulator. When it is enabled it gets one by one frame from the queue.
Mission Time and External time is converted to readable string.



This change is","Reviewed 7 of 7 files at r1.
Review status: all files reviewed at latest revision, 2 unresolved discussions, some commit checks failed.

integration_tests/emulator/comm.py, line 78 at r1 (raw file):

    def transmitter_simulator_loop(self):
        if (not self._is_transmitter_simulated_checkbox.GetValue()) \
                  or (self._system.transmitter.queue_size() < 1 and not self._last_message_processing_start):

It's better to split these conditions into few ifs - it will be easier to read

integration_tests/emulator/comm.py, line 84 at r1 (raw file):

        if not self._last_message_processing_start:
            self._last_message_processing_start = time.time()
            self._system.comm.get_frame(0.01)

Handle empty queue exception

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,295,2017-09-03T09:52:05Z,2017-09-04T08:49:39Z,2017-09-04T08:49:40Z,MERGED,True,160,25,8,https://github.com/tom4r,[Emulator Addons] Simulated frame sending and parsing time.,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/295,https://github.com/tom4r,3,https://github.com/PW-Sat2/PWSat2OBC/pull/295#issuecomment-326827595,"Added transmitter simulator. When it is enabled it gets one by one frame from the queue.
Mission Time and External time is converted to readable string.



This change is","Review status: 4 of 8 files reviewed at latest revision, 2 unresolved discussions.

integration_tests/emulator/comm.py, line 78 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
It's better to split these conditions into few ifs - it will be easier to read

Done

integration_tests/emulator/comm.py, line 84 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Handle empty queue exception

Done

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,295,2017-09-03T09:52:05Z,2017-09-04T08:49:39Z,2017-09-04T08:49:40Z,MERGED,True,160,25,8,https://github.com/tom4r,[Emulator Addons] Simulated frame sending and parsing time.,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/295,https://github.com/tom4r,4,https://github.com/PW-Sat2/PWSat2OBC/pull/295#issuecomment-326827658,"Added transmitter simulator. When it is enabled it gets one by one frame from the queue.
Mission Time and External time is converted to readable string.



This change is","Additionally changed Beacon frames to be decoded from frames ""sent"", not set as beacon",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,295,2017-09-03T09:52:05Z,2017-09-04T08:49:39Z,2017-09-04T08:49:40Z,MERGED,True,160,25,8,https://github.com/tom4r,[Emulator Addons] Simulated frame sending and parsing time.,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/295,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/295#issuecomment-326904440,"Added transmitter simulator. When it is enabled it gets one by one frame from the queue.
Mission Time and External time is converted to readable string.



This change is","Reviewed 4 of 4 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,296,2017-09-05T16:32:51Z,2017-09-05T18:53:00Z,2017-09-05T18:53:01Z,MERGED,True,125,1,8,https://github.com/tom4r,[Telecommands] Reset Transmitter Telecommand,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/296,https://github.com/tom4r,1,https://github.com/PW-Sat2/PWSat2OBC/pull/296,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,296,2017-09-05T16:32:51Z,2017-09-05T18:53:00Z,2017-09-05T18:53:01Z,MERGED,True,125,1,8,https://github.com/tom4r,[Telecommands] Reset Transmitter Telecommand,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/296,https://github.com/tom4r,2,https://github.com/PW-Sat2/PWSat2OBC/pull/296#issuecomment-327231815,This change is,[TC] Restart COMM TX,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,296,2017-09-05T16:32:51Z,2017-09-05T18:53:00Z,2017-09-05T18:53:01Z,MERGED,True,125,1,8,https://github.com/tom4r,[Telecommands] Reset Transmitter Telecommand,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/296,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/296#issuecomment-327237768,This change is,"Reviewed 8 of 8 files at r1.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

integration_tests/tests/test_telecommands_comm.py, line 89 at r1 (raw file):

        self._start()
        self.system.comm.put_frame(telecommand.ResetTransmitterTelecommand())
        self.assertTrue(event.wait_for_change(30))

this is incorrect as transmitter is always reset on obc startup here you have to verify that it is reset twice

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,296,2017-09-05T16:32:51Z,2017-09-05T18:53:00Z,2017-09-05T18:53:01Z,MERGED,True,125,1,8,https://github.com/tom4r,[Telecommands] Reset Transmitter Telecommand,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/296,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/296#issuecomment-327255735,This change is,"Reviewed 6 of 7 files at r2, 1 of 1 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,297,2017-09-05T16:55:48Z,2017-09-07T16:57:00Z,2017-09-07T16:57:02Z,MERGED,True,247,29,35,https://github.com/zaq32,Telemetry uptime,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/297,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/297,"Extend telemetry with 22bit obc uptime in seconds


This change is","Extend telemetry with 22bit obc uptime in seconds


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,297,2017-09-05T16:55:48Z,2017-09-07T16:57:00Z,2017-09-07T16:57:02Z,MERGED,True,247,29,35,https://github.com/zaq32,Telemetry uptime,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/297,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/297#issuecomment-327238298,"Extend telemetry with 22bit obc uptime in seconds


This change is",[Telemetry] OBC Uptime,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,297,2017-09-05T16:55:48Z,2017-09-07T16:57:00Z,2017-09-07T16:57:02Z,MERGED,True,247,29,35,https://github.com/zaq32,Telemetry uptime,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/297,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/297#issuecomment-327241963,"Extend telemetry with 22bit obc uptime in seconds


This change is","Reviewed 35 of 35 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,297,2017-09-05T16:55:48Z,2017-09-07T16:57:00Z,2017-09-07T16:57:02Z,MERGED,True,247,29,35,https://github.com/zaq32,Telemetry uptime,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/297,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/297#issuecomment-327252521,"Extend telemetry with 22bit obc uptime in seconds


This change is","Reviewed 3 of 3 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,297,2017-09-05T16:55:48Z,2017-09-07T16:57:00Z,2017-09-07T16:57:02Z,MERGED,True,247,29,35,https://github.com/zaq32,Telemetry uptime,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/297,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/297#issuecomment-327851302,"Extend telemetry with 22bit obc uptime in seconds


This change is","Reviewed 2 of 2 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,298,2017-09-05T19:27:34Z,2017-09-06T05:32:55Z,2017-09-06T05:32:57Z,MERGED,True,91,1,4,https://github.com/Novakov,Detect comm stalling and restart transmitter,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/298,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/298,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,298,2017-09-05T19:27:34Z,2017-09-06T05:32:55Z,2017-09-06T05:32:57Z,MERGED,True,91,1,4,https://github.com/Novakov,Detect comm stalling and restart transmitter,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/298,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/298#issuecomment-327278200,This change is,Detect COMM TX hang and restart it,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,298,2017-09-05T19:27:34Z,2017-09-06T05:32:55Z,2017-09-06T05:32:57Z,MERGED,True,91,1,4,https://github.com/Novakov,Detect comm stalling and restart transmitter,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/298,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/298#issuecomment-327379327,This change is,"Reviewed 4 of 4 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,299,2017-09-07T10:24:53Z,2017-09-07T11:09:34Z,2017-09-07T11:09:35Z,MERGED,True,6,5,1,https://github.com/tom4r,Sail autosend test fix,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/299,https://github.com/tom4r,1,https://github.com/PW-Sat2/PWSat2OBC/pull/299,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,299,2017-09-07T10:24:53Z,2017-09-07T11:09:34Z,2017-09-07T11:09:35Z,MERGED,True,6,5,1,https://github.com/tom4r,Sail autosend test fix,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/299,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/299#issuecomment-327759988,This change is,"Reviewed 1 of 1 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,299,2017-09-07T10:24:53Z,2017-09-07T11:09:34Z,2017-09-07T11:09:35Z,MERGED,True,6,5,1,https://github.com/tom4r,Sail autosend test fix,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/299,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/299#issuecomment-327767366,This change is,"Reviewed 1 of 1 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks pending.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,300,2017-09-07T11:34:46Z,2017-09-07T15:06:50Z,2017-09-07T15:06:52Z,MERGED,True,52,21,3,https://github.com/Novakov,Program/safe mode upload progress bar,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/300,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/300,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,300,2017-09-07T11:34:46Z,2017-09-07T15:06:50Z,2017-09-07T15:06:52Z,MERGED,True,52,21,3,https://github.com/Novakov,Program/safe mode upload progress bar,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/300,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/300#issuecomment-327828594,This change is,"Reviewed 3 of 3 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,301,2017-09-07T17:12:22Z,2017-10-03T06:39:03Z,2017-10-03T06:39:05Z,MERGED,True,253,12,14,https://github.com/kfazi,Telecomm stop sail,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/301,https://github.com/kfazi,1,https://github.com/PW-Sat2/PWSat2OBC/pull/301,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,301,2017-09-07T17:12:22Z,2017-10-03T06:39:03Z,2017-10-03T06:39:05Z,MERGED,True,253,12,14,https://github.com/kfazi,Telecomm stop sail,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/301,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/301#issuecomment-327866973,This change is,"Reviewed 14 of 22 files at r1.
Review status: 14 of 22 files reviewed at latest revision, 2 unresolved discussions.

integration_tests/tests/test_telecommands_sail.py, line 58 at r1 (raw file):

        self.assertIsInstance(frame, SailSuccessFrame)

        self.assertFalse(sail_opening.wait_for_change(5), ""Sail deployment should not be performed"")

Opening sail after automatic sail opening has been disabled should reenable it again.

libs/state/Include/state/sail/SailState.hpp, line 50 at r1 (raw file):

         * @return True if sail deployment process is disabled, false otherwise.
         */
        bool IsDeploymentDisabled() const;

My initial idea was to use CurrentState to disable sail deployment

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,301,2017-09-07T17:12:22Z,2017-10-03T06:39:03Z,2017-10-03T06:39:05Z,MERGED,True,253,12,14,https://github.com/kfazi,Telecomm stop sail,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/301,https://github.com/kfazi,3,https://github.com/PW-Sat2/PWSat2OBC/pull/301#issuecomment-327868341,This change is,[TC] Stop sail deployment,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,301,2017-09-07T17:12:22Z,2017-10-03T06:39:03Z,2017-10-03T06:39:05Z,MERGED,True,253,12,14,https://github.com/kfazi,Telecomm stop sail,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/301,https://github.com/kfazi,4,https://github.com/PW-Sat2/PWSat2OBC/pull/301#issuecomment-327903662,This change is,"Review status: 13 of 19 files reviewed at latest revision, 2 unresolved discussions.

integration_tests/tests/test_telecommands_sail.py, line 58 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Opening sail after automatic sail opening has been disabled should reenable it again.

Done.

libs/state/Include/state/sail/SailState.hpp, line 50 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
My initial idea was to use CurrentState to disable sail deployment

Good point. I've removed isDisabled flag and added disabled state

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,301,2017-09-07T17:12:22Z,2017-10-03T06:39:03Z,2017-10-03T06:39:05Z,MERGED,True,253,12,14,https://github.com/kfazi,Telecomm stop sail,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/301,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/301#issuecomment-328067289,This change is,"Reviewed 13 of 22 files at r1, 2 of 2 files at r3.
Review status: 15 of 18 files reviewed at latest revision, 3 unresolved discussions, some commit checks failed.

libs/mission/sail/sail.cpp, line 266 at r3 (raw file):

    {
        state::SailState sailState;
        if (!state.PersistentState.Get(sailState))

what is the purpose of accessing previous sail state here?

libs/obc/communication/telecommands/sail.cpp, line 47 at r3 (raw file):

            Reader r(parameters);

            auto correlationId = r.ReadByte();

is correlation id really needed here as there response has its own unique apid anyway?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,301,2017-09-07T17:12:22Z,2017-10-03T06:39:03Z,2017-10-03T06:39:05Z,MERGED,True,253,12,14,https://github.com/kfazi,Telecomm stop sail,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/301,https://github.com/kfazi,6,https://github.com/PW-Sat2/PWSat2OBC/pull/301#issuecomment-328087286,This change is,"Review status: 14 of 18 files reviewed at latest revision, 3 unresolved discussions, some commit checks failed.

libs/mission/sail/sail.cpp, line 266 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
what is the purpose of accessing previous sail state here?

None ;) I missed it during one of the refactors. Removed.

libs/obc/communication/telecommands/sail.cpp, line 47 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
is correlation id really needed here as there response has its own unique apid anyway?

It's not really needed, but we might want to be able to distinguish calls of the same command (eg. we didn't received response on time and resent the command).

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,301,2017-09-07T17:12:22Z,2017-10-03T06:39:03Z,2017-10-03T06:39:05Z,MERGED,True,253,12,14,https://github.com/kfazi,Telecomm stop sail,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/301,https://github.com/Novakov,7,https://github.com/PW-Sat2/PWSat2OBC/pull/301#issuecomment-328329686,This change is,"Reviewed 2 of 22 files at r1, 1 of 6 files at r2, 1 of 1 files at r4.
Review status: all files reviewed at latest revision, 2 unresolved discussions, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,301,2017-09-07T17:12:22Z,2017-10-03T06:39:03Z,2017-10-03T06:39:05Z,MERGED,True,253,12,14,https://github.com/kfazi,Telecomm stop sail,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/301,https://github.com/zaq32,8,https://github.com/PW-Sat2/PWSat2OBC/pull/301#issuecomment-328578549,This change is,"Reviewed 3 of 22 files at r1.
Review status: all files reviewed at latest revision, 1 unresolved discussion, all commit checks successful.

libs/obc/communication/telecommands/sail.cpp, line 59 at r5 (raw file):

            }

            this->disableSailDeployment.DisableDeployment();

Persistent state is internally synchronized. is there a reason to modifying it indirectly via mission task instead of directly from here?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,301,2017-09-07T17:12:22Z,2017-10-03T06:39:03Z,2017-10-03T06:39:05Z,MERGED,True,253,12,14,https://github.com/kfazi,Telecomm stop sail,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/301,https://github.com/zaq32,9,https://github.com/PW-Sat2/PWSat2OBC/pull/301#issuecomment-328578653,This change is,"Reviewed 1 of 6 files at r2, 1 of 1 files at r4.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,301,2017-09-07T17:12:22Z,2017-10-03T06:39:03Z,2017-10-03T06:39:05Z,MERGED,True,253,12,14,https://github.com/kfazi,Telecomm stop sail,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/301,https://github.com/zaq32,10,https://github.com/PW-Sat2/PWSat2OBC/pull/301#issuecomment-333594446,This change is,"Reviewed 9 of 17 files at r6.
Review status: 13 of 17 files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,301,2017-09-07T17:12:22Z,2017-10-03T06:39:03Z,2017-10-03T06:39:05Z,MERGED,True,253,12,14,https://github.com/kfazi,Telecomm stop sail,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/301,https://github.com/kfazi,11,https://github.com/PW-Sat2/PWSat2OBC/pull/301#issuecomment-333659843,This change is,"Review status: 8 of 14 files reviewed at latest revision, 1 unresolved discussion.

libs/obc/communication/telecommands/sail.cpp, line 59 at r5 (raw file):
Previously, zaq32 (ukasz ak) wrote
Persistent state is internally synchronized. is there a reason to modifying it indirectly via mission task instead of directly from here?

You are right. I based my code on disable antenna deploy telecommand, which must have been implemented before persistent got it's internal synchronization. I simplified my implementation.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,301,2017-09-07T17:12:22Z,2017-10-03T06:39:03Z,2017-10-03T06:39:05Z,MERGED,True,253,12,14,https://github.com/kfazi,Telecomm stop sail,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/301,https://github.com/zaq32,12,https://github.com/PW-Sat2/PWSat2OBC/pull/301#issuecomment-333753477,This change is,"Reviewed 6 of 10 files at r7.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,302,2017-09-08T09:56:30Z,2017-09-08T10:20:32Z,2017-09-08T10:20:33Z,MERGED,True,333,9,12,https://github.com/Novakov,Telemetry generator,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/302,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/302,"Telemetry generator
Integration tests checking that parsers can process experiment files



This change is","Telemetry generator
Integration tests checking that parsers can process experiment files



This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,302,2017-09-08T09:56:30Z,2017-09-08T10:20:32Z,2017-09-08T10:20:33Z,MERGED,True,333,9,12,https://github.com/Novakov,Telemetry generator,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/302,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/302#issuecomment-328060786,"Telemetry generator
Integration tests checking that parsers can process experiment files



This change is",Sanity check: experiments parser,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,302,2017-09-08T09:56:30Z,2017-09-08T10:20:32Z,2017-09-08T10:20:33Z,MERGED,True,333,9,12,https://github.com/Novakov,Telemetry generator,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/302,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/302#issuecomment-328066676,"Telemetry generator
Integration tests checking that parsers can process experiment files



This change is","Reviewed 2 of 4 files at r1, 10 of 10 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,303,2017-09-08T20:33:25Z,2017-09-09T10:05:07Z,2017-09-09T10:05:08Z,MERGED,True,9,4,3,https://github.com/tom4r,Fixed test failures inside Test Experiment Sail Autosend,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/303,https://github.com/tom4r,1,https://github.com/PW-Sat2/PWSat2OBC/pull/303,"Fixed test failures caused by:

wait_for_experiment_iteration skipping target iterations.
COMM stall detection removing queued messages.



This change is","Fixed test failures caused by:

wait_for_experiment_iteration skipping target iterations.
COMM stall detection removing queued messages.



This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,303,2017-09-08T20:33:25Z,2017-09-09T10:05:07Z,2017-09-09T10:05:08Z,MERGED,True,9,4,3,https://github.com/tom4r,Fixed test failures inside Test Experiment Sail Autosend,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/303,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/303#issuecomment-328267622,"Fixed test failures caused by:

wait_for_experiment_iteration skipping target iterations.
COMM stall detection removing queued messages.



This change is","Reviewed 3 of 3 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,304,2017-09-09T17:58:37Z,2017-09-11T16:12:26Z,2017-09-11T16:12:27Z,MERGED,True,122,0,1,https://github.com/Novakov,PyConsole script for uploading new program,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/304,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/304,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,304,2017-09-09T17:58:37Z,2017-09-11T16:12:26Z,2017-09-11T16:12:27Z,MERGED,True,122,0,1,https://github.com/Novakov,PyConsole script for uploading new program,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/304,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/304#issuecomment-328579258,This change is,"Reviewed 1 of 1 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,305,2017-09-10T15:45:56Z,2017-09-13T07:37:52Z,2017-09-13T07:37:53Z,MERGED,True,636,131,27,https://github.com/Novakov,Decoding units in telemetry,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/305,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/305,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,305,2017-09-10T15:45:56Z,2017-09-13T07:37:52Z,2017-09-13T07:37:53Z,MERGED,True,636,131,27,https://github.com/Novakov,Decoding units in telemetry,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/305,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/305#issuecomment-328580475,This change is,"Reviewed 18 of 18 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,305,2017-09-10T15:45:56Z,2017-09-13T07:37:52Z,2017-09-13T07:37:53Z,MERGED,True,636,131,27,https://github.com/Novakov,Decoding units in telemetry,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/305,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/305#issuecomment-328899655,This change is,"Reviewed 11 of 13 files at r2, 5 of 5 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,305,2017-09-10T15:45:56Z,2017-09-13T07:37:52Z,2017-09-13T07:37:53Z,MERGED,True,636,131,27,https://github.com/Novakov,Decoding units in telemetry,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/305,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/305#issuecomment-329066409,This change is,"Reviewed 1 of 1 files at r4.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,306,2017-09-13T13:30:37Z,2017-09-15T19:09:38Z,2017-09-15T19:09:39Z,MERGED,True,445,17,21,https://github.com/Novakov,Telecommand: copy boot slots,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/306,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/306,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,306,2017-09-13T13:30:37Z,2017-09-15T19:09:38Z,2017-09-15T19:09:39Z,MERGED,True,445,17,21,https://github.com/Novakov,Telecommand: copy boot slots,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/306,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/306#issuecomment-329168404,This change is,[TC] Copy boot slot,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,306,2017-09-13T13:30:37Z,2017-09-15T19:09:38Z,2017-09-15T19:09:39Z,MERGED,True,445,17,21,https://github.com/Novakov,Telecommand: copy boot slots,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/306,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/306#issuecomment-329535658,This change is,"Reviewed 4 of 11 files at r1, 15 of 17 files at r2.
Review status: 19 of 21 files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,306,2017-09-13T13:30:37Z,2017-09-15T19:09:38Z,2017-09-15T19:09:39Z,MERGED,True,445,17,21,https://github.com/Novakov,Telecommand: copy boot slots,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/306,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/306#issuecomment-329780824,This change is,"Reviewed 2 of 17 files at r2.
Review status: all files reviewed at latest revision, 3 unresolved discussions, some commit checks failed.

libs/experiments/program/program_exp.cpp, line 37 at r2 (raw file):

        }

        static inline DownlinkFrame WriteProgramError(std::uint8_t errorCode, std::uint8_t entry, std::uint32_t offset)

unused

libs/experiments/program/program_exp.cpp, line 49 at r2 (raw file):

        }

        static inline DownlinkFrame FinalizeEntryWriteError(std::uint8_t errorCode, std::uint8_t entry)

unused

libs/experiments/program/program_exp.cpp, line 61 at r2 (raw file):

        }

        static inline DownlinkFrame FinalizeEntryCRCError(std::uint8_t entry, std::uint16_t actualCrc)

unused

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,306,2017-09-13T13:30:37Z,2017-09-15T19:09:38Z,2017-09-15T19:09:39Z,MERGED,True,445,17,21,https://github.com/Novakov,Telecommand: copy boot slots,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/306,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/306#issuecomment-329835520,This change is,"Review status: 20 of 21 files reviewed at latest revision, 3 unresolved discussions.

libs/experiments/program/program_exp.cpp, line 37 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
unused

Done.

libs/experiments/program/program_exp.cpp, line 49 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
unused

Done.

libs/experiments/program/program_exp.cpp, line 61 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
unused

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,306,2017-09-13T13:30:37Z,2017-09-15T19:09:38Z,2017-09-15T19:09:39Z,MERGED,True,445,17,21,https://github.com/Novakov,Telecommand: copy boot slots,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/306,https://github.com/zaq32,6,https://github.com/PW-Sat2/PWSat2OBC/pull/306#issuecomment-329873618,This change is,"Reviewed 1 of 1 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,307,2017-09-14T07:32:04Z,2017-09-15T16:42:07Z,2017-09-15T16:42:08Z,MERGED,True,69,17,3,https://github.com/Novakov,Reintialize gyroscope if read failed,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/307,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/307,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,307,2017-09-14T07:32:04Z,2017-09-15T16:42:07Z,2017-09-15T16:42:08Z,MERGED,True,69,17,3,https://github.com/Novakov,Reintialize gyroscope if read failed,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/307,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/307#issuecomment-329398689,This change is,Reinitialize gyro if failed to acquire telemetry,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,307,2017-09-14T07:32:04Z,2017-09-15T16:42:07Z,2017-09-15T16:42:08Z,MERGED,True,69,17,3,https://github.com/Novakov,Reintialize gyroscope if read failed,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/307,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/307#issuecomment-329534833,This change is,"Reviewed 3 of 3 files at r1.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

unit_tests/drivers/gyro/gyroTest.cpp, line 257 at r1 (raw file):

    for (int status = 0; status <= 0xFF; ++status)
    {
        ON_CALL(i2c, WriteRead(_addr, ElementsAre(0x1A), SpanOfSize(9))).WillByDefault(Invoke([=](uint8_t, auto, auto read) {

on_call does not have to be repeated. It sets default behaviour.
However now driver behaviour is not enforced by the test.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,307,2017-09-14T07:32:04Z,2017-09-15T16:42:07Z,2017-09-15T16:42:08Z,MERGED,True,69,17,3,https://github.com/Novakov,Reintialize gyroscope if read failed,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/307,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/307#issuecomment-329823976,This change is,"Review status: all files reviewed at latest revision, 1 unresolved discussion, some commit checks failed.

unit_tests/drivers/gyro/gyroTest.cpp, line 257 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
on_call does not have to be repeated. It sets default behaviour.
However now driver behaviour is not enforced by the test.

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,307,2017-09-14T07:32:04Z,2017-09-15T16:42:07Z,2017-09-15T16:42:08Z,MERGED,True,69,17,3,https://github.com/Novakov,Reintialize gyroscope if read failed,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/307,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/307#issuecomment-329824341,This change is,"Reviewed 1 of 1 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,308,2017-09-14T13:29:36Z,2017-09-18T05:21:44Z,2017-09-18T05:21:45Z,MERGED,True,618,33,25,https://github.com/tom4r,Notify time changed,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/308,https://github.com/tom4r,1,https://github.com/PW-Sat2/PWSat2OBC/pull/308,"Fixed behaviour of Mission Tasks when time correction changes time.
Mainly fixed beacon silence period.
Not all tests added yet to this PR.


This change is","Fixed behaviour of Mission Tasks when time correction changes time.
Mainly fixed beacon silence period.
Not all tests added yet to this PR.


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,308,2017-09-14T13:29:36Z,2017-09-18T05:21:44Z,2017-09-18T05:21:45Z,MERGED,True,618,33,25,https://github.com/tom4r,Notify time changed,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/308,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/308#issuecomment-329538438,"Fixed behaviour of Mission Tasks when time correction changes time.
Mainly fixed beacon silence period.
Not all tests added yet to this PR.


This change is","Reviewed 25 of 25 files at r1.
Review status: all files reviewed at latest revision, 1 unresolved discussion, some commit checks failed.

libs/mission/Include/mission/main.hpp, line 574 at r1 (raw file):

    bool MissionLoop<State, T...>::NotifyTimeChanged(std::chrono::milliseconds timeCorrection)
    {
        if (!SendTimeChangedNotification<Task>(timeCorrection, IsRequireNotifyWhenTimeChanges<Task>()))

this if is redundant as both variants of SendTimeChangedNotification return only true

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,308,2017-09-14T13:29:36Z,2017-09-18T05:21:44Z,2017-09-18T05:21:45Z,MERGED,True,618,33,25,https://github.com/tom4r,Notify time changed,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/308,https://github.com/tom4r,3,https://github.com/PW-Sat2/PWSat2OBC/pull/308#issuecomment-329973526,"Fixed behaviour of Mission Tasks when time correction changes time.
Mainly fixed beacon silence period.
Not all tests added yet to this PR.


This change is","Review status: 22 of 25 files reviewed at latest revision, 1 unresolved discussion.

libs/mission/Include/mission/main.hpp, line 574 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
this if is redundant as both variants of SendTimeChangedNotification return only true

Fixed

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,308,2017-09-14T13:29:36Z,2017-09-18T05:21:44Z,2017-09-18T05:21:45Z,MERGED,True,618,33,25,https://github.com/tom4r,Notify time changed,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/308,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/308#issuecomment-330131361,"Fixed behaviour of Mission Tasks when time correction changes time.
Mainly fixed beacon silence period.
Not all tests added yet to this PR.


This change is","Reviewed 3 of 3 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,309,2017-09-14T19:33:38Z,2017-09-15T05:09:06Z,2017-09-15T05:09:07Z,MERGED,True,5,4,6,https://github.com/Novakov,Disable RTTI,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/309,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/309,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,309,2017-09-14T19:33:38Z,2017-09-15T05:09:06Z,2017-09-15T05:09:07Z,MERGED,True,5,4,6,https://github.com/Novakov,Disable RTTI,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/309,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/309#issuecomment-329682841,This change is,"Reviewed 6 of 6 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,310,2017-09-15T19:09:55Z,2017-09-16T11:29:34Z,2017-09-16T11:29:35Z,MERGED,True,13,12,8,https://github.com/zaq32,Update Antenna Deployment algorithm,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/310,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/310,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,310,2017-09-15T19:09:55Z,2017-09-16T11:29:34Z,2017-09-16T11:29:35Z,MERGED,True,13,12,8,https://github.com/zaq32,Update Antenna Deployment algorithm,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/310,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/310#issuecomment-329874281,This change is,Update antenna procedure,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,310,2017-09-15T19:09:55Z,2017-09-16T11:29:34Z,2017-09-16T11:29:35Z,MERGED,True,13,12,8,https://github.com/zaq32,Update Antenna Deployment algorithm,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/310,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/310#issuecomment-329962897,This change is,"Reviewed 8 of 8 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,311,2017-09-17T17:23:10Z,2017-09-17T20:17:37Z,2017-09-17T20:17:38Z,MERGED,True,26,5,6,https://github.com/tom4r,Raised priority of System task and reduced priority of Photo task.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/311,https://github.com/tom4r,1,https://github.com/PW-Sat2/PWSat2OBC/pull/311,"Fixed issue when long running Experiment (for example Copy Boot Slots) causes transfer errors on N25Q and FRAM.


This change is","Fixed issue when long running Experiment (for example Copy Boot Slots) causes transfer errors on N25Q and FRAM.


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,311,2017-09-17T17:23:10Z,2017-09-17T20:17:37Z,2017-09-17T20:17:38Z,MERGED,True,26,5,6,https://github.com/tom4r,Raised priority of System task and reduced priority of Photo task.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/311,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/311#issuecomment-330080340,"Fixed issue when long running Experiment (for example Copy Boot Slots) causes transfer errors on N25Q and FRAM.


This change is","Reviewed 6 of 6 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,312,2017-09-18T18:01:05Z,2017-09-19T09:21:48Z,2017-09-19T09:21:50Z,MERGED,True,285,229,16,https://github.com/Novakov,No more COMM beacon,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/312,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/312,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,312,2017-09-18T18:01:05Z,2017-09-19T09:21:48Z,2017-09-19T09:21:50Z,MERGED,True,285,229,16,https://github.com/Novakov,No more COMM beacon,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/312,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/312#issuecomment-330309217,This change is,"Reviewed 3 of 7 files at r1.
Review status: 3 of 7 files reviewed at latest revision, 1 unresolved discussion.

src/main.cpp, line 267 at r1 (raw file):

        }

        Main.Hardware.CommDriver.SendFrame(frame.Frame());

there is no point to send frame if it could not be constructed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,312,2017-09-18T18:01:05Z,2017-09-19T09:21:48Z,2017-09-19T09:21:50Z,MERGED,True,285,229,16,https://github.com/Novakov,No more COMM beacon,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/312,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/312#issuecomment-330309387,This change is,"Reviewed 2 of 7 files at r1.
Review status: 4 of 7 files reviewed at latest revision, 1 unresolved discussion.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,312,2017-09-18T18:01:05Z,2017-09-19T09:21:48Z,2017-09-19T09:21:50Z,MERGED,True,285,229,16,https://github.com/Novakov,No more COMM beacon,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/312,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/312#issuecomment-330360495,This change is,"Reviewed 3 of 7 files at r1, 9 of 13 files at r2.
Review status: 12 of 16 files reviewed at latest revision, 6 unresolved discussions.

libs/mission/beacon/BeaconUpdate.cpp, line 54 at r1 (raw file):

    {
        auto This = static_cast<BeaconUpdate*>(param);
        //        auto&& timeDifference = state.Time - This->lastBeaconUpdate;

remove this no longer used code

libs/mission/beacon/BeaconUpdate.cpp, line 56 at r1 (raw file):

        //        auto&& timeDifference = state.Time - This->lastBeaconUpdate;
        return state.AntennaState.IsDeployed() && This->_beaconTaskHandle != nullptr; // && //
        //            (timeDifference >= BeaconUpdateInterval || timeDifference < std::chrono::milliseconds::zero());

remove this no longer used code

libs/mission/beacon/BeaconUpdate.cpp, line 87 at r1 (raw file):

        //        {
        //            LOGF(LOG_LEVEL_ERROR, ""Unable to set beacon at %lu"", time);
        //        }

remove this no longer used code

src/main.cpp, line 252 at r1 (raw file):

    auto beaconDelay = 30s;

    while (1)

shouldn't beacon sender be used in here?

unit_tests/drivers/Comm/CommTest.cpp, line 918 at r1 (raw file):

        //                EXPECT_THAT(inData, Eq(span<const uint8_t>(expectedBeacon)));
        //                return I2CResult::OK;
        //            }));

remove this no longer used code

unit_tests/drivers/Comm/CommTest.cpp, line 936 at r1 (raw file):

        //                EXPECT_THAT(inData, Eq(span<const uint8_t>(expectedBeacon)));
        //                return I2CResult::OK;
        //            }));

remove this no longer used code

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,312,2017-09-18T18:01:05Z,2017-09-19T09:21:48Z,2017-09-19T09:21:50Z,MERGED,True,285,229,16,https://github.com/Novakov,No more COMM beacon,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/312,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/312#issuecomment-330360946,This change is,"Reviewed 4 of 13 files at r2.
Review status: all files reviewed at latest revision, 2 unresolved discussions.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,312,2017-09-18T18:01:05Z,2017-09-19T09:21:48Z,2017-09-19T09:21:50Z,MERGED,True,285,229,16,https://github.com/Novakov,No more COMM beacon,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/312,https://github.com/Novakov,6,https://github.com/PW-Sat2/PWSat2OBC/pull/312#issuecomment-330447329,This change is,"Review status: 15 of 16 files reviewed at latest revision, 2 unresolved discussions.

unit_tests/drivers/Comm/CommTest.cpp, line 918 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
remove this no longer used code

Done.

unit_tests/drivers/Comm/CommTest.cpp, line 936 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
remove this no longer used code

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,312,2017-09-18T18:01:05Z,2017-09-19T09:21:48Z,2017-09-19T09:21:50Z,MERGED,True,285,229,16,https://github.com/Novakov,No more COMM beacon,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/312,https://github.com/zaq32,7,https://github.com/PW-Sat2/PWSat2OBC/pull/312#issuecomment-330451695,This change is,"Reviewed 1 of 1 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,313,2017-09-19T14:39:29Z,2017-09-19T15:22:51Z,2017-09-19T15:22:53Z,MERGED,True,8,6,2,https://github.com/Novakov,Fix beacon in emulator,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/313,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/313,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,313,2017-09-19T14:39:29Z,2017-09-19T15:22:51Z,2017-09-19T15:22:53Z,MERGED,True,8,6,2,https://github.com/Novakov,Fix beacon in emulator,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/313,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/313#issuecomment-330575184,This change is,"Reviewed 2 of 2 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,314,2017-09-20T13:58:17Z,2017-09-22T18:31:46Z,2017-09-26T20:59:23Z,MERGED,True,2,2,1,https://github.com/begreeen,OBC FM pinout fix (PD7 and PD5 in datasheet ver. 0.9 are swapped),1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/314,https://github.com/begreeen,1,https://github.com/PW-Sat2/PWSat2OBC/pull/314,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,314,2017-09-20T13:58:17Z,2017-09-22T18:31:46Z,2017-09-26T20:59:23Z,MERGED,True,2,2,1,https://github.com/begreeen,OBC FM pinout fix (PD7 and PD5 in datasheet ver. 0.9 are swapped),1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/314,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/314#issuecomment-330874025,This change is,"Reviewed 1 of 1 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,315,2017-09-21T05:50:03Z,2017-09-23T07:26:45Z,2017-09-23T07:26:47Z,MERGED,True,610,71,27,https://github.com/Novakov,Safe mode scrubbing,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/315,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/315,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,315,2017-09-21T05:50:03Z,2017-09-23T07:26:45Z,2017-09-23T07:26:47Z,MERGED,True,610,71,27,https://github.com/Novakov,Safe mode scrubbing,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/315,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/315#issuecomment-331058082,This change is,[Safe Mode] Scrubbing,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,315,2017-09-21T05:50:03Z,2017-09-23T07:26:45Z,2017-09-23T07:26:47Z,MERGED,True,610,71,27,https://github.com/Novakov,Safe mode scrubbing,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/315,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/315#issuecomment-331100341,This change is,[Safe Mode] Reboot on interrupt,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,315,2017-09-21T05:50:03Z,2017-09-23T07:26:45Z,2017-09-23T07:26:47Z,MERGED,True,610,71,27,https://github.com/Novakov,Safe mode scrubbing,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/315,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/315#issuecomment-331204138,This change is,"Reviewed 22 of 22 files at r1, 5 of 5 files at r2.
Review status: all files reviewed at latest revision, 2 unresolved discussions, some commit checks failed.

libs/drivers/program_flash/Include/program_flash/boot_table.hpp, line 240 at r2 (raw file):

         * @param index Safe mode copy index
         */
        SafeModeCopy(IFlashDriver& flash, std::uint8_t index) : _copy(flash, 3_MB + 5 * 64_KB + 64_KB * index)

This value should be related to the BootloaderCopies constant in the BootTable type.

libs/obc/scrubbing/scrubbing.cpp, line 64 at r2 (raw file):

                This->_secondarySlotsScrubberCounter,
                This->_bootloaderScrubberCounter,
                This->_bootSettingsScrubberCounter);

shouldn't safe mode scrubbing be included in here too?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,315,2017-09-21T05:50:03Z,2017-09-23T07:26:45Z,2017-09-23T07:26:47Z,MERGED,True,610,71,27,https://github.com/Novakov,Safe mode scrubbing,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/315,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/315#issuecomment-331541326,This change is,"Review status: 24 of 27 files reviewed at latest revision, 2 unresolved discussions.

libs/drivers/program_flash/Include/program_flash/boot_table.hpp, line 240 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
This value should be related to the BootloaderCopies constant in the BootTable type.

Done.

libs/obc/scrubbing/scrubbing.cpp, line 64 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
shouldn't safe mode scrubbing be included in here too?

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,315,2017-09-21T05:50:03Z,2017-09-23T07:26:45Z,2017-09-23T07:26:47Z,MERGED,True,610,71,27,https://github.com/Novakov,Safe mode scrubbing,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/315,https://github.com/zaq32,6,https://github.com/PW-Sat2/PWSat2OBC/pull/315#issuecomment-331544783,This change is,"Reviewed 1 of 1 files at r3, 2 of 2 files at r4.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,316,2017-09-21T10:33:04Z,2017-09-21T12:28:28Z,2017-09-21T12:28:29Z,MERGED,True,2,1,1,https://github.com/Novakov,Changed security code for CI builds,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/316,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/316,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,316,2017-09-21T10:33:04Z,2017-09-21T12:28:28Z,2017-09-21T12:28:29Z,MERGED,True,2,1,1,https://github.com/Novakov,Changed security code for CI builds,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/316,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/316#issuecomment-331118475,This change is,Change Security Code for FlightModel,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,316,2017-09-21T10:33:04Z,2017-09-21T12:28:28Z,2017-09-21T12:28:29Z,MERGED,True,2,1,1,https://github.com/Novakov,Changed security code for CI builds,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/316,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/316#issuecomment-331141484,This change is,"Reviewed 1 of 1 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,317,2017-09-21T13:29:09Z,2017-09-23T14:38:01Z,2017-09-23T14:38:02Z,MERGED,True,0,14,2,https://github.com/mandrek44,Removed dead code from experiments,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/317,https://github.com/mandrek44,1,https://github.com/PW-Sat2/PWSat2OBC/pull/317,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,317,2017-09-21T13:29:09Z,2017-09-23T14:38:01Z,2017-09-23T14:38:02Z,MERGED,True,0,14,2,https://github.com/mandrek44,Removed dead code from experiments,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/317,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/317#issuecomment-331156578,This change is,"Reviewed 2 of 2 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,318,2017-09-21T14:23:24Z,2017-09-21T14:27:52Z,2017-09-21T14:28:26Z,CLOSED,False,1,1,1,https://github.com/mandrek44,Added missing LCL to python emulator,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/318,https://github.com/mandrek44,1,https://github.com/PW-Sat2/PWSat2OBC/pull/318,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,318,2017-09-21T14:23:24Z,2017-09-21T14:27:52Z,2017-09-21T14:28:26Z,CLOSED,False,1,1,1,https://github.com/mandrek44,Added missing LCL to python emulator,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/318,https://github.com/ggajoch,2,https://github.com/PW-Sat2/PWSat2OBC/pull/318#issuecomment-331172938,This change is,"Review status: 0 of 1 files reviewed at latest revision, 1 unresolved discussion.

integration_tests/devices/eps.py, line 232 at r1 (raw file):

        self._eps = eps

        self._lcls = [eps.TKmain, eps.TKred, eps.SunS, eps.CamNadir, eps.CamWing, eps.SENS, eps.ANTenna]

That was OK. TKred LCL is only on Controller B.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,318,2017-09-21T14:23:24Z,2017-09-21T14:27:52Z,2017-09-21T14:28:26Z,CLOSED,False,1,1,1,https://github.com/mandrek44,Added missing LCL to python emulator,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/318,https://github.com/mandrek44,3,https://github.com/PW-Sat2/PWSat2OBC/pull/318#issuecomment-331173485,This change is,"Review status: 0 of 1 files reviewed at latest revision, 1 unresolved discussion.

integration_tests/devices/eps.py, line 232 at r1 (raw file):
Previously, ggajoch (Grzegorz Gajoch) wrote
That was OK. TKred LCL is only on Controller B.

Ok

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,319,2017-09-21T18:34:17Z,2017-09-22T08:46:24Z,2017-09-22T08:46:25Z,MERGED,True,16,16,4,https://github.com/zaq32,[boot] Fix boot loader hang in health check on boot slot CRC mismatch.,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/319,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/319,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,319,2017-09-21T18:34:17Z,2017-09-22T08:46:24Z,2017-09-22T08:46:25Z,MERGED,True,16,16,4,https://github.com/zaq32,[boot] Fix boot loader hang in health check on boot slot CRC mismatch.,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/319,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/319#issuecomment-331243783,This change is,[BUG] Boot loader hang on healtchcheck,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,319,2017-09-21T18:34:17Z,2017-09-22T08:46:24Z,2017-09-22T08:46:25Z,MERGED,True,16,16,4,https://github.com/zaq32,[boot] Fix boot loader hang in health check on boot slot CRC mismatch.,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/319,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/319#issuecomment-331243977,This change is,"Reviewed 1 of 1 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,319,2017-09-21T18:34:17Z,2017-09-22T08:46:24Z,2017-09-22T08:46:25Z,MERGED,True,16,16,4,https://github.com/zaq32,[boot] Fix boot loader hang in health check on boot slot CRC mismatch.,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/319,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/319#issuecomment-331388960,This change is,"Reviewed 4 of 4 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,320,2017-09-21T19:47:39Z,2017-09-26T19:25:53Z,2017-09-26T19:25:54Z,MERGED,True,26,31,6,https://github.com/zaq32,"[obc] Do not create ""a"" directory on startup.",2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/320,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/320,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,320,2017-09-21T19:47:39Z,2017-09-26T19:25:53Z,2017-09-26T19:25:54Z,MERGED,True,26,31,6,https://github.com/zaq32,"[obc] Do not create ""a"" directory on startup.",2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/320,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/320#issuecomment-332295507,This change is,"Reviewed 6 of 6 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,321,2017-09-22T19:24:57Z,2017-09-26T18:13:20Z,2017-09-26T18:13:22Z,MERGED,True,1102,983,25,https://github.com/Novakov,Update beacon,15,[],https://github.com/PW-Sat2/PWSat2OBC/pull/321,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/321,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,321,2017-09-22T19:24:57Z,2017-09-26T18:13:20Z,2017-09-26T18:13:22Z,MERGED,True,1102,983,25,https://github.com/Novakov,Update beacon,15,[],https://github.com/PW-Sat2/PWSat2OBC/pull/321,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/321#issuecomment-331538643,This change is,Beacon update,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,321,2017-09-22T19:24:57Z,2017-09-26T18:13:20Z,2017-09-26T18:13:22Z,MERGED,True,1102,983,25,https://github.com/Novakov,Update beacon,15,[],https://github.com/PW-Sat2/PWSat2OBC/pull/321,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/321#issuecomment-331968076,This change is,"Reviewed 25 of 25 files at r1.
Review status: all files reviewed at latest revision, 3 unresolved discussions, some commit checks failed.

libs/drivers/comm/Include/comm/comm.hpp, line 106 at r1 (raw file):

 * as they are received directly from the hardware.
 */
struct ReceiverTelemetry

you could use BitValue to encode the expected size type and to automate Size calculate.

libs/drivers/comm/Include/comm/comm.hpp, line 153 at r1 (raw file):

 * as they are received directly from the hardware.
 */
struct TransmitterTelemetry

you could use BitValue to encode the expected size type and to automate Size calculate.

libs/drivers/comm/Include/comm/comm.hpp, line 200 at r1 (raw file):

/** Type that contains status of the frame count query. */
struct ReceiverFrameCount

you could use BitValue to encode the expected size type and to automate Size calculate.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,321,2017-09-22T19:24:57Z,2017-09-26T18:13:20Z,2017-09-26T18:13:22Z,MERGED,True,1102,983,25,https://github.com/Novakov,Update beacon,15,[],https://github.com/PW-Sat2/PWSat2OBC/pull/321,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/321#issuecomment-332285169,This change is,"Review status: 23 of 25 files reviewed at latest revision, 3 unresolved discussions.

libs/drivers/comm/Include/comm/comm.hpp, line 106 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
you could use BitValue to encode the expected size type and to automate Size calculate.

Done.

libs/drivers/comm/Include/comm/comm.hpp, line 153 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
you could use BitValue to encode the expected size type and to automate Size calculate.

Done.

libs/drivers/comm/Include/comm/comm.hpp, line 200 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
you could use BitValue to encode the expected size type and to automate Size calculate.

There is no size here :)

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,321,2017-09-22T19:24:57Z,2017-09-26T18:13:20Z,2017-09-26T18:13:22Z,MERGED,True,1102,983,25,https://github.com/Novakov,Update beacon,15,[],https://github.com/PW-Sat2/PWSat2OBC/pull/321,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/321#issuecomment-332286857,This change is,"Reviewed 2 of 2 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,322,2017-09-23T12:32:50Z,2017-09-25T18:40:42Z,2017-09-25T18:40:43Z,MERGED,True,69,99,6,https://github.com/Novakov,Save telemetry to file every 30s,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/322,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/322,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,322,2017-09-23T12:32:50Z,2017-09-25T18:40:42Z,2017-09-25T18:40:43Z,MERGED,True,69,99,6,https://github.com/Novakov,Save telemetry to file every 30s,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/322,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/322#issuecomment-331631129,This change is,[BUG] Telemetry should be saved to file every 30s,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,322,2017-09-23T12:32:50Z,2017-09-25T18:40:42Z,2017-09-25T18:40:43Z,MERGED,True,69,99,6,https://github.com/Novakov,Save telemetry to file every 30s,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/322,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/322#issuecomment-331959937,This change is,"Reviewed 4 of 5 files at r1, 2 of 2 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,322,2017-09-23T12:32:50Z,2017-09-25T18:40:42Z,2017-09-25T18:40:43Z,MERGED,True,69,99,6,https://github.com/Novakov,Save telemetry to file every 30s,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/322,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/322#issuecomment-331961170,This change is,"Reviewed 2 of 2 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,323,2017-09-23T16:31:03Z,2017-09-25T17:31:44Z,2017-09-25T17:31:45Z,MERGED,True,1,1,1,https://github.com/Novakov,Restore boot slots as last step,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/323,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/323,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,323,2017-09-23T16:31:03Z,2017-09-25T17:31:44Z,2017-09-25T17:31:45Z,MERGED,True,1,1,1,https://github.com/Novakov,Restore boot slots as last step,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/323,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/323#issuecomment-331954360,This change is,"Reviewed 1 of 1 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,324,2017-09-26T18:45:22Z,2017-09-26T22:09:17Z,2017-09-26T22:09:20Z,MERGED,True,42,0,3,https://github.com/zaq32,[obc][eps] Reset lcls on obc startup.,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/324,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/324,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,324,2017-09-26T18:45:22Z,2017-09-26T22:09:17Z,2017-09-26T22:09:20Z,MERGED,True,42,0,3,https://github.com/zaq32,[obc][eps] Reset lcls on obc startup.,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/324,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/324#issuecomment-332296965,This change is,[NCR #017] Reset EPS LCL state at boot,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,324,2017-09-26T18:45:22Z,2017-09-26T22:09:17Z,2017-09-26T22:09:20Z,MERGED,True,42,0,3,https://github.com/zaq32,[obc][eps] Reset lcls on obc startup.,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/324,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/324#issuecomment-332299189,This change is,"Reviewed 3 of 3 files at r1.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

integration_tests/tests/test_startup.py, line 33 at r1 (raw file):

    def test_reset_ant_red_lcl(self):
        self.wait_for_lcl(self.system.eps.ANTennaRed, ""ANT Red LCL Should be reset on startup"")

Put all asserts into single test to reduce running time

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,324,2017-09-26T18:45:22Z,2017-09-26T22:09:17Z,2017-09-26T22:09:20Z,MERGED,True,42,0,3,https://github.com/zaq32,[obc][eps] Reset lcls on obc startup.,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/324,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/324#issuecomment-332301897,This change is,"Review status: 2 of 3 files reviewed at latest revision, 1 unresolved discussion.

integration_tests/tests/test_startup.py, line 33 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Put all asserts into single test to reduce running time

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,324,2017-09-26T18:45:22Z,2017-09-26T22:09:17Z,2017-09-26T22:09:20Z,MERGED,True,42,0,3,https://github.com/zaq32,[obc][eps] Reset lcls on obc startup.,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/324,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/324#issuecomment-332302673,This change is,"Reviewed 1 of 1 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,325,2017-09-26T19:19:19Z,2017-09-26T20:52:47Z,2017-09-26T20:52:49Z,MERGED,True,10,5,1,https://github.com/zaq32,Disable power cycle trigger for all devices except COM & EPS.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/325,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/325,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,325,2017-09-26T19:19:19Z,2017-09-26T20:52:47Z,2017-09-26T20:52:49Z,MERGED,True,10,5,1,https://github.com/zaq32,Disable power cycle trigger for all devices except COM & EPS.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/325,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/325#issuecomment-332306696,This change is,[NCR #001] Error counters reboot,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,325,2017-09-26T19:19:19Z,2017-09-26T20:52:47Z,2017-09-26T20:52:49Z,MERGED,True,10,5,1,https://github.com/zaq32,Disable power cycle trigger for all devices except COM & EPS.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/325,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/325#issuecomment-332308960,This change is,"Reviewed 1 of 1 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,325,2017-09-26T19:19:19Z,2017-09-26T20:52:47Z,2017-09-26T20:52:49Z,MERGED,True,10,5,1,https://github.com/zaq32,Disable power cycle trigger for all devices except COM & EPS.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/325,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/325#issuecomment-332311743,This change is,"Reviewed 1 of 1 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,326,2017-09-27T16:51:40Z,2017-09-28T20:22:01Z,2017-09-28T20:22:03Z,MERGED,True,71,31,3,https://github.com/Novakov,Time stops (like in Groundhog Day) when RTC dies,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/326,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/326,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,326,2017-09-27T16:51:40Z,2017-09-28T20:22:01Z,2017-09-28T20:22:03Z,MERGED,True,71,31,3,https://github.com/Novakov,Time stops (like in Groundhog Day) when RTC dies,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/326,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/326#issuecomment-332585723,This change is,[NCR #002] Time will no longer be saved in FRAM when RTC will permanently stop responding,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,326,2017-09-27T16:51:40Z,2017-09-28T20:22:01Z,2017-09-28T20:22:03Z,MERGED,True,71,31,3,https://github.com/Novakov,Time stops (like in Groundhog Day) when RTC dies,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/326,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/326#issuecomment-332931191,This change is,"Reviewed 3 of 3 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,327,2017-09-27T17:51:39Z,2017-09-28T14:29:32Z,2017-10-02T16:45:18Z,MERGED,True,1,1,1,https://github.com/Novakov,Fix write program telecommand part size,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/327,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/327,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,327,2017-09-27T17:51:39Z,2017-09-28T14:29:32Z,2017-10-02T16:45:18Z,MERGED,True,1,1,1,https://github.com/Novakov,Fix write program telecommand part size,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/327,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/327#issuecomment-332832665,This change is,"Reviewed 1 of 1 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,328,2017-09-27T20:16:05Z,2017-09-28T05:50:00Z,2017-09-28T05:50:02Z,MERGED,True,562,700,22,https://github.com/mandrek44,Converted ANTs to classes,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/328,https://github.com/mandrek44,1,https://github.com/PW-Sat2/PWSat2OBC/pull/328,"This will make adding error counters easier


This change is","This will make adding error counters easier


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,328,2017-09-27T20:16:05Z,2017-09-28T05:50:00Z,2017-09-28T05:50:02Z,MERGED,True,562,700,22,https://github.com/mandrek44,Converted ANTs to classes,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/328,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/328#issuecomment-332734422,"This will make adding error counters easier


This change is","Reviewed 22 of 22 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,329,2017-09-27T20:18:55Z,2017-09-28T12:07:57Z,2017-09-28T12:24:34Z,MERGED,True,20,20,6,https://github.com/tom4r,Fix SDA latchup,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/329,https://github.com/tom4r,1,https://github.com/PW-Sat2/PWSat2OBC/pull/329,"Added SDA line in checking for latch-up
Enabled Mission Loop resuming in case of permamently latched bus SDA.



This change is","Added SDA line in checking for latch-up
Enabled Mission Loop resuming in case of permamently latched bus SDA.



This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,329,2017-09-27T20:18:55Z,2017-09-28T12:07:57Z,2017-09-28T12:24:34Z,MERGED,True,20,20,6,https://github.com/tom4r,Fix SDA latchup,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/329,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/329#issuecomment-332733520,"Added SDA line in checking for latch-up
Enabled Mission Loop resuming in case of permamently latched bus SDA.



This change is","Reviewed 6 of 7 files at r1.
Review status: 6 of 7 files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,329,2017-09-27T20:18:55Z,2017-09-28T12:07:57Z,2017-09-28T12:24:34Z,MERGED,True,20,20,6,https://github.com/tom4r,Fix SDA latchup,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/329,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/329#issuecomment-332816393,"Added SDA line in checking for latch-up
Enabled Mission Loop resuming in case of permamently latched bus SDA.



This change is","Reviewed 2 of 3 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,329,2017-09-27T20:18:55Z,2017-09-28T12:07:57Z,2017-09-28T12:24:34Z,MERGED,True,20,20,6,https://github.com/tom4r,Fix SDA latchup,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/329,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/329#issuecomment-332819921,"Added SDA line in checking for latch-up
Enabled Mission Loop resuming in case of permamently latched bus SDA.



This change is",[NCR #005] SDA latched,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,330,2017-09-28T08:52:15Z,2017-09-28T21:43:26Z,2017-09-28T21:43:28Z,MERGED,True,153,5,9,https://github.com/Novakov,Perform self test before enabling builtin detumbling,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/330,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/330,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,330,2017-09-28T08:52:15Z,2017-09-28T21:43:26Z,2017-09-28T21:43:28Z,MERGED,True,153,5,9,https://github.com/Novakov,Perform self test before enabling builtin detumbling,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/330,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/330#issuecomment-332772561,This change is,[NCR #006] [NCR #009] IMTQ self-test at boot,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,330,2017-09-28T08:52:15Z,2017-09-28T21:43:26Z,2017-09-28T21:43:28Z,MERGED,True,153,5,9,https://github.com/Novakov,Perform self test before enabling builtin detumbling,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/330,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/330#issuecomment-332854690,This change is,"Reviewed 8 of 8 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,330,2017-09-28T08:52:15Z,2017-09-28T21:43:26Z,2017-09-28T21:43:28Z,MERGED,True,153,5,9,https://github.com/Novakov,Perform self test before enabling builtin detumbling,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/330,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/330#issuecomment-332869134,This change is,"Reviewed 1 of 1 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,331,2017-09-28T12:23:01Z,2017-09-28T19:09:59Z,2017-09-28T19:10:00Z,MERGED,True,637,37,36,https://github.com/zaq32,Add possibility to permanently disable imtq built in detumbling,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/331,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/331,"New telecommands:

SetBuiltinDetumblingBlockMaskTelecommand: updates builtin detumbling telecommand mask
SetAdcsModeTelecommand: requests immediate adcs subsystem mode change



This change is","New telecommands:

SetBuiltinDetumblingBlockMaskTelecommand: updates builtin detumbling telecommand mask
SetAdcsModeTelecommand: requests immediate adcs subsystem mode change



This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,331,2017-09-28T12:23:01Z,2017-09-28T19:09:59Z,2017-09-28T19:10:00Z,MERGED,True,637,37,36,https://github.com/zaq32,Add possibility to permanently disable imtq built in detumbling,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/331,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/331#issuecomment-332819792,"New telecommands:

SetBuiltinDetumblingBlockMaskTelecommand: updates builtin detumbling telecommand mask
SetAdcsModeTelecommand: requests immediate adcs subsystem mode change



This change is",[NCR #007] Permament detumbling off,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,331,2017-09-28T12:23:01Z,2017-09-28T19:09:59Z,2017-09-28T19:10:00Z,MERGED,True,637,37,36,https://github.com/zaq32,Add possibility to permanently disable imtq built in detumbling,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/331,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/331#issuecomment-332836662,"New telecommands:

SetBuiltinDetumblingBlockMaskTelecommand: updates builtin detumbling telecommand mask
SetAdcsModeTelecommand: requests immediate adcs subsystem mode change



This change is","Review status: 0 of 36 files reviewed at latest revision, 1 unresolved discussion, some commit checks broke.

integration_tests/tests/base.py, line 13 at r2 (raw file):

        super(BaseTest, self).__init__(*args, **kwargs)
        self.auto_power_on = True
        _setup_log()



Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,331,2017-09-28T12:23:01Z,2017-09-28T19:09:59Z,2017-09-28T19:10:00Z,MERGED,True,637,37,36,https://github.com/zaq32,Add possibility to permanently disable imtq built in detumbling,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/331,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/331#issuecomment-332888545,"New telecommands:

SetBuiltinDetumblingBlockMaskTelecommand: updates builtin detumbling telecommand mask
SetAdcsModeTelecommand: requests immediate adcs subsystem mode change



This change is","Reviewed 34 of 36 files at r1, 1 of 1 files at r2, 1 of 1 files at r3.
Review status: all files reviewed at latest revision, 1 unresolved discussion, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,331,2017-09-28T12:23:01Z,2017-09-28T19:09:59Z,2017-09-28T19:10:00Z,MERGED,True,637,37,36,https://github.com/zaq32,Add possibility to permanently disable imtq built in detumbling,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/331,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/331#issuecomment-332889071,"New telecommands:

SetBuiltinDetumblingBlockMaskTelecommand: updates builtin detumbling telecommand mask
SetAdcsModeTelecommand: requests immediate adcs subsystem mode change



This change is","Review status: all files reviewed at latest revision, 1 unresolved discussion, some commit checks failed.

integration_tests/tests/base.py, line 13 at r2 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote


Fixed

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,332,2017-09-28T15:07:51Z,2017-10-03T19:33:01Z,2017-10-03T19:33:05Z,MERGED,True,237,6,14,https://github.com/Novakov,Telecommand for reading memory space,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/332,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/332,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,332,2017-09-28T15:07:51Z,2017-10-03T19:33:01Z,2017-10-03T19:33:05Z,MERGED,True,237,6,14,https://github.com/Novakov,Telecommand for reading memory space,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/332,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/332#issuecomment-333593815,This change is,"Reviewed 14 of 14 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,332,2017-09-28T15:07:51Z,2017-10-03T19:33:01Z,2017-10-03T19:33:05Z,MERGED,True,237,6,14,https://github.com/Novakov,Telecommand for reading memory space,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/332,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/332#issuecomment-333819614,This change is,"Reviewed 8 of 8 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,333,2017-09-28T15:46:38Z,2017-09-28T16:54:38Z,2017-09-28T16:54:40Z,MERGED,True,11,11,2,https://github.com/Novakov,Extend LEOP experiment to T+4h,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/333,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/333,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,333,2017-09-28T15:46:38Z,2017-09-28T16:54:38Z,2017-09-28T16:54:40Z,MERGED,True,11,11,2,https://github.com/Novakov,Extend LEOP experiment to T+4h,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/333,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/333#issuecomment-332881601,This change is,"Reviewed 2 of 2 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,334,2017-09-28T23:32:15Z,2017-09-29T14:51:01Z,2017-09-29T14:51:02Z,MERGED,True,248,248,11,https://github.com/ggajoch,Changed time endiannes to little endian. Fix linux build,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/334,https://github.com/ggajoch,1,https://github.com/PW-Sat2/PWSat2OBC/pull/334,"According to measurements taken during second antenna deployment activation time is little-endian, as can be seen in I2C log.
After automatic activation (Antenna 2 on A side) - 2.6 s:

After manual deployment (added 30 s safety limit) - 32.6 s:

// Also, fix Linux build - letter cases.


This change is","According to measurements taken during second antenna deployment activation time is little-endian, as can be seen in I2C log.
After automatic activation (Antenna 2 on A side) - 2.6 s:

After manual deployment (added 30 s safety limit) - 32.6 s:

// Also, fix Linux build - letter cases.


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,334,2017-09-28T23:32:15Z,2017-09-29T14:51:01Z,2017-09-29T14:51:02Z,MERGED,True,248,248,11,https://github.com/ggajoch,Changed time endiannes to little endian. Fix linux build,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/334,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/334#issuecomment-333147876,"According to measurements taken during second antenna deployment activation time is little-endian, as can be seen in I2C log.
After automatic activation (Antenna 2 on A side) - 2.6 s:

After manual deployment (added 30 s safety limit) - 32.6 s:

// Also, fix Linux build - letter cases.


This change is","Reviewed 16 of 16 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,335,2017-09-29T00:34:19Z,2017-10-03T11:22:22Z,2017-10-03T11:22:23Z,MERGED,True,361,300,16,https://github.com/zaq32,[adcs] Update adcs coordinator.,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/335,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/335,"Fix race condition between currently run processor & stop method,
Fix race condition that could cause adcs task to be suspended indefinatelly,
Add possibility to temporarily disable entire adcs subsystem.



This change is","Fix race condition between currently run processor & stop method,
Fix race condition that could cause adcs task to be suspended indefinatelly,
Add possibility to temporarily disable entire adcs subsystem.



This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,335,2017-09-29T00:34:19Z,2017-10-03T11:22:22Z,2017-10-03T11:22:23Z,MERGED,True,361,300,16,https://github.com/zaq32,[adcs] Update adcs coordinator.,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/335,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/335#issuecomment-332999695,"Fix race condition between currently run processor & stop method,
Fix race condition that could cause adcs task to be suspended indefinatelly,
Add possibility to temporarily disable entire adcs subsystem.



This change is",[BUG] Internal Detumbling gets reenabled during SADS/Sail deployment,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,335,2017-09-29T00:34:19Z,2017-10-03T11:22:22Z,2017-10-03T11:22:23Z,MERGED,True,361,300,16,https://github.com/zaq32,[adcs] Update adcs coordinator.,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/335,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/335#issuecomment-333148268,"Fix race condition between currently run processor & stop method,
Fix race condition that could cause adcs task to be suspended indefinatelly,
Add possibility to temporarily disable entire adcs subsystem.



This change is","Reviewed 10 of 13 files at r1.
Review status: 10 of 13 files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,335,2017-09-29T00:34:19Z,2017-10-03T11:22:22Z,2017-10-03T11:22:23Z,MERGED,True,361,300,16,https://github.com/zaq32,[adcs] Update adcs coordinator.,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/335,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/335#issuecomment-333398584,"Fix race condition between currently run processor & stop method,
Fix race condition that could cause adcs task to be suspended indefinatelly,
Add possibility to temporarily disable entire adcs subsystem.



This change is","Reviewed 1 of 13 files at r1, 6 of 6 files at r2.
Review status: all files reviewed at latest revision, 3 unresolved discussions, some commit checks failed.

libs/adcs/AdcsCoordinator.cpp, line 174 at r2 (raw file):

        const auto elapsed = System::GetUptime() - startTime;
        auto waitDuration = adcsProcessor->GetWait() - elapsed;

this is extremely rough calculation as it does not take into account the time spend in the loop in the Loop function. In effect the value returned by this function will be too big.

libs/adcs/AdcsCoordinator.cpp, line 185 at r2 (raw file):

    auto lastIterationTime = System::GetUptime();

    auto nextIterationAt = lastIterationTime;


This is way too complex than it has to be. In fact only one value is needed for proper calculation. Is there a purpose for having lastIterationTime?

libs/adcs/AdcsCoordinator.cpp, line 213 at r2 (raw file):

                if (currentTime >= nextIterationAt)

                {

                    auto delay = Run(mode);

                    lastIterationTime = System::GetUptime();

                    nextIterationAt = lastIterationTime + delay;

                }

                timeout = std::max(0ms, nextIterationAt - System::GetUptime());


consider this:
if(currentTime >= nextIterationAt)
{
    timeout = Run(mode);
    nextIterationAt += timeout;
}
else
{
    timeout = std::max(0ms, nextIterationAt - System::GetUptime());
}


Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,335,2017-09-29T00:34:19Z,2017-10-03T11:22:22Z,2017-10-03T11:22:23Z,MERGED,True,361,300,16,https://github.com/zaq32,[adcs] Update adcs coordinator.,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/335,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/335#issuecomment-333398781,"Fix race condition between currently run processor & stop method,
Fix race condition that could cause adcs task to be suspended indefinatelly,
Add possibility to temporarily disable entire adcs subsystem.



This change is","Review status: all files reviewed at latest revision, 3 unresolved discussions, some commit checks failed.

libs/adcs/AdcsCoordinator.cpp, line 213 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote

                if (currentTime >= nextIterationAt)

                {

                    auto delay = Run(mode);

                    lastIterationTime = System::GetUptime();

                    nextIterationAt = lastIterationTime + delay;

                }

                timeout = std::max(0ms, nextIterationAt - System::GetUptime());


consider this:
if(currentTime >= nextIterationAt)
{
    timeout = Run(mode);
    nextIterationAt += timeout;
}
else
{
    timeout = std::max(0ms, nextIterationAt - System::GetUptime());
}


This is of course assuming that we do not account for loop iteration in timeout calculation

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,335,2017-09-29T00:34:19Z,2017-10-03T11:22:22Z,2017-10-03T11:22:23Z,MERGED,True,361,300,16,https://github.com/zaq32,[adcs] Update adcs coordinator.,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/335,https://github.com/zaq32,6,https://github.com/PW-Sat2/PWSat2OBC/pull/335#issuecomment-333753745,"Fix race condition between currently run processor & stop method,
Fix race condition that could cause adcs task to be suspended indefinatelly,
Add possibility to temporarily disable entire adcs subsystem.



This change is","Reviewed 1 of 1 files at r3, 2 of 2 files at r4.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,336,2017-09-29T17:37:30Z,2017-09-30T14:47:59Z,2017-10-02T16:45:20Z,MERGED,True,584,261,16,https://github.com/mandrek44,ANTs error counters,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/336,https://github.com/mandrek44,1,https://github.com/PW-Sat2/PWSat2OBC/pull/336,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,336,2017-09-29T17:37:30Z,2017-09-30T14:47:59Z,2017-10-02T16:45:20Z,MERGED,True,584,261,16,https://github.com/mandrek44,ANTs error counters,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/336,https://github.com/mandrek44,2,https://github.com/PW-Sat2/PWSat2OBC/pull/336#issuecomment-333191281,This change is,[NCR #023] Antennas error counters are missing,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,336,2017-09-29T17:37:30Z,2017-09-30T14:47:59Z,2017-10-02T16:45:20Z,MERGED,True,584,261,16,https://github.com/mandrek44,ANTs error counters,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/336,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/336#issuecomment-333309227,This change is,"Reviewed 16 of 16 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,337,2017-09-29T18:26:26Z,2017-09-30T07:48:57Z,2017-09-30T07:48:59Z,MERGED,True,9,143,4,https://github.com/mandrek44,Ignoring EPS error code,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/337,https://github.com/mandrek44,1,https://github.com/PW-Sat2/PWSat2OBC/pull/337,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,337,2017-09-29T18:26:26Z,2017-09-30T07:48:57Z,2017-09-30T07:48:59Z,MERGED,True,9,143,4,https://github.com/mandrek44,Ignoring EPS error code,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/337,https://github.com/mandrek44,2,https://github.com/PW-Sat2/PWSat2OBC/pull/337#issuecomment-333202447,This change is,EPS - ignore error code,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,337,2017-09-29T18:26:26Z,2017-09-30T07:48:57Z,2017-09-30T07:48:59Z,MERGED,True,9,143,4,https://github.com/mandrek44,Ignoring EPS error code,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/337,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/337#issuecomment-333203383,This change is,"Reviewed 4 of 4 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,338,2017-09-30T17:30:01Z,2017-09-30T18:49:51Z,2017-09-30T18:49:53Z,MERGED,True,4,1,1,https://github.com/ggajoch,Masked antennas error counters,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/338,https://github.com/ggajoch,1,https://github.com/PW-Sat2/PWSat2OBC/pull/338,"Primary and secondary antenna error counters does not cause power cycle.


This change is","Primary and secondary antenna error counters does not cause power cycle.


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,338,2017-09-30T17:30:01Z,2017-09-30T18:49:51Z,2017-09-30T18:49:53Z,MERGED,True,4,1,1,https://github.com/ggajoch,Masked antennas error counters,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/338,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/338#issuecomment-333323840,"Primary and secondary antenna error counters does not cause power cycle.


This change is","Reviewed 1 of 1 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,339,2017-10-02T17:38:27Z,2017-10-06T10:48:09Z,2017-10-06T10:48:10Z,MERGED,True,30,22,6,https://github.com/zaq32,Build info,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/339,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/339,"Add build information to safe mode & boot  loader.


This change is","Add build information to safe mode & boot  loader.


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,339,2017-10-02T17:38:27Z,2017-10-06T10:48:09Z,2017-10-06T10:48:10Z,MERGED,True,30,22,6,https://github.com/zaq32,Build info,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/339,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/339#issuecomment-333607787,"Add build information to safe mode & boot  loader.


This change is",Add compile info to boot loader,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,339,2017-10-02T17:38:27Z,2017-10-06T10:48:09Z,2017-10-06T10:48:10Z,MERGED,True,30,22,6,https://github.com/zaq32,Build info,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/339,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/339#issuecomment-333607826,"Add build information to safe mode & boot  loader.


This change is",Add compile info to safe mode,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,339,2017-10-02T17:38:27Z,2017-10-06T10:48:09Z,2017-10-06T10:48:10Z,MERGED,True,30,22,6,https://github.com/zaq32,Build info,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/339,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/339#issuecomment-333816918,"Add build information to safe mode & boot  loader.


This change is","Reviewed 6 of 6 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,340,2017-10-02T21:23:01Z,2017-10-03T09:35:56Z,2017-10-03T10:01:10Z,MERGED,True,5,5,2,https://github.com/ggajoch,Beacon telemetry fixes,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/340,https://github.com/ggajoch,1,https://github.com/PW-Sat2/PWSat2OBC/pull/340,"antenna channel order
file parser size fix



This change is","antenna channel order
file parser size fix



This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,340,2017-10-02T21:23:01Z,2017-10-03T09:35:56Z,2017-10-03T10:01:10Z,MERGED,True,5,5,2,https://github.com/ggajoch,Beacon telemetry fixes,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/340,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/340#issuecomment-333754065,"antenna channel order
file parser size fix



This change is","Reviewed 2 of 2 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,340,2017-10-02T21:23:01Z,2017-10-03T09:35:56Z,2017-10-03T10:01:10Z,MERGED,True,5,5,2,https://github.com/ggajoch,Beacon telemetry fixes,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/340,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/340#issuecomment-333796402,"antenna channel order
file parser size fix



This change is",[NCR #027] Incorrect antenna deployed telemetry,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,341,2017-10-04T01:28:03Z,2017-10-04T01:36:28Z,2017-10-04T01:36:31Z,CLOSED,False,11,11,5,https://github.com/ggajoch,imtq and comm parser minor changes,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/341,https://github.com/ggajoch,1,https://github.com/PW-Sat2/PWSat2OBC/pull/341,"mW to dBm change for RF power, fixed scaling
imtq units to microteslas and current to miliamps



This change is","mW to dBm change for RF power, fixed scaling
imtq units to microteslas and current to miliamps



This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,342,2017-10-04T01:36:02Z,2017-10-06T08:33:45Z,2017-10-06T08:33:46Z,MERGED,True,11,11,5,https://github.com/ggajoch,imtq and comm parser minor changes,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/342,https://github.com/ggajoch,1,https://github.com/PW-Sat2/PWSat2OBC/pull/342,"[second PR because jenkins didn't like previous branch name]

mW to dBm change for RF power, fixed scaling
imtq units to microteslas and current to miliamps



This change is","[second PR because jenkins didn't like previous branch name]

mW to dBm change for RF power, fixed scaling
imtq units to microteslas and current to miliamps



This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,342,2017-10-04T01:36:02Z,2017-10-06T08:33:45Z,2017-10-06T08:33:46Z,MERGED,True,11,11,5,https://github.com/ggajoch,imtq and comm parser minor changes,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/342,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/342#issuecomment-334513347,"[second PR because jenkins didn't like previous branch name]

mW to dBm change for RF power, fixed scaling
imtq units to microteslas and current to miliamps



This change is","Reviewed 5 of 5 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,343,2017-10-04T12:59:55Z,2017-10-05T15:59:40Z,2017-10-05T15:59:41Z,MERGED,True,224,1,3,https://github.com/zaq32,Fix for SetAdcsMode,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/343,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/343,"Also unit tests for adcs telecommands



This change is","Also unit tests for adcs telecommands



This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,343,2017-10-04T12:59:55Z,2017-10-05T15:59:40Z,2017-10-05T15:59:41Z,MERGED,True,224,1,3,https://github.com/zaq32,Fix for SetAdcsMode,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/343,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/343#issuecomment-334511046,"Also unit tests for adcs telecommands



This change is","Reviewed 3 of 3 files at r1, 1 of 1 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,344,2017-10-05T11:56:16Z,2017-10-05T19:27:36Z,2017-10-05T19:28:02Z,MERGED,True,95,4,8,https://github.com/kfazi,Added telemetry file copy at LEOP experiment end,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/344,https://github.com/kfazi,1,https://github.com/PW-Sat2/PWSat2OBC/pull/344,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,344,2017-10-05T11:56:16Z,2017-10-05T19:27:36Z,2017-10-05T19:28:02Z,MERGED,True,95,4,8,https://github.com/kfazi,Added telemetry file copy at LEOP experiment end,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/344,https://github.com/kfazi,2,https://github.com/PW-Sat2/PWSat2OBC/pull/344#issuecomment-334448712,This change is,[NCR #025] Copy telemetry.current at the end of LEOP experiment,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,344,2017-10-05T11:56:16Z,2017-10-05T19:27:36Z,2017-10-05T19:28:02Z,MERGED,True,95,4,8,https://github.com/kfazi,Added telemetry file copy at LEOP experiment end,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/344,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/344#issuecomment-334512874,This change is,"Reviewed 8 of 8 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,345,2017-10-05T13:55:39Z,2017-10-06T14:27:15Z,2017-10-06T14:27:16Z,MERGED,True,746,1631,21,https://github.com/Novakov,Antenna procedure update,17,[],https://github.com/PW-Sat2/PWSat2OBC/pull/345,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/345,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,345,2017-10-05T13:55:39Z,2017-10-06T14:27:15Z,2017-10-06T14:27:16Z,MERGED,True,746,1631,21,https://github.com/Novakov,Antenna procedure update,17,[],https://github.com/PW-Sat2/PWSat2OBC/pull/345,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/345#issuecomment-334472448,This change is,Antenna - ignore deployment in progress flag,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,345,2017-10-05T13:55:39Z,2017-10-06T14:27:15Z,2017-10-06T14:27:16Z,MERGED,True,746,1631,21,https://github.com/Novakov,Antenna procedure update,17,[],https://github.com/PW-Sat2/PWSat2OBC/pull/345,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/345#issuecomment-334738799,This change is,"Reviewed 12 of 21 files at r1, 1 of 2 files at r2.
Review status: 13 of 21 files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,345,2017-10-05T13:55:39Z,2017-10-06T14:27:15Z,2017-10-06T14:27:16Z,MERGED,True,746,1631,21,https://github.com/Novakov,Antenna procedure update,17,[],https://github.com/PW-Sat2/PWSat2OBC/pull/345,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/345#issuecomment-334744267,This change is,"Reviewed 1 of 21 files at r1.
Review status: 14 of 21 files reviewed at latest revision, 11 unresolved discussions.

libs/mission/antenna/antenna.cpp, line 41 at r2 (raw file):

        {
            /** @brief Power on controller */
            static constexpr AntennaTask::StepDescriptor PowerOn = {AntennaTask::PowerOn, Channel, AntennaId::ANTENNA_AUTO_ID, 0s, 10s};

use value that is slightly less then 10s or it will always be effectively two mission iterations. This applies to all wait times

libs/mission/antenna/antenna.cpp, line 44 at r2 (raw file):

            /** @brief Reset controller */
            static constexpr AntennaTask::StepDescriptor Reset = {AntennaTask::Reset, Channel, AntennaId::ANTENNA_AUTO_ID, 0s, 60s};

This is insane, resetting the controller does not take 60s.

libs/mission/antenna/antenna.cpp, line 47 at r2 (raw file):

            /** @brief Arm controller */
            static constexpr AntennaTask::StepDescriptor Arm = {AntennaTask::Arm, Channel, AntennaId::ANTENNA_AUTO_ID, 0s, 60s};

This is insane, Arming deployment system does not take 60s. If it takes more then 60ms something is wrong.

libs/mission/antenna/antenna.cpp, line 55 at r2 (raw file):

            /** @brief Perform manual deployment */
            template <AntennaId Antenna>
            static constexpr AntennaTask::StepDescriptor ManualDeploy = {AntennaTask::Deploy, Channel, Antenna, 30s, 90s};

This is insane, why wait time is three times bigger than burn time?

libs/mission/antenna/antenna.cpp, line 64 at r2 (raw file):

            /** @brief Perform full sequence of auto deployment */
            static constexpr auto FullSequenceAuto = std::make_tuple(PowerOn, Reset, Arm, AutoDeploy, Disarm, PowerOff);

If I am counting this right this single sequence takes at least 7m 10s to run.

libs/mission/antenna/antenna.cpp, line 68 at r2 (raw file):

            /** @brief Perform full sequence of manual deployment on single antenna */
            template <AntennaId Antenna>
            static constexpr auto FullSequenceManual = std::make_tuple(PowerOn, Reset, Arm, ManualDeploy<Antenna>, Disarm, PowerOff);

If I am counting this right this single sequence takes at least 7m 10s to run.

libs/mission/antenna/antenna.cpp, line 68 at r2 (raw file):

            /** @brief Perform full sequence of manual deployment on single antenna */
            template <AntennaId Antenna>
            static constexpr auto FullSequenceManual = std::make_tuple(PowerOn, Reset, Arm, ManualDeploy<Antenna>, Disarm, PowerOff);

Powering off & on controller in the middle of the sequence effectively erases its state. Which effectively invalidates the purpose of collecting antenna telemetry

libs/mission/antenna/antenna.cpp, line 71 at r2 (raw file):

        };

        std::array<AntennaTask::StepDescriptor, 60> AntennaTask::Steps = Join( //

execution of the entire array will take over 70 minutes. Is that intended?

libs/mission/antenna/antenna.cpp, line 85 at r2 (raw file):

        AntennaTask::AntennaTask(std::tuple<IAntennaDriver&, services::power::IPowerControl&> args)
            : _powerControl(std::get<services::power::IPowerControl&>(args)), _antenna(std::get<IAntennaDriver&>(args)), _step(0),
              _nextStepAt(0), _retryCounter(StepRetries), _controllerPoweredOn(false)

uninitialized: _sync

libs/mission/antenna/antenna.cpp, line 100 at r2 (raw file):

            auto This = reinterpret_cast<AntennaTask*>(param);

            if (state.Time < 40min)

use IsInitialSilentPeriodFinished procedure instead of manually checking time

libs/mission/antenna/antenna.cpp, line 122 at r2 (raw file):

            if (cfg.IsDeploymentDisabled())


{
return false;
}

consider:
return !cfg.IsDeploymentDisabled();


Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,345,2017-10-05T13:55:39Z,2017-10-06T14:27:15Z,2017-10-06T14:27:16Z,MERGED,True,746,1631,21,https://github.com/Novakov,Antenna procedure update,17,[],https://github.com/PW-Sat2/PWSat2OBC/pull/345,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/345#issuecomment-334755275,This change is,"Reviewed 6 of 21 files at r1, 1 of 2 files at r2, 1 of 1 files at r3.
Review status: all files reviewed at latest revision, 11 unresolved discussions.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,345,2017-10-05T13:55:39Z,2017-10-06T14:27:15Z,2017-10-06T14:27:16Z,MERGED,True,746,1631,21,https://github.com/Novakov,Antenna procedure update,17,[],https://github.com/PW-Sat2/PWSat2OBC/pull/345,https://github.com/Novakov,6,https://github.com/PW-Sat2/PWSat2OBC/pull/345#issuecomment-334755585,This change is,"Review status: all files reviewed at latest revision, 11 unresolved discussions.

libs/mission/antenna/antenna.cpp, line 41 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
use value that is slightly less then 10s or it will always be effectively two mission iterations. This applies to all wait times

Done.

libs/mission/antenna/antenna.cpp, line 85 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
uninitialized: _sync

Done.

libs/mission/antenna/antenna.cpp, line 100 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
use IsInitialSilentPeriodFinished procedure instead of manually checking time

Done.

libs/mission/antenna/antenna.cpp, line 122 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote

            if (cfg.IsDeploymentDisabled())


{
return false;
}

consider:
return !cfg.IsDeploymentDisabled();


I prefer explicit checks for all negative conditions, than just returning true. That way every condition is single statement (a bit easier for read).

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,345,2017-10-05T13:55:39Z,2017-10-06T14:27:15Z,2017-10-06T14:27:16Z,MERGED,True,746,1631,21,https://github.com/Novakov,Antenna procedure update,17,[],https://github.com/PW-Sat2/PWSat2OBC/pull/345,https://github.com/zaq32,7,https://github.com/PW-Sat2/PWSat2OBC/pull/345#issuecomment-334756372,This change is,"Reviewed 1 of 2 files at r4.
Review status: 19 of 20 files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,345,2017-10-05T13:55:39Z,2017-10-06T14:27:15Z,2017-10-06T14:27:16Z,MERGED,True,746,1631,21,https://github.com/Novakov,Antenna procedure update,17,[],https://github.com/PW-Sat2/PWSat2OBC/pull/345,https://github.com/zaq32,8,https://github.com/PW-Sat2/PWSat2OBC/pull/345#issuecomment-334770711,This change is,"Reviewed 1 of 2 files at r4.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,346,2017-10-06T12:14:26Z,2017-10-06T16:58:58Z,2017-10-06T17:54:07Z,MERGED,True,36,186,18,https://github.com/zaq32,Fix boot counter value,8,[],https://github.com/PW-Sat2/PWSat2OBC/pull/346,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/346,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,346,2017-10-06T12:14:26Z,2017-10-06T16:58:58Z,2017-10-06T17:54:07Z,MERGED,True,36,186,18,https://github.com/zaq32,Fix boot counter value,8,[],https://github.com/PW-Sat2/PWSat2OBC/pull/346,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/346#issuecomment-334738292,This change is,[NCR #028] Boot Counter always 0,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,346,2017-10-06T12:14:26Z,2017-10-06T16:58:58Z,2017-10-06T17:54:07Z,MERGED,True,36,186,18,https://github.com/zaq32,Fix boot counter value,8,[],https://github.com/PW-Sat2/PWSat2OBC/pull/346,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/346#issuecomment-334741701,This change is,"Reviewed 15 of 15 files at r1.
Review status: all files reviewed at latest revision, 2 unresolved discussions.

integration_tests/requirements.txt, line 1 at r1 (raw file):

ipython


We need to stick to IPython 5 as version 6 requires Python 3 which we don't support

integration_tests/requirements.txt, line 14 at r1 (raw file):

matplotlib
What is it for?


Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,346,2017-10-06T12:14:26Z,2017-10-06T16:58:58Z,2017-10-06T17:54:07Z,MERGED,True,36,186,18,https://github.com/zaq32,Fix boot counter value,8,[],https://github.com/PW-Sat2/PWSat2OBC/pull/346,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/346#issuecomment-334777144,This change is,"Review status: 14 of 17 files reviewed at latest revision, 1 unresolved discussion.

integration_tests/requirements.txt, line 14 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote

matplotlib
What is it for?


left over from tests.
Removed

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,346,2017-10-06T12:14:26Z,2017-10-06T16:58:58Z,2017-10-06T17:54:07Z,MERGED,True,36,186,18,https://github.com/zaq32,Fix boot counter value,8,[],https://github.com/PW-Sat2/PWSat2OBC/pull/346,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/346#issuecomment-334805470,This change is,"Reviewed 1 of 4 files at r2.
Review status: 15 of 18 files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,346,2017-10-06T12:14:26Z,2017-10-06T16:58:58Z,2017-10-06T17:54:07Z,MERGED,True,36,186,18,https://github.com/zaq32,Fix boot counter value,8,[],https://github.com/PW-Sat2/PWSat2OBC/pull/346,https://github.com/Novakov,6,https://github.com/PW-Sat2/PWSat2OBC/pull/346#issuecomment-334812196,This change is,"Reviewed 3 of 4 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,347,2017-10-08T18:57:31Z,2017-10-08T20:06:26Z,2017-10-09T08:41:16Z,MERGED,True,1,1,1,https://github.com/ggajoch,Fixed file save path for photos telecommand,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/347,https://github.com/ggajoch,1,https://github.com/PW-Sat2/PWSat2OBC/pull/347,"Fix bug as described in https://team.pw-sat.pl/w/ncr/ncr40/


This change is","Fix bug as described in https://team.pw-sat.pl/w/ncr/ncr40/


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,347,2017-10-08T18:57:31Z,2017-10-08T20:06:26Z,2017-10-09T08:41:16Z,MERGED,True,1,1,1,https://github.com/ggajoch,Fixed file save path for photos telecommand,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/347,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/347#issuecomment-335029800,"Fix bug as described in https://team.pw-sat.pl/w/ncr/ncr40/


This change is","Reviewed 1 of 1 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,348,2017-10-09T19:03:47Z,2017-10-13T16:45:51Z,2017-10-13T16:46:00Z,MERGED,True,717,369,31,https://github.com/Novakov,Align telemetry in file,13,[],https://github.com/PW-Sat2/PWSat2OBC/pull/348,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/348,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,348,2017-10-09T19:03:47Z,2017-10-13T16:45:51Z,2017-10-13T16:46:00Z,MERGED,True,717,369,31,https://github.com/Novakov,Align telemetry in file,13,[],https://github.com/PW-Sat2/PWSat2OBC/pull/348,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/348#issuecomment-335256792,This change is,[NCR #031] Telemetry at most 230 bytes + save to file at multiply of 230 bytes,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,348,2017-10-09T19:03:47Z,2017-10-13T16:45:51Z,2017-10-13T16:46:00Z,MERGED,True,717,369,31,https://github.com/Novakov,Align telemetry in file,13,[],https://github.com/PW-Sat2/PWSat2OBC/pull/348,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/348#issuecomment-335363905,This change is,"Reviewed 18 of 31 files at r1.
Review status: 18 of 31 files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,348,2017-10-09T19:03:47Z,2017-10-13T16:45:51Z,2017-10-13T16:46:00Z,MERGED,True,717,369,31,https://github.com/Novakov,Align telemetry in file,13,[],https://github.com/PW-Sat2/PWSat2OBC/pull/348,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/348#issuecomment-336438382,This change is,"Reviewed 11 of 31 files at r1, 1 of 1 files at r2, 2 of 2 files at r3.
Review status: all files reviewed at latest revision, 5 unresolved discussions, some commit checks failed.

integration_tests/tools/bit_joiner.py, line 1 at r3 (raw file):

def encode(data):

is this even used?

libs/drivers/antenna/telemetry.cpp, line 59 at r3 (raw file):

        }

        void AntennaTelemetry::SetBurningStatus(AntennaChannel channel, bool antenna1, bool antenna2, bool antenna3, bool antenna4)

enum is not guaranteed to not contain values that are not listed in its declaration. Mathematical operations on enums without prior range check should not be done.

libs/drivers/antenna/telemetry.cpp, line 75 at r3 (raw file):

        }

        void AntennaTelemetry::SetTimeReached(AntennaChannel channel, bool antenna1, bool antenna2, bool antenna3, bool antenna4)

The three above functions are almost the same consider extracting common logic

unit_tests/drivers/antenna/AntennaTelemetryTest.cpp, line 286 at r3 (raw file):

    };

    //    TEST_P(AntennaTelemetryTest, GetDeploymentStatusPositive)

do not leave commented out code

unit_tests/drivers/EPS/EpsTelemetryTest.cpp, line 27 at r3 (raw file):

            ASSERT_THAT(buffer[i], Eq(expected[i])) << ""Mismatch at position "" << i;
        }
        //        ASSERT_THAT(writer.Status(), Eq(true));

why?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,348,2017-10-09T19:03:47Z,2017-10-13T16:45:51Z,2017-10-13T16:46:00Z,MERGED,True,717,369,31,https://github.com/Novakov,Align telemetry in file,13,[],https://github.com/PW-Sat2/PWSat2OBC/pull/348,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/348#issuecomment-336487868,This change is,"Review status: all files reviewed at latest revision, 5 unresolved discussions, some commit checks failed.

integration_tests/tools/bit_joiner.py, line 1 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
is this even used?

Function - right in the last statement in this file
Script - no, it just for help someone next changing something in the telemetry to ease the pain of bit-level calculations

libs/drivers/antenna/telemetry.cpp, line 59 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
enum is not guaranteed to not contain values that are not listed in its declaration. Mathematical operations on enums without prior range check should not be done.

Done.

libs/drivers/antenna/telemetry.cpp, line 75 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
The three above functions are almost the same consider extracting common logic

Done.

unit_tests/drivers/antenna/AntennaTelemetryTest.cpp, line 286 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
do not leave commented out code

Done.

unit_tests/drivers/EPS/EpsTelemetryTest.cpp, line 27 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
why?

Debugging leftover. Uncommented

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,348,2017-10-09T19:03:47Z,2017-10-13T16:45:51Z,2017-10-13T16:46:00Z,MERGED,True,717,369,31,https://github.com/Novakov,Align telemetry in file,13,[],https://github.com/PW-Sat2/PWSat2OBC/pull/348,https://github.com/zaq32,6,https://github.com/PW-Sat2/PWSat2OBC/pull/348#issuecomment-336488884,This change is,"Reviewed 4 of 4 files at r4.
Review status: all files reviewed at latest revision, 2 unresolved discussions.

libs/drivers/antenna/telemetry.cpp, line 64 at r4 (raw file):

            auto idx = 4 * (channel - ANTENNA_FIRST_CHANNEL);

            if (idx > 4)

|| idx < 0

libs/drivers/antenna/Include/antenna/telemetry.hpp, line 338 at r4 (raw file):

        inline void AntennaTelemetry::SetActivationTimes(AntennaChannel channel, const ActivationTimes& times)
        {
            if (channel <= ANTENNA_BACKUP_CHANNEL && channel >= ANTENNA_FIRST_CHANNEL)

for conditions like this add static_assert that num(backup_channel) > num(first_channel)

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,348,2017-10-09T19:03:47Z,2017-10-13T16:45:51Z,2017-10-13T16:46:00Z,MERGED,True,717,369,31,https://github.com/Novakov,Align telemetry in file,13,[],https://github.com/PW-Sat2/PWSat2OBC/pull/348,https://github.com/Novakov,7,https://github.com/PW-Sat2/PWSat2OBC/pull/348#issuecomment-336494570,This change is,"Review status: 29 of 31 files reviewed at latest revision, 2 unresolved discussions.

libs/drivers/antenna/telemetry.cpp, line 64 at r4 (raw file):
Previously, zaq32 (ukasz ak) wrote
|| idx < 0

Done.

libs/drivers/antenna/Include/antenna/telemetry.hpp, line 338 at r4 (raw file):
Previously, zaq32 (ukasz ak) wrote
for conditions like this add static_assert that num(backup_channel) > num(first_channel)

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,348,2017-10-09T19:03:47Z,2017-10-13T16:45:51Z,2017-10-13T16:46:00Z,MERGED,True,717,369,31,https://github.com/Novakov,Align telemetry in file,13,[],https://github.com/PW-Sat2/PWSat2OBC/pull/348,https://github.com/zaq32,8,https://github.com/PW-Sat2/PWSat2OBC/pull/348#issuecomment-336495185,This change is,"Reviewed 2 of 2 files at r5.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,349,2017-10-09T22:06:30Z,2017-10-10T05:11:21Z,2017-10-10T05:11:22Z,MERGED,True,0,19,2,https://github.com/ggajoch,Remove antennas reset at bootup (they are powered off),2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/349,https://github.com/ggajoch,1,https://github.com/PW-Sat2/PWSat2OBC/pull/349,"This should fix NCR#037.
Antennas are powered off by default, so resetting controllers won't work.


This change is","This should fix NCR#037.
Antennas are powered off by default, so resetting controllers won't work.


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,349,2017-10-09T22:06:30Z,2017-10-10T05:11:21Z,2017-10-10T05:11:22Z,MERGED,True,0,19,2,https://github.com/ggajoch,Remove antennas reset at bootup (they are powered off),2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/349,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/349#issuecomment-335305480,"This should fix NCR#037.
Antennas are powered off by default, so resetting controllers won't work.


This change is","Reviewed 1 of 1 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,349,2017-10-09T22:06:30Z,2017-10-10T05:11:21Z,2017-10-10T05:11:22Z,MERGED,True,0,19,2,https://github.com/ggajoch,Remove antennas reset at bootup (they are powered off),2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/349,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/349#issuecomment-335362526,"This should fix NCR#037.
Antennas are powered off by default, so resetting controllers won't work.


This change is","Reviewed 1 of 1 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,350,2017-10-09T22:54:47Z,2017-10-11T15:23:18Z,2017-10-11T15:23:20Z,MERGED,True,11,0,3,https://github.com/ggajoch,Added delays for power operations,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/350,https://github.com/ggajoch,1,https://github.com/PW-Sat2/PWSat2OBC/pull/350,"Added:

6 s delay after turning off the camera in photoservice
6 s between steps in payload commissioning experiment

This should fix NCR#041


This change is","Added:

6 s delay after turning off the camera in photoservice
6 s between steps in payload commissioning experiment

This should fix NCR#041


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,350,2017-10-09T22:54:47Z,2017-10-11T15:23:18Z,2017-10-11T15:23:20Z,MERGED,True,11,0,3,https://github.com/ggajoch,Added delays for power operations,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/350,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/350#issuecomment-335364774,"Added:

6 s delay after turning off the camera in photoservice
6 s between steps in payload commissioning experiment

This should fix NCR#041


This change is","Review status: 0 of 2 files reviewed at latest revision, 1 unresolved discussion, some commit checks failed.

libs/power/power_eps/power_eps.cpp, line 121 at r1 (raw file):

                using namespace std::chrono_literals;
                auto status = this->_eps.EnableLCL(lcl) == ErrorCode::NoError;
                System::SleepTask(500ms);

in at least half of the use cases this sleep will introduce unnecessary artificial delay that is already taken care of.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,350,2017-10-09T22:54:47Z,2017-10-11T15:23:18Z,2017-10-11T15:23:20Z,MERGED,True,11,0,3,https://github.com/ggajoch,Added delays for power operations,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/350,https://github.com/begreeen,3,https://github.com/PW-Sat2/PWSat2OBC/pull/350#issuecomment-335406579,"Added:

6 s delay after turning off the camera in photoservice
6 s between steps in payload commissioning experiment

This should fix NCR#041


This change is","Review status: 0 of 2 files reviewed at latest revision, 1 unresolved discussion, some commit checks failed.

libs/power/power_eps/power_eps.cpp, line 121 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
in at least half of the use cases this sleep will introduce unnecessary artificial delay that is already taken care of.


why do you think that this 500 ms delay will be harmful to the system? do you see any threats that we are not aware of?
setting this delay let's say 'globally' was menat to reduce workload needed for this change.


Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,350,2017-10-09T22:54:47Z,2017-10-11T15:23:18Z,2017-10-11T15:23:20Z,MERGED,True,11,0,3,https://github.com/ggajoch,Added delays for power operations,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/350,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/350#issuecomment-335482335,"Added:

6 s delay after turning off the camera in photoservice
6 s between steps in payload commissioning experiment

This should fix NCR#041


This change is","Review status: 0 of 2 files reviewed at latest revision, 1 unresolved discussion, some commit checks failed.

libs/power/power_eps/power_eps.cpp, line 121 at r1 (raw file):
Previously, begreeen wrote

why do you think that this 500 ms delay will be harmful to the system? do you see any threats that we are not aware of?
setting this delay let's say 'globally' was menat to reduce workload needed for this change.



It's just strange
Actually photo service is the only place that lacked necessary delays


Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,350,2017-10-09T22:54:47Z,2017-10-11T15:23:18Z,2017-10-11T15:23:20Z,MERGED,True,11,0,3,https://github.com/ggajoch,Added delays for power operations,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/350,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/350#issuecomment-335519489,"Added:

6 s delay after turning off the camera in photoservice
6 s between steps in payload commissioning experiment

This should fix NCR#041


This change is","Reviewed 1 of 2 files at r1, 2 of 2 files at r2.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,350,2017-10-09T22:54:47Z,2017-10-11T15:23:18Z,2017-10-11T15:23:20Z,MERGED,True,11,0,3,https://github.com/ggajoch,Added delays for power operations,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/350,https://github.com/ggajoch,6,https://github.com/PW-Sat2/PWSat2OBC/pull/350#issuecomment-335520261,"Added:

6 s delay after turning off the camera in photoservice
6 s between steps in payload commissioning experiment

This should fix NCR#041


This change is","Review status: all files reviewed at latest revision, 1 unresolved discussion.

libs/power/power_eps/power_eps.cpp, line 121 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote

It's just strange
Actually photo service is the only place that lacked necessary delays


Done, removed it from here.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,350,2017-10-09T22:54:47Z,2017-10-11T15:23:18Z,2017-10-11T15:23:20Z,MERGED,True,11,0,3,https://github.com/ggajoch,Added delays for power operations,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/350,https://github.com/Novakov,7,https://github.com/PW-Sat2/PWSat2OBC/pull/350#issuecomment-335571976,"Added:

6 s delay after turning off the camera in photoservice
6 s between steps in payload commissioning experiment

This should fix NCR#041


This change is",[NCR #041] LCL delay violation,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,350,2017-10-09T22:54:47Z,2017-10-11T15:23:18Z,2017-10-11T15:23:20Z,MERGED,True,11,0,3,https://github.com/ggajoch,Added delays for power operations,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/350,https://github.com/zaq32,8,https://github.com/PW-Sat2/PWSat2OBC/pull/350#issuecomment-335686531,"Added:

6 s delay after turning off the camera in photoservice
6 s between steps in payload commissioning experiment

This should fix NCR#041


This change is","Reviewed 1 of 2 files at r1, 2 of 2 files at r2, 1 of 1 files at r3.
Review status: all files reviewed at latest revision, 1 unresolved discussion, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,351,2017-10-10T15:15:21Z,2017-10-13T14:46:02Z,2017-10-13T14:46:03Z,MERGED,True,230,47,24,https://github.com/Novakov,Disable EPS overheat submode when opening sail,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/351,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/351,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,351,2017-10-10T15:15:21Z,2017-10-13T14:46:02Z,2017-10-13T14:46:03Z,MERGED,True,230,47,24,https://github.com/Novakov,Disable EPS overheat submode when opening sail,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/351,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/351#issuecomment-335507170,This change is,[NCR #035] Disable EPS overheat submode when opening sail,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,351,2017-10-10T15:15:21Z,2017-10-13T14:46:02Z,2017-10-13T14:46:03Z,MERGED,True,230,47,24,https://github.com/Novakov,Disable EPS overheat submode when opening sail,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/351,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/351#issuecomment-335686291,This change is,"Reviewed 8 of 8 files at r1.
Review status: all files reviewed at latest revision, 1 unresolved discussion, some commit checks failed.

libs/mission/sail/sail.cpp, line 10 at r1 (raw file):

{
    OpenSailTask::StepProc OpenSailTask::Steps[] = {
        &IgnoreOverheat,               //

I believe that overheating submode was supposed to be disabled only in case of Time & emergemcy sail open. Regular opening (i.e. experiment is not supposed to disable this fail safe)

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,351,2017-10-10T15:15:21Z,2017-10-13T14:46:02Z,2017-10-13T14:46:03Z,MERGED,True,230,47,24,https://github.com/Novakov,Disable EPS overheat submode when opening sail,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/351,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/351#issuecomment-335694445,This change is,"Review status: all files reviewed at latest revision, 1 unresolved discussion, some commit checks failed.

libs/mission/sail/sail.cpp, line 10 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
I believe that overheating submode was supposed to be disabled only in case of Time & emergemcy sail open. Regular opening (i.e. experiment is not supposed to disable this fail safe)

As discussed with @ggajoch it should be ok to disable it every time

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,351,2017-10-10T15:15:21Z,2017-10-13T14:46:02Z,2017-10-13T14:46:03Z,MERGED,True,230,47,24,https://github.com/Novakov,Disable EPS overheat submode when opening sail,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/351,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/351#issuecomment-336187524,This change is,"Reviewed 13 of 13 files at r2.
Review status: all files reviewed at latest revision, 2 unresolved discussions, some commit checks failed.

libs/mission/sail/sail.cpp, line 124 at r2 (raw file):

                if (state.Time >= 40 * 24h)
                {
                    open();

time activation should disable overhead submode

libs/obc/communication/telecommands/sail.cpp, line 33 at r2 (raw file):

            response.PayloadWriter().WriteByte(0);
            this->_openSail.OpenSail(true);

I'd say this should be telecommand argument

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,351,2017-10-10T15:15:21Z,2017-10-13T14:46:02Z,2017-10-13T14:46:03Z,MERGED,True,230,47,24,https://github.com/Novakov,Disable EPS overheat submode when opening sail,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/351,https://github.com/Novakov,6,https://github.com/PW-Sat2/PWSat2OBC/pull/351#issuecomment-336213267,This change is,"Review status: all files reviewed at latest revision, 2 unresolved discussions, some commit checks failed.

libs/mission/sail/sail.cpp, line 124 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
time activation should disable overhead submode

Default mode is to ignore overheat, so it will be ignored on time activation

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,351,2017-10-10T15:15:21Z,2017-10-13T14:46:02Z,2017-10-13T14:46:03Z,MERGED,True,230,47,24,https://github.com/Novakov,Disable EPS overheat submode when opening sail,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/351,https://github.com/Novakov,7,https://github.com/PW-Sat2/PWSat2OBC/pull/351#issuecomment-336223677,This change is,"Review status: all files reviewed at latest revision, 2 unresolved discussions, some commit checks failed.

libs/obc/communication/telecommands/sail.cpp, line 33 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
I'd say this should be telecommand argument

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,351,2017-10-10T15:15:21Z,2017-10-13T14:46:02Z,2017-10-13T14:46:03Z,MERGED,True,230,47,24,https://github.com/Novakov,Disable EPS overheat submode when opening sail,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/351,https://github.com/zaq32,8,https://github.com/PW-Sat2/PWSat2OBC/pull/351#issuecomment-336436066,This change is,"Reviewed 5 of 5 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,351,2017-10-10T15:15:21Z,2017-10-13T14:46:02Z,2017-10-13T14:46:03Z,MERGED,True,230,47,24,https://github.com/Novakov,Disable EPS overheat submode when opening sail,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/351,https://github.com/zaq32,9,https://github.com/PW-Sat2/PWSat2OBC/pull/351#issuecomment-336473999,This change is,"Reviewed 3 of 3 files at r4.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,352,2017-10-10T18:51:35Z,2017-10-11T05:18:35Z,2017-10-11T05:18:36Z,MERGED,True,86,9,4,https://github.com/Novakov,Set time telecommand works when RTC is down,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/352,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/352,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,352,2017-10-10T18:51:35Z,2017-10-11T05:18:35Z,2017-10-11T05:18:36Z,MERGED,True,86,9,4,https://github.com/Novakov,Set time telecommand works when RTC is down,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/352,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/352#issuecomment-335571909,This change is,[NCR #036] SetTime telecommand won't work without RTC,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,352,2017-10-10T18:51:35Z,2017-10-11T05:18:35Z,2017-10-11T05:18:36Z,MERGED,True,86,9,4,https://github.com/Novakov,Set time telecommand works when RTC is down,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/352,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/352#issuecomment-335685878,This change is,"Reviewed 4 of 4 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,353,2017-10-12T15:00:44Z,2017-10-12T16:08:55Z,2017-10-12T16:08:56Z,MERGED,True,167,23,8,https://github.com/Novakov,Automated test for persistent state parsing,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/353,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/353,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,353,2017-10-12T15:00:44Z,2017-10-12T16:08:55Z,2017-10-12T16:08:56Z,MERGED,True,167,23,8,https://github.com/Novakov,Automated test for persistent state parsing,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/353,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/353#issuecomment-336185883,This change is,"Reviewed 8 of 8 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,354,2017-10-12T17:19:59Z,2017-10-12T18:12:29Z,2017-10-12T18:12:31Z,MERGED,True,5,1,2,https://github.com/tom4r,[NCR #043] Fixed SADS experiment file parsing issue.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/354,https://github.com/tom4r,1,https://github.com/PW-Sat2/PWSat2OBC/pull/354,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,354,2017-10-12T17:19:59Z,2017-10-12T18:12:29Z,2017-10-12T18:12:31Z,MERGED,True,5,1,2,https://github.com/tom4r,[NCR #043] Fixed SADS experiment file parsing issue.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/354,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/354#issuecomment-336206856,This change is,"Reviewed 2 of 2 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,355,2017-10-12T18:25:54Z,2017-10-13T05:25:20Z,2017-10-13T05:25:22Z,MERGED,True,102,2,7,https://github.com/Novakov,Mission task for periodical SRAM recovery,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/355,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/355,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,355,2017-10-12T18:25:54Z,2017-10-13T05:25:20Z,2017-10-13T05:25:22Z,MERGED,True,102,2,7,https://github.com/Novakov,Mission task for periodical SRAM recovery,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/355,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/355#issuecomment-336225396,This change is,"Reviewed 7 of 7 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,356,2017-10-13T11:17:57Z,2017-10-17T14:33:54Z,2017-10-17T15:01:21Z,MERGED,True,183,244,16,https://github.com/zaq32,[NCR #39] Ensure that beacon is sent when antenna deployment is disabled,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/356,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/356,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,356,2017-10-13T11:17:57Z,2017-10-17T14:33:54Z,2017-10-17T15:01:21Z,MERGED,True,183,244,16,https://github.com/zaq32,[NCR #39] Ensure that beacon is sent when antenna deployment is disabled,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/356,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/356#issuecomment-336426939,This change is,[NCR #039] Beacon stopped working,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,356,2017-10-13T11:17:57Z,2017-10-17T14:33:54Z,2017-10-17T15:01:21Z,MERGED,True,183,244,16,https://github.com/zaq32,[NCR #39] Ensure that beacon is sent when antenna deployment is disabled,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/356,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/356#issuecomment-336460153,This change is,"Reviewed 10 of 16 files at r1, 1 of 3 files at r2.
Review status: 11 of 16 files reviewed at latest revision, 1 unresolved discussion.

integration_tests/tests/test_telecommands_experiments.py, line 28 at r2 (raw file):

    @runlevel(2)
    @clear_state()

Why? For the Fibo experiment it shoul not matter if state is cleared

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,356,2017-10-13T11:17:57Z,2017-10-17T14:33:54Z,2017-10-17T15:01:21Z,MERGED,True,183,244,16,https://github.com/zaq32,[NCR #39] Ensure that beacon is sent when antenna deployment is disabled,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/356,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/356#issuecomment-336468043,This change is,"Review status: 11 of 16 files reviewed at latest revision, 1 unresolved discussion.

integration_tests/tests/test_telecommands_experiments.py, line 28 at r2 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Why? For the Fibo experiment it shoul not matter if state is cleared

fibo itself does not depend on the persistent state, however one of the previous test disable antena deployment which causes borg/beacon frames to be sent before fibo response which eventually fails assert that expects fibo response frame

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,356,2017-10-13T11:17:57Z,2017-10-17T14:33:54Z,2017-10-17T15:01:21Z,MERGED,True,183,244,16,https://github.com/zaq32,[NCR #39] Ensure that beacon is sent when antenna deployment is disabled,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/356,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/356#issuecomment-336469874,This change is,"Review status: 11 of 16 files reviewed at latest revision, 1 unresolved discussion.

integration_tests/tests/test_telecommands_experiments.py, line 28 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
fibo itself does not depend on the persistent state, however one of the previous test disable antena deployment which causes borg/beacon frames to be sent before fibo response which eventually fails assert that expects fibo response frame

That's why there is filter_type argument in get_frame method

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,356,2017-10-13T11:17:57Z,2017-10-17T14:33:54Z,2017-10-17T15:01:21Z,MERGED,True,183,244,16,https://github.com/zaq32,[NCR #39] Ensure that beacon is sent when antenna deployment is disabled,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/356,https://github.com/Novakov,6,https://github.com/PW-Sat2/PWSat2OBC/pull/356#issuecomment-336731109,This change is,"Reviewed 3 of 16 files at r1, 2 of 3 files at r2.
Review status: all files reviewed at latest revision, 1 unresolved discussion, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,356,2017-10-13T11:17:57Z,2017-10-17T14:33:54Z,2017-10-17T15:01:21Z,MERGED,True,183,244,16,https://github.com/zaq32,[NCR #39] Ensure that beacon is sent when antenna deployment is disabled,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/356,https://github.com/zaq32,7,https://github.com/PW-Sat2/PWSat2OBC/pull/356#issuecomment-336982378,This change is,"Review status: 15 of 16 files reviewed at latest revision, 1 unresolved discussion.

integration_tests/tests/test_telecommands_experiments.py, line 28 at r2 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
That's why there is filter_type argument in get_frame method

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,356,2017-10-13T11:17:57Z,2017-10-17T14:33:54Z,2017-10-17T15:01:21Z,MERGED,True,183,244,16,https://github.com/zaq32,[NCR #39] Ensure that beacon is sent when antenna deployment is disabled,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/356,https://github.com/Novakov,8,https://github.com/PW-Sat2/PWSat2OBC/pull/356#issuecomment-336982628,This change is,"Reviewed 1 of 1 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,357,2017-10-13T16:19:46Z,2017-10-13T19:35:58Z,2017-10-13T19:35:59Z,MERGED,True,3,2,1,https://github.com/zaq32,[experiments][sads] Update experiment definition,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/357,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/357,"Add delay after enabling sens lcl
At the end of the experiment wait until photo service finishes its work.



This change is","Add delay after enabling sens lcl
At the end of the experiment wait until photo service finishes its work.



This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,357,2017-10-13T16:19:46Z,2017-10-13T19:35:58Z,2017-10-13T19:35:59Z,MERGED,True,3,2,1,https://github.com/zaq32,[experiments][sads] Update experiment definition,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/357,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/357#issuecomment-336547746,"Add delay after enabling sens lcl
At the end of the experiment wait until photo service finishes its work.



This change is","Reviewed 1 of 1 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,358,2017-10-16T19:39:30Z,2017-10-17T05:36:28Z,2017-10-17T05:36:29Z,MERGED,True,19,0,2,https://github.com/mandrek44,[NCR #42] Disabling cameras after purging photo service queue,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/358,https://github.com/mandrek44,1,https://github.com/PW-Sat2/PWSat2OBC/pull/358,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,358,2017-10-16T19:39:30Z,2017-10-17T05:36:28Z,2017-10-17T05:36:29Z,MERGED,True,19,0,2,https://github.com/mandrek44,[NCR #42] Disabling cameras after purging photo service queue,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/358,https://github.com/mandrek44,2,https://github.com/PW-Sat2/PWSat2OBC/pull/358#issuecomment-337011950,This change is,[NCR #042] Camera remain turned on after purging command queue,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,358,2017-10-16T19:39:30Z,2017-10-17T05:36:28Z,2017-10-17T05:36:29Z,MERGED,True,19,0,2,https://github.com/mandrek44,[NCR #42] Disabling cameras after purging photo service queue,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/358,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/358#issuecomment-337122909,This change is,"Reviewed 2 of 2 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,359,2017-10-17T18:14:56Z,2017-10-19T16:36:11Z,2017-10-19T16:36:13Z,MERGED,True,707,231,43,https://github.com/Novakov,IMTQ LCL + detumbling during LEOP only,9,[],https://github.com/PW-Sat2/PWSat2OBC/pull/359,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/359,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,359,2017-10-17T18:14:56Z,2017-10-19T16:36:11Z,2017-10-19T16:36:13Z,MERGED,True,707,231,43,https://github.com/Novakov,IMTQ LCL + detumbling during LEOP only,9,[],https://github.com/PW-Sat2/PWSat2OBC/pull/359,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/359#issuecomment-337320554,This change is,LCL for Imtq,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,359,2017-10-17T18:14:56Z,2017-10-19T16:36:11Z,2017-10-19T16:36:13Z,MERGED,True,707,231,43,https://github.com/Novakov,IMTQ LCL + detumbling during LEOP only,9,[],https://github.com/PW-Sat2/PWSat2OBC/pull/359,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/359#issuecomment-337662919,This change is,"Reviewed 32 of 35 files at r1, 4 of 4 files at r2.
Review status: 36 of 39 files reviewed at latest revision, 2 unresolved discussions, some commit checks failed.

libs/adcs/builtin/BuiltinDetumbling.cpp, line 32 at r2 (raw file):

    OSResult BuiltinDetumbling::Enable()
    {
        powerControl.ImtqPower(true);

no error handling here?

libs/adcs/experimental/ExperimentalDetumbling.cpp, line 124 at r2 (raw file):

        }

        this->powerControl.ImtqPower(true);

no error handling here?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,359,2017-10-17T18:14:56Z,2017-10-19T16:36:11Z,2017-10-19T16:36:13Z,MERGED,True,707,231,43,https://github.com/Novakov,IMTQ LCL + detumbling during LEOP only,9,[],https://github.com/PW-Sat2/PWSat2OBC/pull/359,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/359#issuecomment-337679024,This change is,Unable to download some chunks from file,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,359,2017-10-17T18:14:56Z,2017-10-19T16:36:11Z,2017-10-19T16:36:13Z,MERGED,True,707,231,43,https://github.com/Novakov,IMTQ LCL + detumbling during LEOP only,9,[],https://github.com/PW-Sat2/PWSat2OBC/pull/359,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/359#issuecomment-337679345,This change is,"Review status: 36 of 39 files reviewed at latest revision, 2 unresolved discussions, some commit checks failed.

libs/adcs/builtin/BuiltinDetumbling.cpp, line 32 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
no error handling here?

Done.

libs/adcs/experimental/ExperimentalDetumbling.cpp, line 124 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
no error handling here?

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,359,2017-10-17T18:14:56Z,2017-10-19T16:36:11Z,2017-10-19T16:36:13Z,MERGED,True,707,231,43,https://github.com/Novakov,IMTQ LCL + detumbling during LEOP only,9,[],https://github.com/PW-Sat2/PWSat2OBC/pull/359,https://github.com/zaq32,6,https://github.com/PW-Sat2/PWSat2OBC/pull/359#issuecomment-337689944,This change is,"Reviewed 3 of 35 files at r1, 4 of 8 files at r3.
Review status: 39 of 43 files reviewed at latest revision, 7 unresolved discussions.

libs/mission/adcs/adcs.cpp, line 64 at r2 (raw file):

            }

            return true; // !IsDetumblingDisabled(state);

do not leave commented out code

libs/mission/adcs/adcs.cpp, line 91 at r2 (raw file):

            }

            if (context->coordinator.CurrentMode() == ::adcs::AdcsMode::Stopped)

or disabled
I wonder if there is even point in checking current adcs controller  mode

libs/mission/adcs/adcs.cpp, line 116 at r2 (raw file):

            if (!state.PersistentState.Get(adcsState))
            {
                return false;

in case of errors it is safer to assume that detumbling is disabled

libs/mission/adcs/Include/mission/adcs.hpp, line 100 at r2 (raw file):

            enum class State
            {
                WaitingForStart,

this is effectively the same as stopped

libs/obc/communication/telecommands/file_system.cpp, line 35 at r3 (raw file):

        std::uint32_t FileSender::MaxChunkNumber(std::uint32_t fileSize)
        {
            auto n = fileSize / MaxFileDataSize;

consider this:
auto n = (fileSize + MaxFileDataSize - 1) / MaxFileDataSize

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,359,2017-10-17T18:14:56Z,2017-10-19T16:36:11Z,2017-10-19T16:36:13Z,MERGED,True,707,231,43,https://github.com/Novakov,IMTQ LCL + detumbling during LEOP only,9,[],https://github.com/PW-Sat2/PWSat2OBC/pull/359,https://github.com/zaq32,7,https://github.com/PW-Sat2/PWSat2OBC/pull/359#issuecomment-337690222,This change is,"Reviewed 4 of 8 files at r3.
Review status: all files reviewed at latest revision, 5 unresolved discussions.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,359,2017-10-17T18:14:56Z,2017-10-19T16:36:11Z,2017-10-19T16:36:13Z,MERGED,True,707,231,43,https://github.com/Novakov,IMTQ LCL + detumbling during LEOP only,9,[],https://github.com/PW-Sat2/PWSat2OBC/pull/359,https://github.com/Novakov,8,https://github.com/PW-Sat2/PWSat2OBC/pull/359#issuecomment-337694352,This change is,"Review status: all files reviewed at latest revision, 5 unresolved discussions.

libs/mission/adcs/adcs.cpp, line 64 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
do not leave commented out code

Done.

libs/mission/adcs/adcs.cpp, line 91 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
or disabled
I wonder if there is even point in checking current adcs controller  mode

Done.

libs/mission/adcs/Include/mission/adcs.hpp, line 100 at r2 (raw file):
Previously, zaq32 (ukasz ak) wrote
this is effectively the same as stopped

I prefer the explicit view of ""states"" of ADCS control.

libs/obc/communication/telecommands/file_system.cpp, line 35 at r3 (raw file):
Previously, zaq32 (ukasz ak) wrote
consider this:
auto n = (fileSize + MaxFileDataSize - 1) / MaxFileDataSize

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,359,2017-10-17T18:14:56Z,2017-10-19T16:36:11Z,2017-10-19T16:36:13Z,MERGED,True,707,231,43,https://github.com/Novakov,IMTQ LCL + detumbling during LEOP only,9,[],https://github.com/PW-Sat2/PWSat2OBC/pull/359,https://github.com/zaq32,9,https://github.com/PW-Sat2/PWSat2OBC/pull/359#issuecomment-337695002,This change is,"Reviewed 3 of 3 files at r4.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,360,2017-10-17T19:26:26Z,2017-10-18T16:00:20Z,2017-10-18T16:00:21Z,MERGED,True,64,1,8,https://github.com/tom4r,[NCR #047] Fixed HF when downloading a folder instead of a file.,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/360,https://github.com/tom4r,1,https://github.com/PW-Sat2/PWSat2OBC/pull/360,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,360,2017-10-17T19:26:26Z,2017-10-18T16:00:20Z,2017-10-18T16:00:21Z,MERGED,True,64,1,8,https://github.com/tom4r,[NCR #047] Fixed HF when downloading a folder instead of a file.,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/360,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/360#issuecomment-337343708,This change is,"Reviewed 7 of 7 files at r1.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

libs/obc/communication/telecommands/file_system.cpp, line 94 at r1 (raw file):

                LOGF(LOG_LEVEL_ERROR, ""Trying to retrieve directory %s"", path);
                CorrelatedDownlinkFrame errorResponse(DownlinkAPID::FileSend, 0, correlationId);
                errorResponse.PayloadWriter().WriteByte(static_cast<uint8_t>(DownloadFileTelecommand::ErrorCode::MalformedRequest));

It would be better to have separate error code for too short frame and invalid path

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,360,2017-10-17T19:26:26Z,2017-10-18T16:00:20Z,2017-10-18T16:00:21Z,MERGED,True,64,1,8,https://github.com/tom4r,[NCR #047] Fixed HF when downloading a folder instead of a file.,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/360,https://github.com/tom4r,3,https://github.com/PW-Sat2/PWSat2OBC/pull/360#issuecomment-337346468,This change is,"Review status: 6 of 8 files reviewed at latest revision, 1 unresolved discussion.

libs/obc/communication/telecommands/file_system.cpp, line 94 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
It would be better to have separate error code for too short frame and invalid path

Right. Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,360,2017-10-17T19:26:26Z,2017-10-18T16:00:20Z,2017-10-18T16:00:21Z,MERGED,True,64,1,8,https://github.com/tom4r,[NCR #047] Fixed HF when downloading a folder instead of a file.,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/360,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/360#issuecomment-337346995,This change is,"Reviewed 2 of 2 files at r2.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

a discussion (no related file):
(just a placeholder for me to test it)

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,361,2017-10-17T23:50:27Z,2017-10-18T18:05:04Z,2017-10-18T18:05:06Z,MERGED,True,3,1,3,https://github.com/ggajoch,Delay after turning on overheat mode,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/361,https://github.com/ggajoch,1,https://github.com/PW-Sat2/PWSat2OBC/pull/361,"If IgnoreOverheat and EnableMainThermalKnife are send simultaneously there is a possiblity of race condition when:

overheat was detected, so turning off LCLs
in the middle, interrupt is server to disable overheat mode (but on-going check is still going)
then, before end, TK is enabled and immediatelly disabled by overheat protection.

This event is very unlikely (there is a window of about 2ms each second, and those two command would have to be send with less than 2ms interval. However fix was simple and should be enough.


This change is","If IgnoreOverheat and EnableMainThermalKnife are send simultaneously there is a possiblity of race condition when:

overheat was detected, so turning off LCLs
in the middle, interrupt is server to disable overheat mode (but on-going check is still going)
then, before end, TK is enabled and immediatelly disabled by overheat protection.

This event is very unlikely (there is a window of about 2ms each second, and those two command would have to be send with less than 2ms interval. However fix was simple and should be enough.


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,361,2017-10-17T23:50:27Z,2017-10-18T18:05:04Z,2017-10-18T18:05:06Z,MERGED,True,3,1,3,https://github.com/ggajoch,Delay after turning on overheat mode,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/361,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/361#issuecomment-337641864,"If IgnoreOverheat and EnableMainThermalKnife are send simultaneously there is a possiblity of race condition when:

overheat was detected, so turning off LCLs
in the middle, interrupt is server to disable overheat mode (but on-going check is still going)
then, before end, TK is enabled and immediatelly disabled by overheat protection.

This event is very unlikely (there is a window of about 2ms each second, and those two command would have to be send with less than 2ms interval. However fix was simple and should be enough.


This change is","Reviewed 3 of 3 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,362,2017-10-18T17:39:16Z,2017-10-24T11:41:06Z,2017-10-24T11:41:07Z,MERGED,True,73,17,8,https://github.com/tom4r,[NCR #024] Fixed overflow in detumbling calculations,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/362,https://github.com/tom4r,1,https://github.com/PW-Sat2/PWSat2OBC/pull/362,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,362,2017-10-18T17:39:16Z,2017-10-24T11:41:06Z,2017-10-24T11:41:07Z,MERGED,True,73,17,8,https://github.com/tom4r,[NCR #024] Fixed overflow in detumbling calculations,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/362,https://github.com/tom4r,2,https://github.com/PW-Sat2/PWSat2OBC/pull/362#issuecomment-337671936,This change is,[NCR #024] Detumbling experiment works incorrectly,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,362,2017-10-18T17:39:16Z,2017-10-24T11:41:06Z,2017-10-24T11:41:07Z,MERGED,True,73,17,8,https://github.com/tom4r,[NCR #024] Fixed overflow in detumbling calculations,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/362,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/362#issuecomment-337672864,This change is,"Reviewed 4 of 4 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,362,2017-10-18T17:39:16Z,2017-10-24T11:41:06Z,2017-10-24T11:41:07Z,MERGED,True,73,17,8,https://github.com/tom4r,[NCR #024] Fixed overflow in detumbling calculations,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/362,https://github.com/zaq32,4,https://github.com/PW-Sat2/PWSat2OBC/pull/362#issuecomment-337691234,This change is,"Reviewed 2 of 2 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,362,2017-10-18T17:39:16Z,2017-10-24T11:41:06Z,2017-10-24T11:41:07Z,MERGED,True,73,17,8,https://github.com/tom4r,[NCR #024] Fixed overflow in detumbling calculations,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/362,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/362#issuecomment-337944596,This change is,"Reviewed 5 of 6 files at r3, 1 of 1 files at r4.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,362,2017-10-18T17:39:16Z,2017-10-24T11:41:06Z,2017-10-24T11:41:07Z,MERGED,True,73,17,8,https://github.com/tom4r,[NCR #024] Fixed overflow in detumbling calculations,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/362,https://github.com/tom4r,6,https://github.com/PW-Sat2/PWSat2OBC/pull/362#issuecomment-337945657,This change is,Moved back to development as still there are some issues,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,362,2017-10-18T17:39:16Z,2017-10-24T11:41:06Z,2017-10-24T11:41:07Z,MERGED,True,73,17,8,https://github.com/tom4r,[NCR #024] Fixed overflow in detumbling calculations,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/362,https://github.com/tom4r,7,https://github.com/PW-Sat2/PWSat2OBC/pull/362#issuecomment-338393471,This change is,"Issues fixed, can CR-ed again.",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,362,2017-10-18T17:39:16Z,2017-10-24T11:41:06Z,2017-10-24T11:41:07Z,MERGED,True,73,17,8,https://github.com/tom4r,[NCR #024] Fixed overflow in detumbling calculations,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/362,https://github.com/Novakov,8,https://github.com/PW-Sat2/PWSat2OBC/pull/362#issuecomment-338425821,This change is,"Reviewed 6 of 6 files at r5.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,363,2017-10-19T06:42:55Z,2017-10-19T14:30:28Z,2017-10-19T14:30:29Z,MERGED,True,25,0,2,https://github.com/Novakov,Initialize all unused pins,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/363,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/363,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,363,2017-10-19T06:42:55Z,2017-10-19T14:30:28Z,2017-10-19T14:30:29Z,MERGED,True,25,0,2,https://github.com/Novakov,Initialize all unused pins,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/363,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/363#issuecomment-337814323,This change is,[NCR#050] Init all unused pins,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,363,2017-10-19T06:42:55Z,2017-10-19T14:30:28Z,2017-10-19T14:30:29Z,MERGED,True,25,0,2,https://github.com/Novakov,Initialize all unused pins,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/363,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/363#issuecomment-337819766,This change is,"Reviewed 2 of 2 files at r1.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

boot/main.cpp, line 22 at r1 (raw file):

static void InitializeAllPins(GPIO_Port_TypeDef port, std::uint8_t pinCount)
{
    //    GPIO_Port_TypeDef ports[] = {gpioPortA, gpioPortB, gpioPortC, gpioPortD, gpioPortE, gpioPortF};

do not leave commented out code

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,363,2017-10-19T06:42:55Z,2017-10-19T14:30:28Z,2017-10-19T14:30:29Z,MERGED,True,25,0,2,https://github.com/Novakov,Initialize all unused pins,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/363,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/363#issuecomment-337823672,This change is,"Review status: 1 of 2 files reviewed at latest revision, 1 unresolved discussion.

boot/main.cpp, line 22 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
do not leave commented out code

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,363,2017-10-19T06:42:55Z,2017-10-19T14:30:28Z,2017-10-19T14:30:29Z,MERGED,True,25,0,2,https://github.com/Novakov,Initialize all unused pins,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/363,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/363#issuecomment-337823915,This change is,"Reviewed 1 of 1 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,364,2017-10-19T16:48:20Z,2017-10-19T18:42:48Z,2017-10-19T18:42:48Z,MERGED,True,69,27,6,https://github.com/zaq32,[ncr #51] Fix sail experiment/purge photo service telecommand conflict.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/364,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/364,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,364,2017-10-19T16:48:20Z,2017-10-19T18:42:48Z,2017-10-19T18:42:48Z,MERGED,True,69,27,6,https://github.com/zaq32,[ncr #51] Fix sail experiment/purge photo service telecommand conflict.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/364,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/364#issuecomment-337968926,This change is,[NCR #051] Sail experiment does not take hi-res photos at the end,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,364,2017-10-19T16:48:20Z,2017-10-19T18:42:48Z,2017-10-19T18:42:48Z,MERGED,True,69,27,6,https://github.com/zaq32,[ncr #51] Fix sail experiment/purge photo service telecommand conflict.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/364,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/364#issuecomment-337971057,This change is,"Reviewed 6 of 6 files at r1, 1 of 1 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,365,2017-10-19T18:46:31Z,2017-10-20T12:21:59Z,2017-10-20T12:22:02Z,MERGED,True,160,11,11,https://github.com/Novakov,No response frames,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/365,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/365,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,365,2017-10-19T18:46:31Z,2017-10-20T12:21:59Z,2017-10-20T12:22:02Z,MERGED,True,160,11,11,https://github.com/Novakov,No response frames,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/365,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/365#issuecomment-338001331,This change is,Missing responses from telecommands,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,365,2017-10-19T18:46:31Z,2017-10-20T12:21:59Z,2017-10-20T12:22:02Z,MERGED,True,160,11,11,https://github.com/Novakov,No response frames,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/365,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/365#issuecomment-338002390,This change is,"Reviewed 11 of 11 files at r1.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

integration_tests/response_frames/comm.py, line 5 at r1 (raw file):

@response_frame(0x22)
class OperationSuccessFrame(ResponseFrame):

shouldn't this be BeaconErrorFrame?

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,365,2017-10-19T18:46:31Z,2017-10-20T12:21:59Z,2017-10-20T12:22:02Z,MERGED,True,160,11,11,https://github.com/Novakov,No response frames,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/365,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/365#issuecomment-338005087,This change is,"Review status: 10 of 11 files reviewed at latest revision, 1 unresolved discussion.

integration_tests/response_frames/comm.py, line 5 at r1 (raw file):
Previously, zaq32 (ukasz ak) wrote
shouldn't this be BeaconErrorFrame?

My copy-fu failed me today....

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,365,2017-10-19T18:46:31Z,2017-10-20T12:21:59Z,2017-10-20T12:22:02Z,MERGED,True,160,11,11,https://github.com/Novakov,No response frames,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/365,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/365#issuecomment-338005351,This change is,"Reviewed 1 of 1 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,366,2017-10-19T19:38:35Z,2017-10-20T13:34:36Z,2017-10-20T13:34:37Z,MERGED,True,3,1,1,https://github.com/mandrek44,Fixed payload value when sending Disable ADCS command,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/366,https://github.com/mandrek44,1,https://github.com/PW-Sat2/PWSat2OBC/pull/366,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,366,2017-10-19T19:38:35Z,2017-10-20T13:34:36Z,2017-10-20T13:34:37Z,MERGED,True,3,1,1,https://github.com/mandrek44,Fixed payload value when sending Disable ADCS command,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/366,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/366#issuecomment-338191565,This change is,"Reviewed 1 of 1 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,367,2017-10-20T00:56:56Z,2017-10-24T12:37:40Z,2017-10-24T12:37:43Z,MERGED,True,38,22,4,https://github.com/ggajoch,Wait for COMM bootup,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/367,https://github.com/ggajoch,1,https://github.com/PW-Sat2/PWSat2OBC/pull/367,"After hardware reset of COMM delay is necessary - hardware reset performs power cycle of COMMs module and it takes some time to initialise.

Moved resetting COMM to OBCCommunication::InitializeRunlevel1.
NCR#13


This change is","After hardware reset of COMM delay is necessary - hardware reset performs power cycle of COMMs module and it takes some time to initialise.

Moved resetting COMM to OBCCommunication::InitializeRunlevel1.
NCR#13


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,367,2017-10-20T00:56:56Z,2017-10-24T12:37:40Z,2017-10-24T12:37:43Z,MERGED,True,38,22,4,https://github.com/ggajoch,Wait for COMM bootup,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/367,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/367#issuecomment-338206100,"After hardware reset of COMM delay is necessary - hardware reset performs power cycle of COMMs module and it takes some time to initialise.

Moved resetting COMM to OBCCommunication::InitializeRunlevel1.
NCR#13


This change is","Reviewed 2 of 2 files at r1.
Review status: all files reviewed at latest revision, 1 unresolved discussion, some commit checks failed.

libs/drivers/comm/comm.cpp, line 233 at r1 (raw file):

{
    auto result = this->SendCommand(Address::Receiver, num(ReceiverCommand::HardReset), resultAggregator);
    System::SleepTask(2000ms);

You just made builds longer by few minutes...

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,367,2017-10-20T00:56:56Z,2017-10-24T12:37:40Z,2017-10-24T12:37:43Z,MERGED,True,38,22,4,https://github.com/ggajoch,Wait for COMM bootup,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/367,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/367#issuecomment-338206317,"After hardware reset of COMM delay is necessary - hardware reset performs power cycle of COMMs module and it takes some time to initialise.

Moved resetting COMM to OBCCommunication::InitializeRunlevel1.
NCR#13


This change is","Reviewed 1 of 2 files at r1.
Review status: all files reviewed at latest revision, 1 unresolved discussion, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,367,2017-10-20T00:56:56Z,2017-10-24T12:37:40Z,2017-10-24T12:37:43Z,MERGED,True,38,22,4,https://github.com/ggajoch,Wait for COMM bootup,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/367,https://github.com/ggajoch,4,https://github.com/PW-Sat2/PWSat2OBC/pull/367#issuecomment-338214770,"After hardware reset of COMM delay is necessary - hardware reset performs power cycle of COMMs module and it takes some time to initialise.

Moved resetting COMM to OBCCommunication::InitializeRunlevel1.
NCR#13


This change is","Review status: all files reviewed at latest revision, 1 unresolved discussion, some commit checks failed.

libs/drivers/comm/comm.cpp, line 233 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
You just made builds longer by few minutes...

Other possibility to get away with this is simply not resetting the TRxVU, assuming that after power cycle it will be in clean state.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,367,2017-10-20T00:56:56Z,2017-10-24T12:37:40Z,2017-10-24T12:37:43Z,MERGED,True,38,22,4,https://github.com/ggajoch,Wait for COMM bootup,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/367,https://github.com/Novakov,5,https://github.com/PW-Sat2/PWSat2OBC/pull/367#issuecomment-338373064,"After hardware reset of COMM delay is necessary - hardware reset performs power cycle of COMMs module and it takes some time to initialise.

Moved resetting COMM to OBCCommunication::InitializeRunlevel1.
NCR#13


This change is","Review status: all files reviewed at latest revision, 1 unresolved discussion, some commit checks failed.

libs/drivers/comm/comm.cpp, line 233 at r1 (raw file):
Previously, ggajoch (Grzegorz Gajoch) wrote
Other possibility to get away with this is simply not resetting the TRxVU, assuming that after power cycle it will be in clean state.

That's also valid option

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,367,2017-10-20T00:56:56Z,2017-10-24T12:37:40Z,2017-10-24T12:37:43Z,MERGED,True,38,22,4,https://github.com/ggajoch,Wait for COMM bootup,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/367,https://github.com/Novakov,6,https://github.com/PW-Sat2/PWSat2OBC/pull/367#issuecomment-338772017,"After hardware reset of COMM delay is necessary - hardware reset performs power cycle of COMMs module and it takes some time to initialise.

Moved resetting COMM to OBCCommunication::InitializeRunlevel1.
NCR#13


This change is","Reviewed 1 of 12 files at r2, 4 of 14 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,368,2017-10-20T15:31:03Z,2017-10-23T16:41:08Z,2017-10-23T16:41:09Z,MERGED,True,27,58,7,https://github.com/zaq32,[NCR #49] Update StopSailDeployment telecommand,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/368,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/368,"Update stop sail deployment telecommand to be able to unconditionally and at any point in time stop the sail deployment.


This change is","Update stop sail deployment telecommand to be able to unconditionally and at any point in time stop the sail deployment.


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,368,2017-10-20T15:31:03Z,2017-10-23T16:41:08Z,2017-10-23T16:41:09Z,MERGED,True,27,58,7,https://github.com/zaq32,[NCR #49] Update StopSailDeployment telecommand,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/368,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/368#issuecomment-338241044,"Update stop sail deployment telecommand to be able to unconditionally and at any point in time stop the sail deployment.


This change is",[NCR #049] StopSailDeployment telecommand not working as intended,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,368,2017-10-20T15:31:03Z,2017-10-23T16:41:08Z,2017-10-23T16:41:09Z,MERGED,True,27,58,7,https://github.com/zaq32,[NCR #49] Update StopSailDeployment telecommand,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/368,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/368#issuecomment-338694763,"Update stop sail deployment telecommand to be able to unconditionally and at any point in time stop the sail deployment.


This change is","Reviewed 6 of 7 files at r1, 1 of 1 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,368,2017-10-20T15:31:03Z,2017-10-23T16:41:08Z,2017-10-23T16:41:09Z,MERGED,True,27,58,7,https://github.com/zaq32,[NCR #49] Update StopSailDeployment telecommand,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/368,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/368#issuecomment-338720507,"Update stop sail deployment telecommand to be able to unconditionally and at any point in time stop the sail deployment.


This change is","Reviewed 1 of 1 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,369,2017-10-21T15:54:38Z,2017-10-21T19:12:15Z,2017-10-21T19:12:16Z,MERGED,True,2,2,1,https://github.com/begreeen,Batterry charge and discharge currents were calculated using wrong fo,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/369,https://github.com/begreeen,1,https://github.com/PW-Sat2/PWSat2OBC/pull/369,"rmulas


This change is","rmulas


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,369,2017-10-21T15:54:38Z,2017-10-21T19:12:15Z,2017-10-21T19:12:16Z,MERGED,True,2,2,1,https://github.com/begreeen,Batterry charge and discharge currents were calculated using wrong fo,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/369,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/369#issuecomment-338412105,"rmulas


This change is","Reviewed 1 of 1 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,370,2017-10-24T16:51:20Z,2017-10-24T18:29:43Z,2017-10-24T18:29:45Z,MERGED,True,12,1,1,https://github.com/tom4r,[NCR #052] Added frame decoders for SetPeriodic.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/370,https://github.com/tom4r,1,https://github.com/PW-Sat2/PWSat2OBC/pull/370,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,370,2017-10-24T16:51:20Z,2017-10-24T18:29:43Z,2017-10-24T18:29:45Z,MERGED,True,12,1,1,https://github.com/tom4r,[NCR #052] Added frame decoders for SetPeriodic.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/370,https://github.com/tom4r,2,https://github.com/PW-Sat2/PWSat2OBC/pull/370#issuecomment-339057488,This change is,[NCR #052] Unknown response frame from SetPeriodic,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,370,2017-10-24T16:51:20Z,2017-10-24T18:29:43Z,2017-10-24T18:29:45Z,MERGED,True,12,1,1,https://github.com/tom4r,[NCR #052] Added frame decoders for SetPeriodic.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/370,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/370#issuecomment-339059870,This change is,"Reviewed 1 of 1 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,371,2017-10-24T16:53:16Z,2017-10-24T16:58:38Z,2017-10-24T16:58:40Z,MERGED,True,32,1,1,https://github.com/zaq32,[photo] Extend photo service diagnostics.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/371,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/371,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,371,2017-10-24T16:53:16Z,2017-10-24T16:58:38Z,2017-10-24T16:58:40Z,MERGED,True,32,1,1,https://github.com/zaq32,[photo] Extend photo service diagnostics.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/371,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/371#issuecomment-339058094,This change is,[NCR #051] Wicej logw z kamerek,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,371,2017-10-24T16:53:16Z,2017-10-24T16:58:38Z,2017-10-24T16:58:40Z,MERGED,True,32,1,1,https://github.com/zaq32,[photo] Extend photo service diagnostics.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/371,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/371#issuecomment-339059721,This change is,"Reviewed 1 of 1 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,372,2017-10-24T18:25:38Z,2017-10-25T17:03:43Z,2017-10-25T17:03:44Z,MERGED,True,74,281,17,https://github.com/zaq32,Update StopAntennaDeployment telecommand,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/372,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/372,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,372,2017-10-24T18:25:38Z,2017-10-25T17:03:43Z,2017-10-25T17:03:44Z,MERGED,True,74,281,17,https://github.com/zaq32,Update StopAntennaDeployment telecommand,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/372,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/372#issuecomment-339089261,This change is,SetAntennaDeployemnt should immediatelly update persistent state,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,372,2017-10-24T18:25:38Z,2017-10-25T17:03:43Z,2017-10-25T17:03:44Z,MERGED,True,74,281,17,https://github.com/zaq32,Update StopAntennaDeployment telecommand,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/372,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/372#issuecomment-339098644,This change is,"Reviewed 17 of 17 files at r1, 1 of 1 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,372,2017-10-24T18:25:38Z,2017-10-25T17:03:43Z,2017-10-25T17:03:44Z,MERGED,True,74,281,17,https://github.com/zaq32,Update StopAntennaDeployment telecommand,6,[],https://github.com/PW-Sat2/PWSat2OBC/pull/372,https://github.com/Novakov,4,https://github.com/PW-Sat2/PWSat2OBC/pull/372#issuecomment-339399728,This change is,"Reviewed 1 of 1 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,373,2017-10-24T18:56:20Z,2017-10-25T09:49:49Z,2017-10-25T09:49:51Z,MERGED,True,18,2,3,https://github.com/Novakov,Fixed GetPersistentState telecommand,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/373,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/373,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,373,2017-10-24T18:56:20Z,2017-10-25T09:49:49Z,2017-10-25T09:49:51Z,MERGED,True,18,2,3,https://github.com/Novakov,Fixed GetPersistentState telecommand,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/373,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/373#issuecomment-339096382,This change is,"Reviewed 3 of 3 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,374,2017-10-26T09:59:46Z,2017-10-27T08:21:31Z,2017-10-27T08:21:32Z,MERGED,True,20,15,2,https://github.com/zaq32,[sail][experiment] Sail experiment update,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/374,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/374,"Give the photo service some time to take & download high resolution photos before stopping the sail experiment.


This change is","Give the photo service some time to take & download high resolution photos before stopping the sail experiment.


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,374,2017-10-26T09:59:46Z,2017-10-27T08:21:31Z,2017-10-27T08:21:32Z,MERGED,True,20,15,2,https://github.com/zaq32,[sail][experiment] Sail experiment update,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/374,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/374#issuecomment-339772939,"Give the photo service some time to take & download high resolution photos before stopping the sail experiment.


This change is","Reviewed 2 of 2 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,375,2017-10-26T14:31:31Z,2017-10-26T14:59:13Z,2017-10-26T14:59:14Z,MERGED,True,16,8,2,https://github.com/begreeen,Option 'nowait' for bootloader added to upload tools,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/375,https://github.com/begreeen,1,https://github.com/PW-Sat2/PWSat2OBC/pull/375,"Option useful for upload via umbilical


This change is","Option useful for upload via umbilical


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,375,2017-10-26T14:31:31Z,2017-10-26T14:59:13Z,2017-10-26T14:59:14Z,MERGED,True,16,8,2,https://github.com/begreeen,Option 'nowait' for bootloader added to upload tools,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/375,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/375#issuecomment-339694310,"Option useful for upload via umbilical


This change is","Reviewed 2 of 2 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,376,2017-10-30T16:04:42Z,2017-11-02T11:00:03Z,2017-11-02T11:00:04Z,MERGED,True,4,4,2,https://github.com/begreeen,Swapped Sockets For Solar Panels On PLD Board fix,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/376,https://github.com/begreeen,1,https://github.com/PW-Sat2/PWSat2OBC/pull/376,"https://team.pw-sat.pl/w/ncr/ncr53


This change is","https://team.pw-sat.pl/w/ncr/ncr53


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,376,2017-10-30T16:04:42Z,2017-11-02T11:00:03Z,2017-11-02T11:00:04Z,MERGED,True,4,4,2,https://github.com/begreeen,Swapped Sockets For Solar Panels On PLD Board fix,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/376,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/376#issuecomment-340560699,"https://team.pw-sat.pl/w/ncr/ncr53


This change is","Reviewed 2 of 2 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,377,2017-10-30T19:59:23Z,2017-10-31T18:47:22Z,2017-10-31T18:47:24Z,MERGED,True,132,67,26,https://github.com/tom4r,Added frame filters to get_frame on tests.,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/377,https://github.com/tom4r,1,https://github.com/PW-Sat2/PWSat2OBC/pull/377,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,377,2017-10-30T19:59:23Z,2017-10-31T18:47:22Z,2017-10-31T18:47:24Z,MERGED,True,132,67,26,https://github.com/tom4r,Added frame filters to get_frame on tests.,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/377,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/377#issuecomment-340766735,This change is,"Reviewed 26 of 26 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,378,2017-10-30T20:36:42Z,2017-10-31T07:00:45Z,2017-10-31T07:00:46Z,MERGED,True,2,2,1,https://github.com/begreeen,The answer for the question wheter sail is deployed is given directly by the GPIO state.,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/378,https://github.com/begreeen,1,https://github.com/PW-Sat2/PWSat2OBC/pull/378,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,378,2017-10-30T20:36:42Z,2017-10-31T07:00:45Z,2017-10-31T07:00:46Z,MERGED,True,2,2,1,https://github.com/begreeen,The answer for the question wheter sail is deployed is given directly by the GPIO state.,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/378,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/378#issuecomment-340677160,This change is,"Reviewed 1 of 1 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,379,2017-11-15T18:09:58Z,2017-11-16T10:32:28Z,2017-11-17T15:14:23Z,MERGED,True,103,12,11,https://github.com/tom4r,Fixed calculating MCU and IMTQ temperatures.,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/379,https://github.com/tom4r,1,https://github.com/PW-Sat2/PWSat2OBC/pull/379,"Added possibility to retrieve MCU Temperature calibration coefficients.


This change is","Added possibility to retrieve MCU Temperature calibration coefficients.


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,379,2017-11-15T18:09:58Z,2017-11-16T10:32:28Z,2017-11-17T15:14:23Z,MERGED,True,103,12,11,https://github.com/tom4r,Fixed calculating MCU and IMTQ temperatures.,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/379,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/379#issuecomment-344680168,"Added possibility to retrieve MCU Temperature calibration coefficients.


This change is","Reviewed 10 of 10 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,379,2017-11-15T18:09:58Z,2017-11-16T10:32:28Z,2017-11-17T15:14:23Z,MERGED,True,103,12,11,https://github.com/tom4r,Fixed calculating MCU and IMTQ temperatures.,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/379,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/379#issuecomment-344881871,"Added possibility to retrieve MCU Temperature calibration coefficients.


This change is","Reviewed 1 of 1 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,380,2017-11-17T11:14:31Z,2017-11-17T12:49:36Z,2017-11-17T12:49:38Z,MERGED,True,192,58,10,https://github.com/Novakov,Fix pin initialization,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/380,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/380,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,380,2017-11-17T11:14:31Z,2017-11-17T12:49:36Z,2017-11-17T12:49:38Z,MERGED,True,192,58,10,https://github.com/Novakov,Fix pin initialization,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/380,https://github.com/tom4r,2,https://github.com/PW-Sat2/PWSat2OBC/pull/380#issuecomment-345222622,This change is,"Reviewed 10 of 10 files at r1.
Review status: all files reviewed at latest revision, 2 unresolved discussions, some commit checks broke.

boot/main.cpp, line 41 at r1 (raw file):

    for (std::uint8_t pin = 0; pin < pinCount; pin++)
    {
        //        if (port == io_map::Watchdog::ExternalWatchdogPin::Port && pin == io_map::Watchdog::ExternalWatchdogPin::PinNumber)

Please remove comment.

platforms/mcu/EngModel/Include/mcu/io_map.h, line 140 at r1 (raw file):

        struct HF
        {
            using Pin1 = PinLocation<gpioPortB, 13>;

Consistency note: In documentation Pin1 has sufix 'P' and Pin2 'N' (Positive / Negative?).

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,380,2017-11-17T11:14:31Z,2017-11-17T12:49:36Z,2017-11-17T12:49:38Z,MERGED,True,192,58,10,https://github.com/Novakov,Fix pin initialization,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/380,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/380#issuecomment-345223035,This change is,"Review status: 9 of 10 files reviewed at latest revision, 1 unresolved discussion.

boot/main.cpp, line 41 at r1 (raw file):
Previously, tom4r wrote
Please remove comment.

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,380,2017-11-17T11:14:31Z,2017-11-17T12:49:36Z,2017-11-17T12:49:38Z,MERGED,True,192,58,10,https://github.com/Novakov,Fix pin initialization,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/380,https://github.com/tom4r,4,https://github.com/PW-Sat2/PWSat2OBC/pull/380#issuecomment-345223214,This change is,"Reviewed 1 of 1 files at r2.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,380,2017-11-17T11:14:31Z,2017-11-17T12:49:36Z,2017-11-17T12:49:38Z,MERGED,True,192,58,10,https://github.com/Novakov,Fix pin initialization,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/380,https://github.com/zaq32,5,https://github.com/PW-Sat2/PWSat2OBC/pull/380#issuecomment-345235238,This change is,"Reviewed 8 of 10 files at r1, 1 of 1 files at r2, 1 of 1 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,381,2017-11-17T14:03:26Z,2017-11-17T14:46:02Z,2017-11-17T14:46:03Z,MERGED,True,21,2,2,https://github.com/Novakov,Boot to safe mode when no magic number,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/381,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/381,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,381,2017-11-17T14:03:26Z,2017-11-17T14:46:02Z,2017-11-17T14:46:03Z,MERGED,True,21,2,2,https://github.com/Novakov,Boot to safe mode when no magic number,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/381,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/381#issuecomment-345252630,This change is,"Reviewed 2 of 2 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,382,2017-11-17T17:59:03Z,2017-11-21T10:53:34Z,2017-11-21T10:53:36Z,MERGED,True,72,15,7,https://github.com/Novakov,Safe mode & bootloader padding,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/382,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/382,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,382,2017-11-17T17:59:03Z,2017-11-21T10:53:34Z,2017-11-21T10:53:36Z,MERGED,True,72,15,7,https://github.com/Novakov,Safe mode & bootloader padding,5,[],https://github.com/PW-Sat2/PWSat2OBC/pull/382,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/382#issuecomment-345979488,This change is,"Reviewed 7 of 7 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,383,2017-11-18T15:42:31Z,2017-11-18T16:14:51Z,2017-11-18T16:14:52Z,MERGED,True,98,18,13,https://github.com/tom4r,Several minor fixes,8,[],https://github.com/PW-Sat2/PWSat2OBC/pull/383,https://github.com/tom4r,1,https://github.com/PW-Sat2/PWSat2OBC/pull/383,"Fixes of minor issues that have been found during last testing session.


This change is","Fixes of minor issues that have been found during last testing session.


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,383,2017-11-18T15:42:31Z,2017-11-18T16:14:51Z,2017-11-18T16:14:52Z,MERGED,True,98,18,13,https://github.com/tom4r,Several minor fixes,8,[],https://github.com/PW-Sat2/PWSat2OBC/pull/383,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/383#issuecomment-345452399,"Fixes of minor issues that have been found during last testing session.


This change is","Reviewed 4 of 4 files at r1, 2 of 2 files at r2, 7 of 7 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,384,2017-12-07T19:28:34Z,2017-12-09T15:38:26Z,2017-12-09T15:38:27Z,MERGED,True,108,59,8,https://github.com/mandrek44,Added formatting to Telecommands and Resposnses,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/384,https://github.com/mandrek44,1,https://github.com/PW-Sat2/PWSat2OBC/pull/384," so that they are readable in console.
I focused on TCs used in last ""40-day mission""


This change is"," so that they are readable in console.
I focused on TCs used in last ""40-day mission""


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,384,2017-12-07T19:28:34Z,2017-12-09T15:38:26Z,2017-12-09T15:38:27Z,MERGED,True,108,59,8,https://github.com/mandrek44,Added formatting to Telecommands and Resposnses,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/384,https://github.com/mandrek44,2,https://github.com/PW-Sat2/PWSat2OBC/pull/384#issuecomment-350070441," so that they are readable in console.
I focused on TCs used in last ""40-day mission""


This change is",Czytelne Telekomendy i Resposne Frame w konsoli,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,384,2017-12-07T19:28:34Z,2017-12-09T15:38:26Z,2017-12-09T15:38:27Z,MERGED,True,108,59,8,https://github.com/mandrek44,Added formatting to Telecommands and Resposnses,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/384,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/384#issuecomment-350478918," so that they are readable in console.
I focused on TCs used in last ""40-day mission""


This change is","Reviewed 8 of 8 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,385,2017-12-11T22:16:39Z,2017-12-12T11:51:01Z,2017-12-12T11:51:02Z,MERGED,True,48,2,3,https://github.com/begreeen,Flatsat mission changes,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/385,https://github.com/begreeen,1,https://github.com/PW-Sat2/PWSat2OBC/pull/385,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,385,2017-12-11T22:16:39Z,2017-12-12T11:51:01Z,2017-12-12T11:51:02Z,MERGED,True,48,2,3,https://github.com/begreeen,Flatsat mission changes,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/385,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/385#issuecomment-351029307,This change is,"Reviewed 3 of 3 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,386,2017-12-14T06:47:08Z,2017-12-16T11:42:10Z,2017-12-16T11:42:12Z,MERGED,True,198,236,8,https://github.com/Novakov,JustMocks/PyConsole <--> ZeroMQ bridge,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/386,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/386,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,386,2017-12-14T06:47:08Z,2017-12-16T11:42:10Z,2017-12-16T11:42:12Z,MERGED,True,198,236,8,https://github.com/Novakov,JustMocks/PyConsole <--> ZeroMQ bridge,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/386,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/386#issuecomment-351623679,This change is,"Infrastruktura testowa - symulator, spiecie z mockami",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,386,2017-12-14T06:47:08Z,2017-12-16T11:42:10Z,2017-12-16T11:42:12Z,MERGED,True,198,236,8,https://github.com/Novakov,JustMocks/PyConsole <--> ZeroMQ bridge,11,[],https://github.com/PW-Sat2/PWSat2OBC/pull/386,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/386#issuecomment-352178285,This change is,"Reviewed 8 of 8 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,387,2017-12-18T19:41:38Z,2017-12-22T13:13:16Z,2017-12-22T13:13:21Z,MERGED,True,19,4,3,https://github.com/Novakov,Fixed packet length for ExperimentFile,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/387,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/387,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,387,2017-12-18T19:41:38Z,2017-12-22T13:13:16Z,2017-12-22T13:13:21Z,MERGED,True,19,4,3,https://github.com/Novakov,Fixed packet length for ExperimentFile,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/387,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/387#issuecomment-352536852,This change is,"Reviewed 3 of 3 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,387,2017-12-18T19:41:38Z,2017-12-22T13:13:16Z,2017-12-22T13:13:21Z,MERGED,True,19,4,3,https://github.com/Novakov,Fixed packet length for ExperimentFile,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/387,https://github.com/Novakov,3,https://github.com/PW-Sat2/PWSat2OBC/pull/387#issuecomment-353273994,This change is,Sprawdzi parsowanie plikw eksperymentw,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,388,2018-01-11T09:10:44Z,2018-01-11T09:43:00Z,2018-01-11T09:43:02Z,MERGED,True,7,3,1,https://github.com/Novakov,Just-Mocks: option do disable ZeroMQ,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/388,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/388,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,388,2018-01-11T09:10:44Z,2018-01-11T09:43:00Z,2018-01-11T09:43:02Z,MERGED,True,7,3,1,https://github.com/Novakov,Just-Mocks: option do disable ZeroMQ,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/388,https://github.com/zaq32,2,https://github.com/PW-Sat2/PWSat2OBC/pull/388#issuecomment-356872688,This change is,"Reviewed 1 of 1 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,389,2018-03-05T19:07:40Z,2018-03-22T18:21:19Z,2018-03-22T18:21:21Z,MERGED,True,40,1,5,https://github.com/begreeen,More terminal commands in python,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/389,https://github.com/begreeen,1,https://github.com/PW-Sat2/PWSat2OBC/pull/389,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,389,2018-03-05T19:07:40Z,2018-03-22T18:21:19Z,2018-03-22T18:21:21Z,MERGED,True,40,1,5,https://github.com/begreeen,More terminal commands in python,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/389,https://github.com/tom4r,2,https://github.com/PW-Sat2/PWSat2OBC/pull/389#issuecomment-370537752,This change is,"Reviewed 5 of 5 files at r1.
Review status: all files reviewed at latest revision, 3 unresolved discussions.

integration_tests/obc/flash.py, line 4 at r1 (raw file):

import re

class FLASHMixin(OBCMixin):

I don't like the uppercase Flash - it is not abbreviation.

integration_tests/obc/flash.py, line 19 at r1 (raw file):

    @decode_return(_parse_testflash)
    @command(""testflash"")
    def test_flash(self, index):

Is the index argument used?

integration_tests/obc/imtq.py, line 33 at r1 (raw file):

    @decode_return(_parse_lines_to_array)
    @command(""imtq PerformSelfTest 0"")

Please dehardcode 0
untested example:
@command(""imtq PerformSelfTest {0}"")
def perform_self_test(self, fix=0):

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,389,2018-03-05T19:07:40Z,2018-03-22T18:21:19Z,2018-03-22T18:21:21Z,MERGED,True,40,1,5,https://github.com/begreeen,More terminal commands in python,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/389,https://github.com/tom4r,3,https://github.com/PW-Sat2/PWSat2OBC/pull/389#issuecomment-370546848,This change is,"Reviewed 3 of 3 files at r2.
Review status: all files reviewed at latest revision, 1 unresolved discussion.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,389,2018-03-05T19:07:40Z,2018-03-22T18:21:19Z,2018-03-22T18:21:21Z,MERGED,True,40,1,5,https://github.com/begreeen,More terminal commands in python,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/389,https://github.com/begreeen,4,https://github.com/PW-Sat2/PWSat2OBC/pull/389#issuecomment-374718056,This change is,"Review status: 4 of 5 files reviewed at latest revision, 3 unresolved discussions.

integration_tests/obc/flash.py, line 4 at r1 (raw file):
Previously, tom4r wrote
I don't like the uppercase Flash - it is not abbreviation.

Done.

integration_tests/obc/flash.py, line 19 at r1 (raw file):
Previously, tom4r wrote
Is the index argument used?

Done.

integration_tests/obc/imtq.py, line 33 at r1 (raw file):
Previously, tom4r wrote
Please dehardcode 0
untested example:
@command(""imtq PerformSelfTest {0}"")
def perform_self_test(self, fix=0):

Done.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,389,2018-03-05T19:07:40Z,2018-03-22T18:21:19Z,2018-03-22T18:21:21Z,MERGED,True,40,1,5,https://github.com/begreeen,More terminal commands in python,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/389,https://github.com/tom4r,5,https://github.com/PW-Sat2/PWSat2OBC/pull/389#issuecomment-374750898,This change is,"Reviewed 1 of 1 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,389,2018-03-05T19:07:40Z,2018-03-22T18:21:19Z,2018-03-22T18:21:21Z,MERGED,True,40,1,5,https://github.com/begreeen,More terminal commands in python,4,[],https://github.com/PW-Sat2/PWSat2OBC/pull/389,https://github.com/Novakov,6,https://github.com/PW-Sat2/PWSat2OBC/pull/389#issuecomment-375409316,This change is,"Reviewed 2 of 5 files at r1, 2 of 3 files at r2, 1 of 1 files at r3.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,390,2018-05-01T16:16:22Z,2018-05-07T08:14:16Z,2018-05-07T08:14:17Z,MERGED,True,20,25,1,https://github.com/zaq32,[integration_tests] Fix response_frames package initialization/exports.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/390,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/390,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,390,2018-05-01T16:16:22Z,2018-05-07T08:14:16Z,2018-05-07T08:14:17Z,MERGED,True,20,25,1,https://github.com/zaq32,[integration_tests] Fix response_frames package initialization/exports.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/390,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/390#issuecomment-385713162,This change is,"Reviewed 1 of 1 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,391,2018-05-25T10:33:47Z,2018-05-25T11:03:44Z,2018-05-25T11:03:46Z,MERGED,True,1,1,1,https://github.com/Novakov,Point eigen lib to PW-Sat2 fork,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/391,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/391,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,391,2018-05-25T10:33:47Z,2018-05-25T11:03:44Z,2018-05-25T11:03:46Z,MERGED,True,1,1,1,https://github.com/Novakov,Point eigen lib to PW-Sat2 fork,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/391,https://github.com/mandrek44,2,https://github.com/PW-Sat2/PWSat2OBC/pull/391#issuecomment-392013671,This change is,"Review status: 0 of 1 files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,391,2018-05-25T10:33:47Z,2018-05-25T11:03:44Z,2018-05-25T11:03:46Z,MERGED,True,1,1,1,https://github.com/Novakov,Point eigen lib to PW-Sat2 fork,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/391,https://github.com/zaq32,3,https://github.com/PW-Sat2/PWSat2OBC/pull/391#issuecomment-392019088,This change is,"Reviewed 1 of 1 files at r1.
Review status: all files reviewed at latest revision, all discussions resolved.

Comments from Reviewable",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,392,2018-07-21T15:08:33Z,2018-10-18T09:52:12Z,2018-10-18T09:52:14Z,MERGED,True,25,2,1,https://github.com/tom4r,Linked Emulator to GnuRadio COM Mock,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/392,https://github.com/tom4r,1,https://github.com/PW-Sat2/PWSat2OBC/pull/392,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,393,2018-09-07T06:33:10Z,2018-09-07T08:22:13Z,2018-09-07T08:22:15Z,MERGED,True,9,4,1,https://github.com/orestesgaolin,Update Readme.md,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/393,https://github.com/orestesgaolin,1,https://github.com/PW-Sat2/PWSat2OBC/pull/393,"Add PW-Sat2 description and fix PW-Sat2 name


This change is","Add PW-Sat2 description and fix PW-Sat2 name


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,394,2018-10-24T16:29:34Z,2018-11-05T06:57:04Z,2018-11-05T06:57:05Z,MERGED,True,121,48,12,https://github.com/Novakov,Beacon view,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/394,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/394,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,395,2018-11-05T06:58:32Z,2018-11-05T19:30:18Z,2018-11-05T19:30:21Z,MERGED,True,52,54,15,https://github.com/zaq32,Unify correlation_id handling in all telecommands.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/395,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/395,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,396,2018-11-08T07:04:45Z,2018-11-08T15:46:42Z,2018-11-08T15:46:46Z,MERGED,True,5,3,3,https://github.com/Novakov,Export BeaconFrame from Python devices package,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/396,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/396,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,397,2018-11-08T17:24:22Z,2018-11-08T18:31:05Z,2018-11-08T18:31:08Z,MERGED,True,25,4,1,https://github.com/Novakov,Validate beacon ranges,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/397,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/397,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,397,2018-11-08T17:24:22Z,2018-11-08T18:31:05Z,2018-11-08T18:31:08Z,MERGED,True,25,4,1,https://github.com/Novakov,Validate beacon ranges,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/397,https://github.com/Novakov,2,https://github.com/PW-Sat2/PWSat2OBC/pull/397#issuecomment-437085604,This change is,5 najwaniejszych informacji dla OPERu wywietlanych w stringu beacona,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,398,2018-11-12T08:19:01Z,2018-11-12T17:03:28Z,2018-11-12T17:03:29Z,MERGED,True,4,3,2,https://github.com/zaq32,Minor telecommand fixes,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/398,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/398,"Ensure that RawI2C command follows convention regarding the correllation_id


This change is","Ensure that RawI2C command follows convention regarding the correllation_id


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,399,2018-11-13T18:35:31Z,2018-11-13T18:47:49Z,2018-11-13T18:47:52Z,MERGED,True,16,17,4,https://github.com/zaq32,Minor telecommand updates,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/399,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/399,"Most importantly update time related telecommands to allow access to unencoded parameters.


This change is","Most importantly update time related telecommands to allow access to unencoded parameters.


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,400,2018-11-21T15:09:48Z,2018-11-21T18:17:59Z,2018-11-21T18:18:02Z,MERGED,True,9,6,2,https://github.com/begreeen,Allow setting of non-default GRC host/port in zmq device mock adapter,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/400,https://github.com/begreeen,1,https://github.com/PW-Sat2/PWSat2OBC/pull/400,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,400,2018-11-21T15:09:48Z,2018-11-21T18:17:59Z,2018-11-21T18:18:02Z,MERGED,True,9,6,2,https://github.com/begreeen,Allow setting of non-default GRC host/port in zmq device mock adapter,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/400,https://github.com/begreeen,2,https://github.com/PW-Sat2/PWSat2OBC/pull/400#issuecomment-440727502,This change is,"integration_tests/emulator/comm_zmq_adapter.py, line 26 at r1 (raw file):
Previously, Novakov (Maciej T. Nowak) wrote
Allow user to give full url, don't build it from parts

Can't see usage in our cases, but I added this. However I will be more frustrating when running just mocks (need to remember about   tcp://)",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,400,2018-11-21T15:09:48Z,2018-11-21T18:17:59Z,2018-11-21T18:18:02Z,MERGED,True,9,6,2,https://github.com/begreeen,Allow setting of non-default GRC host/port in zmq device mock adapter,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/400,https://github.com/begreeen,3,https://github.com/PW-Sat2/PWSat2OBC/pull/400#issuecomment-440727529,This change is,"integration_tests/emulator/comm_zmq_adapter.py, line 26 at r1 (raw file):
Previously, begreeen (Micha Gumiela) wrote
Can't see usage in our cases, but I added this. However I will be more frustrating when running just mocks (need to remember about   tcp://)

Done.",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,401,2018-11-21T21:32:25Z,2018-11-23T10:38:35Z,2018-11-23T10:38:37Z,MERGED,True,57,14,3,https://github.com/begreeen,PER simulation,7,[],https://github.com/PW-Sat2/PWSat2OBC/pull/401,https://github.com/begreeen,1,https://github.com/PW-Sat2/PWSat2OBC/pull/401,"adds uplink_per and downlink_per parameters to just_mocks in order to simulate packet error rate.



This change is","adds uplink_per and downlink_per parameters to just_mocks in order to simulate packet error rate.



This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,402,2018-11-24T13:35:31Z,2018-11-24T14:35:41Z,2018-11-24T14:35:42Z,MERGED,True,1,1,1,https://github.com/begreeen,add empty line after beacon,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/402,https://github.com/begreeen,1,https://github.com/PW-Sat2/PWSat2OBC/pull/402,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,403,2018-12-04T21:25:48Z,2018-12-05T07:45:23Z,2018-12-05T07:45:24Z,MERGED,True,5,2,2,https://github.com/zaq32,Add possibility to use enumaration as parameter of SetBitrate telecomand,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/403,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/403,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,404,2018-12-05T09:59:25Z,2018-12-05T17:22:10Z,2018-12-08T17:18:24Z,MERGED,True,3,0,1,https://github.com/mandrek44,Correlation id in success frames,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/404,https://github.com/mandrek44,1,https://github.com/PW-Sat2/PWSat2OBC/pull/404,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,405,2018-12-05T23:05:24Z,2018-12-06T00:13:28Z,2018-12-08T17:18:21Z,MERGED,True,5,5,4,https://github.com/ggajoch,Remove address from frame print,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/405,https://github.com/ggajoch,1,https://github.com/PW-Sat2/PWSat2OBC/pull/405,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,406,2018-12-06T12:36:48Z,2018-12-06T22:28:18Z,2018-12-06T22:28:20Z,MERGED,True,21,1,1,https://github.com/ggajoch,Print current experiment in beacon,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/406,https://github.com/ggajoch,1,https://github.com/PW-Sat2/PWSat2OBC/pull/406,"Example:
 	BP VOLT 7.53 V, 7.54 V
 	BP TEMP 8.81 C, 8.62 C, 11.10 C
 	COMM PA TEMP NOW 25.10 C LAST 28.76 C
 	OBC CRC 0xBFFD
 	GYRO UNCAL -1.74 deg/sec, -3.69 deg/sec, 1.60 deg/sec
 !!!!!	EXPERIMENT SunS Failure


This change is","Example:
 	BP VOLT 7.53 V, 7.54 V
 	BP TEMP 8.81 C, 8.62 C, 11.10 C
 	COMM PA TEMP NOW 25.10 C LAST 28.76 C
 	OBC CRC 0xBFFD
 	GYRO UNCAL -1.74 deg/sec, -3.69 deg/sec, 1.60 deg/sec
 !!!!!	EXPERIMENT SunS Failure


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,407,2018-12-06T13:39:09Z,2018-12-07T22:58:41Z,2018-12-07T22:58:44Z,MERGED,True,5,4,1,https://github.com/zaq32,Fix python projection of experiment iteration result enumeration.,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/407,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/407,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,408,2018-12-06T22:07:02Z,2018-12-08T08:08:47Z,2018-12-08T08:08:49Z,MERGED,True,3,3,1,https://github.com/ggajoch,WX imported only when emulator initializes,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/408,https://github.com/ggajoch,1,https://github.com/PW-Sat2/PWSat2OBC/pull/408,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,409,2018-12-07T00:36:56Z,2018-12-07T22:02:30Z,2018-12-07T22:02:33Z,MERGED,True,32,12,1,https://github.com/ggajoch,Add MCU temp and 3.3 current to beacon,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/409,https://github.com/ggajoch,1,https://github.com/PW-Sat2/PWSat2OBC/pull/409,"BeaconFrame
 	BP VOLT 7.25 V, 7.21 V
 	BP TEMP 18.44 C, 18.25 C, 17.20 C
 	COMM PA TEMP NOW 21.00 C LAST 20.62 C
 	OBC CRC 0xBFFD
 	GYRO UNCAL -1.18 deg/sec, -3.34 deg/sec, 0.77 deg/sec
 	EXPERIMENT None
 !!!!!	MCU TEMP 31.51 C
 !!!!!	3V3 DISTR CURRENT 162 mA

BeaconFrame
 	BP VOLT 7.25 V, 7.29 V
 	BP TEMP 16.81 C, 16.56 C, 15.70 C
 	COMM PA TEMP NOW 20.67 C LAST 22.42 C
 	OBC CRC 0xBFFD
 	GYRO UNCAL -1.39 deg/sec, -3.20 deg/sec, 1.04 deg/sec
 	EXPERIMENT None
 	MCU TEMP 11.98 C
 	3V3 DISTR CURRENT 35 mA,



This change is","BeaconFrame
 	BP VOLT 7.25 V, 7.21 V
 	BP TEMP 18.44 C, 18.25 C, 17.20 C
 	COMM PA TEMP NOW 21.00 C LAST 20.62 C
 	OBC CRC 0xBFFD
 	GYRO UNCAL -1.18 deg/sec, -3.34 deg/sec, 0.77 deg/sec
 	EXPERIMENT None
 !!!!!	MCU TEMP 31.51 C
 !!!!!	3V3 DISTR CURRENT 162 mA

BeaconFrame
 	BP VOLT 7.25 V, 7.29 V
 	BP TEMP 16.81 C, 16.56 C, 15.70 C
 	COMM PA TEMP NOW 20.67 C LAST 22.42 C
 	OBC CRC 0xBFFD
 	GYRO UNCAL -1.39 deg/sec, -3.20 deg/sec, 1.04 deg/sec
 	EXPERIMENT None
 	MCU TEMP 11.98 C
 	3V3 DISTR CURRENT 35 mA,



This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,410,2018-12-08T11:33:15Z,2018-12-08T13:00:20Z,2018-12-08T13:00:22Z,MERGED,True,11,10,1,https://github.com/ggajoch,Print CRC only when invalid,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/410,https://github.com/ggajoch,1,https://github.com/PW-Sat2/PWSat2OBC/pull/410,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,411,2018-12-09T18:05:37Z,2018-12-09T18:25:32Z,2018-12-09T18:25:55Z,MERGED,True,5,6,1,https://github.com/zaq32,Update RawI2C telecommand.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/411,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/411,"Fix printing this command
Keep this object in a source format instead of partly serialized one.



This change is","Fix printing this command
Keep this object in a source format instead of partly serialized one.



This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,412,2018-12-13T18:40:38Z,2018-12-13T18:47:27Z,2018-12-13T18:47:28Z,MERGED,True,8,0,1,https://github.com/tom4r,Added COMM RX Current to Beacon Parser summary.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/412,https://github.com/tom4r,1,https://github.com/PW-Sat2/PWSat2OBC/pull/412,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,413,2018-12-17T16:39:30Z,2018-12-17T17:05:19Z,2018-12-17T17:05:20Z,MERGED,True,73,0,1,https://github.com/ggajoch,Radfet parser,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/413,https://github.com/ggajoch,1,https://github.com/PW-Sat2/PWSat2OBC/pull/413,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,414,2019-01-02T13:37:13Z,2019-01-02T13:50:10Z,2019-01-02T13:50:11Z,MERGED,True,3,1,1,https://github.com/tom4r,Added transmitter bitrate to parsed beacon.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/414,https://github.com/tom4r,1,https://github.com/PW-Sat2/PWSat2OBC/pull/414,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,415,2019-01-22T18:35:29Z,2019-01-22T18:51:28Z,2019-01-22T18:51:28Z,MERGED,True,1,1,1,https://github.com/dernasherbrezon,fix number of bits,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/415,https://github.com/dernasherbrezon,1,https://github.com/PW-Sat2/PWSat2OBC/pull/415,"Hi,
Found typo in bit count.


This change is","Hi,
Found typo in bit count.


This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,417,2019-02-13T19:02:15Z,2019-02-13T19:03:36Z,2019-02-13T19:03:40Z,MERGED,True,1,1,1,https://github.com/tom4r,Fixed integer division in Gyro temperature parsing.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/417,https://github.com/tom4r,1,https://github.com/PW-Sat2/PWSat2OBC/pull/417,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,418,2019-03-14T14:26:51Z,2019-03-14T14:27:23Z,2019-03-15T07:59:44Z,CLOSED,False,2359,1537,20,https://github.com/kfazi,Deep sleep erase flash,13,[],https://github.com/PW-Sat2/PWSat2OBC/pull/418,https://github.com/kfazi,1,https://github.com/PW-Sat2/PWSat2OBC/pull/418,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,419,2019-03-14T14:28:14Z,2019-03-14T14:56:59Z,2019-03-15T07:59:44Z,CLOSED,False,91,8,5,https://github.com/kfazi,Added erase flash,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/419,https://github.com/kfazi,1,https://github.com/PW-Sat2/PWSat2OBC/pull/419,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,420,2019-03-15T03:12:36Z,2019-03-16T00:08:38Z,2019-03-16T00:08:40Z,MERGED,True,14,0,2,https://github.com/ggajoch,Nicer view to OPER of software upload commands,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/420,https://github.com/ggajoch,1,https://github.com/PW-Sat2/PWSat2OBC/pull/420,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,421,2019-03-15T16:07:01Z,2019-03-15T16:14:50Z,2019-03-15T16:14:51Z,MERGED,True,7,1,2,https://github.com/mandrek44,Resetting rebootToNormalCounter when receiving Comm frame,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/421,https://github.com/mandrek44,1,https://github.com/PW-Sat2/PWSat2OBC/pull/421,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,422,2019-03-15T16:49:55Z,2019-03-15T16:54:22Z,2019-03-15T16:54:24Z,MERGED,True,10,5,2,https://github.com/mandrek44,Beacon with rebootToNormalValue,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/422,https://github.com/mandrek44,1,https://github.com/PW-Sat2/PWSat2OBC/pull/422,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,423,2019-03-15T17:23:31Z,2019-03-15T17:35:50Z,2019-03-15T17:35:52Z,MERGED,True,2,2,1,https://github.com/mandrek44,Updated Deep Sleep parameters,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/423,https://github.com/mandrek44,1,https://github.com/PW-Sat2/PWSat2OBC/pull/423,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,424,2019-03-15T19:30:29Z,2019-03-15T22:02:55Z,2019-03-15T22:02:56Z,MERGED,True,44,9,4,https://github.com/Novakov,Acmp/sram latchup,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/424,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/424,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,425,2019-03-16T11:54:15Z,2019-03-16T12:04:58Z,2019-03-16T12:04:59Z,MERGED,True,84,69,5,https://github.com/Novakov,Reduce DeepSleep size,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/425,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/425,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,426,2019-03-16T11:59:10Z,2019-03-16T13:27:34Z,2019-03-16T13:27:37Z,MERGED,True,305,20,4,https://github.com/tom4r,Comm security check.,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/426,https://github.com/tom4r,1,https://github.com/PW-Sat2/PWSat2OBC/pull/426,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,427,2019-03-16T17:57:12Z,2019-03-16T22:56:54Z,2019-03-16T22:56:57Z,MERGED,True,79,0,1,https://github.com/tom4r,Upload frame error representations,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/427,https://github.com/tom4r,1,https://github.com/PW-Sat2/PWSat2OBC/pull/427,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,428,2019-03-17T03:14:44Z,2019-03-17T07:40:55Z,2019-03-17T07:41:00Z,MERGED,True,30,9,3,https://github.com/ggajoch,Spinlock for timeout operation,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/428,https://github.com/ggajoch,1,https://github.com/PW-Sat2/PWSat2OBC/pull/428,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,429,2019-03-17T08:23:07Z,2019-03-17T08:30:37Z,2019-03-17T08:30:39Z,MERGED,True,35,23,3,https://github.com/Novakov,Cancel N25Q waiting,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/429,https://github.com/Novakov,1,https://github.com/PW-Sat2/PWSat2OBC/pull/429,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,430,2019-03-18T12:31:16Z,,2019-03-27T13:18:06Z,OPEN,False,97,51,22,https://github.com/zaq32,gcc 8.2 compatibility fixes.,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/430,https://github.com/zaq32,1,https://github.com/PW-Sat2/PWSat2OBC/pull/430,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,430,2019-03-18T12:31:16Z,,2019-03-27T13:18:06Z,OPEN,False,97,51,22,https://github.com/zaq32,gcc 8.2 compatibility fixes.,2,[],https://github.com/PW-Sat2/PWSat2OBC/pull/430,https://github.com/ggajoch,2,https://github.com/PW-Sat2/PWSat2OBC/pull/430#issuecomment-473893027,This change is,"platforms/mcu/EngModel/settings.cmake, line 30 at r1 (raw file):

set (EIGEN_WARN_FIX ""-Wno-int-in-bool-context"")
set (RAPID_CHECK_WARN_FIX ""-Wno-shift-negative-value"")

AFAIR bumping RadpidCheck solves this issue",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,431,2019-03-21T07:45:49Z,2019-03-21T07:57:50Z,2019-03-21T07:57:51Z,MERGED,True,23,0,1,https://github.com/tom4r,Added Deep Sleep beacon parser.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/431,https://github.com/tom4r,1,https://github.com/PW-Sat2/PWSat2OBC/pull/431,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,432,2019-06-02T10:23:10Z,2019-08-10T19:16:09Z,2019-08-10T19:16:11Z,MERGED,True,5,5,1,https://github.com/tom4r,Lowered temperature warning to -4 Celsius in Beacon Parser.,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/432,https://github.com/tom4r,1,https://github.com/PW-Sat2/PWSat2OBC/pull/432,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,433,2020-10-17T16:27:58Z,2020-10-20T05:32:09Z,2020-10-20T05:32:11Z,MERGED,True,50,12,3,https://github.com/tom4r,Updated uploaders to new frames and frame fixes,3,[],https://github.com/PW-Sat2/PWSat2OBC/pull/433,https://github.com/tom4r,1,https://github.com/PW-Sat2/PWSat2OBC/pull/433,"Grafana Uploader compatibility with Little Oryx.
Program Upload response frame fixes.
LO Beacon updates.



This change is","Grafana Uploader compatibility with Little Oryx.
Program Upload response frame fixes.
LO Beacon updates.



This change is",True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,434,2020-10-21T15:34:30Z,2020-10-21T16:45:28Z,2020-10-21T18:46:50Z,MERGED,True,2,0,1,https://github.com/tom4r,Added Correlation ID to Memory Frame representation,1,[],https://github.com/PW-Sat2/PWSat2OBC/pull/434,https://github.com/tom4r,1,https://github.com/PW-Sat2/PWSat2OBC/pull/434,This change is,This change is,True,{}
PW-Sat2/PWSat2OBC,https://github.com/PW-Sat2/PWSat2OBC,435,2022-01-21T19:43:57Z,,2022-01-21T19:44:04Z,OPEN,False,1,1,1,https://github.com/apps/dependabot,Bump ipython from 5.5.0 to 7.16.3 in /integration_tests,1,['dependencies'],https://github.com/PW-Sat2/PWSat2OBC/pull/435,https://github.com/apps/dependabot,1,https://github.com/PW-Sat2/PWSat2OBC/pull/435,"Bumps ipython from 5.5.0 to 7.16.3.

Commits

d43c7c7 release 7.16.3
5fa1e40 Merge pull request from GHSA-pq7m-3gw7-gq5x
8df8971 back to dev
9f477b7 release 7.16.2
138f266 bring back release helper from master branch
5aa3634 Merge pull request #13341 from meeseeksmachine/auto-backport-of-pr-13335-on-7...
bcae8e0 Backport PR #13335: What's new 7.16.2
8fcdcd3 Pin Jedi to <0.17.2.
2486838 release 7.16.1
20bdc6f fix conda build
Additional commits viewable in compare view




Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting @dependabot rebase.


Dependabot commands and options

You can trigger Dependabot actions by commenting on this PR:

@dependabot rebase will rebase this PR
@dependabot recreate will recreate this PR, overwriting any edits that have been made to it
@dependabot merge will merge this PR after your CI passes on it
@dependabot squash and merge will squash and merge this PR after your CI passes on it
@dependabot cancel merge will cancel a previously requested merge and block automerging
@dependabot reopen will reopen this PR if it is closed
@dependabot close will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
@dependabot ignore this major version will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this minor version will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this dependency will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)
@dependabot use these labels will set the current labels as the default for future PRs for this repo and language
@dependabot use these reviewers will set the current reviewers as the default for future PRs for this repo and language
@dependabot use these assignees will set the current assignees as the default for future PRs for this repo and language
@dependabot use this milestone will set the current milestone as the default for future PRs for this repo and language

You can disable automated security fix PRs for this repo from the Security Alerts page.



This change is","Bumps ipython from 5.5.0 to 7.16.3.

Commits

d43c7c7 release 7.16.3
5fa1e40 Merge pull request from GHSA-pq7m-3gw7-gq5x
8df8971 back to dev
9f477b7 release 7.16.2
138f266 bring back release helper from master branch
5aa3634 Merge pull request #13341 from meeseeksmachine/auto-backport-of-pr-13335-on-7...
bcae8e0 Backport PR #13335: What's new 7.16.2
8fcdcd3 Pin Jedi to <0.17.2.
2486838 release 7.16.1
20bdc6f fix conda build
Additional commits viewable in compare view




Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting @dependabot rebase.


Dependabot commands and options

You can trigger Dependabot actions by commenting on this PR:

@dependabot rebase will rebase this PR
@dependabot recreate will recreate this PR, overwriting any edits that have been made to it
@dependabot merge will merge this PR after your CI passes on it
@dependabot squash and merge will squash and merge this PR after your CI passes on it
@dependabot cancel merge will cancel a previously requested merge and block automerging
@dependabot reopen will reopen this PR if it is closed
@dependabot close will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
@dependabot ignore this major version will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this minor version will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this dependency will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)
@dependabot use these labels will set the current labels as the default for future PRs for this repo and language
@dependabot use these reviewers will set the current reviewers as the default for future PRs for this repo and language
@dependabot use these assignees will set the current assignees as the default for future PRs for this repo and language
@dependabot use this milestone will set the current milestone as the default for future PRs for this repo and language

You can disable automated security fix PRs for this repo from the Security Alerts page.



This change is",True,{}
