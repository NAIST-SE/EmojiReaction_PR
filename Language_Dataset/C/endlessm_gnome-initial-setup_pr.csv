endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,121,2016-02-13T00:22:03Z,2016-02-13T01:44:17Z,2016-02-13T01:44:18Z,MERGED,True,1,0,1,https://github.com/rshuler,Add zh to LINGUAS,1,[],https://github.com/endlessm/gnome-initial-setup/pull/121,https://github.com/rshuler,1,https://github.com/endlessm/gnome-initial-setup/pull/121,"Fixes the missing symlink that was intended to provide the zh_CN
fallback translations for missing strings in zh_TW and zh_HK.
[endlessm/eos-shell#6381]","Fixes the missing symlink that was intended to provide the zh_CN
fallback translations for missing strings in zh_TW and zh_HK.
[endlessm/eos-shell#6381]",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,122,2016-03-17T23:09:14Z,2016-03-19T00:05:56Z,2016-03-19T00:05:58Z,MERGED,True,76,13,7,https://github.com/mcatanzaro,T3727,3,[],https://github.com/endlessm/gnome-initial-setup/pull/122,https://github.com/mcatanzaro,1,https://github.com/endlessm/gnome-initial-setup/pull/122,https://phabricator.endlessm.com/T3727,https://phabricator.endlessm.com/T3727,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,123,2016-03-22T23:55:46Z,2016-03-23T01:24:04Z,2016-03-23T01:24:05Z,MERGED,True,1,0,1,https://github.com/mcatanzaro,Initialize locales in existing user mode,1,[],https://github.com/endlessm/gnome-initial-setup/pull/123,https://github.com/mcatanzaro,1,https://github.com/endlessm/gnome-initial-setup/pull/123,"Since we don't run GTK+ anymore, we have to do this manually, else the
tutorial will always start in English.
https://phabricator.endlessm.com/T3727","Since we don't run GTK+ anymore, we have to do this manually, else the
tutorial will always start in English.
https://phabricator.endlessm.com/T3727",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,124,2016-04-14T15:31:01Z,2016-04-14T20:48:49Z,2016-04-14T20:48:52Z,MERGED,True,45,4,2,https://github.com/dsd,Factory dialog: show device-tree compatible string,1,[],https://github.com/endlessm/gnome-initial-setup/pull/124,https://github.com/dsd,1,https://github.com/endlessm/gnome-initial-setup/pull/124,"Useful on ARM, where the value of this string can be used to verify
that the right device tree is being used.
https://phabricator.endlessm.com/T11017","Useful on ARM, where the value of this string can be used to verify
that the right device tree is being used.
https://phabricator.endlessm.com/T11017",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,125,2016-05-16T14:20:39Z,2016-05-17T18:34:43Z,2016-05-17T18:34:45Z,MERGED,True,10,41,2,https://github.com/GeorgesStavracas,T11112,3,[],https://github.com/endlessm/gnome-initial-setup/pull/125,https://github.com/GeorgesStavracas,1,https://github.com/endlessm/gnome-initial-setup/pull/125,"This PR introduces the following changes:

The ""Skip WiFi Setup"" checkbox was moved above the list of networks, so it's always visible regardless of the number of hotspots
The vertical spacing between elements was improved
Instead of a plain black label, it now uses a placeholder in the listbox.

https://phabricator.endlessm.com/T11112","This PR introduces the following changes:

The ""Skip WiFi Setup"" checkbox was moved above the list of networks, so it's always visible regardless of the number of hotspots
The vertical spacing between elements was improved
Instead of a plain black label, it now uses a placeholder in the listbox.

https://phabricator.endlessm.com/T11112",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,126,2016-05-31T19:27:38Z,2016-05-31T19:31:04Z,2016-05-31T19:31:05Z,MERGED,True,1,1,1,https://github.com/GeorgesStavracas,language-chooser: compare rows correctly,1,[],https://github.com/endlessm/gnome-initial-setup/pull/126,https://github.com/GeorgesStavracas,1,https://github.com/endlessm/gnome-initial-setup/pull/126,"The current sorting function mistakenly tries to
compare row a with itself, instead of row a and b.
Fix that by properly gathering data from row a and b.
https://phabricator.endlessm.com/T11756","The current sorting function mistakenly tries to
compare row a with itself, instead of row a and b.
Fix that by properly gathering data from row a and b.
https://phabricator.endlessm.com/T11756",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,127,2016-06-08T03:15:23Z,2016-06-09T19:49:41Z,2016-06-09T19:49:43Z,MERGED,True,13,2,2,https://github.com/GeorgesStavracas,T11916,2,[],https://github.com/endlessm/gnome-initial-setup/pull/127,https://github.com/GeorgesStavracas,1,https://github.com/endlessm/gnome-initial-setup/pull/127,"This PR fixes:

A compile issue against recent libgweather
The sorting function being sensitive to accents and casefolding

https://phabricator.endlessm.com/T11916","This PR fixes:

A compile issue against recent libgweather
The sorting function being sensitive to accents and casefolding

https://phabricator.endlessm.com/T11916",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,127,2016-06-08T03:15:23Z,2016-06-09T19:49:41Z,2016-06-09T19:49:43Z,MERGED,True,13,2,2,https://github.com/GeorgesStavracas,T11916,2,[],https://github.com/endlessm/gnome-initial-setup/pull/127,https://github.com/mcatanzaro,2,https://github.com/endlessm/gnome-initial-setup/pull/127#issuecomment-224654199,"This PR fixes:

A compile issue against recent libgweather
The sorting function being sensitive to accents and casefolding

https://phabricator.endlessm.com/T11916","Great. CR pass, feel free to merge if you're done.",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,128,2016-06-28T21:07:48Z,2016-06-28T23:55:34Z,2016-06-28T23:55:36Z,MERGED,True,7,8,1,https://github.com/cosimoc,display: use common heuristic to determine if overscan is supported,1,[],https://github.com/endlessm/gnome-initial-setup/pull/128,https://github.com/cosimoc,1,https://github.com/endlessm/gnome-initial-setup/pull/128,https://phabricator.endlessm.com/T11995,https://phabricator.endlessm.com/T11995,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,129,2016-09-27T20:19:52Z,2016-10-04T18:30:12Z,2016-10-04T18:30:15Z,MERGED,True,681,1,18,https://github.com/GeorgesStavracas,T12547,6,[],https://github.com/endlessm/gnome-initial-setup/pull/129,https://github.com/GeorgesStavracas,1,https://github.com/endlessm/gnome-initial-setup/pull/129,https://phabricator.endlessm.com/T12547,https://phabricator.endlessm.com/T12547,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,130,2016-10-04T19:34:04Z,2016-10-04T19:35:34Z,2016-10-04T19:35:39Z,MERGED,True,2,0,1,https://github.com/GeorgesStavracas,Add new files to POTFILES.in,1,[],https://github.com/endlessm/gnome-initial-setup/pull/130,https://github.com/GeorgesStavracas,1,https://github.com/endlessm/gnome-initial-setup/pull/130,https://phabricator.endlessm.com/T12547,https://phabricator.endlessm.com/T12547,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,131,2016-10-04T23:20:41Z,2016-10-17T22:24:27Z,2016-10-17T22:24:29Z,MERGED,True,11665,11282,67,https://github.com/vickiniu,Adding Transifex languages from upstream GNOME translation,1,[],https://github.com/endlessm/gnome-initial-setup/pull/131,https://github.com/vickiniu,1,https://github.com/endlessm/gnome-initial-setup/pull/131,https://phabricator.endlessm.com/T13620,https://phabricator.endlessm.com/T13620,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,132,2016-10-07T12:23:03Z,2016-10-07T12:38:25Z,2016-10-07T12:38:27Z,MERGED,True,18,18,2,https://github.com/ramcq,"replace install{,er} with reformat{,ter}",1,[],https://github.com/endlessm/gnome-initial-setup/pull/132,https://github.com/ramcq,1,https://github.com/endlessm/gnome-initial-setup/pull/132,"Update strings and function names to capture the new terminology for replacing
your OS entirely with Endless: reformat. This should be less ambiguous than
having two user-visible processes known as install, the Windows dual-boot
process (non-destructive, reversible) and the Linux reformat process (very
destructive, non-reversible).
https://phabricator.endlessm.com/T13654","Update strings and function names to capture the new terminology for replacing
your OS entirely with Endless: reformat. This should be less ambiguous than
having two user-visible processes known as install, the Windows dual-boot
process (non-destructive, reversible) and the Linux reformat process (very
destructive, non-reversible).
https://phabricator.endlessm.com/T13654",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,133,2016-10-10T17:18:29Z,2016-10-13T16:12:03Z,2016-10-13T16:12:05Z,MERGED,True,65,14,4,https://github.com/GeorgesStavracas,T12547,6,[],https://github.com/endlessm/gnome-initial-setup/pull/133,https://github.com/GeorgesStavracas,1,https://github.com/endlessm/gnome-initial-setup/pull/133,"This PR implements the latest comments on issue T12547
https://phabricator.endlessm.com/T12547","This PR implements the latest comments on issue T12547
https://phabricator.endlessm.com/T12547",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,134,2016-10-10T17:47:22Z,2016-10-14T14:44:58Z,2016-10-18T08:54:48Z,MERGED,True,1,0,1,https://github.com/wjt,T12548: depend on eos-installer,1,[],https://github.com/endlessm/gnome-initial-setup/pull/134,https://github.com/wjt,1,https://github.com/endlessm/gnome-initial-setup/pull/134,https://phabricator.endlessm.com/T12548,https://phabricator.endlessm.com/T12548,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,135,2016-10-14T12:05:01Z,2016-10-14T15:17:16Z,2016-10-14T15:17:18Z,MERGED,True,323,38,11,https://github.com/wjt,T12548: live-chooser: add eos-installer icon to desktop & taskbar,4,[],https://github.com/endlessm/gnome-initial-setup/pull/135,https://github.com/wjt,1,https://github.com/endlessm/gnome-initial-setup/pull/135,"This installs the eos-installer.desktop file in
~live/.local/share/applications, and munges the live user's GSettings such
that the installer is the first icon on the desktop & taskbar.
This supersedes:

endlessm/eos-shell-content#156
endlessm/eos-desktop#176

The problem with that approach is that it depends on the current situation
where we do not make eos-installer visible to normal user sessions. Were we to
take that approach, and then in future make it available, it would appear on
users' desktops unbidden.
https://phabricator.endlessm.com/T12548","This installs the eos-installer.desktop file in
~live/.local/share/applications, and munges the live user's GSettings such
that the installer is the first icon on the desktop & taskbar.
This supersedes:

endlessm/eos-shell-content#156
endlessm/eos-desktop#176

The problem with that approach is that it depends on the current situation
where we do not make eos-installer visible to normal user sessions. Were we to
take that approach, and then in future make it available, it would appear on
users' desktops unbidden.
https://phabricator.endlessm.com/T12548",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,136,2016-10-27T15:00:01Z,2016-11-01T15:55:55Z,2016-11-01T17:27:25Z,CLOSED,False,13,2,2,https://github.com/wjt,eula: disable metrics on live systems,1,[],https://github.com/endlessm/gnome-initial-setup/pull/136,https://github.com/wjt,1,https://github.com/endlessm/gnome-initial-setup/pull/136,https://phabricator.endlessm.com/T13890,https://phabricator.endlessm.com/T13890,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,136,2016-10-27T15:00:01Z,2016-11-01T15:55:55Z,2016-11-01T17:27:25Z,CLOSED,False,13,2,2,https://github.com/wjt,eula: disable metrics on live systems,1,[],https://github.com/endlessm/gnome-initial-setup/pull/136,https://github.com/wjt,2,https://github.com/endlessm/gnome-initial-setup/pull/136#issuecomment-257605361,https://phabricator.endlessm.com/T13890,See endlessm/eos-metrics-instrumentation#62 for another approach to metrics on live systems.,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,137,2016-10-31T19:39:24Z,2016-10-31T21:00:38Z,2016-10-31T21:00:40Z,MERGED,True,48,18,1,https://github.com/joaquimrocha,eos-setup-live-user: Disallow updates on GNOME Software,1,[],https://github.com/endlessm/gnome-initial-setup/pull/137,https://github.com/joaquimrocha,1,https://github.com/endlessm/gnome-initial-setup/pull/137,"For allowing to update the settings of a component that is not the
shell these changes also reimplement how the gsettings overrides
are implemented inside eos-setup-live-user. It should now be easy to
add any new modules that need their gsettings overridden.
https://phabricator.endlessm.com/T13950","For allowing to update the settings of a component that is not the
shell these changes also reimplement how the gsettings overrides
are implemented inside eos-setup-live-user. It should now be easy to
add any new modules that need their gsettings overridden.
https://phabricator.endlessm.com/T13950",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,138,2016-11-02T02:52:50Z,2016-11-02T18:14:31Z,2016-11-02T18:14:32Z,MERGED,True,10,25,1,https://github.com/GeorgesStavracas,endless-eula: put the metrics label inside the checkbutton,1,[],https://github.com/endlessm/gnome-initial-setup/pull/138,https://github.com/GeorgesStavracas,1,https://github.com/endlessm/gnome-initial-setup/pull/138,"The metrics label is being treated separatedly of the check button,
which makes it not change the checkbutton state when the label is
clicked.
This behavior breaks the standard, expected behavior and can be very
frustrating, specially when the user doesn't have professional skills
with the mouse.
Fix that by putting the label inside the checkbutton.
https://phabricator.endlessm.com/T13578","The metrics label is being treated separatedly of the check button,
which makes it not change the checkbutton state when the label is
clicked.
This behavior breaks the standard, expected behavior and can be very
frustrating, specially when the user doesn't have professional skills
with the mouse.
Fix that by putting the label inside the checkbutton.
https://phabricator.endlessm.com/T13578",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,139,2016-11-04T20:30:19Z,2016-11-05T08:35:27Z,2017-05-02T10:16:53Z,MERGED,True,37,2,3,https://github.com/GeorgesStavracas,T13578,4,[],https://github.com/endlessm/gnome-initial-setup/pull/139,https://github.com/GeorgesStavracas,1,https://github.com/endlessm/gnome-initial-setup/pull/139,"This PR:

Enforces a focus chain
Fix the alignment of various UI widgets at the Live Chooser page
Allows using Enter to move to the next page when all the fields are valid

https://phabricator.endlessm.com/T13578","This PR:

Enforces a focus chain
Fix the alignment of various UI widgets at the Live Chooser page
Allows using Enter to move to the next page when all the fields are valid

https://phabricator.endlessm.com/T13578",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,140,2016-11-08T18:09:58Z,2016-11-09T10:13:42Z,2016-11-09T10:14:40Z,MERGED,True,13,2,2,https://github.com/wjt,eula: disable metrics on live systems,1,[],https://github.com/endlessm/gnome-initial-setup/pull/140,https://github.com/wjt,1,https://github.com/endlessm/gnome-initial-setup/pull/140,"Unfortunately, there are changes on master which prevent the same patch applying cleanly to both, so here is a eos3.0-specific patch.
https://phabricator.endlessm.com/T13890","Unfortunately, there are changes on master which prevent the same patch applying cleanly to both, so here is a eos3.0-specific patch.
https://phabricator.endlessm.com/T13890",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,141,2016-11-08T18:17:29Z,2016-11-09T10:13:43Z,2016-11-09T10:14:42Z,MERGED,True,12,1,2,https://github.com/wjt,eula: disable metrics on live systems,1,[],https://github.com/endlessm/gnome-initial-setup/pull/141,https://github.com/wjt,1,https://github.com/endlessm/gnome-initial-setup/pull/141,"This is the master counterpart of
#140
https://phabricator.endlessm.com/T13890","This is the master counterpart of
#140
https://phabricator.endlessm.com/T13890",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,142,2016-11-16T13:39:52Z,2016-11-16T16:08:24Z,2016-11-16T16:09:20Z,MERGED,True,16,3,1,https://github.com/GeorgesStavracas,network: skip page when ethernet cable is available,1,[],https://github.com/endlessm/gnome-initial-setup/pull/142,https://github.com/GeorgesStavracas,1,https://github.com/endlessm/gnome-initial-setup/pull/142,"When showing the Network page on the initial setup,
the list of Wi-Fi connections is displayed even when
there's an ethernet cable available.
Fix that by skipping the page when any ethernet device
if detected.
https://phabricator.endlessm.com/T13749","When showing the Network page on the initial setup,
the list of Wi-Fi connections is displayed even when
there's an ethernet cable available.
Fix that by skipping the page when any ethernet device
if detected.
https://phabricator.endlessm.com/T13749",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,143,2016-11-21T20:59:50Z,2016-12-06T16:30:09Z,2016-12-06T16:30:11Z,MERGED,True,69,17,1,https://github.com/GeorgesStavracas,T13749,2,[],https://github.com/endlessm/gnome-initial-setup/pull/143,https://github.com/GeorgesStavracas,1,https://github.com/endlessm/gnome-initial-setup/pull/143,https://phabricator.endlessm.com/T13749,https://phabricator.endlessm.com/T13749,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,144,2016-12-14T04:03:56Z,2016-12-14T23:03:17Z,2016-12-14T23:03:19Z,MERGED,True,18,22,1,https://github.com/mcatanzaro,T14565,2,[],https://github.com/endlessm/gnome-initial-setup/pull/144,https://github.com/mcatanzaro,1,https://github.com/endlessm/gnome-initial-setup/pull/144,https://phabricator.endlessm.com/T14565,https://phabricator.endlessm.com/T14565,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,145,2017-01-10T16:06:40Z,2017-01-10T16:19:17Z,2017-01-10T16:20:09Z,MERGED,True,6,4,1,https://github.com/GeorgesStavracas,network: populate wifi list even when already connected,1,[],https://github.com/endlessm/gnome-initial-setup/pull/145,https://github.com/GeorgesStavracas,1,https://github.com/endlessm/gnome-initial-setup/pull/145,"When the Initial Setup starts up and we detect a working connection,
the WiFi list isn't populated. If it happens that the computer is
disconnected before reaching the network page, we show the page again,
but nothing is set so the user effectively gets stuck in that page
forever.
Fix that by setting up the wifi device even if there's a connection
available.
https://phabricator.endlessm.com/T13749","When the Initial Setup starts up and we detect a working connection,
the WiFi list isn't populated. If it happens that the computer is
disconnected before reaching the network page, we show the page again,
but nothing is set so the user effectively gets stuck in that page
forever.
Fix that by setting up the wifi device even if there's a connection
available.
https://phabricator.endlessm.com/T13749",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,146,2017-01-27T09:57:16Z,2017-03-02T07:46:16Z,2017-03-02T09:53:27Z,MERGED,True,1077,1077,82,https://github.com/pwithnall,T15278 capitalisation,3,[],https://github.com/endlessm/gnome-initial-setup/pull/146,https://github.com/pwithnall,1,https://github.com/endlessm/gnome-initial-setup/pull/146,Capitalisation and Unicode string fixes for https://phabricator.endlessm.com/T15278.,Capitalisation and Unicode string fixes for https://phabricator.endlessm.com/T15278.,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,146,2017-01-27T09:57:16Z,2017-03-02T07:46:16Z,2017-03-02T09:53:27Z,MERGED,True,1077,1077,82,https://github.com/pwithnall,T15278 capitalisation,3,[],https://github.com/endlessm/gnome-initial-setup/pull/146,https://github.com/pwithnall,2,https://github.com/endlessm/gnome-initial-setup/pull/146#issuecomment-280011032,Capitalisation and Unicode string fixes for https://phabricator.endlessm.com/T15278.,Updated version of the branch which updates the msgid strings in the .po files so that no strings are marked as fuzzy.,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,146,2017-01-27T09:57:16Z,2017-03-02T07:46:16Z,2017-03-02T09:53:27Z,MERGED,True,1077,1077,82,https://github.com/pwithnall,T15278 capitalisation,3,[],https://github.com/endlessm/gnome-initial-setup/pull/146,https://github.com/pwithnall,3,https://github.com/endlessm/gnome-initial-setup/pull/146#issuecomment-283607943,Capitalisation and Unicode string fixes for https://phabricator.endlessm.com/T15278.,"ui: Apply unicode ellipses to translations

I deliberately didn’t do that because I’m unsure of the semantics of ‘…’ in non-English languages, but if you’re happy with it then I have no complaints. Thanks for reviewing and merging.",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,147,2017-02-02T16:09:57Z,2017-02-03T19:42:55Z,2017-02-03T19:42:58Z,MERGED,True,16,2,1,https://github.com/ramcq,T15370: disable chrome download when entering live mode,2,[],https://github.com/endlessm/gnome-initial-setup/pull/147,https://github.com/ramcq,1,https://github.com/endlessm/gnome-initial-setup/pull/147,"Run the eos-google-chrome-system-helper.py helper via pkexec which
touches a stamp file, making the automatic download of Google Chrome in
the user's session a no-op. The download/install consumes 250MB of
RAM from the tmpfs!
https://phabricator.endlessm.com/T15370","Run the eos-google-chrome-system-helper.py helper via pkexec which
touches a stamp file, making the automatic download of Google Chrome in
the user's session a no-op. The download/install consumes 250MB of
RAM from the tmpfs!
https://phabricator.endlessm.com/T15370",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,148,2017-02-06T17:48:29Z,2017-02-08T21:02:15Z,2017-02-08T21:02:17Z,MERGED,True,65,4,2,https://github.com/GeorgesStavracas,T15310,4,[],https://github.com/endlessm/gnome-initial-setup/pull/148,https://github.com/GeorgesStavracas,1,https://github.com/endlessm/gnome-initial-setup/pull/148,https://phabricator.endlessm.com/T15310,https://phabricator.endlessm.com/T15310,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,149,2017-02-08T11:12:00Z,2017-02-08T19:47:48Z,2017-02-08T19:49:03Z,MERGED,True,49,0,3,https://github.com/GeorgesStavracas,account: implement the new password strength scheme,1,[],https://github.com/endlessm/gnome-initial-setup/pull/149,https://github.com/GeorgesStavracas,1,https://github.com/endlessm/gnome-initial-setup/pull/149,"The old password strength validation only starts giving us any
value when the password already has a good strength. This behavior
led to confusion, as it only actually works when after typing a
few random characters, making us think it wasn't working at all.
The new password scheme is just a minor extension of the old one.
Basically, whenever a password is typed, we make sure the strength
to be at least one - instead of 0 like before.
Now, we use the following scheme:
Empty	  -> 0 bars
Weak	  -> 1 bar (red)
Regular	  -> 2 bars (yellow)
Strong	  -> 3 bars (green)
Excellent -> 4 bars (blue)
This makes the feedback much more immediate, and improves the overall
interaction with the initial setup page.
https://phabricator.endlessm.com/T15307","The old password strength validation only starts giving us any
value when the password already has a good strength. This behavior
led to confusion, as it only actually works when after typing a
few random characters, making us think it wasn't working at all.
The new password scheme is just a minor extension of the old one.
Basically, whenever a password is typed, we make sure the strength
to be at least one - instead of 0 like before.
Now, we use the following scheme:
Empty	  -> 0 bars
Weak	  -> 1 bar (red)
Regular	  -> 2 bars (yellow)
Strong	  -> 3 bars (green)
Excellent -> 4 bars (blue)
This makes the feedback much more immediate, and improves the overall
interaction with the initial setup page.
https://phabricator.endlessm.com/T15307",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,150,2017-02-15T14:27:06Z,2017-02-15T16:12:17Z,2017-02-15T16:12:20Z,MERGED,True,1,1,1,https://github.com/wjt,live-chooser: fix path to Chrome system helper,1,[],https://github.com/endlessm/gnome-initial-setup/pull/150,https://github.com/wjt,1,https://github.com/endlessm/gnome-initial-setup/pull/150,https://phabricator.endlessm.com/T15370,https://phabricator.endlessm.com/T15370,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,151,2017-02-16T23:36:12Z,2017-02-17T01:11:47Z,2017-02-17T01:11:49Z,MERGED,True,125,66,5,https://github.com/wjt,live: don't clobber image-specific icon grid; restore Chromium,4,[],https://github.com/endlessm/gnome-initial-setup/pull/151,https://github.com/wjt,1,https://github.com/endlessm/gnome-initial-setup/pull/151,"https://phabricator.endlessm.com/T15370
https://phabricator.endlessm.com/T15438","https://phabricator.endlessm.com/T15370
https://phabricator.endlessm.com/T15438",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,152,2017-02-17T01:32:25Z,2017-02-17T02:57:25Z,2017-02-17T02:57:27Z,MERGED,True,26,19,1,https://github.com/ramcq,eos-setup-live-user: Fixup live image icon grid prepend for non-C locales,1,[],https://github.com/endlessm/gnome-initial-setup/pull/152,https://github.com/ramcq,1,https://github.com/endlessm/gnome-initial-setup/pull/152,"The code assumed that only icon-grid-prepend-C.json would exist, whereas actually the prepend files can be created with any locale name (although they are not at present). To ensure the reformatter always appears, we add a glob/loop similar to remove_chrome_from_icon_grids, but always create icon-grid-prepend-C.json if it does not exist.
https://phabricator.endlessm.com/T15643","The code assumed that only icon-grid-prepend-C.json would exist, whereas actually the prepend files can be created with any locale name (although they are not at present). To ensure the reformatter always appears, we add a glob/loop similar to remove_chrome_from_icon_grids, but always create icon-grid-prepend-C.json if it does not exist.
https://phabricator.endlessm.com/T15643",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,153,2017-02-18T01:30:44Z,2017-02-18T02:04:29Z,2017-02-18T02:04:31Z,MERGED,True,19,6,1,https://github.com/cosimoc,keyboard: add us/us+intl default layouts as fallback,1,[],https://github.com/endlessm/gnome-initial-setup/pull/153,https://github.com/cosimoc,1,https://github.com/endlessm/gnome-initial-setup/pull/153,"When no more specific keyboard layouts have been found, add us and
us+intl as fallback options, instead of an empty list.
https://phabricator.endlessm.com/T15660","When no more specific keyboard layouts have been found, add us and
us+intl as fallback options, instead of an empty list.
https://phabricator.endlessm.com/T15660",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,154,2017-03-08T18:13:31Z,2017-03-09T13:50:51Z,2017-04-21T16:29:05Z,MERGED,True,1,2,1,https://github.com/pwithnall,eos-test-mode: Update eos-updater unit usage,1,[],https://github.com/endlessm/gnome-initial-setup/pull/154,https://github.com/pwithnall,1,https://github.com/endlessm/gnome-initial-setup/pull/154,"The unit files in eos-updater were recently changed, so that
eos-updater.service is now a unit in its own right, not an alias for
eos-autoupdater.service. Change the unit file handling to reflect that.
Signed-off-by: Philip Withnall withnall@endlessm.com
https://phabricator.endlessm.com/T15977","The unit files in eos-updater were recently changed, so that
eos-updater.service is now a unit in its own right, not an alias for
eos-autoupdater.service. Change the unit file handling to reflect that.
Signed-off-by: Philip Withnall withnall@endlessm.com
https://phabricator.endlessm.com/T15977",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,155,2017-03-09T02:23:24Z,2017-03-09T23:32:06Z,2017-03-09T23:32:08Z,MERGED,True,1123,584,18,https://github.com/mariospr,Allow defining a branding-enabled welcome page,4,[],https://github.com/endlessm/gnome-initial-setup/pull/155,https://github.com/mariospr,1,https://github.com/endlessm/gnome-initial-setup/pull/155,"This pull request adds a new page ""branding-welcome"" that will allow us defining the relevant parameters (title, description, logo) for a branded welcome page, in an optional way, as well as an optional list of pages we might want to skip.
To do this we will read a ""key file"" in /etc/eos-branding/gnome-initial-setup/pages.conf that would define the following parameters:

title (required): string containing a short string to show as title.
description (optional): string containing long text, likely to be wrapped.
logo (optional): absolute path to the file with a logo for the brand.
skip (optional): comma-separated list of PAGE IDs the branded g-i-s should skip.

For example, this is how this file would look on a branded image defining a title,
a description, a logo and skipping the ""language"" and ""keyboard"" pages.
[Welcome]
title=A title to be shown at the top
description=A long description that will be shown at the bottom of this page, right below the branded logo (if any), explaining what the branded edition is about.
logo=/path/to/the/image/with/the/logo.png
skip=language,keyboard

Additionally, this PR refactors a bit the code around GisPage and the language page, so that we can now open the factory mode dialog from any page (not just the language one), which will be useful for the new ""branding-welcome"" page, which also needs that functionality.
https://phabricator.endlessm.com/T15834","This pull request adds a new page ""branding-welcome"" that will allow us defining the relevant parameters (title, description, logo) for a branded welcome page, in an optional way, as well as an optional list of pages we might want to skip.
To do this we will read a ""key file"" in /etc/eos-branding/gnome-initial-setup/pages.conf that would define the following parameters:

title (required): string containing a short string to show as title.
description (optional): string containing long text, likely to be wrapped.
logo (optional): absolute path to the file with a logo for the brand.
skip (optional): comma-separated list of PAGE IDs the branded g-i-s should skip.

For example, this is how this file would look on a branded image defining a title,
a description, a logo and skipping the ""language"" and ""keyboard"" pages.
[Welcome]
title=A title to be shown at the top
description=A long description that will be shown at the bottom of this page, right below the branded logo (if any), explaining what the branded edition is about.
logo=/path/to/the/image/with/the/logo.png
skip=language,keyboard

Additionally, this PR refactors a bit the code around GisPage and the language page, so that we can now open the factory mode dialog from any page (not just the language one), which will be useful for the new ""branding-welcome"" page, which also needs that functionality.
https://phabricator.endlessm.com/T15834",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,156,2017-03-09T18:03:53Z,2017-03-13T18:14:39Z,2017-03-13T18:14:41Z,MERGED,True,1,0,1,https://github.com/wjt,live-chooser: set keyring password to empty string,1,[],https://github.com/endlessm/gnome-initial-setup/pull/156,https://github.com/wjt,1,https://github.com/endlessm/gnome-initial-setup/pull/156,"The gnome-initial-setup user creates a keyring for itself with the
passphrase 'gis'; this function updates the passphrase. The keyring is
then moved into the newly-created user's homedir when they log in, by
gnome-initial-setup-copy-worker.
(In the normal, non-live FBE flow, the keyring password is updated to
match that of the newly-created account, and the password is written in
plaintext to /run/gnome-initial-setup/.config/password. After moving the
keyring into position, copy-worker attempts to read this file and unlock
the keyring. We bypass the whole 'account' page, so this logic is
skipped.)
https://phabricator.endlessm.com/T15938","The gnome-initial-setup user creates a keyring for itself with the
passphrase 'gis'; this function updates the passphrase. The keyring is
then moved into the newly-created user's homedir when they log in, by
gnome-initial-setup-copy-worker.
(In the normal, non-live FBE flow, the keyring password is updated to
match that of the newly-created account, and the password is written in
plaintext to /run/gnome-initial-setup/.config/password. After moving the
keyring into position, copy-worker attempts to read this file and unlock
the keyring. We bypass the whole 'account' page, so this logic is
skipped.)
https://phabricator.endlessm.com/T15938",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,157,2017-03-11T01:39:21Z,2017-03-11T05:32:15Z,2017-03-11T05:32:17Z,MERGED,True,90,53,5,https://github.com/cosimoc,T15834,4,[],https://github.com/endlessm/gnome-initial-setup/pull/157,https://github.com/cosimoc,1,https://github.com/endlessm/gnome-initial-setup/pull/157,https://phabricator.endlessm.com/T15834,https://phabricator.endlessm.com/T15834,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,158,2017-03-11T01:39:34Z,2017-03-11T05:32:54Z,2017-03-11T05:32:56Z,MERGED,True,2,0,1,https://github.com/cosimoc,Specify location for our vendor overrides,1,[],https://github.com/endlessm/gnome-initial-setup/pull/158,https://github.com/cosimoc,1,https://github.com/endlessm/gnome-initial-setup/pull/158,https://phabricator.endlessm.com/T15834,https://phabricator.endlessm.com/T15834,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,159,2017-03-12T01:47:04Z,2017-03-12T02:02:58Z,2017-03-12T02:02:59Z,MERGED,True,6,1,2,https://github.com/cosimoc,branding: fix copy/paste typo,2,[],https://github.com/endlessm/gnome-initial-setup/pull/159,https://github.com/cosimoc,1,https://github.com/endlessm/gnome-initial-setup/pull/159,"The group is called ""Welcome"", not ""Info"".
https://phabricator.endlessm.com/T15834","The group is called ""Welcome"", not ""Info"".
https://phabricator.endlessm.com/T15834",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,160,2017-04-06T19:53:47Z,2017-04-07T06:19:27Z,2017-04-07T06:19:29Z,MERGED,True,32,31,1,https://github.com/wjt,Backport updated Indonesian translations,1,[],https://github.com/endlessm/gnome-initial-setup/pull/160,https://github.com/wjt,1,https://github.com/endlessm/gnome-initial-setup/pull/160,"This is not a simple cherry-pick because, in master:

Many English strings have had ASCII quotes "" replaced with curly
quotes “
The first few screens have been refactored so many string location
comments have changed

This patch manually merges these string changes.
https://phabricator.endlessm.com/T16485","This is not a simple cherry-pick because, in master:

Many English strings have had ASCII quotes "" replaced with curly
quotes “
The first few screens have been refactored so many string location
comments have changed

This patch manually merges these string changes.
https://phabricator.endlessm.com/T16485",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,161,2017-04-20T12:38:27Z,2017-04-21T21:06:08Z,2017-04-21T21:16:29Z,MERGED,True,12,9,1,https://github.com/wjt,endless-eula: set metrics state when FBE complete,2,[],https://github.com/endlessm/gnome-initial-setup/pull/161,https://github.com/wjt,1,https://github.com/endlessm/gnome-initial-setup/pull/161,"GisPageClass.save_data is called for each page when the last page of the FBE is reached.
By deferring this to the end of the FBE, and calling it exactly once, we can change the daemon's defaults to ""collect, but don't submit"". If the user chooses to leave metrics enabled, we set the daemon to ""collect and submit"". If the user disables metrics, we set the daemon to ""neither collect nor submit"".
This allows boot-time metrics to be collected during the first boot, but only submitted once the user has had a chance to opt out. (The previous default was ""submit, but don't collect"", which meant we lost valuable information from the first boot.)
For the corresponding change to the default configuration, see endlessm/eos-event-recorder-daemon#215
https://phabricator.endlessm.com/T14065","GisPageClass.save_data is called for each page when the last page of the FBE is reached.
By deferring this to the end of the FBE, and calling it exactly once, we can change the daemon's defaults to ""collect, but don't submit"". If the user chooses to leave metrics enabled, we set the daemon to ""collect and submit"". If the user disables metrics, we set the daemon to ""neither collect nor submit"".
This allows boot-time metrics to be collected during the first boot, but only submitted once the user has had a chance to opt out. (The previous default was ""submit, but don't collect"", which meant we lost valuable information from the first boot.)
For the corresponding change to the default configuration, see endlessm/eos-event-recorder-daemon#215
https://phabricator.endlessm.com/T14065",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,162,2017-04-28T11:51:18Z,2017-04-28T12:12:50Z,2017-04-28T12:12:53Z,MERGED,True,3,0,1,https://github.com/wjt,test-mode: Disable eos-phone-home,1,[],https://github.com/endlessm/gnome-initial-setup/pull/162,https://github.com/wjt,1,https://github.com/endlessm/gnome-initial-setup/pull/162,https://phabricator.endlessm.com/T16836,https://phabricator.endlessm.com/T16836,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,163,2017-05-02T10:18:46Z,2017-05-11T16:24:58Z,2017-05-11T16:25:01Z,MERGED,True,0,10,1,https://github.com/wjt,Re-enable metrics on live systems,1,[],https://github.com/endlessm/gnome-initial-setup/pull/163,https://github.com/wjt,1,https://github.com/endlessm/gnome-initial-setup/pull/163,"This is a partial revert of #141. I left out the hunk which assigned an ID to the separator in the .ui file -- nice to have that, even if it's currently unused.
We previously had to disabled metrics on live systems because boot-time events (such as the fact that the system is live!) were lost on the first boot (ie every boot of a live system). Since the usage pattern of a live system is expected to be very different to a persistant installation, we need to be able to distinguish the two. Now that T14065 is resolved, this event will not be lost, so distinguishing live systems is possible, so we can re-enable metrics (by default) on live systems.
https://phabricator.endlessm.com/T14217","This is a partial revert of #141. I left out the hunk which assigned an ID to the separator in the .ui file -- nice to have that, even if it's currently unused.
We previously had to disabled metrics on live systems because boot-time events (such as the fact that the system is live!) were lost on the first boot (ie every boot of a live system). Since the usage pattern of a live system is expected to be very different to a persistant installation, we need to be able to distinguish the two. Now that T14065 is resolved, this event will not be lost, so distinguishing live systems is possible, so we can re-enable metrics (by default) on live systems.
https://phabricator.endlessm.com/T14217",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,164,2017-05-08T11:03:40Z,2017-05-13T03:04:40Z,2017-05-13T03:04:41Z,MERGED,True,1,1,1,https://github.com/ramcq,move eos-image-defaults to /var/lib,1,[],https://github.com/endlessm/gnome-initial-setup/pull/164,https://github.com/ramcq,1,https://github.com/endlessm/gnome-initial-setup/pull/164,https://phabricator.endlessm.com/T15704,https://phabricator.endlessm.com/T15704,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,165,2017-05-08T11:14:57Z,2017-05-13T03:04:57Z,2017-05-13T03:04:58Z,MERGED,True,1,1,1,https://github.com/ramcq,move eos-image-defaults to /var/lib,1,[],https://github.com/endlessm/gnome-initial-setup/pull/165,https://github.com/ramcq,1,https://github.com/endlessm/gnome-initial-setup/pull/165,https://phabricator.endlessm.com/T15704,https://phabricator.endlessm.com/T15704,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,166,2017-05-24T14:22:19Z,2017-06-02T18:31:13Z,2017-06-02T18:31:13Z,CLOSED,False,5616,250,87,https://github.com/alepuccetti,WIP: Rebase to upstream 3.22,59,[],https://github.com/endlessm/gnome-initial-setup/pull/166,https://github.com/alepuccetti,1,https://github.com/endlessm/gnome-initial-setup/pull/166,"The main functionalities are working. There are a couple of things to fix like the three dots/search bar in language and keyword. However, I would like a first review and feedback on the current work.
https://phabricator.endlessm.com/T12164","The main functionalities are working. There are a couple of things to fix like the three dots/search bar in language and keyword. However, I would like a first review and feedback on the current work.
https://phabricator.endlessm.com/T12164",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,166,2017-05-24T14:22:19Z,2017-06-02T18:31:13Z,2017-06-02T18:31:13Z,CLOSED,False,5616,250,87,https://github.com/alepuccetti,WIP: Rebase to upstream 3.22,59,[],https://github.com/endlessm/gnome-initial-setup/pull/166,https://github.com/mcatanzaro,2,https://github.com/endlessm/gnome-initial-setup/pull/166#issuecomment-303865828,"The main functionalities are working. There are a couple of things to fix like the three dots/search bar in language and keyword. However, I would like a first review and feedback on the current work.
https://phabricator.endlessm.com/T12164","I think you should make the base branch for the pull request the upstream gnome-3-22 branch rather than master. That way, we can easily review just Endless changes on the upstream code separated from all the upstream changes between 3.10 and 3.22. (Of course, we would not actually merge it into the gnome-3-22 branch: it requires a force push onto master.)",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,166,2017-05-24T14:22:19Z,2017-06-02T18:31:13Z,2017-06-02T18:31:13Z,CLOSED,False,5616,250,87,https://github.com/alepuccetti,WIP: Rebase to upstream 3.22,59,[],https://github.com/endlessm/gnome-initial-setup/pull/166,https://github.com/alepuccetti,3,https://github.com/endlessm/gnome-initial-setup/pull/166#issuecomment-304614372,"The main functionalities are working. There are a couple of things to fix like the three dots/search bar in language and keyword. However, I would like a first review and feedback on the current work.
https://phabricator.endlessm.com/T12164","@mcatanzaro regarding change the base of the PR (#166 (comment)). The gnome-3-22 branch is missing in the repo, and I do not have the rights to push new branches. Can you give me write access to the repo or push this branch https://github.com/GNOME/gnome-initial-setup/tree/gnome-3-22?
Thanks.",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,166,2017-05-24T14:22:19Z,2017-06-02T18:31:13Z,2017-06-02T18:31:13Z,CLOSED,False,5616,250,87,https://github.com/alepuccetti,WIP: Rebase to upstream 3.22,59,[],https://github.com/endlessm/gnome-initial-setup/pull/166,https://github.com/mcatanzaro,4,https://github.com/endlessm/gnome-initial-setup/pull/166#issuecomment-304734119,"The main functionalities are working. There are a couple of things to fix like the three dots/search bar in language and keyword. However, I would like a first review and feedback on the current work.
https://phabricator.endlessm.com/T12164","@cosimoc can grant you write access. But if you mess around with the 'git remote' command and add the endlessm repo as a new remote, then you should be able to check out the gnome-3-22 branch even without permission.",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,166,2017-05-24T14:22:19Z,2017-06-02T18:31:13Z,2017-06-02T18:31:13Z,CLOSED,False,5616,250,87,https://github.com/alepuccetti,WIP: Rebase to upstream 3.22,59,[],https://github.com/endlessm/gnome-initial-setup/pull/166,https://github.com/alepuccetti,5,https://github.com/endlessm/gnome-initial-setup/pull/166#issuecomment-304792491,"The main functionalities are working. There are a couple of things to fix like the three dots/search bar in language and keyword. However, I would like a first review and feedback on the current work.
https://phabricator.endlessm.com/T12164","@cosimoc can grant you write access. But if you mess around with the 'git remote' command and add the endlessm repo as a new remote, then you should be able to check out the gnome-3-22 branch even without permission.

Maybe I did not explain myself very well the first time. The problem is not locally, I have the gnome-3-22 branch. But there is no gnome-3-22 branch on endlessm/gnome-initial-setup. For this reason, I cannot change the base on github. My WIP branch is based on gnome-3-22 the problem is that github is doing the PR against master instead of gnome-3-22. But it cannot be changed because gnome-3-22 branch does not exist on the endless repo and I cannot add it.
I did a PR against gnome-3-22 on the kinvolk repo; the result is here kinvolk-archives#1
@mcatanzaro",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,166,2017-05-24T14:22:19Z,2017-06-02T18:31:13Z,2017-06-02T18:31:13Z,CLOSED,False,5616,250,87,https://github.com/alepuccetti,WIP: Rebase to upstream 3.22,59,[],https://github.com/endlessm/gnome-initial-setup/pull/166,https://github.com/cosimoc,6,https://github.com/endlessm/gnome-initial-setup/pull/166#issuecomment-304803313,"The main functionalities are working. There are a couple of things to fix like the three dots/search bar in language and keyword. However, I would like a first review and feedback on the current work.
https://phabricator.endlessm.com/T12164","@alepuccetti I granted you write permissions on the endless gnome-initial-setup repo now, so feel free to also push the gnome-3-22 branch there and issue a PR against it.",True,{'THUMBS_UP': ['https://github.com/alepuccetti']}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,166,2017-05-24T14:22:19Z,2017-06-02T18:31:13Z,2017-06-02T18:31:13Z,CLOSED,False,5616,250,87,https://github.com/alepuccetti,WIP: Rebase to upstream 3.22,59,[],https://github.com/endlessm/gnome-initial-setup/pull/166,https://github.com/alepuccetti,7,https://github.com/endlessm/gnome-initial-setup/pull/166#issuecomment-305147833,"The main functionalities are working. There are a couple of things to fix like the three dots/search bar in language and keyword. However, I would like a first review and feedback on the current work.
https://phabricator.endlessm.com/T12164","I addressed most of the comments, and I opened new tickets about what still need to be done.
@cosimoc @mcatanzaro",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,166,2017-05-24T14:22:19Z,2017-06-02T18:31:13Z,2017-06-02T18:31:13Z,CLOSED,False,5616,250,87,https://github.com/alepuccetti,WIP: Rebase to upstream 3.22,59,[],https://github.com/endlessm/gnome-initial-setup/pull/166,https://github.com/cosimoc,8,https://github.com/endlessm/gnome-initial-setup/pull/166#issuecomment-305369887,"The main functionalities are working. There are a couple of things to fix like the three dots/search bar in language and keyword. However, I would like a first review and feedback on the current work.
https://phabricator.endlessm.com/T12164","@alepuccetti So there are only a couple of things left here:

You should address my comment about the welcome tour code (github unhelpfully shows it above as outdated, but it's not)
Squash commits that belong together for the live-chooser and endless-eula pages as you suggested",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,166,2017-05-24T14:22:19Z,2017-06-02T18:31:13Z,2017-06-02T18:31:13Z,CLOSED,False,5616,250,87,https://github.com/alepuccetti,WIP: Rebase to upstream 3.22,59,[],https://github.com/endlessm/gnome-initial-setup/pull/166,https://github.com/alepuccetti,9,https://github.com/endlessm/gnome-initial-setup/pull/166#issuecomment-305513669,"The main functionalities are working. There are a couple of things to fix like the three dots/search bar in language and keyword. However, I would like a first review and feedback on the current work.
https://phabricator.endlessm.com/T12164","Ok, thanks. I thought that Cosimo meant having the patch only downstream. I
will update the PR.
On Thu, Jun 1, 2017 at 4:36 PM Michael Catanzaro ***@***.***> wrote:
 ***@***.**** commented on this pull request.
 ------------------------------

 In configure.ac
 <#166 (comment)>
 :

 > @@ -49,7 +49,7 @@ PKG_CHECK_MODULES(INITIAL_SETUP,
                    pango >= $PANGO_REQUIRED_VERSION
                    rest-0.7
                    json-glib-1.0
 -		  libsecret-1
 +                  libsecret-1

 @alepuccetti <https://github.com/alepuccetti> since these commits are
 minor fixes and not essential to carry downstream, I would just remove them
 from your branch. (That's what Cosimo means when he says ""I'd prefer not to
 carry this downstream patch."") We'll have fewer downstream changes, and
 will get the fixes when we rebase on 3.26, whenever that happens. It's
 still good that you fixed these, of course. :)

 —
 You are receiving this because you were mentioned.
 Reply to this email directly, view it on GitHub
 <#166 (comment)>,
 or mute the thread
 <https://github.com/notifications/unsubscribe-auth/AGRc725So7VWmrSx6ejTRn0T6UOygvctks5r_sxmgaJpZM4NlLnv>
 .

-- 

Alessandro Puccetti",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,166,2017-05-24T14:22:19Z,2017-06-02T18:31:13Z,2017-06-02T18:31:13Z,CLOSED,False,5616,250,87,https://github.com/alepuccetti,WIP: Rebase to upstream 3.22,59,[],https://github.com/endlessm/gnome-initial-setup/pull/166,https://github.com/cosimoc,10,https://github.com/endlessm/gnome-initial-setup/pull/166#issuecomment-305566407,"The main functionalities are working. There are a couple of things to fix like the three dots/search bar in language and keyword. However, I would like a first review and feedback on the current work.
https://phabricator.endlessm.com/T12164","PR looks great to me right now! @alepuccetti mentioned he wants to rework the commit messages a little bit, but other than that this is good to go.",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,166,2017-05-24T14:22:19Z,2017-06-02T18:31:13Z,2017-06-02T18:31:13Z,CLOSED,False,5616,250,87,https://github.com/alepuccetti,WIP: Rebase to upstream 3.22,59,[],https://github.com/endlessm/gnome-initial-setup/pull/166,https://github.com/alepuccetti,11,https://github.com/endlessm/gnome-initial-setup/pull/166#issuecomment-305736624,"The main functionalities are working. There are a couple of things to fix like the three dots/search bar in language and keyword. However, I would like a first review and feedback on the current work.
https://phabricator.endlessm.com/T12164","@cosimoc I reworked some commits messages.
I just want to point out one thing, when the issue about languages is solved we may want to fix up the relevant commits that will be redundant:

language-chooser: do not show all languages by default
language-chooser: make it more clear for the users

This will make the history more clear and the life easier to whoever will do the next rebase. Also, I rearranged the order of the commit a bit for this purpose.",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,166,2017-05-24T14:22:19Z,2017-06-02T18:31:13Z,2017-06-02T18:31:13Z,CLOSED,False,5616,250,87,https://github.com/alepuccetti,WIP: Rebase to upstream 3.22,59,[],https://github.com/endlessm/gnome-initial-setup/pull/166,https://github.com/cosimoc,12,https://github.com/endlessm/gnome-initial-setup/pull/166#issuecomment-305874664,"The main functionalities are working. There are a couple of things to fix like the three dots/search bar in language and keyword. However, I would like a first review and feedback on the current work.
https://phabricator.endlessm.com/T12164","Force-pushed this to master after reworking the commits a bit more.
Closing the PR.",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,167,2017-06-01T17:34:28Z,2017-06-02T18:30:32Z,2017-06-02T18:31:31Z,MERGED,True,218,308,10,https://github.com/cosimoc,Update debian packaging to 3.22,1,[],https://github.com/endlessm/gnome-initial-setup/pull/167,https://github.com/cosimoc,1,https://github.com/endlessm/gnome-initial-setup/pull/167,https://phabricator.endlessm.com/T12164,https://phabricator.endlessm.com/T12164,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,168,2017-06-06T00:36:07Z,2017-06-06T19:34:17Z,2017-06-06T19:34:20Z,MERGED,True,1,3,2,https://github.com/cosimoc,T17323,2,[],https://github.com/endlessm/gnome-initial-setup/pull/168,https://github.com/cosimoc,1,https://github.com/endlessm/gnome-initial-setup/pull/168,https://phabricator.endlessm.com/T17323,https://phabricator.endlessm.com/T17323,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,168,2017-06-06T00:36:07Z,2017-06-06T19:34:17Z,2017-06-06T19:34:20Z,MERGED,True,1,3,2,https://github.com/cosimoc,T17323,2,[],https://github.com/endlessm/gnome-initial-setup/pull/168,https://github.com/alepuccetti,2,https://github.com/endlessm/gnome-initial-setup/pull/168#issuecomment-306541748,https://phabricator.endlessm.com/T17323,"LGTM.
I tested in my VM and it works, but I got this error in the log.
Gtk =-CRITICAL **: gtk_box_gadget_distribute: assertion 'size >= 0' failed in GtkScrollbar.
@cosimoc",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,168,2017-06-06T00:36:07Z,2017-06-06T19:34:17Z,2017-06-06T19:34:20Z,MERGED,True,1,3,2,https://github.com/cosimoc,T17323,2,[],https://github.com/endlessm/gnome-initial-setup/pull/168,https://github.com/cosimoc,3,https://github.com/endlessm/gnome-initial-setup/pull/168#issuecomment-306549469,https://phabricator.endlessm.com/T17323,"@alepuccetti I don't see this error here, but I am testing on a slightly different configuration (jhbuild).
I'd say let's merge it, and we can follow up on that error if it can be reproduced on the production config.",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,168,2017-06-06T00:36:07Z,2017-06-06T19:34:17Z,2017-06-06T19:34:20Z,MERGED,True,1,3,2,https://github.com/cosimoc,T17323,2,[],https://github.com/endlessm/gnome-initial-setup/pull/168,https://github.com/alepuccetti,4,https://github.com/endlessm/gnome-initial-setup/pull/168#issuecomment-306593375,https://phabricator.endlessm.com/T17323,"SGTM
On Tue, Jun 6, 2017 at 6:55 PM Cosimo Cecchi ***@***.***> wrote:
 @alepuccetti <https://github.com/alepuccetti> I don't see this error
 here, but I am testing on a slightly different configuration (jhbuild).
 I'd say let's merge it, and we can follow up on that error if it can be
 reproduced on the production config.

 —
 You are receiving this because you were mentioned.


 Reply to this email directly, view it on GitHub
 <#168 (comment)>,
 or mute the thread
 <https://github.com/notifications/unsubscribe-auth/AGRc77Ol_YP_msBSkEIVoeT5L7KzxJqSks5sBYRjgaJpZM4Nwuf0>
 .

-- 

Alessandro Puccetti",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,169,2017-06-07T05:54:06Z,2017-06-07T15:33:43Z,2017-06-07T15:33:48Z,MERGED,True,162,1,4,https://github.com/cosimoc,T12164,2,[],https://github.com/endlessm/gnome-initial-setup/pull/169,https://github.com/cosimoc,1,https://github.com/endlessm/gnome-initial-setup/pull/169,https://phabricator.endlessm.com/T12164,https://phabricator.endlessm.com/T12164,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,169,2017-06-07T05:54:06Z,2017-06-07T15:33:43Z,2017-06-07T15:33:48Z,MERGED,True,162,1,4,https://github.com/cosimoc,T12164,2,[],https://github.com/endlessm/gnome-initial-setup/pull/169,https://github.com/alepuccetti,2,https://github.com/endlessm/gnome-initial-setup/pull/169#issuecomment-306717292,https://phabricator.endlessm.com/T12164,LGTM,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,170,2017-06-07T19:19:36Z,2017-06-07T21:36:45Z,2017-06-07T21:36:48Z,MERGED,True,27,10,1,https://github.com/cosimoc,timezone: set default 12h/24h from locale,1,[],https://github.com/endlessm/gnome-initial-setup/pull/170,https://github.com/cosimoc,1,https://github.com/endlessm/gnome-initial-setup/pull/170,"Instead of always using 24h. This code will become simpler once we have
a newer version of GLib, where GDateTime always supports formatting
AM/PM time.
https://phabricator.endlessm.com/T17468","Instead of always using 24h. This code will become simpler once we have
a newer version of GLib, where GDateTime always supports formatting
AM/PM time.
https://phabricator.endlessm.com/T17468",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,171,2017-06-08T16:44:32Z,2017-06-08T16:46:47Z,2017-06-08T16:47:05Z,MERGED,True,81,6,7,https://github.com/cosimoc,Alessandro/allow password less,3,[],https://github.com/endlessm/gnome-initial-setup/pull/171,https://github.com/cosimoc,1,https://github.com/endlessm/gnome-initial-setup/pull/171,https://phabricator.endlessm.com/T17268,https://phabricator.endlessm.com/T17268,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,171,2017-06-08T16:44:32Z,2017-06-08T16:46:47Z,2017-06-08T16:47:05Z,MERGED,True,81,6,7,https://github.com/cosimoc,Alessandro/allow password less,3,[],https://github.com/endlessm/gnome-initial-setup/pull/171,https://github.com/cosimoc,2,https://github.com/endlessm/gnome-initial-setup/pull/171#issuecomment-307161472,https://phabricator.endlessm.com/T17268,@alepuccetti This is a cleaned up version of your PR that I merged to master.,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,172,2017-06-14T09:31:47Z,2017-06-15T14:48:43Z,2017-06-15T14:48:46Z,MERGED,True,43,9,2,https://github.com/alepuccetti,manually set LC_MESSAGES,3,[],https://github.com/endlessm/gnome-initial-setup/pull/172,https://github.com/alepuccetti,1,https://github.com/endlessm/gnome-initial-setup/pull/172,"This PR address a possible race between setenv and getnev manually copy the environment and adding LC_MESSAGE environment variable instead of relying on environment inheritance.
Ticket https://phabricator.endlessm.com/T17304","This PR address a possible race between setenv and getnev manually copy the environment and adding LC_MESSAGE environment variable instead of relying on environment inheritance.
Ticket https://phabricator.endlessm.com/T17304",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,173,2017-06-14T12:04:05Z,2017-06-14T16:13:25Z,2017-06-14T16:13:28Z,MERGED,True,2,2,1,https://github.com/alepuccetti,goa: reorder accounts,1,[],https://github.com/endlessm/gnome-initial-setup/pull/173,https://github.com/alepuccetti,1,https://github.com/endlessm/gnome-initial-setup/pull/173,https://phabricator.endlessm.com/T17486,https://phabricator.endlessm.com/T17486,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,174,2017-06-15T11:00:33Z,2017-06-15T14:44:30Z,2017-06-15T14:44:32Z,MERGED,True,72,45,9,https://github.com/wjt,Fix live-chooser page,11,[],https://github.com/endlessm/gnome-initial-setup/pull/174,https://github.com/wjt,1,https://github.com/endlessm/gnome-initial-setup/pull/174,https://phabricator.endlessm.com/T17622,https://phabricator.endlessm.com/T17622,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,174,2017-06-15T11:00:33Z,2017-06-15T14:44:30Z,2017-06-15T14:44:32Z,MERGED,True,72,45,9,https://github.com/wjt,Fix live-chooser page,11,[],https://github.com/endlessm/gnome-initial-setup/pull/174,https://github.com/alepuccetti,2,https://github.com/endlessm/gnome-initial-setup/pull/174#issuecomment-308751103,https://phabricator.endlessm.com/T17622,"LGTM, but I will wait for a more expert person to give the green light before merge it.",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,175,2017-06-15T15:56:47Z,2017-06-15T22:59:51Z,2017-06-15T22:59:56Z,MERGED,True,2,0,1,https://github.com/wjt,summary: limit width of live mode warning,1,[],https://github.com/endlessm/gnome-initial-setup/pull/175,https://github.com/wjt,1,https://github.com/endlessm/gnome-initial-setup/pull/175,"Unscientific straw polls of the London team concluded that this is about the right point to wrap the text, and that a little extra margin below makes the elements look more balanced.
https://phabricator.endlessm.com/T17622","Unscientific straw polls of the London team concluded that this is about the right point to wrap the text, and that a little extra margin below makes the elements look more balanced.
https://phabricator.endlessm.com/T17622",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,175,2017-06-15T15:56:47Z,2017-06-15T22:59:51Z,2017-06-15T22:59:56Z,MERGED,True,2,0,1,https://github.com/wjt,summary: limit width of live mode warning,1,[],https://github.com/endlessm/gnome-initial-setup/pull/175,https://github.com/cosimoc,2,https://github.com/endlessm/gnome-initial-setup/pull/175#issuecomment-308888174,"Unscientific straw polls of the London team concluded that this is about the right point to wrap the text, and that a little extra margin below makes the elements look more balanced.
https://phabricator.endlessm.com/T17622","Unscientific straw polls of the London team

Good enough for me :-)",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,176,2017-06-16T08:06:56Z,2017-06-17T23:34:23Z,2017-06-17T23:34:26Z,MERGED,True,4,0,1,https://github.com/alepuccetti,account-local: set sunflower as default avatar image,2,[],https://github.com/endlessm/gnome-initial-setup/pull/176,https://github.com/alepuccetti,1,https://github.com/endlessm/gnome-initial-setup/pull/176,https://phabricator.endlessm.com/T843,https://phabricator.endlessm.com/T843,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,177,2017-06-16T10:31:31Z,2017-06-17T23:28:28Z,2017-06-17T23:28:30Z,MERGED,True,1,0,1,https://github.com/alepuccetti,input-chooser: allow CcInputChooser to expand,1,[],https://github.com/endlessm/gnome-initial-setup/pull/177,https://github.com/alepuccetti,1,https://github.com/endlessm/gnome-initial-setup/pull/177,"CCInputCooser widget needs to expand when the user wants to see
more keyboard layouts.
https://phabricator.endlessm.com/T17605","CCInputCooser widget needs to expand when the user wants to see
more keyboard layouts.
https://phabricator.endlessm.com/T17605",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,178,2017-06-23T06:02:09Z,2017-06-23T19:57:13Z,2017-06-23T19:57:15Z,MERGED,True,0,0,1,https://github.com/wjt,display: update bottom-right corner asset,1,[],https://github.com/endlessm/gnome-initial-setup/pull/178,https://github.com/wjt,1,https://github.com/endlessm/gnome-initial-setup/pull/178,"This is a little wider than the old asset to allow space for a bit of empty taskbar on the left, which I think looks better. (The icons are wider in the new design, partly because the power status is shown here.)
https://phabricator.endlessm.com/T17471","This is a little wider than the old asset to allow space for a bit of empty taskbar on the left, which I think looks better. (The icons are wider in the new design, partly because the power status is shown here.)
https://phabricator.endlessm.com/T17471",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,178,2017-06-23T06:02:09Z,2017-06-23T19:57:13Z,2017-06-23T19:57:15Z,MERGED,True,0,0,1,https://github.com/wjt,display: update bottom-right corner asset,1,[],https://github.com/endlessm/gnome-initial-setup/pull/178,https://github.com/wjt,2,https://github.com/endlessm/gnome-initial-setup/pull/178#issuecomment-310579789,"This is a little wider than the old asset to allow space for a bit of empty taskbar on the left, which I think looks better. (The icons are wider in the new design, partly because the power status is shown here.)
https://phabricator.endlessm.com/T17471",,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,178,2017-06-23T06:02:09Z,2017-06-23T19:57:13Z,2017-06-23T19:57:15Z,MERGED,True,0,0,1,https://github.com/wjt,display: update bottom-right corner asset,1,[],https://github.com/endlessm/gnome-initial-setup/pull/178,https://github.com/wjt,3,https://github.com/endlessm/gnome-initial-setup/pull/178#issuecomment-310675307,"This is a little wider than the old asset to allow space for a bit of empty taskbar on the left, which I think looks better. (The icons are wider in the new design, partly because the power status is shown here.)
https://phabricator.endlessm.com/T17471","Updated to show a charging symbol:

I also have an image prepared to show the battery discharging but at full capacity:",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,179,2017-06-28T14:25:34Z,2017-06-28T15:11:02Z,2017-06-28T15:11:04Z,MERGED,True,16,13,1,https://github.com/wjt,Fix adding the reformatter to the taskbar,2,[],https://github.com/endlessm/gnome-initial-setup/pull/179,https://github.com/wjt,1,https://github.com/endlessm/gnome-initial-setup/pull/179,"In the Great GNOME Shell Rebase of Spring 2017, our downstream taskbar-pins GSetting was abandoned in favour of re-using upstream's favorite-apps GSetting.
Interestingly, without this change, the result is that only the reformatter appears on the taskbar! This is because the Shell imports the taskbar-pins key to favorite-apps, if it is not empty. The default is now empty; this script adds a single icon to it. :)
I also took this opportunity to fix some Python style problems.
https://phabricator.endlessm.com/T17622","In the Great GNOME Shell Rebase of Spring 2017, our downstream taskbar-pins GSetting was abandoned in favour of re-using upstream's favorite-apps GSetting.
Interestingly, without this change, the result is that only the reformatter appears on the taskbar! This is because the Shell imports the taskbar-pins key to favorite-apps, if it is not empty. The default is now empty; this script adds a single icon to it. :)
I also took this opportunity to fix some Python style problems.
https://phabricator.endlessm.com/T17622",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,180,2017-06-28T23:47:52Z,2019-01-30T15:23:03Z,2019-01-30T15:23:08Z,CLOSED,False,65817,17365,221,https://github.com/rshuler,T17889,158,[],https://github.com/endlessm/gnome-initial-setup/pull/180,https://github.com/rshuler,1,https://github.com/endlessm/gnome-initial-setup/pull/180,https://phabricator.endlessm.com/T17889,https://phabricator.endlessm.com/T17889,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,180,2017-06-28T23:47:52Z,2019-01-30T15:23:03Z,2019-01-30T15:23:08Z,CLOSED,False,65817,17365,221,https://github.com/rshuler,T17889,158,[],https://github.com/endlessm/gnome-initial-setup/pull/180,https://github.com/wjt,2,https://github.com/endlessm/gnome-initial-setup/pull/180#issuecomment-458983944,https://phabricator.endlessm.com/T17889,Superseded by #180 at the time.,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,181,2017-06-29T04:50:01Z,2017-06-29T16:37:54Z,2017-06-29T16:37:54Z,CLOSED,False,3,0,1,https://github.com/rshuler,set the envvar LC_MESSAGES,1,[],https://github.com/endlessm/gnome-initial-setup/pull/181,https://github.com/rshuler,1,https://github.com/endlessm/gnome-initial-setup/pull/181,"When the user sets their preferred language, the environment variable
LC_MESSAGES shall be set too, because gis might spawns processes (e.g.
gkbd-keyboard-display) and they should be localised accordingly.
https://phabricator.endlessm.com/T3172
https://phabricator.endlessm.com/T17967","When the user sets their preferred language, the environment variable
LC_MESSAGES shall be set too, because gis might spawns processes (e.g.
gkbd-keyboard-display) and they should be localised accordingly.
https://phabricator.endlessm.com/T3172
https://phabricator.endlessm.com/T17967",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,181,2017-06-29T04:50:01Z,2017-06-29T16:37:54Z,2017-06-29T16:37:54Z,CLOSED,False,3,0,1,https://github.com/rshuler,set the envvar LC_MESSAGES,1,[],https://github.com/endlessm/gnome-initial-setup/pull/181,https://github.com/mcatanzaro,2,https://github.com/endlessm/gnome-initial-setup/pull/181#issuecomment-312022943,"When the user sets their preferred language, the environment variable
LC_MESSAGES shall be set too, because gis might spawns processes (e.g.
gkbd-keyboard-display) and they should be localised accordingly.
https://phabricator.endlessm.com/T3172
https://phabricator.endlessm.com/T17967",Closing per https://phabricator.endlessm.com/T17967#415101,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,182,2017-06-30T02:18:56Z,2017-06-30T05:55:47Z,2017-06-30T05:55:52Z,MERGED,True,45,10,10,https://github.com/cosimoc,T17889 cosimoc,4,[],https://github.com/endlessm/gnome-initial-setup/pull/182,https://github.com/cosimoc,1,https://github.com/endlessm/gnome-initial-setup/pull/182,,,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,182,2017-06-30T02:18:56Z,2017-06-30T05:55:47Z,2017-06-30T05:55:52Z,MERGED,True,45,10,10,https://github.com/cosimoc,T17889 cosimoc,4,[],https://github.com/endlessm/gnome-initial-setup/pull/182,https://github.com/cosimoc,2,https://github.com/endlessm/gnome-initial-setup/pull/182#issuecomment-312157227,,CC @rshuler,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,183,2017-06-30T03:14:01Z,2017-06-30T06:48:31Z,2017-06-30T06:48:34Z,MERGED,True,119,44,1,https://github.com/mcatanzaro,T17967,3,[],https://github.com/endlessm/gnome-initial-setup/pull/183,https://github.com/mcatanzaro,1,https://github.com/endlessm/gnome-initial-setup/pull/183,https://phabricator.endlessm.com/T17967,https://phabricator.endlessm.com/T17967,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,184,2017-06-30T15:48:24Z,2017-07-01T02:37:23Z,2017-07-01T02:37:37Z,MERGED,True,6,14,1,https://github.com/ramcq,change top 8 languges in chooser to match Endless target markets,1,[],https://github.com/endlessm/gnome-initial-setup/pull/184,https://github.com/ramcq,1,https://github.com/endlessm/gnome-initial-setup/pull/184,"These languages are where we invest in translations/apps most actively, sorted
roughly by volume.
https://phabricator.endlessm.com/T18020","These languages are where we invest in translations/apps most actively, sorted
roughly by volume.
https://phabricator.endlessm.com/T18020",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,185,2017-07-02T11:43:48Z,2017-07-02T15:25:59Z,2017-07-02T15:26:01Z,MERGED,True,17,2,1,https://github.com/cosimoc,timezone: set location when clicking on map,1,[],https://github.com/endlessm/gnome-initial-setup/pull/185,https://github.com/cosimoc,1,https://github.com/endlessm/gnome-initial-setup/pull/185,"It is not intuitive that users have to explicitly search to set a
location when clicking on a map should work just as well. In that case,
use the nearest city from the latitude/longitude reported by the
TzLocation object.
https://phabricator.endlessm.com/T18040","It is not intuitive that users have to explicitly search to set a
location when clicking on a map should work just as well. In that case,
use the nearest city from the latitude/longitude reported by the
TzLocation object.
https://phabricator.endlessm.com/T18040",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,186,2017-07-06T15:00:30Z,2017-07-11T15:55:49Z,2017-07-11T15:55:51Z,MERGED,True,71,3,4,https://github.com/joaquimrocha,Ensure GOA displays the web view in the selected language,1,[],https://github.com/endlessm/gnome-initial-setup/pull/186,https://github.com/joaquimrocha,1,https://github.com/endlessm/gnome-initial-setup/pull/186,"When a user chooses a different language in the first screen of
gnome-initial-setup, the web view provided by GNOME Online Accounts
will still display the original language in which the app has been
launched. This is obviously an issue for users who may find it hard
to connect to their online accounts because of not using their
language.
Since the web view is controled by a different library, the cleanest
way to make it obey the language change is to override the set_locale
function (using LD_PRELOAD) and make it return the language that the
user has set.
Because of this I have had to wrap the gnome-initial-setup binary in
a script that sets up the environment variable before calling the real
executable.
https://phabricator.endlessm.com/T18041","When a user chooses a different language in the first screen of
gnome-initial-setup, the web view provided by GNOME Online Accounts
will still display the original language in which the app has been
launched. This is obviously an issue for users who may find it hard
to connect to their online accounts because of not using their
language.
Since the web view is controled by a different library, the cleanest
way to make it obey the language change is to override the set_locale
function (using LD_PRELOAD) and make it return the language that the
user has set.
Because of this I have had to wrap the gnome-initial-setup binary in
a script that sets up the environment variable before calling the real
executable.
https://phabricator.endlessm.com/T18041",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,187,2017-07-10T11:29:45Z,2017-07-10T11:53:19Z,2017-07-10T11:53:25Z,MERGED,True,1,9,1,https://github.com/wjt,live-chooser: ensure both columns have the same width,2,[],https://github.com/endlessm/gnome-initial-setup/pull/187,https://github.com/wjt,1,https://github.com/endlessm/gnome-initial-setup/pull/187,"Previously, in English (and possibly other languages), the two columns are
allocated different widths (310 vs 289 px). This in turn leads to the two
labels (""Try Endless OS by running it from the USB stick"" and
""Reformat this computer with Endless OS"") to be allocated different
heights, even though they are in the same vertical size group, and even
though both strings only actually occupy two lines. The narrower label was
allocated extra height for a third line of text.  This has the knock-on
effect of the icon and the buttons not being vertically aligned.
I think this might be an interaction with height-for-width? Quoth the
GtkSizeGroup documentation:

Note that size groups only affect the amount of space requested, not
the size that the widgets finally receive. If you want the widgets in
a GtkSizeGroup to actually be the same size, you need to pack them in
such a way that they get the size they request and not more.

I confess that I don't really understand exactly what's going on here, but
regardless of the misalignment we want the two columns to be the same
width; and fixing this also resolves the size allocation.
Bisecting shows that this issue was introduced by d276a0a; which is strange
because this is a simple forward-port of a patch from eos3.1 which didn't
have this problem.
https://phabricator.endlessm.com/T18063","Previously, in English (and possibly other languages), the two columns are
allocated different widths (310 vs 289 px). This in turn leads to the two
labels (""Try Endless OS by running it from the USB stick"" and
""Reformat this computer with Endless OS"") to be allocated different
heights, even though they are in the same vertical size group, and even
though both strings only actually occupy two lines. The narrower label was
allocated extra height for a third line of text.  This has the knock-on
effect of the icon and the buttons not being vertically aligned.
I think this might be an interaction with height-for-width? Quoth the
GtkSizeGroup documentation:

Note that size groups only affect the amount of space requested, not
the size that the widgets finally receive. If you want the widgets in
a GtkSizeGroup to actually be the same size, you need to pack them in
such a way that they get the size they request and not more.

I confess that I don't really understand exactly what's going on here, but
regardless of the misalignment we want the two columns to be the same
width; and fixing this also resolves the size allocation.
Bisecting shows that this issue was introduced by d276a0a; which is strange
because this is a simple forward-port of a patch from eos3.1 which didn't
have this problem.
https://phabricator.endlessm.com/T18063",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,187,2017-07-10T11:29:45Z,2017-07-10T11:53:19Z,2017-07-10T11:53:25Z,MERGED,True,1,9,1,https://github.com/wjt,live-chooser: ensure both columns have the same width,2,[],https://github.com/endlessm/gnome-initial-setup/pull/187,https://github.com/wjt,2,https://github.com/endlessm/gnome-initial-setup/pull/187#issuecomment-314080366,"Previously, in English (and possibly other languages), the two columns are
allocated different widths (310 vs 289 px). This in turn leads to the two
labels (""Try Endless OS by running it from the USB stick"" and
""Reformat this computer with Endless OS"") to be allocated different
heights, even though they are in the same vertical size group, and even
though both strings only actually occupy two lines. The narrower label was
allocated extra height for a third line of text.  This has the knock-on
effect of the icon and the buttons not being vertically aligned.
I think this might be an interaction with height-for-width? Quoth the
GtkSizeGroup documentation:

Note that size groups only affect the amount of space requested, not
the size that the widgets finally receive. If you want the widgets in
a GtkSizeGroup to actually be the same size, you need to pack them in
such a way that they get the size they request and not more.

I confess that I don't really understand exactly what's going on here, but
regardless of the misalignment we want the two columns to be the same
width; and fixing this also resolves the size allocation.
Bisecting shows that this issue was introduced by d276a0a; which is strange
because this is a simple forward-port of a patch from eos3.1 which didn't
have this problem.
https://phabricator.endlessm.com/T18063","Before and after, with all GtkLabels given a green background to show their size allocation:",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,188,2017-07-11T16:00:19Z,2017-07-11T16:05:55Z,2017-07-11T16:05:58Z,MERGED,True,4,0,1,https://github.com/joaquimrocha,Inhibit the idle state when running g-i-s,1,[],https://github.com/endlessm/gnome-initial-setup/pull/188,https://github.com/joaquimrocha,1,https://github.com/endlessm/gnome-initial-setup/pull/188,"The g-i-s is a top priority application and one that should be
left idle, so it makes sense to keep the user focused on it and not
let the system be idle either (it's not a great UX if the user sees the
lock screen's shield on first boot).
https://phabricator.endlessm.com/T18045","The g-i-s is a top priority application and one that should be
left idle, so it makes sense to keep the user focused on it and not
let the system be idle either (it's not a great UX if the user sees the
lock screen's shield on first boot).
https://phabricator.endlessm.com/T18045",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,189,2017-07-24T16:01:49Z,2017-07-26T09:46:36Z,2017-07-26T09:46:38Z,MERGED,True,7,2,1,https://github.com/joaquimrocha,timezone: Fix displaying the right clock format,1,[],https://github.com/endlessm/gnome-initial-setup/pull/189,https://github.com/joaquimrocha,1,https://github.com/endlessm/gnome-initial-setup/pull/189,"When the user changes the locale, then the clock format in the timezone
page should reflect that, but it was apparently always using the initial
(global) locale.
These changes make sure that we get the clock format for the currently
set locale, which will honor what the user has previously chosen inside
g-i-s.
https://phabricator.endlessm.com/T17468","When the user changes the locale, then the clock format in the timezone
page should reflect that, but it was apparently always using the initial
(global) locale.
These changes make sure that we get the clock format for the currently
set locale, which will honor what the user has previously chosen inside
g-i-s.
https://phabricator.endlessm.com/T17468",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,190,2017-07-25T10:24:14Z,2017-07-25T11:10:14Z,2017-07-25T11:10:15Z,MERGED,True,5,0,1,https://github.com/wjt,"Distribute g-i-s.in, clean generated wrapper",1,[],https://github.com/endlessm/gnome-initial-setup/pull/190,https://github.com/wjt,1,https://github.com/endlessm/gnome-initial-setup/pull/190,"Without these, building from a tarball fails because
gnome-initial-setup.in does not exist, and make distcheck additionally
fails because gnome-initial-setup/gnome-initial-setup is left over after
make clean.
https://phabricator.endlessm.com/T18041","Without these, building from a tarball fails because
gnome-initial-setup.in does not exist, and make distcheck additionally
fails because gnome-initial-setup/gnome-initial-setup is left over after
make clean.
https://phabricator.endlessm.com/T18041",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,191,2017-07-26T14:55:43Z,2017-07-26T15:13:36Z,2017-07-26T15:13:40Z,MERGED,True,1,0,1,https://github.com/wjt,setlocale-wrapper: pass -ldl to linker,1,[],https://github.com/endlessm/gnome-initial-setup/pull/191,https://github.com/wjt,1,https://github.com/endlessm/gnome-initial-setup/pull/191,"From OBS:
libtool: link: gcc -shared  -fPIC -DPIC  .libs/setlocale-wrapper.o    -O2 -Wl,-Bsymbolic-functions -Wl,-z -Wl,relro -Wl,-z -Wl,now -Wl,-z -Wl,defs -Wl,-O1 -Wl,--as-needed   -Wl,-soname -Wl,libsetlocale-wrapper.so.0 -o .libs/libsetlocale-wrapper.so.0.0.0
.libs/setlocale-wrapper.o: In function `setlocale':
/usr/src/packages/BUILD/gnome-initial-setup-3.22.1+dev177.e4922f5/gnome-initial-setup/setlocale-wrapper.c:37: undefined reference to `dlsym'
collect2: error: ld returned 1 exit status
Makefile:593: recipe for target 'libsetlocale-wrapper.la' failed

I cannot reproduce this by building the debian package locally but there we are.
https://phabricator.endlessm.com/T18041","From OBS:
libtool: link: gcc -shared  -fPIC -DPIC  .libs/setlocale-wrapper.o    -O2 -Wl,-Bsymbolic-functions -Wl,-z -Wl,relro -Wl,-z -Wl,now -Wl,-z -Wl,defs -Wl,-O1 -Wl,--as-needed   -Wl,-soname -Wl,libsetlocale-wrapper.so.0 -o .libs/libsetlocale-wrapper.so.0.0.0
.libs/setlocale-wrapper.o: In function `setlocale':
/usr/src/packages/BUILD/gnome-initial-setup-3.22.1+dev177.e4922f5/gnome-initial-setup/setlocale-wrapper.c:37: undefined reference to `dlsym'
collect2: error: ld returned 1 exit status
Makefile:593: recipe for target 'libsetlocale-wrapper.la' failed

I cannot reproduce this by building the debian package locally but there we are.
https://phabricator.endlessm.com/T18041",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,191,2017-07-26T14:55:43Z,2017-07-26T15:13:36Z,2017-07-26T15:13:40Z,MERGED,True,1,0,1,https://github.com/wjt,setlocale-wrapper: pass -ldl to linker,1,[],https://github.com/endlessm/gnome-initial-setup/pull/191,https://github.com/mariospr,2,https://github.com/endlessm/gnome-initial-setup/pull/191#issuecomment-318084670,"From OBS:
libtool: link: gcc -shared  -fPIC -DPIC  .libs/setlocale-wrapper.o    -O2 -Wl,-Bsymbolic-functions -Wl,-z -Wl,relro -Wl,-z -Wl,now -Wl,-z -Wl,defs -Wl,-O1 -Wl,--as-needed   -Wl,-soname -Wl,libsetlocale-wrapper.so.0 -o .libs/libsetlocale-wrapper.so.0.0.0
.libs/setlocale-wrapper.o: In function `setlocale':
/usr/src/packages/BUILD/gnome-initial-setup-3.22.1+dev177.e4922f5/gnome-initial-setup/setlocale-wrapper.c:37: undefined reference to `dlsym'
collect2: error: ld returned 1 exit status
Makefile:593: recipe for target 'libsetlocale-wrapper.la' failed

I cannot reproduce this by building the debian package locally but there we are.
https://phabricator.endlessm.com/T18041",Let's give it a try,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,192,2017-08-08T09:08:50Z,2017-08-21T22:40:22Z,2017-08-21T22:40:25Z,MERGED,True,784,7,27,https://github.com/smspillaz,T18383,6,[],https://github.com/endlessm/gnome-initial-setup/pull/192,https://github.com/smspillaz,1,https://github.com/endlessm/gnome-initial-setup/pull/192,"Add prompts and hooks in gnome-initial-setup to enter a ""demo mode""
https://phabricator.endlessm.com/T18383","Add prompts and hooks in gnome-initial-setup to enter a ""demo mode""
https://phabricator.endlessm.com/T18383",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,192,2017-08-08T09:08:50Z,2017-08-21T22:40:22Z,2017-08-21T22:40:25Z,MERGED,True,784,7,27,https://github.com/smspillaz,T18383,6,[],https://github.com/endlessm/gnome-initial-setup/pull/192,https://github.com/smspillaz,2,https://github.com/endlessm/gnome-initial-setup/pull/192#issuecomment-321275680,"Add prompts and hooks in gnome-initial-setup to enter a ""demo mode""
https://phabricator.endlessm.com/T18383",Once we're happy with this I'll squash all the commits past the third one down into the third one.,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,192,2017-08-08T09:08:50Z,2017-08-21T22:40:22Z,2017-08-21T22:40:25Z,MERGED,True,784,7,27,https://github.com/smspillaz,T18383,6,[],https://github.com/endlessm/gnome-initial-setup/pull/192,https://github.com/smspillaz,3,https://github.com/endlessm/gnome-initial-setup/pull/192#issuecomment-322458952,"Add prompts and hooks in gnome-initial-setup to enter a ""demo mode""
https://phabricator.endlessm.com/T18383","Okay, @wjt and I discussed this some more on slack and I've made the following changes
(1) eos-setup-demo-mode-user and eos-setup-demo-mode-autologin got merged into a single eos-demo-mode script. That script runs as root shells out to eos-test-mode, sets up autologin, reloads gdm, alters the icon grids so that we show chromium instead of chrome and touches a stamp file containing the demo user name in /run/gnome-initial-setup/eos-demo-mode. We now only have one script to call instead of three, which reduces our permissions surface area.
(2) Settings changes now happen inside the gnome-initial-setup user, where they are transparently copied into the demo mode account by gnome-initial-setup-copy-worker (which would have run anyway)
(3) The autostart file for eos-demo-video now checks a stampfile in ~/.config indicating that this is a demo session
(4) The gdm PostLogin/PostSession scripts now check /run/gnome-initial-setup/eos-demo-mode to see if the currently logged in user is the demo user and both clear the home directory accordingly. There's no need to run eos-setup-demo-mode-user again because....
(5) gnome-initial-setup-copy-worker will run again once the session restarts because its stamp file is not present. I made a small change to that script to copy files into the home directory of the new user as opposed to moving them. This should not affect normal sessions, since it only runs for the initially-setup user and only if the stampfile is not present in the user's home directory.
Out of scope for this PR are changes to consolidate the setting up of the live user and the demo user. While there is now a considerable degree of overlap, I'd rather get this merged in first and QA it independently as opposed to potentially accidentally breaking the live session and blocking on that.",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,192,2017-08-08T09:08:50Z,2017-08-21T22:40:22Z,2017-08-21T22:40:25Z,MERGED,True,784,7,27,https://github.com/smspillaz,T18383,6,[],https://github.com/endlessm/gnome-initial-setup/pull/192,https://github.com/smspillaz,4,https://github.com/endlessm/gnome-initial-setup/pull/192#issuecomment-323490966,"Add prompts and hooks in gnome-initial-setup to enter a ""demo mode""
https://phabricator.endlessm.com/T18383","@cosimoc Hmm, GitHub isn't letting me reply to some of your comments:

I don't like the solution and I think it will have unintended side-effects; for instance if you go through the FBE normally create an user, log out and then log in again, the settings will be again overwritten unless you reboot.

In this case, we could prevent the copy-worker from running by setting its AutostartCondition to unless-exists gnome-initial-setup-done (same as gnome-initial-setup-first-login.desktop). Actually, it is surprising that it does not already have that condition and we should probably add it anyway.
I think using the copy-worker is a cleaner approach here. There are fewer scripts that need to be run, it leverages existing code in g-i-s and we were partially relying on it before anyway, since things like the timezone, keyboard layout and language will get set in the user's configuration and copied across to the new user account.",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,193,2017-08-17T01:53:18Z,2017-08-21T17:39:51Z,2017-08-21T17:39:54Z,MERGED,True,60,4,2,https://github.com/cosimoc,language: allow to specify initial languages from vendor.conf,1,[],https://github.com/endlessm/gnome-initial-setup/pull/193,https://github.com/cosimoc,1,https://github.com/endlessm/gnome-initial-setup/pull/193,"Instead of hardcoding the initial list, we can use vendor.conf to seed
it; we still use the hardcoded defaults when that's not the case.
https://phabricator.endlessm.com/T17467","Instead of hardcoding the initial list, we can use vendor.conf to seed
it; we still use the hardcoded defaults when that's not the case.
https://phabricator.endlessm.com/T17467",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,194,2017-08-23T12:50:19Z,2017-08-29T21:01:25Z,2017-08-29T21:01:27Z,MERGED,True,279,23,9,https://github.com/wjt,"live-chooser: refer to DVD, not USB, if booted from DVD",12,[],https://github.com/endlessm/gnome-initial-setup/pull/194,https://github.com/wjt,1,https://github.com/endlessm/gnome-initial-setup/pull/194,https://phabricator.endlessm.com/T18708,https://phabricator.endlessm.com/T18708,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,195,2017-08-24T01:13:15Z,2017-08-25T05:16:57Z,2017-08-25T05:16:59Z,MERGED,True,11,0,1,https://github.com/cosimoc,language: make sure initial language is always at the top,1,[],https://github.com/endlessm/gnome-initial-setup/pull/195,https://github.com/cosimoc,1,https://github.com/endlessm/gnome-initial-setup/pull/195,"It could be confusing to have to scroll back to see other languages;
make sure the initial language is always the first in the list.
https://phabricator.endlessm.com/T17467","It could be confusing to have to scroll back to see other languages;
make sure the initial language is always the first in the list.
https://phabricator.endlessm.com/T17467",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,196,2017-08-24T13:45:18Z,2017-08-24T18:41:19Z,2017-08-24T18:41:23Z,MERGED,True,21,55,4,https://github.com/smspillaz,page-util: Tidy up language for demo mode dialog,3,[],https://github.com/endlessm/gnome-initial-setup/pull/196,https://github.com/smspillaz,1,https://github.com/endlessm/gnome-initial-setup/pull/196,https://phabricator.endlessm.com/T18734,https://phabricator.endlessm.com/T18734,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,196,2017-08-24T13:45:18Z,2017-08-24T18:41:19Z,2017-08-24T18:41:23Z,MERGED,True,21,55,4,https://github.com/smspillaz,page-util: Tidy up language for demo mode dialog,3,[],https://github.com/endlessm/gnome-initial-setup/pull/196,https://github.com/sgnn7,2,https://github.com/endlessm/gnome-initial-setup/pull/196#issuecomment-324646282,https://phabricator.endlessm.com/T18734,@smspillaz Wrong issue tagged I think,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,197,2017-08-28T09:25:22Z,2017-08-28T10:34:33Z,2017-09-05T23:50:32Z,MERGED,True,3,1,2,https://github.com/erikos,demo-mode: process eos-demo-video.desktop file,1,[],https://github.com/endlessm/gnome-initial-setup/pull/197,https://github.com/erikos,1,https://github.com/endlessm/gnome-initial-setup/pull/197,This fixes video playback: https://phabricator.endlessm.com/T18955,This fixes video playback: https://phabricator.endlessm.com/T18955,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,198,2017-08-28T11:23:11Z,2017-08-28T23:12:33Z,2017-08-28T23:12:35Z,MERGED,True,12,16,1,https://github.com/erikos,demo mode: hook up cancel button to hide the dialog,2,[],https://github.com/endlessm/gnome-initial-setup/pull/198,https://github.com/erikos,1,https://github.com/endlessm/gnome-initial-setup/pull/198,This is a follow up for https://phabricator.endlessm.com/T18734,This is a follow up for https://phabricator.endlessm.com/T18734,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,199,2017-08-30T09:56:06Z,2017-08-30T16:34:52Z,2017-08-30T16:34:54Z,MERGED,True,2,0,2,https://github.com/wjt,Add libudisks2 dependency,1,[],https://github.com/endlessm/gnome-initial-setup/pull/199,https://github.com/wjt,1,https://github.com/endlessm/gnome-initial-setup/pull/199,https://phabricator.endlessm.com/T18708,https://phabricator.endlessm.com/T18708,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,200,2017-08-30T20:29:05Z,2017-08-31T16:39:10Z,2017-08-31T16:39:13Z,MERGED,True,1,1,1,https://github.com/erikos,Demo mode: update phrasing of the dialog message,1,[],https://github.com/endlessm/gnome-initial-setup/pull/200,https://github.com/erikos,1,https://github.com/endlessm/gnome-initial-setup/pull/200,https://phabricator.endlessm.com/T18996,https://phabricator.endlessm.com/T18996,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,201,2017-08-31T06:23:32Z,2017-08-31T15:41:17Z,2017-09-05T23:50:26Z,MERGED,True,3,0,1,https://github.com/smspillaz,endless: Don't show EULA in demo mode,1,[],https://github.com/endlessm/gnome-initial-setup/pull/201,https://github.com/smspillaz,1,https://github.com/endlessm/gnome-initial-setup/pull/201,https://phabricator.endlessm.com/T19000,https://phabricator.endlessm.com/T19000,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,202,2017-08-31T07:35:25Z,2017-09-01T23:44:32Z,2017-09-01T23:44:34Z,MERGED,True,43,4,3,https://github.com/smspillaz,T18995: Indicate visually that we are in demo mode,3,[],https://github.com/endlessm/gnome-initial-setup/pull/202,https://github.com/smspillaz,1,https://github.com/endlessm/gnome-initial-setup/pull/202,https://phabricator.endlessm.com/T18995,https://phabricator.endlessm.com/T18995,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,203,2017-09-01T01:15:46Z,2017-12-07T18:42:43Z,2017-12-07T18:42:45Z,MERGED,True,1,10,2,https://github.com/cosimoc,"Revert ""password: Enable Show Password by default""",1,[],https://github.com/endlessm/gnome-initial-setup/pull/203,https://github.com/cosimoc,1,https://github.com/endlessm/gnome-initial-setup/pull/203,"This reverts commit deef21c.
https://phabricator.endlessm.com/T18591","This reverts commit deef21c.
https://phabricator.endlessm.com/T18591",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,204,2017-09-01T20:48:28Z,2017-09-02T00:00:42Z,2017-09-05T23:49:45Z,MERGED,True,3,0,1,https://github.com/cosimoc,page-util: don't enter demo mode for live sessions,1,[],https://github.com/endlessm/gnome-initial-setup/pull/204,https://github.com/cosimoc,1,https://github.com/endlessm/gnome-initial-setup/pull/204,https://phabricator.endlessm.com/T19032,https://phabricator.endlessm.com/T19032,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,204,2017-09-01T20:48:28Z,2017-09-02T00:00:42Z,2017-09-05T23:49:45Z,MERGED,True,3,0,1,https://github.com/cosimoc,page-util: don't enter demo mode for live sessions,1,[],https://github.com/endlessm/gnome-initial-setup/pull/204,https://github.com/smspillaz,2,https://github.com/endlessm/gnome-initial-setup/pull/204#issuecomment-326706954,https://phabricator.endlessm.com/T19032,"I guess this works for now, though I thought we would have just had a gsetting set by the image builder so that we could disable this on an image-by-image basis.",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,205,2017-09-01T23:22:17Z,2017-09-02T00:08:55Z,2017-09-05T23:50:00Z,MERGED,True,0,7,1,https://github.com/cosimoc,endless-eula: fix regression when setting metrics state,1,[],https://github.com/endlessm/gnome-initial-setup/pull/205,https://github.com/cosimoc,1,https://github.com/endlessm/gnome-initial-setup/pull/205,"#161 changed g-i-s
to only set the metrics enabled state at the end of the FBE; the change
from commit 21076e2 was lost during
our rebase for eos3.2. Make sure to apply that code again.
https://phabricator.endlessm.com/T18943","#161 changed g-i-s
to only set the metrics enabled state at the end of the FBE; the change
from commit 21076e2 was lost during
our rebase for eos3.2. Make sure to apply that code again.
https://phabricator.endlessm.com/T18943",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,205,2017-09-01T23:22:17Z,2017-09-02T00:08:55Z,2017-09-05T23:50:00Z,MERGED,True,0,7,1,https://github.com/cosimoc,endless-eula: fix regression when setting metrics state,1,[],https://github.com/endlessm/gnome-initial-setup/pull/205,https://github.com/smspillaz,2,https://github.com/endlessm/gnome-initial-setup/pull/205#issuecomment-326706857,"#161 changed g-i-s
to only set the metrics enabled state at the end of the FBE; the change
from commit 21076e2 was lost during
our rebase for eos3.2. Make sure to apply that code again.
https://phabricator.endlessm.com/T18943",lgtm,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,206,2017-09-02T00:42:43Z,2017-09-05T18:29:53Z,2017-09-05T18:29:56Z,MERGED,True,76,26,6,https://github.com/cosimoc,T18984,2,[],https://github.com/endlessm/gnome-initial-setup/pull/206,https://github.com/cosimoc,1,https://github.com/endlessm/gnome-initial-setup/pull/206,https://phabricator.endlessm.com/T18984,https://phabricator.endlessm.com/T18984,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,206,2017-09-02T00:42:43Z,2017-09-05T18:29:53Z,2017-09-05T18:29:56Z,MERGED,True,76,26,6,https://github.com/cosimoc,T18984,2,[],https://github.com/endlessm/gnome-initial-setup/pull/206,https://github.com/smspillaz,2,https://github.com/endlessm/gnome-initial-setup/pull/206#issuecomment-326750910,https://phabricator.endlessm.com/T18984,This looks good to me - tested the code and it works fine. Thanks.,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,207,2017-09-04T08:56:24Z,2017-12-06T12:15:06Z,2017-12-06T12:15:10Z,MERGED,True,69,5,4,https://github.com/smspillaz,T18983,1,[],https://github.com/endlessm/gnome-initial-setup/pull/207,https://github.com/smspillaz,1,https://github.com/endlessm/gnome-initial-setup/pull/207,"Reset the machine id and record a metric when we enter demo mode. Metrics will be set to enabled by default.
https://phabricator.endlessm.com/T18983","Reset the machine id and record a metric when we enter demo mode. Metrics will be set to enabled by default.
https://phabricator.endlessm.com/T18983",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,208,2017-09-05T18:43:03Z,2017-09-05T19:09:56Z,2017-09-05T19:09:59Z,MERGED,True,16,3,2,https://github.com/erikos,Language page: hide enter-store-demo button when in demo mode,2,[],https://github.com/endlessm/gnome-initial-setup/pull/208,https://github.com/erikos,1,https://github.com/endlessm/gnome-initial-setup/pull/208,https://phabricator.endlessm.com/T18984,https://phabricator.endlessm.com/T18984,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,209,2017-09-05T22:31:41Z,2017-09-07T04:56:47Z,2017-09-07T04:56:49Z,MERGED,True,22,16,3,https://github.com/erikos,Demo mode: add support to install/uninstall flatpaks,3,[],https://github.com/endlessm/gnome-initial-setup/pull/209,https://github.com/erikos,1,https://github.com/endlessm/gnome-initial-setup/pull/209,https://phabricator.endlessm.com/T18999,https://phabricator.endlessm.com/T18999,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,210,2017-09-05T23:20:09Z,2017-09-05T23:39:17Z,2017-09-05T23:39:21Z,MERGED,True,3,3,4,https://github.com/cosimoc,Add new asset for the demo video,1,[],https://github.com/endlessm/gnome-initial-setup/pull/210,https://github.com/cosimoc,1,https://github.com/endlessm/gnome-initial-setup/pull/210,https://phabricator.endlessm.com/T18988,https://phabricator.endlessm.com/T18988,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,211,2017-09-06T00:57:37Z,2017-09-06T01:42:05Z,2017-09-06T10:33:47Z,MERGED,True,88,18,1,https://github.com/cosimoc,T18984,2,[],https://github.com/endlessm/gnome-initial-setup/pull/211,https://github.com/cosimoc,1,https://github.com/endlessm/gnome-initial-setup/pull/211,https://phabricator.endlessm.com/T18984,https://phabricator.endlessm.com/T18984,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,211,2017-09-06T00:57:37Z,2017-09-06T01:42:05Z,2017-09-06T10:33:47Z,MERGED,True,88,18,1,https://github.com/cosimoc,T18984,2,[],https://github.com/endlessm/gnome-initial-setup/pull/211,https://github.com/smspillaz,2,https://github.com/endlessm/gnome-initial-setup/pull/211#issuecomment-327344348,https://phabricator.endlessm.com/T18984,"looks good to me, maybe @wjt should have a look too",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,211,2017-09-06T00:57:37Z,2017-09-06T01:42:05Z,2017-09-06T10:33:47Z,MERGED,True,88,18,1,https://github.com/cosimoc,T18984,2,[],https://github.com/endlessm/gnome-initial-setup/pull/211,https://github.com/wjt,3,https://github.com/endlessm/gnome-initial-setup/pull/211#issuecomment-327444162,https://phabricator.endlessm.com/T18984,"looks good to me, maybe @wjt should have a look too

Well, I was asleep in the gap between that comment and the PR being merged. It looks fine :)",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,212,2017-09-06T13:56:19Z,2017-09-06T19:37:44Z,2017-09-06T19:37:47Z,MERGED,True,71,135,6,https://github.com/wjt,driver: determine DVD-ness from image version,3,[],https://github.com/endlessm/gnome-initial-setup/pull/212,https://github.com/wjt,1,https://github.com/endlessm/gnome-initial-setup/pull/212,"This is not as aesthetically pleasing as using UDisks and will produce incorrect results if a non-eosdvd ISO (ie base – no others fit) is written to DVD or an eosdvd ISO is written to USB.
But the UDisks approach does not actually work: when booted from a DVD, for annoying reasons the udev properties indicating the media in the drive are missing for the DVD device, so UDisks doesn't believe it to be an optical device.
This approach is simpler and easier to test.
I reused (and deduplicated) the logic used to trigger the demo mode label. I gave it a quick spin in all these conditions:

/sysroot has eos-image-version eosoem-foo, not live mode => label
/sysroot has eos-image-version eosoem-foo, live mode => no label, Ctrl-D does nothing
/sysroot has no eos-image-version, / has eos-image-version eos-... => no label, Ctrl-D shows dialog

https://phabricator.endlessm.com/T18708","This is not as aesthetically pleasing as using UDisks and will produce incorrect results if a non-eosdvd ISO (ie base – no others fit) is written to DVD or an eosdvd ISO is written to USB.
But the UDisks approach does not actually work: when booted from a DVD, for annoying reasons the udev properties indicating the media in the drive are missing for the DVD device, so UDisks doesn't believe it to be an optical device.
This approach is simpler and easier to test.
I reused (and deduplicated) the logic used to trigger the demo mode label. I gave it a quick spin in all these conditions:

/sysroot has eos-image-version eosoem-foo, not live mode => label
/sysroot has eos-image-version eosoem-foo, live mode => no label, Ctrl-D does nothing
/sysroot has no eos-image-version, / has eos-image-version eos-... => no label, Ctrl-D shows dialog

https://phabricator.endlessm.com/T18708",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,213,2017-09-06T14:11:33Z,2017-09-06T19:38:26Z,2017-09-06T19:38:28Z,MERGED,True,0,2,2,https://github.com/wjt,"Revert ""Add libudisks2 dependency""",1,[],https://github.com/endlessm/gnome-initial-setup/pull/213,https://github.com/wjt,1,https://github.com/endlessm/gnome-initial-setup/pull/213,"This reverts commit 4d0a660.
Depends on #212
https://phabricator.endlessm.com/T18708","This reverts commit 4d0a660.
Depends on #212
https://phabricator.endlessm.com/T18708",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,214,2017-09-06T22:38:30Z,2017-09-06T23:14:57Z,2017-09-06T23:14:59Z,MERGED,True,1,0,1,https://github.com/cosimoc,language: don't track visited links for demo mode label,1,[],https://github.com/endlessm/gnome-initial-setup/pull/214,https://github.com/cosimoc,1,https://github.com/endlessm/gnome-initial-setup/pull/214,"Or it will change color after the first click...
https://phabricator.endlessm.com/T19100","Or it will change color after the first click...
https://phabricator.endlessm.com/T19100",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,215,2017-09-07T17:10:52Z,2017-09-07T19:35:39Z,2017-09-07T19:35:43Z,MERGED,True,1,6,1,https://github.com/cosimoc,"Revert ""demo-mode: check that /run/gnome-initial-setup/eos-demo-mode …",1,[],https://github.com/endlessm/gnome-initial-setup/pull/215,https://github.com/cosimoc,1,https://github.com/endlessm/gnome-initial-setup/pull/215,"…exists""
polkit.spawn() will spawn the process using the polkitd user, which
won't have access to that file.
This reverts commit d9dc63e.
https://phabricator.endlessm.com/T18999","…exists""
polkit.spawn() will spawn the process using the polkitd user, which
won't have access to that file.
This reverts commit d9dc63e.
https://phabricator.endlessm.com/T18999",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,216,2017-09-07T20:58:22Z,2017-09-07T21:24:46Z,2017-09-07T21:24:50Z,MERGED,True,6,7,5,https://github.com/cosimoc,T18708,5,[],https://github.com/endlessm/gnome-initial-setup/pull/216,https://github.com/cosimoc,1,https://github.com/endlessm/gnome-initial-setup/pull/216,https://phabricator.endlessm.com/T18708,https://phabricator.endlessm.com/T18708,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,217,2017-09-08T19:21:21Z,2017-09-08T19:26:58Z,2017-09-08T19:27:01Z,MERGED,True,13,24,1,https://github.com/cosimoc,T17467,3,[],https://github.com/endlessm/gnome-initial-setup/pull/217,https://github.com/cosimoc,1,https://github.com/endlessm/gnome-initial-setup/pull/217,https://phabricator.endlessm.com/T17467,https://phabricator.endlessm.com/T17467,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,218,2017-09-09T00:20:54Z,2017-09-09T00:29:42Z,2017-09-09T00:29:44Z,MERGED,True,29,29,3,https://github.com/cosimoc,T19117,3,[],https://github.com/endlessm/gnome-initial-setup/pull/218,https://github.com/cosimoc,1,https://github.com/endlessm/gnome-initial-setup/pull/218,https://phabricator.endlessm.com/T19117,https://phabricator.endlessm.com/T19117,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,219,2017-09-12T07:31:50Z,2017-09-13T12:10:36Z,2017-09-13T12:10:43Z,MERGED,True,3,2,3,https://github.com/erikos,Demo mode: use as well the default avatar,1,[],https://github.com/endlessm/gnome-initial-setup/pull/219,https://github.com/erikos,1,https://github.com/endlessm/gnome-initial-setup/pull/219,"Use the same default avatar (the sunflower)
as for any other EOS user.
https://phabricator.endlessm.com/T19144","Use the same default avatar (the sunflower)
as for any other EOS user.
https://phabricator.endlessm.com/T19144",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,219,2017-09-12T07:31:50Z,2017-09-13T12:10:36Z,2017-09-13T12:10:43Z,MERGED,True,3,2,3,https://github.com/erikos,Demo mode: use as well the default avatar,1,[],https://github.com/endlessm/gnome-initial-setup/pull/219,https://github.com/smspillaz,2,https://github.com/endlessm/gnome-initial-setup/pull/219#issuecomment-329147818,"Use the same default avatar (the sunflower)
as for any other EOS user.
https://phabricator.endlessm.com/T19144",Looks good to me - thanks for picking this up!,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,220,2017-09-27T16:49:16Z,2017-10-03T08:47:47Z,2017-10-03T08:47:57Z,MERGED,True,9,3,1,https://github.com/cosimoc,endless-eula: create page also in demo mode,1,[],https://github.com/endlessm/gnome-initial-setup/pull/220,https://github.com/cosimoc,1,https://github.com/endlessm/gnome-initial-setup/pull/220,"But make it invisible in that case; this ensures we still call
set_enabled() at the end of the FBE to definitively disable metrics.
https://phabricator.endlessm.com/T19227","But make it invisible in that case; this ensures we still call
set_enabled() at the end of the FBE to definitively disable metrics.
https://phabricator.endlessm.com/T19227",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,221,2017-11-01T15:35:29Z,2017-11-01T15:39:11Z,2017-11-01T15:39:15Z,MERGED,True,8,0,1,https://github.com/mariospr,Don't run gnome-initial-setup for existing users,1,[],https://github.com/endlessm/gnome-initial-setup/pull/221,https://github.com/mariospr,1,https://github.com/endlessm/gnome-initial-setup/pull/221,"Upstream has ""existing user"" mode for new user accounts, but we don't
want that in Endless, so skip it. In the future, we should be launching
the tutorial right from here, once it's again available.
This change was introduced to fix T3727, but got lost during the rebase
to EOS 3.2. It's way simpler now because we don't have a tutorial now,
but in the near future should probably be reworked to launch the new
tutorial, once it's ready.
https://phabricator.endlessm.com/T19802","Upstream has ""existing user"" mode for new user accounts, but we don't
want that in Endless, so skip it. In the future, we should be launching
the tutorial right from here, once it's again available.
This change was introduced to fix T3727, but got lost during the rebase
to EOS 3.2. It's way simpler now because we don't have a tutorial now,
but in the near future should probably be reworked to launch the new
tutorial, once it's ready.
https://phabricator.endlessm.com/T19802",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,222,2017-11-18T00:58:44Z,2017-12-06T12:15:01Z,2017-12-06T12:15:08Z,MERGED,True,1,0,1,https://github.com/smspillaz,debian: Depend on eos-metrics-0-dev,1,[],https://github.com/endlessm/gnome-initial-setup/pull/222,https://github.com/smspillaz,1,https://github.com/endlessm/gnome-initial-setup/pull/222,"We're now reporting a metric
https://phabricator.endlessm.com/T18983","We're now reporting a metric
https://phabricator.endlessm.com/T18983",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,223,2017-12-07T15:24:36Z,2017-12-07T23:35:51Z,2017-12-07T23:35:53Z,MERGED,True,42,0,1,https://github.com/erikos,passwordPage: make latin kbd layout (en) available for password entries,1,[],https://github.com/endlessm/gnome-initial-setup/pull/223,https://github.com/erikos,1,https://github.com/endlessm/gnome-initial-setup/pull/223,"If the current keyboard layout is not a latin one we will add the fallback kbd layout 'en'. This calls out to gnome-shell where the logic to detect the keyboard layout is kept. The layout will be available in the popup switcher and the taskbar keyboard layout switcher.
https://phabricator.endlessm.com/T18598","If the current keyboard layout is not a latin one we will add the fallback kbd layout 'en'. This calls out to gnome-shell where the logic to detect the keyboard layout is kept. The layout will be available in the popup switcher and the taskbar keyboard layout switcher.
https://phabricator.endlessm.com/T18598",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,224,2017-12-13T20:17:45Z,2018-01-09T23:54:29Z,2018-01-09T23:54:32Z,MERGED,True,2,7,3,https://github.com/wjt,Add powerMenu to initial-setup shell mode,3,[],https://github.com/endlessm/gnome-initial-setup/pull/224,https://github.com/wjt,1,https://github.com/endlessm/gnome-initial-setup/pull/224,"At present, there is no obvious way to shut down the system from the
FBE. (The factory test dialog, accessed with Ctrl+F on the first page,
does provide a Power Off button, but this is not user-visible.) This is
annoying if you've booted an Endless OS machine but want someone else to
complete the FBE. It's worse if you're on a live USB and are running the
reformatter, because it does not provide any way to cleanly shut down
the system short of reformatting your system!
Upstream, the power-off options are in the aggregateMenu, but in Endless
they've been moved to the Endless-specific userMenu component. We have
also introduced an Endless-specific powerMenu component for use at the
GDM login screen, so we can just add it to the initial-setup shell mode.
This adds a power-off button to the bottom-right corner of the shell,
allowing you to shut down, restart, or cancel.
https://phabricator.endlessm.com/T20103","At present, there is no obvious way to shut down the system from the
FBE. (The factory test dialog, accessed with Ctrl+F on the first page,
does provide a Power Off button, but this is not user-visible.) This is
annoying if you've booted an Endless OS machine but want someone else to
complete the FBE. It's worse if you're on a live USB and are running the
reformatter, because it does not provide any way to cleanly shut down
the system short of reformatting your system!
Upstream, the power-off options are in the aggregateMenu, but in Endless
they've been moved to the Endless-specific userMenu component. We have
also introduced an Endless-specific powerMenu component for use at the
GDM login screen, so we can just add it to the initial-setup shell mode.
This adds a power-off button to the bottom-right corner of the shell,
allowing you to shut down, restart, or cancel.
https://phabricator.endlessm.com/T20103",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,225,2017-12-19T20:05:29Z,2017-12-19T21:33:33Z,2017-12-19T21:33:35Z,MERGED,True,9,1,1,https://github.com/rshuler,T18591,3,[],https://github.com/endlessm/gnome-initial-setup/pull/225,https://github.com/rshuler,1,https://github.com/endlessm/gnome-initial-setup/pull/225,https://phabricator.endlessm.com/T18591,https://phabricator.endlessm.com/T18591,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,226,2018-02-13T17:05:35Z,2018-02-15T15:53:23Z,2018-02-15T15:53:27Z,MERGED,True,327,470,13,https://github.com/wjt,Deduplicate live and demo mode setup,16,[],https://github.com/endlessm/gnome-initial-setup/pull/226,https://github.com/wjt,1,https://github.com/endlessm/gnome-initial-setup/pull/226,"This PR started as an attempt to reduce the overlap between eos-setup-live-user and gnome-initial-setup-copy-worker, by moving all of the former's functions to a system-wide service launched by systemd. I then realised that entering demo mode performs many of the same configuration changes, so unified the two.
The top commit is filed upstream here so it would be great to have that reviewed there by whomever reviews it here. It seems Obviously Correct™ since it deletes an unused file…
I have tested these changes on a converted system by building a new gnome-initial-setup .deb and installing it, then booting the system in the following ways:

Add gdm.force-initial-setup to the kernel command line, then:

complete the FBE normally
enter test mode
enter demo mode, observing that the relevant settings changes still apply


Add gdm.force-initial-setup endless.live_boot to the kernel command line, then follow the ""Try Endless"" flow.

There are still some warnings in the journal from gnome-initial-setup-copy-worker but I think they are spurious, and are already present in the normal FBE flow. eg. copying .config/gnome-initial-setup-done fails with EEXIST which I believe is caused by the --existing-user mode launched from all user sessions touching this stamp file too – it's a race. I avoided going down this unrelated rabbit hole as part of this change!
https://phabricator.endlessm.com/T16130","This PR started as an attempt to reduce the overlap between eos-setup-live-user and gnome-initial-setup-copy-worker, by moving all of the former's functions to a system-wide service launched by systemd. I then realised that entering demo mode performs many of the same configuration changes, so unified the two.
The top commit is filed upstream here so it would be great to have that reviewed there by whomever reviews it here. It seems Obviously Correct™ since it deletes an unused file…
I have tested these changes on a converted system by building a new gnome-initial-setup .deb and installing it, then booting the system in the following ways:

Add gdm.force-initial-setup to the kernel command line, then:

complete the FBE normally
enter test mode
enter demo mode, observing that the relevant settings changes still apply


Add gdm.force-initial-setup endless.live_boot to the kernel command line, then follow the ""Try Endless"" flow.

There are still some warnings in the journal from gnome-initial-setup-copy-worker but I think they are spurious, and are already present in the normal FBE flow. eg. copying .config/gnome-initial-setup-done fails with EEXIST which I believe is caused by the --existing-user mode launched from all user sessions touching this stamp file too – it's a race. I avoided going down this unrelated rabbit hole as part of this change!
https://phabricator.endlessm.com/T16130",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,226,2018-02-13T17:05:35Z,2018-02-15T15:53:23Z,2018-02-15T15:53:27Z,MERGED,True,327,470,13,https://github.com/wjt,Deduplicate live and demo mode setup,16,[],https://github.com/endlessm/gnome-initial-setup/pull/226,https://github.com/wjt,2,https://github.com/endlessm/gnome-initial-setup/pull/226#issuecomment-365956242,"This PR started as an attempt to reduce the overlap between eos-setup-live-user and gnome-initial-setup-copy-worker, by moving all of the former's functions to a system-wide service launched by systemd. I then realised that entering demo mode performs many of the same configuration changes, so unified the two.
The top commit is filed upstream here so it would be great to have that reviewed there by whomever reviews it here. It seems Obviously Correct™ since it deletes an unused file…
I have tested these changes on a converted system by building a new gnome-initial-setup .deb and installing it, then booting the system in the following ways:

Add gdm.force-initial-setup to the kernel command line, then:

complete the FBE normally
enter test mode
enter demo mode, observing that the relevant settings changes still apply


Add gdm.force-initial-setup endless.live_boot to the kernel command line, then follow the ""Try Endless"" flow.

There are still some warnings in the journal from gnome-initial-setup-copy-worker but I think they are spurious, and are already present in the normal FBE flow. eg. copying .config/gnome-initial-setup-done fails with EEXIST which I believe is caused by the --existing-user mode launched from all user sessions touching this stamp file too – it's a race. I avoided going down this unrelated rabbit hole as part of this change!
https://phabricator.endlessm.com/T16130","I pushed a couple of commits addressing @smspillaz's points that I haven't replied to above.
To a question elsewhere:

how is eos-transient-setup invoked by gnome-initial-setup when we enter the demo mode? Is it just done the same way through gis_pkexec, or is it done through spawning the systemd service?

It's called by the eos-demo-mode script.",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,226,2018-02-13T17:05:35Z,2018-02-15T15:53:23Z,2018-02-15T15:53:27Z,MERGED,True,327,470,13,https://github.com/wjt,Deduplicate live and demo mode setup,16,[],https://github.com/endlessm/gnome-initial-setup/pull/226,https://github.com/smspillaz,3,https://github.com/endlessm/gnome-initial-setup/pull/226#issuecomment-365959943,"This PR started as an attempt to reduce the overlap between eos-setup-live-user and gnome-initial-setup-copy-worker, by moving all of the former's functions to a system-wide service launched by systemd. I then realised that entering demo mode performs many of the same configuration changes, so unified the two.
The top commit is filed upstream here so it would be great to have that reviewed there by whomever reviews it here. It seems Obviously Correct™ since it deletes an unused file…
I have tested these changes on a converted system by building a new gnome-initial-setup .deb and installing it, then booting the system in the following ways:

Add gdm.force-initial-setup to the kernel command line, then:

complete the FBE normally
enter test mode
enter demo mode, observing that the relevant settings changes still apply


Add gdm.force-initial-setup endless.live_boot to the kernel command line, then follow the ""Try Endless"" flow.

There are still some warnings in the journal from gnome-initial-setup-copy-worker but I think they are spurious, and are already present in the normal FBE flow. eg. copying .config/gnome-initial-setup-done fails with EEXIST which I believe is caused by the --existing-user mode launched from all user sessions touching this stamp file too – it's a race. I avoided going down this unrelated rabbit hole as part of this change!
https://phabricator.endlessm.com/T16130","It's called by the eos-demo-mode script.

Thanks for clarifying!",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,227,2018-02-23T14:32:35Z,2018-02-28T11:51:16Z,2018-02-28T11:51:19Z,MERGED,True,235,80,7,https://github.com/wjt,Adjust for use on eosinstaller images,6,[],https://github.com/endlessm/gnome-initial-setup/pull/227,https://github.com/wjt,1,https://github.com/endlessm/gnome-initial-setup/pull/227,"Historically, eosinstaller images did not include gnome-initial-setup.  Instead, the eos-installer-standalone package installed replacement files to cause gdm to launch eos-installer directly, instead.
This avoided any changes to gnome-initial-setup itself. But unfortunately it introduced its own problems: gnome-initial-setup is moderately coupled to the corresponding versions of gdm and gnome-shell, so eos-installer's copies of the initial-setup session and shell mode had to be manually kept in sync with each GNOME rebase.
Since this was originally implemented, we added support for combined live + installer images, and taught gnome-initial-setup how to launch eos-installer. At this point, it is simpler to include the real gnome-initial-setup in eosinstaller images, too, and make it unconditionally launch eos-installer after the language selection page.  This brings the eosinstaller image closer to the (much more frequently tested) ISOs.
https://phabricator.endlessm.com/T17082
This PR also includes (one half of) a fix for https://phabricator.endlessm.com/T14616, and some fixes for related bugs. endlessm/eos-installer#73 and endlessm/eos-installer#74 are the eos-installer counterparts. All three PRs must be merged at once.","Historically, eosinstaller images did not include gnome-initial-setup.  Instead, the eos-installer-standalone package installed replacement files to cause gdm to launch eos-installer directly, instead.
This avoided any changes to gnome-initial-setup itself. But unfortunately it introduced its own problems: gnome-initial-setup is moderately coupled to the corresponding versions of gdm and gnome-shell, so eos-installer's copies of the initial-setup session and shell mode had to be manually kept in sync with each GNOME rebase.
Since this was originally implemented, we added support for combined live + installer images, and taught gnome-initial-setup how to launch eos-installer. At this point, it is simpler to include the real gnome-initial-setup in eosinstaller images, too, and make it unconditionally launch eos-installer after the language selection page.  This brings the eosinstaller image closer to the (much more frequently tested) ISOs.
https://phabricator.endlessm.com/T17082
This PR also includes (one half of) a fix for https://phabricator.endlessm.com/T14616, and some fixes for related bugs. endlessm/eos-installer#73 and endlessm/eos-installer#74 are the eos-installer counterparts. All three PRs must be merged at once.",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,228,2018-03-01T18:53:30Z,2018-07-17T21:36:39Z,2018-07-17T21:36:44Z,CLOSED,False,73948,17818,241,https://github.com/erikos,EOS-Video-Demo: start video playing when window is realized,233,[],https://github.com/endlessm/gnome-initial-setup/pull/228,https://github.com/erikos,1,https://github.com/endlessm/gnome-initial-setup/pull/228,https://phabricator.endlessm.com/T19087,https://phabricator.endlessm.com/T19087,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,228,2018-03-01T18:53:30Z,2018-07-17T21:36:39Z,2018-07-17T21:36:44Z,CLOSED,False,73948,17818,241,https://github.com/erikos,EOS-Video-Demo: start video playing when window is realized,233,[],https://github.com/endlessm/gnome-initial-setup/pull/228,https://github.com/smspillaz,2,https://github.com/endlessm/gnome-initial-setup/pull/228#issuecomment-369716548,https://phabricator.endlessm.com/T19087,LGTM,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,228,2018-03-01T18:53:30Z,2018-07-17T21:36:39Z,2018-07-17T21:36:44Z,CLOSED,False,73948,17818,241,https://github.com/erikos,EOS-Video-Demo: start video playing when window is realized,233,[],https://github.com/endlessm/gnome-initial-setup/pull/228,https://github.com/erikos,3,https://github.com/endlessm/gnome-initial-setup/pull/228#issuecomment-369720606,https://phabricator.endlessm.com/T19087,"Thanks Sam, to me too, though, it does not bring any improvements sadly. I tested with installing it and forcing the demo mode.",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,229,2018-03-02T20:21:06Z,2018-03-07T14:01:54Z,2018-03-07T14:05:02Z,MERGED,True,147,106,5,https://github.com/wjt,Improve transition between FBE and eos-installer on eosinstaller images,3,[],https://github.com/endlessm/gnome-initial-setup/pull/229,https://github.com/wjt,1,https://github.com/endlessm/gnome-initial-setup/pull/229,"Previously, on reformatter-only images, the language page would advance to the live-chooser page, which would immediately hide the FBE and launch eos-installer. When that process exited, the live-chooser page would re-show the FBE and move to the language page.
As well as being awkward, if animations are enabled (as they are on most non-VM systems) then the transition back to the language page is not instantaneous, so you see a flash of the live-chooser page when eos-installer exits.
To solve this, move the hide-launch-wait-reshow logic to gis-page-util, and launch eos-installer directly from the language page when the user clicks Next. To avoid actually advancing to the next page, we (ab)use the ->apply() vfunc, which is intended to be used by pages like the keyboard page which need to asynchronously change system settings when you hit Next, delaying the transition to the next page, and blocking it in the event that the operation fails. In this case, the asynchronous operation is to launch eos-installer, wait for it to terminate, and always report that ->apply() failed.
This also incorporates a small bugfix that I've sent upstream on a miscellaneous cleanup ticket.
https://phabricator.endlessm.com/T14616","Previously, on reformatter-only images, the language page would advance to the live-chooser page, which would immediately hide the FBE and launch eos-installer. When that process exited, the live-chooser page would re-show the FBE and move to the language page.
As well as being awkward, if animations are enabled (as they are on most non-VM systems) then the transition back to the language page is not instantaneous, so you see a flash of the live-chooser page when eos-installer exits.
To solve this, move the hide-launch-wait-reshow logic to gis-page-util, and launch eos-installer directly from the language page when the user clicks Next. To avoid actually advancing to the next page, we (ab)use the ->apply() vfunc, which is intended to be used by pages like the keyboard page which need to asynchronously change system settings when you hit Next, delaying the transition to the next page, and blocking it in the event that the operation fails. In this case, the asynchronous operation is to launch eos-installer, wait for it to terminate, and always report that ->apply() failed.
This also incorporates a small bugfix that I've sent upstream on a miscellaneous cleanup ticket.
https://phabricator.endlessm.com/T14616",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,229,2018-03-02T20:21:06Z,2018-03-07T14:01:54Z,2018-03-07T14:05:02Z,MERGED,True,147,106,5,https://github.com/wjt,Improve transition between FBE and eos-installer on eosinstaller images,3,[],https://github.com/endlessm/gnome-initial-setup/pull/229,https://github.com/joaquimrocha,2,https://github.com/endlessm/gnome-initial-setup/pull/229#issuecomment-371136074,"Previously, on reformatter-only images, the language page would advance to the live-chooser page, which would immediately hide the FBE and launch eos-installer. When that process exited, the live-chooser page would re-show the FBE and move to the language page.
As well as being awkward, if animations are enabled (as they are on most non-VM systems) then the transition back to the language page is not instantaneous, so you see a flash of the live-chooser page when eos-installer exits.
To solve this, move the hide-launch-wait-reshow logic to gis-page-util, and launch eos-installer directly from the language page when the user clicks Next. To avoid actually advancing to the next page, we (ab)use the ->apply() vfunc, which is intended to be used by pages like the keyboard page which need to asynchronously change system settings when you hit Next, delaying the transition to the next page, and blocking it in the event that the operation fails. In this case, the asynchronous operation is to launch eos-installer, wait for it to terminate, and always report that ->apply() failed.
This also incorporates a small bugfix that I've sent upstream on a miscellaneous cleanup ticket.
https://phabricator.endlessm.com/T14616",I am approving the changes as I said I'd not block on the GTask issue. I will let you decide if you change it or merge as is.,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,230,2018-04-24T14:27:04Z,2018-04-26T09:15:15Z,2018-07-17T21:36:04Z,MERGED,True,2612,92,10,https://github.com/mariospr,Reimplement the Display page using org.gnome.Mutter.DisplayConfig,2,[],https://github.com/endlessm/gnome-initial-setup/pull/230,https://github.com/mariospr,1,https://github.com/endlessm/gnome-initial-setup/pull/230,https://phabricator.endlessm.com/T21591,https://phabricator.endlessm.com/T21591,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,230,2018-04-24T14:27:04Z,2018-04-26T09:15:15Z,2018-07-17T21:36:04Z,MERGED,True,2612,92,10,https://github.com/mariospr,Reimplement the Display page using org.gnome.Mutter.DisplayConfig,2,[],https://github.com/endlessm/gnome-initial-setup/pull/230,https://github.com/mariospr,2,https://github.com/endlessm/gnome-initial-setup/pull/230#issuecomment-384207703,https://phabricator.endlessm.com/T21591,"Updated the PR. Please do NOT merge if the review is approved. I'll squash those fixups and merge myself, thanks.",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,230,2018-04-24T14:27:04Z,2018-04-26T09:15:15Z,2018-07-17T21:36:04Z,MERGED,True,2612,92,10,https://github.com/mariospr,Reimplement the Display page using org.gnome.Mutter.DisplayConfig,2,[],https://github.com/endlessm/gnome-initial-setup/pull/230,https://github.com/mariospr,3,https://github.com/endlessm/gnome-initial-setup/pull/230#issuecomment-384571227,https://phabricator.endlessm.com/T21591,"Thanks, all pushed and merged now. Additionally, I decided to squash the first commit into the last one as well, since that changeset removing the dependency on GnomeRR (and replacing it with TODO comments) was useful for the process of porting to the new D-Bus API, but I don't think it adds much value to keep it in the repository.",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,231,2018-04-25T14:40:11Z,2018-04-26T14:59:12Z,2018-04-26T14:59:18Z,MERGED,True,23,0,1,https://github.com/mariospr,Don't use a previously introduced password for non protected accounts,1,[],https://github.com/endlessm/gnome-initial-setup/pull/231,https://github.com/mariospr,1,https://github.com/endlessm/gnome-initial-setup/pull/231,https://phabricator.endlessm.com/T22042,https://phabricator.endlessm.com/T22042,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,231,2018-04-25T14:40:11Z,2018-04-26T14:59:12Z,2018-04-26T14:59:18Z,MERGED,True,23,0,1,https://github.com/mariospr,Don't use a previously introduced password for non protected accounts,1,[],https://github.com/endlessm/gnome-initial-setup/pull/231,https://github.com/mariospr,2,https://github.com/endlessm/gnome-initial-setup/pull/231#issuecomment-384581851,https://phabricator.endlessm.com/T22042,Updated the PR after clarification from @cosimoc on Slack,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,232,2018-04-26T16:32:19Z,2018-04-26T17:47:57Z,2018-04-26T18:21:01Z,MERGED,True,2,5,1,https://github.com/mariospr,password: Relax requirements to validate the password page,1,[],https://github.com/endlessm/gnome-initial-setup/pull/232,https://github.com/mariospr,1,https://github.com/endlessm/gnome-initial-setup/pull/232,"Upstream won't let users create an account if the password is considered
too weak (i.e. ""bad""), but we don't want to be that restrictive, so let's
remove that requirement and simply consider a password good enough as
long as it's a non-empty string.
https://phabricator.endlessm.com/T22042","Upstream won't let users create an account if the password is considered
too weak (i.e. ""bad""), but we don't want to be that restrictive, so let's
remove that requirement and simply consider a password good enough as
long as it's a non-empty string.
https://phabricator.endlessm.com/T22042",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,233,2018-04-30T19:06:43Z,2018-04-30T19:19:32Z,2018-04-30T19:19:38Z,MERGED,True,2,2,1,https://github.com/rshuler,Increase default window size,1,[],https://github.com/endlessm/gnome-initial-setup/pull/233,https://github.com/rshuler,1,https://github.com/endlessm/gnome-initial-setup/pull/233,"Let's use more of the available real estate so that we can
fit more options.  For example, this increases the number of
WiFi network options displayed from 3 to 4.
Note that this specification of 800x600 leads to an effective
window size of 748x548.
On future rebases, this can be squashed with
d5b0298, where we had
changed from the upstream default of 1024x768.
https://phabricator.endlessm.com/T22165","Let's use more of the available real estate so that we can
fit more options.  For example, this increases the number of
WiFi network options displayed from 3 to 4.
Note that this specification of 800x600 leads to an effective
window size of 748x548.
On future rebases, this can be squashed with
d5b0298, where we had
changed from the upstream default of 1024x768.
https://phabricator.endlessm.com/T22165",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,234,2018-05-09T21:32:44Z,2018-05-10T18:00:03Z,2018-05-10T18:00:06Z,MERGED,True,29,4,4,https://github.com/rshuler,T21443,2,[],https://github.com/endlessm/gnome-initial-setup/pull/234,https://github.com/rshuler,1,https://github.com/endlessm/gnome-initial-setup/pull/234,https://phabricator.endlessm.com/T21443,https://phabricator.endlessm.com/T21443,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,235,2018-05-15T18:41:41Z,2018-05-22T00:57:53Z,2018-05-22T00:57:55Z,MERGED,True,1797,1,17,https://github.com/treitter,site: add page to track site-specific details for deployments,4,[],https://github.com/endlessm/gnome-initial-setup/pull/235,https://github.com/treitter,1,https://github.com/endlessm/gnome-initial-setup/pull/235,"These details will be included in metrics messages.
See README.md file for more details.
https://phabricator.endlessm.com/T18842","These details will be included in metrics messages.
See README.md file for more details.
https://phabricator.endlessm.com/T18842",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,235,2018-05-15T18:41:41Z,2018-05-22T00:57:53Z,2018-05-22T00:57:55Z,MERGED,True,1797,1,17,https://github.com/treitter,site: add page to track site-specific details for deployments,4,[],https://github.com/endlessm/gnome-initial-setup/pull/235,https://github.com/treitter,2,https://github.com/endlessm/gnome-initial-setup/pull/235#issuecomment-389708990,"These details will be included in metrics messages.
See README.md file for more details.
https://phabricator.endlessm.com/T18842",Thanks for the detailed review! I force-pushed a new version of the branch that should address all of these issues.,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,235,2018-05-15T18:41:41Z,2018-05-22T00:57:53Z,2018-05-22T00:57:55Z,MERGED,True,1797,1,17,https://github.com/treitter,site: add page to track site-specific details for deployments,4,[],https://github.com/endlessm/gnome-initial-setup/pull/235,https://github.com/treitter,3,https://github.com/endlessm/gnome-initial-setup/pull/235#issuecomment-390280591,"These details will be included in metrics messages.
See README.md file for more details.
https://phabricator.endlessm.com/T18842","I just pushed a new version which should address all the issues at this point.
It's also got a few small follow-up commits. The first one makes the produced location.conf file match the exact format we had been using. I assumed we weren't using it yet which turned out to only be partly true; we're not doing much with it but we do have code in eos-metrics-instrumentation that parses it (including the fairly bogus ""[Label]"" section) and some server-side code that expects the existing field names (which have US-centric names that I was trying to avoid). But these are minor issues that I don't think are worth blocking on.
The other two commits are minor UX improvements.
Let me know if you'd like me to squash them all. In the meantime, having them separate should hopefully make them easier to review.",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,236,2018-07-18T10:50:14Z,2018-07-18T10:58:18Z,2018-07-18T10:58:18Z,CLOSED,False,121,23,4,https://github.com/joaquimrocha,T23186,2,[],https://github.com/endlessm/gnome-initial-setup/pull/236,https://github.com/joaquimrocha,1,https://github.com/endlessm/gnome-initial-setup/pull/236,https://phabricator.endlessm.com/T23186,https://phabricator.endlessm.com/T23186,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,237,2018-07-18T11:00:42Z,2018-07-19T10:29:28Z,2018-07-19T10:29:30Z,MERGED,True,129,23,4,https://github.com/joaquimrocha,T23186,2,[],https://github.com/endlessm/gnome-initial-setup/pull/237,https://github.com/joaquimrocha,1,https://github.com/endlessm/gnome-initial-setup/pull/237,https://phabricator.endlessm.com/T23327,https://phabricator.endlessm.com/T23327,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,238,2018-07-19T00:10:14Z,2018-07-19T00:36:09Z,2018-07-19T00:36:14Z,MERGED,True,7,2,1,https://github.com/treitter,site: allow manual editing of the ID field,1,[],https://github.com/endlessm/gnome-initial-setup/pull/238,https://github.com/treitter,1,https://github.com/endlessm/gnome-initial-setup/pull/238,This is a requirement for Conafe.,This is a requirement for Conafe.,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,239,2018-07-23T15:51:32Z,2018-07-25T09:37:19Z,2018-07-25T09:37:22Z,MERGED,True,47,1,4,https://github.com/joaquimrocha,account: Check configuration to hide password switch if needed,1,[],https://github.com/endlessm/gnome-initial-setup/pull/239,https://github.com/joaquimrocha,1,https://github.com/endlessm/gnome-initial-setup/pull/239,"If a vendor wants to have passwordless accounts by default, then they
should be able to set that in the vendor configuration file.
This patch allows that by using the ""show-password-switch"" option in the
""page.account"" group.
https://phabricator.endlessm.com/T23326","If a vendor wants to have passwordless accounts by default, then they
should be able to set that in the vendor configuration file.
This patch allows that by using the ""show-password-switch"" option in the
""page.account"" group.
https://phabricator.endlessm.com/T23326",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,239,2018-07-23T15:51:32Z,2018-07-25T09:37:19Z,2018-07-25T09:37:22Z,MERGED,True,47,1,4,https://github.com/joaquimrocha,account: Check configuration to hide password switch if needed,1,[],https://github.com/endlessm/gnome-initial-setup/pull/239,https://github.com/joaquimrocha,2,https://github.com/endlessm/gnome-initial-setup/pull/239#issuecomment-407342171,"If a vendor wants to have passwordless accounts by default, then they
should be able to set that in the vendor configuration file.
This patch allows that by using the ""show-password-switch"" option in the
""page.account"" group.
https://phabricator.endlessm.com/T23326",@wjt Thanks! I've updated the PR.,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,240,2018-07-25T16:02:38Z,2018-07-26T10:05:12Z,2018-07-26T10:09:15Z,MERGED,True,6,0,1,https://github.com/joaquimrocha,New version rebased on gnome-3-28,1,[],https://github.com/endlessm/gnome-initial-setup/pull/240,https://github.com/joaquimrocha,1,https://github.com/endlessm/gnome-initial-setup/pull/240,https://phabricator.endlessm.com/T23346,https://phabricator.endlessm.com/T23346,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,241,2018-07-30T11:25:06Z,2018-08-01T15:30:43Z,2018-08-01T15:30:51Z,MERGED,True,630,1198,57,https://github.com/joaquimrocha,T23405,15,[],https://github.com/endlessm/gnome-initial-setup/pull/241,https://github.com/joaquimrocha,1,https://github.com/endlessm/gnome-initial-setup/pull/241,https://phabricator.endlessm.com/T23405,https://phabricator.endlessm.com/T23405,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,241,2018-07-30T11:25:06Z,2018-08-01T15:30:43Z,2018-08-01T15:30:51Z,MERGED,True,630,1198,57,https://github.com/joaquimrocha,T23405,15,[],https://github.com/endlessm/gnome-initial-setup/pull/241,https://github.com/wjt,2,https://github.com/endlessm/gnome-initial-setup/pull/241#issuecomment-409616575,https://phabricator.endlessm.com/T23405,Let's do it!,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,242,2018-07-30T11:25:31Z,2018-08-01T14:20:55Z,2018-08-01T14:20:55Z,CLOSED,False,6,5,3,https://github.com/joaquimrocha,T23405 debian master on meson,2,[],https://github.com/endlessm/gnome-initial-setup/pull/242,https://github.com/joaquimrocha,1,https://github.com/endlessm/gnome-initial-setup/pull/242,https://phabricator.endlessm.com/T23405,https://phabricator.endlessm.com/T23405,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,242,2018-07-30T11:25:31Z,2018-08-01T14:20:55Z,2018-08-01T14:20:55Z,CLOSED,False,6,5,3,https://github.com/joaquimrocha,T23405 debian master on meson,2,[],https://github.com/endlessm/gnome-initial-setup/pull/242,https://github.com/wjt,2,https://github.com/endlessm/gnome-initial-setup/pull/242#issuecomment-409532921,https://phabricator.endlessm.com/T23405,"Interestingly when built with jenkins-obs (I patched my local copy to disable the autotools build) this generates a Debian-native package:
dpkg-buildpackage: info: source-only upload: Debian-native package
...
Sending    gnome-initial-setup_3.28.0+dev184.457d45a5-2.dsc
Sending    gnome-initial-setup_3.28.0+dev184.457d45a5-2.tar.gz

rather than the orig tarball + debian/ tarball used before. Probably harmless in our case since that better reflects how the package is maintained anyway. I think this is probably common to all meson projects fed through jenkins-obs.",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,243,2018-08-01T14:21:39Z,2018-08-01T15:27:22Z,2018-08-01T15:27:26Z,MERGED,True,6,5,3,https://github.com/joaquimrocha,T23405 debian,2,[],https://github.com/endlessm/gnome-initial-setup/pull/243,https://github.com/joaquimrocha,1,https://github.com/endlessm/gnome-initial-setup/pull/243,https://phabricator.endlessm.com/T23405,https://phabricator.endlessm.com/T23405,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,243,2018-08-01T14:21:39Z,2018-08-01T15:27:22Z,2018-08-01T15:27:26Z,MERGED,True,6,5,3,https://github.com/joaquimrocha,T23405 debian,2,[],https://github.com/endlessm/gnome-initial-setup/pull/243,https://github.com/joaquimrocha,2,https://github.com/endlessm/gnome-initial-setup/pull/243#issuecomment-409612016,https://phabricator.endlessm.com/T23405,"Jenkins, test this please.",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,244,2018-08-02T12:30:03Z,2018-08-02T16:28:59Z,2018-08-02T16:29:02Z,MERGED,True,3,4,2,https://github.com/joaquimrocha,T23467,2,[],https://github.com/endlessm/gnome-initial-setup/pull/244,https://github.com/joaquimrocha,1,https://github.com/endlessm/gnome-initial-setup/pull/244,"Notice that there's a commit I am ""sneaking in"" from upstream which fixes an important issue with setting the vendor conf file.
https://phabricator.endlessm.com/T23467","Notice that there's a commit I am ""sneaking in"" from upstream which fixes an important issue with setting the vendor conf file.
https://phabricator.endlessm.com/T23467",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,245,2018-08-02T19:40:57Z,2018-08-03T11:18:08Z,2018-08-03T11:18:10Z,MERGED,True,105,69,5,https://github.com/joaquimrocha,Abstract how vendor configuration is accessed,1,[],https://github.com/endlessm/gnome-initial-setup/pull/245,https://github.com/joaquimrocha,1,https://github.com/endlessm/gnome-initial-setup/pull/245,"Accessing the vendor configuration is a common need of many pages, so
pages shouldn't have to always deal with the key file directly as it
leads to a lot of repeated code (for error checking and such). This
patch allows that by abstracting the configuration specifics in a few
functions in the GisDriver.
https://phabricator.endlessm.com/T23483","Accessing the vendor configuration is a common need of many pages, so
pages shouldn't have to always deal with the key file directly as it
leads to a lot of repeated code (for error checking and such). This
patch allows that by abstracting the configuration specifics in a few
functions in the GisDriver.
https://phabricator.endlessm.com/T23483",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,245,2018-08-02T19:40:57Z,2018-08-03T11:18:08Z,2018-08-03T11:18:10Z,MERGED,True,105,69,5,https://github.com/joaquimrocha,Abstract how vendor configuration is accessed,1,[],https://github.com/endlessm/gnome-initial-setup/pull/245,https://github.com/wjt,2,https://github.com/endlessm/gnome-initial-setup/pull/245#issuecomment-410062192,"Accessing the vendor configuration is a common need of many pages, so
pages shouldn't have to always deal with the key file directly as it
leads to a lot of repeated code (for error checking and such). This
patch allows that by abstracting the configuration specifics in a few
functions in the GisDriver.
https://phabricator.endlessm.com/T23483","You could consider doing this in a more easily upstreamed form by splitting the commit into one which only touches the stuff which exist upstream, and another which touches our downstream stuff?",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,245,2018-08-02T19:40:57Z,2018-08-03T11:18:08Z,2018-08-03T11:18:10Z,MERGED,True,105,69,5,https://github.com/joaquimrocha,Abstract how vendor configuration is accessed,1,[],https://github.com/endlessm/gnome-initial-setup/pull/245,https://github.com/joaquimrocha,3,https://github.com/endlessm/gnome-initial-setup/pull/245#issuecomment-410063427,"Accessing the vendor configuration is a common need of many pages, so
pages shouldn't have to always deal with the key file directly as it
leads to a lot of repeated code (for error checking and such). This
patch allows that by abstracting the configuration specifics in a few
functions in the GisDriver.
https://phabricator.endlessm.com/T23483","I actually checked that out before. And saw that only one place checks the conf file upstream (gnome-initial-setup.c)...
So it wouldn't be as justifiable and we'd have to keep 2/3 functions downstream. But if you still think it's worth it, I can surely do it.",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,246,2018-08-03T12:20:23Z,2018-08-08T16:54:36Z,2018-08-08T16:54:39Z,CLOSED,False,51,15,1,https://github.com/joaquimrocha,T23325,3,[],https://github.com/endlessm/gnome-initial-setup/pull/246,https://github.com/joaquimrocha,1,https://github.com/endlessm/gnome-initial-setup/pull/246,https://phabricator.endlessm.com/T23325,https://phabricator.endlessm.com/T23325,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,246,2018-08-03T12:20:23Z,2018-08-08T16:54:36Z,2018-08-08T16:54:39Z,CLOSED,False,51,15,1,https://github.com/joaquimrocha,T23325,3,[],https://github.com/endlessm/gnome-initial-setup/pull/246,https://github.com/wjt,2,https://github.com/endlessm/gnome-initial-setup/pull/246#issuecomment-410733142,https://phabricator.endlessm.com/T23325,"A higher-level comment: looking more closely at the geoclue API, it seems that it should be possible to set up the client before the network becomes available, and have the LocationUpdated signal be emitted when location is discovered. And in all of my testing to date, auto-detecting my location as London has always worked, both on VMs (where a ""wired"" network is available from boot) and on real hardware (where I have to configure WiFi in the FBE). So, what exactly does this PR fix?
(Edit: maybe geoclue always says ""London"" if it's not sure? The problem with living in the UK is it's often difficult to distinguish ""timezone was detected"" from ""UTC is in use""! Though at the moment UK time is not UTC.)",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,246,2018-08-03T12:20:23Z,2018-08-08T16:54:36Z,2018-08-08T16:54:39Z,CLOSED,False,51,15,1,https://github.com/joaquimrocha,T23325,3,[],https://github.com/endlessm/gnome-initial-setup/pull/246,https://github.com/joaquimrocha,3,https://github.com/endlessm/gnome-initial-setup/pull/246#issuecomment-410746683,https://phabricator.endlessm.com/T23325,"(Edit: maybe geoclue always says ""London"" if it's not sure? The problem with living in the UK is it's often difficult to distinguish ""timezone was detected"" from ""UTC is in use""! Though at the moment UK time is not UTC.)

You can set something else (Madrid) before trying to get a location with Geoclue in the g-i-s...
~
Answering your question, I think it should also work as you say, but instead I saw that if there's no network, the GClueSimple will never be ready before the page is reached (probably there's a timeout that I haven't reached). I also saw that there's an error if I run it in Fedora (jhbuild) and have my location sharing off (AFAICS this doesn't happen in EOS but I haven't yet checked exactly why, and I have a patch just like the WiFi one but for the settings):
CRITICAL **: Failed to connect to GeoClue2 service: GDBus.Error:org.freedesktop.DBus.Error.AccessDenied: Geolocation disabled for UID 1000
So summarizing, I think it's safer to not assume we always get the client (unless there's a way to get the client that doesn't really use the GClueSimple, but still keeps the code sane).",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,246,2018-08-03T12:20:23Z,2018-08-08T16:54:36Z,2018-08-08T16:54:39Z,CLOSED,False,51,15,1,https://github.com/joaquimrocha,T23325,3,[],https://github.com/endlessm/gnome-initial-setup/pull/246,https://github.com/joaquimrocha,4,https://github.com/endlessm/gnome-initial-setup/pull/246#issuecomment-410750258,https://phabricator.endlessm.com/T23325,"BTW, the map does get UTC by default if no location has been set, but it has, then there'll be a bubble like widget on the map showing the exact timezone.",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,246,2018-08-03T12:20:23Z,2018-08-08T16:54:36Z,2018-08-08T16:54:39Z,CLOSED,False,51,15,1,https://github.com/joaquimrocha,T23325,3,[],https://github.com/endlessm/gnome-initial-setup/pull/246,https://github.com/joaquimrocha,5,https://github.com/endlessm/gnome-initial-setup/pull/246#issuecomment-411437924,https://phabricator.endlessm.com/T23325,Updated the PR with a fixup commit.,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,246,2018-08-03T12:20:23Z,2018-08-08T16:54:36Z,2018-08-08T16:54:39Z,CLOSED,False,51,15,1,https://github.com/joaquimrocha,T23325,3,[],https://github.com/endlessm/gnome-initial-setup/pull/246,https://github.com/joaquimrocha,6,https://github.com/endlessm/gnome-initial-setup/pull/246#issuecomment-411476651,https://phabricator.endlessm.com/T23325,Closing as invalid. See discussion in the task.,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,247,2018-08-03T12:42:16Z,2018-08-09T18:18:13Z,2018-08-09T18:18:18Z,MERGED,True,19,0,1,https://github.com/joaquimrocha,T23497,1,[],https://github.com/endlessm/gnome-initial-setup/pull/247,https://github.com/joaquimrocha,1,https://github.com/endlessm/gnome-initial-setup/pull/247,https://phabricator.endlessm.com/T23497,https://phabricator.endlessm.com/T23497,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,248,2018-08-08T13:31:24Z,2019-01-30T15:19:59Z,2019-01-30T15:20:03Z,CLOSED,False,273,72,2,https://github.com/joaquimrocha,T23524,4,[],https://github.com/endlessm/gnome-initial-setup/pull/248,https://github.com/joaquimrocha,1,https://github.com/endlessm/gnome-initial-setup/pull/248,https://phabricator.endlessm.com/T23524,https://phabricator.endlessm.com/T23524,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,248,2018-08-08T13:31:24Z,2019-01-30T15:19:59Z,2019-01-30T15:20:03Z,CLOSED,False,273,72,2,https://github.com/joaquimrocha,T23524,4,[],https://github.com/endlessm/gnome-initial-setup/pull/248,https://github.com/joaquimrocha,2,https://github.com/endlessm/gnome-initial-setup/pull/248#issuecomment-411443245,https://phabricator.endlessm.com/T23524,Note it's only the last commit (Show a placeholder if the page needs time...) that should be reviewed here.,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,248,2018-08-08T13:31:24Z,2019-01-30T15:19:59Z,2019-01-30T15:20:03Z,CLOSED,False,273,72,2,https://github.com/joaquimrocha,T23524,4,[],https://github.com/endlessm/gnome-initial-setup/pull/248,https://github.com/wjt,3,https://github.com/endlessm/gnome-initial-setup/pull/248#issuecomment-458982725,https://phabricator.endlessm.com/T23524,We took a different approach which discourages the user from continuing to the timezone page until Geoclue is likely to have had time to find the location.,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,249,2018-08-15T12:16:08Z,2018-08-15T16:13:08Z,2018-08-15T16:13:18Z,MERGED,True,1,0,1,https://github.com/joaquimrocha,build: Add special macro for using libsecret's unstable API,1,[],https://github.com/endlessm/gnome-initial-setup/pull/249,https://github.com/joaquimrocha,1,https://github.com/endlessm/gnome-initial-setup/pull/249,"g-i-s uses libsecret's unstable API, so we need to define the macro
SECRET_API_SUBJECT_TO_CHANGE in order for that API to be included.
This change had been forgotten when we ported the build to Meson.
https://phabricator.endlessm.com/T23515","g-i-s uses libsecret's unstable API, so we need to define the macro
SECRET_API_SUBJECT_TO_CHANGE in order for that API to be included.
This change had been forgotten when we ported the build to Meson.
https://phabricator.endlessm.com/T23515",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,250,2018-08-17T14:25:05Z,2018-08-20T15:33:44Z,2018-08-20T15:38:05Z,MERGED,True,17,1,1,https://github.com/wjt,eos-transient-setup: set min-free-space-* to 0,1,[],https://github.com/endlessm/gnome-initial-setup/pull/250,https://github.com/wjt,1,https://github.com/endlessm/gnome-initial-setup/pull/250,"On live systems, the free ""disk"" space is, per tmpfs's default, half of
physical RAM. If the system only has 2GB of RAM, then reserving 500MB
(the default) free means there's at 500MB for installing apps. This is
overly restrictive, particularly since it's not such a big deal to run
out of ""disk"" space on a live system. So, disable this limit.
We have downstream logic in flatpak-dir.c to migrate from setting
-percent to -size. This means that some combinations of these settings
turn out to be ""unstable"", in the sense that flatpak-dir.c will alter
them whenever the system helper (or root) happens to open the repo:



-size
-percent
ostree-repo.c
flatpak-dir.c




non-0
*
-size applies
no action


0
*
no limit
no action


unset
unset
-percent=3 applies
sets -size to 500MB


unset
non-0
-percent applies
sets -size to 500MB, unsets -percent


unset
0
no limit
no action



Setting either -size or -percent to zero will do what we want given the
current default configuration; for clarity, just set both. Note that the
units are required for -size.
https://phabricator.endlessm.com/T23552","On live systems, the free ""disk"" space is, per tmpfs's default, half of
physical RAM. If the system only has 2GB of RAM, then reserving 500MB
(the default) free means there's at 500MB for installing apps. This is
overly restrictive, particularly since it's not such a big deal to run
out of ""disk"" space on a live system. So, disable this limit.
We have downstream logic in flatpak-dir.c to migrate from setting
-percent to -size. This means that some combinations of these settings
turn out to be ""unstable"", in the sense that flatpak-dir.c will alter
them whenever the system helper (or root) happens to open the repo:



-size
-percent
ostree-repo.c
flatpak-dir.c




non-0
*
-size applies
no action


0
*
no limit
no action


unset
unset
-percent=3 applies
sets -size to 500MB


unset
non-0
-percent applies
sets -size to 500MB, unsets -percent


unset
0
no limit
no action



Setting either -size or -percent to zero will do what we want given the
current default configuration; for clarity, just set both. Note that the
units are required for -size.
https://phabricator.endlessm.com/T23552",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,250,2018-08-17T14:25:05Z,2018-08-20T15:33:44Z,2018-08-20T15:38:05Z,MERGED,True,17,1,1,https://github.com/wjt,eos-transient-setup: set min-free-space-* to 0,1,[],https://github.com/endlessm/gnome-initial-setup/pull/250,https://github.com/uajain,2,https://github.com/endlessm/gnome-initial-setup/pull/250#issuecomment-413907498,"On live systems, the free ""disk"" space is, per tmpfs's default, half of
physical RAM. If the system only has 2GB of RAM, then reserving 500MB
(the default) free means there's at 500MB for installing apps. This is
overly restrictive, particularly since it's not such a big deal to run
out of ""disk"" space on a live system. So, disable this limit.
We have downstream logic in flatpak-dir.c to migrate from setting
-percent to -size. This means that some combinations of these settings
turn out to be ""unstable"", in the sense that flatpak-dir.c will alter
them whenever the system helper (or root) happens to open the repo:



-size
-percent
ostree-repo.c
flatpak-dir.c




non-0
*
-size applies
no action


0
*
no limit
no action


unset
unset
-percent=3 applies
sets -size to 500MB


unset
non-0
-percent applies
sets -size to 500MB, unsets -percent


unset
0
no limit
no action



Setting either -size or -percent to zero will do what we want given the
current default configuration; for clarity, just set both. Note that the
units are required for -size.
https://phabricator.endlessm.com/T23552","The last two rows are not correct. It should be:



-size
-percent
ostree-repo.c
flatpak-dir.c




unset
non-0
-percent applies
no action


unset
0
no limit
sets -size to 500MB, unsets -percent




We have downstream logic in flatpak-dir.c to migrate from setting
-percent to -size.

FYI, it's also upstream now in master. [1]

Setting either -size or -percent to zero will do what we want given the
current default configuration;

If there is only -percent=0, that would be swapped with -size=500MB (-percent to -size migration logic)

for clarity, just set both.

Perfect!
[1] flatpak/flatpak@13610e3",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,250,2018-08-17T14:25:05Z,2018-08-20T15:33:44Z,2018-08-20T15:38:05Z,MERGED,True,17,1,1,https://github.com/wjt,eos-transient-setup: set min-free-space-* to 0,1,[],https://github.com/endlessm/gnome-initial-setup/pull/250,https://github.com/wjt,3,https://github.com/endlessm/gnome-initial-setup/pull/250#issuecomment-413989118,"On live systems, the free ""disk"" space is, per tmpfs's default, half of
physical RAM. If the system only has 2GB of RAM, then reserving 500MB
(the default) free means there's at 500MB for installing apps. This is
overly restrictive, particularly since it's not such a big deal to run
out of ""disk"" space on a live system. So, disable this limit.
We have downstream logic in flatpak-dir.c to migrate from setting
-percent to -size. This means that some combinations of these settings
turn out to be ""unstable"", in the sense that flatpak-dir.c will alter
them whenever the system helper (or root) happens to open the repo:



-size
-percent
ostree-repo.c
flatpak-dir.c




non-0
*
-size applies
no action


0
*
no limit
no action


unset
unset
-percent=3 applies
sets -size to 500MB


unset
non-0
-percent applies
sets -size to 500MB, unsets -percent


unset
0
no limit
no action



Setting either -size or -percent to zero will do what we want given the
current default configuration; for clarity, just set both. Note that the
units are required for -size.
https://phabricator.endlessm.com/T23552","Gotcha. I misread the code! I did think that it was weird behaviour… makes much more sense this way round.
I've reworded the message to replace the big table with some pseudocode, and also added a brief comment about the same thing to the code itself.
I tested in the following way:

Booted a pristine live system
Created a spacefiller file so that <50% of disk is free
Attempted to install D-Feet: it failed

Ran the modified script (it's designed to be idempotent)
Attempted to install D-Feet: it succeeded",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,250,2018-08-17T14:25:05Z,2018-08-20T15:33:44Z,2018-08-20T15:38:05Z,MERGED,True,17,1,1,https://github.com/wjt,eos-transient-setup: set min-free-space-* to 0,1,[],https://github.com/endlessm/gnome-initial-setup/pull/250,https://github.com/uajain,4,https://github.com/endlessm/gnome-initial-setup/pull/250#issuecomment-414028882,"On live systems, the free ""disk"" space is, per tmpfs's default, half of
physical RAM. If the system only has 2GB of RAM, then reserving 500MB
(the default) free means there's at 500MB for installing apps. This is
overly restrictive, particularly since it's not such a big deal to run
out of ""disk"" space on a live system. So, disable this limit.
We have downstream logic in flatpak-dir.c to migrate from setting
-percent to -size. This means that some combinations of these settings
turn out to be ""unstable"", in the sense that flatpak-dir.c will alter
them whenever the system helper (or root) happens to open the repo:



-size
-percent
ostree-repo.c
flatpak-dir.c




non-0
*
-size applies
no action


0
*
no limit
no action


unset
unset
-percent=3 applies
sets -size to 500MB


unset
non-0
-percent applies
sets -size to 500MB, unsets -percent


unset
0
no limit
no action



Setting either -size or -percent to zero will do what we want given the
current default configuration; for clarity, just set both. Note that the
units are required for -size.
https://phabricator.endlessm.com/T23552","Hey @wjt
There is a problem with commit message again.

if min-free-space-size is None:
if min-free-space-percent is None or min-free-space-size == 0:

It should be  if min-free-space-percent is None or min-free-space-percent == 0:

unset min-free-space-percent
min-free-space-size = 500MB",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,250,2018-08-17T14:25:05Z,2018-08-20T15:33:44Z,2018-08-20T15:38:05Z,MERGED,True,17,1,1,https://github.com/wjt,eos-transient-setup: set min-free-space-* to 0,1,[],https://github.com/endlessm/gnome-initial-setup/pull/250,https://github.com/wjt,5,https://github.com/endlessm/gnome-initial-setup/pull/250#issuecomment-414356963,"On live systems, the free ""disk"" space is, per tmpfs's default, half of
physical RAM. If the system only has 2GB of RAM, then reserving 500MB
(the default) free means there's at 500MB for installing apps. This is
overly restrictive, particularly since it's not such a big deal to run
out of ""disk"" space on a live system. So, disable this limit.
We have downstream logic in flatpak-dir.c to migrate from setting
-percent to -size. This means that some combinations of these settings
turn out to be ""unstable"", in the sense that flatpak-dir.c will alter
them whenever the system helper (or root) happens to open the repo:



-size
-percent
ostree-repo.c
flatpak-dir.c




non-0
*
-size applies
no action


0
*
no limit
no action


unset
unset
-percent=3 applies
sets -size to 500MB


unset
non-0
-percent applies
sets -size to 500MB, unsets -percent


unset
0
no limit
no action



Setting either -size or -percent to zero will do what we want given the
current default configuration; for clarity, just set both. Note that the
units are required for -size.
https://phabricator.endlessm.com/T23552",How's that?,True,{'THUMBS_UP': ['https://github.com/uajain']}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,251,2018-08-17T14:44:27Z,2018-08-28T19:05:33Z,2018-08-28T19:05:36Z,MERGED,True,125,40,2,https://github.com/joaquimrocha,T23528,10,[],https://github.com/endlessm/gnome-initial-setup/pull/251,https://github.com/joaquimrocha,1,https://github.com/endlessm/gnome-initial-setup/pull/251,"Downstream version of https://gitlab.gnome.org/GNOME/gnome-initial-setup/merge_requests/16
https://phabricator.endlessm.com/T23528","Downstream version of https://gitlab.gnome.org/GNOME/gnome-initial-setup/merge_requests/16
https://phabricator.endlessm.com/T23528",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,252,2018-09-26T19:07:14Z,2018-09-27T14:04:18Z,2018-09-27T14:04:22Z,MERGED,True,6,0,1,https://github.com/joaquimrocha,Compile gis-page-util resources,1,[],https://github.com/endlessm/gnome-initial-setup/pull/252,https://github.com/joaquimrocha,1,https://github.com/endlessm/gnome-initial-setup/pull/252,"The gis-page-util resources had been left out when the project was moved
to meson. As a result doing Ctrl+F for getting the factory dialog didn't
work.
https://phabricator.endlessm.com/T23813","The gis-page-util resources had been left out when the project was moved
to meson. As a result doing Ctrl+F for getting the factory dialog didn't
work.
https://phabricator.endlessm.com/T23813",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,253,2018-09-28T07:38:08Z,2018-09-28T15:19:35Z,2018-09-28T15:19:38Z,MERGED,True,30,0,2,https://github.com/dsd,Show image version in factory dialog,1,[],https://github.com/endlessm/gnome-initial-setup/pull/253,https://github.com/dsd,1,https://github.com/endlessm/gnome-initial-setup/pull/253,"A partner has requested that we provide an indication in this dialog
of which image personality (language) was flashed.
Add the image name stamp to this dialog which includes the
personality name at the end. The same thing was already being
shown for the SD card.
https://phabricator.endlessm.com/T23690","A partner has requested that we provide an indication in this dialog
of which image personality (language) was flashed.
Add the image name stamp to this dialog which includes the
personality name at the end. The same thing was already being
shown for the SD card.
https://phabricator.endlessm.com/T23690",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,254,2018-10-18T19:46:58Z,2018-10-22T13:44:53Z,2018-10-26T21:42:58Z,MERGED,True,74,0,6,https://github.com/joaquimrocha,"summary: Allow to set ""hack"" related contents for the summary page",2,[],https://github.com/endlessm/gnome-initial-setup/pull/254,https://github.com/joaquimrocha,1,https://github.com/endlessm/gnome-initial-setup/pull/254,https://phabricator.endlessm.com/T24135,https://phabricator.endlessm.com/T24135,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,254,2018-10-18T19:46:58Z,2018-10-22T13:44:53Z,2018-10-26T21:42:58Z,MERGED,True,74,0,6,https://github.com/joaquimrocha,"summary: Allow to set ""hack"" related contents for the summary page",2,[],https://github.com/endlessm/gnome-initial-setup/pull/254,https://github.com/joaquimrocha,2,https://github.com/endlessm/gnome-initial-setup/pull/254#issuecomment-431453867,https://phabricator.endlessm.com/T24135,"Following @wjt 's review and our further online conversation, both Will and I see arguments for both approaches. However, I think that Will's suggestion ends up being less intrusive, so I have updated the branch with that implementation. Shamefully the new approach doesn't justify having ASCII art to explain complex UI changes, and thus I will edit the PR's description 🙂",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,254,2018-10-18T19:46:58Z,2018-10-22T13:44:53Z,2018-10-26T21:42:58Z,MERGED,True,74,0,6,https://github.com/joaquimrocha,"summary: Allow to set ""hack"" related contents for the summary page",2,[],https://github.com/endlessm/gnome-initial-setup/pull/254,https://github.com/joaquimrocha,3,https://github.com/endlessm/gnome-initial-setup/pull/254#issuecomment-431830359,https://phabricator.endlessm.com/T24135,Updated the commits. Thanks for another review @wjt .,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,255,2018-10-25T23:00:25Z,2018-10-29T17:06:07Z,2018-10-29T17:06:10Z,MERGED,True,147,1,1,https://github.com/cosimoc,summary: add support to launch initial contact app on Hack images,1,[],https://github.com/endlessm/gnome-initial-setup/pull/255,https://github.com/cosimoc,1,https://github.com/endlessm/gnome-initial-setup/pull/255,"On hack images, upon the completion of the FBE, we want to launch our
""HackUnlock"" puzzle application. We use Clippy to connect to the state
notification for its unlocked state; when that is received we can
proceed with the login as usual.
Note that due to a race condition in when Clippy exports its
interface, we need to add a timeout before calling the Connect()
method. This is possible to fix with a different Clippy/GTK
integration, or a different Clippy API, but for now the timeout at
least allows us to move forward without blocking on that.
https://phabricator.endlessm.com/T23942","On hack images, upon the completion of the FBE, we want to launch our
""HackUnlock"" puzzle application. We use Clippy to connect to the state
notification for its unlocked state; when that is received we can
proceed with the login as usual.
Note that due to a race condition in when Clippy exports its
interface, we need to add a timeout before calling the Connect()
method. This is possible to fix with a different Clippy/GTK
integration, or a different Clippy API, but for now the timeout at
least allows us to move forward without blocking on that.
https://phabricator.endlessm.com/T23942",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,255,2018-10-25T23:00:25Z,2018-10-29T17:06:07Z,2018-10-29T17:06:10Z,MERGED,True,147,1,1,https://github.com/cosimoc,summary: add support to launch initial contact app on Hack images,1,[],https://github.com/endlessm/gnome-initial-setup/pull/255,https://github.com/cosimoc,2,https://github.com/endlessm/gnome-initial-setup/pull/255#issuecomment-433492765,"On hack images, upon the completion of the FBE, we want to launch our
""HackUnlock"" puzzle application. We use Clippy to connect to the state
notification for its unlocked state; when that is received we can
proceed with the login as usual.
Note that due to a race condition in when Clippy exports its
interface, we need to add a timeout before calling the Connect()
method. This is possible to fix with a different Clippy/GTK
integration, or a different Clippy API, but for now the timeout at
least allows us to move forward without blocking on that.
https://phabricator.endlessm.com/T23942",Thanks @wjt and @joaquimrocha. I addressed the comments.,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,256,2018-10-27T01:35:06Z,2018-10-30T17:23:54Z,2018-10-30T17:23:57Z,MERGED,True,2,24,1,https://github.com/cosimoc,T24047,2,[],https://github.com/endlessm/gnome-initial-setup/pull/256,https://github.com/cosimoc,1,https://github.com/endlessm/gnome-initial-setup/pull/256,https://phabricator.endlessm.com/T24047,https://phabricator.endlessm.com/T24047,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,257,2018-11-01T19:18:56Z,2018-11-02T17:24:40Z,2018-11-05T16:28:51Z,MERGED,True,40,8,3,https://github.com/dnohales,account: add build flag and env variable to override faces dir,1,[],https://github.com/endlessm/gnome-initial-setup/pull/257,https://github.com/dnohales,1,https://github.com/endlessm/gnome-initial-setup/pull/257,https://phabricator.endlessm.com/T23766,https://phabricator.endlessm.com/T23766,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,258,2018-11-02T00:19:21Z,2018-11-02T20:21:25Z,2018-11-05T16:22:01Z,MERGED,True,28,99,14,https://github.com/cosimoc,T24279,4,[],https://github.com/endlessm/gnome-initial-setup/pull/258,https://github.com/cosimoc,1,https://github.com/endlessm/gnome-initial-setup/pull/258,https://phabricator.endlessm.com/T24279,https://phabricator.endlessm.com/T24279,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,259,2018-11-02T18:56:11Z,2018-11-05T16:40:30Z,2018-11-05T16:40:34Z,MERGED,True,32,30,4,https://github.com/cosimoc,account: use vendor file for alternative faces directory,2,[],https://github.com/endlessm/gnome-initial-setup/pull/259,https://github.com/cosimoc,1,https://github.com/endlessm/gnome-initial-setup/pull/259,"Instead of a custom build option.
https://phabricator.endlessm.com/T23766","Instead of a custom build option.
https://phabricator.endlessm.com/T23766",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,259,2018-11-02T18:56:11Z,2018-11-05T16:40:30Z,2018-11-05T16:40:34Z,MERGED,True,32,30,4,https://github.com/cosimoc,account: use vendor file for alternative faces directory,2,[],https://github.com/endlessm/gnome-initial-setup/pull/259,https://github.com/cosimoc,2,https://github.com/endlessm/gnome-initial-setup/pull/259#issuecomment-435942536,"Instead of a custom build option.
https://phabricator.endlessm.com/T23766","@wjt Thanks, updated.",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,260,2018-11-06T14:23:35Z,2018-11-07T06:58:20Z,2018-11-07T06:59:16Z,MERGED,True,1,1,1,https://github.com/wjt,timezone: hide by default if location was detected,1,[],https://github.com/endlessm/gnome-initial-setup/pull/260,https://github.com/wjt,1,https://github.com/endlessm/gnome-initial-setup/pull/260,"Previously, unless the following was specified in the vendor config
file:
[page.timezone]
show-if-detected=false

then the timezone selection page would be shown even if the location was
detected via Geoclue.
The argument for skipping the page if location has been detected in some
Endless images is that this makes the FBE process nicer enough to risk
sometimes silently selecting the wrong timezone.  If we believe this for
some users, without any data about how often the wrong timezone is
selected, then we should apply this behaviour for all systems.
This patch switches the default setting to skip the timezone page if
location was detected. The old behaviour can be re-enabled by specifying
the following in the vendor config file:
[page.timezone]
show-if-detected=true

https://phabricator.endlessm.com/T23631","Previously, unless the following was specified in the vendor config
file:
[page.timezone]
show-if-detected=false

then the timezone selection page would be shown even if the location was
detected via Geoclue.
The argument for skipping the page if location has been detected in some
Endless images is that this makes the FBE process nicer enough to risk
sometimes silently selecting the wrong timezone.  If we believe this for
some users, without any data about how often the wrong timezone is
selected, then we should apply this behaviour for all systems.
This patch switches the default setting to skip the timezone page if
location was detected. The old behaviour can be re-enabled by specifying
the following in the vendor config file:
[page.timezone]
show-if-detected=true

https://phabricator.endlessm.com/T23631",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,261,2018-11-06T17:42:54Z,2018-11-06T17:51:25Z,2018-11-06T17:51:37Z,MERGED,True,1,1,1,https://github.com/pwithnall,data: Fix a string matching typo in the polkit rules,1,[],https://github.com/endlessm/gnome-initial-setup/pull/261,https://github.com/pwithnall,1,https://github.com/endlessm/gnome-initial-setup/pull/261,"This was added in 244f7a7, in 2017, so it evidently hasn’t caused any
problems — but having the bracket in the wrong place was causing
DemoMode action IDs to not be matched here for their initial-setup
polkit fast pass.
Signed-off-by: Philip Withnall withnall@endlessm.com","This was added in 244f7a7, in 2017, so it evidently hasn’t caused any
problems — but having the bracket in the wrong place was causing
DemoMode action IDs to not be matched here for their initial-setup
polkit fast pass.
Signed-off-by: Philip Withnall withnall@endlessm.com",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,262,2018-11-07T15:47:51Z,2018-11-07T15:58:22Z,2018-11-07T18:04:16Z,MERGED,True,1,1,1,https://github.com/cosimoc,Add clubhouse component to initial-setup session mode,1,[],https://github.com/endlessm/gnome-initial-setup/pull/262,https://github.com/cosimoc,1,https://github.com/endlessm/gnome-initial-setup/pull/262,"We depend on that component to display quest dialogs.
https://phabricator.endlessm.com/T24279","We depend on that component to display quest dialogs.
https://phabricator.endlessm.com/T24279",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,262,2018-11-07T15:47:51Z,2018-11-07T15:58:22Z,2018-11-07T18:04:16Z,MERGED,True,1,1,1,https://github.com/cosimoc,Add clubhouse component to initial-setup session mode,1,[],https://github.com/endlessm/gnome-initial-setup/pull/262,https://github.com/erikos,2,https://github.com/endlessm/gnome-initial-setup/pull/262#issuecomment-436673866,"We depend on that component to display quest dialogs.
https://phabricator.endlessm.com/T24279","Looks good, thanks Cosimo, merged.",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,262,2018-11-07T15:47:51Z,2018-11-07T15:58:22Z,2018-11-07T18:04:16Z,MERGED,True,1,1,1,https://github.com/cosimoc,Add clubhouse component to initial-setup session mode,1,[],https://github.com/endlessm/gnome-initial-setup/pull/262,https://github.com/joaquimrocha,3,https://github.com/endlessm/gnome-initial-setup/pull/262#issuecomment-436674409,"We depend on that component to display quest dialogs.
https://phabricator.endlessm.com/T24279",@cosimoc (I haven't tested this but...) Do we need to change the button manager so it doesn't display the open button in the session mode?,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,262,2018-11-07T15:47:51Z,2018-11-07T15:58:22Z,2018-11-07T18:04:16Z,MERGED,True,1,1,1,https://github.com/cosimoc,Add clubhouse component to initial-setup session mode,1,[],https://github.com/endlessm/gnome-initial-setup/pull/262,https://github.com/cosimoc,4,https://github.com/endlessm/gnome-initial-setup/pull/262#issuecomment-436682271,"We depend on that component to display quest dialogs.
https://phabricator.endlessm.com/T24279","@joaquimrocha Yes, that should be another follow up.",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,262,2018-11-07T15:47:51Z,2018-11-07T15:58:22Z,2018-11-07T18:04:16Z,MERGED,True,1,1,1,https://github.com/cosimoc,Add clubhouse component to initial-setup session mode,1,[],https://github.com/endlessm/gnome-initial-setup/pull/262,https://github.com/cosimoc,5,https://github.com/endlessm/gnome-initial-setup/pull/262#issuecomment-436719948,"We depend on that component to display quest dialogs.
https://phabricator.endlessm.com/T24279",Filed https://phabricator.endlessm.com/T24404,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,263,2018-11-08T21:51:20Z,2018-11-09T22:38:04Z,2018-11-09T22:38:08Z,MERGED,True,2,1,2,https://github.com/jprvita,test-mode: Make file executable,1,[],https://github.com/endlessm/gnome-initial-setup/pull/263,https://github.com/jprvita,1,https://github.com/endlessm/gnome-initial-setup/pull/263,"This file needs to be executable, otherwise it fails to be spawned with
the message ""Child process exited with code 127"".
https://phabricator.endlessm.com/T24356","This file needs to be executable, otherwise it fails to be spawned with
the message ""Child process exited with code 127"".
https://phabricator.endlessm.com/T24356",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,264,2018-11-08T22:34:50Z,2018-11-13T18:54:18Z,2018-11-13T18:54:21Z,MERGED,True,30,5,2,https://github.com/cosimoc,account: allow to specify a different avatar from vendor conf,2,[],https://github.com/endlessm/gnome-initial-setup/pull/264,https://github.com/cosimoc,1,https://github.com/endlessm/gnome-initial-setup/pull/264,"This will allow images to customize the default avatar.
https://phabricator.endlessm.com/T24421","This will allow images to customize the default avatar.
https://phabricator.endlessm.com/T24421",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,264,2018-11-08T22:34:50Z,2018-11-13T18:54:18Z,2018-11-13T18:54:21Z,MERGED,True,30,5,2,https://github.com/cosimoc,account: allow to specify a different avatar from vendor conf,2,[],https://github.com/endlessm/gnome-initial-setup/pull/264,https://github.com/erikos,2,https://github.com/endlessm/gnome-initial-setup/pull/264#issuecomment-437291393,"This will allow images to customize the default avatar.
https://phabricator.endlessm.com/T24421","Overall, looks good to me, maybe Joaquim can take a look as well.",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,264,2018-11-08T22:34:50Z,2018-11-13T18:54:18Z,2018-11-13T18:54:21Z,MERGED,True,30,5,2,https://github.com/cosimoc,account: allow to specify a different avatar from vendor conf,2,[],https://github.com/endlessm/gnome-initial-setup/pull/264,https://github.com/cosimoc,3,https://github.com/endlessm/gnome-initial-setup/pull/264#issuecomment-438349877,"This will allow images to customize the default avatar.
https://phabricator.endlessm.com/T24421","There is really nothing for Will to “untie”... I want to do things in the expected way and don’t feel strongly about which convention we use myself. I was only pointing out things aren’t consistent at the moment.
I’ll rework them to be consistent as part of this PR.",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,264,2018-11-08T22:34:50Z,2018-11-13T18:54:18Z,2018-11-13T18:54:21Z,MERGED,True,30,5,2,https://github.com/cosimoc,account: allow to specify a different avatar from vendor conf,2,[],https://github.com/endlessm/gnome-initial-setup/pull/264,https://github.com/joaquimrocha,4,https://github.com/endlessm/gnome-initial-setup/pull/264#issuecomment-438392890,"This will allow images to customize the default avatar.
https://phabricator.endlessm.com/T24421","There is really nothing for Will to “untie”... I want to do things in the expected way and don’t feel strongly about which convention we use myself. I was only pointing out things aren’t consistent at the moment.
I’ll rework them to be consistent as part of this PR.

Thanks Cosimo. Maybe ""untie"" was the wrong verb, I just wanted to make sure Will validated the right direction here.",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,265,2018-11-13T14:26:52Z,2018-11-13T18:00:56Z,2018-11-13T18:00:59Z,MERGED,True,124,11,6,https://github.com/wjt,Improve timezone detection when connectivity check is slow,5,[],https://github.com/endlessm/gnome-initial-setup/pull/265,https://github.com/wjt,1,https://github.com/endlessm/gnome-initial-setup/pull/265,"If we have already retrieved a location from the network when it comes time to show the timezone page, we skip it entirely. But in practice, it is quite easy to reach the timezone page before the location has been retrieved, even after configuring a wireless network.
On the network page, we would previously change the grey Skip button to a blue Next button as soon as the network connection came up. But GeoClue waits for NM's connectivity check to succeed before requesting location from the network. Even on a good network, the connectivity check (a simple HTTP request to a Linode VM) may be essentially instantaneous, or may take a few hundred milliseconds, or may take 10 seconds or more. Tweak this page to wait for the connectivity check to finish (or for a timeout, whichever comes first) before changing Skip to Next.
The timezone page would previously cancel the GeoClue location request if it was displayed before a reply was received. Tweak this to only cancel the GeoClue request if the user interacts with the search box or map. This improves the situation where the connectivity check takes a long time: although the user may still see the timezone page, they at least might not have to do anything more than wait a moment then click Next. The page already shows this string:

The time zone will be set automatically if your location can be found.

So there is no need for a string change to explain this new behaviour.
I also noticed that it's a one-line change to fix a longstanding issue, namely that it's impossible to click on London because the overlay obscures it.
The other two patches on this PR have no user-visible impact.
https://phabricator.endlessm.com/T23524","If we have already retrieved a location from the network when it comes time to show the timezone page, we skip it entirely. But in practice, it is quite easy to reach the timezone page before the location has been retrieved, even after configuring a wireless network.
On the network page, we would previously change the grey Skip button to a blue Next button as soon as the network connection came up. But GeoClue waits for NM's connectivity check to succeed before requesting location from the network. Even on a good network, the connectivity check (a simple HTTP request to a Linode VM) may be essentially instantaneous, or may take a few hundred milliseconds, or may take 10 seconds or more. Tweak this page to wait for the connectivity check to finish (or for a timeout, whichever comes first) before changing Skip to Next.
The timezone page would previously cancel the GeoClue location request if it was displayed before a reply was received. Tweak this to only cancel the GeoClue request if the user interacts with the search box or map. This improves the situation where the connectivity check takes a long time: although the user may still see the timezone page, they at least might not have to do anything more than wait a moment then click Next. The page already shows this string:

The time zone will be set automatically if your location can be found.

So there is no need for a string change to explain this new behaviour.
I also noticed that it's a one-line change to fix a longstanding issue, namely that it's impossible to click on London because the overlay obscures it.
The other two patches on this PR have no user-visible impact.
https://phabricator.endlessm.com/T23524",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,266,2018-11-15T12:40:30Z,2018-11-17T18:53:10Z,2018-11-17T18:53:19Z,MERGED,True,1,0,1,https://github.com/pwithnall,eos-transient-setup: Add file-db path for dconf defaults from OSTree,1,[],https://github.com/endlessm/gnome-initial-setup/pull/266,https://github.com/pwithnall,1,https://github.com/endlessm/gnome-initial-setup/pull/266,"This has recently been added to the normal user profile in
eos-theme.git, so should be added here too so that the demo/live
sessions have the same set of default dconf settings as the normal
sessions.
Signed-off-by: Philip Withnall withnall@endlessm.com
https://phabricator.endlessm.com/T20990","This has recently been added to the normal user profile in
eos-theme.git, so should be added here too so that the demo/live
sessions have the same set of default dconf settings as the normal
sessions.
Signed-off-by: Philip Withnall withnall@endlessm.com
https://phabricator.endlessm.com/T20990",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,267,2018-11-20T03:12:10Z,2018-11-20T16:48:00Z,2018-11-20T16:48:05Z,MERGED,True,25,34,7,https://github.com/cosimoc,T24259,3,[],https://github.com/endlessm/gnome-initial-setup/pull/267,https://github.com/cosimoc,1,https://github.com/endlessm/gnome-initial-setup/pull/267,https://phabricator.endlessm.com/T24259,https://phabricator.endlessm.com/T24259,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,267,2018-11-20T03:12:10Z,2018-11-20T16:48:00Z,2018-11-20T16:48:05Z,MERGED,True,25,34,7,https://github.com/cosimoc,T24259,3,[],https://github.com/endlessm/gnome-initial-setup/pull/267,https://github.com/cosimoc,2,https://github.com/endlessm/gnome-initial-setup/pull/267#issuecomment-440343395,https://phabricator.endlessm.com/T24259,@wjt Are you OK with merging this one?,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,267,2018-11-20T03:12:10Z,2018-11-20T16:48:00Z,2018-11-20T16:48:05Z,MERGED,True,25,34,7,https://github.com/cosimoc,T24259,3,[],https://github.com/endlessm/gnome-initial-setup/pull/267,https://github.com/wjt,3,https://github.com/endlessm/gnome-initial-setup/pull/267#issuecomment-440343940,https://phabricator.endlessm.com/T24259,I am!,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,268,2018-11-22T17:12:06Z,2018-11-23T14:53:57Z,2018-11-23T14:54:48Z,MERGED,True,42,4,2,https://github.com/cfoch,driver: Emit sound on startup,1,[],https://github.com/endlessm/gnome-initial-setup/pull/268,https://github.com/cfoch,1,https://github.com/endlessm/gnome-initial-setup/pull/268,https://phabricator.endlessm.com/T24453,https://phabricator.endlessm.com/T24453,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,269,2018-11-27T00:59:15Z,2018-11-28T16:34:16Z,2018-11-28T16:34:19Z,MERGED,True,31,23,1,https://github.com/jprvita,Connect to GDM as soon as gnome-initial-setup starts,2,[],https://github.com/endlessm/gnome-initial-setup/pull/269,https://github.com/jprvita,1,https://github.com/endlessm/gnome-initial-setup/pull/269,"GDM can't tell Plymouth to quit until gnome-initial-setup connects to
it, so GDM knows gnome-initial-setup has started successfully. Currently
gnome-initial-setup only connects to GDM once the user clicks the ""Start
Using $DISTRO"" button on the last page, to switch over to the
newly-created user. This prevents accessing the TTY for the whole time
gnome-initial-setup is running and makes systemd account the time spent
in gnome-initial-setup as part of the boot process.
Connecting to GDM as soon as gnome-initial-setup starts allows GDM to
tell Plymouth to quit at the right time, avoiding the problems described
above.
https://phabricator.endlessm.com/T21181","GDM can't tell Plymouth to quit until gnome-initial-setup connects to
it, so GDM knows gnome-initial-setup has started successfully. Currently
gnome-initial-setup only connects to GDM once the user clicks the ""Start
Using $DISTRO"" button on the last page, to switch over to the
newly-created user. This prevents accessing the TTY for the whole time
gnome-initial-setup is running and makes systemd account the time spent
in gnome-initial-setup as part of the boot process.
Connecting to GDM as soon as gnome-initial-setup starts allows GDM to
tell Plymouth to quit at the right time, avoiding the problems described
above.
https://phabricator.endlessm.com/T21181",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,270,2018-11-27T01:14:31Z,2018-11-27T17:04:38Z,2018-11-27T17:04:47Z,MERGED,True,6,0,1,https://github.com/cosimoc,account: don't dim avatar image preview,1,[],https://github.com/endlessm/gnome-initial-setup/pull/270,https://github.com/cosimoc,1,https://github.com/endlessm/gnome-initial-setup/pull/270,"This page will be redesigned in the next rebase, but this is a
high-visibility fix that is at the same time very simple.
https://phabricator.endlessm.com/T24488","This page will be redesigned in the next rebase, but this is a
high-visibility fix that is at the same time very simple.
https://phabricator.endlessm.com/T24488",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,270,2018-11-27T01:14:31Z,2018-11-27T17:04:38Z,2018-11-27T17:04:47Z,MERGED,True,6,0,1,https://github.com/cosimoc,account: don't dim avatar image preview,1,[],https://github.com/endlessm/gnome-initial-setup/pull/270,https://github.com/cosimoc,2,https://github.com/endlessm/gnome-initial-setup/pull/270#issuecomment-442124948,"This page will be redesigned in the next rebase, but this is a
high-visibility fix that is at the same time very simple.
https://phabricator.endlessm.com/T24488","@wjt Thanks, updated.",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,271,2018-11-27T20:50:52Z,2018-12-04T14:47:06Z,2018-12-04T14:47:40Z,MERGED,True,746,360,18,https://github.com/dnohales,T23646 eula,6,[],https://github.com/endlessm/gnome-initial-setup/pull/271,https://github.com/dnohales,1,https://github.com/endlessm/gnome-initial-setup/pull/271,https://phabricator.endlessm.com/T23646,https://phabricator.endlessm.com/T23646,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,271,2018-11-27T20:50:52Z,2018-12-04T14:47:06Z,2018-12-04T14:47:40Z,MERGED,True,746,360,18,https://github.com/dnohales,T23646 eula,6,[],https://github.com/endlessm/gnome-initial-setup/pull/271,https://github.com/dnohales,2,https://github.com/endlessm/gnome-initial-setup/pull/271#issuecomment-442619442,https://phabricator.endlessm.com/T23646,Updated.,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,271,2018-11-27T20:50:52Z,2018-12-04T14:47:06Z,2018-12-04T14:47:40Z,MERGED,True,746,360,18,https://github.com/dnohales,T23646 eula,6,[],https://github.com/endlessm/gnome-initial-setup/pull/271,https://github.com/wjt,3,https://github.com/endlessm/gnome-initial-setup/pull/271#issuecomment-442808122,https://phabricator.endlessm.com/T23646,"I'm not wild about the fact that the settings key controlling whether the account page shows a EULA link is independent to the one which hides the EULA page, but it's not the end of the world.",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,271,2018-11-27T20:50:52Z,2018-12-04T14:47:06Z,2018-12-04T14:47:40Z,MERGED,True,746,360,18,https://github.com/dnohales,T23646 eula,6,[],https://github.com/endlessm/gnome-initial-setup/pull/271,https://github.com/dnohales,4,https://github.com/endlessm/gnome-initial-setup/pull/271#issuecomment-442938414,https://phabricator.endlessm.com/T23646,Updated.,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,271,2018-11-27T20:50:52Z,2018-12-04T14:47:06Z,2018-12-04T14:47:40Z,MERGED,True,746,360,18,https://github.com/dnohales,T23646 eula,6,[],https://github.com/endlessm/gnome-initial-setup/pull/271,https://github.com/dnohales,5,https://github.com/endlessm/gnome-initial-setup/pull/271#issuecomment-442976142,https://phabricator.endlessm.com/T23646,Updated.,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,271,2018-11-27T20:50:52Z,2018-12-04T14:47:06Z,2018-12-04T14:47:40Z,MERGED,True,746,360,18,https://github.com/dnohales,T23646 eula,6,[],https://github.com/endlessm/gnome-initial-setup/pull/271,https://github.com/dnohales,6,https://github.com/endlessm/gnome-initial-setup/pull/271#issuecomment-443226861,https://phabricator.endlessm.com/T23646,@ramcq @cosimoc updated,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,271,2018-11-27T20:50:52Z,2018-12-04T14:47:06Z,2018-12-04T14:47:40Z,MERGED,True,746,360,18,https://github.com/dnohales,T23646 eula,6,[],https://github.com/endlessm/gnome-initial-setup/pull/271,https://github.com/dnohales,7,https://github.com/endlessm/gnome-initial-setup/pull/271#issuecomment-443911524,https://phabricator.endlessm.com/T23646,@wjt Updated.,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,271,2018-11-27T20:50:52Z,2018-12-04T14:47:06Z,2018-12-04T14:47:40Z,MERGED,True,746,360,18,https://github.com/dnohales,T23646 eula,6,[],https://github.com/endlessm/gnome-initial-setup/pull/271,https://github.com/dnohales,8,https://github.com/endlessm/gnome-initial-setup/pull/271#issuecomment-444104174,https://phabricator.endlessm.com/T23646,@wjt Updated this and the other PRs.,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,272,2018-11-28T01:49:22Z,2018-11-28T11:23:40Z,2018-11-28T11:23:42Z,MERGED,True,3,0,2,https://github.com/cosimoc,T24470,2,[],https://github.com/endlessm/gnome-initial-setup/pull/272,https://github.com/cosimoc,1,https://github.com/endlessm/gnome-initial-setup/pull/272,https://phabricator.endlessm.com/T24470,https://phabricator.endlessm.com/T24470,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,273,2018-12-11T06:41:27Z,2018-12-11T09:53:05Z,2018-12-11T09:53:11Z,MERGED,True,73,47,3,https://github.com/jprvita,driver: Connect to GDM as soon as g-i-s starts,2,[],https://github.com/endlessm/gnome-initial-setup/pull/273,https://github.com/jprvita,1,https://github.com/endlessm/gnome-initial-setup/pull/273,"GDM can't tell Plymouth to quit until g-i-s connects to it, so GDM knows
g-i-s has started successfully. Currently g-i-s only connects to GDM on
the last page, when it logs-in the new user. This prevents accessing the
TTY and makes systemd account the time spent in g-i-s as part of the
boot process.
Connecting to GDM as soon as g-i-s allows GDM to tell Plymouth to quit
at the right time, avoiding the problems described above.
Closes: https://gitlab.gnome.org/GNOME/gdm/issues/439
https://phabricator.endlessm.com/T21181","GDM can't tell Plymouth to quit until g-i-s connects to it, so GDM knows
g-i-s has started successfully. Currently g-i-s only connects to GDM on
the last page, when it logs-in the new user. This prevents accessing the
TTY and makes systemd account the time spent in g-i-s as part of the
boot process.
Connecting to GDM as soon as g-i-s allows GDM to tell Plymouth to quit
at the right time, avoiding the problems described above.
Closes: https://gitlab.gnome.org/GNOME/gdm/issues/439
https://phabricator.endlessm.com/T21181",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,274,2018-12-12T08:15:17Z,2018-12-12T08:35:40Z,2018-12-12T08:35:44Z,MERGED,True,1,1,1,https://github.com/wjt,driver: fix sense of error check when connecting to GDM,1,[],https://github.com/endlessm/gnome-initial-setup/pull/274,https://github.com/wjt,1,https://github.com/endlessm/gnome-initial-setup/pull/274,"JP's original patch was correct, but I amended
7383c71 to change ""!error"" to a
comparison to ""NULL"". Unfortunately I got the comparison backwards.
https://phabricator.endlessm.com/T21181","JP's original patch was correct, but I amended
7383c71 to change ""!error"" to a
comparison to ""NULL"". Unfortunately I got the comparison backwards.
https://phabricator.endlessm.com/T21181",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,275,2018-12-12T20:43:46Z,2018-12-13T15:14:21Z,2018-12-13T15:14:30Z,MERGED,True,51,22,1,https://github.com/dnohales,summary: Launch HackUnlock asynchronously,1,[],https://github.com/endlessm/gnome-initial-setup/pull/275,https://github.com/dnohales,1,https://github.com/endlessm/gnome-initial-setup/pull/275,https://phabricator.endlessm.com/T24631,https://phabricator.endlessm.com/T24631,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,275,2018-12-12T20:43:46Z,2018-12-13T15:14:21Z,2018-12-13T15:14:30Z,MERGED,True,51,22,1,https://github.com/dnohales,summary: Launch HackUnlock asynchronously,1,[],https://github.com/endlessm/gnome-initial-setup/pull/275,https://github.com/cosimoc,2,https://github.com/endlessm/gnome-initial-setup/pull/275#issuecomment-446764046,https://phabricator.endlessm.com/T24631,"It's not a bad idea in general to make the code asynchronous, but I believe the design intention for the spinner was simply to change the mouse cursor, not necessarily add a spinner next to the button, which would not require the async change... Do you have a screenshot of how this looks?",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,275,2018-12-12T20:43:46Z,2018-12-13T15:14:21Z,2018-12-13T15:14:30Z,MERGED,True,51,22,1,https://github.com/dnohales,summary: Launch HackUnlock asynchronously,1,[],https://github.com/endlessm/gnome-initial-setup/pull/275,https://github.com/dnohales,3,https://github.com/endlessm/gnome-initial-setup/pull/275#issuecomment-446765731,https://phabricator.endlessm.com/T24631,"I'd prefer to have it async, just because I don't feel the window blocking looks ok nor that is ok technically. I agree we can change the spinner with the busy cursor, that probably looks better, the current situation of the GtkSpinner not spinning is not ideal:",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,275,2018-12-12T20:43:46Z,2018-12-13T15:14:21Z,2018-12-13T15:14:30Z,MERGED,True,51,22,1,https://github.com/dnohales,summary: Launch HackUnlock asynchronously,1,[],https://github.com/endlessm/gnome-initial-setup/pull/275,https://github.com/cosimoc,4,https://github.com/endlessm/gnome-initial-setup/pull/275#issuecomment-446768646,https://phabricator.endlessm.com/T24631,Sounds good. Let's keep the async improvement and change the cursor too then.,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,275,2018-12-12T20:43:46Z,2018-12-13T15:14:21Z,2018-12-13T15:14:30Z,MERGED,True,51,22,1,https://github.com/dnohales,summary: Launch HackUnlock asynchronously,1,[],https://github.com/endlessm/gnome-initial-setup/pull/275,https://github.com/dnohales,5,https://github.com/endlessm/gnome-initial-setup/pull/275#issuecomment-446770506,https://phabricator.endlessm.com/T24631,Updated.,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,276,2019-01-04T20:27:58Z,2019-01-04T22:44:05Z,2019-01-04T22:44:08Z,MERGED,True,5,0,1,https://github.com/dnohales,account: Enable automatic login on Hack,1,[],https://github.com/endlessm/gnome-initial-setup/pull/276,https://github.com/dnohales,1,https://github.com/endlessm/gnome-initial-setup/pull/276,https://phabricator.endlessm.com/T25008,https://phabricator.endlessm.com/T25008,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,277,2019-01-08T06:57:29Z,2019-01-28T21:17:27Z,2019-01-28T21:17:45Z,MERGED,True,317,23,8,https://github.com/cfoch,T25053,2,[],https://github.com/endlessm/gnome-initial-setup/pull/277,https://github.com/cfoch,1,https://github.com/endlessm/gnome-initial-setup/pull/277,https://phabricator.endlessm.com/T25053,https://phabricator.endlessm.com/T25053,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,278,2019-01-16T21:12:48Z,2019-01-17T16:37:41Z,2019-01-17T16:37:44Z,MERGED,True,4,2,1,https://github.com/dnohales,account: Don't create shared user for Hack,1,[],https://github.com/endlessm/gnome-initial-setup/pull/278,https://github.com/dnohales,1,https://github.com/endlessm/gnome-initial-setup/pull/278,https://phabricator.endlessm.com/T25106,https://phabricator.endlessm.com/T25106,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,279,2019-01-18T09:51:39Z,2019-08-06T21:15:19Z,2019-08-06T21:15:22Z,CLOSED,False,16,11,4,https://github.com/wjt,Ensure shared user doesn't collide with administrator,4,[],https://github.com/endlessm/gnome-initial-setup/pull/279,https://github.com/wjt,1,https://github.com/endlessm/gnome-initial-setup/pull/279,"We get sporadic reports of systems which only have the shared user, and no administrator user. (In one case, the user reported not being asked to create an admin user during the FBE.) It's hard to recover from this state because the shared user is not an administrator and the root account is locked; it's also hard to get useful logs, because the shared user cannot read the full journal.
I found one way to reproduce this problem: enter ""shared"" when prompted for your full name. Previously, this would generate ""shared"" as your username; because the hardcoded shared account was created before the user's own account, creating the administrator account (with the same username) would fail, and you'd be stuck with >= 1 non-system user (meaning the FBE will not run on boot) but no administrators.
It seems a little unlikely that non-English-speaking users entered the name ""shared"", but I couldn't find any other ways to get into this situation. In any case, here are 3 related fixes:

Create the shared user only if creating the administrator user succeeds
Don't generate ""shared"" as a candidate username for the administrator user
Don't temporarily store the shared user's credentials to use to sign in at the end of the FBE

With these changes, if a user does find whatever other way there is to cause the administrator account not to be created, the shared user will also not be created, and the FBE will run at the next reboot.
https://phabricator.endlessm.com/T19500","We get sporadic reports of systems which only have the shared user, and no administrator user. (In one case, the user reported not being asked to create an admin user during the FBE.) It's hard to recover from this state because the shared user is not an administrator and the root account is locked; it's also hard to get useful logs, because the shared user cannot read the full journal.
I found one way to reproduce this problem: enter ""shared"" when prompted for your full name. Previously, this would generate ""shared"" as your username; because the hardcoded shared account was created before the user's own account, creating the administrator account (with the same username) would fail, and you'd be stuck with >= 1 non-system user (meaning the FBE will not run on boot) but no administrators.
It seems a little unlikely that non-English-speaking users entered the name ""shared"", but I couldn't find any other ways to get into this situation. In any case, here are 3 related fixes:

Create the shared user only if creating the administrator user succeeds
Don't generate ""shared"" as a candidate username for the administrator user
Don't temporarily store the shared user's credentials to use to sign in at the end of the FBE

With these changes, if a user does find whatever other way there is to cause the administrator account not to be created, the shared user will also not be created, and the FBE will run at the next reboot.
https://phabricator.endlessm.com/T19500",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,279,2019-01-18T09:51:39Z,2019-08-06T21:15:19Z,2019-08-06T21:15:22Z,CLOSED,False,16,11,4,https://github.com/wjt,Ensure shared user doesn't collide with administrator,4,[],https://github.com/endlessm/gnome-initial-setup/pull/279,https://github.com/wjt,2,https://github.com/endlessm/gnome-initial-setup/pull/279#issuecomment-455511746,"We get sporadic reports of systems which only have the shared user, and no administrator user. (In one case, the user reported not being asked to create an admin user during the FBE.) It's hard to recover from this state because the shared user is not an administrator and the root account is locked; it's also hard to get useful logs, because the shared user cannot read the full journal.
I found one way to reproduce this problem: enter ""shared"" when prompted for your full name. Previously, this would generate ""shared"" as your username; because the hardcoded shared account was created before the user's own account, creating the administrator account (with the same username) would fail, and you'd be stuck with >= 1 non-system user (meaning the FBE will not run on boot) but no administrators.
It seems a little unlikely that non-English-speaking users entered the name ""shared"", but I couldn't find any other ways to get into this situation. In any case, here are 3 related fixes:

Create the shared user only if creating the administrator user succeeds
Don't generate ""shared"" as a candidate username for the administrator user
Don't temporarily store the shared user's credentials to use to sign in at the end of the FBE

With these changes, if a user does find whatever other way there is to cause the administrator account not to be created, the shared user will also not be created, and the FBE will run at the next reboot.
https://phabricator.endlessm.com/T19500","I spotted a (legit) warning introduced by one of my patches: apparently the code I tested was not the code I submitted here.
../tmphnrq9gbx/gnome-initial-setup-3.28.0/gnome-initial-setup/pages/account/gis-account-page-local.c: In function ‘local_create_user’:
../tmphnrq9gbx/gnome-initial-setup-3.28.0/gnome-initial-setup/pages/account/gis-account-page-local.c:612:7: warning: ‘driver’ may be used uninitialized in this function [-Wmaybe-uninitialized]
   if (gis_driver_is_hack (driver))
       ^~~~~~~~~~~~~~~~~~~~~~~~~~~

I think I moved the assignment down while turning my WIP code into this patch series.",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,279,2019-01-18T09:51:39Z,2019-08-06T21:15:19Z,2019-08-06T21:15:22Z,CLOSED,False,16,11,4,https://github.com/wjt,Ensure shared user doesn't collide with administrator,4,[],https://github.com/endlessm/gnome-initial-setup/pull/279,https://github.com/wjt,3,https://github.com/endlessm/gnome-initial-setup/pull/279#issuecomment-455514289,"We get sporadic reports of systems which only have the shared user, and no administrator user. (In one case, the user reported not being asked to create an admin user during the FBE.) It's hard to recover from this state because the shared user is not an administrator and the root account is locked; it's also hard to get useful logs, because the shared user cannot read the full journal.
I found one way to reproduce this problem: enter ""shared"" when prompted for your full name. Previously, this would generate ""shared"" as your username; because the hardcoded shared account was created before the user's own account, creating the administrator account (with the same username) would fail, and you'd be stuck with >= 1 non-system user (meaning the FBE will not run on boot) but no administrators.
It seems a little unlikely that non-English-speaking users entered the name ""shared"", but I couldn't find any other ways to get into this situation. In any case, here are 3 related fixes:

Create the shared user only if creating the administrator user succeeds
Don't generate ""shared"" as a candidate username for the administrator user
Don't temporarily store the shared user's credentials to use to sign in at the end of the FBE

With these changes, if a user does find whatever other way there is to cause the administrator account not to be created, the shared user will also not be created, and the FBE will run at the next reboot.
https://phabricator.endlessm.com/T19500","(Tested this new code, it builds and runs without (related) warnings.)",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,279,2019-01-18T09:51:39Z,2019-08-06T21:15:19Z,2019-08-06T21:15:22Z,CLOSED,False,16,11,4,https://github.com/wjt,Ensure shared user doesn't collide with administrator,4,[],https://github.com/endlessm/gnome-initial-setup/pull/279,https://github.com/ptomato,4,https://github.com/endlessm/gnome-initial-setup/pull/279#issuecomment-518846886,"We get sporadic reports of systems which only have the shared user, and no administrator user. (In one case, the user reported not being asked to create an admin user during the FBE.) It's hard to recover from this state because the shared user is not an administrator and the root account is locked; it's also hard to get useful logs, because the shared user cannot read the full journal.
I found one way to reproduce this problem: enter ""shared"" when prompted for your full name. Previously, this would generate ""shared"" as your username; because the hardcoded shared account was created before the user's own account, creating the administrator account (with the same username) would fail, and you'd be stuck with >= 1 non-system user (meaning the FBE will not run on boot) but no administrators.
It seems a little unlikely that non-English-speaking users entered the name ""shared"", but I couldn't find any other ways to get into this situation. In any case, here are 3 related fixes:

Create the shared user only if creating the administrator user succeeds
Don't generate ""shared"" as a candidate username for the administrator user
Don't temporarily store the shared user's credentials to use to sign in at the end of the FBE

With these changes, if a user does find whatever other way there is to cause the administrator account not to be created, the shared user will also not be created, and the FBE will run at the next reboot.
https://phabricator.endlessm.com/T19500","I'm rebasing this PR and incorporating it into the GNOME 3.34 rebase in https://phabricator.endlessm.com/T25162, so closing this one.",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,280,2019-02-18T13:18:31Z,2019-02-20T22:01:24Z,2019-02-20T22:06:50Z,MERGED,True,1,0,1,https://github.com/danigm,Add product_serial file to the tmpfile.d,1,[],https://github.com/endlessm/gnome-initial-setup/pull/280,https://github.com/danigm,1,https://github.com/endlessm/gnome-initial-setup/pull/280,"This will allow us to use the product_serial for the account creation.
https://phabricator.endlessm.com/T25480","This will allow us to use the product_serial for the account creation.
https://phabricator.endlessm.com/T25480",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,280,2019-02-18T13:18:31Z,2019-02-20T22:01:24Z,2019-02-20T22:06:50Z,MERGED,True,1,0,1,https://github.com/danigm,Add product_serial file to the tmpfile.d,1,[],https://github.com/endlessm/gnome-initial-setup/pull/280,https://github.com/danigm,2,https://github.com/endlessm/gnome-initial-setup/pull/280#issuecomment-464816599,"This will allow us to use the product_serial for the account creation.
https://phabricator.endlessm.com/T25480",I've just updated the commit message with the one you proposed. We don't have phabricator ticket yet.,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,280,2019-02-18T13:18:31Z,2019-02-20T22:01:24Z,2019-02-20T22:06:50Z,MERGED,True,1,0,1,https://github.com/danigm,Add product_serial file to the tmpfile.d,1,[],https://github.com/endlessm/gnome-initial-setup/pull/280,https://github.com/wjt,3,https://github.com/endlessm/gnome-initial-setup/pull/280#issuecomment-464820276,"This will allow us to use the product_serial for the account creation.
https://phabricator.endlessm.com/T25480",Please open one.,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,280,2019-02-18T13:18:31Z,2019-02-20T22:01:24Z,2019-02-20T22:06:50Z,MERGED,True,1,0,1,https://github.com/danigm,Add product_serial file to the tmpfile.d,1,[],https://github.com/endlessm/gnome-initial-setup/pull/280,https://github.com/danigm,4,https://github.com/endlessm/gnome-initial-setup/pull/280#issuecomment-465051580,"This will allow us to use the product_serial for the account creation.
https://phabricator.endlessm.com/T25480",I've created the task and added to the commit message.,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,280,2019-02-18T13:18:31Z,2019-02-20T22:01:24Z,2019-02-20T22:06:50Z,MERGED,True,1,0,1,https://github.com/danigm,Add product_serial file to the tmpfile.d,1,[],https://github.com/endlessm/gnome-initial-setup/pull/280,https://github.com/wjt,5,https://github.com/endlessm/gnome-initial-setup/pull/280#issuecomment-465143000,"This will allow us to use the product_serial for the account creation.
https://phabricator.endlessm.com/T25480","@dsd as someone who was involved in the initial work to make product_serial, then product_uuid, readable initially by nogroup then by all users (see tickets linked on 3513822) do you have any opinion about the implications of making the product serial number world-readable? I guess the main concern is a privacy one, but I don't think the product serial number is substantially more sensitive than the (equally unique) product UUID.",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,280,2019-02-18T13:18:31Z,2019-02-20T22:01:24Z,2019-02-20T22:06:50Z,MERGED,True,1,0,1,https://github.com/danigm,Add product_serial file to the tmpfile.d,1,[],https://github.com/endlessm/gnome-initial-setup/pull/280,https://github.com/dsd,6,https://github.com/endlessm/gnome-initial-setup/pull/280#issuecomment-465404838,"This will allow us to use the product_serial for the account creation.
https://phabricator.endlessm.com/T25480","I don't view the reasoning of ""its fine because we do it for uuid"" as very strong - when the product was at a much earlier stage years ago, we would often sidestep concerns like this one in the name of getting a product to market as quick as possible. Glancing at the old issues it doesn't look like the privacy issue was really considered or discussed.
That said though, I don't have specific concerns with making this information accessible.",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,280,2019-02-18T13:18:31Z,2019-02-20T22:01:24Z,2019-02-20T22:06:50Z,MERGED,True,1,0,1,https://github.com/danigm,Add product_serial file to the tmpfile.d,1,[],https://github.com/endlessm/gnome-initial-setup/pull/280,https://github.com/wjt,7,https://github.com/endlessm/gnome-initial-setup/pull/280#issuecomment-465772465,"This will allow us to use the product_serial for the account creation.
https://phabricator.endlessm.com/T25480","Sure – FWIW I also think it's not an amazing argument, even though I'm employing it.
There is a similar time pressure around this feature so I'm going to merge this change, but will follow up on the Phabricator ticket about the privacy implications of this and the existing product_uuid change.",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,281,2019-03-05T20:07:26Z,2019-03-06T11:12:52Z,2019-03-06T11:12:52Z,CLOSED,False,52,40,4,https://github.com/joaquimrocha,T25318 greet user on desktop,3,[],https://github.com/endlessm/gnome-initial-setup/pull/281,https://github.com/joaquimrocha,1,https://github.com/endlessm/gnome-initial-setup/pull/281,https://phabricator.endlessm.com/T25318,https://phabricator.endlessm.com/T25318,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,282,2019-04-25T12:58:47Z,2019-04-29T15:44:10Z,2019-04-29T15:44:13Z,MERGED,True,0,21,2,https://github.com/wjt,Unlock keyring using libsecret + internal D-Bus API,1,[],https://github.com/endlessm/gnome-initial-setup/pull/282,https://github.com/wjt,1,https://github.com/endlessm/gnome-initial-setup/pull/282,"libgnome-keyring has been dropped from Debian in favour of applications
using libsecret.
https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=892359
libsecret does not provide a straightforward API to unlock a keyring
with a given passphrase, but we can do it with gnome-keyring's
InternalUnsupportedGuiltRiddenInterface, which gis-keyring.c uses to set
the passphrase on the login keyring in the first place.
This should be squashed into 'copy-worker: Unlock keyring on first
login' in the next rebase.
https://phabricator.endlessm.com/T26274","libgnome-keyring has been dropped from Debian in favour of applications
using libsecret.
https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=892359
libsecret does not provide a straightforward API to unlock a keyring
with a given passphrase, but we can do it with gnome-keyring's
InternalUnsupportedGuiltRiddenInterface, which gis-keyring.c uses to set
the passphrase on the login keyring in the first place.
This should be squashed into 'copy-worker: Unlock keyring on first
login' in the next rebase.
https://phabricator.endlessm.com/T26274",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,282,2019-04-25T12:58:47Z,2019-04-29T15:44:10Z,2019-04-29T15:44:13Z,MERGED,True,0,21,2,https://github.com/wjt,Unlock keyring using libsecret + internal D-Bus API,1,[],https://github.com/endlessm/gnome-initial-setup/pull/282,https://github.com/wjt,2,https://github.com/endlessm/gnome-initial-setup/pull/282#issuecomment-487631500,"libgnome-keyring has been dropped from Debian in favour of applications
using libsecret.
https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=892359
libsecret does not provide a straightforward API to unlock a keyring
with a given passphrase, but we can do it with gnome-keyring's
InternalUnsupportedGuiltRiddenInterface, which gis-keyring.c uses to set
the passphrase on the login keyring in the first place.
This should be squashed into 'copy-worker: Unlock keyring on first
login' in the next rebase.
https://phabricator.endlessm.com/T26274","Updated with a new ""implementation"" which just removes this code.
In the version of this patch on the eos3.1 branch and earlier branches, 5284f20, the account page wrote the password to disk. The eos3.2 rebase brought in an upstream change where the account page was split into ""local"" and ""enterprise"" bits; the version of this patch on that branch, 38ca1bd, does not include the hunk to write the password file. So since July 2017 this code has been a no-op.
I think this implementation is pretty dodgy, anyway – I think these files should be copied into place before the session starts, to avoid the faintest hint of a situation where gnome-keyring auto-creates the login keyring, then the copy-worker overwrites it. This should be an upstream change for all the other files too.",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,283,2019-04-25T12:59:04Z,2019-04-29T15:45:06Z,2019-04-29T15:45:09Z,MERGED,True,6,2,3,https://github.com/wjt,Drop libgnome-keyring dependency,1,[],https://github.com/endlessm/gnome-initial-setup/pull/283,https://github.com/wjt,1,https://github.com/endlessm/gnome-initial-setup/pull/283,"This library has been removed from Debian; we have reimplemented our
downstream code that used it in terms of libsecret and an internal
gnome-keyring D-Bus API.
Counterpart to #282.
https://phabricator.endlessm.com/T26274","This library has been removed from Debian; we have reimplemented our
downstream code that used it in terms of libsecret and an internal
gnome-keyring D-Bus API.
Counterpart to #282.
https://phabricator.endlessm.com/T26274",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,283,2019-04-25T12:59:04Z,2019-04-29T15:45:06Z,2019-04-29T15:45:09Z,MERGED,True,6,2,3,https://github.com/wjt,Drop libgnome-keyring dependency,1,[],https://github.com/endlessm/gnome-initial-setup/pull/283,https://github.com/wjt,2,https://github.com/endlessm/gnome-initial-setup/pull/283#issuecomment-487615258,"This library has been removed from Debian; we have reimplemented our
downstream code that used it in terms of libsecret and an internal
gnome-keyring D-Bus API.
Counterpart to #282.
https://phabricator.endlessm.com/T26274",Reworded the commit message; see #282 for why.,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,284,2019-09-03T22:09:47Z,2019-09-12T17:02:51Z,2019-09-12T17:03:09Z,MERGED,True,155,36,8,https://github.com/ptomato,"gnome-initial-setup rebase, Debian packaging",7,[],https://github.com/endlessm/gnome-initial-setup/pull/284,https://github.com/ptomato,1,https://github.com/endlessm/gnome-initial-setup/pull/284,https://phabricator.endlessm.com/T25162,https://phabricator.endlessm.com/T25162,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,285,2019-09-13T23:35:26Z,2019-09-16T23:14:08Z,2019-09-16T23:14:11Z,MERGED,True,5,0,1,https://github.com/ptomato,Allow gnome-initial-setup user to run eos-write-location,1,[],https://github.com/endlessm/gnome-initial-setup/pull/285,https://github.com/ptomato,1,https://github.com/endlessm/gnome-initial-setup/pull/285,"This is necessary in order for the Site page to be able to save its data
to /etc/metrics/location.conf.
https://phabricator.endlessm.com/T27787","This is necessary in order for the Site page to be able to save its data
to /etc/metrics/location.conf.
https://phabricator.endlessm.com/T27787",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,286,2019-09-18T07:52:35Z,2019-09-26T19:21:14Z,2019-09-26T19:21:16Z,MERGED,True,83,57,1,https://github.com/danigm,account: Use control-center setting to override faces,1,[],https://github.com/endlessm/gnome-initial-setup/pull/286,https://github.com/danigm,1,https://github.com/endlessm/gnome-initial-setup/pull/286,"This patch uses the gnome-control-center user-accounts facesdir
configuration to override the default faces dir.
https://phabricator.endlessm.com/T27788","This patch uses the gnome-control-center user-accounts facesdir
configuration to override the default faces dir.
https://phabricator.endlessm.com/T27788",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,286,2019-09-18T07:52:35Z,2019-09-26T19:21:14Z,2019-09-26T19:21:16Z,MERGED,True,83,57,1,https://github.com/danigm,account: Use control-center setting to override faces,1,[],https://github.com/endlessm/gnome-initial-setup/pull/286,https://github.com/danigm,2,https://github.com/endlessm/gnome-initial-setup/pull/286#issuecomment-534146211,"This patch uses the gnome-control-center user-accounts facesdir
configuration to override the default faces dir.
https://phabricator.endlessm.com/T27788",I've updated the code with the same code from the gnome-control-center to allow more than one faces directories.,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,287,2019-09-19T12:55:03Z,2019-09-19T18:49:18Z,2019-09-19T18:49:35Z,MERGED,True,10,5,2,https://github.com/wjt,Fixes for site page,2,[],https://github.com/endlessm/gnome-initial-setup/pull/287,https://github.com/wjt,1,https://github.com/endlessm/gnome-initial-setup/pull/287,"Two backports from master, both manually applied/resolved:

Allow gnome-initial-setup user to run eos-write-location
Backport site page Spanish translation updates

https://phabricator.endlessm.com/T27733
https://phabricator.endlessm.com/T27787","Two backports from master, both manually applied/resolved:

Allow gnome-initial-setup user to run eos-write-location
Backport site page Spanish translation updates

https://phabricator.endlessm.com/T27733
https://phabricator.endlessm.com/T27787",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,288,2019-09-25T18:23:12Z,2019-09-25T19:09:14Z,2019-09-25T19:09:17Z,MERGED,True,3,0,1,https://github.com/wjt,"assistant: mark ""Accept"" button as suggested action",1,[],https://github.com/endlessm/gnome-initial-setup/pull/288,https://github.com/wjt,1,https://github.com/endlessm/gnome-initial-setup/pull/288,"3857805 added this style class to the ""Next"" button, and removed code
that would set this class depending on whether the widget is sensitive.
At the time I overlooked that the suggested-action style class should
also be present for the ""Accept"" button on the EULA page: I think it's
correct to say that accepting the EULA is the suggested action.
There is a third button which may appear in this position: ""Skip"". This
is used (for example) on the Wi-Fi configuration page when no network is
selected. It's correct not to mark this button as suggested: the
suggested action is to configure a Wi-Fi network.
https://gitlab.gnome.org/GNOME/gnome-initial-setup/merge_requests/61
https://phabricator.endlessm.com/T27790","3857805 added this style class to the ""Next"" button, and removed code
that would set this class depending on whether the widget is sensitive.
At the time I overlooked that the suggested-action style class should
also be present for the ""Accept"" button on the EULA page: I think it's
correct to say that accepting the EULA is the suggested action.
There is a third button which may appear in this position: ""Skip"". This
is used (for example) on the Wi-Fi configuration page when no network is
selected. It's correct not to mark this button as suggested: the
suggested action is to configure a Wi-Fi network.
https://gitlab.gnome.org/GNOME/gnome-initial-setup/merge_requests/61
https://phabricator.endlessm.com/T27790",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,288,2019-09-25T18:23:12Z,2019-09-25T19:09:14Z,2019-09-25T19:09:17Z,MERGED,True,3,0,1,https://github.com/wjt,"assistant: mark ""Accept"" button as suggested action",1,[],https://github.com/endlessm/gnome-initial-setup/pull/288,https://github.com/ptomato,2,https://github.com/endlessm/gnome-initial-setup/pull/288#issuecomment-535168098,"3857805 added this style class to the ""Next"" button, and removed code
that would set this class depending on whether the widget is sensitive.
At the time I overlooked that the suggested-action style class should
also be present for the ""Accept"" button on the EULA page: I think it's
correct to say that accepting the EULA is the suggested action.
There is a third button which may appear in this position: ""Skip"". This
is used (for example) on the Wi-Fi configuration page when no network is
selected. It's correct not to mark this button as suggested: the
suggested action is to configure a Wi-Fi network.
https://gitlab.gnome.org/GNOME/gnome-initial-setup/merge_requests/61
https://phabricator.endlessm.com/T27790","Merged upstream, so 👍",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,289,2019-10-04T07:17:05Z,2019-10-04T10:23:08Z,2019-10-04T10:23:34Z,MERGED,True,58,9,8,https://github.com/dsd,Adjust live boot UI for persistent data storage feature,3,[],https://github.com/endlessm/gnome-initial-setup/pull/289,https://github.com/dsd,1,https://github.com/endlessm/gnome-initial-setup/pull/289,https://phabricator.endlessm.com/T27772,https://phabricator.endlessm.com/T27772,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,290,2019-10-09T05:50:50Z,2019-10-09T16:11:57Z,2019-10-09T16:12:04Z,MERGED,True,3,0,1,https://github.com/dsd,live-chooser: don't create live user account when in persistent live …,1,[],https://github.com/endlessm/gnome-initial-setup/pull/290,https://github.com/dsd,1,https://github.com/endlessm/gnome-initial-setup/pull/290,"…mode
Recent changes add support for persistent live mode, where the full
series of setup steps are shown, including user creation.
When running in that mode, there is no need to auto-create the live user
account, which is only supposed to happen in cases where the user
creation page is skipped.
https://phabricator.endlessm.com/T28041","…mode
Recent changes add support for persistent live mode, where the full
series of setup steps are shown, including user creation.
When running in that mode, there is no need to auto-create the live user
account, which is only supposed to happen in cases where the user
creation page is skipped.
https://phabricator.endlessm.com/T28041",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,291,2019-10-14T19:52:42Z,2019-10-14T20:27:10Z,2019-10-14T20:27:16Z,MERGED,True,128,126,5,https://github.com/wjt,Updates from Transifex,1,[],https://github.com/endlessm/gnome-initial-setup/pull/291,https://github.com/wjt,1,https://github.com/endlessm/gnome-initial-setup/pull/291,"I have fixed the broken strings.
https://phabricator.endlessm.com/T27764","I have fixed the broken strings.
https://phabricator.endlessm.com/T27764",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,292,2019-10-16T06:15:41Z,2019-10-16T19:17:36Z,2019-10-16T19:17:40Z,MERGED,True,37,21,7,https://github.com/wjt,Update to 3.34.1,9,[],https://github.com/endlessm/gnome-initial-setup/pull/292,https://github.com/wjt,1,https://github.com/endlessm/gnome-initial-setup/pull/292,"Minor conflicts in po/ca.po and po/ja.po. Only one change that we didn't
already have downstream.
https://phabricator.endlessm.com/T28175","Minor conflicts in po/ca.po and po/ja.po. Only one change that we didn't
already have downstream.
https://phabricator.endlessm.com/T28175",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,293,2019-10-16T06:17:56Z,2019-10-16T19:18:07Z,2019-10-16T19:18:10Z,MERGED,True,25,0,1,https://github.com/wjt,Update changelog entries for 3.34.1,2,[],https://github.com/endlessm/gnome-initial-setup/pull/293,https://github.com/wjt,1,https://github.com/endlessm/gnome-initial-setup/pull/293,"Nothing interesting here.
https://phabricator.endlessm.com/T28175","Nothing interesting here.
https://phabricator.endlessm.com/T28175",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,293,2019-10-16T06:17:56Z,2019-10-16T19:18:07Z,2019-10-16T19:18:10Z,MERGED,True,25,0,1,https://github.com/wjt,Update changelog entries for 3.34.1,2,[],https://github.com/endlessm/gnome-initial-setup/pull/293,https://github.com/andrunko,2,https://github.com/endlessm/gnome-initial-setup/pull/293#issuecomment-542713112,"Nothing interesting here.
https://phabricator.endlessm.com/T28175",The buildbot is complaining here.,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,293,2019-10-16T06:17:56Z,2019-10-16T19:18:07Z,2019-10-16T19:18:10Z,MERGED,True,25,0,1,https://github.com/wjt,Update changelog entries for 3.34.1,2,[],https://github.com/endlessm/gnome-initial-setup/pull/293,https://github.com/wjt,3,https://github.com/endlessm/gnome-initial-setup/pull/293#issuecomment-542741658,"Nothing interesting here.
https://phabricator.endlessm.com/T28175",retest this please,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,293,2019-10-16T06:17:56Z,2019-10-16T19:18:07Z,2019-10-16T19:18:10Z,MERGED,True,25,0,1,https://github.com/wjt,Update changelog entries for 3.34.1,2,[],https://github.com/endlessm/gnome-initial-setup/pull/293,https://github.com/wjt,4,https://github.com/endlessm/gnome-initial-setup/pull/293#issuecomment-542753692,"Nothing interesting here.
https://phabricator.endlessm.com/T28175","Yep, the same failure as was addressed on #292 by a05f7eb",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,294,2019-10-22T10:46:37Z,2019-10-24T09:18:27Z,2019-10-24T09:18:27Z,CLOSED,False,1,4138,1,https://github.com/erikos,summary: update check mark icon for new default background,1,[],https://github.com/endlessm/gnome-initial-setup/pull/294,https://github.com/erikos,1,https://github.com/endlessm/gnome-initial-setup/pull/294,https://phabricator.endlessm.com/T28188,https://phabricator.endlessm.com/T28188,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,294,2019-10-22T10:46:37Z,2019-10-24T09:18:27Z,2019-10-24T09:18:27Z,CLOSED,False,1,4138,1,https://github.com/erikos,summary: update check mark icon for new default background,1,[],https://github.com/endlessm/gnome-initial-setup/pull/294,https://github.com/wjt,2,https://github.com/endlessm/gnome-initial-setup/pull/294#issuecomment-544908767,https://phabricator.endlessm.com/T28188,"Have you verified how this looks in the app? I ask because when I open the SVGs in Firefox, the old one correctly displays as 256×256, whereas this one is gigantic.",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,294,2019-10-22T10:46:37Z,2019-10-24T09:18:27Z,2019-10-24T09:18:27Z,CLOSED,False,1,4138,1,https://github.com/erikos,summary: update check mark icon for new default background,1,[],https://github.com/endlessm/gnome-initial-setup/pull/294,https://github.com/erikos,3,https://github.com/endlessm/gnome-initial-setup/pull/294#issuecomment-544909913,https://phabricator.endlessm.com/T28188,"Yeah, dropbox displays the file correctly and I can view it in Inkscape correctly too. It says it is 256x256. In the diff it shows correct too.",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,294,2019-10-22T10:46:37Z,2019-10-24T09:18:27Z,2019-10-24T09:18:27Z,CLOSED,False,1,4138,1,https://github.com/erikos,summary: update check mark icon for new default background,1,[],https://github.com/endlessm/gnome-initial-setup/pull/294,https://github.com/wjt,4,https://github.com/endlessm/gnome-initial-setup/pull/294#issuecomment-544914094,https://phabricator.endlessm.com/T28188,"Dropbox, Inkscape and the GitHub diff are not the app itself. It does not look correct in the app.",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,294,2019-10-22T10:46:37Z,2019-10-24T09:18:27Z,2019-10-24T09:18:27Z,CLOSED,False,1,4138,1,https://github.com/erikos,summary: update check mark icon for new default background,1,[],https://github.com/endlessm/gnome-initial-setup/pull/294,https://github.com/erikos,5,https://github.com/endlessm/gnome-initial-setup/pull/294#issuecomment-544916316,https://phabricator.endlessm.com/T28188,"Sure, just saying that I tested that so far and that I have seen some differences in the visual output there. I guess different interpretation of the svg.",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,294,2019-10-22T10:46:37Z,2019-10-24T09:18:27Z,2019-10-24T09:18:27Z,CLOSED,False,1,4138,1,https://github.com/erikos,summary: update check mark icon for new default background,1,[],https://github.com/endlessm/gnome-initial-setup/pull/294,https://github.com/wjt,6,https://github.com/endlessm/gnome-initial-setup/pull/294#issuecomment-545650808,https://phabricator.endlessm.com/T28188,"Well – I spent some time tinkering in Inkscape and I got something that renders properly in the app.
https://willthompson.co.uk/misc/ready-to-go.svg
But I think it looks really bad:

Compare it to what we have now:

On closer inspection, the check mark is actually not the Endless wallpaper – it's an upstream asset. The new Endless wallpaper would be shown behind the app anyway so… is what we actually want to make that ✔ part of the window transparent?
Anyway ­– we could spend time tinkering with this, but personally I think the time would be better spent pursuing something like what's proposed at https://gitlab.gnome.org/GNOME/gnome-initial-setup/issues/8 and keeping the upstream asset for now.",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,294,2019-10-22T10:46:37Z,2019-10-24T09:18:27Z,2019-10-24T09:18:27Z,CLOSED,False,1,4138,1,https://github.com/erikos,summary: update check mark icon for new default background,1,[],https://github.com/endlessm/gnome-initial-setup/pull/294,https://github.com/erikos,7,https://github.com/endlessm/gnome-initial-setup/pull/294#issuecomment-545822425,https://phabricator.endlessm.com/T28188,"Interesting, I always thought that asset was there from an old Endless default background.
Agreed let's invest in the upstream change.
Btw, Hack had it's own summary page background.",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,295,2019-10-25T21:38:30Z,2019-10-28T20:05:57Z,2019-10-28T20:06:03Z,MERGED,True,3,4,1,https://github.com/ptomato,Avatar faces in gsettings-desktop-schemas,2,[],https://github.com/endlessm/gnome-initial-setup/pull/295,https://github.com/ptomato,1,https://github.com/endlessm/gnome-initial-setup/pull/295,https://phabricator.endlessm.com/T28364,https://phabricator.endlessm.com/T28364,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,296,2019-11-06T10:44:20Z,2019-11-06T11:17:09Z,2019-11-06T11:17:15Z,MERGED,True,8,8,4,https://github.com/wjt,Updates from Transifex,1,[],https://github.com/endlessm/gnome-initial-setup/pull/296,https://github.com/wjt,1,https://github.com/endlessm/gnome-initial-setup/pull/296,https://phabricator.endlessm.com/T28002,https://phabricator.endlessm.com/T28002,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,297,2019-12-20T17:16:49Z,2019-12-20T17:25:51Z,2019-12-20T17:25:55Z,CLOSED,False,1,1,1,https://github.com/andrunko,"Fix ""Password hint"" translation to pt_BR",1,[],https://github.com/endlessm/gnome-initial-setup/pull/297,https://github.com/andrunko,1,https://github.com/endlessm/gnome-initial-setup/pull/297,"Also needs to be cherry-picked to 3.7 which has the same issue.
https://phabricator.endlessm.com/T29000","Also needs to be cherry-picked to 3.7 which has the same issue.
https://phabricator.endlessm.com/T29000",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,297,2019-12-20T17:16:49Z,2019-12-20T17:25:51Z,2019-12-20T17:25:55Z,CLOSED,False,1,1,1,https://github.com/andrunko,"Fix ""Password hint"" translation to pt_BR",1,[],https://github.com/endlessm/gnome-initial-setup/pull/297,https://github.com/andrunko,2,https://github.com/endlessm/gnome-initial-setup/pull/297#issuecomment-568009256,"Also needs to be cherry-picked to 3.7 which has the same issue.
https://phabricator.endlessm.com/T29000","This has to be done in transifex instead, closing here.",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,298,2019-12-26T20:25:53Z,2021-06-18T11:11:34Z,2021-06-18T11:11:37Z,CLOSED,False,86912,25941,249,https://github.com/wjt,Fix factory and demo mode on ARM,124,[],https://github.com/endlessm/gnome-initial-setup/pull/298,https://github.com/wjt,1,https://github.com/endlessm/gnome-initial-setup/pull/298,"Work in progress: completely untested.
https://phabricator.endlessm.com/T27631","Work in progress: completely untested.
https://phabricator.endlessm.com/T27631",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,299,2020-02-10T10:38:24Z,2020-02-18T12:43:59Z,2020-02-18T12:44:42Z,MERGED,True,155,129,1,https://github.com/wjt,network: react to devices being connected,4,[],https://github.com/endlessm/gnome-initial-setup/pull/299,https://github.com/wjt,1,https://github.com/endlessm/gnome-initial-setup/pull/299,"A clean backport of
https://gitlab.gnome.org/GNOME/gnome-initial-setup/merge_requests/69,
complicated only by my own downstream conflicting change. This branch
reverts that change, backports !69, and then applies a refreshed version
of that patch which I have posted to
https://gitlab.gnome.org/GNOME/gnome-initial-setup/merge_requests/74.
https://phabricator.endlessm.com/T27527","A clean backport of
https://gitlab.gnome.org/GNOME/gnome-initial-setup/merge_requests/69,
complicated only by my own downstream conflicting change. This branch
reverts that change, backports !69, and then applies a refreshed version
of that patch which I have posted to
https://gitlab.gnome.org/GNOME/gnome-initial-setup/merge_requests/74.
https://phabricator.endlessm.com/T27527",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,299,2020-02-10T10:38:24Z,2020-02-18T12:43:59Z,2020-02-18T12:44:42Z,MERGED,True,155,129,1,https://github.com/wjt,network: react to devices being connected,4,[],https://github.com/endlessm/gnome-initial-setup/pull/299,https://github.com/pwithnall,2,https://github.com/endlessm/gnome-initial-setup/pull/299#issuecomment-587409166,"A clean backport of
https://gitlab.gnome.org/GNOME/gnome-initial-setup/merge_requests/69,
complicated only by my own downstream conflicting change. This branch
reverts that change, backports !69, and then applies a refreshed version
of that patch which I have posted to
https://gitlab.gnome.org/GNOME/gnome-initial-setup/merge_requests/74.
https://phabricator.endlessm.com/T27527","I see you’ve dropped the refreshed backport of upstream’s !74 from this branch. However, I think the commit message for “Revert ""network: wait 3 seconds for connectivity check” should be tweaked to mention that the refreshed backport is not going to be applied, and the 3s wait is being dropped indefinitely because it’s hard to get working.
LGTM to merge after that commit message is tweaked (no need for rereview as far as I’m concerned).",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,300,2020-03-04T03:19:28Z,2020-03-11T19:58:20Z,2020-03-24T20:33:35Z,MERGED,True,0,0,0,https://github.com/mwleeds,Rebase on 3.36,0,[],https://github.com/endlessm/gnome-initial-setup/pull/300,https://github.com/mwleeds,1,https://github.com/endlessm/gnome-initial-setup/pull/300,"This is a rebase of our master branch on the upstream master branch, which is soon to be released as 3.36. Here are the rebase notes:
pick b38bad3 Allow to reorder pages from the vendor configuration file
drop 16e55a6 copypasta code: Use G_ADD_PRIVATE in CcTimezoneMap (no longer needed, g_type_class_add_private() isn't used upstream any more)
pick 9fef50a copypasta code: Use icon name instead of stock icon
pick 2632d2c copypasta code: Use GTask in UmRealmManager
pick 34ed71d Allow initial setup to switch metrics on and off
pick 5f43781 summary: do not play welcome tour
pick 123fafe Add product_serial.conf file
pick 2759e14 account-local: limit full name to 80 characters
pick 90332ce account-local: Hide username
pick 17abfc1 account-local: create a shared user account
pick d63e8ac um-utils: consider ""shared"" username to be in use
pick d97b1a4 main,summary: skip initial setup entirely for shared account
pick 2ac27d1 account-local: username suggestions
drop 9e8be1d password: do not allow empty passwords (this patch is pointless, there's already a strlen(password) > 0 check)
pick 608424a password: Show the last character when entering the password
drop e28ddca password: add CheckButton to toggle password visibility (reverted by a later commit)
pick 373acf1 password: Add password reminder
pick 6bc732c Add gis_pkexec() helper function
pick 7d07542 driver: track whether the current session is a live boot
pick 49eb5ad pages: Don't show some pages on live sessions
pick bdfb50a assistant: add API to show/hide the forward button
pick 4a37e89 eos-test-mode: add eos-test-mode script
pick 9901d40 page-util: Add API to read the EOS image version
pick 57647f9 endless-eula: Add endless eula page
pick e303581 gnome-initial-setup: don't display privacy page
edit 4f941a5 display: Add a ""Display"" page to the FBE (update cc-display-config.[ch] and cc-display-config-dbus.c from g-c-c)
pick 82e74da keyboard: introduce detector
pick a8ec338 input-chooser: sort default layout before others
pick efe2929 input-chooser: consider only language or country layouts non-extra
pick 28eccc7 input-chooser: Always show the selected layout
pick 1e2f2ad keyboard: add us/us+intl default layouts as fallback
pick 53825f8 live-chooser: add the Live Chooser page
pick da2579d summary: show a different message on live sessions
pick cb65b31 Allow pages to specify a GtkAccelGroup
pick baafd64 factory test mode: implement the factory dialog
pick 7a3bd18 language-chooser: make it more clear for the users
pick b948be0 timezone: set default 12h/24h from locale
pick 4288b7c Bring back the welcome message/logo
pick 3464949 goa: reorder accounts
pick afae8a1 account-local: add switch for passwordless accounts
fixup 07e3a34 account: Change password switch to a checkbox and rearrange (squashing as noted in the commit message)
pick 09bea58 account,password: Hide password page for passwordless account
pick 1e161fc keyboard: manually pass locale to gkbd-keyboard-display
pick adcf5ff input-chooser: allow CcInputChooser to expand
pick 959b994 driver: Inhibit the idle state
pick c235a14 language: allow to specify initial languages from vendor.conf
pick 633cac6 driver: Add ""Store Demo""
fixup a05f7eb fixup! driver: Add ""Store Demo""
pick b35fc25 copy-worker: Copy, as opposed to moving files
pick 73d0545 language: make sure initial language is always at the top
pick 1442752 driver: detect whether live media is DVD
pick d788e28 live-chooser: swap USB/DVD assets as needed
pick 81b4f46 endless-eula: Create, but don't show, EULA in store demo mode
pick 02d354f language: Change the title to ""Welcome to Store Demo"" in store demo mode
pick 7b413d9 language: add a button to enter store demo mode on first page
pick ce47c6f Don't run gnome-initial-setup for existing users
pick 7c4eaab demo: Reset tracking-id and report a metric when we enable metrics
pick bff7421 passwordPage: make latin kbd layout (en) available for password entries
pick ae11f08 Add powerMenu to initial-setup shell mode
pick e004214 Launch eos-installer on eosinstaller images
pick 0ce9d62 language: check {unattended,install}.ini on eosinstaller images
pick c1e461b page-util: adopt logic to launch eos-installer
pick c39344f password: Reset the password page whenever the password page gets hidden
fixup d502603 password: Reset visibility when page is hidden
pick 43dcb04 network: Update the description for WiFi
pick 2994dd6 site: add page to track site-specific details for deployments
pick 56f9cc3 account: Check configuration to hide password switch if needed
pick 9496d24 timezone: Hide when automatically detected
drop 3dc788f network: wait 3 seconds for connectivity check (reverted by a later commit)
pick 05ccab5 account: Allow overriding faces directory from vendor config file
pick a715c91 driver: Make height 768 the threshold for ""small screens""
pick 05b6b09 Change generated avatar for empty name
pick 04e525e account: Add 'suggested-action' style to photo button
drop 6e256bd Revert ""password: add CheckButton to toggle password visibility"" (dropped the commit being reverted)
pick f6ad512 driver: Add resource base path
pick 5c0b293 password: Add eye icons to toggle password visibility
pick 3ed1c39 Add darker border to generated avatar
drop 5574639 Add startup log message (this is upstream)
pick 01a3469 Configuration for Transifex
drop 58fd06d Add translation support for several new languages (translations will be re-applied at the end)
drop 99499c0 Commit .pot file
drop ce7179a Latest translations from Transifex
drop fbd06c4 Merged with downstream translations in Transifex
drop e37691b Re-apply intentional downstream translations
drop ca0cce1 Pull from Transifex
pick c31db70 Allow gnome-initial-setup user to run eos-write-location
drop 1b2922e Updates from Transifex
drop d92aac9 assistant: mark ""Accept"" button as suggested action (this is upstream)
pick 88e1d75 account: Use control-center setting to override faces
fixup 5947247 avatars: Don't crash if control center schema isn't present
fixup 9942ba1 avatars: Get facesdirs setting from gsettings-desktop-schemas
drop 7cfc33e Updates from Transifex
drop 3ff6744 Updates from Transifex
drop 0dd0044 Revert ""Updates from Transifex""
drop f3ba64a Updates from Transifex
pick 958d2f3 driver: detect when in live mode with persistence
pick bfdece1 summary: show a different message on persistent live sessions
pick 0fdb5cd Show all pages in persistent live mode
pick ffb3e00 live-chooser: don't create live user account when in persistent live mode
drop 08861d7 Updates from Transifex
drop 085155e Revert ""Updates from Transifex""
drop 5021d93 Updates from Transifex
drop 3b6e2cd NEWS for 3.34.1 (from the gnome-3-34 branch)
drop ee3e46f Update .pot file
drop d21113b Updates from Transifex
drop 4dd16b8 Updates from Transifex
drop 3a3565d Updates from Transifex
drop 540c007 New translations from Transifex
drop 77a51d5 New translations from Transifex
drop 47981dc Revert ""network: wait 3 seconds for connectivity check"" (dropped the commit being reverted)
drop a2c5ec0 New translations from Transifex
https://phabricator.endlessm.com/T28787","This is a rebase of our master branch on the upstream master branch, which is soon to be released as 3.36. Here are the rebase notes:
pick b38bad3 Allow to reorder pages from the vendor configuration file
drop 16e55a6 copypasta code: Use G_ADD_PRIVATE in CcTimezoneMap (no longer needed, g_type_class_add_private() isn't used upstream any more)
pick 9fef50a copypasta code: Use icon name instead of stock icon
pick 2632d2c copypasta code: Use GTask in UmRealmManager
pick 34ed71d Allow initial setup to switch metrics on and off
pick 5f43781 summary: do not play welcome tour
pick 123fafe Add product_serial.conf file
pick 2759e14 account-local: limit full name to 80 characters
pick 90332ce account-local: Hide username
pick 17abfc1 account-local: create a shared user account
pick d63e8ac um-utils: consider ""shared"" username to be in use
pick d97b1a4 main,summary: skip initial setup entirely for shared account
pick 2ac27d1 account-local: username suggestions
drop 9e8be1d password: do not allow empty passwords (this patch is pointless, there's already a strlen(password) > 0 check)
pick 608424a password: Show the last character when entering the password
drop e28ddca password: add CheckButton to toggle password visibility (reverted by a later commit)
pick 373acf1 password: Add password reminder
pick 6bc732c Add gis_pkexec() helper function
pick 7d07542 driver: track whether the current session is a live boot
pick 49eb5ad pages: Don't show some pages on live sessions
pick bdfb50a assistant: add API to show/hide the forward button
pick 4a37e89 eos-test-mode: add eos-test-mode script
pick 9901d40 page-util: Add API to read the EOS image version
pick 57647f9 endless-eula: Add endless eula page
pick e303581 gnome-initial-setup: don't display privacy page
edit 4f941a5 display: Add a ""Display"" page to the FBE (update cc-display-config.[ch] and cc-display-config-dbus.c from g-c-c)
pick 82e74da keyboard: introduce detector
pick a8ec338 input-chooser: sort default layout before others
pick efe2929 input-chooser: consider only language or country layouts non-extra
pick 28eccc7 input-chooser: Always show the selected layout
pick 1e2f2ad keyboard: add us/us+intl default layouts as fallback
pick 53825f8 live-chooser: add the Live Chooser page
pick da2579d summary: show a different message on live sessions
pick cb65b31 Allow pages to specify a GtkAccelGroup
pick baafd64 factory test mode: implement the factory dialog
pick 7a3bd18 language-chooser: make it more clear for the users
pick b948be0 timezone: set default 12h/24h from locale
pick 4288b7c Bring back the welcome message/logo
pick 3464949 goa: reorder accounts
pick afae8a1 account-local: add switch for passwordless accounts
fixup 07e3a34 account: Change password switch to a checkbox and rearrange (squashing as noted in the commit message)
pick 09bea58 account,password: Hide password page for passwordless account
pick 1e161fc keyboard: manually pass locale to gkbd-keyboard-display
pick adcf5ff input-chooser: allow CcInputChooser to expand
pick 959b994 driver: Inhibit the idle state
pick c235a14 language: allow to specify initial languages from vendor.conf
pick 633cac6 driver: Add ""Store Demo""
fixup a05f7eb fixup! driver: Add ""Store Demo""
pick b35fc25 copy-worker: Copy, as opposed to moving files
pick 73d0545 language: make sure initial language is always at the top
pick 1442752 driver: detect whether live media is DVD
pick d788e28 live-chooser: swap USB/DVD assets as needed
pick 81b4f46 endless-eula: Create, but don't show, EULA in store demo mode
pick 02d354f language: Change the title to ""Welcome to Store Demo"" in store demo mode
pick 7b413d9 language: add a button to enter store demo mode on first page
pick ce47c6f Don't run gnome-initial-setup for existing users
pick 7c4eaab demo: Reset tracking-id and report a metric when we enable metrics
pick bff7421 passwordPage: make latin kbd layout (en) available for password entries
pick ae11f08 Add powerMenu to initial-setup shell mode
pick e004214 Launch eos-installer on eosinstaller images
pick 0ce9d62 language: check {unattended,install}.ini on eosinstaller images
pick c1e461b page-util: adopt logic to launch eos-installer
pick c39344f password: Reset the password page whenever the password page gets hidden
fixup d502603 password: Reset visibility when page is hidden
pick 43dcb04 network: Update the description for WiFi
pick 2994dd6 site: add page to track site-specific details for deployments
pick 56f9cc3 account: Check configuration to hide password switch if needed
pick 9496d24 timezone: Hide when automatically detected
drop 3dc788f network: wait 3 seconds for connectivity check (reverted by a later commit)
pick 05ccab5 account: Allow overriding faces directory from vendor config file
pick a715c91 driver: Make height 768 the threshold for ""small screens""
pick 05b6b09 Change generated avatar for empty name
pick 04e525e account: Add 'suggested-action' style to photo button
drop 6e256bd Revert ""password: add CheckButton to toggle password visibility"" (dropped the commit being reverted)
pick f6ad512 driver: Add resource base path
pick 5c0b293 password: Add eye icons to toggle password visibility
pick 3ed1c39 Add darker border to generated avatar
drop 5574639 Add startup log message (this is upstream)
pick 01a3469 Configuration for Transifex
drop 58fd06d Add translation support for several new languages (translations will be re-applied at the end)
drop 99499c0 Commit .pot file
drop ce7179a Latest translations from Transifex
drop fbd06c4 Merged with downstream translations in Transifex
drop e37691b Re-apply intentional downstream translations
drop ca0cce1 Pull from Transifex
pick c31db70 Allow gnome-initial-setup user to run eos-write-location
drop 1b2922e Updates from Transifex
drop d92aac9 assistant: mark ""Accept"" button as suggested action (this is upstream)
pick 88e1d75 account: Use control-center setting to override faces
fixup 5947247 avatars: Don't crash if control center schema isn't present
fixup 9942ba1 avatars: Get facesdirs setting from gsettings-desktop-schemas
drop 7cfc33e Updates from Transifex
drop 3ff6744 Updates from Transifex
drop 0dd0044 Revert ""Updates from Transifex""
drop f3ba64a Updates from Transifex
pick 958d2f3 driver: detect when in live mode with persistence
pick bfdece1 summary: show a different message on persistent live sessions
pick 0fdb5cd Show all pages in persistent live mode
pick ffb3e00 live-chooser: don't create live user account when in persistent live mode
drop 08861d7 Updates from Transifex
drop 085155e Revert ""Updates from Transifex""
drop 5021d93 Updates from Transifex
drop 3b6e2cd NEWS for 3.34.1 (from the gnome-3-34 branch)
drop ee3e46f Update .pot file
drop d21113b Updates from Transifex
drop 4dd16b8 Updates from Transifex
drop 3a3565d Updates from Transifex
drop 540c007 New translations from Transifex
drop 77a51d5 New translations from Transifex
drop 47981dc Revert ""network: wait 3 seconds for connectivity check"" (dropped the commit being reverted)
drop a2c5ec0 New translations from Transifex
https://phabricator.endlessm.com/T28787",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,300,2020-03-04T03:19:28Z,2020-03-11T19:58:20Z,2020-03-24T20:33:35Z,MERGED,True,0,0,0,https://github.com/mwleeds,Rebase on 3.36,0,[],https://github.com/endlessm/gnome-initial-setup/pull/300,https://github.com/mwleeds,2,https://github.com/endlessm/gnome-initial-setup/pull/300#issuecomment-594304958,"This is a rebase of our master branch on the upstream master branch, which is soon to be released as 3.36. Here are the rebase notes:
pick b38bad3 Allow to reorder pages from the vendor configuration file
drop 16e55a6 copypasta code: Use G_ADD_PRIVATE in CcTimezoneMap (no longer needed, g_type_class_add_private() isn't used upstream any more)
pick 9fef50a copypasta code: Use icon name instead of stock icon
pick 2632d2c copypasta code: Use GTask in UmRealmManager
pick 34ed71d Allow initial setup to switch metrics on and off
pick 5f43781 summary: do not play welcome tour
pick 123fafe Add product_serial.conf file
pick 2759e14 account-local: limit full name to 80 characters
pick 90332ce account-local: Hide username
pick 17abfc1 account-local: create a shared user account
pick d63e8ac um-utils: consider ""shared"" username to be in use
pick d97b1a4 main,summary: skip initial setup entirely for shared account
pick 2ac27d1 account-local: username suggestions
drop 9e8be1d password: do not allow empty passwords (this patch is pointless, there's already a strlen(password) > 0 check)
pick 608424a password: Show the last character when entering the password
drop e28ddca password: add CheckButton to toggle password visibility (reverted by a later commit)
pick 373acf1 password: Add password reminder
pick 6bc732c Add gis_pkexec() helper function
pick 7d07542 driver: track whether the current session is a live boot
pick 49eb5ad pages: Don't show some pages on live sessions
pick bdfb50a assistant: add API to show/hide the forward button
pick 4a37e89 eos-test-mode: add eos-test-mode script
pick 9901d40 page-util: Add API to read the EOS image version
pick 57647f9 endless-eula: Add endless eula page
pick e303581 gnome-initial-setup: don't display privacy page
edit 4f941a5 display: Add a ""Display"" page to the FBE (update cc-display-config.[ch] and cc-display-config-dbus.c from g-c-c)
pick 82e74da keyboard: introduce detector
pick a8ec338 input-chooser: sort default layout before others
pick efe2929 input-chooser: consider only language or country layouts non-extra
pick 28eccc7 input-chooser: Always show the selected layout
pick 1e2f2ad keyboard: add us/us+intl default layouts as fallback
pick 53825f8 live-chooser: add the Live Chooser page
pick da2579d summary: show a different message on live sessions
pick cb65b31 Allow pages to specify a GtkAccelGroup
pick baafd64 factory test mode: implement the factory dialog
pick 7a3bd18 language-chooser: make it more clear for the users
pick b948be0 timezone: set default 12h/24h from locale
pick 4288b7c Bring back the welcome message/logo
pick 3464949 goa: reorder accounts
pick afae8a1 account-local: add switch for passwordless accounts
fixup 07e3a34 account: Change password switch to a checkbox and rearrange (squashing as noted in the commit message)
pick 09bea58 account,password: Hide password page for passwordless account
pick 1e161fc keyboard: manually pass locale to gkbd-keyboard-display
pick adcf5ff input-chooser: allow CcInputChooser to expand
pick 959b994 driver: Inhibit the idle state
pick c235a14 language: allow to specify initial languages from vendor.conf
pick 633cac6 driver: Add ""Store Demo""
fixup a05f7eb fixup! driver: Add ""Store Demo""
pick b35fc25 copy-worker: Copy, as opposed to moving files
pick 73d0545 language: make sure initial language is always at the top
pick 1442752 driver: detect whether live media is DVD
pick d788e28 live-chooser: swap USB/DVD assets as needed
pick 81b4f46 endless-eula: Create, but don't show, EULA in store demo mode
pick 02d354f language: Change the title to ""Welcome to Store Demo"" in store demo mode
pick 7b413d9 language: add a button to enter store demo mode on first page
pick ce47c6f Don't run gnome-initial-setup for existing users
pick 7c4eaab demo: Reset tracking-id and report a metric when we enable metrics
pick bff7421 passwordPage: make latin kbd layout (en) available for password entries
pick ae11f08 Add powerMenu to initial-setup shell mode
pick e004214 Launch eos-installer on eosinstaller images
pick 0ce9d62 language: check {unattended,install}.ini on eosinstaller images
pick c1e461b page-util: adopt logic to launch eos-installer
pick c39344f password: Reset the password page whenever the password page gets hidden
fixup d502603 password: Reset visibility when page is hidden
pick 43dcb04 network: Update the description for WiFi
pick 2994dd6 site: add page to track site-specific details for deployments
pick 56f9cc3 account: Check configuration to hide password switch if needed
pick 9496d24 timezone: Hide when automatically detected
drop 3dc788f network: wait 3 seconds for connectivity check (reverted by a later commit)
pick 05ccab5 account: Allow overriding faces directory from vendor config file
pick a715c91 driver: Make height 768 the threshold for ""small screens""
pick 05b6b09 Change generated avatar for empty name
pick 04e525e account: Add 'suggested-action' style to photo button
drop 6e256bd Revert ""password: add CheckButton to toggle password visibility"" (dropped the commit being reverted)
pick f6ad512 driver: Add resource base path
pick 5c0b293 password: Add eye icons to toggle password visibility
pick 3ed1c39 Add darker border to generated avatar
drop 5574639 Add startup log message (this is upstream)
pick 01a3469 Configuration for Transifex
drop 58fd06d Add translation support for several new languages (translations will be re-applied at the end)
drop 99499c0 Commit .pot file
drop ce7179a Latest translations from Transifex
drop fbd06c4 Merged with downstream translations in Transifex
drop e37691b Re-apply intentional downstream translations
drop ca0cce1 Pull from Transifex
pick c31db70 Allow gnome-initial-setup user to run eos-write-location
drop 1b2922e Updates from Transifex
drop d92aac9 assistant: mark ""Accept"" button as suggested action (this is upstream)
pick 88e1d75 account: Use control-center setting to override faces
fixup 5947247 avatars: Don't crash if control center schema isn't present
fixup 9942ba1 avatars: Get facesdirs setting from gsettings-desktop-schemas
drop 7cfc33e Updates from Transifex
drop 3ff6744 Updates from Transifex
drop 0dd0044 Revert ""Updates from Transifex""
drop f3ba64a Updates from Transifex
pick 958d2f3 driver: detect when in live mode with persistence
pick bfdece1 summary: show a different message on persistent live sessions
pick 0fdb5cd Show all pages in persistent live mode
pick ffb3e00 live-chooser: don't create live user account when in persistent live mode
drop 08861d7 Updates from Transifex
drop 085155e Revert ""Updates from Transifex""
drop 5021d93 Updates from Transifex
drop 3b6e2cd NEWS for 3.34.1 (from the gnome-3-34 branch)
drop ee3e46f Update .pot file
drop d21113b Updates from Transifex
drop 4dd16b8 Updates from Transifex
drop 3a3565d Updates from Transifex
drop 540c007 New translations from Transifex
drop 77a51d5 New translations from Transifex
drop 47981dc Revert ""network: wait 3 seconds for connectivity check"" (dropped the commit being reverted)
drop a2c5ec0 New translations from Transifex
https://phabricator.endlessm.com/T28787","TODO:

 Compile test this
 Smoke test this
 Re-apply downstream translations (deferring this as was done for the g-s rebase)
 Enumerate situations that should be Dev QA'd (parental controls, live mode, persistent live mode, etc.)
 Ideally, upstream some of this, but that shouldn't block merging
 Rebase again on released 3.36 version (instead of 3.35.92)
 Update the packaging branch",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,300,2020-03-04T03:19:28Z,2020-03-11T19:58:20Z,2020-03-24T20:33:35Z,MERGED,True,0,0,0,https://github.com/mwleeds,Rebase on 3.36,0,[],https://github.com/endlessm/gnome-initial-setup/pull/300,https://github.com/andrunko,3,https://github.com/endlessm/gnome-initial-setup/pull/300#issuecomment-594317205,"This is a rebase of our master branch on the upstream master branch, which is soon to be released as 3.36. Here are the rebase notes:
pick b38bad3 Allow to reorder pages from the vendor configuration file
drop 16e55a6 copypasta code: Use G_ADD_PRIVATE in CcTimezoneMap (no longer needed, g_type_class_add_private() isn't used upstream any more)
pick 9fef50a copypasta code: Use icon name instead of stock icon
pick 2632d2c copypasta code: Use GTask in UmRealmManager
pick 34ed71d Allow initial setup to switch metrics on and off
pick 5f43781 summary: do not play welcome tour
pick 123fafe Add product_serial.conf file
pick 2759e14 account-local: limit full name to 80 characters
pick 90332ce account-local: Hide username
pick 17abfc1 account-local: create a shared user account
pick d63e8ac um-utils: consider ""shared"" username to be in use
pick d97b1a4 main,summary: skip initial setup entirely for shared account
pick 2ac27d1 account-local: username suggestions
drop 9e8be1d password: do not allow empty passwords (this patch is pointless, there's already a strlen(password) > 0 check)
pick 608424a password: Show the last character when entering the password
drop e28ddca password: add CheckButton to toggle password visibility (reverted by a later commit)
pick 373acf1 password: Add password reminder
pick 6bc732c Add gis_pkexec() helper function
pick 7d07542 driver: track whether the current session is a live boot
pick 49eb5ad pages: Don't show some pages on live sessions
pick bdfb50a assistant: add API to show/hide the forward button
pick 4a37e89 eos-test-mode: add eos-test-mode script
pick 9901d40 page-util: Add API to read the EOS image version
pick 57647f9 endless-eula: Add endless eula page
pick e303581 gnome-initial-setup: don't display privacy page
edit 4f941a5 display: Add a ""Display"" page to the FBE (update cc-display-config.[ch] and cc-display-config-dbus.c from g-c-c)
pick 82e74da keyboard: introduce detector
pick a8ec338 input-chooser: sort default layout before others
pick efe2929 input-chooser: consider only language or country layouts non-extra
pick 28eccc7 input-chooser: Always show the selected layout
pick 1e2f2ad keyboard: add us/us+intl default layouts as fallback
pick 53825f8 live-chooser: add the Live Chooser page
pick da2579d summary: show a different message on live sessions
pick cb65b31 Allow pages to specify a GtkAccelGroup
pick baafd64 factory test mode: implement the factory dialog
pick 7a3bd18 language-chooser: make it more clear for the users
pick b948be0 timezone: set default 12h/24h from locale
pick 4288b7c Bring back the welcome message/logo
pick 3464949 goa: reorder accounts
pick afae8a1 account-local: add switch for passwordless accounts
fixup 07e3a34 account: Change password switch to a checkbox and rearrange (squashing as noted in the commit message)
pick 09bea58 account,password: Hide password page for passwordless account
pick 1e161fc keyboard: manually pass locale to gkbd-keyboard-display
pick adcf5ff input-chooser: allow CcInputChooser to expand
pick 959b994 driver: Inhibit the idle state
pick c235a14 language: allow to specify initial languages from vendor.conf
pick 633cac6 driver: Add ""Store Demo""
fixup a05f7eb fixup! driver: Add ""Store Demo""
pick b35fc25 copy-worker: Copy, as opposed to moving files
pick 73d0545 language: make sure initial language is always at the top
pick 1442752 driver: detect whether live media is DVD
pick d788e28 live-chooser: swap USB/DVD assets as needed
pick 81b4f46 endless-eula: Create, but don't show, EULA in store demo mode
pick 02d354f language: Change the title to ""Welcome to Store Demo"" in store demo mode
pick 7b413d9 language: add a button to enter store demo mode on first page
pick ce47c6f Don't run gnome-initial-setup for existing users
pick 7c4eaab demo: Reset tracking-id and report a metric when we enable metrics
pick bff7421 passwordPage: make latin kbd layout (en) available for password entries
pick ae11f08 Add powerMenu to initial-setup shell mode
pick e004214 Launch eos-installer on eosinstaller images
pick 0ce9d62 language: check {unattended,install}.ini on eosinstaller images
pick c1e461b page-util: adopt logic to launch eos-installer
pick c39344f password: Reset the password page whenever the password page gets hidden
fixup d502603 password: Reset visibility when page is hidden
pick 43dcb04 network: Update the description for WiFi
pick 2994dd6 site: add page to track site-specific details for deployments
pick 56f9cc3 account: Check configuration to hide password switch if needed
pick 9496d24 timezone: Hide when automatically detected
drop 3dc788f network: wait 3 seconds for connectivity check (reverted by a later commit)
pick 05ccab5 account: Allow overriding faces directory from vendor config file
pick a715c91 driver: Make height 768 the threshold for ""small screens""
pick 05b6b09 Change generated avatar for empty name
pick 04e525e account: Add 'suggested-action' style to photo button
drop 6e256bd Revert ""password: add CheckButton to toggle password visibility"" (dropped the commit being reverted)
pick f6ad512 driver: Add resource base path
pick 5c0b293 password: Add eye icons to toggle password visibility
pick 3ed1c39 Add darker border to generated avatar
drop 5574639 Add startup log message (this is upstream)
pick 01a3469 Configuration for Transifex
drop 58fd06d Add translation support for several new languages (translations will be re-applied at the end)
drop 99499c0 Commit .pot file
drop ce7179a Latest translations from Transifex
drop fbd06c4 Merged with downstream translations in Transifex
drop e37691b Re-apply intentional downstream translations
drop ca0cce1 Pull from Transifex
pick c31db70 Allow gnome-initial-setup user to run eos-write-location
drop 1b2922e Updates from Transifex
drop d92aac9 assistant: mark ""Accept"" button as suggested action (this is upstream)
pick 88e1d75 account: Use control-center setting to override faces
fixup 5947247 avatars: Don't crash if control center schema isn't present
fixup 9942ba1 avatars: Get facesdirs setting from gsettings-desktop-schemas
drop 7cfc33e Updates from Transifex
drop 3ff6744 Updates from Transifex
drop 0dd0044 Revert ""Updates from Transifex""
drop f3ba64a Updates from Transifex
pick 958d2f3 driver: detect when in live mode with persistence
pick bfdece1 summary: show a different message on persistent live sessions
pick 0fdb5cd Show all pages in persistent live mode
pick ffb3e00 live-chooser: don't create live user account when in persistent live mode
drop 08861d7 Updates from Transifex
drop 085155e Revert ""Updates from Transifex""
drop 5021d93 Updates from Transifex
drop 3b6e2cd NEWS for 3.34.1 (from the gnome-3-34 branch)
drop ee3e46f Update .pot file
drop d21113b Updates from Transifex
drop 4dd16b8 Updates from Transifex
drop 3a3565d Updates from Transifex
drop 540c007 New translations from Transifex
drop 77a51d5 New translations from Transifex
drop 47981dc Revert ""network: wait 3 seconds for connectivity check"" (dropped the commit being reverted)
drop a2c5ec0 New translations from Transifex
https://phabricator.endlessm.com/T28787","TODO:

  File a ticket about rebasing again on released 3.36 version, which should be only a minor delta away from this


I was thinking of reusing the same ticket to update to 3.35.9x and then 3.36 when it is out, to avoid having 2 tickets to update each GNOME component we maintain on git.",True,{'THUMBS_UP': ['https://github.com/mwleeds']}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,300,2020-03-04T03:19:28Z,2020-03-11T19:58:20Z,2020-03-24T20:33:35Z,MERGED,True,0,0,0,https://github.com/mwleeds,Rebase on 3.36,0,[],https://github.com/endlessm/gnome-initial-setup/pull/300,https://github.com/mwleeds,4,https://github.com/endlessm/gnome-initial-setup/pull/300#issuecomment-594908471,"This is a rebase of our master branch on the upstream master branch, which is soon to be released as 3.36. Here are the rebase notes:
pick b38bad3 Allow to reorder pages from the vendor configuration file
drop 16e55a6 copypasta code: Use G_ADD_PRIVATE in CcTimezoneMap (no longer needed, g_type_class_add_private() isn't used upstream any more)
pick 9fef50a copypasta code: Use icon name instead of stock icon
pick 2632d2c copypasta code: Use GTask in UmRealmManager
pick 34ed71d Allow initial setup to switch metrics on and off
pick 5f43781 summary: do not play welcome tour
pick 123fafe Add product_serial.conf file
pick 2759e14 account-local: limit full name to 80 characters
pick 90332ce account-local: Hide username
pick 17abfc1 account-local: create a shared user account
pick d63e8ac um-utils: consider ""shared"" username to be in use
pick d97b1a4 main,summary: skip initial setup entirely for shared account
pick 2ac27d1 account-local: username suggestions
drop 9e8be1d password: do not allow empty passwords (this patch is pointless, there's already a strlen(password) > 0 check)
pick 608424a password: Show the last character when entering the password
drop e28ddca password: add CheckButton to toggle password visibility (reverted by a later commit)
pick 373acf1 password: Add password reminder
pick 6bc732c Add gis_pkexec() helper function
pick 7d07542 driver: track whether the current session is a live boot
pick 49eb5ad pages: Don't show some pages on live sessions
pick bdfb50a assistant: add API to show/hide the forward button
pick 4a37e89 eos-test-mode: add eos-test-mode script
pick 9901d40 page-util: Add API to read the EOS image version
pick 57647f9 endless-eula: Add endless eula page
pick e303581 gnome-initial-setup: don't display privacy page
edit 4f941a5 display: Add a ""Display"" page to the FBE (update cc-display-config.[ch] and cc-display-config-dbus.c from g-c-c)
pick 82e74da keyboard: introduce detector
pick a8ec338 input-chooser: sort default layout before others
pick efe2929 input-chooser: consider only language or country layouts non-extra
pick 28eccc7 input-chooser: Always show the selected layout
pick 1e2f2ad keyboard: add us/us+intl default layouts as fallback
pick 53825f8 live-chooser: add the Live Chooser page
pick da2579d summary: show a different message on live sessions
pick cb65b31 Allow pages to specify a GtkAccelGroup
pick baafd64 factory test mode: implement the factory dialog
pick 7a3bd18 language-chooser: make it more clear for the users
pick b948be0 timezone: set default 12h/24h from locale
pick 4288b7c Bring back the welcome message/logo
pick 3464949 goa: reorder accounts
pick afae8a1 account-local: add switch for passwordless accounts
fixup 07e3a34 account: Change password switch to a checkbox and rearrange (squashing as noted in the commit message)
pick 09bea58 account,password: Hide password page for passwordless account
pick 1e161fc keyboard: manually pass locale to gkbd-keyboard-display
pick adcf5ff input-chooser: allow CcInputChooser to expand
pick 959b994 driver: Inhibit the idle state
pick c235a14 language: allow to specify initial languages from vendor.conf
pick 633cac6 driver: Add ""Store Demo""
fixup a05f7eb fixup! driver: Add ""Store Demo""
pick b35fc25 copy-worker: Copy, as opposed to moving files
pick 73d0545 language: make sure initial language is always at the top
pick 1442752 driver: detect whether live media is DVD
pick d788e28 live-chooser: swap USB/DVD assets as needed
pick 81b4f46 endless-eula: Create, but don't show, EULA in store demo mode
pick 02d354f language: Change the title to ""Welcome to Store Demo"" in store demo mode
pick 7b413d9 language: add a button to enter store demo mode on first page
pick ce47c6f Don't run gnome-initial-setup for existing users
pick 7c4eaab demo: Reset tracking-id and report a metric when we enable metrics
pick bff7421 passwordPage: make latin kbd layout (en) available for password entries
pick ae11f08 Add powerMenu to initial-setup shell mode
pick e004214 Launch eos-installer on eosinstaller images
pick 0ce9d62 language: check {unattended,install}.ini on eosinstaller images
pick c1e461b page-util: adopt logic to launch eos-installer
pick c39344f password: Reset the password page whenever the password page gets hidden
fixup d502603 password: Reset visibility when page is hidden
pick 43dcb04 network: Update the description for WiFi
pick 2994dd6 site: add page to track site-specific details for deployments
pick 56f9cc3 account: Check configuration to hide password switch if needed
pick 9496d24 timezone: Hide when automatically detected
drop 3dc788f network: wait 3 seconds for connectivity check (reverted by a later commit)
pick 05ccab5 account: Allow overriding faces directory from vendor config file
pick a715c91 driver: Make height 768 the threshold for ""small screens""
pick 05b6b09 Change generated avatar for empty name
pick 04e525e account: Add 'suggested-action' style to photo button
drop 6e256bd Revert ""password: add CheckButton to toggle password visibility"" (dropped the commit being reverted)
pick f6ad512 driver: Add resource base path
pick 5c0b293 password: Add eye icons to toggle password visibility
pick 3ed1c39 Add darker border to generated avatar
drop 5574639 Add startup log message (this is upstream)
pick 01a3469 Configuration for Transifex
drop 58fd06d Add translation support for several new languages (translations will be re-applied at the end)
drop 99499c0 Commit .pot file
drop ce7179a Latest translations from Transifex
drop fbd06c4 Merged with downstream translations in Transifex
drop e37691b Re-apply intentional downstream translations
drop ca0cce1 Pull from Transifex
pick c31db70 Allow gnome-initial-setup user to run eos-write-location
drop 1b2922e Updates from Transifex
drop d92aac9 assistant: mark ""Accept"" button as suggested action (this is upstream)
pick 88e1d75 account: Use control-center setting to override faces
fixup 5947247 avatars: Don't crash if control center schema isn't present
fixup 9942ba1 avatars: Get facesdirs setting from gsettings-desktop-schemas
drop 7cfc33e Updates from Transifex
drop 3ff6744 Updates from Transifex
drop 0dd0044 Revert ""Updates from Transifex""
drop f3ba64a Updates from Transifex
pick 958d2f3 driver: detect when in live mode with persistence
pick bfdece1 summary: show a different message on persistent live sessions
pick 0fdb5cd Show all pages in persistent live mode
pick ffb3e00 live-chooser: don't create live user account when in persistent live mode
drop 08861d7 Updates from Transifex
drop 085155e Revert ""Updates from Transifex""
drop 5021d93 Updates from Transifex
drop 3b6e2cd NEWS for 3.34.1 (from the gnome-3-34 branch)
drop ee3e46f Update .pot file
drop d21113b Updates from Transifex
drop 4dd16b8 Updates from Transifex
drop 3a3565d Updates from Transifex
drop 540c007 New translations from Transifex
drop 77a51d5 New translations from Transifex
drop 47981dc Revert ""network: wait 3 seconds for connectivity check"" (dropped the commit being reverted)
drop a2c5ec0 New translations from Transifex
https://phabricator.endlessm.com/T28787","This could probably be rebased on the upstream 3.35.92 tag which has been pushed since you started rebasing (since it’s probably the version which Debian are going to do their packaging work on, and it contains commit 5a65531 which we could do with).

Done

fixup! password: Add password reminder hasn’t been squashed down yet.

Done

What’s happening with this comment from commit “account-local: limit full name to 80 characters”?

TODO: This patch is wrong. The limit is 80 bytes, not 80 characters, as
confirmed by Will's testing in https://phabricator.endlessm.com/T25360.
There is a ticket open, and if it is addressed before a following
rebase, then it should be squashed into this commit:
https://phabricator.endlessm.com/T25444


I saw that, but the linked ticket is still open. The full fix of changing accountsservice seems out of scope for now, but we could throw a length check into is_valid_name(). I added a commit to this branch with that.

Commit f68f3201 account: Use control-center setting to override faces could probably be squashed into “b926a45c account: Allow overriding faces directory from vendor config file”

Good point, done.",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,300,2020-03-04T03:19:28Z,2020-03-11T19:58:20Z,2020-03-24T20:33:35Z,MERGED,True,0,0,0,https://github.com/mwleeds,Rebase on 3.36,0,[],https://github.com/endlessm/gnome-initial-setup/pull/300,https://github.com/mwleeds,5,https://github.com/endlessm/gnome-initial-setup/pull/300#issuecomment-596833269,"This is a rebase of our master branch on the upstream master branch, which is soon to be released as 3.36. Here are the rebase notes:
pick b38bad3 Allow to reorder pages from the vendor configuration file
drop 16e55a6 copypasta code: Use G_ADD_PRIVATE in CcTimezoneMap (no longer needed, g_type_class_add_private() isn't used upstream any more)
pick 9fef50a copypasta code: Use icon name instead of stock icon
pick 2632d2c copypasta code: Use GTask in UmRealmManager
pick 34ed71d Allow initial setup to switch metrics on and off
pick 5f43781 summary: do not play welcome tour
pick 123fafe Add product_serial.conf file
pick 2759e14 account-local: limit full name to 80 characters
pick 90332ce account-local: Hide username
pick 17abfc1 account-local: create a shared user account
pick d63e8ac um-utils: consider ""shared"" username to be in use
pick d97b1a4 main,summary: skip initial setup entirely for shared account
pick 2ac27d1 account-local: username suggestions
drop 9e8be1d password: do not allow empty passwords (this patch is pointless, there's already a strlen(password) > 0 check)
pick 608424a password: Show the last character when entering the password
drop e28ddca password: add CheckButton to toggle password visibility (reverted by a later commit)
pick 373acf1 password: Add password reminder
pick 6bc732c Add gis_pkexec() helper function
pick 7d07542 driver: track whether the current session is a live boot
pick 49eb5ad pages: Don't show some pages on live sessions
pick bdfb50a assistant: add API to show/hide the forward button
pick 4a37e89 eos-test-mode: add eos-test-mode script
pick 9901d40 page-util: Add API to read the EOS image version
pick 57647f9 endless-eula: Add endless eula page
pick e303581 gnome-initial-setup: don't display privacy page
edit 4f941a5 display: Add a ""Display"" page to the FBE (update cc-display-config.[ch] and cc-display-config-dbus.c from g-c-c)
pick 82e74da keyboard: introduce detector
pick a8ec338 input-chooser: sort default layout before others
pick efe2929 input-chooser: consider only language or country layouts non-extra
pick 28eccc7 input-chooser: Always show the selected layout
pick 1e2f2ad keyboard: add us/us+intl default layouts as fallback
pick 53825f8 live-chooser: add the Live Chooser page
pick da2579d summary: show a different message on live sessions
pick cb65b31 Allow pages to specify a GtkAccelGroup
pick baafd64 factory test mode: implement the factory dialog
pick 7a3bd18 language-chooser: make it more clear for the users
pick b948be0 timezone: set default 12h/24h from locale
pick 4288b7c Bring back the welcome message/logo
pick 3464949 goa: reorder accounts
pick afae8a1 account-local: add switch for passwordless accounts
fixup 07e3a34 account: Change password switch to a checkbox and rearrange (squashing as noted in the commit message)
pick 09bea58 account,password: Hide password page for passwordless account
pick 1e161fc keyboard: manually pass locale to gkbd-keyboard-display
pick adcf5ff input-chooser: allow CcInputChooser to expand
pick 959b994 driver: Inhibit the idle state
pick c235a14 language: allow to specify initial languages from vendor.conf
pick 633cac6 driver: Add ""Store Demo""
fixup a05f7eb fixup! driver: Add ""Store Demo""
pick b35fc25 copy-worker: Copy, as opposed to moving files
pick 73d0545 language: make sure initial language is always at the top
pick 1442752 driver: detect whether live media is DVD
pick d788e28 live-chooser: swap USB/DVD assets as needed
pick 81b4f46 endless-eula: Create, but don't show, EULA in store demo mode
pick 02d354f language: Change the title to ""Welcome to Store Demo"" in store demo mode
pick 7b413d9 language: add a button to enter store demo mode on first page
pick ce47c6f Don't run gnome-initial-setup for existing users
pick 7c4eaab demo: Reset tracking-id and report a metric when we enable metrics
pick bff7421 passwordPage: make latin kbd layout (en) available for password entries
pick ae11f08 Add powerMenu to initial-setup shell mode
pick e004214 Launch eos-installer on eosinstaller images
pick 0ce9d62 language: check {unattended,install}.ini on eosinstaller images
pick c1e461b page-util: adopt logic to launch eos-installer
pick c39344f password: Reset the password page whenever the password page gets hidden
fixup d502603 password: Reset visibility when page is hidden
pick 43dcb04 network: Update the description for WiFi
pick 2994dd6 site: add page to track site-specific details for deployments
pick 56f9cc3 account: Check configuration to hide password switch if needed
pick 9496d24 timezone: Hide when automatically detected
drop 3dc788f network: wait 3 seconds for connectivity check (reverted by a later commit)
pick 05ccab5 account: Allow overriding faces directory from vendor config file
pick a715c91 driver: Make height 768 the threshold for ""small screens""
pick 05b6b09 Change generated avatar for empty name
pick 04e525e account: Add 'suggested-action' style to photo button
drop 6e256bd Revert ""password: add CheckButton to toggle password visibility"" (dropped the commit being reverted)
pick f6ad512 driver: Add resource base path
pick 5c0b293 password: Add eye icons to toggle password visibility
pick 3ed1c39 Add darker border to generated avatar
drop 5574639 Add startup log message (this is upstream)
pick 01a3469 Configuration for Transifex
drop 58fd06d Add translation support for several new languages (translations will be re-applied at the end)
drop 99499c0 Commit .pot file
drop ce7179a Latest translations from Transifex
drop fbd06c4 Merged with downstream translations in Transifex
drop e37691b Re-apply intentional downstream translations
drop ca0cce1 Pull from Transifex
pick c31db70 Allow gnome-initial-setup user to run eos-write-location
drop 1b2922e Updates from Transifex
drop d92aac9 assistant: mark ""Accept"" button as suggested action (this is upstream)
pick 88e1d75 account: Use control-center setting to override faces
fixup 5947247 avatars: Don't crash if control center schema isn't present
fixup 9942ba1 avatars: Get facesdirs setting from gsettings-desktop-schemas
drop 7cfc33e Updates from Transifex
drop 3ff6744 Updates from Transifex
drop 0dd0044 Revert ""Updates from Transifex""
drop f3ba64a Updates from Transifex
pick 958d2f3 driver: detect when in live mode with persistence
pick bfdece1 summary: show a different message on persistent live sessions
pick 0fdb5cd Show all pages in persistent live mode
pick ffb3e00 live-chooser: don't create live user account when in persistent live mode
drop 08861d7 Updates from Transifex
drop 085155e Revert ""Updates from Transifex""
drop 5021d93 Updates from Transifex
drop 3b6e2cd NEWS for 3.34.1 (from the gnome-3-34 branch)
drop ee3e46f Update .pot file
drop d21113b Updates from Transifex
drop 4dd16b8 Updates from Transifex
drop 3a3565d Updates from Transifex
drop 540c007 New translations from Transifex
drop 77a51d5 New translations from Transifex
drop 47981dc Revert ""network: wait 3 seconds for connectivity check"" (dropped the commit being reverted)
drop a2c5ec0 New translations from Transifex
https://phabricator.endlessm.com/T28787",I created this upstream MR to silence some of the deprecation warnings emitted when this branch is compiled.,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,300,2020-03-04T03:19:28Z,2020-03-11T19:58:20Z,2020-03-24T20:33:35Z,MERGED,True,0,0,0,https://github.com/mwleeds,Rebase on 3.36,0,[],https://github.com/endlessm/gnome-initial-setup/pull/300,https://github.com/mwleeds,6,https://github.com/endlessm/gnome-initial-setup/pull/300#issuecomment-597306926,"This is a rebase of our master branch on the upstream master branch, which is soon to be released as 3.36. Here are the rebase notes:
pick b38bad3 Allow to reorder pages from the vendor configuration file
drop 16e55a6 copypasta code: Use G_ADD_PRIVATE in CcTimezoneMap (no longer needed, g_type_class_add_private() isn't used upstream any more)
pick 9fef50a copypasta code: Use icon name instead of stock icon
pick 2632d2c copypasta code: Use GTask in UmRealmManager
pick 34ed71d Allow initial setup to switch metrics on and off
pick 5f43781 summary: do not play welcome tour
pick 123fafe Add product_serial.conf file
pick 2759e14 account-local: limit full name to 80 characters
pick 90332ce account-local: Hide username
pick 17abfc1 account-local: create a shared user account
pick d63e8ac um-utils: consider ""shared"" username to be in use
pick d97b1a4 main,summary: skip initial setup entirely for shared account
pick 2ac27d1 account-local: username suggestions
drop 9e8be1d password: do not allow empty passwords (this patch is pointless, there's already a strlen(password) > 0 check)
pick 608424a password: Show the last character when entering the password
drop e28ddca password: add CheckButton to toggle password visibility (reverted by a later commit)
pick 373acf1 password: Add password reminder
pick 6bc732c Add gis_pkexec() helper function
pick 7d07542 driver: track whether the current session is a live boot
pick 49eb5ad pages: Don't show some pages on live sessions
pick bdfb50a assistant: add API to show/hide the forward button
pick 4a37e89 eos-test-mode: add eos-test-mode script
pick 9901d40 page-util: Add API to read the EOS image version
pick 57647f9 endless-eula: Add endless eula page
pick e303581 gnome-initial-setup: don't display privacy page
edit 4f941a5 display: Add a ""Display"" page to the FBE (update cc-display-config.[ch] and cc-display-config-dbus.c from g-c-c)
pick 82e74da keyboard: introduce detector
pick a8ec338 input-chooser: sort default layout before others
pick efe2929 input-chooser: consider only language or country layouts non-extra
pick 28eccc7 input-chooser: Always show the selected layout
pick 1e2f2ad keyboard: add us/us+intl default layouts as fallback
pick 53825f8 live-chooser: add the Live Chooser page
pick da2579d summary: show a different message on live sessions
pick cb65b31 Allow pages to specify a GtkAccelGroup
pick baafd64 factory test mode: implement the factory dialog
pick 7a3bd18 language-chooser: make it more clear for the users
pick b948be0 timezone: set default 12h/24h from locale
pick 4288b7c Bring back the welcome message/logo
pick 3464949 goa: reorder accounts
pick afae8a1 account-local: add switch for passwordless accounts
fixup 07e3a34 account: Change password switch to a checkbox and rearrange (squashing as noted in the commit message)
pick 09bea58 account,password: Hide password page for passwordless account
pick 1e161fc keyboard: manually pass locale to gkbd-keyboard-display
pick adcf5ff input-chooser: allow CcInputChooser to expand
pick 959b994 driver: Inhibit the idle state
pick c235a14 language: allow to specify initial languages from vendor.conf
pick 633cac6 driver: Add ""Store Demo""
fixup a05f7eb fixup! driver: Add ""Store Demo""
pick b35fc25 copy-worker: Copy, as opposed to moving files
pick 73d0545 language: make sure initial language is always at the top
pick 1442752 driver: detect whether live media is DVD
pick d788e28 live-chooser: swap USB/DVD assets as needed
pick 81b4f46 endless-eula: Create, but don't show, EULA in store demo mode
pick 02d354f language: Change the title to ""Welcome to Store Demo"" in store demo mode
pick 7b413d9 language: add a button to enter store demo mode on first page
pick ce47c6f Don't run gnome-initial-setup for existing users
pick 7c4eaab demo: Reset tracking-id and report a metric when we enable metrics
pick bff7421 passwordPage: make latin kbd layout (en) available for password entries
pick ae11f08 Add powerMenu to initial-setup shell mode
pick e004214 Launch eos-installer on eosinstaller images
pick 0ce9d62 language: check {unattended,install}.ini on eosinstaller images
pick c1e461b page-util: adopt logic to launch eos-installer
pick c39344f password: Reset the password page whenever the password page gets hidden
fixup d502603 password: Reset visibility when page is hidden
pick 43dcb04 network: Update the description for WiFi
pick 2994dd6 site: add page to track site-specific details for deployments
pick 56f9cc3 account: Check configuration to hide password switch if needed
pick 9496d24 timezone: Hide when automatically detected
drop 3dc788f network: wait 3 seconds for connectivity check (reverted by a later commit)
pick 05ccab5 account: Allow overriding faces directory from vendor config file
pick a715c91 driver: Make height 768 the threshold for ""small screens""
pick 05b6b09 Change generated avatar for empty name
pick 04e525e account: Add 'suggested-action' style to photo button
drop 6e256bd Revert ""password: add CheckButton to toggle password visibility"" (dropped the commit being reverted)
pick f6ad512 driver: Add resource base path
pick 5c0b293 password: Add eye icons to toggle password visibility
pick 3ed1c39 Add darker border to generated avatar
drop 5574639 Add startup log message (this is upstream)
pick 01a3469 Configuration for Transifex
drop 58fd06d Add translation support for several new languages (translations will be re-applied at the end)
drop 99499c0 Commit .pot file
drop ce7179a Latest translations from Transifex
drop fbd06c4 Merged with downstream translations in Transifex
drop e37691b Re-apply intentional downstream translations
drop ca0cce1 Pull from Transifex
pick c31db70 Allow gnome-initial-setup user to run eos-write-location
drop 1b2922e Updates from Transifex
drop d92aac9 assistant: mark ""Accept"" button as suggested action (this is upstream)
pick 88e1d75 account: Use control-center setting to override faces
fixup 5947247 avatars: Don't crash if control center schema isn't present
fixup 9942ba1 avatars: Get facesdirs setting from gsettings-desktop-schemas
drop 7cfc33e Updates from Transifex
drop 3ff6744 Updates from Transifex
drop 0dd0044 Revert ""Updates from Transifex""
drop f3ba64a Updates from Transifex
pick 958d2f3 driver: detect when in live mode with persistence
pick bfdece1 summary: show a different message on persistent live sessions
pick 0fdb5cd Show all pages in persistent live mode
pick ffb3e00 live-chooser: don't create live user account when in persistent live mode
drop 08861d7 Updates from Transifex
drop 085155e Revert ""Updates from Transifex""
drop 5021d93 Updates from Transifex
drop 3b6e2cd NEWS for 3.34.1 (from the gnome-3-34 branch)
drop ee3e46f Update .pot file
drop d21113b Updates from Transifex
drop 4dd16b8 Updates from Transifex
drop 3a3565d Updates from Transifex
drop 540c007 New translations from Transifex
drop 77a51d5 New translations from Transifex
drop 47981dc Revert ""network: wait 3 seconds for connectivity check"" (dropped the commit being reverted)
drop a2c5ec0 New translations from Transifex
https://phabricator.endlessm.com/T28787","I pushed the packaging to debian-T28787, but since it's now based on Debian's git rather than tarballs the commit history is different and I can't submit it as a PR against debian-master.
I also pushed Version_3.36.0 and Version_3.36.0_debian tags.",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,300,2020-03-04T03:19:28Z,2020-03-11T19:58:20Z,2020-03-24T20:33:35Z,MERGED,True,0,0,0,https://github.com/mwleeds,Rebase on 3.36,0,[],https://github.com/endlessm/gnome-initial-setup/pull/300,https://github.com/mwleeds,7,https://github.com/endlessm/gnome-initial-setup/pull/300#issuecomment-597307028,"This is a rebase of our master branch on the upstream master branch, which is soon to be released as 3.36. Here are the rebase notes:
pick b38bad3 Allow to reorder pages from the vendor configuration file
drop 16e55a6 copypasta code: Use G_ADD_PRIVATE in CcTimezoneMap (no longer needed, g_type_class_add_private() isn't used upstream any more)
pick 9fef50a copypasta code: Use icon name instead of stock icon
pick 2632d2c copypasta code: Use GTask in UmRealmManager
pick 34ed71d Allow initial setup to switch metrics on and off
pick 5f43781 summary: do not play welcome tour
pick 123fafe Add product_serial.conf file
pick 2759e14 account-local: limit full name to 80 characters
pick 90332ce account-local: Hide username
pick 17abfc1 account-local: create a shared user account
pick d63e8ac um-utils: consider ""shared"" username to be in use
pick d97b1a4 main,summary: skip initial setup entirely for shared account
pick 2ac27d1 account-local: username suggestions
drop 9e8be1d password: do not allow empty passwords (this patch is pointless, there's already a strlen(password) > 0 check)
pick 608424a password: Show the last character when entering the password
drop e28ddca password: add CheckButton to toggle password visibility (reverted by a later commit)
pick 373acf1 password: Add password reminder
pick 6bc732c Add gis_pkexec() helper function
pick 7d07542 driver: track whether the current session is a live boot
pick 49eb5ad pages: Don't show some pages on live sessions
pick bdfb50a assistant: add API to show/hide the forward button
pick 4a37e89 eos-test-mode: add eos-test-mode script
pick 9901d40 page-util: Add API to read the EOS image version
pick 57647f9 endless-eula: Add endless eula page
pick e303581 gnome-initial-setup: don't display privacy page
edit 4f941a5 display: Add a ""Display"" page to the FBE (update cc-display-config.[ch] and cc-display-config-dbus.c from g-c-c)
pick 82e74da keyboard: introduce detector
pick a8ec338 input-chooser: sort default layout before others
pick efe2929 input-chooser: consider only language or country layouts non-extra
pick 28eccc7 input-chooser: Always show the selected layout
pick 1e2f2ad keyboard: add us/us+intl default layouts as fallback
pick 53825f8 live-chooser: add the Live Chooser page
pick da2579d summary: show a different message on live sessions
pick cb65b31 Allow pages to specify a GtkAccelGroup
pick baafd64 factory test mode: implement the factory dialog
pick 7a3bd18 language-chooser: make it more clear for the users
pick b948be0 timezone: set default 12h/24h from locale
pick 4288b7c Bring back the welcome message/logo
pick 3464949 goa: reorder accounts
pick afae8a1 account-local: add switch for passwordless accounts
fixup 07e3a34 account: Change password switch to a checkbox and rearrange (squashing as noted in the commit message)
pick 09bea58 account,password: Hide password page for passwordless account
pick 1e161fc keyboard: manually pass locale to gkbd-keyboard-display
pick adcf5ff input-chooser: allow CcInputChooser to expand
pick 959b994 driver: Inhibit the idle state
pick c235a14 language: allow to specify initial languages from vendor.conf
pick 633cac6 driver: Add ""Store Demo""
fixup a05f7eb fixup! driver: Add ""Store Demo""
pick b35fc25 copy-worker: Copy, as opposed to moving files
pick 73d0545 language: make sure initial language is always at the top
pick 1442752 driver: detect whether live media is DVD
pick d788e28 live-chooser: swap USB/DVD assets as needed
pick 81b4f46 endless-eula: Create, but don't show, EULA in store demo mode
pick 02d354f language: Change the title to ""Welcome to Store Demo"" in store demo mode
pick 7b413d9 language: add a button to enter store demo mode on first page
pick ce47c6f Don't run gnome-initial-setup for existing users
pick 7c4eaab demo: Reset tracking-id and report a metric when we enable metrics
pick bff7421 passwordPage: make latin kbd layout (en) available for password entries
pick ae11f08 Add powerMenu to initial-setup shell mode
pick e004214 Launch eos-installer on eosinstaller images
pick 0ce9d62 language: check {unattended,install}.ini on eosinstaller images
pick c1e461b page-util: adopt logic to launch eos-installer
pick c39344f password: Reset the password page whenever the password page gets hidden
fixup d502603 password: Reset visibility when page is hidden
pick 43dcb04 network: Update the description for WiFi
pick 2994dd6 site: add page to track site-specific details for deployments
pick 56f9cc3 account: Check configuration to hide password switch if needed
pick 9496d24 timezone: Hide when automatically detected
drop 3dc788f network: wait 3 seconds for connectivity check (reverted by a later commit)
pick 05ccab5 account: Allow overriding faces directory from vendor config file
pick a715c91 driver: Make height 768 the threshold for ""small screens""
pick 05b6b09 Change generated avatar for empty name
pick 04e525e account: Add 'suggested-action' style to photo button
drop 6e256bd Revert ""password: add CheckButton to toggle password visibility"" (dropped the commit being reverted)
pick f6ad512 driver: Add resource base path
pick 5c0b293 password: Add eye icons to toggle password visibility
pick 3ed1c39 Add darker border to generated avatar
drop 5574639 Add startup log message (this is upstream)
pick 01a3469 Configuration for Transifex
drop 58fd06d Add translation support for several new languages (translations will be re-applied at the end)
drop 99499c0 Commit .pot file
drop ce7179a Latest translations from Transifex
drop fbd06c4 Merged with downstream translations in Transifex
drop e37691b Re-apply intentional downstream translations
drop ca0cce1 Pull from Transifex
pick c31db70 Allow gnome-initial-setup user to run eos-write-location
drop 1b2922e Updates from Transifex
drop d92aac9 assistant: mark ""Accept"" button as suggested action (this is upstream)
pick 88e1d75 account: Use control-center setting to override faces
fixup 5947247 avatars: Don't crash if control center schema isn't present
fixup 9942ba1 avatars: Get facesdirs setting from gsettings-desktop-schemas
drop 7cfc33e Updates from Transifex
drop 3ff6744 Updates from Transifex
drop 0dd0044 Revert ""Updates from Transifex""
drop f3ba64a Updates from Transifex
pick 958d2f3 driver: detect when in live mode with persistence
pick bfdece1 summary: show a different message on persistent live sessions
pick 0fdb5cd Show all pages in persistent live mode
pick ffb3e00 live-chooser: don't create live user account when in persistent live mode
drop 08861d7 Updates from Transifex
drop 085155e Revert ""Updates from Transifex""
drop 5021d93 Updates from Transifex
drop 3b6e2cd NEWS for 3.34.1 (from the gnome-3-34 branch)
drop ee3e46f Update .pot file
drop d21113b Updates from Transifex
drop 4dd16b8 Updates from Transifex
drop 3a3565d Updates from Transifex
drop 540c007 New translations from Transifex
drop 77a51d5 New translations from Transifex
drop 47981dc Revert ""network: wait 3 seconds for connectivity check"" (dropped the commit being reverted)
drop a2c5ec0 New translations from Transifex
https://phabricator.endlessm.com/T28787","bot, retest this please",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,300,2020-03-04T03:19:28Z,2020-03-11T19:58:20Z,2020-03-24T20:33:35Z,MERGED,True,0,0,0,https://github.com/mwleeds,Rebase on 3.36,0,[],https://github.com/endlessm/gnome-initial-setup/pull/300,https://github.com/mwleeds,8,https://github.com/endlessm/gnome-initial-setup/pull/300#issuecomment-597820480,"This is a rebase of our master branch on the upstream master branch, which is soon to be released as 3.36. Here are the rebase notes:
pick b38bad3 Allow to reorder pages from the vendor configuration file
drop 16e55a6 copypasta code: Use G_ADD_PRIVATE in CcTimezoneMap (no longer needed, g_type_class_add_private() isn't used upstream any more)
pick 9fef50a copypasta code: Use icon name instead of stock icon
pick 2632d2c copypasta code: Use GTask in UmRealmManager
pick 34ed71d Allow initial setup to switch metrics on and off
pick 5f43781 summary: do not play welcome tour
pick 123fafe Add product_serial.conf file
pick 2759e14 account-local: limit full name to 80 characters
pick 90332ce account-local: Hide username
pick 17abfc1 account-local: create a shared user account
pick d63e8ac um-utils: consider ""shared"" username to be in use
pick d97b1a4 main,summary: skip initial setup entirely for shared account
pick 2ac27d1 account-local: username suggestions
drop 9e8be1d password: do not allow empty passwords (this patch is pointless, there's already a strlen(password) > 0 check)
pick 608424a password: Show the last character when entering the password
drop e28ddca password: add CheckButton to toggle password visibility (reverted by a later commit)
pick 373acf1 password: Add password reminder
pick 6bc732c Add gis_pkexec() helper function
pick 7d07542 driver: track whether the current session is a live boot
pick 49eb5ad pages: Don't show some pages on live sessions
pick bdfb50a assistant: add API to show/hide the forward button
pick 4a37e89 eos-test-mode: add eos-test-mode script
pick 9901d40 page-util: Add API to read the EOS image version
pick 57647f9 endless-eula: Add endless eula page
pick e303581 gnome-initial-setup: don't display privacy page
edit 4f941a5 display: Add a ""Display"" page to the FBE (update cc-display-config.[ch] and cc-display-config-dbus.c from g-c-c)
pick 82e74da keyboard: introduce detector
pick a8ec338 input-chooser: sort default layout before others
pick efe2929 input-chooser: consider only language or country layouts non-extra
pick 28eccc7 input-chooser: Always show the selected layout
pick 1e2f2ad keyboard: add us/us+intl default layouts as fallback
pick 53825f8 live-chooser: add the Live Chooser page
pick da2579d summary: show a different message on live sessions
pick cb65b31 Allow pages to specify a GtkAccelGroup
pick baafd64 factory test mode: implement the factory dialog
pick 7a3bd18 language-chooser: make it more clear for the users
pick b948be0 timezone: set default 12h/24h from locale
pick 4288b7c Bring back the welcome message/logo
pick 3464949 goa: reorder accounts
pick afae8a1 account-local: add switch for passwordless accounts
fixup 07e3a34 account: Change password switch to a checkbox and rearrange (squashing as noted in the commit message)
pick 09bea58 account,password: Hide password page for passwordless account
pick 1e161fc keyboard: manually pass locale to gkbd-keyboard-display
pick adcf5ff input-chooser: allow CcInputChooser to expand
pick 959b994 driver: Inhibit the idle state
pick c235a14 language: allow to specify initial languages from vendor.conf
pick 633cac6 driver: Add ""Store Demo""
fixup a05f7eb fixup! driver: Add ""Store Demo""
pick b35fc25 copy-worker: Copy, as opposed to moving files
pick 73d0545 language: make sure initial language is always at the top
pick 1442752 driver: detect whether live media is DVD
pick d788e28 live-chooser: swap USB/DVD assets as needed
pick 81b4f46 endless-eula: Create, but don't show, EULA in store demo mode
pick 02d354f language: Change the title to ""Welcome to Store Demo"" in store demo mode
pick 7b413d9 language: add a button to enter store demo mode on first page
pick ce47c6f Don't run gnome-initial-setup for existing users
pick 7c4eaab demo: Reset tracking-id and report a metric when we enable metrics
pick bff7421 passwordPage: make latin kbd layout (en) available for password entries
pick ae11f08 Add powerMenu to initial-setup shell mode
pick e004214 Launch eos-installer on eosinstaller images
pick 0ce9d62 language: check {unattended,install}.ini on eosinstaller images
pick c1e461b page-util: adopt logic to launch eos-installer
pick c39344f password: Reset the password page whenever the password page gets hidden
fixup d502603 password: Reset visibility when page is hidden
pick 43dcb04 network: Update the description for WiFi
pick 2994dd6 site: add page to track site-specific details for deployments
pick 56f9cc3 account: Check configuration to hide password switch if needed
pick 9496d24 timezone: Hide when automatically detected
drop 3dc788f network: wait 3 seconds for connectivity check (reverted by a later commit)
pick 05ccab5 account: Allow overriding faces directory from vendor config file
pick a715c91 driver: Make height 768 the threshold for ""small screens""
pick 05b6b09 Change generated avatar for empty name
pick 04e525e account: Add 'suggested-action' style to photo button
drop 6e256bd Revert ""password: add CheckButton to toggle password visibility"" (dropped the commit being reverted)
pick f6ad512 driver: Add resource base path
pick 5c0b293 password: Add eye icons to toggle password visibility
pick 3ed1c39 Add darker border to generated avatar
drop 5574639 Add startup log message (this is upstream)
pick 01a3469 Configuration for Transifex
drop 58fd06d Add translation support for several new languages (translations will be re-applied at the end)
drop 99499c0 Commit .pot file
drop ce7179a Latest translations from Transifex
drop fbd06c4 Merged with downstream translations in Transifex
drop e37691b Re-apply intentional downstream translations
drop ca0cce1 Pull from Transifex
pick c31db70 Allow gnome-initial-setup user to run eos-write-location
drop 1b2922e Updates from Transifex
drop d92aac9 assistant: mark ""Accept"" button as suggested action (this is upstream)
pick 88e1d75 account: Use control-center setting to override faces
fixup 5947247 avatars: Don't crash if control center schema isn't present
fixup 9942ba1 avatars: Get facesdirs setting from gsettings-desktop-schemas
drop 7cfc33e Updates from Transifex
drop 3ff6744 Updates from Transifex
drop 0dd0044 Revert ""Updates from Transifex""
drop f3ba64a Updates from Transifex
pick 958d2f3 driver: detect when in live mode with persistence
pick bfdece1 summary: show a different message on persistent live sessions
pick 0fdb5cd Show all pages in persistent live mode
pick ffb3e00 live-chooser: don't create live user account when in persistent live mode
drop 08861d7 Updates from Transifex
drop 085155e Revert ""Updates from Transifex""
drop 5021d93 Updates from Transifex
drop 3b6e2cd NEWS for 3.34.1 (from the gnome-3-34 branch)
drop ee3e46f Update .pot file
drop d21113b Updates from Transifex
drop 4dd16b8 Updates from Transifex
drop 3a3565d Updates from Transifex
drop 540c007 New translations from Transifex
drop 77a51d5 New translations from Transifex
drop 47981dc Revert ""network: wait 3 seconds for connectivity check"" (dropped the commit being reverted)
drop a2c5ec0 New translations from Transifex
https://phabricator.endlessm.com/T28787","bot, retest this please
(I put the Version_3.36.0 tag on the wrong commit, it's fixed now.)",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,301,2020-03-12T19:42:25Z,2020-03-13T16:47:13Z,2020-03-13T16:51:08Z,MERGED,True,0,1,1,https://github.com/mwleeds,fixup! account-local: add toggle for passwordless accounts,1,[],https://github.com/endlessm/gnome-initial-setup/pull/301,https://github.com/mwleeds,1,https://github.com/endlessm/gnome-initial-setup/pull/301,"Fix horizontal alignment of ""Set a password"" checkbox. This should be
squashed on the next rebase.
https://phabricator.endlessm.com/T29552","Fix horizontal alignment of ""Set a password"" checkbox. This should be
squashed on the next rebase.
https://phabricator.endlessm.com/T29552",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,301,2020-03-12T19:42:25Z,2020-03-13T16:47:13Z,2020-03-13T16:51:08Z,MERGED,True,0,1,1,https://github.com/mwleeds,fixup! account-local: add toggle for passwordless accounts,1,[],https://github.com/endlessm/gnome-initial-setup/pull/301,https://github.com/mwleeds,2,https://github.com/endlessm/gnome-initial-setup/pull/301#issuecomment-598408764,"Fix horizontal alignment of ""Set a password"" checkbox. This should be
squashed on the next rebase.
https://phabricator.endlessm.com/T29552","bot, retest this please",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,301,2020-03-12T19:42:25Z,2020-03-13T16:47:13Z,2020-03-13T16:51:08Z,MERGED,True,0,1,1,https://github.com/mwleeds,fixup! account-local: add toggle for passwordless accounts,1,[],https://github.com/endlessm/gnome-initial-setup/pull/301,https://github.com/pwithnall,3,https://github.com/endlessm/gnome-initial-setup/pull/301#issuecomment-598635948,"Fix horizontal alignment of ""Set a password"" checkbox. This should be
squashed on the next rebase.
https://phabricator.endlessm.com/T29552",Got a quick screenshot of how it looks with this change applied?,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,301,2020-03-12T19:42:25Z,2020-03-13T16:47:13Z,2020-03-13T16:51:08Z,MERGED,True,0,1,1,https://github.com/mwleeds,fixup! account-local: add toggle for passwordless accounts,1,[],https://github.com/endlessm/gnome-initial-setup/pull/301,https://github.com/mwleeds,4,https://github.com/endlessm/gnome-initial-setup/pull/301#issuecomment-598804205,"Fix horizontal alignment of ""Set a password"" checkbox. This should be
squashed on the next rebase.
https://phabricator.endlessm.com/T29552",Got a quick screenshot of how it looks with this change applied?,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,301,2020-03-12T19:42:25Z,2020-03-13T16:47:13Z,2020-03-13T16:51:08Z,MERGED,True,0,1,1,https://github.com/mwleeds,fixup! account-local: add toggle for passwordless accounts,1,[],https://github.com/endlessm/gnome-initial-setup/pull/301,https://github.com/pwithnall,5,https://github.com/endlessm/gnome-initial-setup/pull/301#issuecomment-598815682,"Fix horizontal alignment of ""Set a password"" checkbox. This should be
squashed on the next rebase.
https://phabricator.endlessm.com/T29552",Thanks. LGTM. Any design changes (if anyone has any suggestions) can follow in a separate PR if needed.,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,302,2020-03-13T23:54:41Z,2020-03-16T18:54:30Z,2020-03-16T18:54:33Z,MERGED,True,9,10,1,https://github.com/mwleeds,fixup! account-local: add toggle for passwordless accounts,1,[],https://github.com/endlessm/gnome-initial-setup/pull/302,https://github.com/mwleeds,1,https://github.com/endlessm/gnome-initial-setup/pull/302,"Normally the password page is hidden when the ""Set a password"" checkbox
is left unchecked on the Account page. In
gis_account_page_local_apply(), we call gis_driver_set_username() and
gis_driver_set_passwordless() and these both trigger the
username_or_passwordless_changed() callback in the password page.
However, when the parental controls checkbox on the account page is
checked, gis_driver_set_parental_controls_enabled() is called which
leads to all the pages being destroyed and rebuilt (see
rebuild_pages()), which means we lose the ""hidden"" state of the password
page when it should be hidden. So call
username_or_passwordless_changed() during construction of the password
page object as well, and use g_signal_connect_swapped() so we can avoid
faking the pspec parameter.
https://phabricator.endlessm.com/T28739","Normally the password page is hidden when the ""Set a password"" checkbox
is left unchecked on the Account page. In
gis_account_page_local_apply(), we call gis_driver_set_username() and
gis_driver_set_passwordless() and these both trigger the
username_or_passwordless_changed() callback in the password page.
However, when the parental controls checkbox on the account page is
checked, gis_driver_set_parental_controls_enabled() is called which
leads to all the pages being destroyed and rebuilt (see
rebuild_pages()), which means we lose the ""hidden"" state of the password
page when it should be hidden. So call
username_or_passwordless_changed() during construction of the password
page object as well, and use g_signal_connect_swapped() so we can avoid
faking the pspec parameter.
https://phabricator.endlessm.com/T28739",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,303,2020-03-16T13:42:40Z,2020-03-24T20:32:38Z,2020-03-24T20:32:45Z,MERGED,True,23,1,2,https://github.com/pwithnall,eos: Report metrics from parental controls page,1,[],https://github.com/endlessm/gnome-initial-setup/pull/303,https://github.com/pwithnall,1,https://github.com/endlessm/gnome-initial-setup/pull/303,"If the user chooses to enable parental controls when setting up the
computer, send a metrics event which contains the initial parental
controls settings. Don’t send an event if parental controls are not
enabled.
This will give us an idea of the more and less popular parental controls
features. If they are compared against parental controls settings set or
changed after initial setup, this metric will also give us an idea of
how people change their parental controls (presumably tweaking them
since they set them incorrectly in the first place).
This commit should not be upstreamed.
Signed-off-by: Philip Withnall withnall@endlessm.com
https://phabricator.endlessm.com/T28742","If the user chooses to enable parental controls when setting up the
computer, send a metrics event which contains the initial parental
controls settings. Don’t send an event if parental controls are not
enabled.
This will give us an idea of the more and less popular parental controls
features. If they are compared against parental controls settings set or
changed after initial setup, this metric will also give us an idea of
how people change their parental controls (presumably tweaking them
since they set them incorrectly in the first place).
This commit should not be upstreamed.
Signed-off-by: Philip Withnall withnall@endlessm.com
https://phabricator.endlessm.com/T28742",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,303,2020-03-16T13:42:40Z,2020-03-24T20:32:38Z,2020-03-24T20:32:45Z,MERGED,True,23,1,2,https://github.com/pwithnall,eos: Report metrics from parental controls page,1,[],https://github.com/endlessm/gnome-initial-setup/pull/303,https://github.com/pwithnall,2,https://github.com/endlessm/gnome-initial-setup/pull/303#issuecomment-599543316,"If the user chooses to enable parental controls when setting up the
computer, send a metrics event which contains the initial parental
controls settings. Don’t send an event if parental controls are not
enabled.
This will give us an idea of the more and less popular parental controls
features. If they are compared against parental controls settings set or
changed after initial setup, this metric will also give us an idea of
how people change their parental controls (presumably tweaking them
since they set them incorrectly in the first place).
This commit should not be upstreamed.
Signed-off-by: Philip Withnall withnall@endlessm.com
https://phabricator.endlessm.com/T28742",Depends on https://gitlab.freedesktop.org/pwithnall/malcontent/-/merge_requests/45 (and a backport of that to EOS). Currently untested other than to check that it compiles.,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,303,2020-03-16T13:42:40Z,2020-03-24T20:32:38Z,2020-03-24T20:32:45Z,MERGED,True,23,1,2,https://github.com/pwithnall,eos: Report metrics from parental controls page,1,[],https://github.com/endlessm/gnome-initial-setup/pull/303,https://github.com/pwithnall,3,https://github.com/endlessm/gnome-initial-setup/pull/303#issuecomment-603471926,"If the user chooses to enable parental controls when setting up the
computer, send a metrics event which contains the initial parental
controls settings. Don’t send an event if parental controls are not
enabled.
This will give us an idea of the more and less popular parental controls
features. If they are compared against parental controls settings set or
changed after initial setup, this metric will also give us an idea of
how people change their parental controls (presumably tweaking them
since they set them incorrectly in the first place).
This commit should not be upstreamed.
Signed-off-by: Philip Withnall withnall@endlessm.com
https://phabricator.endlessm.com/T28742",Updated to bump the malcontent dependency to 0.7.0 for the new API: Jenkins should pass now. Debian changes in #308.,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,303,2020-03-16T13:42:40Z,2020-03-24T20:32:38Z,2020-03-24T20:32:45Z,MERGED,True,23,1,2,https://github.com/pwithnall,eos: Report metrics from parental controls page,1,[],https://github.com/endlessm/gnome-initial-setup/pull/303,https://github.com/mwleeds,4,https://github.com/endlessm/gnome-initial-setup/pull/303#issuecomment-603481142,"If the user chooses to enable parental controls when setting up the
computer, send a metrics event which contains the initial parental
controls settings. Don’t send an event if parental controls are not
enabled.
This will give us an idea of the more and less popular parental controls
features. If they are compared against parental controls settings set or
changed after initial setup, this metric will also give us an idea of
how people change their parental controls (presumably tweaking them
since they set them incorrectly in the first place).
This commit should not be upstreamed.
Signed-off-by: Philip Withnall withnall@endlessm.com
https://phabricator.endlessm.com/T28742","bot, retest this please",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,303,2020-03-16T13:42:40Z,2020-03-24T20:32:38Z,2020-03-24T20:32:45Z,MERGED,True,23,1,2,https://github.com/pwithnall,eos: Report metrics from parental controls page,1,[],https://github.com/endlessm/gnome-initial-setup/pull/303,https://github.com/pwithnall,5,https://github.com/endlessm/gnome-initial-setup/pull/303#issuecomment-603485452,"If the user chooses to enable parental controls when setting up the
computer, send a metrics event which contains the initial parental
controls settings. Don’t send an event if parental controls are not
enabled.
This will give us an idea of the more and less popular parental controls
features. If they are compared against parental controls settings set or
changed after initial setup, this metric will also give us an idea of
how people change their parental controls (presumably tweaking them
since they set them incorrectly in the first place).
This commit should not be upstreamed.
Signed-off-by: Philip Withnall withnall@endlessm.com
https://phabricator.endlessm.com/T28742","Sigh, #309 is needed too, sorry.",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,303,2020-03-16T13:42:40Z,2020-03-24T20:32:38Z,2020-03-24T20:32:45Z,MERGED,True,23,1,2,https://github.com/pwithnall,eos: Report metrics from parental controls page,1,[],https://github.com/endlessm/gnome-initial-setup/pull/303,https://github.com/mwleeds,6,https://github.com/endlessm/gnome-initial-setup/pull/303#issuecomment-603486697,"If the user chooses to enable parental controls when setting up the
computer, send a metrics event which contains the initial parental
controls settings. Don’t send an event if parental controls are not
enabled.
This will give us an idea of the more and less popular parental controls
features. If they are compared against parental controls settings set or
changed after initial setup, this metric will also give us an idea of
how people change their parental controls (presumably tweaking them
since they set them incorrectly in the first place).
This commit should not be upstreamed.
Signed-off-by: Philip Withnall withnall@endlessm.com
https://phabricator.endlessm.com/T28742","bot, retest this please",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,304,2020-03-16T20:07:02Z,2020-03-16T20:49:42Z,2020-03-16T20:49:46Z,MERGED,True,4,0,1,https://github.com/mwleeds,account: Make admin account usable in case of errors,1,[],https://github.com/endlessm/gnome-initial-setup/pull/304,https://github.com/mwleeds,1,https://github.com/endlessm/gnome-initial-setup/pull/304,"In gis-account-page-local.c, if parental controls are enabled we create
an administrator account which will be used by the parent, and we create
it before the child's account so that the system will not be left
without any admin accounts in case g-i-s crashes or otherwise doesn't
finish. However this isn't especially helpful since the account is not
set to be passwordless (ACT_USER_PASSWORD_MODE_NONE) so cannot easily be
used if the user doesn't make it to the page where they are asked to set
a password on it. So, set the admin account to
ACT_USER_PASSWORD_MODE_SET_AT_LOGIN temporarily. When a password is set
on the account by the password page, accountsservice will set it to
ACT_USER_PASSWORD_MODE_REGULAR.
This seems like a slightly better policy than making the account
passwordless, since we shouldn't encourage passwordless admin accounts.
https://phabricator.endlessm.com/T28787","In gis-account-page-local.c, if parental controls are enabled we create
an administrator account which will be used by the parent, and we create
it before the child's account so that the system will not be left
without any admin accounts in case g-i-s crashes or otherwise doesn't
finish. However this isn't especially helpful since the account is not
set to be passwordless (ACT_USER_PASSWORD_MODE_NONE) so cannot easily be
used if the user doesn't make it to the page where they are asked to set
a password on it. So, set the admin account to
ACT_USER_PASSWORD_MODE_SET_AT_LOGIN temporarily. When a password is set
on the account by the password page, accountsservice will set it to
ACT_USER_PASSWORD_MODE_REGULAR.
This seems like a slightly better policy than making the account
passwordless, since we shouldn't encourage passwordless admin accounts.
https://phabricator.endlessm.com/T28787",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,304,2020-03-16T20:07:02Z,2020-03-16T20:49:42Z,2020-03-16T20:49:46Z,MERGED,True,4,0,1,https://github.com/mwleeds,account: Make admin account usable in case of errors,1,[],https://github.com/endlessm/gnome-initial-setup/pull/304,https://github.com/mwleeds,2,https://github.com/endlessm/gnome-initial-setup/pull/304#issuecomment-599735735,"In gis-account-page-local.c, if parental controls are enabled we create
an administrator account which will be used by the parent, and we create
it before the child's account so that the system will not be left
without any admin accounts in case g-i-s crashes or otherwise doesn't
finish. However this isn't especially helpful since the account is not
set to be passwordless (ACT_USER_PASSWORD_MODE_NONE) so cannot easily be
used if the user doesn't make it to the page where they are asked to set
a password on it. So, set the admin account to
ACT_USER_PASSWORD_MODE_SET_AT_LOGIN temporarily. When a password is set
on the account by the password page, accountsservice will set it to
ACT_USER_PASSWORD_MODE_REGULAR.
This seems like a slightly better policy than making the account
passwordless, since we shouldn't encourage passwordless admin accounts.
https://phabricator.endlessm.com/T28787",This is a quick cherry-pick from upstream.,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,304,2020-03-16T20:07:02Z,2020-03-16T20:49:42Z,2020-03-16T20:49:46Z,MERGED,True,4,0,1,https://github.com/mwleeds,account: Make admin account usable in case of errors,1,[],https://github.com/endlessm/gnome-initial-setup/pull/304,https://github.com/mwleeds,3,https://github.com/endlessm/gnome-initial-setup/pull/304#issuecomment-599752014,"In gis-account-page-local.c, if parental controls are enabled we create
an administrator account which will be used by the parent, and we create
it before the child's account so that the system will not be left
without any admin accounts in case g-i-s crashes or otherwise doesn't
finish. However this isn't especially helpful since the account is not
set to be passwordless (ACT_USER_PASSWORD_MODE_NONE) so cannot easily be
used if the user doesn't make it to the page where they are asked to set
a password on it. So, set the admin account to
ACT_USER_PASSWORD_MODE_SET_AT_LOGIN temporarily. When a password is set
on the account by the password page, accountsservice will set it to
ACT_USER_PASSWORD_MODE_REGULAR.
This seems like a slightly better policy than making the account
passwordless, since we shouldn't encourage passwordless admin accounts.
https://phabricator.endlessm.com/T28787",This has been reviewed upstream; don't think it needs any more review.,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,305,2020-03-16T22:35:07Z,2020-03-17T14:44:34Z,2020-03-17T14:44:43Z,MERGED,True,8,3,1,https://github.com/mwleeds,Fix crashes when saving parental controls settings,2,[],https://github.com/endlessm/gnome-initial-setup/pull/305,https://github.com/mwleeds,1,https://github.com/endlessm/gnome-initial-setup/pull/305,"These are cherry picks from this upstream MR: https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/80
https://phabricator.endlessm.com/T28787","These are cherry picks from this upstream MR: https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/80
https://phabricator.endlessm.com/T28787",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,305,2020-03-16T22:35:07Z,2020-03-17T14:44:34Z,2020-03-17T14:44:43Z,MERGED,True,8,3,1,https://github.com/mwleeds,Fix crashes when saving parental controls settings,2,[],https://github.com/endlessm/gnome-initial-setup/pull/305,https://github.com/pwithnall,2,https://github.com/endlessm/gnome-initial-setup/pull/305#issuecomment-599983318,"These are cherry picks from this upstream MR: https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/80
https://phabricator.endlessm.com/T28787",I think this can be merged as soon as it’s accepted upstream.,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,305,2020-03-16T22:35:07Z,2020-03-17T14:44:34Z,2020-03-17T14:44:43Z,MERGED,True,8,3,1,https://github.com/mwleeds,Fix crashes when saving parental controls settings,2,[],https://github.com/endlessm/gnome-initial-setup/pull/305,https://github.com/pwithnall,3,https://github.com/endlessm/gnome-initial-setup/pull/305#issuecomment-600110031,"These are cherry picks from this upstream MR: https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/80
https://phabricator.endlessm.com/T28787",Merged upstream.,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,306,2020-03-18T19:11:16Z,2020-03-18T21:02:28Z,2020-03-18T21:02:31Z,MERGED,True,8,4,2,https://github.com/mwleeds,fixup! password: Add eye icons to toggle password visibility,1,[],https://github.com/endlessm/gnome-initial-setup/pull/306,https://github.com/mwleeds,1,https://github.com/endlessm/gnome-initial-setup/pull/306,"Make the ""show password"" icon match the one in GNOME Shell, rather than
being reversed.
https://phabricator.endlessm.com/T29262","Make the ""show password"" icon match the one in GNOME Shell, rather than
being reversed.
https://phabricator.endlessm.com/T29262",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,307,2020-03-19T15:27:34Z,2020-03-19T17:27:28Z,2020-03-19T17:27:32Z,MERGED,True,1,1,1,https://github.com/pwithnall,fixup! account-local: add toggle for passwordless accounts,1,[],https://github.com/endlessm/gnome-initial-setup/pull/307,https://github.com/pwithnall,1,https://github.com/endlessm/gnome-initial-setup/pull/307,"This fixes the parent password page so that it shows when parental
controls are enabled, regardless of whether the passwordless toggle was
checked for the main user. The parent password page should be shown if
(and only if) parental controls are enabled.
https://phabricator.endlessm.com/T28739","This fixes the parent password page so that it shows when parental
controls are enabled, regardless of whether the passwordless toggle was
checked for the main user. The parent password page should be shown if
(and only if) parental controls are enabled.
https://phabricator.endlessm.com/T28739",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,308,2020-03-24T19:53:41Z,2020-03-24T20:13:17Z,2020-03-24T20:14:07Z,MERGED,True,10,2,3,https://github.com/pwithnall,debian: Bump libmalcontent dependency to 0.7.0 for new APIs for metrics,1,[],https://github.com/endlessm/gnome-initial-setup/pull/308,https://github.com/pwithnall,1,https://github.com/endlessm/gnome-initial-setup/pull/308,"Signed-off-by: Philip Withnall withnall@endlessm.com
https://phabricator.endlessm.com/T28742

Code changes in #303.","Signed-off-by: Philip Withnall withnall@endlessm.com
https://phabricator.endlessm.com/T28742

Code changes in #303.",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,309,2020-03-24T20:23:00Z,2020-03-24T20:35:00Z,2020-03-24T20:35:00Z,CLOSED,False,1,1,1,https://github.com/pwithnall,debian: Add missing comma from previous commit,1,[],https://github.com/endlessm/gnome-initial-setup/pull/309,https://github.com/pwithnall,1,https://github.com/endlessm/gnome-initial-setup/pull/309,"Signed-off-by: Philip Withnall withnall@endlessm.com
https://phabricator.endlessm.com/T28742","Signed-off-by: Philip Withnall withnall@endlessm.com
https://phabricator.endlessm.com/T28742",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,309,2020-03-24T20:23:00Z,2020-03-24T20:35:00Z,2020-03-24T20:35:00Z,CLOSED,False,1,1,1,https://github.com/pwithnall,debian: Add missing comma from previous commit,1,[],https://github.com/endlessm/gnome-initial-setup/pull/309,https://github.com/mwleeds,2,https://github.com/endlessm/gnome-initial-setup/pull/309#issuecomment-603490659,"Signed-off-by: Philip Withnall withnall@endlessm.com
https://phabricator.endlessm.com/T28742",I made the same change without going through a PR,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,310,2020-04-02T19:47:23Z,2020-04-03T13:11:04Z,2020-04-03T13:11:09Z,MERGED,True,1209,1318,14,https://github.com/wjt,Update to 3.36.1,17,[],https://github.com/endlessm/gnome-initial-setup/pull/310,https://github.com/wjt,1,https://github.com/endlessm/gnome-initial-setup/pull/310,"Trivial merge of the upstream 3.36.1 tag (pushed here as Version_3.36.1).
https://phabricator.endlessm.com/T29691","Trivial merge of the upstream 3.36.1 tag (pushed here as Version_3.36.1).
https://phabricator.endlessm.com/T29691",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,311,2020-04-02T19:48:01Z,2020-04-03T13:11:01Z,2020-04-03T13:11:06Z,MERGED,True,1235,1323,18,https://github.com/wjt,Update to 3.36.1 (packaging),23,[],https://github.com/endlessm/gnome-initial-setup/pull/311,https://github.com/wjt,1,https://github.com/endlessm/gnome-initial-setup/pull/311,"Merge of upstream packaging submitted at https://salsa.debian.org/gnome-team/gnome-initial-setup/-/merge_requests/10
https://phabricator.endlessm.com/T29691","Merge of upstream packaging submitted at https://salsa.debian.org/gnome-team/gnome-initial-setup/-/merge_requests/10
https://phabricator.endlessm.com/T29691",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,312,2020-04-06T17:32:51Z,2020-04-06T19:23:20Z,2020-04-06T19:23:37Z,MERGED,True,15,4,1,https://github.com/pwithnall,fixup! eos: Report metrics from parental controls page,1,[],https://github.com/endlessm/gnome-initial-setup/pull/312,https://github.com/pwithnall,1,https://github.com/endlessm/gnome-initial-setup/pull/312,"This should be squashed in when we next rebase.
It reworks the metrics submission for parental controls to use the same
event (data format and UUID) as the event submitted by
malcontent-control when a user’s parental controls are changed. A
IsInitialSetup field differentiates the two.
This allows shared code for processing the events on the server, and
allows some more comparisons to be made between initial-setup and
malcontent-control events.
https://phabricator.endlessm.com/T28742","This should be squashed in when we next rebase.
It reworks the metrics submission for parental controls to use the same
event (data format and UUID) as the event submitted by
malcontent-control when a user’s parental controls are changed. A
IsInitialSetup field differentiates the two.
This allows shared code for processing the events on the server, and
allows some more comparisons to be made between initial-setup and
malcontent-control events.
https://phabricator.endlessm.com/T28742",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,312,2020-04-06T17:32:51Z,2020-04-06T19:23:20Z,2020-04-06T19:23:37Z,MERGED,True,15,4,1,https://github.com/pwithnall,fixup! eos: Report metrics from parental controls page,1,[],https://github.com/endlessm/gnome-initial-setup/pull/312,https://github.com/pwithnall,2,https://github.com/endlessm/gnome-initial-setup/pull/312#issuecomment-609933510,"This should be squashed in when we next rebase.
It reworks the metrics submission for parental controls to use the same
event (data format and UUID) as the event submitted by
malcontent-control when a user’s parental controls are changed. A
IsInitialSetup field differentiates the two.
This allows shared code for processing the events on the server, and
allows some more comparisons to be made between initial-setup and
malcontent-control events.
https://phabricator.endlessm.com/T28742","Currently untested due to https://phabricator.endlessm.com/T29711, but open for review anyway.",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,313,2020-04-13T10:44:02Z,2020-04-15T16:20:12Z,2020-04-15T16:20:12Z,CLOSED,False,35,37,1,https://github.com/danigm,account: Use custom setting to override faces,1,[],https://github.com/endlessm/gnome-initial-setup/pull/313,https://github.com/danigm,1,https://github.com/endlessm/gnome-initial-setup/pull/313,"This patch uses the org.gnome.desktop.interface.facesdirs
configuration to override the default faces dir.
https://phabricator.endlessm.com/T29718","This patch uses the org.gnome.desktop.interface.facesdirs
configuration to override the default faces dir.
https://phabricator.endlessm.com/T29718",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,313,2020-04-13T10:44:02Z,2020-04-15T16:20:12Z,2020-04-15T16:20:12Z,CLOSED,False,35,37,1,https://github.com/danigm,account: Use custom setting to override faces,1,[],https://github.com/endlessm/gnome-initial-setup/pull/313,https://github.com/wjt,2,https://github.com/endlessm/gnome-initial-setup/pull/313#issuecomment-614093484,"This patch uses the org.gnome.desktop.interface.facesdirs
configuration to override the default faces dir.
https://phabricator.endlessm.com/T29718","We already have 256b0c0 on this branch – it looks like the patch in this PR updates the implementation to match what's on https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/60.
I left some feedback on that upstream MR. I don't think this change is necessary because the existing patch works:",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,313,2020-04-13T10:44:02Z,2020-04-15T16:20:12Z,2020-04-15T16:20:12Z,CLOSED,False,35,37,1,https://github.com/danigm,account: Use custom setting to override faces,1,[],https://github.com/endlessm/gnome-initial-setup/pull/313,https://github.com/andrunko,3,https://github.com/endlessm/gnome-initial-setup/pull/313#issuecomment-614108948,"This patch uses the org.gnome.desktop.interface.facesdirs
configuration to override the default faces dir.
https://phabricator.endlessm.com/T29718","Exact same comments as the ones from endlessm/gnome-control-center#217 (review).
Specially about the potential issue when calling g_list_store_append (faces, face_file); from add_faces_from_dirs.

Ignore the above, comments clarified in the upstream PR.",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,313,2020-04-13T10:44:02Z,2020-04-15T16:20:12Z,2020-04-15T16:20:12Z,CLOSED,False,35,37,1,https://github.com/danigm,account: Use custom setting to override faces,1,[],https://github.com/endlessm/gnome-initial-setup/pull/313,https://github.com/danigm,4,https://github.com/endlessm/gnome-initial-setup/pull/313#issuecomment-614137979,"This patch uses the org.gnome.desktop.interface.facesdirs
configuration to override the default faces dir.
https://phabricator.endlessm.com/T29718","Okay, so we don't need this PR, I'll close the PR.",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,314,2020-04-15T14:22:59Z,2020-04-15T14:44:33Z,2020-04-15T14:44:41Z,MERGED,True,11,6,2,https://github.com/pwithnall,T27791 Fix use of uninitialised memory with input chooser,2,[],https://github.com/endlessm/gnome-initial-setup/pull/314,https://github.com/pwithnall,1,https://github.com/endlessm/gnome-initial-setup/pull/314,"Trivial cherry-pick of the two commits from https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/82.
https://phabricator.endlessm.com/T27791","Trivial cherry-pick of the two commits from https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/82.
https://phabricator.endlessm.com/T27791",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,315,2020-04-29T18:16:31Z,2020-04-30T18:47:38Z,2020-04-30T18:47:45Z,MERGED,True,2,2,1,https://github.com/GeorgesStavracas,fixup! account: Use control-center setting to override faces,1,[],https://github.com/endlessm/gnome-initial-setup/pull/315,https://github.com/GeorgesStavracas,1,https://github.com/endlessm/gnome-initial-setup/pull/315,"The upstream setting name is 'avatar-directories' now
https://phabricator.endlessm.com/T29718","The upstream setting name is 'avatar-directories' now
https://phabricator.endlessm.com/T29718",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,315,2020-04-29T18:16:31Z,2020-04-30T18:47:38Z,2020-04-30T18:47:45Z,MERGED,True,2,2,1,https://github.com/GeorgesStavracas,fixup! account: Use control-center setting to override faces,1,[],https://github.com/endlessm/gnome-initial-setup/pull/315,https://github.com/andrunko,2,https://github.com/endlessm/gnome-initial-setup/pull/315#issuecomment-622034016,"The upstream setting name is 'avatar-directories' now
https://phabricator.endlessm.com/T29718",LGTM.,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,316,2020-08-12T22:14:07Z,2020-08-13T13:45:57Z,2020-08-13T13:46:00Z,MERGED,True,3,1,1,https://github.com/andrunko,Use panel extension on session,2,[],https://github.com/endlessm/gnome-initial-setup/pull/316,https://github.com/andrunko,1,https://github.com/endlessm/gnome-initial-setup/pull/316,"The panel customizations from Endless are now done as part of panel extension so let's enable it here.
Note we don't change the default panel layout defined for the session, but that is because the panel extension will ignore it (and define its own layout) and if the panel extension fails to load we fallback to the layout set here instead of breaking the session.
See also endlessm/eos-panel-extension#3 (not a hard dep).
https://phabricator.endlessm.com/T30445","The panel customizations from Endless are now done as part of panel extension so let's enable it here.
Note we don't change the default panel layout defined for the session, but that is because the panel extension will ignore it (and define its own layout) and if the panel extension fails to load we fallback to the layout set here instead of breaking the session.
See also endlessm/eos-panel-extension#3 (not a hard dep).
https://phabricator.endlessm.com/T30445",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,316,2020-08-12T22:14:07Z,2020-08-13T13:45:57Z,2020-08-13T13:46:00Z,MERGED,True,3,1,1,https://github.com/andrunko,Use panel extension on session,2,[],https://github.com/endlessm/gnome-initial-setup/pull/316,https://github.com/pwithnall,2,https://github.com/endlessm/gnome-initial-setup/pull/316#issuecomment-673487747,"The panel customizations from Endless are now done as part of panel extension so let's enable it here.
Note we don't change the default panel layout defined for the session, but that is because the panel extension will ignore it (and define its own layout) and if the panel extension fails to load we fallback to the layout set here instead of breaking the session.
See also endlessm/eos-panel-extension#3 (not a hard dep).
https://phabricator.endlessm.com/T30445","I am part-way through the g-i-s rebase, but can pull these commits into the rebase. So please go ahead and merge.",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,317,2020-08-17T14:40:37Z,2020-09-09T15:22:45Z,2020-09-09T15:22:53Z,MERGED,True,0,0,0,https://github.com/pwithnall,T30173 Rebase on 3.37.92,0,[],https://github.com/endlessm/gnome-initial-setup/pull/317,https://github.com/pwithnall,1,https://github.com/endlessm/gnome-initial-setup/pull/317,"This does most of the work for https://phabricator.endlessm.com/T30173, but isn’t actually the final rebase on 3.38.0 because that hasn’t been released yet.
Notable things to point out: demo mode has been dropped (as per https://phabricator.endlessm.com/T30173#840626), and the barcode has been dropped from the factory dialogue (as per https://phabricator.endlessm.com/T20124). Various smaller patches have been submitted upstream.
Packaging changes are in #318.
Here’s what happened to all the commits (oldest first), as a result of git rebase -i upstream/3.37.91:

drop 9378ab08 Allow to reorder pages from the vendor configuration file — never used as per https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/48#note_677130
pick a0576771 copypasta code: Use icon name instead of stock icon — keep, can’t currently be upstreamed due to being blocked on https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/issues/68
pick ab42158f copypasta code: Use GTask in UmRealmManager — keep, can’t currently be upstreamed due to being blocked on https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/issues/68
pick 7f2bc934 Allow initial setup to switch metrics on and off — keep, Endless-specific
drop 2fab2b48 summary: do not play welcome tour — dropped in favour of https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/92, plus addition of run_welcome_tour=false to debian/vendor.conf
pick 615a973f Add product_serial.conf file — keep, Endless-specific
pick 598105db account-local: limit full name to 80 characters — keep, Endless-specific, and I don’t have the time to work through https://phabricator.endlessm.com/T25444 right now
pick 1ab4607e account-local: Hide username — keep, Endless-specific for now
pick e1d80c6d account-local: create a shared user account — keep, Endless-specific for now
pick 23aff0a8 um-utils: consider ""shared"" username to be in use — keep, Endless-specific for now
pick 40fa4f60 main,summary: skip initial setup entirely for shared account — keep, Endless-specific for now
pick c3915a4f account-local: username suggestions — keep, but I have no idea what this is for and have not found time to investigate
pick 36376a2c password: Show the last character when entering the password — keep, blocked on fixing https://phabricator.endlessm.com/T27358
pick 89cd30ea password: Add password reminder — keep; upstreamed as https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/issues/56
pick 27c9370e Add gis_pkexec() helper function — keep, Endless-specific
pick de77e190 driver: track whether the current session is a live boot — keep, Endless-specific
pick efc5cf35 pages: Don't show some pages on live sessions — keep, Endless-specific
drop b519d6a9 assistant: add API to show/hide the forward button — independently implemented upstream as 2ed5e1b
pick f0f380d5 eos-test-mode: add eos-test-mode script — keep, Endless-specific
pick 5f30a7f6 page-util: Add API to read the EOS image version — keep, Endless-specific
pick 0d582ed6 endless-eula: Add endless eula page — keep, Endless-specific
drop 1298d81d gnome-initial-setup: don't display privacy page — dropped in favour of adding it to our vendor.conf file
pick 11fcd647 display: Add a ""Display"" page to the FBE — keep; pulled in commit 00081c434c78205fedf0c0b36fa5d775cf7d496d from gnome-control-center; g-c-c files are otherwise unchanged upstream
pick bbb1d968 keyboard: introduce detector — keep, Endless-specific and I don’t have the time to upstream it right now
pick 9d17b6ee input-chooser: sort default layout before others — keep; could be dropped in future if we updated cc-input-chooser.c
pick e1c40eed input-chooser: consider only language or country layouts non-extra — keep; could be dropped in future if we updated cc-input-chooser.c
pick 6c7bb941 input-chooser: Always show the selected layout — keep; could be dropped in future if we updated cc-input-chooser.c
pick af846422 keyboard: add us/us+intl default layouts as fallback — keep; could be dropped in future if we updated cc-input-chooser.c
pick 75eaeb3c live-chooser: add the Live Chooser page — keep, Endless-specific
pick cc48bbc3 summary: show a different message on live sessions — keep, Endless-specific
pick 1fe97a96 Allow pages to specify a GtkAccelGroup — keep, Endless-specific
pick dceddecc factory test mode: implement the factory dialog — keep, Endless-specific; note significantly reworked to drop the barcode, as per https://phabricator.endlessm.com/T20124; and to use g_get_os_info()
pick 8685d26d language-chooser: make it more clear for the users — keep; could be dropped in future if we updated cc-language-chooser.c
pick a5aed058 timezone: set default 12h/24h from locale — keep; could potentially be reworked and upstreamed as https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/47#note_583999, but I don’t have time right now
pick ac330a78 Bring back the welcome message/logo — keep, Endless-specific
drop 0f3de193 goa: reorder accounts — rationale for this on https://phabricator.endlessm.com/T17486 no longer really applies: Facebook is not really important any more
pick 30d74b91 account-local: add toggle for passwordless accounts — keep, Endless-specific
fixup 4f618ec6 fixup! account-local: add toggle for passwordless accounts — squashed
fixup af40c727 fixup! account-local: add toggle for passwordless accounts — squashed
fixup 3fbb910c fixup! account-local: add toggle for passwordless accounts — squashed
pick 4836cb70 account,password: Hide password page for passwordless account — keep, Endless-specific
pick c2de4441 keyboard: manually pass locale to gkbd-keyboard-display — keep; could be dropped in future if we updated cc-input-chooser.c
pick 8979720e input-chooser: allow CcInputChooser to expand — keep; could be dropped in future if we updated cc-input-chooser.c
pick f7c6bf56 driver: Inhibit the idle state — keep; could potentially be dropped if we worked on https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/issues/11, but I don’t have time for that right now
pick 88527b40 language: allow to specify initial languages from vendor.conf — keep; could be upstreamed except it’s a modification to a file copied in from g-c-c so depends on https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/issues/68
drop 3f447d29 driver: Add ""Store Demo"" — dropping demo mode as per https://phabricator.endlessm.com/T30173#840626
drop 988bbc6e copy-worker: Copy, as opposed to moving files — dropping demo mode as per https://phabricator.endlessm.com/T30173#840626; attempted to upstream as https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/94 but upstream decided not to
pick a4715c3b language: make sure initial language is always at the top — keep; could be dropped in future if we updated cc-language-chooser.c
pick be2ea651 driver: detect whether live media is DVD — keep, Endless-specific
pick ec6b1e25 live-chooser: swap USB/DVD assets as needed — keep, Endless-specific
drop 41963b9b endless-eula: Create, but don't show, EULA in store demo mode — dropping demo mode as per https://phabricator.endlessm.com/T30173#840626
drop 4744029e language: Change the title to ""Welcome to Store Demo"" in store demo mode — dropping demo mode as per https://phabricator.endlessm.com/T30173#840626
drop 83458d2c language: add a button to enter store demo mode on first page — dropping demo mode as per https://phabricator.endlessm.com/T30173#840626
pick b2c87d35 Don't run gnome-initial-setup for existing users — keep; could probably be upstreamed as vendor config, but I have enough vendor config changes pending upstream for now
drop 238a6810 demo: Reset tracking-id and report a metric when we enable metrics — dropping demo mode as per https://phabricator.endlessm.com/T30173#840626
pick b2fd683c passwordPage: make latin kbd layout (en) available for password entries — keep, but currently won’t work until https://phabricator.endlessm.com/T30649 is fixed
drop 4f523c79 Add powerMenu to initial-setup shell mode — reverted by commit 1041f40
pick eaa6aa87 Launch eos-installer on eosinstaller images — keep, Endless-specific
pick 792e0096 language: check {unattended,install}.ini on eosinstaller images — keep, Endless-specific
pick bf7a157a page-util: adopt logic to launch eos-installer — keep, Endless-specific
pick 521dc3c0 password: Reset the password page whenever the password page gets hidden — keep, Endless-specific until “account-local: add toggle for passwordless accounts” is upstreamed
pick 6d3f4db2 network: Update the description for WiFi — keep; upstreamed as https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/95
pick 2d932003 site: add page to track site-specific details for deployments — keep, Endless-specific; note: modified to drop demo mode support
pick 03d81387 account: Check configuration to hide password switch if needed — keep, Endless-specific until “account-local: add toggle for passwordless accounts” is upstreamed
pick 708ddf57 timezone: Hide when automatically detected — keep; could be upstreamed but not today
drop 256b0c09 account: Use control-center setting to override faces — upstreamed as 4c02071
drop c6735cf6 fixup! account: Use control-center setting to override faces — upstreamed as 4c02071
pick c8d81d89 driver: Make height 768 the threshold for ""small screens"" — keep; upstreamed as https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/96
pick c0ffe73a Change generated avatar for empty name — keep, Endless-specific
pick 080f24f0 account: Add 'suggested-action' style to photo button — keep; upstreamed as https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/97
pick b513739f driver: Add resource base path — keep, pending upstreaming at https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/43
pick a566f521 password: Add eye icons to toggle password visibility — keep, pending upstreaming at https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/43
fixup 42d8201d fixup! password: Add eye icons to toggle password visibility — squashed
pick 3b5a1148 Add darker border to generated avatar — keep; upstreamed as https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/99
pick ed975d15 Configuration for Transifex — keep, Endless-specific
pick 5822fc07 Allow gnome-initial-setup user to run eos-write-location — keep, Endless-specific
pick dbdf291f driver: detect when in live mode with persistence — keep, Endless-specific
pick 9d027625 summary: show a different message on persistent live sessions — keep, Endless-specific
pick e29f48d9 Show all pages in persistent live mode — keep, Endless-specific
pick a30b8604 live-chooser: don't create live user account when in persistent live mode — keep, Endless-specific
drop 735f6826 Limit names to 80 bytes to prevent adduser() failure — squashed into “account-local: limit full name to 80 characters”
pick 680d5986 account: Make admin account usable in case of errors — keep, Endless-specific
drop d288c872 driver: Don't crash when saving parental controls — upstreamed as bd2cf34
drop 49a6b048 driver: Allow setting parent password twice — upstreamed as bd2cf34
pick 67acc01e eos: Report metrics from parental controls page — keep, Endless-specific
fixup b8c78cbc fixup! eos: Report metrics from parental controls page — squashed
drop bb4f8269 Add translation support for several new languages — translations will be re-done after rebase
drop ae24e403 (Re)generate .po files — translations will be re-done after rebase
drop 8293c71d Rebase downstream translations — translations will be re-done after rebase
drop 166038c2 Pull translations from Transifex — translations will be re-done after rebase
drop c5d6d8eb New translations from Transifex — translations will be re-done after rebase
drop eb1876e7 New translations from Transifex — translations will be re-done after rebase
drop dc35ea48 New translations from Transifex — translations will be re-done after rebase
drop 1041f40f Revert ""Add powerMenu to initial-setup shell mode"" — reverts an earlier commit
pick 34ad7874 data: Enable panel extension in initial-setup session — keep, Endless-specific","This does most of the work for https://phabricator.endlessm.com/T30173, but isn’t actually the final rebase on 3.38.0 because that hasn’t been released yet.
Notable things to point out: demo mode has been dropped (as per https://phabricator.endlessm.com/T30173#840626), and the barcode has been dropped from the factory dialogue (as per https://phabricator.endlessm.com/T20124). Various smaller patches have been submitted upstream.
Packaging changes are in #318.
Here’s what happened to all the commits (oldest first), as a result of git rebase -i upstream/3.37.91:

drop 9378ab08 Allow to reorder pages from the vendor configuration file — never used as per https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/48#note_677130
pick a0576771 copypasta code: Use icon name instead of stock icon — keep, can’t currently be upstreamed due to being blocked on https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/issues/68
pick ab42158f copypasta code: Use GTask in UmRealmManager — keep, can’t currently be upstreamed due to being blocked on https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/issues/68
pick 7f2bc934 Allow initial setup to switch metrics on and off — keep, Endless-specific
drop 2fab2b48 summary: do not play welcome tour — dropped in favour of https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/92, plus addition of run_welcome_tour=false to debian/vendor.conf
pick 615a973f Add product_serial.conf file — keep, Endless-specific
pick 598105db account-local: limit full name to 80 characters — keep, Endless-specific, and I don’t have the time to work through https://phabricator.endlessm.com/T25444 right now
pick 1ab4607e account-local: Hide username — keep, Endless-specific for now
pick e1d80c6d account-local: create a shared user account — keep, Endless-specific for now
pick 23aff0a8 um-utils: consider ""shared"" username to be in use — keep, Endless-specific for now
pick 40fa4f60 main,summary: skip initial setup entirely for shared account — keep, Endless-specific for now
pick c3915a4f account-local: username suggestions — keep, but I have no idea what this is for and have not found time to investigate
pick 36376a2c password: Show the last character when entering the password — keep, blocked on fixing https://phabricator.endlessm.com/T27358
pick 89cd30ea password: Add password reminder — keep; upstreamed as https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/issues/56
pick 27c9370e Add gis_pkexec() helper function — keep, Endless-specific
pick de77e190 driver: track whether the current session is a live boot — keep, Endless-specific
pick efc5cf35 pages: Don't show some pages on live sessions — keep, Endless-specific
drop b519d6a9 assistant: add API to show/hide the forward button — independently implemented upstream as 2ed5e1b
pick f0f380d5 eos-test-mode: add eos-test-mode script — keep, Endless-specific
pick 5f30a7f6 page-util: Add API to read the EOS image version — keep, Endless-specific
pick 0d582ed6 endless-eula: Add endless eula page — keep, Endless-specific
drop 1298d81d gnome-initial-setup: don't display privacy page — dropped in favour of adding it to our vendor.conf file
pick 11fcd647 display: Add a ""Display"" page to the FBE — keep; pulled in commit 00081c434c78205fedf0c0b36fa5d775cf7d496d from gnome-control-center; g-c-c files are otherwise unchanged upstream
pick bbb1d968 keyboard: introduce detector — keep, Endless-specific and I don’t have the time to upstream it right now
pick 9d17b6ee input-chooser: sort default layout before others — keep; could be dropped in future if we updated cc-input-chooser.c
pick e1c40eed input-chooser: consider only language or country layouts non-extra — keep; could be dropped in future if we updated cc-input-chooser.c
pick 6c7bb941 input-chooser: Always show the selected layout — keep; could be dropped in future if we updated cc-input-chooser.c
pick af846422 keyboard: add us/us+intl default layouts as fallback — keep; could be dropped in future if we updated cc-input-chooser.c
pick 75eaeb3c live-chooser: add the Live Chooser page — keep, Endless-specific
pick cc48bbc3 summary: show a different message on live sessions — keep, Endless-specific
pick 1fe97a96 Allow pages to specify a GtkAccelGroup — keep, Endless-specific
pick dceddecc factory test mode: implement the factory dialog — keep, Endless-specific; note significantly reworked to drop the barcode, as per https://phabricator.endlessm.com/T20124; and to use g_get_os_info()
pick 8685d26d language-chooser: make it more clear for the users — keep; could be dropped in future if we updated cc-language-chooser.c
pick a5aed058 timezone: set default 12h/24h from locale — keep; could potentially be reworked and upstreamed as https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/47#note_583999, but I don’t have time right now
pick ac330a78 Bring back the welcome message/logo — keep, Endless-specific
drop 0f3de193 goa: reorder accounts — rationale for this on https://phabricator.endlessm.com/T17486 no longer really applies: Facebook is not really important any more
pick 30d74b91 account-local: add toggle for passwordless accounts — keep, Endless-specific
fixup 4f618ec6 fixup! account-local: add toggle for passwordless accounts — squashed
fixup af40c727 fixup! account-local: add toggle for passwordless accounts — squashed
fixup 3fbb910c fixup! account-local: add toggle for passwordless accounts — squashed
pick 4836cb70 account,password: Hide password page for passwordless account — keep, Endless-specific
pick c2de4441 keyboard: manually pass locale to gkbd-keyboard-display — keep; could be dropped in future if we updated cc-input-chooser.c
pick 8979720e input-chooser: allow CcInputChooser to expand — keep; could be dropped in future if we updated cc-input-chooser.c
pick f7c6bf56 driver: Inhibit the idle state — keep; could potentially be dropped if we worked on https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/issues/11, but I don’t have time for that right now
pick 88527b40 language: allow to specify initial languages from vendor.conf — keep; could be upstreamed except it’s a modification to a file copied in from g-c-c so depends on https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/issues/68
drop 3f447d29 driver: Add ""Store Demo"" — dropping demo mode as per https://phabricator.endlessm.com/T30173#840626
drop 988bbc6e copy-worker: Copy, as opposed to moving files — dropping demo mode as per https://phabricator.endlessm.com/T30173#840626; attempted to upstream as https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/94 but upstream decided not to
pick a4715c3b language: make sure initial language is always at the top — keep; could be dropped in future if we updated cc-language-chooser.c
pick be2ea651 driver: detect whether live media is DVD — keep, Endless-specific
pick ec6b1e25 live-chooser: swap USB/DVD assets as needed — keep, Endless-specific
drop 41963b9b endless-eula: Create, but don't show, EULA in store demo mode — dropping demo mode as per https://phabricator.endlessm.com/T30173#840626
drop 4744029e language: Change the title to ""Welcome to Store Demo"" in store demo mode — dropping demo mode as per https://phabricator.endlessm.com/T30173#840626
drop 83458d2c language: add a button to enter store demo mode on first page — dropping demo mode as per https://phabricator.endlessm.com/T30173#840626
pick b2c87d35 Don't run gnome-initial-setup for existing users — keep; could probably be upstreamed as vendor config, but I have enough vendor config changes pending upstream for now
drop 238a6810 demo: Reset tracking-id and report a metric when we enable metrics — dropping demo mode as per https://phabricator.endlessm.com/T30173#840626
pick b2fd683c passwordPage: make latin kbd layout (en) available for password entries — keep, but currently won’t work until https://phabricator.endlessm.com/T30649 is fixed
drop 4f523c79 Add powerMenu to initial-setup shell mode — reverted by commit 1041f40
pick eaa6aa87 Launch eos-installer on eosinstaller images — keep, Endless-specific
pick 792e0096 language: check {unattended,install}.ini on eosinstaller images — keep, Endless-specific
pick bf7a157a page-util: adopt logic to launch eos-installer — keep, Endless-specific
pick 521dc3c0 password: Reset the password page whenever the password page gets hidden — keep, Endless-specific until “account-local: add toggle for passwordless accounts” is upstreamed
pick 6d3f4db2 network: Update the description for WiFi — keep; upstreamed as https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/95
pick 2d932003 site: add page to track site-specific details for deployments — keep, Endless-specific; note: modified to drop demo mode support
pick 03d81387 account: Check configuration to hide password switch if needed — keep, Endless-specific until “account-local: add toggle for passwordless accounts” is upstreamed
pick 708ddf57 timezone: Hide when automatically detected — keep; could be upstreamed but not today
drop 256b0c09 account: Use control-center setting to override faces — upstreamed as 4c02071
drop c6735cf6 fixup! account: Use control-center setting to override faces — upstreamed as 4c02071
pick c8d81d89 driver: Make height 768 the threshold for ""small screens"" — keep; upstreamed as https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/96
pick c0ffe73a Change generated avatar for empty name — keep, Endless-specific
pick 080f24f0 account: Add 'suggested-action' style to photo button — keep; upstreamed as https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/97
pick b513739f driver: Add resource base path — keep, pending upstreaming at https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/43
pick a566f521 password: Add eye icons to toggle password visibility — keep, pending upstreaming at https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/43
fixup 42d8201d fixup! password: Add eye icons to toggle password visibility — squashed
pick 3b5a1148 Add darker border to generated avatar — keep; upstreamed as https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/99
pick ed975d15 Configuration for Transifex — keep, Endless-specific
pick 5822fc07 Allow gnome-initial-setup user to run eos-write-location — keep, Endless-specific
pick dbdf291f driver: detect when in live mode with persistence — keep, Endless-specific
pick 9d027625 summary: show a different message on persistent live sessions — keep, Endless-specific
pick e29f48d9 Show all pages in persistent live mode — keep, Endless-specific
pick a30b8604 live-chooser: don't create live user account when in persistent live mode — keep, Endless-specific
drop 735f6826 Limit names to 80 bytes to prevent adduser() failure — squashed into “account-local: limit full name to 80 characters”
pick 680d5986 account: Make admin account usable in case of errors — keep, Endless-specific
drop d288c872 driver: Don't crash when saving parental controls — upstreamed as bd2cf34
drop 49a6b048 driver: Allow setting parent password twice — upstreamed as bd2cf34
pick 67acc01e eos: Report metrics from parental controls page — keep, Endless-specific
fixup b8c78cbc fixup! eos: Report metrics from parental controls page — squashed
drop bb4f8269 Add translation support for several new languages — translations will be re-done after rebase
drop ae24e403 (Re)generate .po files — translations will be re-done after rebase
drop 8293c71d Rebase downstream translations — translations will be re-done after rebase
drop 166038c2 Pull translations from Transifex — translations will be re-done after rebase
drop c5d6d8eb New translations from Transifex — translations will be re-done after rebase
drop eb1876e7 New translations from Transifex — translations will be re-done after rebase
drop dc35ea48 New translations from Transifex — translations will be re-done after rebase
drop 1041f40f Revert ""Add powerMenu to initial-setup shell mode"" — reverts an earlier commit
pick 34ad7874 data: Enable panel extension in initial-setup session — keep, Endless-specific",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,317,2020-08-17T14:40:37Z,2020-09-09T15:22:45Z,2020-09-09T15:22:53Z,MERGED,True,0,0,0,https://github.com/pwithnall,T30173 Rebase on 3.37.92,0,[],https://github.com/endlessm/gnome-initial-setup/pull/317,https://github.com/pwithnall,2,https://github.com/endlessm/gnome-initial-setup/pull/317#issuecomment-674935785,"This does most of the work for https://phabricator.endlessm.com/T30173, but isn’t actually the final rebase on 3.38.0 because that hasn’t been released yet.
Notable things to point out: demo mode has been dropped (as per https://phabricator.endlessm.com/T30173#840626), and the barcode has been dropped from the factory dialogue (as per https://phabricator.endlessm.com/T20124). Various smaller patches have been submitted upstream.
Packaging changes are in #318.
Here’s what happened to all the commits (oldest first), as a result of git rebase -i upstream/3.37.91:

drop 9378ab08 Allow to reorder pages from the vendor configuration file — never used as per https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/48#note_677130
pick a0576771 copypasta code: Use icon name instead of stock icon — keep, can’t currently be upstreamed due to being blocked on https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/issues/68
pick ab42158f copypasta code: Use GTask in UmRealmManager — keep, can’t currently be upstreamed due to being blocked on https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/issues/68
pick 7f2bc934 Allow initial setup to switch metrics on and off — keep, Endless-specific
drop 2fab2b48 summary: do not play welcome tour — dropped in favour of https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/92, plus addition of run_welcome_tour=false to debian/vendor.conf
pick 615a973f Add product_serial.conf file — keep, Endless-specific
pick 598105db account-local: limit full name to 80 characters — keep, Endless-specific, and I don’t have the time to work through https://phabricator.endlessm.com/T25444 right now
pick 1ab4607e account-local: Hide username — keep, Endless-specific for now
pick e1d80c6d account-local: create a shared user account — keep, Endless-specific for now
pick 23aff0a8 um-utils: consider ""shared"" username to be in use — keep, Endless-specific for now
pick 40fa4f60 main,summary: skip initial setup entirely for shared account — keep, Endless-specific for now
pick c3915a4f account-local: username suggestions — keep, but I have no idea what this is for and have not found time to investigate
pick 36376a2c password: Show the last character when entering the password — keep, blocked on fixing https://phabricator.endlessm.com/T27358
pick 89cd30ea password: Add password reminder — keep; upstreamed as https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/issues/56
pick 27c9370e Add gis_pkexec() helper function — keep, Endless-specific
pick de77e190 driver: track whether the current session is a live boot — keep, Endless-specific
pick efc5cf35 pages: Don't show some pages on live sessions — keep, Endless-specific
drop b519d6a9 assistant: add API to show/hide the forward button — independently implemented upstream as 2ed5e1b
pick f0f380d5 eos-test-mode: add eos-test-mode script — keep, Endless-specific
pick 5f30a7f6 page-util: Add API to read the EOS image version — keep, Endless-specific
pick 0d582ed6 endless-eula: Add endless eula page — keep, Endless-specific
drop 1298d81d gnome-initial-setup: don't display privacy page — dropped in favour of adding it to our vendor.conf file
pick 11fcd647 display: Add a ""Display"" page to the FBE — keep; pulled in commit 00081c434c78205fedf0c0b36fa5d775cf7d496d from gnome-control-center; g-c-c files are otherwise unchanged upstream
pick bbb1d968 keyboard: introduce detector — keep, Endless-specific and I don’t have the time to upstream it right now
pick 9d17b6ee input-chooser: sort default layout before others — keep; could be dropped in future if we updated cc-input-chooser.c
pick e1c40eed input-chooser: consider only language or country layouts non-extra — keep; could be dropped in future if we updated cc-input-chooser.c
pick 6c7bb941 input-chooser: Always show the selected layout — keep; could be dropped in future if we updated cc-input-chooser.c
pick af846422 keyboard: add us/us+intl default layouts as fallback — keep; could be dropped in future if we updated cc-input-chooser.c
pick 75eaeb3c live-chooser: add the Live Chooser page — keep, Endless-specific
pick cc48bbc3 summary: show a different message on live sessions — keep, Endless-specific
pick 1fe97a96 Allow pages to specify a GtkAccelGroup — keep, Endless-specific
pick dceddecc factory test mode: implement the factory dialog — keep, Endless-specific; note significantly reworked to drop the barcode, as per https://phabricator.endlessm.com/T20124; and to use g_get_os_info()
pick 8685d26d language-chooser: make it more clear for the users — keep; could be dropped in future if we updated cc-language-chooser.c
pick a5aed058 timezone: set default 12h/24h from locale — keep; could potentially be reworked and upstreamed as https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/47#note_583999, but I don’t have time right now
pick ac330a78 Bring back the welcome message/logo — keep, Endless-specific
drop 0f3de193 goa: reorder accounts — rationale for this on https://phabricator.endlessm.com/T17486 no longer really applies: Facebook is not really important any more
pick 30d74b91 account-local: add toggle for passwordless accounts — keep, Endless-specific
fixup 4f618ec6 fixup! account-local: add toggle for passwordless accounts — squashed
fixup af40c727 fixup! account-local: add toggle for passwordless accounts — squashed
fixup 3fbb910c fixup! account-local: add toggle for passwordless accounts — squashed
pick 4836cb70 account,password: Hide password page for passwordless account — keep, Endless-specific
pick c2de4441 keyboard: manually pass locale to gkbd-keyboard-display — keep; could be dropped in future if we updated cc-input-chooser.c
pick 8979720e input-chooser: allow CcInputChooser to expand — keep; could be dropped in future if we updated cc-input-chooser.c
pick f7c6bf56 driver: Inhibit the idle state — keep; could potentially be dropped if we worked on https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/issues/11, but I don’t have time for that right now
pick 88527b40 language: allow to specify initial languages from vendor.conf — keep; could be upstreamed except it’s a modification to a file copied in from g-c-c so depends on https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/issues/68
drop 3f447d29 driver: Add ""Store Demo"" — dropping demo mode as per https://phabricator.endlessm.com/T30173#840626
drop 988bbc6e copy-worker: Copy, as opposed to moving files — dropping demo mode as per https://phabricator.endlessm.com/T30173#840626; attempted to upstream as https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/94 but upstream decided not to
pick a4715c3b language: make sure initial language is always at the top — keep; could be dropped in future if we updated cc-language-chooser.c
pick be2ea651 driver: detect whether live media is DVD — keep, Endless-specific
pick ec6b1e25 live-chooser: swap USB/DVD assets as needed — keep, Endless-specific
drop 41963b9b endless-eula: Create, but don't show, EULA in store demo mode — dropping demo mode as per https://phabricator.endlessm.com/T30173#840626
drop 4744029e language: Change the title to ""Welcome to Store Demo"" in store demo mode — dropping demo mode as per https://phabricator.endlessm.com/T30173#840626
drop 83458d2c language: add a button to enter store demo mode on first page — dropping demo mode as per https://phabricator.endlessm.com/T30173#840626
pick b2c87d35 Don't run gnome-initial-setup for existing users — keep; could probably be upstreamed as vendor config, but I have enough vendor config changes pending upstream for now
drop 238a6810 demo: Reset tracking-id and report a metric when we enable metrics — dropping demo mode as per https://phabricator.endlessm.com/T30173#840626
pick b2fd683c passwordPage: make latin kbd layout (en) available for password entries — keep, but currently won’t work until https://phabricator.endlessm.com/T30649 is fixed
drop 4f523c79 Add powerMenu to initial-setup shell mode — reverted by commit 1041f40
pick eaa6aa87 Launch eos-installer on eosinstaller images — keep, Endless-specific
pick 792e0096 language: check {unattended,install}.ini on eosinstaller images — keep, Endless-specific
pick bf7a157a page-util: adopt logic to launch eos-installer — keep, Endless-specific
pick 521dc3c0 password: Reset the password page whenever the password page gets hidden — keep, Endless-specific until “account-local: add toggle for passwordless accounts” is upstreamed
pick 6d3f4db2 network: Update the description for WiFi — keep; upstreamed as https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/95
pick 2d932003 site: add page to track site-specific details for deployments — keep, Endless-specific; note: modified to drop demo mode support
pick 03d81387 account: Check configuration to hide password switch if needed — keep, Endless-specific until “account-local: add toggle for passwordless accounts” is upstreamed
pick 708ddf57 timezone: Hide when automatically detected — keep; could be upstreamed but not today
drop 256b0c09 account: Use control-center setting to override faces — upstreamed as 4c02071
drop c6735cf6 fixup! account: Use control-center setting to override faces — upstreamed as 4c02071
pick c8d81d89 driver: Make height 768 the threshold for ""small screens"" — keep; upstreamed as https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/96
pick c0ffe73a Change generated avatar for empty name — keep, Endless-specific
pick 080f24f0 account: Add 'suggested-action' style to photo button — keep; upstreamed as https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/97
pick b513739f driver: Add resource base path — keep, pending upstreaming at https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/43
pick a566f521 password: Add eye icons to toggle password visibility — keep, pending upstreaming at https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/43
fixup 42d8201d fixup! password: Add eye icons to toggle password visibility — squashed
pick 3b5a1148 Add darker border to generated avatar — keep; upstreamed as https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/99
pick ed975d15 Configuration for Transifex — keep, Endless-specific
pick 5822fc07 Allow gnome-initial-setup user to run eos-write-location — keep, Endless-specific
pick dbdf291f driver: detect when in live mode with persistence — keep, Endless-specific
pick 9d027625 summary: show a different message on persistent live sessions — keep, Endless-specific
pick e29f48d9 Show all pages in persistent live mode — keep, Endless-specific
pick a30b8604 live-chooser: don't create live user account when in persistent live mode — keep, Endless-specific
drop 735f6826 Limit names to 80 bytes to prevent adduser() failure — squashed into “account-local: limit full name to 80 characters”
pick 680d5986 account: Make admin account usable in case of errors — keep, Endless-specific
drop d288c872 driver: Don't crash when saving parental controls — upstreamed as bd2cf34
drop 49a6b048 driver: Allow setting parent password twice — upstreamed as bd2cf34
pick 67acc01e eos: Report metrics from parental controls page — keep, Endless-specific
fixup b8c78cbc fixup! eos: Report metrics from parental controls page — squashed
drop bb4f8269 Add translation support for several new languages — translations will be re-done after rebase
drop ae24e403 (Re)generate .po files — translations will be re-done after rebase
drop 8293c71d Rebase downstream translations — translations will be re-done after rebase
drop 166038c2 Pull translations from Transifex — translations will be re-done after rebase
drop c5d6d8eb New translations from Transifex — translations will be re-done after rebase
drop eb1876e7 New translations from Transifex — translations will be re-done after rebase
drop dc35ea48 New translations from Transifex — translations will be re-done after rebase
drop 1041f40f Revert ""Add powerMenu to initial-setup shell mode"" — reverts an earlier commit
pick 34ad7874 data: Enable panel extension in initial-setup session — keep, Endless-specific","bot, retest this please",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,317,2020-08-17T14:40:37Z,2020-09-09T15:22:45Z,2020-09-09T15:22:53Z,MERGED,True,0,0,0,https://github.com/pwithnall,T30173 Rebase on 3.37.92,0,[],https://github.com/endlessm/gnome-initial-setup/pull/317,https://github.com/pwithnall,3,https://github.com/endlessm/gnome-initial-setup/pull/317#issuecomment-674940914,"This does most of the work for https://phabricator.endlessm.com/T30173, but isn’t actually the final rebase on 3.38.0 because that hasn’t been released yet.
Notable things to point out: demo mode has been dropped (as per https://phabricator.endlessm.com/T30173#840626), and the barcode has been dropped from the factory dialogue (as per https://phabricator.endlessm.com/T20124). Various smaller patches have been submitted upstream.
Packaging changes are in #318.
Here’s what happened to all the commits (oldest first), as a result of git rebase -i upstream/3.37.91:

drop 9378ab08 Allow to reorder pages from the vendor configuration file — never used as per https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/48#note_677130
pick a0576771 copypasta code: Use icon name instead of stock icon — keep, can’t currently be upstreamed due to being blocked on https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/issues/68
pick ab42158f copypasta code: Use GTask in UmRealmManager — keep, can’t currently be upstreamed due to being blocked on https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/issues/68
pick 7f2bc934 Allow initial setup to switch metrics on and off — keep, Endless-specific
drop 2fab2b48 summary: do not play welcome tour — dropped in favour of https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/92, plus addition of run_welcome_tour=false to debian/vendor.conf
pick 615a973f Add product_serial.conf file — keep, Endless-specific
pick 598105db account-local: limit full name to 80 characters — keep, Endless-specific, and I don’t have the time to work through https://phabricator.endlessm.com/T25444 right now
pick 1ab4607e account-local: Hide username — keep, Endless-specific for now
pick e1d80c6d account-local: create a shared user account — keep, Endless-specific for now
pick 23aff0a8 um-utils: consider ""shared"" username to be in use — keep, Endless-specific for now
pick 40fa4f60 main,summary: skip initial setup entirely for shared account — keep, Endless-specific for now
pick c3915a4f account-local: username suggestions — keep, but I have no idea what this is for and have not found time to investigate
pick 36376a2c password: Show the last character when entering the password — keep, blocked on fixing https://phabricator.endlessm.com/T27358
pick 89cd30ea password: Add password reminder — keep; upstreamed as https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/issues/56
pick 27c9370e Add gis_pkexec() helper function — keep, Endless-specific
pick de77e190 driver: track whether the current session is a live boot — keep, Endless-specific
pick efc5cf35 pages: Don't show some pages on live sessions — keep, Endless-specific
drop b519d6a9 assistant: add API to show/hide the forward button — independently implemented upstream as 2ed5e1b
pick f0f380d5 eos-test-mode: add eos-test-mode script — keep, Endless-specific
pick 5f30a7f6 page-util: Add API to read the EOS image version — keep, Endless-specific
pick 0d582ed6 endless-eula: Add endless eula page — keep, Endless-specific
drop 1298d81d gnome-initial-setup: don't display privacy page — dropped in favour of adding it to our vendor.conf file
pick 11fcd647 display: Add a ""Display"" page to the FBE — keep; pulled in commit 00081c434c78205fedf0c0b36fa5d775cf7d496d from gnome-control-center; g-c-c files are otherwise unchanged upstream
pick bbb1d968 keyboard: introduce detector — keep, Endless-specific and I don’t have the time to upstream it right now
pick 9d17b6ee input-chooser: sort default layout before others — keep; could be dropped in future if we updated cc-input-chooser.c
pick e1c40eed input-chooser: consider only language or country layouts non-extra — keep; could be dropped in future if we updated cc-input-chooser.c
pick 6c7bb941 input-chooser: Always show the selected layout — keep; could be dropped in future if we updated cc-input-chooser.c
pick af846422 keyboard: add us/us+intl default layouts as fallback — keep; could be dropped in future if we updated cc-input-chooser.c
pick 75eaeb3c live-chooser: add the Live Chooser page — keep, Endless-specific
pick cc48bbc3 summary: show a different message on live sessions — keep, Endless-specific
pick 1fe97a96 Allow pages to specify a GtkAccelGroup — keep, Endless-specific
pick dceddecc factory test mode: implement the factory dialog — keep, Endless-specific; note significantly reworked to drop the barcode, as per https://phabricator.endlessm.com/T20124; and to use g_get_os_info()
pick 8685d26d language-chooser: make it more clear for the users — keep; could be dropped in future if we updated cc-language-chooser.c
pick a5aed058 timezone: set default 12h/24h from locale — keep; could potentially be reworked and upstreamed as https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/47#note_583999, but I don’t have time right now
pick ac330a78 Bring back the welcome message/logo — keep, Endless-specific
drop 0f3de193 goa: reorder accounts — rationale for this on https://phabricator.endlessm.com/T17486 no longer really applies: Facebook is not really important any more
pick 30d74b91 account-local: add toggle for passwordless accounts — keep, Endless-specific
fixup 4f618ec6 fixup! account-local: add toggle for passwordless accounts — squashed
fixup af40c727 fixup! account-local: add toggle for passwordless accounts — squashed
fixup 3fbb910c fixup! account-local: add toggle for passwordless accounts — squashed
pick 4836cb70 account,password: Hide password page for passwordless account — keep, Endless-specific
pick c2de4441 keyboard: manually pass locale to gkbd-keyboard-display — keep; could be dropped in future if we updated cc-input-chooser.c
pick 8979720e input-chooser: allow CcInputChooser to expand — keep; could be dropped in future if we updated cc-input-chooser.c
pick f7c6bf56 driver: Inhibit the idle state — keep; could potentially be dropped if we worked on https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/issues/11, but I don’t have time for that right now
pick 88527b40 language: allow to specify initial languages from vendor.conf — keep; could be upstreamed except it’s a modification to a file copied in from g-c-c so depends on https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/issues/68
drop 3f447d29 driver: Add ""Store Demo"" — dropping demo mode as per https://phabricator.endlessm.com/T30173#840626
drop 988bbc6e copy-worker: Copy, as opposed to moving files — dropping demo mode as per https://phabricator.endlessm.com/T30173#840626; attempted to upstream as https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/94 but upstream decided not to
pick a4715c3b language: make sure initial language is always at the top — keep; could be dropped in future if we updated cc-language-chooser.c
pick be2ea651 driver: detect whether live media is DVD — keep, Endless-specific
pick ec6b1e25 live-chooser: swap USB/DVD assets as needed — keep, Endless-specific
drop 41963b9b endless-eula: Create, but don't show, EULA in store demo mode — dropping demo mode as per https://phabricator.endlessm.com/T30173#840626
drop 4744029e language: Change the title to ""Welcome to Store Demo"" in store demo mode — dropping demo mode as per https://phabricator.endlessm.com/T30173#840626
drop 83458d2c language: add a button to enter store demo mode on first page — dropping demo mode as per https://phabricator.endlessm.com/T30173#840626
pick b2c87d35 Don't run gnome-initial-setup for existing users — keep; could probably be upstreamed as vendor config, but I have enough vendor config changes pending upstream for now
drop 238a6810 demo: Reset tracking-id and report a metric when we enable metrics — dropping demo mode as per https://phabricator.endlessm.com/T30173#840626
pick b2fd683c passwordPage: make latin kbd layout (en) available for password entries — keep, but currently won’t work until https://phabricator.endlessm.com/T30649 is fixed
drop 4f523c79 Add powerMenu to initial-setup shell mode — reverted by commit 1041f40
pick eaa6aa87 Launch eos-installer on eosinstaller images — keep, Endless-specific
pick 792e0096 language: check {unattended,install}.ini on eosinstaller images — keep, Endless-specific
pick bf7a157a page-util: adopt logic to launch eos-installer — keep, Endless-specific
pick 521dc3c0 password: Reset the password page whenever the password page gets hidden — keep, Endless-specific until “account-local: add toggle for passwordless accounts” is upstreamed
pick 6d3f4db2 network: Update the description for WiFi — keep; upstreamed as https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/95
pick 2d932003 site: add page to track site-specific details for deployments — keep, Endless-specific; note: modified to drop demo mode support
pick 03d81387 account: Check configuration to hide password switch if needed — keep, Endless-specific until “account-local: add toggle for passwordless accounts” is upstreamed
pick 708ddf57 timezone: Hide when automatically detected — keep; could be upstreamed but not today
drop 256b0c09 account: Use control-center setting to override faces — upstreamed as 4c02071
drop c6735cf6 fixup! account: Use control-center setting to override faces — upstreamed as 4c02071
pick c8d81d89 driver: Make height 768 the threshold for ""small screens"" — keep; upstreamed as https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/96
pick c0ffe73a Change generated avatar for empty name — keep, Endless-specific
pick 080f24f0 account: Add 'suggested-action' style to photo button — keep; upstreamed as https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/97
pick b513739f driver: Add resource base path — keep, pending upstreaming at https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/43
pick a566f521 password: Add eye icons to toggle password visibility — keep, pending upstreaming at https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/43
fixup 42d8201d fixup! password: Add eye icons to toggle password visibility — squashed
pick 3b5a1148 Add darker border to generated avatar — keep; upstreamed as https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/99
pick ed975d15 Configuration for Transifex — keep, Endless-specific
pick 5822fc07 Allow gnome-initial-setup user to run eos-write-location — keep, Endless-specific
pick dbdf291f driver: detect when in live mode with persistence — keep, Endless-specific
pick 9d027625 summary: show a different message on persistent live sessions — keep, Endless-specific
pick e29f48d9 Show all pages in persistent live mode — keep, Endless-specific
pick a30b8604 live-chooser: don't create live user account when in persistent live mode — keep, Endless-specific
drop 735f6826 Limit names to 80 bytes to prevent adduser() failure — squashed into “account-local: limit full name to 80 characters”
pick 680d5986 account: Make admin account usable in case of errors — keep, Endless-specific
drop d288c872 driver: Don't crash when saving parental controls — upstreamed as bd2cf34
drop 49a6b048 driver: Allow setting parent password twice — upstreamed as bd2cf34
pick 67acc01e eos: Report metrics from parental controls page — keep, Endless-specific
fixup b8c78cbc fixup! eos: Report metrics from parental controls page — squashed
drop bb4f8269 Add translation support for several new languages — translations will be re-done after rebase
drop ae24e403 (Re)generate .po files — translations will be re-done after rebase
drop 8293c71d Rebase downstream translations — translations will be re-done after rebase
drop 166038c2 Pull translations from Transifex — translations will be re-done after rebase
drop c5d6d8eb New translations from Transifex — translations will be re-done after rebase
drop eb1876e7 New translations from Transifex — translations will be re-done after rebase
drop dc35ea48 New translations from Transifex — translations will be re-done after rebase
drop 1041f40f Revert ""Add powerMenu to initial-setup shell mode"" — reverts an earlier commit
pick 34ad7874 data: Enable panel extension in initial-setup session — keep, Endless-specific","bot, retest this please",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,317,2020-08-17T14:40:37Z,2020-09-09T15:22:45Z,2020-09-09T15:22:53Z,MERGED,True,0,0,0,https://github.com/pwithnall,T30173 Rebase on 3.37.92,0,[],https://github.com/endlessm/gnome-initial-setup/pull/317,https://github.com/mwleeds,4,https://github.com/endlessm/gnome-initial-setup/pull/317#issuecomment-688601933,"This does most of the work for https://phabricator.endlessm.com/T30173, but isn’t actually the final rebase on 3.38.0 because that hasn’t been released yet.
Notable things to point out: demo mode has been dropped (as per https://phabricator.endlessm.com/T30173#840626), and the barcode has been dropped from the factory dialogue (as per https://phabricator.endlessm.com/T20124). Various smaller patches have been submitted upstream.
Packaging changes are in #318.
Here’s what happened to all the commits (oldest first), as a result of git rebase -i upstream/3.37.91:

drop 9378ab08 Allow to reorder pages from the vendor configuration file — never used as per https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/48#note_677130
pick a0576771 copypasta code: Use icon name instead of stock icon — keep, can’t currently be upstreamed due to being blocked on https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/issues/68
pick ab42158f copypasta code: Use GTask in UmRealmManager — keep, can’t currently be upstreamed due to being blocked on https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/issues/68
pick 7f2bc934 Allow initial setup to switch metrics on and off — keep, Endless-specific
drop 2fab2b48 summary: do not play welcome tour — dropped in favour of https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/92, plus addition of run_welcome_tour=false to debian/vendor.conf
pick 615a973f Add product_serial.conf file — keep, Endless-specific
pick 598105db account-local: limit full name to 80 characters — keep, Endless-specific, and I don’t have the time to work through https://phabricator.endlessm.com/T25444 right now
pick 1ab4607e account-local: Hide username — keep, Endless-specific for now
pick e1d80c6d account-local: create a shared user account — keep, Endless-specific for now
pick 23aff0a8 um-utils: consider ""shared"" username to be in use — keep, Endless-specific for now
pick 40fa4f60 main,summary: skip initial setup entirely for shared account — keep, Endless-specific for now
pick c3915a4f account-local: username suggestions — keep, but I have no idea what this is for and have not found time to investigate
pick 36376a2c password: Show the last character when entering the password — keep, blocked on fixing https://phabricator.endlessm.com/T27358
pick 89cd30ea password: Add password reminder — keep; upstreamed as https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/issues/56
pick 27c9370e Add gis_pkexec() helper function — keep, Endless-specific
pick de77e190 driver: track whether the current session is a live boot — keep, Endless-specific
pick efc5cf35 pages: Don't show some pages on live sessions — keep, Endless-specific
drop b519d6a9 assistant: add API to show/hide the forward button — independently implemented upstream as 2ed5e1b
pick f0f380d5 eos-test-mode: add eos-test-mode script — keep, Endless-specific
pick 5f30a7f6 page-util: Add API to read the EOS image version — keep, Endless-specific
pick 0d582ed6 endless-eula: Add endless eula page — keep, Endless-specific
drop 1298d81d gnome-initial-setup: don't display privacy page — dropped in favour of adding it to our vendor.conf file
pick 11fcd647 display: Add a ""Display"" page to the FBE — keep; pulled in commit 00081c434c78205fedf0c0b36fa5d775cf7d496d from gnome-control-center; g-c-c files are otherwise unchanged upstream
pick bbb1d968 keyboard: introduce detector — keep, Endless-specific and I don’t have the time to upstream it right now
pick 9d17b6ee input-chooser: sort default layout before others — keep; could be dropped in future if we updated cc-input-chooser.c
pick e1c40eed input-chooser: consider only language or country layouts non-extra — keep; could be dropped in future if we updated cc-input-chooser.c
pick 6c7bb941 input-chooser: Always show the selected layout — keep; could be dropped in future if we updated cc-input-chooser.c
pick af846422 keyboard: add us/us+intl default layouts as fallback — keep; could be dropped in future if we updated cc-input-chooser.c
pick 75eaeb3c live-chooser: add the Live Chooser page — keep, Endless-specific
pick cc48bbc3 summary: show a different message on live sessions — keep, Endless-specific
pick 1fe97a96 Allow pages to specify a GtkAccelGroup — keep, Endless-specific
pick dceddecc factory test mode: implement the factory dialog — keep, Endless-specific; note significantly reworked to drop the barcode, as per https://phabricator.endlessm.com/T20124; and to use g_get_os_info()
pick 8685d26d language-chooser: make it more clear for the users — keep; could be dropped in future if we updated cc-language-chooser.c
pick a5aed058 timezone: set default 12h/24h from locale — keep; could potentially be reworked and upstreamed as https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/47#note_583999, but I don’t have time right now
pick ac330a78 Bring back the welcome message/logo — keep, Endless-specific
drop 0f3de193 goa: reorder accounts — rationale for this on https://phabricator.endlessm.com/T17486 no longer really applies: Facebook is not really important any more
pick 30d74b91 account-local: add toggle for passwordless accounts — keep, Endless-specific
fixup 4f618ec6 fixup! account-local: add toggle for passwordless accounts — squashed
fixup af40c727 fixup! account-local: add toggle for passwordless accounts — squashed
fixup 3fbb910c fixup! account-local: add toggle for passwordless accounts — squashed
pick 4836cb70 account,password: Hide password page for passwordless account — keep, Endless-specific
pick c2de4441 keyboard: manually pass locale to gkbd-keyboard-display — keep; could be dropped in future if we updated cc-input-chooser.c
pick 8979720e input-chooser: allow CcInputChooser to expand — keep; could be dropped in future if we updated cc-input-chooser.c
pick f7c6bf56 driver: Inhibit the idle state — keep; could potentially be dropped if we worked on https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/issues/11, but I don’t have time for that right now
pick 88527b40 language: allow to specify initial languages from vendor.conf — keep; could be upstreamed except it’s a modification to a file copied in from g-c-c so depends on https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/issues/68
drop 3f447d29 driver: Add ""Store Demo"" — dropping demo mode as per https://phabricator.endlessm.com/T30173#840626
drop 988bbc6e copy-worker: Copy, as opposed to moving files — dropping demo mode as per https://phabricator.endlessm.com/T30173#840626; attempted to upstream as https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/94 but upstream decided not to
pick a4715c3b language: make sure initial language is always at the top — keep; could be dropped in future if we updated cc-language-chooser.c
pick be2ea651 driver: detect whether live media is DVD — keep, Endless-specific
pick ec6b1e25 live-chooser: swap USB/DVD assets as needed — keep, Endless-specific
drop 41963b9b endless-eula: Create, but don't show, EULA in store demo mode — dropping demo mode as per https://phabricator.endlessm.com/T30173#840626
drop 4744029e language: Change the title to ""Welcome to Store Demo"" in store demo mode — dropping demo mode as per https://phabricator.endlessm.com/T30173#840626
drop 83458d2c language: add a button to enter store demo mode on first page — dropping demo mode as per https://phabricator.endlessm.com/T30173#840626
pick b2c87d35 Don't run gnome-initial-setup for existing users — keep; could probably be upstreamed as vendor config, but I have enough vendor config changes pending upstream for now
drop 238a6810 demo: Reset tracking-id and report a metric when we enable metrics — dropping demo mode as per https://phabricator.endlessm.com/T30173#840626
pick b2fd683c passwordPage: make latin kbd layout (en) available for password entries — keep, but currently won’t work until https://phabricator.endlessm.com/T30649 is fixed
drop 4f523c79 Add powerMenu to initial-setup shell mode — reverted by commit 1041f40
pick eaa6aa87 Launch eos-installer on eosinstaller images — keep, Endless-specific
pick 792e0096 language: check {unattended,install}.ini on eosinstaller images — keep, Endless-specific
pick bf7a157a page-util: adopt logic to launch eos-installer — keep, Endless-specific
pick 521dc3c0 password: Reset the password page whenever the password page gets hidden — keep, Endless-specific until “account-local: add toggle for passwordless accounts” is upstreamed
pick 6d3f4db2 network: Update the description for WiFi — keep; upstreamed as https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/95
pick 2d932003 site: add page to track site-specific details for deployments — keep, Endless-specific; note: modified to drop demo mode support
pick 03d81387 account: Check configuration to hide password switch if needed — keep, Endless-specific until “account-local: add toggle for passwordless accounts” is upstreamed
pick 708ddf57 timezone: Hide when automatically detected — keep; could be upstreamed but not today
drop 256b0c09 account: Use control-center setting to override faces — upstreamed as 4c02071
drop c6735cf6 fixup! account: Use control-center setting to override faces — upstreamed as 4c02071
pick c8d81d89 driver: Make height 768 the threshold for ""small screens"" — keep; upstreamed as https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/96
pick c0ffe73a Change generated avatar for empty name — keep, Endless-specific
pick 080f24f0 account: Add 'suggested-action' style to photo button — keep; upstreamed as https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/97
pick b513739f driver: Add resource base path — keep, pending upstreaming at https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/43
pick a566f521 password: Add eye icons to toggle password visibility — keep, pending upstreaming at https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/43
fixup 42d8201d fixup! password: Add eye icons to toggle password visibility — squashed
pick 3b5a1148 Add darker border to generated avatar — keep; upstreamed as https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/99
pick ed975d15 Configuration for Transifex — keep, Endless-specific
pick 5822fc07 Allow gnome-initial-setup user to run eos-write-location — keep, Endless-specific
pick dbdf291f driver: detect when in live mode with persistence — keep, Endless-specific
pick 9d027625 summary: show a different message on persistent live sessions — keep, Endless-specific
pick e29f48d9 Show all pages in persistent live mode — keep, Endless-specific
pick a30b8604 live-chooser: don't create live user account when in persistent live mode — keep, Endless-specific
drop 735f6826 Limit names to 80 bytes to prevent adduser() failure — squashed into “account-local: limit full name to 80 characters”
pick 680d5986 account: Make admin account usable in case of errors — keep, Endless-specific
drop d288c872 driver: Don't crash when saving parental controls — upstreamed as bd2cf34
drop 49a6b048 driver: Allow setting parent password twice — upstreamed as bd2cf34
pick 67acc01e eos: Report metrics from parental controls page — keep, Endless-specific
fixup b8c78cbc fixup! eos: Report metrics from parental controls page — squashed
drop bb4f8269 Add translation support for several new languages — translations will be re-done after rebase
drop ae24e403 (Re)generate .po files — translations will be re-done after rebase
drop 8293c71d Rebase downstream translations — translations will be re-done after rebase
drop 166038c2 Pull translations from Transifex — translations will be re-done after rebase
drop c5d6d8eb New translations from Transifex — translations will be re-done after rebase
drop eb1876e7 New translations from Transifex — translations will be re-done after rebase
drop dc35ea48 New translations from Transifex — translations will be re-done after rebase
drop 1041f40f Revert ""Add powerMenu to initial-setup shell mode"" — reverts an earlier commit
pick 34ad7874 data: Enable panel extension in initial-setup session — keep, Endless-specific","pick 9d17b6e input-chooser: sort default layout before others — keep; could be dropped in future if we updated cc-input-chooser.c
pick e1c40ee input-chooser: consider only language or country layouts non-extra — keep; could be dropped in future if we updated cc-input-chooser.c
pick 6c7bb94 input-chooser: Always show the selected layout — keep; could be dropped in future if we updated cc-input-chooser.c
pick af84642 keyboard: add us/us+intl default layouts as fallback — keep; could be dropped in future if we updated cc-input-chooser.c

Might be worth adding a note to one or all of the commit messages with a bit more specificity than this (I'm not sure what you mean). And similarly for the other notes that say ""if we updated "", not sure what you mean.

pick dceddec factory test mode: implement the factory dialog — keep, Endless-specific; note significantly reworked to drop the barcode, as per https://phabricator.endlessm.com/T20124; and to use g_get_os_info()

Could make use of g_auto/g_autofree in gis_page_util_show_factory_dialog().

drop 0f3de19 goa: reorder accounts — rationale for this on https://phabricator.endlessm.com/T17486 no longer really applies: Facebook is not really important any more

This commit doesn't seem to have been dropped.

pick 30d74b9 account-local: add toggle for passwordless accounts — keep, Endless-specific

The docs for GtkCheckButton/GtkToggleButton seem to say you should connect to the toggled signal but I can see how notify::active would work, so perhaps this is fine.

pick 4836cb7 account,password: Hide password page for passwordless account — keep, Endless-specific

Shouldn't the if (priv->parent_mode) part of this check be upstream and independent of this commit?

pick c2de444 keyboard: manually pass locale to gkbd-keyboard-display — keep; could be dropped in future if we updated cc-input-chooser.c

Could get rid of some goto statements if you want

pick b513739 driver: Add resource base path — keep, pending upstreaming at https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/43

You could add that to the commit message.

pick 680d598 account: Make admin account usable in case of errors — keep, Endless-specific

This is already upstream and the commit you have just adds the same lines that are already a few lines above.
(Sorry for reviewing code here rather than in the ""Files Changed"" part of the UI, but I am afraid to do it there because GitHub loses such comments if a force push happens.)",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,317,2020-08-17T14:40:37Z,2020-09-09T15:22:45Z,2020-09-09T15:22:53Z,MERGED,True,0,0,0,https://github.com/pwithnall,T30173 Rebase on 3.37.92,0,[],https://github.com/endlessm/gnome-initial-setup/pull/317,https://github.com/pwithnall,5,https://github.com/endlessm/gnome-initial-setup/pull/317#issuecomment-688785424,"This does most of the work for https://phabricator.endlessm.com/T30173, but isn’t actually the final rebase on 3.38.0 because that hasn’t been released yet.
Notable things to point out: demo mode has been dropped (as per https://phabricator.endlessm.com/T30173#840626), and the barcode has been dropped from the factory dialogue (as per https://phabricator.endlessm.com/T20124). Various smaller patches have been submitted upstream.
Packaging changes are in #318.
Here’s what happened to all the commits (oldest first), as a result of git rebase -i upstream/3.37.91:

drop 9378ab08 Allow to reorder pages from the vendor configuration file — never used as per https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/48#note_677130
pick a0576771 copypasta code: Use icon name instead of stock icon — keep, can’t currently be upstreamed due to being blocked on https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/issues/68
pick ab42158f copypasta code: Use GTask in UmRealmManager — keep, can’t currently be upstreamed due to being blocked on https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/issues/68
pick 7f2bc934 Allow initial setup to switch metrics on and off — keep, Endless-specific
drop 2fab2b48 summary: do not play welcome tour — dropped in favour of https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/92, plus addition of run_welcome_tour=false to debian/vendor.conf
pick 615a973f Add product_serial.conf file — keep, Endless-specific
pick 598105db account-local: limit full name to 80 characters — keep, Endless-specific, and I don’t have the time to work through https://phabricator.endlessm.com/T25444 right now
pick 1ab4607e account-local: Hide username — keep, Endless-specific for now
pick e1d80c6d account-local: create a shared user account — keep, Endless-specific for now
pick 23aff0a8 um-utils: consider ""shared"" username to be in use — keep, Endless-specific for now
pick 40fa4f60 main,summary: skip initial setup entirely for shared account — keep, Endless-specific for now
pick c3915a4f account-local: username suggestions — keep, but I have no idea what this is for and have not found time to investigate
pick 36376a2c password: Show the last character when entering the password — keep, blocked on fixing https://phabricator.endlessm.com/T27358
pick 89cd30ea password: Add password reminder — keep; upstreamed as https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/issues/56
pick 27c9370e Add gis_pkexec() helper function — keep, Endless-specific
pick de77e190 driver: track whether the current session is a live boot — keep, Endless-specific
pick efc5cf35 pages: Don't show some pages on live sessions — keep, Endless-specific
drop b519d6a9 assistant: add API to show/hide the forward button — independently implemented upstream as 2ed5e1b
pick f0f380d5 eos-test-mode: add eos-test-mode script — keep, Endless-specific
pick 5f30a7f6 page-util: Add API to read the EOS image version — keep, Endless-specific
pick 0d582ed6 endless-eula: Add endless eula page — keep, Endless-specific
drop 1298d81d gnome-initial-setup: don't display privacy page — dropped in favour of adding it to our vendor.conf file
pick 11fcd647 display: Add a ""Display"" page to the FBE — keep; pulled in commit 00081c434c78205fedf0c0b36fa5d775cf7d496d from gnome-control-center; g-c-c files are otherwise unchanged upstream
pick bbb1d968 keyboard: introduce detector — keep, Endless-specific and I don’t have the time to upstream it right now
pick 9d17b6ee input-chooser: sort default layout before others — keep; could be dropped in future if we updated cc-input-chooser.c
pick e1c40eed input-chooser: consider only language or country layouts non-extra — keep; could be dropped in future if we updated cc-input-chooser.c
pick 6c7bb941 input-chooser: Always show the selected layout — keep; could be dropped in future if we updated cc-input-chooser.c
pick af846422 keyboard: add us/us+intl default layouts as fallback — keep; could be dropped in future if we updated cc-input-chooser.c
pick 75eaeb3c live-chooser: add the Live Chooser page — keep, Endless-specific
pick cc48bbc3 summary: show a different message on live sessions — keep, Endless-specific
pick 1fe97a96 Allow pages to specify a GtkAccelGroup — keep, Endless-specific
pick dceddecc factory test mode: implement the factory dialog — keep, Endless-specific; note significantly reworked to drop the barcode, as per https://phabricator.endlessm.com/T20124; and to use g_get_os_info()
pick 8685d26d language-chooser: make it more clear for the users — keep; could be dropped in future if we updated cc-language-chooser.c
pick a5aed058 timezone: set default 12h/24h from locale — keep; could potentially be reworked and upstreamed as https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/47#note_583999, but I don’t have time right now
pick ac330a78 Bring back the welcome message/logo — keep, Endless-specific
drop 0f3de193 goa: reorder accounts — rationale for this on https://phabricator.endlessm.com/T17486 no longer really applies: Facebook is not really important any more
pick 30d74b91 account-local: add toggle for passwordless accounts — keep, Endless-specific
fixup 4f618ec6 fixup! account-local: add toggle for passwordless accounts — squashed
fixup af40c727 fixup! account-local: add toggle for passwordless accounts — squashed
fixup 3fbb910c fixup! account-local: add toggle for passwordless accounts — squashed
pick 4836cb70 account,password: Hide password page for passwordless account — keep, Endless-specific
pick c2de4441 keyboard: manually pass locale to gkbd-keyboard-display — keep; could be dropped in future if we updated cc-input-chooser.c
pick 8979720e input-chooser: allow CcInputChooser to expand — keep; could be dropped in future if we updated cc-input-chooser.c
pick f7c6bf56 driver: Inhibit the idle state — keep; could potentially be dropped if we worked on https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/issues/11, but I don’t have time for that right now
pick 88527b40 language: allow to specify initial languages from vendor.conf — keep; could be upstreamed except it’s a modification to a file copied in from g-c-c so depends on https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/issues/68
drop 3f447d29 driver: Add ""Store Demo"" — dropping demo mode as per https://phabricator.endlessm.com/T30173#840626
drop 988bbc6e copy-worker: Copy, as opposed to moving files — dropping demo mode as per https://phabricator.endlessm.com/T30173#840626; attempted to upstream as https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/94 but upstream decided not to
pick a4715c3b language: make sure initial language is always at the top — keep; could be dropped in future if we updated cc-language-chooser.c
pick be2ea651 driver: detect whether live media is DVD — keep, Endless-specific
pick ec6b1e25 live-chooser: swap USB/DVD assets as needed — keep, Endless-specific
drop 41963b9b endless-eula: Create, but don't show, EULA in store demo mode — dropping demo mode as per https://phabricator.endlessm.com/T30173#840626
drop 4744029e language: Change the title to ""Welcome to Store Demo"" in store demo mode — dropping demo mode as per https://phabricator.endlessm.com/T30173#840626
drop 83458d2c language: add a button to enter store demo mode on first page — dropping demo mode as per https://phabricator.endlessm.com/T30173#840626
pick b2c87d35 Don't run gnome-initial-setup for existing users — keep; could probably be upstreamed as vendor config, but I have enough vendor config changes pending upstream for now
drop 238a6810 demo: Reset tracking-id and report a metric when we enable metrics — dropping demo mode as per https://phabricator.endlessm.com/T30173#840626
pick b2fd683c passwordPage: make latin kbd layout (en) available for password entries — keep, but currently won’t work until https://phabricator.endlessm.com/T30649 is fixed
drop 4f523c79 Add powerMenu to initial-setup shell mode — reverted by commit 1041f40
pick eaa6aa87 Launch eos-installer on eosinstaller images — keep, Endless-specific
pick 792e0096 language: check {unattended,install}.ini on eosinstaller images — keep, Endless-specific
pick bf7a157a page-util: adopt logic to launch eos-installer — keep, Endless-specific
pick 521dc3c0 password: Reset the password page whenever the password page gets hidden — keep, Endless-specific until “account-local: add toggle for passwordless accounts” is upstreamed
pick 6d3f4db2 network: Update the description for WiFi — keep; upstreamed as https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/95
pick 2d932003 site: add page to track site-specific details for deployments — keep, Endless-specific; note: modified to drop demo mode support
pick 03d81387 account: Check configuration to hide password switch if needed — keep, Endless-specific until “account-local: add toggle for passwordless accounts” is upstreamed
pick 708ddf57 timezone: Hide when automatically detected — keep; could be upstreamed but not today
drop 256b0c09 account: Use control-center setting to override faces — upstreamed as 4c02071
drop c6735cf6 fixup! account: Use control-center setting to override faces — upstreamed as 4c02071
pick c8d81d89 driver: Make height 768 the threshold for ""small screens"" — keep; upstreamed as https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/96
pick c0ffe73a Change generated avatar for empty name — keep, Endless-specific
pick 080f24f0 account: Add 'suggested-action' style to photo button — keep; upstreamed as https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/97
pick b513739f driver: Add resource base path — keep, pending upstreaming at https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/43
pick a566f521 password: Add eye icons to toggle password visibility — keep, pending upstreaming at https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/43
fixup 42d8201d fixup! password: Add eye icons to toggle password visibility — squashed
pick 3b5a1148 Add darker border to generated avatar — keep; upstreamed as https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/99
pick ed975d15 Configuration for Transifex — keep, Endless-specific
pick 5822fc07 Allow gnome-initial-setup user to run eos-write-location — keep, Endless-specific
pick dbdf291f driver: detect when in live mode with persistence — keep, Endless-specific
pick 9d027625 summary: show a different message on persistent live sessions — keep, Endless-specific
pick e29f48d9 Show all pages in persistent live mode — keep, Endless-specific
pick a30b8604 live-chooser: don't create live user account when in persistent live mode — keep, Endless-specific
drop 735f6826 Limit names to 80 bytes to prevent adduser() failure — squashed into “account-local: limit full name to 80 characters”
pick 680d5986 account: Make admin account usable in case of errors — keep, Endless-specific
drop d288c872 driver: Don't crash when saving parental controls — upstreamed as bd2cf34
drop 49a6b048 driver: Allow setting parent password twice — upstreamed as bd2cf34
pick 67acc01e eos: Report metrics from parental controls page — keep, Endless-specific
fixup b8c78cbc fixup! eos: Report metrics from parental controls page — squashed
drop bb4f8269 Add translation support for several new languages — translations will be re-done after rebase
drop ae24e403 (Re)generate .po files — translations will be re-done after rebase
drop 8293c71d Rebase downstream translations — translations will be re-done after rebase
drop 166038c2 Pull translations from Transifex — translations will be re-done after rebase
drop c5d6d8eb New translations from Transifex — translations will be re-done after rebase
drop eb1876e7 New translations from Transifex — translations will be re-done after rebase
drop dc35ea48 New translations from Transifex — translations will be re-done after rebase
drop 1041f40f Revert ""Add powerMenu to initial-setup shell mode"" — reverts an earlier commit
pick 34ad7874 data: Enable panel extension in initial-setup session — keep, Endless-specific","I rebased again on 3.37.92.


pick 9d17b6e input-chooser: sort default layout before others — keep; could be dropped in future if we updated cc-input-chooser.c
pick e1c40ee input-chooser: consider only language or country layouts non-extra — keep; could be dropped in future if we updated cc-input-chooser.c
pick 6c7bb94 input-chooser: Always show the selected layout — keep; could be dropped in future if we updated cc-input-chooser.c
pick af84642 keyboard: add us/us+intl default layouts as fallback — keep; could be dropped in future if we updated cc-input-chooser.c

Might be worth adding a note to one or all of the commit messages with a bit more specificity than this (I'm not sure what you mean). And similarly for the other notes that say ""if we updated "", not sure what you mean.

cc-language-chooser and cc-input-chooser are copy/paste code from gnome-control-center which has diverged over a long time. It’s a long-standing issue with gnome-initial-setup (upstream and downstream) that this code should be shared. Nobody has found time to fix it all up.


pick dceddec factory test mode: implement the factory dialog — keep, Endless-specific; note significantly reworked to drop the barcode, as per https://phabricator.endlessm.com/T20124; and to use g_get_os_info()

Could make use of g_auto/g_autofree in gis_page_util_show_factory_dialog().

Well outside the scope of a rebase, but I’ve made a few improvements here.


drop 0f3de19 goa: reorder accounts — rationale for this on https://phabricator.endlessm.com/T17486 no longer really applies: Facebook is not really important any more

This commit doesn't seem to have been dropped.

Oops, dropped now.


pick 30d74b9 account-local: add toggle for passwordless accounts — keep, Endless-specific

The docs for GtkCheckButton/GtkToggleButton seem to say you should connect to the toggled signal but I can see how notify::active would work, so perhaps this is fine.

I think they are equivalent, and the patch has worked in practice so I only see risk in changing it.


pick 4836cb7 account,password: Hide password page for passwordless account — keep, Endless-specific

Shouldn't the if (priv->parent_mode) part of this check be upstream and independent of this commit?

I don’t think the situation priv->parent_mode && !priv->username can arise upstream — aiui the !priv->username code path is only taken when doing enterprise setups where there’s no local user being created, and parental controls aren’t supported on that code path at all (so you’ll never have priv->parent_mode == TRUE).
It can happen in this downstream patch, though, since that function has been changed to also handle property updates for passwordless accounts, which can be used in conjunction with parental controls.


pick c2de444 keyboard: manually pass locale to gkbd-keyboard-display — keep; could be dropped in future if we updated cc-input-chooser.c

Could get rid of some goto statements if you want

I’d rather not touch+diverge the cc-input-chooser code further from g-c-c.


pick b513739 driver: Add resource base path — keep, pending upstreaming at https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/43

You could add that to the commit message.

Good shout, done.


pick 680d598 account: Make admin account usable in case of errors — keep, Endless-specific

This is already upstream and the commit you have just adds the same lines that are already a few lines above.

Huh, interesting that git rebase didn’t pick that up as a conflict. Dropped.

(Sorry for reviewing code here rather than in the ""Files Changed"" part of the UI, but I am afraid to do it there because GitHub loses such comments if a force push happens.)

👍 Thanks!",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,318,2020-08-17T14:43:41Z,2020-09-09T15:22:45Z,2020-09-09T15:22:54Z,MERGED,True,0,0,0,https://github.com/pwithnall,T30173 Rebase on 3.37.92 (packaging),0,[],https://github.com/endlessm/gnome-initial-setup/pull/318,https://github.com/pwithnall,1,https://github.com/endlessm/gnome-initial-setup/pull/318,"This does most of the work for https://phabricator.endlessm.com/T30173, but isn’t actually the final rebase on 3.38.0 because that hasn’t been released yet.
This is the result of git rebase -i salsa/debian/master, which currently points to the upload of the new 3.37.91-1 release.
The barcode from the factory dialogue has been dropped (as per https://phabricator.endlessm.com/T20124) so the zint dependency is gone. I haven’t applied debian/patches/revert_gnome_tour.patch because we disable the tour, so using Yelp instead of gnome-tour is irrelevant. Other than that there’s not much to report.
Code changes are in #317.","This does most of the work for https://phabricator.endlessm.com/T30173, but isn’t actually the final rebase on 3.38.0 because that hasn’t been released yet.
This is the result of git rebase -i salsa/debian/master, which currently points to the upload of the new 3.37.91-1 release.
The barcode from the factory dialogue has been dropped (as per https://phabricator.endlessm.com/T20124) so the zint dependency is gone. I haven’t applied debian/patches/revert_gnome_tour.patch because we disable the tour, so using Yelp instead of gnome-tour is irrelevant. Other than that there’s not much to report.
Code changes are in #317.",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,318,2020-08-17T14:43:41Z,2020-09-09T15:22:45Z,2020-09-09T15:22:54Z,MERGED,True,0,0,0,https://github.com/pwithnall,T30173 Rebase on 3.37.92 (packaging),0,[],https://github.com/endlessm/gnome-initial-setup/pull/318,https://github.com/pwithnall,2,https://github.com/endlessm/gnome-initial-setup/pull/318#issuecomment-674945319,"This does most of the work for https://phabricator.endlessm.com/T30173, but isn’t actually the final rebase on 3.38.0 because that hasn’t been released yet.
This is the result of git rebase -i salsa/debian/master, which currently points to the upload of the new 3.37.91-1 release.
The barcode from the factory dialogue has been dropped (as per https://phabricator.endlessm.com/T20124) so the zint dependency is gone. I haven’t applied debian/patches/revert_gnome_tour.patch because we disable the tour, so using Yelp instead of gnome-tour is irrelevant. Other than that there’s not much to report.
Code changes are in #317.","bot, retest this please",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,318,2020-08-17T14:43:41Z,2020-09-09T15:22:45Z,2020-09-09T15:22:54Z,MERGED,True,0,0,0,https://github.com/pwithnall,T30173 Rebase on 3.37.92 (packaging),0,[],https://github.com/endlessm/gnome-initial-setup/pull/318,https://github.com/GeorgesStavracas,3,https://github.com/endlessm/gnome-initial-setup/pull/318#issuecomment-687281977,"This does most of the work for https://phabricator.endlessm.com/T30173, but isn’t actually the final rebase on 3.38.0 because that hasn’t been released yet.
This is the result of git rebase -i salsa/debian/master, which currently points to the upload of the new 3.37.91-1 release.
The barcode from the factory dialogue has been dropped (as per https://phabricator.endlessm.com/T20124) so the zint dependency is gone. I haven’t applied debian/patches/revert_gnome_tour.patch because we disable the tour, so using Yelp instead of gnome-tour is irrelevant. Other than that there’s not much to report.
Code changes are in #317.","It looks like Flatpak needs to be added somewhere (either as libflatpak-dev in the build dependencies, or as libflatpak in the runtime dependencies) since it's a requirement for malcontent.",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,318,2020-08-17T14:43:41Z,2020-09-09T15:22:45Z,2020-09-09T15:22:54Z,MERGED,True,0,0,0,https://github.com/pwithnall,T30173 Rebase on 3.37.92 (packaging),0,[],https://github.com/endlessm/gnome-initial-setup/pull/318,https://github.com/pwithnall,4,https://github.com/endlessm/gnome-initial-setup/pull/318#issuecomment-688174149,"This does most of the work for https://phabricator.endlessm.com/T30173, but isn’t actually the final rebase on 3.38.0 because that hasn’t been released yet.
This is the result of git rebase -i salsa/debian/master, which currently points to the upload of the new 3.37.91-1 release.
The barcode from the factory dialogue has been dropped (as per https://phabricator.endlessm.com/T20124) so the zint dependency is gone. I haven’t applied debian/patches/revert_gnome_tour.patch because we disable the tour, so using Yelp instead of gnome-tour is irrelevant. Other than that there’s not much to report.
Code changes are in #317.","It looks like Flatpak needs to be added somewhere (either as libflatpak-dev in the build dependencies, or as libflatpak in the runtime dependencies) since it's a requirement for malcontent.

What makes you say that? The OBS build succeeded. The pkgconfig(flatpak) dependency in .gitlab-ci.yml is only there because the upstream CI also builds malcontent (rather than installing it as a package), because the version g-i-s depends on isn’t in Fedora yet.",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,318,2020-08-17T14:43:41Z,2020-09-09T15:22:45Z,2020-09-09T15:22:54Z,MERGED,True,0,0,0,https://github.com/pwithnall,T30173 Rebase on 3.37.92 (packaging),0,[],https://github.com/endlessm/gnome-initial-setup/pull/318,https://github.com/GeorgesStavracas,5,https://github.com/endlessm/gnome-initial-setup/pull/318#issuecomment-688275681,"This does most of the work for https://phabricator.endlessm.com/T30173, but isn’t actually the final rebase on 3.38.0 because that hasn’t been released yet.
This is the result of git rebase -i salsa/debian/master, which currently points to the upload of the new 3.37.91-1 release.
The barcode from the factory dialogue has been dropped (as per https://phabricator.endlessm.com/T20124) so the zint dependency is gone. I haven’t applied debian/patches/revert_gnome_tour.patch because we disable the tour, so using Yelp instead of gnome-tour is irrelevant. Other than that there’s not much to report.
Code changes are in #317.","It failed to build in my personal OBS branch, since malcontent depends on flatpak but it isn't installed.

The OBS build succeeded.

That's Jenkins and for some reason it does succeed locally too. I'm not sure what differs but building it on OBS itself fails.",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,318,2020-08-17T14:43:41Z,2020-09-09T15:22:45Z,2020-09-09T15:22:54Z,MERGED,True,0,0,0,https://github.com/pwithnall,T30173 Rebase on 3.37.92 (packaging),0,[],https://github.com/endlessm/gnome-initial-setup/pull/318,https://github.com/pwithnall,6,https://github.com/endlessm/gnome-initial-setup/pull/318#issuecomment-688319706,"This does most of the work for https://phabricator.endlessm.com/T30173, but isn’t actually the final rebase on 3.38.0 because that hasn’t been released yet.
This is the result of git rebase -i salsa/debian/master, which currently points to the upload of the new 3.37.91-1 release.
The barcode from the factory dialogue has been dropped (as per https://phabricator.endlessm.com/T20124) so the zint dependency is gone. I haven’t applied debian/patches/revert_gnome_tour.patch because we disable the tour, so using Yelp instead of gnome-tour is irrelevant. Other than that there’s not much to report.
Code changes are in #317.","Could you point me to a build log please?
Is it failing in the build, or in the unit tests?",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,318,2020-08-17T14:43:41Z,2020-09-09T15:22:45Z,2020-09-09T15:22:54Z,MERGED,True,0,0,0,https://github.com/pwithnall,T30173 Rebase on 3.37.92 (packaging),0,[],https://github.com/endlessm/gnome-initial-setup/pull/318,https://github.com/pwithnall,7,https://github.com/endlessm/gnome-initial-setup/pull/318#issuecomment-688787263,"This does most of the work for https://phabricator.endlessm.com/T30173, but isn’t actually the final rebase on 3.38.0 because that hasn’t been released yet.
This is the result of git rebase -i salsa/debian/master, which currently points to the upload of the new 3.37.91-1 release.
The barcode from the factory dialogue has been dropped (as per https://phabricator.endlessm.com/T20124) so the zint dependency is gone. I haven’t applied debian/patches/revert_gnome_tour.patch because we disable the tour, so using Yelp instead of gnome-tour is irrelevant. Other than that there’s not much to report.
Code changes are in #317.",Pushed a trivial update to increment the version number since I updated #317 to rebase on 3.37.92 rather than 3.37.91.,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,318,2020-08-17T14:43:41Z,2020-09-09T15:22:45Z,2020-09-09T15:22:54Z,MERGED,True,0,0,0,https://github.com/pwithnall,T30173 Rebase on 3.37.92 (packaging),0,[],https://github.com/endlessm/gnome-initial-setup/pull/318,https://github.com/mwleeds,8,https://github.com/endlessm/gnome-initial-setup/pull/318#issuecomment-689100067,"This does most of the work for https://phabricator.endlessm.com/T30173, but isn’t actually the final rebase on 3.38.0 because that hasn’t been released yet.
This is the result of git rebase -i salsa/debian/master, which currently points to the upload of the new 3.37.91-1 release.
The barcode from the factory dialogue has been dropped (as per https://phabricator.endlessm.com/T20124) so the zint dependency is gone. I haven’t applied debian/patches/revert_gnome_tour.patch because we disable the tour, so using Yelp instead of gnome-tour is irrelevant. Other than that there’s not much to report.
Code changes are in #317.","I haven’t applied debian/patches/revert_gnome_tour.patch because we disable the tour, so using Yelp instead of gnome-tour is irrelevant. Other than that there’s not much to report.

Shouldn't we drop it from debian/patches/series then? Since, as you say, we don't need it, and also since my understanding is we want all patches on the code branch and not the packaging branch, even if they come from Debian's packaging.",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,318,2020-08-17T14:43:41Z,2020-09-09T15:22:45Z,2020-09-09T15:22:54Z,MERGED,True,0,0,0,https://github.com/pwithnall,T30173 Rebase on 3.37.92 (packaging),0,[],https://github.com/endlessm/gnome-initial-setup/pull/318,https://github.com/pwithnall,9,https://github.com/endlessm/gnome-initial-setup/pull/318#issuecomment-689425129,"This does most of the work for https://phabricator.endlessm.com/T30173, but isn’t actually the final rebase on 3.38.0 because that hasn’t been released yet.
This is the result of git rebase -i salsa/debian/master, which currently points to the upload of the new 3.37.91-1 release.
The barcode from the factory dialogue has been dropped (as per https://phabricator.endlessm.com/T20124) so the zint dependency is gone. I haven’t applied debian/patches/revert_gnome_tour.patch because we disable the tour, so using Yelp instead of gnome-tour is irrelevant. Other than that there’s not much to report.
Code changes are in #317.","Shouldn't we drop it from debian/patches/series then? Since, as you say, we don't need it, and also since my understanding is we want all patches on the code branch and not the packaging branch, even if they come from Debian's packaging.

I think that would add extra maintenance overhead (divergence in d/p/series) for no benefit (our build system completely ignores d/p/series, so it’s not currently causing a problem).",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,319,2020-09-10T12:40:29Z,2020-09-10T13:10:31Z,2020-09-10T13:10:38Z,MERGED,True,10,2,3,https://github.com/pwithnall,debian: Change malcontent recommends to malcontent-data,1,[],https://github.com/endlessm/gnome-initial-setup/pull/319,https://github.com/pwithnall,1,https://github.com/endlessm/gnome-initial-setup/pull/319,"This accounts for differences in package naming between Endless and
Debian; this can be dropped when T30746 is fixed (see also T30173).
Signed-off-by: Philip Withnall withnall@endlessm.com
https://phabricator.endlessm.com/T30173","This accounts for differences in package naming between Endless and
Debian; this can be dropped when T30746 is fixed (see also T30173).
Signed-off-by: Philip Withnall withnall@endlessm.com
https://phabricator.endlessm.com/T30173",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,320,2020-09-11T13:36:36Z,2020-09-14T12:06:07Z,2020-09-14T12:06:10Z,MERGED,True,37,27,3,https://github.com/pwithnall,T30173 Misc use-after-free fixes,7,[],https://github.com/endlessm/gnome-initial-setup/pull/320,https://github.com/pwithnall,1,https://github.com/endlessm/gnome-initial-setup/pull/320,"These won’t fix T30173 but make debugging it a little less noisy.
All upstream in https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/103 except the UmRealmManager fixes which fix a bug introduced in our downstream commit “copypasta code: Use GTask in UmRealmManager”.","These won’t fix T30173 but make debugging it a little less noisy.
All upstream in https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/103 except the UmRealmManager fixes which fix a bug introduced in our downstream commit “copypasta code: Use GTask in UmRealmManager”.",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,320,2020-09-11T13:36:36Z,2020-09-14T12:06:07Z,2020-09-14T12:06:10Z,MERGED,True,37,27,3,https://github.com/pwithnall,T30173 Misc use-after-free fixes,7,[],https://github.com/endlessm/gnome-initial-setup/pull/320,https://github.com/pwithnall,2,https://github.com/endlessm/gnome-initial-setup/pull/320#issuecomment-692009304,"These won’t fix T30173 but make debugging it a little less noisy.
All upstream in https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/103 except the UmRealmManager fixes which fix a bug introduced in our downstream commit “copypasta code: Use GTask in UmRealmManager”.",Merged upstream: https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/103#note_c1c16af5b1aa0dfe9896ddc4ef6e83a36a0d361b,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,321,2020-09-11T13:39:55Z,2020-09-11T15:10:28Z,2020-09-11T15:10:32Z,CLOSED,False,10,0,2,https://github.com/pwithnall,debian: Disable Cheese webcam support to avoid a pipewire crash,1,[],https://github.com/endlessm/gnome-initial-setup/pull/321,https://github.com/pwithnall,1,https://github.com/endlessm/gnome-initial-setup/pull/321,"This can be re-enabled once the upstream pipewire bug is fixed:
https://gitlab.freedesktop.org/pipewire/pipewire/-/issues/286
Signed-off-by: Philip Withnall withnall@endlessm.com
https://phabricator.endlessm.com/T30173","This can be re-enabled once the upstream pipewire bug is fixed:
https://gitlab.freedesktop.org/pipewire/pipewire/-/issues/286
Signed-off-by: Philip Withnall withnall@endlessm.com
https://phabricator.endlessm.com/T30173",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,321,2020-09-11T13:39:55Z,2020-09-11T15:10:28Z,2020-09-11T15:10:32Z,CLOSED,False,10,0,2,https://github.com/pwithnall,debian: Disable Cheese webcam support to avoid a pipewire crash,1,[],https://github.com/endlessm/gnome-initial-setup/pull/321,https://github.com/pwithnall,2,https://github.com/endlessm/gnome-initial-setup/pull/321#issuecomment-691137442,"This can be re-enabled once the upstream pipewire bug is fixed:
https://gitlab.freedesktop.org/pipewire/pipewire/-/issues/286
Signed-off-by: Philip Withnall withnall@endlessm.com
https://phabricator.endlessm.com/T30173","Actually, maybe don’t merge this: Wim has just fixed the pipewire issue upstream, so I’ll try backporting that patch first.",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,321,2020-09-11T13:39:55Z,2020-09-11T15:10:28Z,2020-09-11T15:10:32Z,CLOSED,False,10,0,2,https://github.com/pwithnall,debian: Disable Cheese webcam support to avoid a pipewire crash,1,[],https://github.com/endlessm/gnome-initial-setup/pull/321,https://github.com/pwithnall,3,https://github.com/endlessm/gnome-initial-setup/pull/321#issuecomment-691152744,"This can be re-enabled once the upstream pipewire bug is fixed:
https://gitlab.freedesktop.org/pipewire/pipewire/-/issues/286
Signed-off-by: Philip Withnall withnall@endlessm.com
https://phabricator.endlessm.com/T30173","Yes, https://obs-master.endlessm-sf.com/request/show/21661 actually fixes the crash, so this workaround is not needed.",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,322,2020-09-17T16:05:07Z,2020-09-18T08:42:52Z,2020-09-18T08:42:58Z,MERGED,True,0,0,0,https://github.com/pwithnall,Rebase on 3.38.0,0,[],https://github.com/endlessm/gnome-initial-setup/pull/322,https://github.com/pwithnall,1,https://github.com/endlessm/gnome-initial-setup/pull/322,"Trivial rebase from 3.37.92 to 3.38.0, bringing in a couple of updated translations and some (irrelevant to us) CI changes.
https://phabricator.endlessm.com/T30173","Trivial rebase from 3.37.92 to 3.38.0, bringing in a couple of updated translations and some (irrelevant to us) CI changes.
https://phabricator.endlessm.com/T30173",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,323,2020-09-17T16:05:21Z,2020-09-18T08:42:51Z,2020-09-18T08:43:07Z,MERGED,True,7,0,1,https://github.com/pwithnall,debian: Rebase on 3.38.0 upstream release,1,[],https://github.com/endlessm/gnome-initial-setup/pull/323,https://github.com/pwithnall,1,https://github.com/endlessm/gnome-initial-setup/pull/323,"Signed-off-by: Philip Withnall pwithnall@endlessos.org
https://phabricator.endlessm.com/T30173","Signed-off-by: Philip Withnall pwithnall@endlessos.org
https://phabricator.endlessm.com/T30173",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,324,2020-10-13T10:58:13Z,2020-10-13T11:40:14Z,2020-10-13T11:40:40Z,MERGED,True,0,30,3,https://github.com/wjt,"Revert ""account: Check configuration to hide password switch if needed""",1,[],https://github.com/endlessm/gnome-initial-setup/pull/324,https://github.com/wjt,1,https://github.com/endlessm/gnome-initial-setup/pull/324,"This reverts commit 2c7590a.
This was used only by Hack, and we are removing that configuration (https://github.com/endlessm/eos-image-builder/pull/899).
https://phabricator.endlessm.com/T29974","This reverts commit 2c7590a.
This was used only by Hack, and we are removing that configuration (https://github.com/endlessm/eos-image-builder/pull/899).
https://phabricator.endlessm.com/T29974",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,324,2020-10-13T10:58:13Z,2020-10-13T11:40:14Z,2020-10-13T11:40:40Z,MERGED,True,0,30,3,https://github.com/wjt,"Revert ""account: Check configuration to hide password switch if needed""",1,[],https://github.com/endlessm/gnome-initial-setup/pull/324,https://github.com/wjt,2,https://github.com/endlessm/gnome-initial-setup/pull/324#issuecomment-707662813,"This reverts commit 2c7590a.
This was used only by Hack, and we are removing that configuration (https://github.com/endlessm/eos-image-builder/pull/899).
https://phabricator.endlessm.com/T29974",Completely untested but the patch reverted cleanly.,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,325,2020-10-22T17:19:33Z,2020-10-22T17:34:23Z,2020-10-23T09:29:48Z,MERGED,True,1,0,1,https://github.com/pwithnall,fixup! account-local: add toggle for passwordless accounts,1,[],https://github.com/endlessm/gnome-initial-setup/pull/325,https://github.com/pwithnall,1,https://github.com/endlessm/gnome-initial-setup/pull/325,"The visible property was missing from the original commit as it was
designed to be set dynamically — but the code (and need) to do that has
now been removed.
This should be squashed when we next rebase.
https://phabricator.endlessm.com/T31001","The visible property was missing from the original commit as it was
designed to be set dynamically — but the code (and need) to do that has
now been removed.
This should be squashed when we next rebase.
https://phabricator.endlessm.com/T31001",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,326,2020-11-14T14:22:33Z,2020-11-14T15:16:45Z,2020-11-14T15:16:49Z,MERGED,True,1,1,1,https://github.com/pwithnall,"Revert ""driver: Make height 768 the threshold for ""small screens""""",1,[],https://github.com/endlessm/gnome-initial-setup/pull/326,https://github.com/pwithnall,1,https://github.com/endlessm/gnome-initial-setup/pull/326,"This reverts commit 7eb144d.
It was decided upstream
(https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/96)
that this patch actually makes things worse for those devices, as
without this patch small screen mode would be triggered on the devices
in question, which should make the g-i-s pages scrollable.
See https://phabricator.endlessm.com/T27792","This reverts commit 7eb144d.
It was decided upstream
(https://gitlab.gnome.org/GNOME/gnome-initial-setup/-/merge_requests/96)
that this patch actually makes things worse for those devices, as
without this patch small screen mode would be triggered on the devices
in question, which should make the g-i-s pages scrollable.
See https://phabricator.endlessm.com/T27792",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,327,2021-06-02T02:40:40Z,2021-06-02T10:44:35Z,2021-06-02T10:45:12Z,MERGED,True,0,321,5,https://github.com/GeorgesStavracas,"Remove eos-transient-setup(,.service.in)",1,[],https://github.com/endlessm/gnome-initial-setup/pull/327,https://github.com/GeorgesStavracas,1,https://github.com/endlessm/gnome-initial-setup/pull/327,"It now lives in eos-boot-helper.
This is a partial revert of bbed083, and must be
squashed to it during the next rebase.
https://phabricator.endlessm.com/T32043","It now lives in eos-boot-helper.
This is a partial revert of bbed083, and must be
squashed to it during the next rebase.
https://phabricator.endlessm.com/T32043",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,328,2021-06-14T16:26:09Z,2021-06-16T19:56:32Z,2021-06-16T19:56:35Z,MERGED,True,1,128,6,https://github.com/GeorgesStavracas,Move eos-test-mode to eos-boot-helper,1,[],https://github.com/endlessm/gnome-initial-setup/pull/328,https://github.com/GeorgesStavracas,1,https://github.com/endlessm/gnome-initial-setup/pull/328,"The script itself now lives in eos-boot-helper, which
installs it at a predefined location (/usr/sbin) and
thus we don't need to carry it anymore.
This must be squashed with a4201ba during the next
rebase.
https://phabricator.endlessm.com/T32045","The script itself now lives in eos-boot-helper, which
installs it at a predefined location (/usr/sbin) and
thus we don't need to carry it anymore.
This must be squashed with a4201ba during the next
rebase.
https://phabricator.endlessm.com/T32045",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,329,2021-06-17T19:15:41Z,2021-07-14T02:08:49Z,2021-07-14T02:09:28Z,MERGED,True,0,0,0,https://github.com/GeorgesStavracas,T31523,0,[],https://github.com/endlessm/gnome-initial-setup/pull/329,https://github.com/GeorgesStavracas,1,https://github.com/endlessm/gnome-initial-setup/pull/329,"List of changes:
Pick
pick b84993a copypasta code: Use icon name instead of stock icon
pick 1400863 copypasta code: Use GTask in UmRealmManager
pick cc21eca Allow initial setup to switch metrics on and off
pick 53cc821 Add product_serial.conf file
pick 98bbd53 account-local: limit full name to 80 characters
pick 4164916 account-local: username suggestions
pick fd0f931 password: Show the last character when entering the password
pick 88ea3ad password: Add password reminder
pick 0de4666 Add gis_pkexec() helper function
pick 66e8047 driver: track whether the current session is a live boot
pick 38c1380 pages: Don't show some pages on live sessions
pick dc2b89c page-util: Add API to read the EOS image version
pick d7854a3 endless-eula: Add endless eula page
pick d11b697 input-chooser: sort default layout before others
pick ca0d2e3 input-chooser: consider only language or country layouts non-extra
pick 37af78d input-chooser: Always show the selected layout
pick 3f80a7a keyboard: add us/us+intl default layouts as fallback
pick bbed083 live-chooser: add the Live Chooser page
pick 73ab76f summary: show a different message on live sessions
pick b934b34 Allow pages to specify a GtkAccelGroup
pick fdd9d81 factory test mode: implement the factory dialog
pick 7059356 language-chooser: make it more clear for the users
pick 8b39bd2 timezone: set default 12h/24h from locale
pick 7a5f6e5 Bring back the welcome message/logo
pick c794ef3 account-local: add toggle for passwordless accounts
pick 674d9e6 account,password: Hide password page for passwordless account
pick 6c167ea keyboard: manually pass locale to gkbd-keyboard-display
pick 292d6b9 input-chooser: allow CcInputChooser to expand
pick c746855 driver: Inhibit the idle state
pick 60b3d20 language: allow to specify initial languages from vendor.conf
pick 485bdd7 language: make sure initial language is always at the top
pick 5961b90 passwordPage: make latin kbd layout (en) available for password entries
pick 4f08d3e Launch eos-installer on eosinstaller images
pick 90c0a97 language: check {unattended,install}.ini on eosinstaller images
pick 90188e0 page-util: adopt logic to launch eos-installer
pick 8cefcd9 password: Reset the password page whenever the password page gets hidden
pick 435da6a site: add page to track site-specific details for deployments
pick d4637f1 timezone: Hide when automatically detected
pick 70c3efe Change generated avatar for empty name
pick ec9923f account: Add 'suggested-action' style to photo button
pick 35ee92f driver: Add resource base path
pick ebdd508 password: Add eye icons to toggle password visibility
pick ff960d6 Add darker border to generated avatar
pick e9bd644 Allow gnome-initial-setup user to run eos-write-location
pick c489d1e driver: detect when in live mode with persistence
pick 75ff8cb summary: show a different message on persistent live sessions
pick 7686cea Show all pages in persistent live mode
pick 3797760 live-chooser: don't create live user account when in persistent live mode
pick 72adf97 eos: Report metrics from parental controls page
pick 888a25c data: Enable panel extension in initial-setup session
pick 60b3b6b Configuration for Transifex
Drop
pick 90f6c8e account-local: create a shared user account
pick eadd615 um-utils: consider ""shared"" username to be in use
pick 629089d main,summary: skip initial setup entirely for shared account

Dropping shared accounts (https://phabricator.endlessm.com/T31492)

pick de5d7fb Don't run gnome-initial-setup for existing users

This is already done a few lines below

pick 6f2f058 display: Add a ""Display"" page to the FBE

Overscan compensation page

pick 2c7590a account: Check configuration to hide password switch if needed

pick bb8da50 Revert ""account: Check configuration to hide password switch if needed""

pick 7eb144d driver: Make height 768 the threshold for ""small screens""

pick bdf904a Revert ""driver: Make height 768 the threshold for ""small screens""""

pick 264c682 keyboard: introduce detector

""Keyboard layout detector""

pick f1479e3 account-local: Hide username

""Patches to hide username field""

pick e71b852 driver: detect whether live media is DVD
pick 5ae1d0c live-chooser: swap USB/DVD assets as needed

""DVD stuff""

pick a6a1f3c New translations from Transifex
pick f7c70a5 New translations from Transifex
pick 4b52041 New translations from Transifex
pick 0a29c41 Revert ""New translations from Transifex""
pick 5d70f0e Revert ""New translations from Transifex""
pick 16abf4d Revert ""New translations from Transifex""
pick 61be50b Add translation support for several new languages
pick 4316108 Updates from Transifex
pick 83637c2 Commit translations for new languages
pick 5368aa3 New translations from Transifex

""All Transifex patches except ""Configuration for Transifex""""

Squash & Fixup
fixup 165ebac fixup! account-local: add toggle for passwordless accounts
squash eae07b6 Remove eos-transient-setup(,.service.in)

Squashed with bbed083 live-chooser: add the Live Chooser page

squash a4201ba eos-test-mode: add eos-test-mode script
squash da45ea9 Move eos-test-mode to eos-boot-helper

Squashed with fdd9d81 factory test mode: implement the factory dialog

https://phabricator.endlessm.com/T31523","List of changes:
Pick
pick b84993a copypasta code: Use icon name instead of stock icon
pick 1400863 copypasta code: Use GTask in UmRealmManager
pick cc21eca Allow initial setup to switch metrics on and off
pick 53cc821 Add product_serial.conf file
pick 98bbd53 account-local: limit full name to 80 characters
pick 4164916 account-local: username suggestions
pick fd0f931 password: Show the last character when entering the password
pick 88ea3ad password: Add password reminder
pick 0de4666 Add gis_pkexec() helper function
pick 66e8047 driver: track whether the current session is a live boot
pick 38c1380 pages: Don't show some pages on live sessions
pick dc2b89c page-util: Add API to read the EOS image version
pick d7854a3 endless-eula: Add endless eula page
pick d11b697 input-chooser: sort default layout before others
pick ca0d2e3 input-chooser: consider only language or country layouts non-extra
pick 37af78d input-chooser: Always show the selected layout
pick 3f80a7a keyboard: add us/us+intl default layouts as fallback
pick bbed083 live-chooser: add the Live Chooser page
pick 73ab76f summary: show a different message on live sessions
pick b934b34 Allow pages to specify a GtkAccelGroup
pick fdd9d81 factory test mode: implement the factory dialog
pick 7059356 language-chooser: make it more clear for the users
pick 8b39bd2 timezone: set default 12h/24h from locale
pick 7a5f6e5 Bring back the welcome message/logo
pick c794ef3 account-local: add toggle for passwordless accounts
pick 674d9e6 account,password: Hide password page for passwordless account
pick 6c167ea keyboard: manually pass locale to gkbd-keyboard-display
pick 292d6b9 input-chooser: allow CcInputChooser to expand
pick c746855 driver: Inhibit the idle state
pick 60b3d20 language: allow to specify initial languages from vendor.conf
pick 485bdd7 language: make sure initial language is always at the top
pick 5961b90 passwordPage: make latin kbd layout (en) available for password entries
pick 4f08d3e Launch eos-installer on eosinstaller images
pick 90c0a97 language: check {unattended,install}.ini on eosinstaller images
pick 90188e0 page-util: adopt logic to launch eos-installer
pick 8cefcd9 password: Reset the password page whenever the password page gets hidden
pick 435da6a site: add page to track site-specific details for deployments
pick d4637f1 timezone: Hide when automatically detected
pick 70c3efe Change generated avatar for empty name
pick ec9923f account: Add 'suggested-action' style to photo button
pick 35ee92f driver: Add resource base path
pick ebdd508 password: Add eye icons to toggle password visibility
pick ff960d6 Add darker border to generated avatar
pick e9bd644 Allow gnome-initial-setup user to run eos-write-location
pick c489d1e driver: detect when in live mode with persistence
pick 75ff8cb summary: show a different message on persistent live sessions
pick 7686cea Show all pages in persistent live mode
pick 3797760 live-chooser: don't create live user account when in persistent live mode
pick 72adf97 eos: Report metrics from parental controls page
pick 888a25c data: Enable panel extension in initial-setup session
pick 60b3b6b Configuration for Transifex
Drop
pick 90f6c8e account-local: create a shared user account
pick eadd615 um-utils: consider ""shared"" username to be in use
pick 629089d main,summary: skip initial setup entirely for shared account

Dropping shared accounts (https://phabricator.endlessm.com/T31492)

pick de5d7fb Don't run gnome-initial-setup for existing users

This is already done a few lines below

pick 6f2f058 display: Add a ""Display"" page to the FBE

Overscan compensation page

pick 2c7590a account: Check configuration to hide password switch if needed

pick bb8da50 Revert ""account: Check configuration to hide password switch if needed""

pick 7eb144d driver: Make height 768 the threshold for ""small screens""

pick bdf904a Revert ""driver: Make height 768 the threshold for ""small screens""""

pick 264c682 keyboard: introduce detector

""Keyboard layout detector""

pick f1479e3 account-local: Hide username

""Patches to hide username field""

pick e71b852 driver: detect whether live media is DVD
pick 5ae1d0c live-chooser: swap USB/DVD assets as needed

""DVD stuff""

pick a6a1f3c New translations from Transifex
pick f7c70a5 New translations from Transifex
pick 4b52041 New translations from Transifex
pick 0a29c41 Revert ""New translations from Transifex""
pick 5d70f0e Revert ""New translations from Transifex""
pick 16abf4d Revert ""New translations from Transifex""
pick 61be50b Add translation support for several new languages
pick 4316108 Updates from Transifex
pick 83637c2 Commit translations for new languages
pick 5368aa3 New translations from Transifex

""All Transifex patches except ""Configuration for Transifex""""

Squash & Fixup
fixup 165ebac fixup! account-local: add toggle for passwordless accounts
squash eae07b6 Remove eos-transient-setup(,.service.in)

Squashed with bbed083 live-chooser: add the Live Chooser page

squash a4201ba eos-test-mode: add eos-test-mode script
squash da45ea9 Move eos-test-mode to eos-boot-helper

Squashed with fdd9d81 factory test mode: implement the factory dialog

https://phabricator.endlessm.com/T31523",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,330,2021-06-17T19:20:35Z,2021-07-14T02:08:49Z,2021-07-14T02:08:53Z,MERGED,True,6,0,1,https://github.com/GeorgesStavracas,T31523 (Debian),1,[],https://github.com/endlessm/gnome-initial-setup/pull/330,https://github.com/GeorgesStavracas,1,https://github.com/endlessm/gnome-initial-setup/pull/330,"No Debian packaging changes were needed.
https://phabricator.endlessm.com/T31523","No Debian packaging changes were needed.
https://phabricator.endlessm.com/T31523",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,330,2021-06-17T19:20:35Z,2021-07-14T02:08:49Z,2021-07-14T02:08:53Z,MERGED,True,6,0,1,https://github.com/GeorgesStavracas,T31523 (Debian),1,[],https://github.com/endlessm/gnome-initial-setup/pull/330,https://github.com/GeorgesStavracas,2,https://github.com/endlessm/gnome-initial-setup/pull/330#issuecomment-863504730,"No Debian packaging changes were needed.
https://phabricator.endlessm.com/T31523",retest this please,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,331,2021-07-23T19:49:00Z,2021-07-27T22:09:00Z,2021-07-27T22:09:03Z,MERGED,True,2,10,3,https://github.com/dbnicholson,"Revert ""debian: Change malcontent recommends to malcontent-data""",1,[],https://github.com/endlessm/gnome-initial-setup/pull/331,https://github.com/dbnicholson,1,https://github.com/endlessm/gnome-initial-setup/pull/331,"This reverts commit 3b0f7ff. We're now
addressing the packaging delta with Debian and malcontent-data will no
longer exist.
https://phabricator.endlessm.com/T30746","This reverts commit 3b0f7ff. We're now
addressing the packaging delta with Debian and malcontent-data will no
longer exist.
https://phabricator.endlessm.com/T30746",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,331,2021-07-23T19:49:00Z,2021-07-27T22:09:00Z,2021-07-27T22:09:03Z,MERGED,True,2,10,3,https://github.com/dbnicholson,"Revert ""debian: Change malcontent recommends to malcontent-data""",1,[],https://github.com/endlessm/gnome-initial-setup/pull/331,https://github.com/dbnicholson,2,https://github.com/endlessm/gnome-initial-setup/pull/331#issuecomment-885879299,"This reverts commit 3b0f7ff. We're now
addressing the packaging delta with Debian and malcontent-data will no
longer exist.
https://phabricator.endlessm.com/T30746","Marking this a draft as it shouldn't be merged until our updated malcontent has landed.
As for the content of this PR, this changes it back to the way debian has it, but that would add a dependency on the malcontent CLI, which isn't needed. If we adopt the changes I'm proposing in https://salsa.debian.org/freedesktop-team/malcontent/-/merge_requests/3, then this recommendation could be removed. On Endless we don't install Recommends, so the point is kind of moot, though.",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,331,2021-07-23T19:49:00Z,2021-07-27T22:09:00Z,2021-07-27T22:09:03Z,MERGED,True,2,10,3,https://github.com/dbnicholson,"Revert ""debian: Change malcontent recommends to malcontent-data""",1,[],https://github.com/endlessm/gnome-initial-setup/pull/331,https://github.com/dbnicholson,3,https://github.com/endlessm/gnome-initial-setup/pull/331#issuecomment-887867220,"This reverts commit 3b0f7ff. We're now
addressing the packaging delta with Debian and malcontent-data will no
longer exist.
https://phabricator.endlessm.com/T30746",Malcontent has rebuilt with the updated packaging. Merging.,True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,332,2022-02-08T15:01:59Z,2022-02-08T15:26:07Z,2022-02-08T15:26:07Z,MERGED,True,0,0,0,https://github.com/wjt,Update to 41.2,0,[],https://github.com/endlessm/gnome-initial-setup/pull/332,https://github.com/wjt,1,https://github.com/endlessm/gnome-initial-setup/pull/332,"@starnight's branch, in PR form to leave review comments & test CI.
https://phabricator.endlessm.com/T32958","@starnight's branch, in PR form to leave review comments & test CI.
https://phabricator.endlessm.com/T32958",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,333,2022-02-08T15:03:32Z,2022-02-08T15:27:26Z,2022-02-08T15:27:30Z,MERGED,True,0,0,0,https://github.com/wjt,Update to 41.2-2 packaging,0,[],https://github.com/endlessm/gnome-initial-setup/pull/333,https://github.com/wjt,1,https://github.com/endlessm/gnome-initial-setup/pull/333,"@starnight's branch, in  PR form to leave review comments & test CI.
https://phabricator.endlessm.com/T32958","@starnight's branch, in  PR form to leave review comments & test CI.
https://phabricator.endlessm.com/T32958",True,{}
endlessm/gnome-initial-setup,https://github.com/endlessm/gnome-initial-setup,334,2022-02-09T09:39:11Z,2022-02-09T09:39:37Z,2022-02-09T09:39:39Z,MERGED,True,0,0,0,https://github.com/starnight,dummy: Trigger CI rebuild 41.2-2,1,[],https://github.com/endlessm/gnome-initial-setup/pull/334,https://github.com/starnight,1,https://github.com/endlessm/gnome-initial-setup/pull/334,"Trigger the CI pull gnome-initial-setup again to have correct debian
packagin for fixing gnome-session fails to launch gnome-initial-setup.
This commit shall be dropped for next rebase.
https://phabricator.endlessm.com/T32958#926084","Trigger the CI pull gnome-initial-setup again to have correct debian
packagin for fixing gnome-session fails to launch gnome-initial-setup.
This commit shall be dropped for next rebase.
https://phabricator.endlessm.com/T32958#926084",True,{}
