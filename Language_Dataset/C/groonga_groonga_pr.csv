groonga/groonga,https://github.com/groonga/groonga,498,2016-03-08T10:32:11Z,2016-03-09T00:38:00Z,2016-03-09T00:41:35Z,MERGED,True,287,64,12,https://github.com/kou,hash: support 4GiB over total key size,1,[],https://github.com/groonga/groonga/pull/498,https://github.com/kou,1,https://github.com/groonga/groonga/pull/498,"If you add KEY_LARGE flag to table:
table_create Users TABLE_HASH_KEY|KEY_LARGE ShortText

you can put many keys to the table. By default, 4GiB is the max total
key size. With KEY_LARGE flag, 1TiB is the max total key size. Because
4KiB * (2 ** 28 - 1) < 1TiB. ((2 ** 28 - 1) is the max number of records
in a table.)
It doesn't break backward compatibility. You can use the existing
database without dump and restore.","If you add KEY_LARGE flag to table:
table_create Users TABLE_HASH_KEY|KEY_LARGE ShortText

you can put many keys to the table. By default, 4GiB is the max total
key size. With KEY_LARGE flag, 1TiB is the max total key size. Because
4KiB * (2 ** 28 - 1) < 1TiB. ((2 ** 28 - 1) is the max number of records
in a table.)
It doesn't break backward compatibility. You can use the existing
database without dump and restore.",True,"{'THUMBS_UP': ['https://github.com/shinichi-takayanagi'], 'HOORAY': ['https://github.com/shinichi-takayanagi']}"
groonga/groonga,https://github.com/groonga/groonga,498,2016-03-08T10:32:11Z,2016-03-09T00:38:00Z,2016-03-09T00:41:35Z,MERGED,True,287,64,12,https://github.com/kou,hash: support 4GiB over total key size,1,[],https://github.com/groonga/groonga/pull/498,https://github.com/kou,2,https://github.com/groonga/groonga/pull/498#issuecomment-193723180,"If you add KEY_LARGE flag to table:
table_create Users TABLE_HASH_KEY|KEY_LARGE ShortText

you can put many keys to the table. By default, 4GiB is the max total
key size. With KEY_LARGE flag, 1TiB is the max total key size. Because
4KiB * (2 ** 28 - 1) < 1TiB. ((2 ** 28 - 1) is the max number of records
in a table.)
It doesn't break backward compatibility. You can use the existing
database without dump and restore.","森さん、KEY_LARGEを指定したらハッシュテーブルの最大総キーサイズを増やすようにするやつを実装してみました。
以前相談していたときは、KEY_LARGEを指定したら最大総キーサイズと1レコードあたりの最大キーサイズを増やすという話だったのですが、最大キーサイズの方はShortTextとかで指定するようになっているため、KEY_LARGEと連動するようにするのはやめました。これは、別途Textを指定できるようにするのがいいんじゃないかと思っています。
他は以前相談した時と同じです。

デフォルトは現状通りでKEY_LARGEを指定した時だけ挙動が変わる。
データベースの互換性を壊さない。既存のデータベースを開けるし、KEY_LARGEを使っていなければ古いGroongaで新しいデータベースも開ける。

KEY_LARGEを指定した時の最大総キーサイズは1TiBにしました。4KiBのレコードを2**28-1（最大レコード数）分入れても1GiB弱になるからです。",True,{}
groonga/groonga,https://github.com/groonga/groonga,498,2016-03-08T10:32:11Z,2016-03-09T00:38:00Z,2016-03-09T00:41:35Z,MERGED,True,287,64,12,https://github.com/kou,hash: support 4GiB over total key size,1,[],https://github.com/groonga/groonga/pull/498,https://github.com/kou,3,https://github.com/groonga/groonga/pull/498#issuecomment-193726342,"If you add KEY_LARGE flag to table:
table_create Users TABLE_HASH_KEY|KEY_LARGE ShortText

you can put many keys to the table. By default, 4GiB is the max total
key size. With KEY_LARGE flag, 1TiB is the max total key size. Because
4KiB * (2 ** 28 - 1) < 1TiB. ((2 ** 28 - 1) is the max number of records
in a table.)
It doesn't break backward compatibility. You can use the existing
database without dump and restore.","こんなスクリプトでテストしていました。1TiBも余っているディスクがなかったので限界を確認できてはいませんが、4GiBの壁は超えられることを確認しています。
require ""groonga""
require ""fileutils""

FileUtils.rm_rf(""/tmp/db"")
FileUtils.mkdir_p(""/tmp/db"")

Groonga::Database.create(:path => ""/tmp/db/db"")

Groonga::Context.default.send(""table_create texts TABLE_HASH_KEY|KEY_LARGE ShortText"")

texts = Groonga[""texts""]

first_key = ""a"" * (4 * 1024)
key = first_key.dup
n_records = (1024 * 1024)
n_records = 2 ** 27
# n_records = 1047552
# n_records = 523778
n_records.times do |i|
  texts.add(key)
  key.succ!
  unless Groonga::Record.new(texts, 1).key == first_key
    p i
    p Groonga::Record.new(texts, 1).key
    break
  end
end",True,{}
groonga/groonga,https://github.com/groonga/groonga,501,2016-03-22T10:00:27Z,2016-03-23T01:15:15Z,2016-03-23T03:03:03Z,CLOSED,False,81,79,11,https://github.com/piroor,"Describe ""table_remove"" with more meaningful examples",4,[],https://github.com/groonga/groonga/pull/501,https://github.com/piroor,1,https://github.com/groonga/groonga/pull/501,"テーブル同士の依存関係の所の説明があまりに分かりにくいと感じたので、具体的な名前を使ってリライトしてみました。
どうでしょうか。
日本語の翻訳の方も更新したかったのですが、Ubuntu 14.04LTSではPythonが古くてSphinx 1.3以降を入れる時点で躓いてしまったので、断念してとりあえず英語版のみの更新となっています。","テーブル同士の依存関係の所の説明があまりに分かりにくいと感じたので、具体的な名前を使ってリライトしてみました。
どうでしょうか。
日本語の翻訳の方も更新したかったのですが、Ubuntu 14.04LTSではPythonが古くてSphinx 1.3以降を入れる時点で躓いてしまったので、断念してとりあえず英語版のみの更新となっています。",True,{}
groonga/groonga,https://github.com/groonga/groonga,501,2016-03-22T10:00:27Z,2016-03-23T01:15:15Z,2016-03-23T03:03:03Z,CLOSED,False,81,79,11,https://github.com/piroor,"Describe ""table_remove"" with more meaningful examples",4,[],https://github.com/groonga/groonga/pull/501,https://github.com/kou,2,https://github.com/groonga/groonga/pull/501#issuecomment-199758729,"テーブル同士の依存関係の所の説明があまりに分かりにくいと感じたので、具体的な名前を使ってリライトしてみました。
どうでしょうか。
日本語の翻訳の方も更新したかったのですが、Ubuntu 14.04LTSではPythonが古くてSphinx 1.3以降を入れる時点で躓いてしまったので、断念してとりあえず英語版のみの更新となっています。",申し訳ないんですが、私の英語力だとポイントがわからないので、日本語でポイントを教えてもらえないでしょうか？automaticですか？,True,{}
groonga/groonga,https://github.com/groonga/groonga,501,2016-03-22T10:00:27Z,2016-03-23T01:15:15Z,2016-03-23T03:03:03Z,CLOSED,False,81,79,11,https://github.com/piroor,"Describe ""table_remove"" with more meaningful examples",4,[],https://github.com/groonga/groonga/pull/501,https://github.com/kou,3,https://github.com/groonga/groonga/pull/501#issuecomment-199763817,"テーブル同士の依存関係の所の説明があまりに分かりにくいと感じたので、具体的な名前を使ってリライトしてみました。
どうでしょうか。
日本語の翻訳の方も更新したかったのですが、Ubuntu 14.04LTSではPythonが古くてSphinx 1.3以降を入れる時点で躓いてしまったので、断念してとりあえず英語版のみの更新となっています。",実際に「あまりに」と思ったのだとは思いますが、「あまりに」だとなにが伝わらない説明だったのかわからない（ですし、苦手な英語でがんばって書いた方としては「はぁ」という気分になる）ので、具体的になにが伝わらないのかを教えてもらえると助かります。,True,{}
groonga/groonga,https://github.com/groonga/groonga,501,2016-03-22T10:00:27Z,2016-03-23T01:15:15Z,2016-03-23T03:03:03Z,CLOSED,False,81,79,11,https://github.com/piroor,"Describe ""table_remove"" with more meaningful examples",4,[],https://github.com/groonga/groonga/pull/501,https://github.com/piroor,4,https://github.com/groonga/groonga/pull/501#issuecomment-200044236,"テーブル同士の依存関係の所の説明があまりに分かりにくいと感じたので、具体的な名前を使ってリライトしてみました。
どうでしょうか。
日本語の翻訳の方も更新したかったのですが、Ubuntu 14.04LTSではPythonが古くてSphinx 1.3以降を入れる時点で躓いてしまったので、断念してとりあえず英語版のみの更新となっています。","「あまりに」は、例の中の抽象的なテーブル名や説明文中の抽象的な単語から具体的な様子を想像するのが自分には大変だったということで出た言葉でした。なので、プルリクエストの変更では、抽象的な単語をなるべく使わないようにするとか、抽象的な説明が必要なときは具体例での言い換えとセットにするという感じのことを意識したつもりでした。
Kouhei Sutou notifications@github.com:

実際に「あまりに」と思ったのだとは思いますが、「あまりに」だとなにが伝わらない説明だったのかわからない（ですし、苦手な英語でがんばって書いた方としては「はぁ」という気分になる）ので、具体的になにが伝わらないのかを教えてもらえると助かります。
—
You are receiving this because you authored the thread.
Reply to this email directly or view it on GitHub￼",True,{}
groonga/groonga,https://github.com/groonga/groonga,501,2016-03-22T10:00:27Z,2016-03-23T01:15:15Z,2016-03-23T03:03:03Z,CLOSED,False,81,79,11,https://github.com/piroor,"Describe ""table_remove"" with more meaningful examples",4,[],https://github.com/groonga/groonga/pull/501,https://github.com/piroor,5,https://github.com/groonga/groonga/pull/501#issuecomment-200104893,"テーブル同士の依存関係の所の説明があまりに分かりにくいと感じたので、具体的な名前を使ってリライトしてみました。
どうでしょうか。
日本語の翻訳の方も更新したかったのですが、Ubuntu 14.04LTSではPythonが古くてSphinx 1.3以降を入れる時点で躓いてしまったので、断念してとりあえず英語版のみの更新となっています。",コミットが混ざったのもあるので1回出直します。,True,{}
groonga/groonga,https://github.com/groonga/groonga,501,2016-03-22T10:00:27Z,2016-03-23T01:15:15Z,2016-03-23T03:03:03Z,CLOSED,False,81,79,11,https://github.com/piroor,"Describe ""table_remove"" with more meaningful examples",4,[],https://github.com/groonga/groonga/pull/501,https://github.com/cosmo0920,6,https://github.com/groonga/groonga/pull/501#issuecomment-200137966,"テーブル同士の依存関係の所の説明があまりに分かりにくいと感じたので、具体的な名前を使ってリライトしてみました。
どうでしょうか。
日本語の翻訳の方も更新したかったのですが、Ubuntu 14.04LTSではPythonが古くてSphinx 1.3以降を入れる時点で躓いてしまったので、断念してとりあえず英語版のみの更新となっています。",英語で気になったところにコメントを付けておきました。次回のプルリクエストの時に参考にしてください。,True,{}
groonga/groonga,https://github.com/groonga/groonga,502,2016-03-23T06:39:49Z,2016-03-25T02:56:26Z,2016-03-25T02:56:26Z,CLOSED,False,146,157,11,https://github.com/piroor,Better description about table_remove,13,[],https://github.com/groonga/groonga/pull/502,https://github.com/piroor,1,https://github.com/groonga/groonga/pull/502,"頂いたフィードバックを反映し、翻訳も行いましたので、再提出します。
より具体的な表現やより平易な表現への書き換えを行っています。","頂いたフィードバックを反映し、翻訳も行いましたので、再提出します。
より具体的な表現やより平易な表現への書き換えを行っています。",True,{}
groonga/groonga,https://github.com/groonga/groonga,502,2016-03-23T06:39:49Z,2016-03-25T02:56:26Z,2016-03-25T02:56:26Z,CLOSED,False,146,157,11,https://github.com/piroor,Better description about table_remove,13,[],https://github.com/groonga/groonga/pull/502,https://github.com/kou,2,https://github.com/groonga/groonga/pull/502#issuecomment-200365534,"頂いたフィードバックを反映し、翻訳も行いましたので、再提出します。
より具体的な表現やより平易な表現への書き換えを行っています。","これはもっと細かい変更に分割できないでしょうか？
これ全体でmergeかrejectだったらrejectなんですけど。。。",True,{}
groonga/groonga,https://github.com/groonga/groonga,502,2016-03-23T06:39:49Z,2016-03-25T02:56:26Z,2016-03-25T02:56:26Z,CLOSED,False,146,157,11,https://github.com/piroor,Better description about table_remove,13,[],https://github.com/groonga/groonga/pull/502,https://github.com/piroor,3,https://github.com/groonga/groonga/pull/502#issuecomment-200606148,"頂いたフィードバックを反映し、翻訳も行いましたので、再提出します。
より具体的な表現やより平易な表現への書き換えを行っています。","例に使用されているテーブルの名前の変更に関係する部分と、それ以外の部分、という2つにであれば分けられると思いますが、それ以上の分割はどう分けたらいいのか分からない状態です。
何と何が混ざっている事が問題でしょうか？",True,{}
groonga/groonga,https://github.com/groonga/groonga,502,2016-03-23T06:39:49Z,2016-03-25T02:56:26Z,2016-03-25T02:56:26Z,CLOSED,False,146,157,11,https://github.com/piroor,Better description about table_remove,13,[],https://github.com/groonga/groonga/pull/502,https://github.com/kou,4,https://github.com/groonga/groonga/pull/502#issuecomment-200847700,"頂いたフィードバックを反映し、翻訳も行いましたので、再提出します。
より具体的な表現やより平易な表現への書き換えを行っています。","自分がこの部分だけマージされても困る、と思っている粒度でいいです。
たとえば、AとBとCにわけられるけど、Aだけマージされて、BとCはリジェクトされるんだったらAはマージされないほうがいい、AとBがマージされてCがリジェクトならAとBはマージされた状態でもOK、だったらABとCの2つにわけるので十分です。
ただ、今月はもう私は余裕がないので対応するのは来月以降になります。なので、分割は急いでいません。",True,{}
groonga/groonga,https://github.com/groonga/groonga,502,2016-03-23T06:39:49Z,2016-03-25T02:56:26Z,2016-03-25T02:56:26Z,CLOSED,False,146,157,11,https://github.com/piroor,Better description about table_remove,13,[],https://github.com/groonga/groonga/pull/502,https://github.com/piroor,5,https://github.com/groonga/groonga/pull/502#issuecomment-201117341,"頂いたフィードバックを反映し、翻訳も行いましたので、再提出します。
より具体的な表現やより平易な表現への書き換えを行っています。","分割の趣旨について了解しました。ありがとうございます。
プルリクエストの形をとったのは、以下の2点について合意を得る必要があると思ったからでした。

現在のテーブルの例の名前が、仮に自分にとっては分かりにくいと感じられる物であったとしても、プロジェクト的にはその方向を維持する事が期待されているのかどうか（自分が提案した名前付けが、プロジェクト的に許容範囲内かどうか）
現在の説明文の書き方が、仮に自分にとっては分かりにくいと感じられる物であったとしても、プロジェクト的にはその方向を維持する事が期待されているのかどうか（自分が提案した書き方が、プロジェクト的に許容範囲内かどうか）

両者の変更は影響範囲が一部重なってしまうため、まず判断が容易そうな前者のみで提出して、それがマージされたかどうかの結果が出てから後者を提出しようと思います。",True,{}
groonga/groonga,https://github.com/groonga/groonga,507,2016-03-28T11:08:24Z,2016-03-31T14:31:37Z,2016-03-31T14:31:54Z,CLOSED,False,11,0,2,https://github.com/s-yata,log: fix a crash bug reported in #503,1,[],https://github.com/groonga/groonga/pull/507,https://github.com/s-yata,1,https://github.com/groonga/groonga/pull/507,"Use a critical section object to make backtracing with grn_gctx thread-safe.
Note that the purpose of this commit is to avoid a crash.
Error codes and messages may be broken.","Use a critical section object to make backtracing with grn_gctx thread-safe.
Note that the purpose of this commit is to avoid a crash.
Error codes and messages may be broken.",True,{}
groonga/groonga,https://github.com/groonga/groonga,507,2016-03-28T11:08:24Z,2016-03-31T14:31:37Z,2016-03-31T14:31:54Z,CLOSED,False,11,0,2,https://github.com/s-yata,log: fix a crash bug reported in #503,1,[],https://github.com/groonga/groonga/pull/507,https://github.com/s-yata,2,https://github.com/groonga/groonga/pull/507#issuecomment-202343856,"Use a critical section object to make backtracing with grn_gctx thread-safe.
Note that the purpose of this commit is to avoid a crash.
Error codes and messages may be broken.","#503 で報告されたバグを回避するためのパッチです．
このパッチを適用すれば， grn_gctx を介したバックトレースのログ出力について排他制御をおこなうようになり，ひとまずクラッシュは回避できます．
ただし，この修正では同時に grn_gctx が使われることまでは解決できないため， grn_gctx.rc や grn_gctx.errbuf の内容については保証されません．
複数のスレッドでエラーが頻発すると，出力されるログの内容がおかしくなる可能性があります．",True,{}
groonga/groonga,https://github.com/groonga/groonga,507,2016-03-28T11:08:24Z,2016-03-31T14:31:37Z,2016-03-31T14:31:54Z,CLOSED,False,11,0,2,https://github.com/s-yata,log: fix a crash bug reported in #503,1,[],https://github.com/groonga/groonga/pull/507,https://github.com/kou,3,https://github.com/groonga/groonga/pull/507#issuecomment-202401388,"Use a critical section object to make backtracing with grn_gctx thread-safe.
Note that the purpose of this commit is to avoid a crash.
Error codes and messages may be broken.","うおぉ。これが悪いんですか。
これって、ここでロックを取るよりio.cでgrn_gctxを使っているところでロックを取るほうがよかったりしないですかねぃ。",True,{}
groonga/groonga,https://github.com/groonga/groonga,507,2016-03-28T11:08:24Z,2016-03-31T14:31:37Z,2016-03-31T14:31:54Z,CLOSED,False,11,0,2,https://github.com/s-yata,log: fix a crash bug reported in #503,1,[],https://github.com/groonga/groonga/pull/507,https://github.com/s-yata,4,https://github.com/groonga/groonga/pull/507#issuecomment-202414294,"Use a critical section object to make backtracing with grn_gctx thread-safe.
Note that the purpose of this commit is to avoid a crash.
Error codes and messages may be broken.","バックトレースの格納場所は grn_ctx によって確定するのに， grn_gctx は複数のスレッドから同時に使われるケースがあり，出力の途中でバックトレースの深さやアドレスが書き換えられてクラッシュにつながるみたいです．
grn_gctx は io.c 以外からも使われていて，ところにより排他制御に使っている grn_critical_section が異なったり， grn_glock によるクリティカルセクションの内部でも mmap に grn_gctx が渡されたり，などのややこしい問題があって逃げた結果がこの pull request になります．
できれば，きちんとやりたいですね．",True,{}
groonga/groonga,https://github.com/groonga/groonga,507,2016-03-28T11:08:24Z,2016-03-31T14:31:37Z,2016-03-31T14:31:54Z,CLOSED,False,11,0,2,https://github.com/s-yata,log: fix a crash bug reported in #503,1,[],https://github.com/groonga/groonga/pull/507,https://github.com/kou,5,https://github.com/groonga/groonga/pull/507#issuecomment-202422397,"Use a critical section object to make backtracing with grn_gctx thread-safe.
Note that the purpose of this commit is to avoid a crash.
Error codes and messages may be broken.","io.c以外だとplugin.cとrequest_canceler.cですか。
どっちもプロセス全体で共有しているやつなのでロックしないとダメですねぇ。
plugin.cとrequest_canceler.cはエラーを設定しているところだけgrn_glockでロックをとるといいのかしら。それ以外はいま使っているgrn_critical_sectionで大丈夫。。。かしら。",True,{}
groonga/groonga,https://github.com/groonga/groonga,507,2016-03-28T11:08:24Z,2016-03-31T14:31:37Z,2016-03-31T14:31:54Z,CLOSED,False,11,0,2,https://github.com/s-yata,log: fix a crash bug reported in #503,1,[],https://github.com/groonga/groonga/pull/507,https://github.com/kou,6,https://github.com/groonga/groonga/pull/507#issuecomment-202422635,"Use a critical section object to make backtracing with grn_gctx thread-safe.
Note that the purpose of this commit is to avoid a crash.
Error codes and messages may be broken.",plugin.cとrequest_canceler.cは私がやっておくのでio.cの方はお願いできますか？,True,{}
groonga/groonga,https://github.com/groonga/groonga,507,2016-03-28T11:08:24Z,2016-03-31T14:31:37Z,2016-03-31T14:31:54Z,CLOSED,False,11,0,2,https://github.com/s-yata,log: fix a crash bug reported in #503,1,[],https://github.com/groonga/groonga/pull/507,https://github.com/kou,7,https://github.com/groonga/groonga/pull/507#issuecomment-202643588,"Use a critical section object to make backtracing with grn_gctx thread-safe.
Note that the purpose of this commit is to avoid a crash.
Error codes and messages may be broken.","https://github.com/groonga/groonga/blob/master/lib/request_canceler.c#L62-L73 は中で呼んでいる grn_hash_add() の中でERRが呼ばれる可能性があるから、 grn_the_request_canceler->mutexじゃダメなのか。。。
request_canceler.cは専用のgrn_ctxを作ることにします。",True,{}
groonga/groonga,https://github.com/groonga/groonga,507,2016-03-28T11:08:24Z,2016-03-31T14:31:37Z,2016-03-31T14:31:54Z,CLOSED,False,11,0,2,https://github.com/s-yata,log: fix a crash bug reported in #503,1,[],https://github.com/groonga/groonga/pull/507,https://github.com/kou,8,https://github.com/groonga/groonga/pull/507#issuecomment-202646283,"Use a critical section object to make backtracing with grn_gctx thread-safe.
Note that the purpose of this commit is to avoid a crash.
Error codes and messages may be broken.",request_canceler.cはそうしておいたのでこれで大丈夫なはず。,True,{}
groonga/groonga,https://github.com/groonga/groonga,507,2016-03-28T11:08:24Z,2016-03-31T14:31:37Z,2016-03-31T14:31:54Z,CLOSED,False,11,0,2,https://github.com/s-yata,log: fix a crash bug reported in #503,1,[],https://github.com/groonga/groonga/pull/507,https://github.com/s-yata,9,https://github.com/groonga/groonga/pull/507#issuecomment-202670250,"Use a critical section object to make backtracing with grn_gctx thread-safe.
Note that the purpose of this commit is to avoid a crash.
Error codes and messages may be broken.","単純な参照以外では grn_gctx を同時に使わないという方針でやってみます．
と思ったのですが， GRN_GMALLOC 系列も失敗すると MERR を使うので排他制御が必要ですね．
少しずつ進めましょうか．",True,{}
groonga/groonga,https://github.com/groonga/groonga,507,2016-03-28T11:08:24Z,2016-03-31T14:31:37Z,2016-03-31T14:31:54Z,CLOSED,False,11,0,2,https://github.com/s-yata,log: fix a crash bug reported in #503,1,[],https://github.com/groonga/groonga/pull/507,https://github.com/s-yata,10,https://github.com/groonga/groonga/pull/507#issuecomment-202674325,"Use a critical section object to make backtracing with grn_gctx thread-safe.
Note that the purpose of this commit is to avoid a crash.
Error codes and messages may be broken.","io.c の grn_expire ってどういう関数なのでしょうか…．
どこからも呼び出されていないみたいですし，永久ループになっているように見えます．

  
    
      groonga/lib/io.c
    
    
        Lines 1286 to 1307
      in
      fbe4c72
    
  
  
    

        
          
           uint32_t 
        

        
          
           grn_expire(grn_ctx *ctx, int count_thresh, uint32_t limit) 
        

        
          
           { 
        

        
          
             grn_ctx *c; 
        

        
          
             uint32_t n = 0; 
        

        
          
             CRITICAL_SECTION_ENTER(grn_glock); 
        

        
          
             if (grn_gtick) { 
        

        
          
               for (c = grn_gctx.next;; c = ctx->next) { 
        

        
          
                 if (c == &grn_gctx) { 
        

        
          
                   CRITICAL_SECTION_LEAVE(grn_glock); 
        

        
          
                   n = grn_expire_(ctx, count_thresh, limit); 
        

        
          
                   CRITICAL_SECTION_ENTER(grn_glock); 
        

        
          
                   break; 
        

        
          
                 } 
        

        
          
                 if ((c->seqno & 1) && (c->seqno == c->seqno2)) { break; } 
        

        
          
               } 
        

        
          
             } 
        

        
          
             grn_gtick++; 
        

        
          
             for (c = grn_gctx.next; c != &grn_gctx; c = ctx->next) { c->seqno2 = c->seqno; } 
        

        
          
             CRITICAL_SECTION_LEAVE(grn_glock); 
        

        
          
             return n; 
        

        
          
           }",True,{}
groonga/groonga,https://github.com/groonga/groonga,507,2016-03-28T11:08:24Z,2016-03-31T14:31:37Z,2016-03-31T14:31:54Z,CLOSED,False,11,0,2,https://github.com/s-yata,log: fix a crash bug reported in #503,1,[],https://github.com/groonga/groonga/pull/507,https://github.com/kou,11,https://github.com/groonga/groonga/pull/507#issuecomment-202680197,"Use a critical section object to make backtracing with grn_gctx thread-safe.
Note that the purpose of this commit is to avoid a crash.
Error codes and messages may be broken.","たぶん、実験的に入れたけど使っていない関数だと思います。
たまにあるんですよねぇ。",True,{}
groonga/groonga,https://github.com/groonga/groonga,507,2016-03-28T11:08:24Z,2016-03-31T14:31:37Z,2016-03-31T14:31:54Z,CLOSED,False,11,0,2,https://github.com/s-yata,log: fix a crash bug reported in #503,1,[],https://github.com/groonga/groonga/pull/507,https://github.com/s-yata,12,https://github.com/groonga/groonga/pull/507#issuecomment-202695625,"Use a critical section object to make backtracing with grn_gctx thread-safe.
Note that the purpose of this commit is to avoid a crash.
Error codes and messages may be broken.",grn_expire は 88ce339 で追加されて（7 年前），現在は使われていないようです．,True,{}
groonga/groonga,https://github.com/groonga/groonga,507,2016-03-28T11:08:24Z,2016-03-31T14:31:37Z,2016-03-31T14:31:54Z,CLOSED,False,11,0,2,https://github.com/s-yata,log: fix a crash bug reported in #503,1,[],https://github.com/groonga/groonga/pull/507,https://github.com/s-yata,13,https://github.com/groonga/groonga/pull/507#issuecomment-203277175,"Use a critical section object to make backtracing with grn_gctx thread-safe.
Note that the purpose of this commit is to avoid a crash.
Error codes and messages may be broken.",grn_expire は消してもいいよとのお言葉をいただきました．,True,{}
groonga/groonga,https://github.com/groonga/groonga,507,2016-03-28T11:08:24Z,2016-03-31T14:31:37Z,2016-03-31T14:31:54Z,CLOSED,False,11,0,2,https://github.com/s-yata,log: fix a crash bug reported in #503,1,[],https://github.com/groonga/groonga/pull/507,https://github.com/kou,14,https://github.com/groonga/groonga/pull/507#issuecomment-203317274,"Use a critical section object to make backtracing with grn_gctx thread-safe.
Note that the purpose of this commit is to avoid a crash.
Error codes and messages may be broken.",plugin.cもgrn_gctxを使わないようにしました。,True,{}
groonga/groonga,https://github.com/groonga/groonga,507,2016-03-28T11:08:24Z,2016-03-31T14:31:37Z,2016-03-31T14:31:54Z,CLOSED,False,11,0,2,https://github.com/s-yata,log: fix a crash bug reported in #503,1,[],https://github.com/groonga/groonga/pull/507,https://github.com/s-yata,15,https://github.com/groonga/groonga/pull/507#issuecomment-203323048,"Use a critical section object to make backtracing with grn_gctx thread-safe.
Note that the purpose of this commit is to avoid a crash.
Error codes and messages may be broken.","ありがとうございます．
後程，テストしておきます．",True,{}
groonga/groonga,https://github.com/groonga/groonga,507,2016-03-28T11:08:24Z,2016-03-31T14:31:37Z,2016-03-31T14:31:54Z,CLOSED,False,11,0,2,https://github.com/s-yata,log: fix a crash bug reported in #503,1,[],https://github.com/groonga/groonga/pull/507,https://github.com/s-yata,16,https://github.com/groonga/groonga/pull/507#issuecomment-203370663,"Use a critical section object to make backtracing with grn_gctx thread-safe.
Note that the purpose of this commit is to avoid a crash.
Error codes and messages may be broken.","vm.max_map_count=1000 にして，スレッド数 500 で個別に DB を開いてテーブルを走査するというテストをしてみたところ， segmentation fault が起きてしまいました．
plugin, request_canceler は関係ないので io が怪しいです．",True,{}
groonga/groonga,https://github.com/groonga/groonga,507,2016-03-28T11:08:24Z,2016-03-31T14:31:37Z,2016-03-31T14:31:54Z,CLOSED,False,11,0,2,https://github.com/s-yata,log: fix a crash bug reported in #503,1,[],https://github.com/groonga/groonga/pull/507,https://github.com/s-yata,17,https://github.com/groonga/groonga/pull/507#issuecomment-203376075,"Use a critical section object to make backtracing with grn_gctx thread-safe.
Note that the purpose of this commit is to avoid a crash.
Error codes and messages may be broken.","gdb で見ると以下のようになっていました．
現在の実装では grn_ctx_init してから grn_db_open しています．
grn_ctx_init が成功しているのに ctx->impl == NULL というのは謎です．
Program received signal SIGSEGV, Segmentation fault.
[Switching to Thread 0x7ffe35881700 (LWP 130210)]
0x00007ffff762c88d in grn_ctx_use (ctx=0x7ffe35880db0, db=0x7fffe4273850)
    at ctx.c:2314
2314          ctx->impl->db = db;
(gdb) backtrace
#0  0x00007ffff762c88d in grn_ctx_use (ctx=0x7ffe35880db0, db=0x7fffe4273850)
    at ctx.c:2314
#1  0x00007ffff763b91e in grn_db_open (ctx=0x7ffe35880db0, 
    path=0x401546 ""/tmp/groonga/db"") at db.c:409
#2  0x0000000000400e9e in thread_main (void_arg=0x615cf8) at a.c:23
#3  0x00007ffff73b36aa in start_thread (arg=0x7ffe35881700)
    at pthread_create.c:333
#4  0x00007ffff70e8e9d in clone ()
    at ../sysdeps/unix/sysv/linux/x86_64/clone.S:109
(gdb) p ctx->impl
$1 = (struct _grn_ctx_impl *) 0x0",True,{}
groonga/groonga,https://github.com/groonga/groonga,507,2016-03-28T11:08:24Z,2016-03-31T14:31:37Z,2016-03-31T14:31:54Z,CLOSED,False,11,0,2,https://github.com/s-yata,log: fix a crash bug reported in #503,1,[],https://github.com/groonga/groonga/pull/507,https://github.com/s-yata,18,https://github.com/groonga/groonga/pull/507#issuecomment-203381459,"Use a critical section object to make backtracing with grn_gctx thread-safe.
Note that the purpose of this commit is to avoid a crash.
Error codes and messages may be broken.","grn_gctx を使ったときのエラーは ctx->rc に反映されないため grn_ctx_impl_init が正しくエラーを返せていない，という可能性に思い至りました．
edit: 実際にこのようなケースがあることを確認しました．",True,{}
groonga/groonga,https://github.com/groonga/groonga,507,2016-03-28T11:08:24Z,2016-03-31T14:31:37Z,2016-03-31T14:31:54Z,CLOSED,False,11,0,2,https://github.com/s-yata,log: fix a crash bug reported in #503,1,[],https://github.com/groonga/groonga/pull/507,https://github.com/s-yata,19,https://github.com/groonga/groonga/pull/507#issuecomment-203790136,"Use a critical section object to make backtracing with grn_gctx thread-safe.
Note that the purpose of this commit is to avoid a crash.
Error codes and messages may be broken.","grn_ctx_impl_init 内部の grn_hash_create が失敗していて，そこで ctx->rc は設定されているけれども，終了処理の grn_pat_close でクリアされてしまうようです（マルチスレッドは無関係）．
grn_ctx_init は API_ENTER/RETURN を使っていないからですね．
grn_ctx_init_internal が成功すれば API_ENTER/RETURN を使っても大丈夫だと思うので， grn_ctx_impl_init を API_ENTER/RETURN に入れてみることにします．
edit: 失敗すると grn_ctx_fin も使うので，直接 ctx->seqno++/-- するようにしてみます．",True,{}
groonga/groonga,https://github.com/groonga/groonga,507,2016-03-28T11:08:24Z,2016-03-31T14:31:37Z,2016-03-31T14:31:54Z,CLOSED,False,11,0,2,https://github.com/s-yata,log: fix a crash bug reported in #503,1,[],https://github.com/groonga/groonga/pull/507,https://github.com/s-yata,20,https://github.com/groonga/groonga/pull/507#issuecomment-203966252,"Use a critical section object to make backtracing with grn_gctx thread-safe.
Note that the purpose of this commit is to avoid a crash.
Error codes and messages may be broken.",とりあえず，当初想定していた問題については解決できたみたいなので，こちらは閉じます．,True,{}
groonga/groonga,https://github.com/groonga/groonga,510,2016-03-29T06:40:44Z,,2022-03-15T05:24:16Z,OPEN,False,66,79,12,https://github.com/piroor,doc: Use more meaningful names for example tables and columns,3,[],https://github.com/groonga/groonga/pull/510,https://github.com/piroor,1,https://github.com/groonga/groonga/pull/510,502を分割したものの1つ目です。例のテーブルとカラムの名前が抽象的で、どういう状態なのか想像しにくかったので、実際のユースケースで登場しそうな名前に改めました。,502を分割したものの1つ目です。例のテーブルとカラムの名前が抽象的で、どういう状態なのか想像しにくかったので、実際のユースケースで登場しそうな名前に改めました。,True,{}
groonga/groonga,https://github.com/groonga/groonga,510,2016-03-29T06:40:44Z,,2022-03-15T05:24:16Z,OPEN,False,66,79,12,https://github.com/piroor,doc: Use more meaningful names for example tables and columns,3,[],https://github.com/groonga/groonga/pull/510,https://github.com/kou,2,https://github.com/groonga/groonga/pull/510#issuecomment-205717537,502を分割したものの1つ目です。例のテーブルとカラムの名前が抽象的で、どういう状態なのか想像しにくかったので、実際のユースケースで登場しそうな名前に改めました。,"例のテーブルとカラムの名前が抽象的で、どういう状態なのか想像しにくかったので、実際のユースケースで登場しそうな名前に改めました。

言いたいことはわかりますし、もっといい名前があるといいなぁと私も思っていました。
ただ、「どういう状態か」は今の「Referenced」とかついている方が「想像しなくて」いいのでわかりやすい気がします。
UserとAdminUserは実際に使われそうな名前なのはそうだと思います。ただ、UserとAdminUserを見て参照関係にあると「想像する」のは難しいんじゃないかと思います。私はそれぞれ独立に存在してそうな印象を持ちました。
一方、UserAction.user_idがUserを参照してそうな気はしました。なので、こっちはよいと思います。
ただ、GroongaはIDを参照するというよりはレコードを参照するのでuser_idよりuserの方がでいいと思います。
もう少し言うと、Userを抜いてActionで十分だと思います。
あと、ドキュメントではテーブル名は複数形にしているので全体の統一感は揃えてもらえると助かります。統一されていた方が読む人の負担が少ないだろうからです。",True,{}
groonga/groonga,https://github.com/groonga/groonga,510,2016-03-29T06:40:44Z,,2022-03-15T05:24:16Z,OPEN,False,66,79,12,https://github.com/piroor,doc: Use more meaningful names for example tables and columns,3,[],https://github.com/groonga/groonga/pull/510,https://github.com/piroor,3,https://github.com/groonga/groonga/pull/510#issuecomment-206097338,502を分割したものの1つ目です。例のテーブルとカラムの名前が抽象的で、どういう状態なのか想像しにくかったので、実際のユースケースで登場しそうな名前に改めました。,"レビューありがとうございます。複数形への統一と、テーブルとカラムの名前から冗長な要素を取り除く事については全面的に同意なので、早速反映しました。

ただ、「どういう状態か」は今の「Referenced」とかついている方が「想像しなくて」いいのでわかりやすい気がします。

自分の場合は、現実離れした例である事による理解のしにくさの方が、想像しなくてもよいというメリットを上回っている状態でした。
テーブルの名前で示す事に無理がある（無理にテーブル名でそれを明示しようとして、現実との乖離が激しくなって、それが却って理解を妨げている）という状況だと思えますので、ここはUsers-Adminsのペア（AdminUsersは冗長だったので、こうしようと思っています）という名前付けにしておいて、別途それらの関係を図示するアスキーアートなどを追加するというのが、理解のしやすさという観点からはよりベターな解決ではないかと思いますが、どうでしょうか？
もしこの点に同意いただけるようであれば、これとは別に、図を入れるプルリクエストを作成しようと思っています。",True,{}
groonga/groonga,https://github.com/groonga/groonga,511,2016-03-30T00:55:25Z,2016-03-30T01:04:38Z,2016-03-30T01:21:10Z,MERGED,True,1,1,1,https://github.com/ohkubo,doc ja: fix a typo,1,[],https://github.com/groonga/groonga/pull/511,https://github.com/ohkubo,1,https://github.com/groonga/groonga/pull/511,"明示的にしていする ->
明示的に指定する","明示的にしていする ->
明示的に指定する",True,{}
groonga/groonga,https://github.com/groonga/groonga,511,2016-03-30T00:55:25Z,2016-03-30T01:04:38Z,2016-03-30T01:21:10Z,MERGED,True,1,1,1,https://github.com/ohkubo,doc ja: fix a typo,1,[],https://github.com/groonga/groonga/pull/511,https://github.com/kou,2,https://github.com/groonga/groonga/pull/511#issuecomment-203177595,"明示的にしていする ->
明示的に指定する",ありがとうございます！,True,{}
groonga/groonga,https://github.com/groonga/groonga,518,2016-04-02T22:41:35Z,2016-04-03T02:24:47Z,2016-04-05T01:41:05Z,MERGED,True,509,353,6,https://github.com/naoa,table_tokenize: add output estimate size option,2,[],https://github.com/groonga/groonga/pull/518,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/518,"table_tokenizeコマンドにindex_columnを指定するとii_estimate_sizeを出力してくれるオプションがあるとレアトークンかどうかを判定するのに便利だなぁと思いました。
いかがでしょうか。","table_tokenizeコマンドにindex_columnを指定するとii_estimate_sizeを出力してくれるオプションがあるとレアトークンかどうかを判定するのに便利だなぁと思いました。
いかがでしょうか。",True,{}
groonga/groonga,https://github.com/groonga/groonga,518,2016-04-02T22:41:35Z,2016-04-03T02:24:47Z,2016-04-05T01:41:05Z,MERGED,True,509,353,6,https://github.com/naoa,table_tokenize: add output estimate size option,2,[],https://github.com/groonga/groonga/pull/518,https://github.com/kou,2,https://github.com/groonga/groonga/pull/518#issuecomment-204856062,"table_tokenizeコマンドにindex_columnを指定するとii_estimate_sizeを出力してくれるオプションがあるとレアトークンかどうかを判定するのに便利だなぁと思いました。
いかがでしょうか。",いいと思います！,True,{}
groonga/groonga,https://github.com/groonga/groonga,519,2016-04-03T12:58:45Z,2016-04-04T01:53:37Z,2016-04-05T01:41:03Z,MERGED,True,8,3,1,https://github.com/naoa,Reduce loop for seeking current chunk rid,2,[],https://github.com/groonga/groonga/pull/519,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/519,"レアトークンを含むフレーズの高速化のためのii_cursor_set_minですが、現状、毎回チャンクの先頭からgapを埋めていってスキップできるchunkのridを探しています。
この場合、chunk数が結構大きくなると、逆にこのskipできるチャンクを探す処理の負荷の方が大きくなることが多いようでした。
そこで、grn_ii_cursorにcurrent_chunk previous chunkのridを保存する領域を持たせて毎回トップからスキップできるチャンクを探すのを回避してみました。（もし、current_chunk previous chunkのridをcurrent_chunkとかから計算で求められるなら、それでもよさそうですが、私にはその方法は見つけられませんでした。）
grn_ii_cursorの数ごとにメモリ使用量が4バイトほど増えてしまいますが、トークンごとだと思うので、さほど影響ないのではないかなぁと思っています。
以下は検証結果です。パッチ前だと検索速度が落ちているものでも、ほとんど検索速度が落ちなくなっていることがわかります。



Token:estimate size
N hits
Normal
MIN_ENABLE=1
Normal (Patched)
MIN_ENABLE=1 (Patched)




データベ:378354 ベース:321365
376880
0.6064 sec
0.7316 sec
0.6008 sec
0.6149 sec


レーザー:490506 ー光:132413
153887
0.0993 sec
0.1563 sec
0.1008 sec
0.1020 sec


接続ポ:17690 ポート:750355
13641
0.0356 sec
0.0505 sec
0.0349 sec
0.0352 sec


光ポ:1401 ポート:750355
841
0.0291 sec
0.0133 sec
0.0290 sec
0.0119 sec


詳細な説:8729533 細な説明:8729531
8729531
1.0377 sec
16.0283 sec
1.0549 sec
1.0171 sec


詳細な説:8729533 な説明を:222494
203132
0.1596 sec
0.6413 sec
0.1622 sec
0.1548 sec


詳細な説:8729533 な説明に:70150
63189
0.1434 sec
0.3008 sec
0.1410 sec
0.1339 sec


詳細な説:8729533 な説明が:17471
9264
0.1341 sec
0.1354 sec
0.1357 sec
0.0861 sec


詳細な説:8729533 明をユ:536
10
0.1325 sec
0.0095 sec
0.1326 sec
0.0092 sec



よければ、ご検討お願いいします。","レアトークンを含むフレーズの高速化のためのii_cursor_set_minですが、現状、毎回チャンクの先頭からgapを埋めていってスキップできるchunkのridを探しています。
この場合、chunk数が結構大きくなると、逆にこのskipできるチャンクを探す処理の負荷の方が大きくなることが多いようでした。
そこで、grn_ii_cursorにcurrent_chunk previous chunkのridを保存する領域を持たせて毎回トップからスキップできるチャンクを探すのを回避してみました。（もし、current_chunk previous chunkのridをcurrent_chunkとかから計算で求められるなら、それでもよさそうですが、私にはその方法は見つけられませんでした。）
grn_ii_cursorの数ごとにメモリ使用量が4バイトほど増えてしまいますが、トークンごとだと思うので、さほど影響ないのではないかなぁと思っています。
以下は検証結果です。パッチ前だと検索速度が落ちているものでも、ほとんど検索速度が落ちなくなっていることがわかります。



Token:estimate size
N hits
Normal
MIN_ENABLE=1
Normal (Patched)
MIN_ENABLE=1 (Patched)




データベ:378354 ベース:321365
376880
0.6064 sec
0.7316 sec
0.6008 sec
0.6149 sec


レーザー:490506 ー光:132413
153887
0.0993 sec
0.1563 sec
0.1008 sec
0.1020 sec


接続ポ:17690 ポート:750355
13641
0.0356 sec
0.0505 sec
0.0349 sec
0.0352 sec


光ポ:1401 ポート:750355
841
0.0291 sec
0.0133 sec
0.0290 sec
0.0119 sec


詳細な説:8729533 細な説明:8729531
8729531
1.0377 sec
16.0283 sec
1.0549 sec
1.0171 sec


詳細な説:8729533 な説明を:222494
203132
0.1596 sec
0.6413 sec
0.1622 sec
0.1548 sec


詳細な説:8729533 な説明に:70150
63189
0.1434 sec
0.3008 sec
0.1410 sec
0.1339 sec


詳細な説:8729533 な説明が:17471
9264
0.1341 sec
0.1354 sec
0.1357 sec
0.0861 sec


詳細な説:8729533 明をユ:536
10
0.1325 sec
0.0095 sec
0.1326 sec
0.0092 sec



よければ、ご検討お願いいします。",True,{}
groonga/groonga,https://github.com/groonga/groonga,519,2016-04-03T12:58:45Z,2016-04-04T01:53:37Z,2016-04-05T01:41:03Z,MERGED,True,8,3,1,https://github.com/naoa,Reduce loop for seeking current chunk rid,2,[],https://github.com/groonga/groonga/pull/519,https://github.com/kou,2,https://github.com/groonga/groonga/pull/519#issuecomment-204990291,"レアトークンを含むフレーズの高速化のためのii_cursor_set_minですが、現状、毎回チャンクの先頭からgapを埋めていってスキップできるchunkのridを探しています。
この場合、chunk数が結構大きくなると、逆にこのskipできるチャンクを探す処理の負荷の方が大きくなることが多いようでした。
そこで、grn_ii_cursorにcurrent_chunk previous chunkのridを保存する領域を持たせて毎回トップからスキップできるチャンクを探すのを回避してみました。（もし、current_chunk previous chunkのridをcurrent_chunkとかから計算で求められるなら、それでもよさそうですが、私にはその方法は見つけられませんでした。）
grn_ii_cursorの数ごとにメモリ使用量が4バイトほど増えてしまいますが、トークンごとだと思うので、さほど影響ないのではないかなぁと思っています。
以下は検証結果です。パッチ前だと検索速度が落ちているものでも、ほとんど検索速度が落ちなくなっていることがわかります。



Token:estimate size
N hits
Normal
MIN_ENABLE=1
Normal (Patched)
MIN_ENABLE=1 (Patched)




データベ:378354 ベース:321365
376880
0.6064 sec
0.7316 sec
0.6008 sec
0.6149 sec


レーザー:490506 ー光:132413
153887
0.0993 sec
0.1563 sec
0.1008 sec
0.1020 sec


接続ポ:17690 ポート:750355
13641
0.0356 sec
0.0505 sec
0.0349 sec
0.0352 sec


光ポ:1401 ポート:750355
841
0.0291 sec
0.0133 sec
0.0290 sec
0.0119 sec


詳細な説:8729533 細な説明:8729531
8729531
1.0377 sec
16.0283 sec
1.0549 sec
1.0171 sec


詳細な説:8729533 な説明を:222494
203132
0.1596 sec
0.6413 sec
0.1622 sec
0.1548 sec


詳細な説:8729533 な説明に:70150
63189
0.1434 sec
0.3008 sec
0.1410 sec
0.1339 sec


詳細な説:8729533 な説明が:17471
9264
0.1341 sec
0.1354 sec
0.1357 sec
0.0861 sec


詳細な説:8729533 明をユ:536
10
0.1325 sec
0.0095 sec
0.1326 sec
0.0092 sec



よければ、ご検討お願いいします。","すごい！
ところで、curr_chunk_ridじゃなくてprev_chunk_ridだったりしません？
いや、違うか？currを保存しているところとprevを保存しているところがあるのかしら。",True,{}
groonga/groonga,https://github.com/groonga/groonga,519,2016-04-03T12:58:45Z,2016-04-04T01:53:37Z,2016-04-05T01:41:03Z,MERGED,True,8,3,1,https://github.com/naoa,Reduce loop for seeking current chunk rid,2,[],https://github.com/groonga/groonga/pull/519,https://github.com/naoa,3,https://github.com/groonga/groonga/pull/519#issuecomment-205009673,"レアトークンを含むフレーズの高速化のためのii_cursor_set_minですが、現状、毎回チャンクの先頭からgapを埋めていってスキップできるchunkのridを探しています。
この場合、chunk数が結構大きくなると、逆にこのskipできるチャンクを探す処理の負荷の方が大きくなることが多いようでした。
そこで、grn_ii_cursorにcurrent_chunk previous chunkのridを保存する領域を持たせて毎回トップからスキップできるチャンクを探すのを回避してみました。（もし、current_chunk previous chunkのridをcurrent_chunkとかから計算で求められるなら、それでもよさそうですが、私にはその方法は見つけられませんでした。）
grn_ii_cursorの数ごとにメモリ使用量が4バイトほど増えてしまいますが、トークンごとだと思うので、さほど影響ないのではないかなぁと思っています。
以下は検証結果です。パッチ前だと検索速度が落ちているものでも、ほとんど検索速度が落ちなくなっていることがわかります。



Token:estimate size
N hits
Normal
MIN_ENABLE=1
Normal (Patched)
MIN_ENABLE=1 (Patched)




データベ:378354 ベース:321365
376880
0.6064 sec
0.7316 sec
0.6008 sec
0.6149 sec


レーザー:490506 ー光:132413
153887
0.0993 sec
0.1563 sec
0.1008 sec
0.1020 sec


接続ポ:17690 ポート:750355
13641
0.0356 sec
0.0505 sec
0.0349 sec
0.0352 sec


光ポ:1401 ポート:750355
841
0.0291 sec
0.0133 sec
0.0290 sec
0.0119 sec


詳細な説:8729533 細な説明:8729531
8729531
1.0377 sec
16.0283 sec
1.0549 sec
1.0171 sec


詳細な説:8729533 な説明を:222494
203132
0.1596 sec
0.6413 sec
0.1622 sec
0.1548 sec


詳細な説:8729533 な説明に:70150
63189
0.1434 sec
0.3008 sec
0.1410 sec
0.1339 sec


詳細な説:8729533 な説明が:17471
9264
0.1341 sec
0.1354 sec
0.1357 sec
0.0861 sec


詳細な説:8729533 明をユ:536
10
0.1325 sec
0.0095 sec
0.1326 sec
0.0092 sec



よければ、ご検討お願いいします。",previousのchunk ridとしてしか使っていなかったので、prev_chunk_ridにして、currentを保存するのはやめました。,True,{}
groonga/groonga,https://github.com/groonga/groonga,519,2016-04-03T12:58:45Z,2016-04-04T01:53:37Z,2016-04-05T01:41:03Z,MERGED,True,8,3,1,https://github.com/naoa,Reduce loop for seeking current chunk rid,2,[],https://github.com/groonga/groonga/pull/519,https://github.com/kou,4,https://github.com/groonga/groonga/pull/519#issuecomment-205144878,"レアトークンを含むフレーズの高速化のためのii_cursor_set_minですが、現状、毎回チャンクの先頭からgapを埋めていってスキップできるchunkのridを探しています。
この場合、chunk数が結構大きくなると、逆にこのskipできるチャンクを探す処理の負荷の方が大きくなることが多いようでした。
そこで、grn_ii_cursorにcurrent_chunk previous chunkのridを保存する領域を持たせて毎回トップからスキップできるチャンクを探すのを回避してみました。（もし、current_chunk previous chunkのridをcurrent_chunkとかから計算で求められるなら、それでもよさそうですが、私にはその方法は見つけられませんでした。）
grn_ii_cursorの数ごとにメモリ使用量が4バイトほど増えてしまいますが、トークンごとだと思うので、さほど影響ないのではないかなぁと思っています。
以下は検証結果です。パッチ前だと検索速度が落ちているものでも、ほとんど検索速度が落ちなくなっていることがわかります。



Token:estimate size
N hits
Normal
MIN_ENABLE=1
Normal (Patched)
MIN_ENABLE=1 (Patched)




データベ:378354 ベース:321365
376880
0.6064 sec
0.7316 sec
0.6008 sec
0.6149 sec


レーザー:490506 ー光:132413
153887
0.0993 sec
0.1563 sec
0.1008 sec
0.1020 sec


接続ポ:17690 ポート:750355
13641
0.0356 sec
0.0505 sec
0.0349 sec
0.0352 sec


光ポ:1401 ポート:750355
841
0.0291 sec
0.0133 sec
0.0290 sec
0.0119 sec


詳細な説:8729533 細な説明:8729531
8729531
1.0377 sec
16.0283 sec
1.0549 sec
1.0171 sec


詳細な説:8729533 な説明を:222494
203132
0.1596 sec
0.6413 sec
0.1622 sec
0.1548 sec


詳細な説:8729533 な説明に:70150
63189
0.1434 sec
0.3008 sec
0.1410 sec
0.1339 sec


詳細な説:8729533 な説明が:17471
9264
0.1341 sec
0.1354 sec
0.1357 sec
0.0861 sec


詳細な説:8729533 明をユ:536
10
0.1325 sec
0.0095 sec
0.1326 sec
0.0092 sec



よければ、ご検討お願いいします。","取り込みました！
いくつか考慮漏れっぽいところがあったので対応しておきました。これでたぶん大丈夫なはず。。。！",True,{}
groonga/groonga,https://github.com/groonga/groonga,519,2016-04-03T12:58:45Z,2016-04-04T01:53:37Z,2016-04-05T01:41:03Z,MERGED,True,8,3,1,https://github.com/naoa,Reduce loop for seeking current chunk rid,2,[],https://github.com/groonga/groonga/pull/519,https://github.com/naoa,5,https://github.com/groonga/groonga/pull/519#issuecomment-205155741,"レアトークンを含むフレーズの高速化のためのii_cursor_set_minですが、現状、毎回チャンクの先頭からgapを埋めていってスキップできるchunkのridを探しています。
この場合、chunk数が結構大きくなると、逆にこのskipできるチャンクを探す処理の負荷の方が大きくなることが多いようでした。
そこで、grn_ii_cursorにcurrent_chunk previous chunkのridを保存する領域を持たせて毎回トップからスキップできるチャンクを探すのを回避してみました。（もし、current_chunk previous chunkのridをcurrent_chunkとかから計算で求められるなら、それでもよさそうですが、私にはその方法は見つけられませんでした。）
grn_ii_cursorの数ごとにメモリ使用量が4バイトほど増えてしまいますが、トークンごとだと思うので、さほど影響ないのではないかなぁと思っています。
以下は検証結果です。パッチ前だと検索速度が落ちているものでも、ほとんど検索速度が落ちなくなっていることがわかります。



Token:estimate size
N hits
Normal
MIN_ENABLE=1
Normal (Patched)
MIN_ENABLE=1 (Patched)




データベ:378354 ベース:321365
376880
0.6064 sec
0.7316 sec
0.6008 sec
0.6149 sec


レーザー:490506 ー光:132413
153887
0.0993 sec
0.1563 sec
0.1008 sec
0.1020 sec


接続ポ:17690 ポート:750355
13641
0.0356 sec
0.0505 sec
0.0349 sec
0.0352 sec


光ポ:1401 ポート:750355
841
0.0291 sec
0.0133 sec
0.0290 sec
0.0119 sec


詳細な説:8729533 細な説明:8729531
8729531
1.0377 sec
16.0283 sec
1.0549 sec
1.0171 sec


詳細な説:8729533 な説明を:222494
203132
0.1596 sec
0.6413 sec
0.1622 sec
0.1548 sec


詳細な説:8729533 な説明に:70150
63189
0.1434 sec
0.3008 sec
0.1410 sec
0.1339 sec


詳細な説:8729533 な説明が:17471
9264
0.1341 sec
0.1354 sec
0.1357 sec
0.0861 sec


詳細な説:8729533 明をユ:536
10
0.1325 sec
0.0095 sec
0.1326 sec
0.0092 sec



よければ、ご検討お願いいします。",あざす！,True,{}
groonga/groonga,https://github.com/groonga/groonga,522,2016-04-04T05:03:12Z,2016-04-04T05:13:38Z,2016-04-04T05:30:13Z,MERGED,True,17,7,1,https://github.com/ohkubo,doc ja: translate,1,[],https://github.com/groonga/groonga/pull/522,https://github.com/ohkubo,1,https://github.com/groonga/groonga/pull/522,少し翻訳してみたのですが、いかがでしょうか。,少し翻訳してみたのですが、いかがでしょうか。,True,{}
groonga/groonga,https://github.com/groonga/groonga,522,2016-04-04T05:03:12Z,2016-04-04T05:13:38Z,2016-04-04T05:30:13Z,MERGED,True,17,7,1,https://github.com/ohkubo,doc ja: translate,1,[],https://github.com/groonga/groonga/pull/522,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/522#issuecomment-205139432,少し翻訳してみたのですが、いかがでしょうか。,"ありがとうございます。
よいと思うのでとりこみました。とても助かりました！",True,{}
groonga/groonga,https://github.com/groonga/groonga,522,2016-04-04T05:03:12Z,2016-04-04T05:13:38Z,2016-04-04T05:30:13Z,MERGED,True,17,7,1,https://github.com/ohkubo,doc ja: translate,1,[],https://github.com/groonga/groonga/pull/522,https://github.com/ohkubo,3,https://github.com/groonga/groonga/pull/522#issuecomment-205143180,少し翻訳してみたのですが、いかがでしょうか。,迅速なご対応、ありがとうございます！,True,{}
groonga/groonga,https://github.com/groonga/groonga,524,2016-04-09T22:48:23Z,2016-04-10T06:06:43Z,2016-04-11T05:11:42Z,MERGED,True,1001,32,11,https://github.com/naoa,drilldown: support specifying grouped table,2,[],https://github.com/groonga/groonga/pull/524,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/524,"groonga-dev 3903　のうち、まず、

--drilldown[...].tableで他の--drilldown[...]の「...」に指定
したドリルダウン結果を指定できることと

を実装してみました。よければご検討ください。
CI環境でテストが落ちているので調査しています。
select Memos   \
 --drilldown[tag].keys tag  \
 --drilldown[tag].output_columns _key,_nsubrecs,category  \
 --drilldown[category].table tag \
 --drilldown[category].keys category \
 --drilldown[category].output_columns _key,_nsubrecs,sub_category \
 --drilldown[sub_category].table category \
 --drilldown[sub_category].keys sub_category \
 --drilldown[sub_category].output_columns _key,_nsubrecs
[
   ...
    {
      ""tag"": [
        [3],
        [
          [""_key"", ""ShortText""],
          [""_nsubrecs"", ""Int32""],
          [""category"",""Categories""]
        ],
        [
          ""Groonga"",
          2,
          ""C/C++""
        ],
        [
          ""Mroonga"",
          1,
          ""C/C++""
        ],
        [
          ""Rroonga"",
          1,
          ""Ruby""
        ]
      ],
      ""category"": [
        [2],
        [
          [""_key"",""ShortText""],
          [""_nsubrecs"",""Int32""],
          [""sub_category"",""ShortText""]
        ],
        [
          ""C/C++"",
          2,
          ""Programming language""
        ],
        [
          ""Ruby"",
          1,
          ""Programming language""
        ]
      ],
      ""sub_category"": [
        [1],
        [
          [ ""_key"",""ShortText""],
          [""_nsubrecs"",""Int32""]
        ],
        [
          ""Programming language"",
          2
        ]
      ]
    }
  ]
]","groonga-dev 3903　のうち、まず、

--drilldown[...].tableで他の--drilldown[...]の「...」に指定
したドリルダウン結果を指定できることと

を実装してみました。よければご検討ください。
CI環境でテストが落ちているので調査しています。
select Memos   \
 --drilldown[tag].keys tag  \
 --drilldown[tag].output_columns _key,_nsubrecs,category  \
 --drilldown[category].table tag \
 --drilldown[category].keys category \
 --drilldown[category].output_columns _key,_nsubrecs,sub_category \
 --drilldown[sub_category].table category \
 --drilldown[sub_category].keys sub_category \
 --drilldown[sub_category].output_columns _key,_nsubrecs
[
   ...
    {
      ""tag"": [
        [3],
        [
          [""_key"", ""ShortText""],
          [""_nsubrecs"", ""Int32""],
          [""category"",""Categories""]
        ],
        [
          ""Groonga"",
          2,
          ""C/C++""
        ],
        [
          ""Mroonga"",
          1,
          ""C/C++""
        ],
        [
          ""Rroonga"",
          1,
          ""Ruby""
        ]
      ],
      ""category"": [
        [2],
        [
          [""_key"",""ShortText""],
          [""_nsubrecs"",""Int32""],
          [""sub_category"",""ShortText""]
        ],
        [
          ""C/C++"",
          2,
          ""Programming language""
        ],
        [
          ""Ruby"",
          1,
          ""Programming language""
        ]
      ],
      ""sub_category"": [
        [1],
        [
          [ ""_key"",""ShortText""],
          [""_nsubrecs"",""Int32""]
        ],
        [
          ""Programming language"",
          2
        ]
      ]
    }
  ]
]",True,{}
groonga/groonga,https://github.com/groonga/groonga,524,2016-04-09T22:48:23Z,2016-04-10T06:06:43Z,2016-04-11T05:11:42Z,MERGED,True,1001,32,11,https://github.com/naoa,drilldown: support specifying grouped table,2,[],https://github.com/groonga/groonga/pull/524,https://github.com/naoa,2,https://github.com/groonga/groonga/pull/524#issuecomment-207912637,"groonga-dev 3903　のうち、まず、

--drilldown[...].tableで他の--drilldown[...]の「...」に指定
したドリルダウン結果を指定できることと

を実装してみました。よければご検討ください。
CI環境でテストが落ちているので調査しています。
select Memos   \
 --drilldown[tag].keys tag  \
 --drilldown[tag].output_columns _key,_nsubrecs,category  \
 --drilldown[category].table tag \
 --drilldown[category].keys category \
 --drilldown[category].output_columns _key,_nsubrecs,sub_category \
 --drilldown[sub_category].table category \
 --drilldown[sub_category].keys sub_category \
 --drilldown[sub_category].output_columns _key,_nsubrecs
[
   ...
    {
      ""tag"": [
        [3],
        [
          [""_key"", ""ShortText""],
          [""_nsubrecs"", ""Int32""],
          [""category"",""Categories""]
        ],
        [
          ""Groonga"",
          2,
          ""C/C++""
        ],
        [
          ""Mroonga"",
          1,
          ""C/C++""
        ],
        [
          ""Rroonga"",
          1,
          ""Ruby""
        ]
      ],
      ""category"": [
        [2],
        [
          [""_key"",""ShortText""],
          [""_nsubrecs"",""Int32""],
          [""sub_category"",""ShortText""]
        ],
        [
          ""C/C++"",
          2,
          ""Programming language""
        ],
        [
          ""Ruby"",
          1,
          ""Programming language""
        ]
      ],
      ""sub_category"": [
        [1],
        [
          [ ""_key"",""ShortText""],
          [""_nsubrecs"",""Int32""]
        ],
        [
          ""Programming language"",
          2
        ]
      ]
    }
  ]
]",#525　と同様の原因でauto toolsのCIがこけるようです。,True,{}
groonga/groonga,https://github.com/groonga/groonga,524,2016-04-09T22:48:23Z,2016-04-10T06:06:43Z,2016-04-11T05:11:42Z,MERGED,True,1001,32,11,https://github.com/naoa,drilldown: support specifying grouped table,2,[],https://github.com/groonga/groonga/pull/524,https://github.com/kou,3,https://github.com/groonga/groonga/pull/524#issuecomment-207939312,"groonga-dev 3903　のうち、まず、

--drilldown[...].tableで他の--drilldown[...]の「...」に指定
したドリルダウン結果を指定できることと

を実装してみました。よければご検討ください。
CI環境でテストが落ちているので調査しています。
select Memos   \
 --drilldown[tag].keys tag  \
 --drilldown[tag].output_columns _key,_nsubrecs,category  \
 --drilldown[category].table tag \
 --drilldown[category].keys category \
 --drilldown[category].output_columns _key,_nsubrecs,sub_category \
 --drilldown[sub_category].table category \
 --drilldown[sub_category].keys sub_category \
 --drilldown[sub_category].output_columns _key,_nsubrecs
[
   ...
    {
      ""tag"": [
        [3],
        [
          [""_key"", ""ShortText""],
          [""_nsubrecs"", ""Int32""],
          [""category"",""Categories""]
        ],
        [
          ""Groonga"",
          2,
          ""C/C++""
        ],
        [
          ""Mroonga"",
          1,
          ""C/C++""
        ],
        [
          ""Rroonga"",
          1,
          ""Ruby""
        ]
      ],
      ""category"": [
        [2],
        [
          [""_key"",""ShortText""],
          [""_nsubrecs"",""Int32""],
          [""sub_category"",""ShortText""]
        ],
        [
          ""C/C++"",
          2,
          ""Programming language""
        ],
        [
          ""Ruby"",
          1,
          ""Programming language""
        ]
      ],
      ""sub_category"": [
        [1],
        [
          [ ""_key"",""ShortText""],
          [""_nsubrecs"",""Int32""]
        ],
        [
          ""Programming language"",
          2
        ]
      ]
    }
  ]
]","すごい！マージしました！
CIがコケるやつはおいおい直していきましょう！",True,{}
groonga/groonga,https://github.com/groonga/groonga,524,2016-04-09T22:48:23Z,2016-04-10T06:06:43Z,2016-04-11T05:11:42Z,MERGED,True,1001,32,11,https://github.com/naoa,drilldown: support specifying grouped table,2,[],https://github.com/groonga/groonga/pull/524,https://github.com/naoa,4,https://github.com/groonga/groonga/pull/524#issuecomment-207978904,"groonga-dev 3903　のうち、まず、

--drilldown[...].tableで他の--drilldown[...]の「...」に指定
したドリルダウン結果を指定できることと

を実装してみました。よければご検討ください。
CI環境でテストが落ちているので調査しています。
select Memos   \
 --drilldown[tag].keys tag  \
 --drilldown[tag].output_columns _key,_nsubrecs,category  \
 --drilldown[category].table tag \
 --drilldown[category].keys category \
 --drilldown[category].output_columns _key,_nsubrecs,sub_category \
 --drilldown[sub_category].table category \
 --drilldown[sub_category].keys sub_category \
 --drilldown[sub_category].output_columns _key,_nsubrecs
[
   ...
    {
      ""tag"": [
        [3],
        [
          [""_key"", ""ShortText""],
          [""_nsubrecs"", ""Int32""],
          [""category"",""Categories""]
        ],
        [
          ""Groonga"",
          2,
          ""C/C++""
        ],
        [
          ""Mroonga"",
          1,
          ""C/C++""
        ],
        [
          ""Rroonga"",
          1,
          ""Ruby""
        ]
      ],
      ""category"": [
        [2],
        [
          [""_key"",""ShortText""],
          [""_nsubrecs"",""Int32""],
          [""sub_category"",""ShortText""]
        ],
        [
          ""C/C++"",
          2,
          ""Programming language""
        ],
        [
          ""Ruby"",
          1,
          ""Programming language""
        ]
      ],
      ""sub_category"": [
        [1],
        [
          [ ""_key"",""ShortText""],
          [""_nsubrecs"",""Int32""]
        ],
        [
          ""Programming language"",
          2
        ]
      ]
    }
  ]
]",マージとリファクタありがとうございます！,True,{}
groonga/groonga,https://github.com/groonga/groonga,525,2016-04-10T03:31:11Z,2016-04-10T13:11:01Z,2016-04-11T05:11:34Z,CLOSED,False,135,0,2,https://github.com/naoa,Order of drilldown labels,1,[],https://github.com/groonga/groonga/pull/525,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/525,"これはPRというか質問なのですが、ラベル付きドリルダウンの場合、CI環境のcmakeとauto toolsの場合で、ラベルの出力順序が異なるようです。

auto tools
https://travis-ci.org/groonga/groonga/jobs/122000281
cmake
https://travis-ci.org/groonga/groonga/jobs/122000284

たぶん、cmakeは指定した順序のままラベルが出力され、auto toolsの場合は、アルファベット順になっているように見えます。
これは仕様動作ですか？
CIでの動作を見るためにproc_select_find_all_drilldown_labelsのgrn_table_cursor_openにGRN_CUSOR_BY_IDを試しにつけてみています。","これはPRというか質問なのですが、ラベル付きドリルダウンの場合、CI環境のcmakeとauto toolsの場合で、ラベルの出力順序が異なるようです。

auto tools
https://travis-ci.org/groonga/groonga/jobs/122000281
cmake
https://travis-ci.org/groonga/groonga/jobs/122000284

たぶん、cmakeは指定した順序のままラベルが出力され、auto toolsの場合は、アルファベット順になっているように見えます。
これは仕様動作ですか？
CIでの動作を見るためにproc_select_find_all_drilldown_labelsのgrn_table_cursor_openにGRN_CUSOR_BY_IDを試しにつけてみています。",True,{}
groonga/groonga,https://github.com/groonga/groonga,525,2016-04-10T03:31:11Z,2016-04-10T13:11:01Z,2016-04-11T05:11:34Z,CLOSED,False,135,0,2,https://github.com/naoa,Order of drilldown labels,1,[],https://github.com/groonga/groonga/pull/525,https://github.com/naoa,2,https://github.com/groonga/groonga/pull/525#issuecomment-207911590,"これはPRというか質問なのですが、ラベル付きドリルダウンの場合、CI環境のcmakeとauto toolsの場合で、ラベルの出力順序が異なるようです。

auto tools
https://travis-ci.org/groonga/groonga/jobs/122000281
cmake
https://travis-ci.org/groonga/groonga/jobs/122000284

たぶん、cmakeは指定した順序のままラベルが出力され、auto toolsの場合は、アルファベット順になっているように見えます。
これは仕様動作ですか？
CIでの動作を見るためにproc_select_find_all_drilldown_labelsのgrn_table_cursor_openにGRN_CUSOR_BY_IDを試しにつけてみています。","CURSOR_BY_IDをつけるのは無意味なようでした。
今のところ、私にはなにが順序に影響しているのかがよくわかってない状況です。",True,{}
groonga/groonga,https://github.com/groonga/groonga,525,2016-04-10T03:31:11Z,2016-04-10T13:11:01Z,2016-04-11T05:11:34Z,CLOSED,False,135,0,2,https://github.com/naoa,Order of drilldown labels,1,[],https://github.com/groonga/groonga/pull/525,https://github.com/kou,3,https://github.com/groonga/groonga/pull/525#issuecomment-207982573,"これはPRというか質問なのですが、ラベル付きドリルダウンの場合、CI環境のcmakeとauto toolsの場合で、ラベルの出力順序が異なるようです。

auto tools
https://travis-ci.org/groonga/groonga/jobs/122000281
cmake
https://travis-ci.org/groonga/groonga/jobs/122000284

たぶん、cmakeは指定した順序のままラベルが出力され、auto toolsの場合は、アルファベット順になっているように見えます。
これは仕様動作ですか？
CIでの動作を見るためにproc_select_find_all_drilldown_labelsのgrn_table_cursor_openにGRN_CUSOR_BY_IDを試しにつけてみています。","これ、よく見るとわかると思うんですが、CMakeの方は実行しているテストが少ないんですよ。
で、失敗しているのは--interface httpをつけているやつなんですね。
で、--interface httpをつけているやつは、select tableみたいなコマンドをパースして/d/select?table=tableみたいにしてリクエストしています。このときにパラメーターの順序が変わっているのが原因だと思います。--drilldown[LABEL]は指定されている順に出力しているので。
grntest（が使っているgroonga-command）はパラメーターをソートして変換するので、テストで指定するパラメーターをソートして指定するのがいいかなぁと思います。",True,{}
groonga/groonga,https://github.com/groonga/groonga,525,2016-04-10T03:31:11Z,2016-04-10T13:11:01Z,2016-04-11T05:11:34Z,CLOSED,False,135,0,2,https://github.com/naoa,Order of drilldown labels,1,[],https://github.com/groonga/groonga/pull/525,https://github.com/naoa,4,https://github.com/groonga/groonga/pull/525#issuecomment-207983102,"これはPRというか質問なのですが、ラベル付きドリルダウンの場合、CI環境のcmakeとauto toolsの場合で、ラベルの出力順序が異なるようです。

auto tools
https://travis-ci.org/groonga/groonga/jobs/122000281
cmake
https://travis-ci.org/groonga/groonga/jobs/122000284

たぶん、cmakeは指定した順序のままラベルが出力され、auto toolsの場合は、アルファベット順になっているように見えます。
これは仕様動作ですか？
CIでの動作を見るためにproc_select_find_all_drilldown_labelsのgrn_table_cursor_openにGRN_CUSOR_BY_IDを試しにつけてみています。","groonga-commandの変換時にソートされていたんですね。理解しました。
修正までありがとうございます。",True,{}
groonga/groonga,https://github.com/groonga/groonga,526,2016-04-11T02:10:59Z,2016-04-11T14:35:01Z,2016-04-13T21:45:31Z,MERGED,True,3,0,1,https://github.com/naoa,select drilldown: add missing error check for memory allocation,1,[],https://github.com/groonga/groonga/pull/526,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/526,すいません。drilldownsでmallocした後のエラーチェックに漏れがありました。,すいません。drilldownsでmallocした後のエラーチェックに漏れがありました。,True,{}
groonga/groonga,https://github.com/groonga/groonga,526,2016-04-11T02:10:59Z,2016-04-11T14:35:01Z,2016-04-13T21:45:31Z,MERGED,True,3,0,1,https://github.com/naoa,select drilldown: add missing error check for memory allocation,1,[],https://github.com/groonga/groonga/pull/526,https://github.com/kou,2,https://github.com/groonga/groonga/pull/526#issuecomment-208378549,すいません。drilldownsでmallocした後のエラーチェックに漏れがありました。,ありがとうございます！,True,{}
groonga/groonga,https://github.com/groonga/groonga,527,2016-04-11T02:13:59Z,2016-04-11T14:38:56Z,2016-04-13T21:45:31Z,MERGED,True,1,0,1,https://github.com/naoa,db: fix memory leak in grn_table_group_single_key_records,1,[],https://github.com/groonga/groonga/pull/527,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/527,grn_testでleakってでいなかったのでどっかで回収されているかもしれませんが、grn_table_group_single_key_records()ではcalc_targetのためにGRN_VOID_INITしたvalue_bufferをGRN_OBJ_FINしていないように見えました。（他は大丈夫）,grn_testでleakってでいなかったのでどっかで回収されているかもしれませんが、grn_table_group_single_key_records()ではcalc_targetのためにGRN_VOID_INITしたvalue_bufferをGRN_OBJ_FINしていないように見えました。（他は大丈夫）,True,{}
groonga/groonga,https://github.com/groonga/groonga,527,2016-04-11T02:13:59Z,2016-04-11T14:38:56Z,2016-04-13T21:45:31Z,MERGED,True,1,0,1,https://github.com/naoa,db: fix memory leak in grn_table_group_single_key_records,1,[],https://github.com/groonga/groonga/pull/527,https://github.com/kou,2,https://github.com/groonga/groonga/pull/527#issuecomment-208379295,grn_testでleakってでいなかったのでどっかで回収されているかもしれませんが、grn_table_group_single_key_records()ではcalc_targetのためにGRN_VOID_INITしたvalue_bufferをGRN_OBJ_FINしていないように見えました。（他は大丈夫）,"ありがとうございます！
たぶん、構造体の中に埋め込める分のサイズのvalueしか扱っていなかったんだと思います。",True,{}
groonga/groonga,https://github.com/groonga/groonga,528,2016-04-12T00:05:03Z,2016-04-13T05:33:57Z,2016-04-20T13:41:08Z,MERGED,True,361,77,6,https://github.com/naoa,drilldown: support group by all records,5,[],https://github.com/groonga/groonga/pull/528,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/528,"groonga-dev 3903　の、

--drilldown[...].keysを省略できること

を実装してみました。
モチベーションは、円グラフを書くためにベクターカラムのドリルダウン結果の_nsubrecsの合計値を取得したいことです。
キー数が0、calc_targetがあって、かつ、n_resultsが1の場合、""all_records""というキー名ですべてのレコードをgroupするモードをgrn_table_group()APIに追加しました。
よければご検討ください。
select Memos  \
  --drilldown[tag].keys tag \
  --drilldown[tag_sum].table tag \
  --drilldown[tag_sum].calc_types SUM \
  --drilldown[tag_sum].calc_target _nsubrecs \
  --drilldown[tag_sum].output_columns _key,_sum
[
   ...
    {
      ""tag"": [
        [3],
        [
          [""_key"", ""ShortText""],
          [""_nsubrecs"",""Int32""]
        ],
        [
          ""Groonga"",
          2
        ],
        [
          ""Mroonga"",
          1
        ],
        [
          ""Rroonga"",
          1
        ]
      ],
      ""tag_sum"": [
        [1],
        [
          [ ""_key"",""ShortText""],
          [ ""_sum"",""Int64""]
        ],
        [
          ""all_records"",
          4
        ]
      ]
    }
  ]
]","groonga-dev 3903　の、

--drilldown[...].keysを省略できること

を実装してみました。
モチベーションは、円グラフを書くためにベクターカラムのドリルダウン結果の_nsubrecsの合計値を取得したいことです。
キー数が0、calc_targetがあって、かつ、n_resultsが1の場合、""all_records""というキー名ですべてのレコードをgroupするモードをgrn_table_group()APIに追加しました。
よければご検討ください。
select Memos  \
  --drilldown[tag].keys tag \
  --drilldown[tag_sum].table tag \
  --drilldown[tag_sum].calc_types SUM \
  --drilldown[tag_sum].calc_target _nsubrecs \
  --drilldown[tag_sum].output_columns _key,_sum
[
   ...
    {
      ""tag"": [
        [3],
        [
          [""_key"", ""ShortText""],
          [""_nsubrecs"",""Int32""]
        ],
        [
          ""Groonga"",
          2
        ],
        [
          ""Mroonga"",
          1
        ],
        [
          ""Rroonga"",
          1
        ]
      ],
      ""tag_sum"": [
        [1],
        [
          [ ""_key"",""ShortText""],
          [ ""_sum"",""Int64""]
        ],
        [
          ""all_records"",
          4
        ]
      ]
    }
  ]
]",True,{}
groonga/groonga,https://github.com/groonga/groonga,528,2016-04-12T00:05:03Z,2016-04-13T05:33:57Z,2016-04-20T13:41:08Z,MERGED,True,361,77,6,https://github.com/naoa,drilldown: support group by all records,5,[],https://github.com/groonga/groonga/pull/528,https://github.com/kou,2,https://github.com/groonga/groonga/pull/528#issuecomment-209352916,"groonga-dev 3903　の、

--drilldown[...].keysを省略できること

を実装してみました。
モチベーションは、円グラフを書くためにベクターカラムのドリルダウン結果の_nsubrecsの合計値を取得したいことです。
キー数が0、calc_targetがあって、かつ、n_resultsが1の場合、""all_records""というキー名ですべてのレコードをgroupするモードをgrn_table_group()APIに追加しました。
よければご検討ください。
select Memos  \
  --drilldown[tag].keys tag \
  --drilldown[tag_sum].table tag \
  --drilldown[tag_sum].calc_types SUM \
  --drilldown[tag_sum].calc_target _nsubrecs \
  --drilldown[tag_sum].output_columns _key,_sum
[
   ...
    {
      ""tag"": [
        [3],
        [
          [""_key"", ""ShortText""],
          [""_nsubrecs"",""Int32""]
        ],
        [
          ""Groonga"",
          2
        ],
        [
          ""Mroonga"",
          1
        ],
        [
          ""Rroonga"",
          1
        ]
      ],
      ""tag_sum"": [
        [1],
        [
          [ ""_key"",""ShortText""],
          [ ""_sum"",""Int64""]
        ],
        [
          ""all_records"",
          4
        ]
      ]
    }
  ]
]","ありがとうございます！マージしました！
（使い道は思いついていないんですが、）calc_targetがない場合でも受け付けるようにしました。
calc_targetをチェックするならcalc_typeでCOUNT以外を指定しているかのチェックもしないと片手落ちだなぁと思ったので、いっそ受け付けるようにしました。
""all_records""という名前についてはもう少し考えさせてください。予約語っぽくするなら""_""を最初につけて""_all""とか""_all_records""とかにするのがいいのかなぁとか悩んでいます。",True,{}
groonga/groonga,https://github.com/groonga/groonga,528,2016-04-12T00:05:03Z,2016-04-13T05:33:57Z,2016-04-20T13:41:08Z,MERGED,True,361,77,6,https://github.com/naoa,drilldown: support group by all records,5,[],https://github.com/groonga/groonga/pull/528,https://github.com/naoa,3,https://github.com/groonga/groonga/pull/528#issuecomment-209396552,"groonga-dev 3903　の、

--drilldown[...].keysを省略できること

を実装してみました。
モチベーションは、円グラフを書くためにベクターカラムのドリルダウン結果の_nsubrecsの合計値を取得したいことです。
キー数が0、calc_targetがあって、かつ、n_resultsが1の場合、""all_records""というキー名ですべてのレコードをgroupするモードをgrn_table_group()APIに追加しました。
よければご検討ください。
select Memos  \
  --drilldown[tag].keys tag \
  --drilldown[tag_sum].table tag \
  --drilldown[tag_sum].calc_types SUM \
  --drilldown[tag_sum].calc_target _nsubrecs \
  --drilldown[tag_sum].output_columns _key,_sum
[
   ...
    {
      ""tag"": [
        [3],
        [
          [""_key"", ""ShortText""],
          [""_nsubrecs"",""Int32""]
        ],
        [
          ""Groonga"",
          2
        ],
        [
          ""Mroonga"",
          1
        ],
        [
          ""Rroonga"",
          1
        ]
      ],
      ""tag_sum"": [
        [1],
        [
          [ ""_key"",""ShortText""],
          [ ""_sum"",""Int64""]
        ],
        [
          ""all_records"",
          4
        ]
      ]
    }
  ]
]","ありがとうございます！
了解しました。
名前は_sumとか_avgとかシンプルなので_allとかでいいかもしれませんね。",True,{}
groonga/groonga,https://github.com/groonga/groonga,528,2016-04-12T00:05:03Z,2016-04-13T05:33:57Z,2016-04-20T13:41:08Z,MERGED,True,361,77,6,https://github.com/naoa,drilldown: support group by all records,5,[],https://github.com/groonga/groonga/pull/528,https://github.com/kou,4,https://github.com/groonga/groonga/pull/528#issuecomment-212422515,"groonga-dev 3903　の、

--drilldown[...].keysを省略できること

を実装してみました。
モチベーションは、円グラフを書くためにベクターカラムのドリルダウン結果の_nsubrecsの合計値を取得したいことです。
キー数が0、calc_targetがあって、かつ、n_resultsが1の場合、""all_records""というキー名ですべてのレコードをgroupするモードをgrn_table_group()APIに追加しました。
よければご検討ください。
select Memos  \
  --drilldown[tag].keys tag \
  --drilldown[tag_sum].table tag \
  --drilldown[tag_sum].calc_types SUM \
  --drilldown[tag_sum].calc_target _nsubrecs \
  --drilldown[tag_sum].output_columns _key,_sum
[
   ...
    {
      ""tag"": [
        [3],
        [
          [""_key"", ""ShortText""],
          [""_nsubrecs"",""Int32""]
        ],
        [
          ""Groonga"",
          2
        ],
        [
          ""Mroonga"",
          1
        ],
        [
          ""Rroonga"",
          1
        ]
      ],
      ""tag_sum"": [
        [1],
        [
          [ ""_key"",""ShortText""],
          [ ""_sum"",""Int64""]
        ],
        [
          ""all_records"",
          4
        ]
      ]
    }
  ]
]",_allにしました！,True,{}
groonga/groonga,https://github.com/groonga/groonga,528,2016-04-12T00:05:03Z,2016-04-13T05:33:57Z,2016-04-20T13:41:08Z,MERGED,True,361,77,6,https://github.com/naoa,drilldown: support group by all records,5,[],https://github.com/groonga/groonga/pull/528,https://github.com/naoa,5,https://github.com/groonga/groonga/pull/528#issuecomment-212428036,"groonga-dev 3903　の、

--drilldown[...].keysを省略できること

を実装してみました。
モチベーションは、円グラフを書くためにベクターカラムのドリルダウン結果の_nsubrecsの合計値を取得したいことです。
キー数が0、calc_targetがあって、かつ、n_resultsが1の場合、""all_records""というキー名ですべてのレコードをgroupするモードをgrn_table_group()APIに追加しました。
よければご検討ください。
select Memos  \
  --drilldown[tag].keys tag \
  --drilldown[tag_sum].table tag \
  --drilldown[tag_sum].calc_types SUM \
  --drilldown[tag_sum].calc_target _nsubrecs \
  --drilldown[tag_sum].output_columns _key,_sum
[
   ...
    {
      ""tag"": [
        [3],
        [
          [""_key"", ""ShortText""],
          [""_nsubrecs"",""Int32""]
        ],
        [
          ""Groonga"",
          2
        ],
        [
          ""Mroonga"",
          1
        ],
        [
          ""Rroonga"",
          1
        ]
      ],
      ""tag_sum"": [
        [1],
        [
          [ ""_key"",""ShortText""],
          [ ""_sum"",""Int64""]
        ],
        [
          ""all_records"",
          4
        ]
      ]
    }
  ]
]",了解しました！,True,{}
groonga/groonga,https://github.com/groonga/groonga,529,2016-04-13T21:55:55Z,2016-04-14T01:29:37Z,2016-04-20T11:36:39Z,MERGED,True,13,1,1,https://github.com/naoa,Add select cache related labeled drilldown,1,[],https://github.com/groonga/groonga/pull/529,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/529,ラベル付きドリルダウン関連のパラメータをselectのキャッシュに追加しました。,ラベル付きドリルダウン関連のパラメータをselectのキャッシュに追加しました。,True,{}
groonga/groonga,https://github.com/groonga/groonga,529,2016-04-13T21:55:55Z,2016-04-14T01:29:37Z,2016-04-20T11:36:39Z,MERGED,True,13,1,1,https://github.com/naoa,Add select cache related labeled drilldown,1,[],https://github.com/groonga/groonga/pull/529,https://github.com/kou,2,https://github.com/groonga/groonga/pull/529#issuecomment-209714615,ラベル付きドリルダウン関連のパラメータをselectのキャッシュに追加しました。,ありがとうございます！,True,{}
groonga/groonga,https://github.com/groonga/groonga,531,2016-04-22T02:50:57Z,2016-04-22T02:52:46Z,2016-04-22T02:56:26Z,MERGED,True,0,1212,10,https://github.com/ohkubo,doc: remove needless uuid,1,[],https://github.com/groonga/groonga/pull/531,https://github.com/ohkubo,1,https://github.com/groonga/groonga/pull/531,"sed --in-place '/^# [0-9a-f]{32}$/d' doc/locale/ja/LC_MESSAGES/*.po
過去の d50e3f2 と同様の変更です。
既に Sphinx は 1.3 以上のサポートとなっていますので、今回の削除後は対応不要じゃないかなと思います。
すっきりすると思ったのですが、いかがでしょうか？","sed --in-place '/^# [0-9a-f]{32}$/d' doc/locale/ja/LC_MESSAGES/*.po
過去の d50e3f2 と同様の変更です。
既に Sphinx は 1.3 以上のサポートとなっていますので、今回の削除後は対応不要じゃないかなと思います。
すっきりすると思ったのですが、いかがでしょうか？",True,{}
groonga/groonga,https://github.com/groonga/groonga,531,2016-04-22T02:50:57Z,2016-04-22T02:52:46Z,2016-04-22T02:56:26Z,MERGED,True,0,1212,10,https://github.com/ohkubo,doc: remove needless uuid,1,[],https://github.com/groonga/groonga/pull/531,https://github.com/kou,2,https://github.com/groonga/groonga/pull/531#issuecomment-213220293,"sed --in-place '/^# [0-9a-f]{32}$/d' doc/locale/ja/LC_MESSAGES/*.po
過去の d50e3f2 と同様の変更です。
既に Sphinx は 1.3 以上のサポートとなっていますので、今回の削除後は対応不要じゃないかなと思います。
すっきりすると思ったのですが、いかがでしょうか？",すっきりするので取り込みました！,True,{}
groonga/groonga,https://github.com/groonga/groonga,531,2016-04-22T02:50:57Z,2016-04-22T02:52:46Z,2016-04-22T02:56:26Z,MERGED,True,0,1212,10,https://github.com/ohkubo,doc: remove needless uuid,1,[],https://github.com/groonga/groonga/pull/531,https://github.com/ohkubo,3,https://github.com/groonga/groonga/pull/531#issuecomment-213221359,"sed --in-place '/^# [0-9a-f]{32}$/d' doc/locale/ja/LC_MESSAGES/*.po
過去の d50e3f2 と同様の変更です。
既に Sphinx は 1.3 以上のサポートとなっていますので、今回の削除後は対応不要じゃないかなと思います。
すっきりすると思ったのですが、いかがでしょうか？",ありがとうございます！,True,{}
groonga/groonga,https://github.com/groonga/groonga,532,2016-04-22T06:46:09Z,2016-04-22T07:18:52Z,2016-04-22T07:46:19Z,MERGED,True,3,18,5,https://github.com/ohkubo,sphinx: support only HTML output,1,[],https://github.com/groonga/groonga/pull/532,https://github.com/ohkubo,1,https://github.com/groonga/groonga/pull/532,"少し前の 6f8eb65 と 2e91a75 の関連です。
この部分も多分不要じゃないかと思うので、気づいたついでに上げておきます。","少し前の 6f8eb65 と 2e91a75 の関連です。
この部分も多分不要じゃないかと思うので、気づいたついでに上げておきます。",True,{}
groonga/groonga,https://github.com/groonga/groonga,532,2016-04-22T06:46:09Z,2016-04-22T07:18:52Z,2016-04-22T07:46:19Z,MERGED,True,3,18,5,https://github.com/ohkubo,sphinx: support only HTML output,1,[],https://github.com/groonga/groonga/pull/532,https://github.com/kou,2,https://github.com/groonga/groonga/pull/532#issuecomment-213298573,"少し前の 6f8eb65 と 2e91a75 の関連です。
この部分も多分不要じゃないかと思うので、気づいたついでに上げておきます。",その通りですね！,True,{}
groonga/groonga,https://github.com/groonga/groonga,532,2016-04-22T06:46:09Z,2016-04-22T07:18:52Z,2016-04-22T07:46:19Z,MERGED,True,3,18,5,https://github.com/ohkubo,sphinx: support only HTML output,1,[],https://github.com/groonga/groonga/pull/532,https://github.com/ohkubo,3,https://github.com/groonga/groonga/pull/532#issuecomment-213308536,"少し前の 6f8eb65 と 2e91a75 の関連です。
この部分も多分不要じゃないかと思うので、気づいたついでに上げておきます。",マージありがとうございます！,True,{}
groonga/groonga,https://github.com/groonga/groonga,533,2016-04-23T09:21:24Z,2016-05-20T07:05:03Z,2016-06-11T06:31:33Z,MERGED,True,1002,0,14,https://github.com/naoa,ii: skip overlapping tokens in consideration of frequency of token,5,[],https://github.com/groonga/groonga/pull/533,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/533,"iiのチャンクを分割して構築した場合のカーソルスキップの効果を有効的に保ちつつ、Ngramトークナイザーを
高速化するため、token_info_buildでレアトークンを優先的に選択しながらオーバラップトークンをスキップする処理を実装してみました。
環境変数GRN_II_OVERLAP_TOKEN_SKIP_ENABLEで有効になります。
実装の大まかな流れは以下のとおりです。

トークナイズしたトークンとestimate_sizeを一旦全部取得する。
隙間なく遷移するように隣接リストでグラフを構築する。(オーバラップトークンか次の隣接トークン)
グラフを幅優先探索で文頭から末尾までのトークン数が最少になる経路+1の経路のうち、sum(max_estiamted_size / estimated_size)が最も大きくなる(レア度が高い)経路を選ぶ。

ここで最少+1としたのは、TokenBigramでトークンが偶数個の場合、最短経路が一意に決まってしまうためです。
探索は幅優先探索で組み合わせ数が多くなりすぎないように16トークン単位ごとに行っています。
Bigramで16であれば、1000組み合わせ程度で全文検索にはほとんど影響しないと思います。(たぶん。32ごとだと10万組み合わせぐらい)
メモリ節約の観点と実装が簡単だったのでノードの組み合わせ候補をuint32_tのビット位置で表現しています。
極端なレアトークンなしのケース
以下のような極端なレアトークンがないフレーズでは、スキップしないものより1.5倍程度高速になります。

検索フレーズ:「情報処理システム」トークナイザー:TokenBigram
情報:0:1130550 / 報処:1:92306 / 処理:2:1475958 / 理シ:3:95071 /シス:4:928786 /ステ:5:1852329 / テム:6:881885 (token:pos:estimated_size)





利用トークン
検索時間




スキップしない場合(ii_cursor_min_enableあり)
0,1,2,3,4,5,6
0.1850 sec


先頭から順にスキップした場合(比較用)
0,2,4,6
0.240 sec


レア度を考慮してスキップした場合(本パッチ)
0,1,3,4,6
0.1058 sec



極端なレアトークンありのケース
以下の例ではトークナイザーで先頭から単純にスキップするとレアトークンを飛ばしてしまい逆に遅くなってしまいますが、本パッチの場合はほとんど損をしていません。

検索フレーズ:「情報データ」トークナイザー:TokenBigram
情報:0:1130550 / 報デ:1:19402 / デー:2:1068392 / ータ:3:2129864  (token:pos:estimated_size)





利用トークン
検索時間




スキップしない場合(ii_cursor_min_enableあり)
0,1,2,3
0.155 sec


先頭から順にスキップした場合(比較用)
0,2,3
0.446 sec


レア度を考慮してスキップした場合(本パッチ)
0,1,3
0.156 sec



1000フレーズのトータル比較
本パッチの場合が、スキップなしの場合と比べて1.13倍ほど早くなっています。ii_cursor_set_min_enable無しの場合と比較すると11.3倍。
固有名詞を抽出した辞書からランダムに選んだのでレア度が全体的に大き目で、チャンク分割とカーソルスキップの効果がとても効いているのだと思います。レア度がさほど高くないもの選んでやった場合は、1.3倍～1.5倍ぐらいはやいんじゃないかなと思います。
ii_cursor_set_min_enableの効果がとても高いですね。先頭からスキップするとそのレアトークンをスキップするなんてとんでもないという状態。




MIN_ENABLE
合計検索時間
平均検索時間
比率




スキップなし
なし
65.157 sec
0.065 sec
1


先頭から順にスキップ(比較用)
なし
49.956 sec
0.049 sec
1.304


レア度を考慮してスキップ
なし
39.191 sec
0.039 sec
1.663


スキップなし
あり
6.549 sec
0.007 sec
9.949


先頭から順にスキップ(比較用)
あり
19.656 sec
0.019 sec
3.315


レア度を考慮してスキップ
あり
5.771 sec
0.006 sec
11.291



インデックスサイズは約30GiB
注意点
少し残念ですが、オーバラップをスキップするとトークンの間に空白がある場合でもマッチする(ことがある)ようになり、スキップしない場合とマッチ件数が少し異なってしまいます。
そのため、Ngramトークナイザーで空白を除去しないようにする環境変数GRN_NGRAM_TOKENIZER_REMOVE_BLANK_DISABLEも用意しました。これを使えば、当方の環境ではスキップしない場合とマッチ件数が変わらないことを確認しています(1万フレーズぐらいで確認)。これを使う場合はインデックスの再構築が必要です。
いかがでしょうか？","iiのチャンクを分割して構築した場合のカーソルスキップの効果を有効的に保ちつつ、Ngramトークナイザーを
高速化するため、token_info_buildでレアトークンを優先的に選択しながらオーバラップトークンをスキップする処理を実装してみました。
環境変数GRN_II_OVERLAP_TOKEN_SKIP_ENABLEで有効になります。
実装の大まかな流れは以下のとおりです。

トークナイズしたトークンとestimate_sizeを一旦全部取得する。
隙間なく遷移するように隣接リストでグラフを構築する。(オーバラップトークンか次の隣接トークン)
グラフを幅優先探索で文頭から末尾までのトークン数が最少になる経路+1の経路のうち、sum(max_estiamted_size / estimated_size)が最も大きくなる(レア度が高い)経路を選ぶ。

ここで最少+1としたのは、TokenBigramでトークンが偶数個の場合、最短経路が一意に決まってしまうためです。
探索は幅優先探索で組み合わせ数が多くなりすぎないように16トークン単位ごとに行っています。
Bigramで16であれば、1000組み合わせ程度で全文検索にはほとんど影響しないと思います。(たぶん。32ごとだと10万組み合わせぐらい)
メモリ節約の観点と実装が簡単だったのでノードの組み合わせ候補をuint32_tのビット位置で表現しています。
極端なレアトークンなしのケース
以下のような極端なレアトークンがないフレーズでは、スキップしないものより1.5倍程度高速になります。

検索フレーズ:「情報処理システム」トークナイザー:TokenBigram
情報:0:1130550 / 報処:1:92306 / 処理:2:1475958 / 理シ:3:95071 /シス:4:928786 /ステ:5:1852329 / テム:6:881885 (token:pos:estimated_size)





利用トークン
検索時間




スキップしない場合(ii_cursor_min_enableあり)
0,1,2,3,4,5,6
0.1850 sec


先頭から順にスキップした場合(比較用)
0,2,4,6
0.240 sec


レア度を考慮してスキップした場合(本パッチ)
0,1,3,4,6
0.1058 sec



極端なレアトークンありのケース
以下の例ではトークナイザーで先頭から単純にスキップするとレアトークンを飛ばしてしまい逆に遅くなってしまいますが、本パッチの場合はほとんど損をしていません。

検索フレーズ:「情報データ」トークナイザー:TokenBigram
情報:0:1130550 / 報デ:1:19402 / デー:2:1068392 / ータ:3:2129864  (token:pos:estimated_size)





利用トークン
検索時間




スキップしない場合(ii_cursor_min_enableあり)
0,1,2,3
0.155 sec


先頭から順にスキップした場合(比較用)
0,2,3
0.446 sec


レア度を考慮してスキップした場合(本パッチ)
0,1,3
0.156 sec



1000フレーズのトータル比較
本パッチの場合が、スキップなしの場合と比べて1.13倍ほど早くなっています。ii_cursor_set_min_enable無しの場合と比較すると11.3倍。
固有名詞を抽出した辞書からランダムに選んだのでレア度が全体的に大き目で、チャンク分割とカーソルスキップの効果がとても効いているのだと思います。レア度がさほど高くないもの選んでやった場合は、1.3倍～1.5倍ぐらいはやいんじゃないかなと思います。
ii_cursor_set_min_enableの効果がとても高いですね。先頭からスキップするとそのレアトークンをスキップするなんてとんでもないという状態。




MIN_ENABLE
合計検索時間
平均検索時間
比率




スキップなし
なし
65.157 sec
0.065 sec
1


先頭から順にスキップ(比較用)
なし
49.956 sec
0.049 sec
1.304


レア度を考慮してスキップ
なし
39.191 sec
0.039 sec
1.663


スキップなし
あり
6.549 sec
0.007 sec
9.949


先頭から順にスキップ(比較用)
あり
19.656 sec
0.019 sec
3.315


レア度を考慮してスキップ
あり
5.771 sec
0.006 sec
11.291



インデックスサイズは約30GiB
注意点
少し残念ですが、オーバラップをスキップするとトークンの間に空白がある場合でもマッチする(ことがある)ようになり、スキップしない場合とマッチ件数が少し異なってしまいます。
そのため、Ngramトークナイザーで空白を除去しないようにする環境変数GRN_NGRAM_TOKENIZER_REMOVE_BLANK_DISABLEも用意しました。これを使えば、当方の環境ではスキップしない場合とマッチ件数が変わらないことを確認しています(1万フレーズぐらいで確認)。これを使う場合はインデックスの再構築が必要です。
いかがでしょうか？",True,{}
groonga/groonga,https://github.com/groonga/groonga,533,2016-04-23T09:21:24Z,2016-05-20T07:05:03Z,2016-06-11T06:31:33Z,MERGED,True,1002,0,14,https://github.com/naoa,ii: skip overlapping tokens in consideration of frequency of token,5,[],https://github.com/groonga/groonga/pull/533,https://github.com/kou,2,https://github.com/groonga/groonga/pull/533#issuecomment-214944938,"iiのチャンクを分割して構築した場合のカーソルスキップの効果を有効的に保ちつつ、Ngramトークナイザーを
高速化するため、token_info_buildでレアトークンを優先的に選択しながらオーバラップトークンをスキップする処理を実装してみました。
環境変数GRN_II_OVERLAP_TOKEN_SKIP_ENABLEで有効になります。
実装の大まかな流れは以下のとおりです。

トークナイズしたトークンとestimate_sizeを一旦全部取得する。
隙間なく遷移するように隣接リストでグラフを構築する。(オーバラップトークンか次の隣接トークン)
グラフを幅優先探索で文頭から末尾までのトークン数が最少になる経路+1の経路のうち、sum(max_estiamted_size / estimated_size)が最も大きくなる(レア度が高い)経路を選ぶ。

ここで最少+1としたのは、TokenBigramでトークンが偶数個の場合、最短経路が一意に決まってしまうためです。
探索は幅優先探索で組み合わせ数が多くなりすぎないように16トークン単位ごとに行っています。
Bigramで16であれば、1000組み合わせ程度で全文検索にはほとんど影響しないと思います。(たぶん。32ごとだと10万組み合わせぐらい)
メモリ節約の観点と実装が簡単だったのでノードの組み合わせ候補をuint32_tのビット位置で表現しています。
極端なレアトークンなしのケース
以下のような極端なレアトークンがないフレーズでは、スキップしないものより1.5倍程度高速になります。

検索フレーズ:「情報処理システム」トークナイザー:TokenBigram
情報:0:1130550 / 報処:1:92306 / 処理:2:1475958 / 理シ:3:95071 /シス:4:928786 /ステ:5:1852329 / テム:6:881885 (token:pos:estimated_size)





利用トークン
検索時間




スキップしない場合(ii_cursor_min_enableあり)
0,1,2,3,4,5,6
0.1850 sec


先頭から順にスキップした場合(比較用)
0,2,4,6
0.240 sec


レア度を考慮してスキップした場合(本パッチ)
0,1,3,4,6
0.1058 sec



極端なレアトークンありのケース
以下の例ではトークナイザーで先頭から単純にスキップするとレアトークンを飛ばしてしまい逆に遅くなってしまいますが、本パッチの場合はほとんど損をしていません。

検索フレーズ:「情報データ」トークナイザー:TokenBigram
情報:0:1130550 / 報デ:1:19402 / デー:2:1068392 / ータ:3:2129864  (token:pos:estimated_size)





利用トークン
検索時間




スキップしない場合(ii_cursor_min_enableあり)
0,1,2,3
0.155 sec


先頭から順にスキップした場合(比較用)
0,2,3
0.446 sec


レア度を考慮してスキップした場合(本パッチ)
0,1,3
0.156 sec



1000フレーズのトータル比較
本パッチの場合が、スキップなしの場合と比べて1.13倍ほど早くなっています。ii_cursor_set_min_enable無しの場合と比較すると11.3倍。
固有名詞を抽出した辞書からランダムに選んだのでレア度が全体的に大き目で、チャンク分割とカーソルスキップの効果がとても効いているのだと思います。レア度がさほど高くないもの選んでやった場合は、1.3倍～1.5倍ぐらいはやいんじゃないかなと思います。
ii_cursor_set_min_enableの効果がとても高いですね。先頭からスキップするとそのレアトークンをスキップするなんてとんでもないという状態。




MIN_ENABLE
合計検索時間
平均検索時間
比率




スキップなし
なし
65.157 sec
0.065 sec
1


先頭から順にスキップ(比較用)
なし
49.956 sec
0.049 sec
1.304


レア度を考慮してスキップ
なし
39.191 sec
0.039 sec
1.663


スキップなし
あり
6.549 sec
0.007 sec
9.949


先頭から順にスキップ(比較用)
あり
19.656 sec
0.019 sec
3.315


レア度を考慮してスキップ
あり
5.771 sec
0.006 sec
11.291



インデックスサイズは約30GiB
注意点
少し残念ですが、オーバラップをスキップするとトークンの間に空白がある場合でもマッチする(ことがある)ようになり、スキップしない場合とマッチ件数が少し異なってしまいます。
そのため、Ngramトークナイザーで空白を除去しないようにする環境変数GRN_NGRAM_TOKENIZER_REMOVE_BLANK_DISABLEも用意しました。これを使えば、当方の環境ではスキップしない場合とマッチ件数が変わらないことを確認しています(1万フレーズぐらいで確認)。これを使う場合はインデックスの再構築が必要です。
いかがでしょうか？","少し残念ですが、オーバラップをスキップするとトークンの間に空白がある場合でもマッチする(ことがある)ようになり、スキップしない場合とマッチ件数が少し異なってしまいます。

これなんですが、たぶん、スキップしてはいけないトークンもスキップしているから発生しているんです。
具体的にどんなデータのときに発生するか教えてもらえますか？確認したいです。",True,{}
groonga/groonga,https://github.com/groonga/groonga,533,2016-04-23T09:21:24Z,2016-05-20T07:05:03Z,2016-06-11T06:31:33Z,MERGED,True,1002,0,14,https://github.com/naoa,ii: skip overlapping tokens in consideration of frequency of token,5,[],https://github.com/groonga/groonga/pull/533,https://github.com/naoa,3,https://github.com/groonga/groonga/pull/533#issuecomment-214985816,"iiのチャンクを分割して構築した場合のカーソルスキップの効果を有効的に保ちつつ、Ngramトークナイザーを
高速化するため、token_info_buildでレアトークンを優先的に選択しながらオーバラップトークンをスキップする処理を実装してみました。
環境変数GRN_II_OVERLAP_TOKEN_SKIP_ENABLEで有効になります。
実装の大まかな流れは以下のとおりです。

トークナイズしたトークンとestimate_sizeを一旦全部取得する。
隙間なく遷移するように隣接リストでグラフを構築する。(オーバラップトークンか次の隣接トークン)
グラフを幅優先探索で文頭から末尾までのトークン数が最少になる経路+1の経路のうち、sum(max_estiamted_size / estimated_size)が最も大きくなる(レア度が高い)経路を選ぶ。

ここで最少+1としたのは、TokenBigramでトークンが偶数個の場合、最短経路が一意に決まってしまうためです。
探索は幅優先探索で組み合わせ数が多くなりすぎないように16トークン単位ごとに行っています。
Bigramで16であれば、1000組み合わせ程度で全文検索にはほとんど影響しないと思います。(たぶん。32ごとだと10万組み合わせぐらい)
メモリ節約の観点と実装が簡単だったのでノードの組み合わせ候補をuint32_tのビット位置で表現しています。
極端なレアトークンなしのケース
以下のような極端なレアトークンがないフレーズでは、スキップしないものより1.5倍程度高速になります。

検索フレーズ:「情報処理システム」トークナイザー:TokenBigram
情報:0:1130550 / 報処:1:92306 / 処理:2:1475958 / 理シ:3:95071 /シス:4:928786 /ステ:5:1852329 / テム:6:881885 (token:pos:estimated_size)





利用トークン
検索時間




スキップしない場合(ii_cursor_min_enableあり)
0,1,2,3,4,5,6
0.1850 sec


先頭から順にスキップした場合(比較用)
0,2,4,6
0.240 sec


レア度を考慮してスキップした場合(本パッチ)
0,1,3,4,6
0.1058 sec



極端なレアトークンありのケース
以下の例ではトークナイザーで先頭から単純にスキップするとレアトークンを飛ばしてしまい逆に遅くなってしまいますが、本パッチの場合はほとんど損をしていません。

検索フレーズ:「情報データ」トークナイザー:TokenBigram
情報:0:1130550 / 報デ:1:19402 / デー:2:1068392 / ータ:3:2129864  (token:pos:estimated_size)





利用トークン
検索時間




スキップしない場合(ii_cursor_min_enableあり)
0,1,2,3
0.155 sec


先頭から順にスキップした場合(比較用)
0,2,3
0.446 sec


レア度を考慮してスキップした場合(本パッチ)
0,1,3
0.156 sec



1000フレーズのトータル比較
本パッチの場合が、スキップなしの場合と比べて1.13倍ほど早くなっています。ii_cursor_set_min_enable無しの場合と比較すると11.3倍。
固有名詞を抽出した辞書からランダムに選んだのでレア度が全体的に大き目で、チャンク分割とカーソルスキップの効果がとても効いているのだと思います。レア度がさほど高くないもの選んでやった場合は、1.3倍～1.5倍ぐらいはやいんじゃないかなと思います。
ii_cursor_set_min_enableの効果がとても高いですね。先頭からスキップするとそのレアトークンをスキップするなんてとんでもないという状態。




MIN_ENABLE
合計検索時間
平均検索時間
比率




スキップなし
なし
65.157 sec
0.065 sec
1


先頭から順にスキップ(比較用)
なし
49.956 sec
0.049 sec
1.304


レア度を考慮してスキップ
なし
39.191 sec
0.039 sec
1.663


スキップなし
あり
6.549 sec
0.007 sec
9.949


先頭から順にスキップ(比較用)
あり
19.656 sec
0.019 sec
3.315


レア度を考慮してスキップ
あり
5.771 sec
0.006 sec
11.291



インデックスサイズは約30GiB
注意点
少し残念ですが、オーバラップをスキップするとトークンの間に空白がある場合でもマッチする(ことがある)ようになり、スキップしない場合とマッチ件数が少し異なってしまいます。
そのため、Ngramトークナイザーで空白を除去しないようにする環境変数GRN_NGRAM_TOKENIZER_REMOVE_BLANK_DISABLEも用意しました。これを使えば、当方の環境ではスキップしない場合とマッチ件数が変わらないことを確認しています(1万フレーズぐらいで確認)。これを使う場合はインデックスの再構築が必要です。
いかがでしょうか？","たとえば本文にデータ ベースとデータベースがあり、検索クエリがデータベースのようなときです。
https://gist.github.com/naoa/1ccaa34bf667c93b401c6ae5b3d0f9f1
空白あり
ADD
通常、TokenBigramは、ADDモードのとき、空白があるデータ ベースというフレーズに対し、ctypesのBLANKを見て、以下のようなトークナイズをします。
デー/ータ/タ/ベー/ース/ス
GET
GETモードでは1文字のトークンはスキップされます。
デー/ータ//ベー/ース
空白なし
ADD
空白なしのデータベースは、ADDモードは以下のようなトークナイズをします。
デー/ータ/タベ/ベー/ース/ス
GET
デー/ータ/タベ/ベー/ース
したがって、空白なしデータベースでタベをスキップした場合、空白ありの方にもヒットすることになります。
検索処理の際にこの差異を判定するのは難しいのではないかと思っています。
書いてて思ったのですが、UNMATUREDなタを残せば区別されるかもしれません。
しかし、以前、チャンクを分割できていないときは１文字をいれるとかなり遅くなった気がします。",True,{}
groonga/groonga,https://github.com/groonga/groonga,533,2016-04-23T09:21:24Z,2016-05-20T07:05:03Z,2016-06-11T06:31:33Z,MERGED,True,1002,0,14,https://github.com/naoa,ii: skip overlapping tokens in consideration of frequency of token,5,[],https://github.com/groonga/groonga/pull/533,https://github.com/kou,4,https://github.com/groonga/groonga/pull/533#issuecomment-216725233,"iiのチャンクを分割して構築した場合のカーソルスキップの効果を有効的に保ちつつ、Ngramトークナイザーを
高速化するため、token_info_buildでレアトークンを優先的に選択しながらオーバラップトークンをスキップする処理を実装してみました。
環境変数GRN_II_OVERLAP_TOKEN_SKIP_ENABLEで有効になります。
実装の大まかな流れは以下のとおりです。

トークナイズしたトークンとestimate_sizeを一旦全部取得する。
隙間なく遷移するように隣接リストでグラフを構築する。(オーバラップトークンか次の隣接トークン)
グラフを幅優先探索で文頭から末尾までのトークン数が最少になる経路+1の経路のうち、sum(max_estiamted_size / estimated_size)が最も大きくなる(レア度が高い)経路を選ぶ。

ここで最少+1としたのは、TokenBigramでトークンが偶数個の場合、最短経路が一意に決まってしまうためです。
探索は幅優先探索で組み合わせ数が多くなりすぎないように16トークン単位ごとに行っています。
Bigramで16であれば、1000組み合わせ程度で全文検索にはほとんど影響しないと思います。(たぶん。32ごとだと10万組み合わせぐらい)
メモリ節約の観点と実装が簡単だったのでノードの組み合わせ候補をuint32_tのビット位置で表現しています。
極端なレアトークンなしのケース
以下のような極端なレアトークンがないフレーズでは、スキップしないものより1.5倍程度高速になります。

検索フレーズ:「情報処理システム」トークナイザー:TokenBigram
情報:0:1130550 / 報処:1:92306 / 処理:2:1475958 / 理シ:3:95071 /シス:4:928786 /ステ:5:1852329 / テム:6:881885 (token:pos:estimated_size)





利用トークン
検索時間




スキップしない場合(ii_cursor_min_enableあり)
0,1,2,3,4,5,6
0.1850 sec


先頭から順にスキップした場合(比較用)
0,2,4,6
0.240 sec


レア度を考慮してスキップした場合(本パッチ)
0,1,3,4,6
0.1058 sec



極端なレアトークンありのケース
以下の例ではトークナイザーで先頭から単純にスキップするとレアトークンを飛ばしてしまい逆に遅くなってしまいますが、本パッチの場合はほとんど損をしていません。

検索フレーズ:「情報データ」トークナイザー:TokenBigram
情報:0:1130550 / 報デ:1:19402 / デー:2:1068392 / ータ:3:2129864  (token:pos:estimated_size)





利用トークン
検索時間




スキップしない場合(ii_cursor_min_enableあり)
0,1,2,3
0.155 sec


先頭から順にスキップした場合(比較用)
0,2,3
0.446 sec


レア度を考慮してスキップした場合(本パッチ)
0,1,3
0.156 sec



1000フレーズのトータル比較
本パッチの場合が、スキップなしの場合と比べて1.13倍ほど早くなっています。ii_cursor_set_min_enable無しの場合と比較すると11.3倍。
固有名詞を抽出した辞書からランダムに選んだのでレア度が全体的に大き目で、チャンク分割とカーソルスキップの効果がとても効いているのだと思います。レア度がさほど高くないもの選んでやった場合は、1.3倍～1.5倍ぐらいはやいんじゃないかなと思います。
ii_cursor_set_min_enableの効果がとても高いですね。先頭からスキップするとそのレアトークンをスキップするなんてとんでもないという状態。




MIN_ENABLE
合計検索時間
平均検索時間
比率




スキップなし
なし
65.157 sec
0.065 sec
1


先頭から順にスキップ(比較用)
なし
49.956 sec
0.049 sec
1.304


レア度を考慮してスキップ
なし
39.191 sec
0.039 sec
1.663


スキップなし
あり
6.549 sec
0.007 sec
9.949


先頭から順にスキップ(比較用)
あり
19.656 sec
0.019 sec
3.315


レア度を考慮してスキップ
あり
5.771 sec
0.006 sec
11.291



インデックスサイズは約30GiB
注意点
少し残念ですが、オーバラップをスキップするとトークンの間に空白がある場合でもマッチする(ことがある)ようになり、スキップしない場合とマッチ件数が少し異なってしまいます。
そのため、Ngramトークナイザーで空白を除去しないようにする環境変数GRN_NGRAM_TOKENIZER_REMOVE_BLANK_DISABLEも用意しました。これを使えば、当方の環境ではスキップしない場合とマッチ件数が変わらないことを確認しています(1万フレーズぐらいで確認)。これを使う場合はインデックスの再構築が必要です。
いかがでしょうか？","ありがとうございます。理解しました。
「データベース」（空白なし）で検索するときに「データ ベース」（空白あり）が存在するかわからないから、それを気にしていたらこの最適化はできないよね？ということですね。
いくつか試していて気がついたんですが、今はこんな挙動になっていました。
データ：

「データベース」（空白なし）
「データ ベース」（空白あり）

キーワード：

「データ ベース」（空白あり）

ヒットするデータ：

「データベース」（空白なし）
「データ ベース」（空白あり）

「データ ベース」（空白あり）で検索したときに空白なしもありもどちらもヒットしています。
（「データベース」（空白なし）で検索すると空白なしだけヒットする。）
であれば、今回の変更で「データベース」（空白なし）で検索したときに空白なしもありもどちらもヒットするようになっても、別によさそうな気がしました。
REMOVE_BLANKがどういう意図で実装されたかわからないとどうあるべきかがわからないですね。。。",True,{}
groonga/groonga,https://github.com/groonga/groonga,533,2016-04-23T09:21:24Z,2016-05-20T07:05:03Z,2016-06-11T06:31:33Z,MERGED,True,1002,0,14,https://github.com/naoa,ii: skip overlapping tokens in consideration of frequency of token,5,[],https://github.com/groonga/groonga/pull/533,https://github.com/kou,5,https://github.com/groonga/groonga/pull/533#issuecomment-216726020,"iiのチャンクを分割して構築した場合のカーソルスキップの効果を有効的に保ちつつ、Ngramトークナイザーを
高速化するため、token_info_buildでレアトークンを優先的に選択しながらオーバラップトークンをスキップする処理を実装してみました。
環境変数GRN_II_OVERLAP_TOKEN_SKIP_ENABLEで有効になります。
実装の大まかな流れは以下のとおりです。

トークナイズしたトークンとestimate_sizeを一旦全部取得する。
隙間なく遷移するように隣接リストでグラフを構築する。(オーバラップトークンか次の隣接トークン)
グラフを幅優先探索で文頭から末尾までのトークン数が最少になる経路+1の経路のうち、sum(max_estiamted_size / estimated_size)が最も大きくなる(レア度が高い)経路を選ぶ。

ここで最少+1としたのは、TokenBigramでトークンが偶数個の場合、最短経路が一意に決まってしまうためです。
探索は幅優先探索で組み合わせ数が多くなりすぎないように16トークン単位ごとに行っています。
Bigramで16であれば、1000組み合わせ程度で全文検索にはほとんど影響しないと思います。(たぶん。32ごとだと10万組み合わせぐらい)
メモリ節約の観点と実装が簡単だったのでノードの組み合わせ候補をuint32_tのビット位置で表現しています。
極端なレアトークンなしのケース
以下のような極端なレアトークンがないフレーズでは、スキップしないものより1.5倍程度高速になります。

検索フレーズ:「情報処理システム」トークナイザー:TokenBigram
情報:0:1130550 / 報処:1:92306 / 処理:2:1475958 / 理シ:3:95071 /シス:4:928786 /ステ:5:1852329 / テム:6:881885 (token:pos:estimated_size)





利用トークン
検索時間




スキップしない場合(ii_cursor_min_enableあり)
0,1,2,3,4,5,6
0.1850 sec


先頭から順にスキップした場合(比較用)
0,2,4,6
0.240 sec


レア度を考慮してスキップした場合(本パッチ)
0,1,3,4,6
0.1058 sec



極端なレアトークンありのケース
以下の例ではトークナイザーで先頭から単純にスキップするとレアトークンを飛ばしてしまい逆に遅くなってしまいますが、本パッチの場合はほとんど損をしていません。

検索フレーズ:「情報データ」トークナイザー:TokenBigram
情報:0:1130550 / 報デ:1:19402 / デー:2:1068392 / ータ:3:2129864  (token:pos:estimated_size)





利用トークン
検索時間




スキップしない場合(ii_cursor_min_enableあり)
0,1,2,3
0.155 sec


先頭から順にスキップした場合(比較用)
0,2,3
0.446 sec


レア度を考慮してスキップした場合(本パッチ)
0,1,3
0.156 sec



1000フレーズのトータル比較
本パッチの場合が、スキップなしの場合と比べて1.13倍ほど早くなっています。ii_cursor_set_min_enable無しの場合と比較すると11.3倍。
固有名詞を抽出した辞書からランダムに選んだのでレア度が全体的に大き目で、チャンク分割とカーソルスキップの効果がとても効いているのだと思います。レア度がさほど高くないもの選んでやった場合は、1.3倍～1.5倍ぐらいはやいんじゃないかなと思います。
ii_cursor_set_min_enableの効果がとても高いですね。先頭からスキップするとそのレアトークンをスキップするなんてとんでもないという状態。




MIN_ENABLE
合計検索時間
平均検索時間
比率




スキップなし
なし
65.157 sec
0.065 sec
1


先頭から順にスキップ(比較用)
なし
49.956 sec
0.049 sec
1.304


レア度を考慮してスキップ
なし
39.191 sec
0.039 sec
1.663


スキップなし
あり
6.549 sec
0.007 sec
9.949


先頭から順にスキップ(比較用)
あり
19.656 sec
0.019 sec
3.315


レア度を考慮してスキップ
あり
5.771 sec
0.006 sec
11.291



インデックスサイズは約30GiB
注意点
少し残念ですが、オーバラップをスキップするとトークンの間に空白がある場合でもマッチする(ことがある)ようになり、スキップしない場合とマッチ件数が少し異なってしまいます。
そのため、Ngramトークナイザーで空白を除去しないようにする環境変数GRN_NGRAM_TOKENIZER_REMOVE_BLANK_DISABLEも用意しました。これを使えば、当方の環境ではスキップしない場合とマッチ件数が変わらないことを確認しています(1万フレーズぐらいで確認)。これを使う場合はインデックスの再構築が必要です。
いかがでしょうか？","森さん、文字列の正規化のREMOVE_BLANKをどういう意図で導入したか教えてもらえませんか？
現在は次の挙動になっています。（検索語はgrn_ii_select()に渡るテキストであって、クエリーフォーマットのテキストではありません。なので、空白ありの場合はAND検索ではなく、フレーズ検索です。）



テキスト
「データベース」（空白なし）で検索
「データ ベース」（空白あり）で検索




データベース（空白なし）
ヒット(*a)
ヒット(*b)


データ ベース（空白あり）
ヒットしない(*c)
ヒット(*d)



このうち、「(*a)」と「(*d)」は入力値そのものがヒットしているのでREMOVE_BLANKは関係ないと思います。
「(*b)」はREMOVE_BLANKのおかげでヒットするようになっていると思います。
で、気になるのが「(*c)」なんですが、REMOVE_BLANKのおかげでヒットするようになってもよさそうに思います。これがヒットしないのは意図的でしょうか？それとも単に今の実装がそうなっているだけでヒットした方がよいのでしょうか？",True,{}
groonga/groonga,https://github.com/groonga/groonga,533,2016-04-23T09:21:24Z,2016-05-20T07:05:03Z,2016-06-11T06:31:33Z,MERGED,True,1002,0,14,https://github.com/naoa,ii: skip overlapping tokens in consideration of frequency of token,5,[],https://github.com/groonga/groonga/pull/533,https://github.com/naoa,6,https://github.com/groonga/groonga/pull/533#issuecomment-216740247,"iiのチャンクを分割して構築した場合のカーソルスキップの効果を有効的に保ちつつ、Ngramトークナイザーを
高速化するため、token_info_buildでレアトークンを優先的に選択しながらオーバラップトークンをスキップする処理を実装してみました。
環境変数GRN_II_OVERLAP_TOKEN_SKIP_ENABLEで有効になります。
実装の大まかな流れは以下のとおりです。

トークナイズしたトークンとestimate_sizeを一旦全部取得する。
隙間なく遷移するように隣接リストでグラフを構築する。(オーバラップトークンか次の隣接トークン)
グラフを幅優先探索で文頭から末尾までのトークン数が最少になる経路+1の経路のうち、sum(max_estiamted_size / estimated_size)が最も大きくなる(レア度が高い)経路を選ぶ。

ここで最少+1としたのは、TokenBigramでトークンが偶数個の場合、最短経路が一意に決まってしまうためです。
探索は幅優先探索で組み合わせ数が多くなりすぎないように16トークン単位ごとに行っています。
Bigramで16であれば、1000組み合わせ程度で全文検索にはほとんど影響しないと思います。(たぶん。32ごとだと10万組み合わせぐらい)
メモリ節約の観点と実装が簡単だったのでノードの組み合わせ候補をuint32_tのビット位置で表現しています。
極端なレアトークンなしのケース
以下のような極端なレアトークンがないフレーズでは、スキップしないものより1.5倍程度高速になります。

検索フレーズ:「情報処理システム」トークナイザー:TokenBigram
情報:0:1130550 / 報処:1:92306 / 処理:2:1475958 / 理シ:3:95071 /シス:4:928786 /ステ:5:1852329 / テム:6:881885 (token:pos:estimated_size)





利用トークン
検索時間




スキップしない場合(ii_cursor_min_enableあり)
0,1,2,3,4,5,6
0.1850 sec


先頭から順にスキップした場合(比較用)
0,2,4,6
0.240 sec


レア度を考慮してスキップした場合(本パッチ)
0,1,3,4,6
0.1058 sec



極端なレアトークンありのケース
以下の例ではトークナイザーで先頭から単純にスキップするとレアトークンを飛ばしてしまい逆に遅くなってしまいますが、本パッチの場合はほとんど損をしていません。

検索フレーズ:「情報データ」トークナイザー:TokenBigram
情報:0:1130550 / 報デ:1:19402 / デー:2:1068392 / ータ:3:2129864  (token:pos:estimated_size)





利用トークン
検索時間




スキップしない場合(ii_cursor_min_enableあり)
0,1,2,3
0.155 sec


先頭から順にスキップした場合(比較用)
0,2,3
0.446 sec


レア度を考慮してスキップした場合(本パッチ)
0,1,3
0.156 sec



1000フレーズのトータル比較
本パッチの場合が、スキップなしの場合と比べて1.13倍ほど早くなっています。ii_cursor_set_min_enable無しの場合と比較すると11.3倍。
固有名詞を抽出した辞書からランダムに選んだのでレア度が全体的に大き目で、チャンク分割とカーソルスキップの効果がとても効いているのだと思います。レア度がさほど高くないもの選んでやった場合は、1.3倍～1.5倍ぐらいはやいんじゃないかなと思います。
ii_cursor_set_min_enableの効果がとても高いですね。先頭からスキップするとそのレアトークンをスキップするなんてとんでもないという状態。




MIN_ENABLE
合計検索時間
平均検索時間
比率




スキップなし
なし
65.157 sec
0.065 sec
1


先頭から順にスキップ(比較用)
なし
49.956 sec
0.049 sec
1.304


レア度を考慮してスキップ
なし
39.191 sec
0.039 sec
1.663


スキップなし
あり
6.549 sec
0.007 sec
9.949


先頭から順にスキップ(比較用)
あり
19.656 sec
0.019 sec
3.315


レア度を考慮してスキップ
あり
5.771 sec
0.006 sec
11.291



インデックスサイズは約30GiB
注意点
少し残念ですが、オーバラップをスキップするとトークンの間に空白がある場合でもマッチする(ことがある)ようになり、スキップしない場合とマッチ件数が少し異なってしまいます。
そのため、Ngramトークナイザーで空白を除去しないようにする環境変数GRN_NGRAM_TOKENIZER_REMOVE_BLANK_DISABLEも用意しました。これを使えば、当方の環境ではスキップしない場合とマッチ件数が変わらないことを確認しています(1万フレーズぐらいで確認)。これを使う場合はインデックスの再構築が必要です。
いかがでしょうか？","もう一つ変わるケースがありました。
NormalizerAutoを使っていて改行コードがある場合です。
NormalizerAutoは改行コードも消すのでした。
tokenize TokenBigram ""データ\nベース"" NormalizerAuto --mode ADD
[
  [
    0,
    0.0,
    0.0
  ],
  [
    {
      ""value"": ""デー"",
      ""position"": 0,
      ""force_prefix"": false
    },
    {
      ""value"": ""ータ"",
      ""position"": 1,
      ""force_prefix"": false
    },
    {
      ""value"": ""タ"",
      ""position"": 2,
      ""force_prefix"": false
    },
    {
      ""value"": ""ベー"",
      ""position"": 3,
      ""force_prefix"": false
    },
    {
      ""value"": ""ース"",
      ""position"": 4,
      ""force_prefix"": false
    },
    {
      ""value"": ""ス"",
      ""position"": 5,
      ""force_prefix"": false
    }
  ]
]
空白を含まない検索クエリに対し空白ありもヒットするのはTokenBigramIgnoreBlankが別に用意されているので、TokenBigramは、空白を含まない検索クエリに対して空白を含むものがヒットしないようにしているのだと解釈していました。",True,{}
groonga/groonga,https://github.com/groonga/groonga,533,2016-04-23T09:21:24Z,2016-05-20T07:05:03Z,2016-06-11T06:31:33Z,MERGED,True,1002,0,14,https://github.com/naoa,ii: skip overlapping tokens in consideration of frequency of token,5,[],https://github.com/groonga/groonga/pull/533,https://github.com/daijiro,7,https://github.com/groonga/groonga/pull/533#issuecomment-220532919,"iiのチャンクを分割して構築した場合のカーソルスキップの効果を有効的に保ちつつ、Ngramトークナイザーを
高速化するため、token_info_buildでレアトークンを優先的に選択しながらオーバラップトークンをスキップする処理を実装してみました。
環境変数GRN_II_OVERLAP_TOKEN_SKIP_ENABLEで有効になります。
実装の大まかな流れは以下のとおりです。

トークナイズしたトークンとestimate_sizeを一旦全部取得する。
隙間なく遷移するように隣接リストでグラフを構築する。(オーバラップトークンか次の隣接トークン)
グラフを幅優先探索で文頭から末尾までのトークン数が最少になる経路+1の経路のうち、sum(max_estiamted_size / estimated_size)が最も大きくなる(レア度が高い)経路を選ぶ。

ここで最少+1としたのは、TokenBigramでトークンが偶数個の場合、最短経路が一意に決まってしまうためです。
探索は幅優先探索で組み合わせ数が多くなりすぎないように16トークン単位ごとに行っています。
Bigramで16であれば、1000組み合わせ程度で全文検索にはほとんど影響しないと思います。(たぶん。32ごとだと10万組み合わせぐらい)
メモリ節約の観点と実装が簡単だったのでノードの組み合わせ候補をuint32_tのビット位置で表現しています。
極端なレアトークンなしのケース
以下のような極端なレアトークンがないフレーズでは、スキップしないものより1.5倍程度高速になります。

検索フレーズ:「情報処理システム」トークナイザー:TokenBigram
情報:0:1130550 / 報処:1:92306 / 処理:2:1475958 / 理シ:3:95071 /シス:4:928786 /ステ:5:1852329 / テム:6:881885 (token:pos:estimated_size)





利用トークン
検索時間




スキップしない場合(ii_cursor_min_enableあり)
0,1,2,3,4,5,6
0.1850 sec


先頭から順にスキップした場合(比較用)
0,2,4,6
0.240 sec


レア度を考慮してスキップした場合(本パッチ)
0,1,3,4,6
0.1058 sec



極端なレアトークンありのケース
以下の例ではトークナイザーで先頭から単純にスキップするとレアトークンを飛ばしてしまい逆に遅くなってしまいますが、本パッチの場合はほとんど損をしていません。

検索フレーズ:「情報データ」トークナイザー:TokenBigram
情報:0:1130550 / 報デ:1:19402 / デー:2:1068392 / ータ:3:2129864  (token:pos:estimated_size)





利用トークン
検索時間




スキップしない場合(ii_cursor_min_enableあり)
0,1,2,3
0.155 sec


先頭から順にスキップした場合(比較用)
0,2,3
0.446 sec


レア度を考慮してスキップした場合(本パッチ)
0,1,3
0.156 sec



1000フレーズのトータル比較
本パッチの場合が、スキップなしの場合と比べて1.13倍ほど早くなっています。ii_cursor_set_min_enable無しの場合と比較すると11.3倍。
固有名詞を抽出した辞書からランダムに選んだのでレア度が全体的に大き目で、チャンク分割とカーソルスキップの効果がとても効いているのだと思います。レア度がさほど高くないもの選んでやった場合は、1.3倍～1.5倍ぐらいはやいんじゃないかなと思います。
ii_cursor_set_min_enableの効果がとても高いですね。先頭からスキップするとそのレアトークンをスキップするなんてとんでもないという状態。




MIN_ENABLE
合計検索時間
平均検索時間
比率




スキップなし
なし
65.157 sec
0.065 sec
1


先頭から順にスキップ(比較用)
なし
49.956 sec
0.049 sec
1.304


レア度を考慮してスキップ
なし
39.191 sec
0.039 sec
1.663


スキップなし
あり
6.549 sec
0.007 sec
9.949


先頭から順にスキップ(比較用)
あり
19.656 sec
0.019 sec
3.315


レア度を考慮してスキップ
あり
5.771 sec
0.006 sec
11.291



インデックスサイズは約30GiB
注意点
少し残念ですが、オーバラップをスキップするとトークンの間に空白がある場合でもマッチする(ことがある)ようになり、スキップしない場合とマッチ件数が少し異なってしまいます。
そのため、Ngramトークナイザーで空白を除去しないようにする環境変数GRN_NGRAM_TOKENIZER_REMOVE_BLANK_DISABLEも用意しました。これを使えば、当方の環境ではスキップしない場合とマッチ件数が変わらないことを確認しています(1万フレーズぐらいで確認)。これを使う場合はインデックスの再構築が必要です。
いかがでしょうか？","REMOVE_BLANKの時は(*c)がヒットしても構わない気がしますね!
TokenBigramの時には、空白を含まない検索クエリに対して空白を含むものがヒットすると、
ノイズが増える場合がありそうなので、確かに悩ましいところです。。
でも、すばらしいパッチですし、
デフォルトの挙動が変わるわけではないのでまずは取り込ませていただきます!!",True,{}
groonga/groonga,https://github.com/groonga/groonga,534,2016-04-23T14:11:07Z,2016-04-25T05:20:57Z,2016-04-25T08:32:44Z,MERGED,True,23,0,2,https://github.com/naoa,doc table_tokenize: add index_column option,1,[],https://github.com/groonga/groonga/pull/534,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/534,"とても簡素ですが存在があるだけでも示した方がよいと思って、追加したtable_tokenizeのindex_columnオプション項目を追加しました。
なんかたくさん書き換わりました。","とても簡素ですが存在があるだけでも示した方がよいと思って、追加したtable_tokenizeのindex_columnオプション項目を追加しました。
なんかたくさん書き換わりました。",True,{}
groonga/groonga,https://github.com/groonga/groonga,534,2016-04-23T14:11:07Z,2016-04-25T05:20:57Z,2016-04-25T08:32:44Z,MERGED,True,23,0,2,https://github.com/naoa,doc table_tokenize: add index_column option,1,[],https://github.com/groonga/groonga/pull/534,https://github.com/kou,2,https://github.com/groonga/groonga/pull/534#issuecomment-213962359,"とても簡素ですが存在があるだけでも示した方がよいと思って、追加したtable_tokenizeのindex_columnオプション項目を追加しました。
なんかたくさん書き換わりました。","ありがとうございます。
reference.poは対象のやつだけコミットにいれてもらえますか？",True,{}
groonga/groonga,https://github.com/groonga/groonga,534,2016-04-23T14:11:07Z,2016-04-25T05:20:57Z,2016-04-25T08:32:44Z,MERGED,True,23,0,2,https://github.com/naoa,doc table_tokenize: add index_column option,1,[],https://github.com/groonga/groonga/pull/534,https://github.com/naoa,3,https://github.com/groonga/groonga/pull/534#issuecomment-214096822,"とても簡素ですが存在があるだけでも示した方がよいと思って、追加したtable_tokenizeのindex_columnオプション項目を追加しました。
なんかたくさん書き換わりました。","修正しました。
make htmlならpoが自動更新されないんですね。
とりあえず、makeでpoを自動更新してもらって、該当部分だけをコピーしてからチェックアウトして戻して、ペーストして翻訳する、みたいな流れがいいんですかね。",True,{}
groonga/groonga,https://github.com/groonga/groonga,534,2016-04-23T14:11:07Z,2016-04-25T05:20:57Z,2016-04-25T08:32:44Z,MERGED,True,23,0,2,https://github.com/naoa,doc table_tokenize: add index_column option,1,[],https://github.com/groonga/groonga/pull/534,https://github.com/kou,4,https://github.com/groonga/groonga/pull/534#issuecomment-214137235,"とても簡素ですが存在があるだけでも示した方がよいと思って、追加したtable_tokenizeのindex_columnオプション項目を追加しました。
なんかたくさん書き換わりました。","ありがとうございます。マージしました。
git add -pを使うとよいです！",True,{}
groonga/groonga,https://github.com/groonga/groonga,534,2016-04-23T14:11:07Z,2016-04-25T05:20:57Z,2016-04-25T08:32:44Z,MERGED,True,23,0,2,https://github.com/naoa,doc table_tokenize: add index_column option,1,[],https://github.com/groonga/groonga/pull/534,https://github.com/naoa,5,https://github.com/groonga/groonga/pull/534#issuecomment-214205961,"とても簡素ですが存在があるだけでも示した方がよいと思って、追加したtable_tokenizeのindex_columnオプション項目を追加しました。
なんかたくさん書き換わりました。","マージありがとうございます。
こんなオプションがあったのですね。
今度使ってみようと思います。",True,{}
groonga/groonga,https://github.com/groonga/groonga,538,2016-04-26T07:39:57Z,2016-04-27T05:20:13Z,2016-04-27T05:57:58Z,MERGED,True,37,0,2,https://github.com/cosmo0920,doc install debian: Add limitations note for systemd in debian,2,[],https://github.com/groonga/groonga/pull/538,https://github.com/cosmo0920,1,https://github.com/groonga/groonga/pull/538,Related to #536 (comment).,Related to #536 (comment).,True,{}
groonga/groonga,https://github.com/groonga/groonga,539,2016-05-08T11:55:22Z,2016-05-08T12:57:59Z,2016-05-08T13:04:39Z,MERGED,True,75,5,3,https://github.com/naoa,Don't resolve record id on dynamic column,1,[],https://github.com/groonga/groonga/pull/539,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/539,"現在、動的カラムのRECORDのidは、resultテーブルのidでなく、元の実テーブルのidを辿っていると思うのですが、これはresultのidで良いのではないですか？
以下は本パッチ前の結果です。valueでの_idが0になってしまっています。
table_create Items TABLE_HASH_KEY ShortText
[[0,0.0,0.0],true]
column_create Items price COLUMN_SCALAR UInt32
[[0,0.0,0.0],true]
load --table Items
[
{""_key"": ""Book"",  ""price"": 1498},
{""_key"": ""Food"",  ""price"": 1198},
{""_key"": ""Drink"", ""price"": 600}
]
[[0,0.0,0.0],3]
select Items   --filter 'price < 1200'   \
--output_columns _id,_key,price,filtered   \
--column[filtered].stage filtered   \
--column[filtered].type UInt32   \
--column[filtered].flags COLUMN_SCALAR \ 
--column[filtered].value '_id'
[
  [
    0,
    0.0,
    0.0
  ],
  [
    [
      [
        2
      ],
      [
        [
          ""_id"",
          ""UInt32""
        ],
        [
          ""_key"",
          ""ShortText""
        ],
        [
          ""price"",
          ""UInt32""
        ],
        [
          ""filtered"",
          ""UInt32""
        ]
      ],
      [
        2,
        ""Food"",
        1198,
        0
      ],
      [
        3,
        ""Drink"",
        600,
        3
      ]
    ]
  ]
]","現在、動的カラムのRECORDのidは、resultテーブルのidでなく、元の実テーブルのidを辿っていると思うのですが、これはresultのidで良いのではないですか？
以下は本パッチ前の結果です。valueでの_idが0になってしまっています。
table_create Items TABLE_HASH_KEY ShortText
[[0,0.0,0.0],true]
column_create Items price COLUMN_SCALAR UInt32
[[0,0.0,0.0],true]
load --table Items
[
{""_key"": ""Book"",  ""price"": 1498},
{""_key"": ""Food"",  ""price"": 1198},
{""_key"": ""Drink"", ""price"": 600}
]
[[0,0.0,0.0],3]
select Items   --filter 'price < 1200'   \
--output_columns _id,_key,price,filtered   \
--column[filtered].stage filtered   \
--column[filtered].type UInt32   \
--column[filtered].flags COLUMN_SCALAR \ 
--column[filtered].value '_id'
[
  [
    0,
    0.0,
    0.0
  ],
  [
    [
      [
        2
      ],
      [
        [
          ""_id"",
          ""UInt32""
        ],
        [
          ""_key"",
          ""ShortText""
        ],
        [
          ""price"",
          ""UInt32""
        ],
        [
          ""filtered"",
          ""UInt32""
        ]
      ],
      [
        2,
        ""Food"",
        1198,
        0
      ],
      [
        3,
        ""Drink"",
        600,
        3
      ]
    ]
  ]
]",True,{}
groonga/groonga,https://github.com/groonga/groonga,539,2016-05-08T11:55:22Z,2016-05-08T12:57:59Z,2016-05-08T13:04:39Z,MERGED,True,75,5,3,https://github.com/naoa,Don't resolve record id on dynamic column,1,[],https://github.com/groonga/groonga/pull/539,https://github.com/kou,2,https://github.com/groonga/groonga/pull/539#issuecomment-217716859,"現在、動的カラムのRECORDのidは、resultテーブルのidでなく、元の実テーブルのidを辿っていると思うのですが、これはresultのidで良いのではないですか？
以下は本パッチ前の結果です。valueでの_idが0になってしまっています。
table_create Items TABLE_HASH_KEY ShortText
[[0,0.0,0.0],true]
column_create Items price COLUMN_SCALAR UInt32
[[0,0.0,0.0],true]
load --table Items
[
{""_key"": ""Book"",  ""price"": 1498},
{""_key"": ""Food"",  ""price"": 1198},
{""_key"": ""Drink"", ""price"": 600}
]
[[0,0.0,0.0],3]
select Items   --filter 'price < 1200'   \
--output_columns _id,_key,price,filtered   \
--column[filtered].stage filtered   \
--column[filtered].type UInt32   \
--column[filtered].flags COLUMN_SCALAR \ 
--column[filtered].value '_id'
[
  [
    0,
    0.0,
    0.0
  ],
  [
    [
      [
        2
      ],
      [
        [
          ""_id"",
          ""UInt32""
        ],
        [
          ""_key"",
          ""ShortText""
        ],
        [
          ""price"",
          ""UInt32""
        ],
        [
          ""filtered"",
          ""UInt32""
        ]
      ],
      [
        2,
        ""Food"",
        1198,
        0
      ],
      [
        3,
        ""Drink"",
        600,
        3
      ]
    ]
  ]
]",その通りですね！,True,{}
groonga/groonga,https://github.com/groonga/groonga,539,2016-05-08T11:55:22Z,2016-05-08T12:57:59Z,2016-05-08T13:04:39Z,MERGED,True,75,5,3,https://github.com/naoa,Don't resolve record id on dynamic column,1,[],https://github.com/groonga/groonga/pull/539,https://github.com/naoa,3,https://github.com/groonga/groonga/pull/539#issuecomment-217717158,"現在、動的カラムのRECORDのidは、resultテーブルのidでなく、元の実テーブルのidを辿っていると思うのですが、これはresultのidで良いのではないですか？
以下は本パッチ前の結果です。valueでの_idが0になってしまっています。
table_create Items TABLE_HASH_KEY ShortText
[[0,0.0,0.0],true]
column_create Items price COLUMN_SCALAR UInt32
[[0,0.0,0.0],true]
load --table Items
[
{""_key"": ""Book"",  ""price"": 1498},
{""_key"": ""Food"",  ""price"": 1198},
{""_key"": ""Drink"", ""price"": 600}
]
[[0,0.0,0.0],3]
select Items   --filter 'price < 1200'   \
--output_columns _id,_key,price,filtered   \
--column[filtered].stage filtered   \
--column[filtered].type UInt32   \
--column[filtered].flags COLUMN_SCALAR \ 
--column[filtered].value '_id'
[
  [
    0,
    0.0,
    0.0
  ],
  [
    [
      [
        2
      ],
      [
        [
          ""_id"",
          ""UInt32""
        ],
        [
          ""_key"",
          ""ShortText""
        ],
        [
          ""price"",
          ""UInt32""
        ],
        [
          ""filtered"",
          ""UInt32""
        ]
      ],
      [
        2,
        ""Food"",
        1198,
        0
      ],
      [
        3,
        ""Drink"",
        600,
        3
      ]
    ]
  ]
]",マージありがとうございます！,True,{}
groonga/groonga,https://github.com/groonga/groonga,540,2016-05-08T21:59:47Z,2016-05-17T15:27:53Z,2016-05-17T15:37:51Z,CLOSED,False,1086,224,15,https://github.com/naoa,select drilldown: support dynamic column creation as initial staging,5,[],https://github.com/groonga/groonga/pull/540,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/540,"groonga-dev 04027
以下の構文を実装してみました。
  --drilldown[label].column[rank].stage initial \
  --drilldown[label].column[rank].type UInt32 \
  --drilldown[label].column[rank].flags COLUMN_SCALAR \
  --drilldown[label].column[rank].value 'rank()' \
  --drilldown[label].column[rank].sortby _nsubrecs


a68521f rank関数rank()
8cc11a7 sortしてから動的カラムでvalueの評価のサポートcolumn[label].sortby
8cc11a7...76ba4cf ドリルダウン結果で動的カラムを使うためのコード整理
3a345f8 ドリルダウン結果での動的カラム(initial)のサポートdrilldown[label].column[label2]...

コード共有の関係上、column[label].sortbyで通常の動的カラムでもsortしてからのvalueの評価ができるようにしています。
おそらく、通常の動的カラムでこのような用途はstage outputでの実装を想定している感じですが、通常の動的カラムでは除外すべきでしょうか？","groonga-dev 04027
以下の構文を実装してみました。
  --drilldown[label].column[rank].stage initial \
  --drilldown[label].column[rank].type UInt32 \
  --drilldown[label].column[rank].flags COLUMN_SCALAR \
  --drilldown[label].column[rank].value 'rank()' \
  --drilldown[label].column[rank].sortby _nsubrecs


a68521f rank関数rank()
8cc11a7 sortしてから動的カラムでvalueの評価のサポートcolumn[label].sortby
8cc11a7...76ba4cf ドリルダウン結果で動的カラムを使うためのコード整理
3a345f8 ドリルダウン結果での動的カラム(initial)のサポートdrilldown[label].column[label2]...

コード共有の関係上、column[label].sortbyで通常の動的カラムでもsortしてからのvalueの評価ができるようにしています。
おそらく、通常の動的カラムでこのような用途はstage outputでの実装を想定している感じですが、通常の動的カラムでは除外すべきでしょうか？",True,{}
groonga/groonga,https://github.com/groonga/groonga,540,2016-05-08T21:59:47Z,2016-05-17T15:27:53Z,2016-05-17T15:37:51Z,CLOSED,False,1086,224,15,https://github.com/naoa,select drilldown: support dynamic column creation as initial staging,5,[],https://github.com/groonga/groonga/pull/540,https://github.com/kou,2,https://github.com/groonga/groonga/pull/540#issuecomment-217786675,"groonga-dev 04027
以下の構文を実装してみました。
  --drilldown[label].column[rank].stage initial \
  --drilldown[label].column[rank].type UInt32 \
  --drilldown[label].column[rank].flags COLUMN_SCALAR \
  --drilldown[label].column[rank].value 'rank()' \
  --drilldown[label].column[rank].sortby _nsubrecs


a68521f rank関数rank()
8cc11a7 sortしてから動的カラムでvalueの評価のサポートcolumn[label].sortby
8cc11a7...76ba4cf ドリルダウン結果で動的カラムを使うためのコード整理
3a345f8 ドリルダウン結果での動的カラム(initial)のサポートdrilldown[label].column[label2]...

コード共有の関係上、column[label].sortbyで通常の動的カラムでもsortしてからのvalueの評価ができるようにしています。
おそらく、通常の動的カラムでこのような用途はstage outputでの実装を想定している感じですが、通常の動的カラムでは除外すべきでしょうか？","ちょっとこのままだと取り込めないのでわけてもらえますか？
まずは 8cc11a7...76ba4cf だけにしてもらえますか？
あと、rankは重複した値があったときは同じ値になるみたいなので、この実装だとrankじゃないみたいです。record_number()くらいの方がよさそうです。",True,{}
groonga/groonga,https://github.com/groonga/groonga,540,2016-05-08T21:59:47Z,2016-05-17T15:27:53Z,2016-05-17T15:37:51Z,CLOSED,False,1086,224,15,https://github.com/naoa,select drilldown: support dynamic column creation as initial staging,5,[],https://github.com/groonga/groonga/pull/540,https://github.com/kou,3,https://github.com/groonga/groonga/pull/540#issuecomment-217787165,"groonga-dev 04027
以下の構文を実装してみました。
  --drilldown[label].column[rank].stage initial \
  --drilldown[label].column[rank].type UInt32 \
  --drilldown[label].column[rank].flags COLUMN_SCALAR \
  --drilldown[label].column[rank].value 'rank()' \
  --drilldown[label].column[rank].sortby _nsubrecs


a68521f rank関数rank()
8cc11a7 sortしてから動的カラムでvalueの評価のサポートcolumn[label].sortby
8cc11a7...76ba4cf ドリルダウン結果で動的カラムを使うためのコード整理
3a345f8 ドリルダウン結果での動的カラム(initial)のサポートdrilldown[label].column[label2]...

コード共有の関係上、column[label].sortbyで通常の動的カラムでもsortしてからのvalueの評価ができるようにしています。
おそらく、通常の動的カラムでこのような用途はstage outputでの実装を想定している感じですが、通常の動的カラムでは除外すべきでしょうか？","細かいことはわけた後に個別にコメントしますが、sortbyの評価はウィンドウ関数内で実装するのがいいんじゃないかと思っています。
sortbyはウィンドウ関数を使っていないときは無視がいいと思います。
outputステージのときはすでにソートされたデータにlimitが効いた後のレコードだけに対して値を設定する実装を想定しています。（必要ないレコードにはカラムを設定しない。）",True,{}
groonga/groonga,https://github.com/groonga/groonga,540,2016-05-08T21:59:47Z,2016-05-17T15:27:53Z,2016-05-17T15:37:51Z,CLOSED,False,1086,224,15,https://github.com/naoa,select drilldown: support dynamic column creation as initial staging,5,[],https://github.com/groonga/groonga/pull/540,https://github.com/naoa,4,https://github.com/groonga/groonga/pull/540#issuecomment-217795558,"groonga-dev 04027
以下の構文を実装してみました。
  --drilldown[label].column[rank].stage initial \
  --drilldown[label].column[rank].type UInt32 \
  --drilldown[label].column[rank].flags COLUMN_SCALAR \
  --drilldown[label].column[rank].value 'rank()' \
  --drilldown[label].column[rank].sortby _nsubrecs


a68521f rank関数rank()
8cc11a7 sortしてから動的カラムでvalueの評価のサポートcolumn[label].sortby
8cc11a7...76ba4cf ドリルダウン結果で動的カラムを使うためのコード整理
3a345f8 ドリルダウン結果での動的カラム(initial)のサポートdrilldown[label].column[label2]...

コード共有の関係上、column[label].sortbyで通常の動的カラムでもsortしてからのvalueの評価ができるようにしています。
おそらく、通常の動的カラムでこのような用途はstage outputでの実装を想定している感じですが、通常の動的カラムでは除外すべきでしょうか？","まずは 8cc11a7...76ba4cf だけにしてもらえますか？

それ相当なものを#541 に分けました。

あと、rankは重複した値があったときは同じ値になるみたいなので、この実装だとrankじゃないみたいです。record_number()くらいの方がよさそうです。

なるほど、rankだと、
1, 10
2, 5
2, 5
4, 3
みたいなことが期待されるんですね。

細かいことはわけた後に個別にコメントしますが、sortbyの評価はウィンドウ関数内で実装するのがいいんじゃないかと思っています。

まだイメージがつかめてないのですが、sortbyとvalueで関数が同時に指定された場合、レコード群をまとめて関数側でソートとかランク付けとか処理できるようにするみたいな感じなのですかね。",True,{}
groonga/groonga,https://github.com/groonga/groonga,540,2016-05-08T21:59:47Z,2016-05-17T15:27:53Z,2016-05-17T15:37:51Z,CLOSED,False,1086,224,15,https://github.com/naoa,select drilldown: support dynamic column creation as initial staging,5,[],https://github.com/groonga/groonga/pull/540,https://github.com/kou,5,https://github.com/groonga/groonga/pull/540#issuecomment-217822681,"groonga-dev 04027
以下の構文を実装してみました。
  --drilldown[label].column[rank].stage initial \
  --drilldown[label].column[rank].type UInt32 \
  --drilldown[label].column[rank].flags COLUMN_SCALAR \
  --drilldown[label].column[rank].value 'rank()' \
  --drilldown[label].column[rank].sortby _nsubrecs


a68521f rank関数rank()
8cc11a7 sortしてから動的カラムでvalueの評価のサポートcolumn[label].sortby
8cc11a7...76ba4cf ドリルダウン結果で動的カラムを使うためのコード整理
3a345f8 ドリルダウン結果での動的カラム(initial)のサポートdrilldown[label].column[label2]...

コード共有の関係上、column[label].sortbyで通常の動的カラムでもsortしてからのvalueの評価ができるようにしています。
おそらく、通常の動的カラムでこのような用途はstage outputでの実装を想定している感じですが、通常の動的カラムでは除外すべきでしょうか？","なるほど、rankだと、
1, 10
2, 5
2, 5
4, 3
みたいなことが期待されるんですね。

はい、そうです。

まだイメージがつかめてないのですが、sortbyとvalueで関数が同時に指定された場合、レコード群をまとめて関数側でソートとかランク付けとか処理できるようにするみたいな感じなのですかね。

どこで役割分担を切るかはまだ決めかねていますが、そういう感じです。
PostgreSQLには https://www.postgresql.jp/document/9.5/html/functions-window.html みたいなウィンドウ関数があるんですが、これらを実装しようとしたら各レコード毎に関数を呼ぶ、というやり方だと対応できないんじゃないかと思うんですよねぇ。",True,{}
groonga/groonga,https://github.com/groonga/groonga,540,2016-05-08T21:59:47Z,2016-05-17T15:27:53Z,2016-05-17T15:37:51Z,CLOSED,False,1086,224,15,https://github.com/naoa,select drilldown: support dynamic column creation as initial staging,5,[],https://github.com/groonga/groonga/pull/540,https://github.com/naoa,6,https://github.com/groonga/groonga/pull/540#issuecomment-217853532,"groonga-dev 04027
以下の構文を実装してみました。
  --drilldown[label].column[rank].stage initial \
  --drilldown[label].column[rank].type UInt32 \
  --drilldown[label].column[rank].flags COLUMN_SCALAR \
  --drilldown[label].column[rank].value 'rank()' \
  --drilldown[label].column[rank].sortby _nsubrecs


a68521f rank関数rank()
8cc11a7 sortしてから動的カラムでvalueの評価のサポートcolumn[label].sortby
8cc11a7...76ba4cf ドリルダウン結果で動的カラムを使うためのコード整理
3a345f8 ドリルダウン結果での動的カラム(initial)のサポートdrilldown[label].column[label2]...

コード共有の関係上、column[label].sortbyで通常の動的カラムでもsortしてからのvalueの評価ができるようにしています。
おそらく、通常の動的カラムでこのような用途はstage outputでの実装を想定している感じですが、通常の動的カラムでは除外すべきでしょうか？","PostgreSQLには https://www.postgresql.jp/document/9.5/html/functions-window.html みたいなウィンドウ関数があるんですが、これらを実装しようとしたら各レコード毎に関数を呼ぶ、というやり方だと対応できないんじゃないかと思うんですよねぇ。

なるほど。たしかに、record_number以外のものはレコード毎だと厳しそうですね。
PostgreSQLのウィンドウ関数は触ったことがありませんでした。
このようなものもサポートできるような形態のほうが望ましいですね。",True,{}
groonga/groonga,https://github.com/groonga/groonga,540,2016-05-08T21:59:47Z,2016-05-17T15:27:53Z,2016-05-17T15:37:51Z,CLOSED,False,1086,224,15,https://github.com/naoa,select drilldown: support dynamic column creation as initial staging,5,[],https://github.com/groonga/groonga/pull/540,https://github.com/kou,7,https://github.com/groonga/groonga/pull/540#issuecomment-219754549,"groonga-dev 04027
以下の構文を実装してみました。
  --drilldown[label].column[rank].stage initial \
  --drilldown[label].column[rank].type UInt32 \
  --drilldown[label].column[rank].flags COLUMN_SCALAR \
  --drilldown[label].column[rank].value 'rank()' \
  --drilldown[label].column[rank].sortby _nsubrecs


a68521f rank関数rank()
8cc11a7 sortしてから動的カラムでvalueの評価のサポートcolumn[label].sortby
8cc11a7...76ba4cf ドリルダウン結果で動的カラムを使うためのコード整理
3a345f8 ドリルダウン結果での動的カラム(initial)のサポートdrilldown[label].column[label2]...

コード共有の関係上、column[label].sortbyで通常の動的カラムでもsortしてからのvalueの評価ができるようにしています。
おそらく、通常の動的カラムでこのような用途はstage outputでの実装を想定している感じですが、通常の動的カラムでは除外すべきでしょうか？","--drilldown[label].column[rank].stage initial \
  --drilldown[label].column[rank].type UInt32 \
  --drilldown[label].column[rank].flags COLUMN_SCALAR \
  --drilldown[label].column[rank].value 'row_number()' \
  --drilldown[label].column[rank].window.sort_keys _nsubrecs

で動くようにしたつもりです。ウインドウ関数にはすべてwindow_function_をつけてwindow_function_row_number()とかにする慣習にするかどうかはまだ迷っています。。。",True,{}
groonga/groonga,https://github.com/groonga/groonga,540,2016-05-08T21:59:47Z,2016-05-17T15:27:53Z,2016-05-17T15:37:51Z,CLOSED,False,1086,224,15,https://github.com/naoa,select drilldown: support dynamic column creation as initial staging,5,[],https://github.com/groonga/groonga/pull/540,https://github.com/kou,8,https://github.com/groonga/groonga/pull/540#issuecomment-219754991,"groonga-dev 04027
以下の構文を実装してみました。
  --drilldown[label].column[rank].stage initial \
  --drilldown[label].column[rank].type UInt32 \
  --drilldown[label].column[rank].flags COLUMN_SCALAR \
  --drilldown[label].column[rank].value 'rank()' \
  --drilldown[label].column[rank].sortby _nsubrecs


a68521f rank関数rank()
8cc11a7 sortしてから動的カラムでvalueの評価のサポートcolumn[label].sortby
8cc11a7...76ba4cf ドリルダウン結果で動的カラムを使うためのコード整理
3a345f8 ドリルダウン結果での動的カラム(initial)のサポートdrilldown[label].column[label2]...

コード共有の関係上、column[label].sortbyで通常の動的カラムでもsortしてからのvalueの評価ができるようにしています。
おそらく、通常の動的カラムでこのような用途はstage outputでの実装を想定している感じですが、通常の動的カラムでは除外すべきでしょうか？",あ、row_numberにしちゃっていた。record_numberにしておきます。,True,{}
groonga/groonga,https://github.com/groonga/groonga,540,2016-05-08T21:59:47Z,2016-05-17T15:27:53Z,2016-05-17T15:37:51Z,CLOSED,False,1086,224,15,https://github.com/naoa,select drilldown: support dynamic column creation as initial staging,5,[],https://github.com/groonga/groonga/pull/540,https://github.com/naoa,9,https://github.com/groonga/groonga/pull/540#issuecomment-219758120,"groonga-dev 04027
以下の構文を実装してみました。
  --drilldown[label].column[rank].stage initial \
  --drilldown[label].column[rank].type UInt32 \
  --drilldown[label].column[rank].flags COLUMN_SCALAR \
  --drilldown[label].column[rank].value 'rank()' \
  --drilldown[label].column[rank].sortby _nsubrecs


a68521f rank関数rank()
8cc11a7 sortしてから動的カラムでvalueの評価のサポートcolumn[label].sortby
8cc11a7...76ba4cf ドリルダウン結果で動的カラムを使うためのコード整理
3a345f8 ドリルダウン結果での動的カラム(initial)のサポートdrilldown[label].column[label2]...

コード共有の関係上、column[label].sortbyで通常の動的カラムでもsortしてからのvalueの評価ができるようにしています。
おそらく、通常の動的カラムでこのような用途はstage outputでの実装を想定している感じですが、通常の動的カラムでは除外すべきでしょうか？","おお！素晴らしい！とてもありがたいです。
ありがとうございました。
使ってみようと思います。集計処理の自由度がかなり高まりましたね。",True,{}
groonga/groonga,https://github.com/groonga/groonga,541,2016-05-09T07:24:48Z,2016-05-09T09:42:23Z,2016-05-12T03:30:07Z,MERGED,True,247,220,1,https://github.com/naoa,Extract dynamic column related functions,2,[],https://github.com/groonga/groonga/pull/541,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/541,"#540 より分割
まずは、ドリルダウン結果で動的カラムを作るコードを流用するために、コードの移動と抽出だけのコミットにしました。","#540 より分割
まずは、ドリルダウン結果で動的カラムを作るコードを流用するために、コードの移動と抽出だけのコミットにしました。",True,{}
groonga/groonga,https://github.com/groonga/groonga,541,2016-05-09T07:24:48Z,2016-05-09T09:42:23Z,2016-05-12T03:30:07Z,MERGED,True,247,220,1,https://github.com/naoa,Extract dynamic column related functions,2,[],https://github.com/groonga/groonga/pull/541,https://github.com/kou,2,https://github.com/groonga/groonga/pull/541#issuecomment-217821888,"#540 より分割
まずは、ドリルダウン結果で動的カラムを作るコードを流用するために、コードの移動と抽出だけのコミットにしました。","ありがとうございます。
次は 3a345f8 でおねがいします。",True,{}
groonga/groonga,https://github.com/groonga/groonga,542,2016-05-09T12:30:54Z,2016-05-09T14:08:21Z,2016-05-10T08:54:48Z,MERGED,True,255,4,3,https://github.com/naoa,select drilldown: support dynamic column creation as initial stage,1,[],https://github.com/groonga/groonga/pull/542,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/542,"#540 より分割
ドリルダウン結果でiniitalステージの動的カラムを作る分のコミットです。","#540 より分割
ドリルダウン結果でiniitalステージの動的カラムを作る分のコミットです。",True,{}
groonga/groonga,https://github.com/groonga/groonga,542,2016-05-09T12:30:54Z,2016-05-09T14:08:21Z,2016-05-10T08:54:48Z,MERGED,True,255,4,3,https://github.com/naoa,select drilldown: support dynamic column creation as initial stage,1,[],https://github.com/groonga/groonga/pull/542,https://github.com/kou,2,https://github.com/groonga/groonga/pull/542#issuecomment-218079013,"#540 より分割
ドリルダウン結果でiniitalステージの動的カラムを作る分のコミットです。","ありがとうございます。
マージしました。
ウィンドウ関数の方はどうしましょうねぇ。私の方で仕組みを作ったほうがいいかしら。
あ、その前に 8cc11a7 の方がいいか。こっちをpull requestにしてもらえますか？",True,{}
groonga/groonga,https://github.com/groonga/groonga,542,2016-05-09T12:30:54Z,2016-05-09T14:08:21Z,2016-05-10T08:54:48Z,MERGED,True,255,4,3,https://github.com/naoa,select drilldown: support dynamic column creation as initial stage,1,[],https://github.com/groonga/groonga/pull/542,https://github.com/naoa,3,https://github.com/groonga/groonga/pull/542#issuecomment-218084411,"#540 より分割
ドリルダウン結果でiniitalステージの動的カラムを作る分のコミットです。","マージありがとうございます。

その前に 8cc11a7 の方がいいか。こっちをpull requestにしてもらえますか？

8cc11a7 これは動的カラムをソートしてからvalueを評価するコミットですけど、これでPRしちゃっていいですか？
それとも、前言っていた通り、ソートはウィンドウ関数内側が担当すべきですか？
https://www.postgresql.jp/document/9.5/html/tutorial-window.html
ウィンドウ関数っていうのは、ある集合（レコード群、テーブル）に対する演算結果を１つの行（レコード）に出力できる関数という認識であってますかね？
ウィンドウ関数側でソートを担当すると、ウィンドウ関数が呼び出される回数だけ渡されたレコード群に同じソートを繰り返さなきゃいけない気がしますが、そんなことはないですか？
例：
グループ結果テーブル
_key, _nsubrecs
A, 3
B, 10
C, 3
上のようなグループ結果テーブルにウィンドウ関数rank()を適用すると、
３回rank()が呼び出され、rank()は渡されたグループ結果テーブルを毎回
ソートした上で現在のレコードの順位を求めて返す。
rank, _key, _nsubrecs
1, A, 3
3, B, 10
1, C, 3
いまいち理解できていなくてすいません。",True,{}
groonga/groonga,https://github.com/groonga/groonga,542,2016-05-09T12:30:54Z,2016-05-09T14:08:21Z,2016-05-10T08:54:48Z,MERGED,True,255,4,3,https://github.com/naoa,select drilldown: support dynamic column creation as initial stage,1,[],https://github.com/groonga/groonga/pull/542,https://github.com/kou,4,https://github.com/groonga/groonga/pull/542#issuecomment-218097623,"#540 より分割
ドリルダウン結果でiniitalステージの動的カラムを作る分のコミットです。","8cc11a7 これは動的カラムをソートしてからvalueを評価するコミットですけど、これでPRしちゃっていいですか？

私もまだAPIを決めきれていないんですが、とりあえずそれでいいかなぁと思っています。

それとも、前言っていた通り、ソートはウィンドウ関数内側が担当すべきですか？

ソートは呼び出し側がやって、ソート済みのテーブルを渡すのもいいかもなぁと思っています。逆順にカーソルを渡したいとかあるかなぁと。
なので、とりあえずソートする処理は入れてしまってもいいんじゃないかと思っています。

https://www.postgresql.jp/document/9.5/html/tutorial-window.html
ウィンドウ関数っていうのは、ある集合（レコード群、テーブル）に対する演算結果を１つの行（レコード）に出力できる関数という認識であってますかね？

そうですね。少し補足すると、集約関数（sumとか）は集合に対する演算結果を1つにまとめて各行に出力することはできませんが、ウィンドウ関数は各行に出力することができる、というところがポイントだと思います。

ウィンドウ関数側でソートを担当すると、ウィンドウ関数が呼び出される回数だけ渡されたレコード群に同じソートを繰り返さなきゃいけない気がしますが、そんなことはないですか？

あ、ウィンドウ関数でソートするときは、出力もウィンドウ関数内でやるのがいいんじゃないかと思っていました。

いまいち理解できていなくてすいません。

大丈夫です。正解を知っている人はいないのでだれも理解できていません！",True,{}
groonga/groonga,https://github.com/groonga/groonga,543,2016-05-10T07:00:10Z,2016-05-10T08:32:12Z,2016-05-10T08:32:15Z,MERGED,True,79,2,5,https://github.com/kou,Support detecting changed database isn't closed,1,[],https://github.com/groonga/groonga/pull/543,https://github.com/kou,1,https://github.com/groonga/groonga/pull/543,"It doesn't increase no overhead when the database isn't changed. For
example, you have no overhead and no change when you only use select
command.
It doesn't flush many times. It flushes only at the first database
change.","It doesn't increase no overhead when the database isn't changed. For
example, you have no overhead and no change when you only use select
command.
It doesn't flush many times. It flushes only at the first database
change.",True,{}
groonga/groonga,https://github.com/groonga/groonga,544,2016-05-10T08:30:42Z,2016-05-10T08:40:05Z,2016-05-10T08:49:28Z,MERGED,True,209,1,3,https://github.com/naoa,Don't unlink dynamic column in grn_table_sort_key_close,1,[],https://github.com/groonga/groonga/pull/544,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/544,grn_table_sort_key_closeで動的カラムが解放されてしまうのを回避します。,grn_table_sort_key_closeで動的カラムが解放されてしまうのを回避します。,True,{}
groonga/groonga,https://github.com/groonga/groonga,544,2016-05-10T08:30:42Z,2016-05-10T08:40:05Z,2016-05-10T08:49:28Z,MERGED,True,209,1,3,https://github.com/naoa,Don't unlink dynamic column in grn_table_sort_key_close,1,[],https://github.com/groonga/groonga/pull/544,https://github.com/kou,2,https://github.com/groonga/groonga/pull/544#issuecomment-218095294,grn_table_sort_key_closeで動的カラムが解放されてしまうのを回避します。,ありがとうございます！,True,{}
groonga/groonga,https://github.com/groonga/groonga,544,2016-05-10T08:30:42Z,2016-05-10T08:40:05Z,2016-05-10T08:49:28Z,MERGED,True,209,1,3,https://github.com/naoa,Don't unlink dynamic column in grn_table_sort_key_close,1,[],https://github.com/groonga/groonga/pull/544,https://github.com/naoa,3,https://github.com/groonga/groonga/pull/544#issuecomment-218096296,grn_table_sort_key_closeで動的カラムが解放されてしまうのを回避します。,マージありがとうございます。,True,{}
groonga/groonga,https://github.com/groonga/groonga,545,2016-05-10T09:53:46Z,2016-05-11T09:02:40Z,2016-05-12T01:10:41Z,MERGED,True,72,5,1,https://github.com/naoa,select: support sort when create dynamic column,1,[],https://github.com/groonga/groonga/pull/545,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/545,"#540 より分割
動的カラムをソートしてからvalueを評価するコミットです。
今のところ、呼ばれる順序を気にする関数がなさそうなので、テストは書けませんでした。","#540 より分割
動的カラムをソートしてからvalueを評価するコミットです。
今のところ、呼ばれる順序を気にする関数がなさそうなので、テストは書けませんでした。",True,{}
groonga/groonga,https://github.com/groonga/groonga,545,2016-05-10T09:53:46Z,2016-05-11T09:02:40Z,2016-05-12T01:10:41Z,MERGED,True,72,5,1,https://github.com/naoa,select: support sort when create dynamic column,1,[],https://github.com/groonga/groonga/pull/545,https://github.com/kou,2,https://github.com/groonga/groonga/pull/545#issuecomment-218622453,"#540 より分割
動的カラムをソートしてからvalueを評価するコミットです。
今のところ、呼ばれる順序を気にする関数がなさそうなので、テストは書けませんでした。","ありがとうございます。マージしました。
ウィンドウ関数を実行する部分は私の方で仕組みを作ろうと思います。
まだ考えている途中ですが、APIを
--drilldown[XXX].column[YYY].value.window.function 'window_record_number()' \
--drilldown[XXX].column[YYY].value.window.sort_keys 'price'

にしてvalueにウィンドウ関数を指定しているんだぞ感を出した方がいいかなぁと思っています。",True,{}
groonga/groonga,https://github.com/groonga/groonga,545,2016-05-10T09:53:46Z,2016-05-11T09:02:40Z,2016-05-12T01:10:41Z,MERGED,True,72,5,1,https://github.com/naoa,select: support sort when create dynamic column,1,[],https://github.com/groonga/groonga/pull/545,https://github.com/naoa,3,https://github.com/groonga/groonga/pull/545#issuecomment-218634043,"#540 より分割
動的カラムをソートしてからvalueを評価するコミットです。
今のところ、呼ばれる順序を気にする関数がなさそうなので、テストは書けませんでした。","ありがとうございます。

ウィンドウ関数を実行する部分は私の方で仕組みを作ろうと思います。

大変助かります。よろしくお願いします。期待しています。

--drilldown[XXX].column[YYY].value.window.function 'window_record_number()' 
--drilldown[XXX].column[YYY].value.window.sort_keys 'price'
にしてvalueにウィンドウ関数を指定しているんだぞ感を出した方がいいかなぁと思っています。

よさそうに思えます。",True,{}
groonga/groonga,https://github.com/groonga/groonga,549,2016-06-07T05:09:19Z,2016-06-07T05:16:28Z,2016-06-07T05:37:28Z,MERGED,True,1,1,1,https://github.com/iwaim,doc: fix typo,1,[],https://github.com/groonga/groonga/pull/549,https://github.com/iwaim,1,https://github.com/groonga/groonga/pull/549,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,549,2016-06-07T05:09:19Z,2016-06-07T05:16:28Z,2016-06-07T05:37:28Z,MERGED,True,1,1,1,https://github.com/iwaim,doc: fix typo,1,[],https://github.com/groonga/groonga/pull/549,https://github.com/kou,2,https://github.com/groonga/groonga/pull/549#issuecomment-224179531,,Good catch!,True,{}
groonga/groonga,https://github.com/groonga/groonga,550,2016-06-07T06:46:44Z,2016-06-07T06:58:50Z,2016-06-07T07:07:21Z,MERGED,True,8,8,1,https://github.com/iwaim,doc: fix product name,1,[],https://github.com/groonga/groonga/pull/550,https://github.com/iwaim,1,https://github.com/groonga/groonga/pull/550,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,550,2016-06-07T06:46:44Z,2016-06-07T06:58:50Z,2016-06-07T07:07:21Z,MERGED,True,8,8,1,https://github.com/iwaim,doc: fix product name,1,[],https://github.com/groonga/groonga/pull/550,https://github.com/kou,2,https://github.com/groonga/groonga/pull/550#issuecomment-224196469,,Thanks!,True,{}
groonga/groonga,https://github.com/groonga/groonga,553,2016-06-11T23:08:01Z,2016-06-12T03:28:22Z,2016-06-12T04:31:32Z,MERGED,True,77,38,13,https://github.com/naoa,proc fuzzy_search: support max_distance option with non object literal option,1,[],https://github.com/groonga/groonga/pull/553,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/553,"fuzzy_searchを使っていて、max_distanceのオプションは特にチューニングが必要な項目なので、オブジェクトリテラル形式じゃない形式で使えた方が便利だなと思いました。
fuzzy_search(
  column,
  query,
  [max_distance |
   {""max_distance"": uint, ""prefix_length"": uint, ""max_expansion"":uint , ""with_transposition"": bool}]
)","fuzzy_searchを使っていて、max_distanceのオプションは特にチューニングが必要な項目なので、オブジェクトリテラル形式じゃない形式で使えた方が便利だなと思いました。
fuzzy_search(
  column,
  query,
  [max_distance |
   {""max_distance"": uint, ""prefix_length"": uint, ""max_expansion"":uint , ""with_transposition"": bool}]
)",True,{}
groonga/groonga,https://github.com/groonga/groonga,553,2016-06-11T23:08:01Z,2016-06-12T03:28:22Z,2016-06-12T04:31:32Z,MERGED,True,77,38,13,https://github.com/naoa,proc fuzzy_search: support max_distance option with non object literal option,1,[],https://github.com/groonga/groonga/pull/553,https://github.com/kou,2,https://github.com/groonga/groonga/pull/553#issuecomment-225407879,"fuzzy_searchを使っていて、max_distanceのオプションは特にチューニングが必要な項目なので、オブジェクトリテラル形式じゃない形式で使えた方が便利だなと思いました。
fuzzy_search(
  column,
  query,
  [max_distance |
   {""max_distance"": uint, ""prefix_length"": uint, ""max_expansion"":uint , ""with_transposition"": bool}]
)",なるほど！,True,{}
groonga/groonga,https://github.com/groonga/groonga,553,2016-06-11T23:08:01Z,2016-06-12T03:28:22Z,2016-06-12T04:31:32Z,MERGED,True,77,38,13,https://github.com/naoa,proc fuzzy_search: support max_distance option with non object literal option,1,[],https://github.com/groonga/groonga/pull/553,https://github.com/naoa,3,https://github.com/groonga/groonga/pull/553#issuecomment-225409638,"fuzzy_searchを使っていて、max_distanceのオプションは特にチューニングが必要な項目なので、オブジェクトリテラル形式じゃない形式で使えた方が便利だなと思いました。
fuzzy_search(
  column,
  query,
  [max_distance |
   {""max_distance"": uint, ""prefix_length"": uint, ""max_expansion"":uint , ""with_transposition"": bool}]
)",マージありがとうございます。,True,{}
groonga/groonga,https://github.com/groonga/groonga,554,2016-06-15T04:53:19Z,,2022-03-15T05:24:16Z,OPEN,False,198,11,8,https://github.com/kou,"column_remove: add ""dependent"" parameter",1,[],https://github.com/groonga/groonga/pull/554,https://github.com/kou,1,https://github.com/groonga/groonga/pull/554,"If ""dependent=no"" (not default), column_remove reports error for a
column that has one or more indexes.
This change also changes grn_obj_remove(ctx, column) behavior. It
reports error for a column that has one ore more indexes. It's backward
incompatible change.
We need to use grn_obj_remove_dependent(ctx, column) for the previous
behavior.
This is not acceptable. So we need to consider about it carefully.","If ""dependent=no"" (not default), column_remove reports error for a
column that has one or more indexes.
This change also changes grn_obj_remove(ctx, column) behavior. It
reports error for a column that has one ore more indexes. It's backward
incompatible change.
We need to use grn_obj_remove_dependent(ctx, column) for the previous
behavior.
This is not acceptable. So we need to consider about it carefully.",True,{}
groonga/groonga,https://github.com/groonga/groonga,554,2016-06-15T04:53:19Z,,2022-03-15T05:24:16Z,OPEN,False,198,11,8,https://github.com/kou,"column_remove: add ""dependent"" parameter",1,[],https://github.com/groonga/groonga/pull/554,https://github.com/kou,2,https://github.com/groonga/groonga/pull/554#issuecomment-226087693,"If ""dependent=no"" (not default), column_remove reports error for a
column that has one or more indexes.
This change also changes grn_obj_remove(ctx, column) behavior. It
reports error for a column that has one ore more indexes. It's backward
incompatible change.
We need to use grn_obj_remove_dependent(ctx, column) for the previous
behavior.
This is not acceptable. So we need to consider about it carefully.",Don't merge this pull request. I created it just for memo.,True,{}
groonga/groonga,https://github.com/groonga/groonga,555,2016-06-17T09:16:03Z,,2022-03-15T05:24:16Z,OPEN,False,80,1,1,https://github.com/kenhys,WIP doc: add detail of number_classify,1,[],https://github.com/groonga/groonga/pull/555,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/555,DO NOT MERGE UNTIL FULL REVIEW,DO NOT MERGE UNTIL FULL REVIEW,True,{}
groonga/groonga,https://github.com/groonga/groonga,557,2016-06-18T17:05:05Z,2016-06-19T07:16:31Z,2016-06-19T12:41:34Z,MERGED,True,20,11,2,https://github.com/naoa,token_filter: fix thread unsafe code,1,[],https://github.com/groonga/groonga/pull/557,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/557,"GitHub: #556
grn_procのuser_dataにトークンフィルター内でmallocしたアドレスを持たせるのではなく、grn_token_cursorに持たせるようにしてみました。
このパッチ適用後では、issueの再現手順でダブルフリーが発生しなくなることを確認しています。","GitHub: #556
grn_procのuser_dataにトークンフィルター内でmallocしたアドレスを持たせるのではなく、grn_token_cursorに持たせるようにしてみました。
このパッチ適用後では、issueの再現手順でダブルフリーが発生しなくなることを確認しています。",True,{}
groonga/groonga,https://github.com/groonga/groonga,557,2016-06-18T17:05:05Z,2016-06-19T07:16:31Z,2016-06-19T12:41:34Z,MERGED,True,20,11,2,https://github.com/naoa,token_filter: fix thread unsafe code,1,[],https://github.com/groonga/groonga/pull/557,https://github.com/kou,2,https://github.com/groonga/groonga/pull/557#issuecomment-226994979,"GitHub: #556
grn_procのuser_dataにトークンフィルター内でmallocしたアドレスを持たせるのではなく、grn_token_cursorに持たせるようにしてみました。
このパッチ適用後では、issueの再現手順でダブルフリーが発生しなくなることを確認しています。","ありがとうございます。マージしました。
GRN_PVECTORはgrn_obj **用のものでvoid **用のものではないのでGRN_MALLOCN()を使うようにしておきました。",True,{}
groonga/groonga,https://github.com/groonga/groonga,557,2016-06-18T17:05:05Z,2016-06-19T07:16:31Z,2016-06-19T12:41:34Z,MERGED,True,20,11,2,https://github.com/naoa,token_filter: fix thread unsafe code,1,[],https://github.com/groonga/groonga/pull/557,https://github.com/naoa,3,https://github.com/groonga/groonga/pull/557#issuecomment-226995324,"GitHub: #556
grn_procのuser_dataにトークンフィルター内でmallocしたアドレスを持たせるのではなく、grn_token_cursorに持たせるようにしてみました。
このパッチ適用後では、issueの再現手順でダブルフリーが発生しなくなることを確認しています。",おお、、マージありがとうございます。,True,{}
groonga/groonga,https://github.com/groonga/groonga,558,2016-06-19T05:42:03Z,2016-06-19T05:48:46Z,2016-06-19T05:48:46Z,CLOSED,False,1,1,1,https://github.com/cafedomancer,doc: Fix a typo,1,[],https://github.com/groonga/groonga/pull/558,https://github.com/cafedomancer,1,https://github.com/groonga/groonga/pull/558,"Maybe ""problem"" is countable?","Maybe ""problem"" is countable?",True,{}
groonga/groonga,https://github.com/groonga/groonga,558,2016-06-19T05:42:03Z,2016-06-19T05:48:46Z,2016-06-19T05:48:46Z,CLOSED,False,1,1,1,https://github.com/cafedomancer,doc: Fix a typo,1,[],https://github.com/groonga/groonga/pull/558,https://github.com/cafedomancer,2,https://github.com/groonga/groonga/pull/558#issuecomment-226980934,"Maybe ""problem"" is countable?","Oops, created a pull request against the wrong branch.",True,{}
groonga/groonga,https://github.com/groonga/groonga,559,2016-06-19T05:51:28Z,2016-06-19T06:22:46Z,2016-06-19T09:48:31Z,MERGED,True,1,1,1,https://github.com/cafedomancer,doc: Fix a typo,1,[],https://github.com/groonga/groonga/pull/559,https://github.com/cafedomancer,1,https://github.com/groonga/groonga/pull/559,"Maybe ""problem"" is countable?","Maybe ""problem"" is countable?",True,{}
groonga/groonga,https://github.com/groonga/groonga,559,2016-06-19T05:51:28Z,2016-06-19T06:22:46Z,2016-06-19T09:48:31Z,MERGED,True,1,1,1,https://github.com/cafedomancer,doc: Fix a typo,1,[],https://github.com/groonga/groonga/pull/559,https://github.com/myokoym,2,https://github.com/groonga/groonga/pull/559#issuecomment-226981890,"Maybe ""problem"" is countable?",Good catch! I'll update http://groonga.org.,True,{}
groonga/groonga,https://github.com/groonga/groonga,560,2016-06-20T03:09:49Z,2016-06-20T07:55:27Z,2016-06-21T05:14:13Z,CLOSED,False,1,1,1,https://github.com/msh5,Fix 'col resolve error' to be caused by d40820ddb6a760eb3373f119d27eb…,1,[],https://github.com/groonga/groonga/pull/560,https://github.com/msh5,1,https://github.com/groonga/groonga/pull/560,"d40820d の変更で、v の初期化が意図せず消されているのではないかと思いましたがいかがでしょうか？
JNI として組み込んだプログラムで、grn_table_select() が ""col resolve error"" というエラーメッセージとともに失敗することがあり、 d40820d 以前に戻すことで現象が収まります。
検証環境では、grn_table_select_sequential() を抜ける時点での v の domain メンバの値に違いが出ていました。
（かたや 5757 行目は消し忘れ？）","d40820d の変更で、v の初期化が意図せず消されているのではないかと思いましたがいかがでしょうか？
JNI として組み込んだプログラムで、grn_table_select() が ""col resolve error"" というエラーメッセージとともに失敗することがあり、 d40820d 以前に戻すことで現象が収まります。
検証環境では、grn_table_select_sequential() を抜ける時点での v の domain メンバの値に違いが出ていました。
（かたや 5757 行目は消し忘れ？）",True,{}
groonga/groonga,https://github.com/groonga/groonga,560,2016-06-20T03:09:49Z,2016-06-20T07:55:27Z,2016-06-21T05:14:13Z,CLOSED,False,1,1,1,https://github.com/msh5,Fix 'col resolve error' to be caused by d40820ddb6a760eb3373f119d27eb…,1,[],https://github.com/groonga/groonga/pull/560,https://github.com/kou,2,https://github.com/groonga/groonga/pull/560#issuecomment-227053565,"d40820d の変更で、v の初期化が意図せず消されているのではないかと思いましたがいかがでしょうか？
JNI として組み込んだプログラムで、grn_table_select() が ""col resolve error"" というエラーメッセージとともに失敗することがあり、 d40820d 以前に戻すことで現象が収まります。
検証環境では、grn_table_select_sequential() を抜ける時点での v の domain メンバの値に違いが出ていました。
（かたや 5757 行目は消し忘れ？）","報告ありがとうございます。
こういう感じの修正が正しい気がしています。
diff --git a/lib/expr.c b/lib/expr.c
index 4e78d9c..8e949f4 100644
--- a/lib/expr.c
+++ b/lib/expr.c
@@ -6608,6 +6608,7 @@ grn_table_select(grn_ctx *ctx, grn_obj *table, grn_obj *expr,
       grn_expr *e = (grn_expr *)scanner->expr;
       grn_expr_code *codes = e->codes;
       uint32_t codes_curr = e->codes_curr;
+      v = grn_expr_get_var_by_offset(ctx, (grn_obj *)e, 0);
       GRN_PTR_INIT(&res_stack, GRN_OBJ_VECTOR, GRN_ID_NIL);
       for (i = 0; i < scanner->n_sis; i++) {
         scan_info *si = scanner->sis[i];
grn_scanner_open()に渡したexprとscanner->exprが違うことがあるんです。最適化のために式を書き換えると違うものになります。そのときに問題が発生するんじゃないかという気がするので、違うexprから取得したvを使ってしまっているのが問題かなぁと思っています。
5757 行目はたしかに消し忘れでした！",True,{}
groonga/groonga,https://github.com/groonga/groonga,560,2016-06-20T03:09:49Z,2016-06-20T07:55:27Z,2016-06-21T05:14:13Z,CLOSED,False,1,1,1,https://github.com/msh5,Fix 'col resolve error' to be caused by d40820ddb6a760eb3373f119d27eb…,1,[],https://github.com/groonga/groonga/pull/560,https://github.com/kou,3,https://github.com/groonga/groonga/pull/560#issuecomment-227059376,"d40820d の変更で、v の初期化が意図せず消されているのではないかと思いましたがいかがでしょうか？
JNI として組み込んだプログラムで、grn_table_select() が ""col resolve error"" というエラーメッセージとともに失敗することがあり、 d40820d 以前に戻すことで現象が収まります。
検証環境では、grn_table_select_sequential() を抜ける時点での v の domain メンバの値に違いが出ていました。
（かたや 5757 行目は消し忘れ？）","JNI として組み込んだプログラム

このプログラムでgrn_exprを作っているところのコードはどうなっていますか？ https://github.com/groonga/groonga/blob/master/include/groonga/expr.h#L82-L89 相当の処理になっていますか？
#define GRN_EXPR_CREATE_FOR_QUERY(ctx,table,expr,var) do {\
  if (((expr) = grn_expr_create((ctx), NULL, 0)) &&\
      ((var) = grn_expr_add_var((ctx), (expr), NULL, 0))) {\
    GRN_RECORD_INIT((var), 0, grn_obj_id((ctx), (table)));\
  } else {\
    (var) = NULL;\
  }\
} while (0)
ここでGRN_RECORD_INIT()している前提なのでここではGRN_RECORD_INIT()は必要ないはずなんです。",True,{}
groonga/groonga,https://github.com/groonga/groonga,560,2016-06-20T03:09:49Z,2016-06-20T07:55:27Z,2016-06-21T05:14:13Z,CLOSED,False,1,1,1,https://github.com/msh5,Fix 'col resolve error' to be caused by d40820ddb6a760eb3373f119d27eb…,1,[],https://github.com/groonga/groonga/pull/560,https://github.com/msh5,4,https://github.com/groonga/groonga/pull/560#issuecomment-227073568,"d40820d の変更で、v の初期化が意図せず消されているのではないかと思いましたがいかがでしょうか？
JNI として組み込んだプログラムで、grn_table_select() が ""col resolve error"" というエラーメッセージとともに失敗することがあり、 d40820d 以前に戻すことで現象が収まります。
検証環境では、grn_table_select_sequential() を抜ける時点での v の domain メンバの値に違いが出ていました。
（かたや 5757 行目は消し忘れ？）","ご確認ありがとうございました。
結論から言うと正常に動作するようになりました。

grn_scanner_open()に渡したexprとscanner->exprが違うことがあるんです。最適化のために式を書き換えると違うものになります。そのときに問題が発生するんじゃないかという気がするので、違うexprから取得したvを使ってしまっているのが問題かなぁと思っています。

なるほど、そうでしたか。
ただ、変更を適用した上で試してみましたが、依然同様のエラーが報告されました。
自分の報告したエラーとは、直接の影響のある箇所ではなかったようです。

このプログラムでgrn_exprを作っているところのコードはどうなっていますか？ https://github.com/groonga/groonga/blob/master/include/groonga/expr.h#L82-L89 相当の処理になっていますか？

GRN_RECORD_INIT() の呼び出しが抜けておりました・・・。
明示的に呼び出すと正常に動作するようになりました。
マクロの方を積極的に使っていった方が良さそうですね。
master への反映も済んでいるようなのでクローズさせて頂きます。",True,{}
groonga/groonga,https://github.com/groonga/groonga,560,2016-06-20T03:09:49Z,2016-06-20T07:55:27Z,2016-06-21T05:14:13Z,CLOSED,False,1,1,1,https://github.com/msh5,Fix 'col resolve error' to be caused by d40820ddb6a760eb3373f119d27eb…,1,[],https://github.com/groonga/groonga/pull/560,https://github.com/kou,5,https://github.com/groonga/groonga/pull/560#issuecomment-227333297,"d40820d の変更で、v の初期化が意図せず消されているのではないかと思いましたがいかがでしょうか？
JNI として組み込んだプログラムで、grn_table_select() が ""col resolve error"" というエラーメッセージとともに失敗することがあり、 d40820d 以前に戻すことで現象が収まります。
検証環境では、grn_table_select_sequential() を抜ける時点での v の domain メンバの値に違いが出ていました。
（かたや 5757 行目は消し忘れ？）","動くようになってよかったです。
ところで。。。
Groongaは毎年いい肉の日（11月29日）にイベントを開催しているのですが、そこでGroongaをどうやって使っているのかとかどうしてGroongaを選んだのかというような話をしてもらえないでしょうか？JNIで使っている事例はこれまで聞いたことがなかったので（少なくとも私は）とても聞きたいです。
参考：去年のイベントの様子",True,{}
groonga/groonga,https://github.com/groonga/groonga,560,2016-06-20T03:09:49Z,2016-06-20T07:55:27Z,2016-06-21T05:14:13Z,CLOSED,False,1,1,1,https://github.com/msh5,Fix 'col resolve error' to be caused by d40820ddb6a760eb3373f119d27eb…,1,[],https://github.com/groonga/groonga/pull/560,https://github.com/msh5,6,https://github.com/groonga/groonga/pull/560#issuecomment-227341608,"d40820d の変更で、v の初期化が意図せず消されているのではないかと思いましたがいかがでしょうか？
JNI として組み込んだプログラムで、grn_table_select() が ""col resolve error"" というエラーメッセージとともに失敗することがあり、 d40820d 以前に戻すことで現象が収まります。
検証環境では、grn_table_select_sequential() を抜ける時点での v の domain メンバの値に違いが出ていました。
（かたや 5757 行目は消し忘れ？）","Groongaは毎年いい肉の日（11月29日）にイベントを開催しているのですが、そこでGroongaをどうやって使っているのかとかどうしてGroongaを選んだのかというような話をしてもらえないでしょうか？JNIで使っている事例はこれまで聞いたことがなかったので（少なくとも私は）とても聞きたいです。

お誘いのほどありがとうございます。
公開されている事例の多くは Mroonga を使ったもので、C のライブラリを直接叩いているユーザは少ないようですね。
準備にかかる時間を懸念していて、業務との兼ね合いをみて検討させて頂きます。",True,{}
groonga/groonga,https://github.com/groonga/groonga,560,2016-06-20T03:09:49Z,2016-06-20T07:55:27Z,2016-06-21T05:14:13Z,CLOSED,False,1,1,1,https://github.com/msh5,Fix 'col resolve error' to be caused by d40820ddb6a760eb3373f119d27eb…,1,[],https://github.com/groonga/groonga/pull/560,https://github.com/kou,7,https://github.com/groonga/groonga/pull/560#issuecomment-227342461,"d40820d の変更で、v の初期化が意図せず消されているのではないかと思いましたがいかがでしょうか？
JNI として組み込んだプログラムで、grn_table_select() が ""col resolve error"" というエラーメッセージとともに失敗することがあり、 d40820d 以前に戻すことで現象が収まります。
検証環境では、grn_table_select_sequential() を抜ける時点での v の domain メンバの値に違いが出ていました。
（かたや 5757 行目は消し忘れ？）","ありがとうございます。
それでは、イベントページを立ち上げる段階（9月か10月）にまた相談させてください。",True,{}
groonga/groonga,https://github.com/groonga/groonga,562,2016-06-24T06:26:26Z,2016-06-25T13:21:38Z,2016-06-25T16:49:02Z,MERGED,True,58,2,2,https://github.com/naoa,expression_tree_builder: support expression having function,3,[],https://github.com/groonga/groonga/pull/562,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/562,"functionを持っているgrn_exprでもexpression_rewriterを動かせるようにしたいです。
以下のGroongaコマンドで確認しました。
https://gist.github.com/naoa/7b9282c52ade55ec7fd1250bda0600d0
本パッチ適用前の場合、
select Users --filter 'query(""_key"", ""ali*"") && age > 17 && age < 20'
[
  [
    [
      -22,
      0.0,
      0.0
    ],
    ""undefined method 'value' for #<Groonga::Procedure:0x1317e00>""
  ]
]
#|e| NoMethodError: undefined method 'value' for #<Groonga::Procedure:0x1317e00>
となっていましたが、本パッチ適用後はクエリが正しく通るようになります。","functionを持っているgrn_exprでもexpression_rewriterを動かせるようにしたいです。
以下のGroongaコマンドで確認しました。
https://gist.github.com/naoa/7b9282c52ade55ec7fd1250bda0600d0
本パッチ適用前の場合、
select Users --filter 'query(""_key"", ""ali*"") && age > 17 && age < 20'
[
  [
    [
      -22,
      0.0,
      0.0
    ],
    ""undefined method 'value' for #<Groonga::Procedure:0x1317e00>""
  ]
]
#|e| NoMethodError: undefined method 'value' for #<Groonga::Procedure:0x1317e00>
となっていましたが、本パッチ適用後はクエリが正しく通るようになります。",True,{}
groonga/groonga,https://github.com/groonga/groonga,562,2016-06-24T06:26:26Z,2016-06-25T13:21:38Z,2016-06-25T16:49:02Z,MERGED,True,58,2,2,https://github.com/naoa,expression_tree_builder: support expression having function,3,[],https://github.com/groonga/groonga/pull/562,https://github.com/kou,2,https://github.com/groonga/groonga/pull/562#issuecomment-228269477,"functionを持っているgrn_exprでもexpression_rewriterを動かせるようにしたいです。
以下のGroongaコマンドで確認しました。
https://gist.github.com/naoa/7b9282c52ade55ec7fd1250bda0600d0
本パッチ適用前の場合、
select Users --filter 'query(""_key"", ""ali*"") && age > 17 && age < 20'
[
  [
    [
      -22,
      0.0,
      0.0
    ],
    ""undefined method 'value' for #<Groonga::Procedure:0x1317e00>""
  ]
]
#|e| NoMethodError: undefined method 'value' for #<Groonga::Procedure:0x1317e00>
となっていましたが、本パッチ適用後はクエリが正しく通るようになります。",test/mruby/suite/expression_rewriter/の下にテストを置くようになっているのでテストも書いてみてもらえませんか？,True,{}
groonga/groonga,https://github.com/groonga/groonga,562,2016-06-24T06:26:26Z,2016-06-25T13:21:38Z,2016-06-25T16:49:02Z,MERGED,True,58,2,2,https://github.com/naoa,expression_tree_builder: support expression having function,3,[],https://github.com/groonga/groonga/pull/562,https://github.com/naoa,3,https://github.com/groonga/groonga/pull/562#issuecomment-228276827,"functionを持っているgrn_exprでもexpression_rewriterを動かせるようにしたいです。
以下のGroongaコマンドで確認しました。
https://gist.github.com/naoa/7b9282c52ade55ec7fd1250bda0600d0
本パッチ適用前の場合、
select Users --filter 'query(""_key"", ""ali*"") && age > 17 && age < 20'
[
  [
    [
      -22,
      0.0,
      0.0
    ],
    ""undefined method 'value' for #<Groonga::Procedure:0x1317e00>""
  ]
]
#|e| NoMethodError: undefined method 'value' for #<Groonga::Procedure:0x1317e00>
となっていましたが、本パッチ適用後はクエリが正しく通るようになります。","やってみます。
あと、関数のargumentsがconstじゃなくてvariableの場合もエラーになるようなので、それも探ってみます。
select Users --filter 'between(age, 15, ""include"", 19, ""include"") && age > 17 && age < 20'",True,{}
groonga/groonga,https://github.com/groonga/groonga,562,2016-06-24T06:26:26Z,2016-06-25T13:21:38Z,2016-06-25T16:49:02Z,MERGED,True,58,2,2,https://github.com/naoa,expression_tree_builder: support expression having function,3,[],https://github.com/groonga/groonga/pull/562,https://github.com/kou,4,https://github.com/groonga/groonga/pull/562#issuecomment-228277381,"functionを持っているgrn_exprでもexpression_rewriterを動かせるようにしたいです。
以下のGroongaコマンドで確認しました。
https://gist.github.com/naoa/7b9282c52ade55ec7fd1250bda0600d0
本パッチ適用前の場合、
select Users --filter 'query(""_key"", ""ali*"") && age > 17 && age < 20'
[
  [
    [
      -22,
      0.0,
      0.0
    ],
    ""undefined method 'value' for #<Groonga::Procedure:0x1317e00>""
  ]
]
#|e| NoMethodError: undefined method 'value' for #<Groonga::Procedure:0x1317e00>
となっていましたが、本パッチ適用後はクエリが正しく通るようになります。","ありがとうございます。
expression_rewriterは作りかけなので、まだいろいろ足りないところがあるのです。。。",True,{}
groonga/groonga,https://github.com/groonga/groonga,562,2016-06-24T06:26:26Z,2016-06-25T13:21:38Z,2016-06-25T16:49:02Z,MERGED,True,58,2,2,https://github.com/naoa,expression_tree_builder: support expression having function,3,[],https://github.com/groonga/groonga/pull/562,https://github.com/naoa,5,https://github.com/groonga/groonga/pull/562#issuecomment-228308562,"functionを持っているgrn_exprでもexpression_rewriterを動かせるようにしたいです。
以下のGroongaコマンドで確認しました。
https://gist.github.com/naoa/7b9282c52ade55ec7fd1250bda0600d0
本パッチ適用前の場合、
select Users --filter 'query(""_key"", ""ali*"") && age > 17 && age < 20'
[
  [
    [
      -22,
      0.0,
      0.0
    ],
    ""undefined method 'value' for #<Groonga::Procedure:0x1317e00>""
  ]
]
#|e| NoMethodError: undefined method 'value' for #<Groonga::Procedure:0x1317e00>
となっていましたが、本パッチ適用後はクエリが正しく通るようになります。","variable（カラム）を持つ関数への対応と、テストを追加しました。
ご確認ください。
オブジェクトリテラル形式のオプションで落ちるのがわかっているのですが、別にした方がいいかなと思いました。",True,{}
groonga/groonga,https://github.com/groonga/groonga,562,2016-06-24T06:26:26Z,2016-06-25T13:21:38Z,2016-06-25T16:49:02Z,MERGED,True,58,2,2,https://github.com/naoa,expression_tree_builder: support expression having function,3,[],https://github.com/groonga/groonga/pull/562,https://github.com/kou,6,https://github.com/groonga/groonga/pull/562#issuecomment-228543136,"functionを持っているgrn_exprでもexpression_rewriterを動かせるようにしたいです。
以下のGroongaコマンドで確認しました。
https://gist.github.com/naoa/7b9282c52ade55ec7fd1250bda0600d0
本パッチ適用前の場合、
select Users --filter 'query(""_key"", ""ali*"") && age > 17 && age < 20'
[
  [
    [
      -22,
      0.0,
      0.0
    ],
    ""undefined method 'value' for #<Groonga::Procedure:0x1317e00>""
  ]
]
#|e| NoMethodError: undefined method 'value' for #<Groonga::Procedure:0x1317e00>
となっていましたが、本パッチ適用後はクエリが正しく通るようになります。","ありがとうございます。
たしかにオプションは別の方がいいです。",True,{}
groonga/groonga,https://github.com/groonga/groonga,562,2016-06-24T06:26:26Z,2016-06-25T13:21:38Z,2016-06-25T16:49:02Z,MERGED,True,58,2,2,https://github.com/naoa,expression_tree_builder: support expression having function,3,[],https://github.com/groonga/groonga/pull/562,https://github.com/naoa,7,https://github.com/groonga/groonga/pull/562#issuecomment-228544581,"functionを持っているgrn_exprでもexpression_rewriterを動かせるようにしたいです。
以下のGroongaコマンドで確認しました。
https://gist.github.com/naoa/7b9282c52ade55ec7fd1250bda0600d0
本パッチ適用前の場合、
select Users --filter 'query(""_key"", ""ali*"") && age > 17 && age < 20'
[
  [
    [
      -22,
      0.0,
      0.0
    ],
    ""undefined method 'value' for #<Groonga::Procedure:0x1317e00>""
  ]
]
#|e| NoMethodError: undefined method 'value' for #<Groonga::Procedure:0x1317e00>
となっていましたが、本パッチ適用後はクエリが正しく通るようになります。",マージありがとうございます。,True,{}
groonga/groonga,https://github.com/groonga/groonga,563,2016-06-25T14:10:18Z,2016-06-25T14:13:03Z,2016-06-25T16:49:00Z,MERGED,True,11,0,4,https://github.com/naoa,inspect: add scan_info->index,1,[],https://github.com/groonga/groonga/pull/563,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/563,scan_infoのinspectですが、indexが表示されていてほしいなと思いました。,scan_infoのinspectですが、indexが表示されていてほしいなと思いました。,True,{}
groonga/groonga,https://github.com/groonga/groonga,563,2016-06-25T14:10:18Z,2016-06-25T14:13:03Z,2016-06-25T16:49:00Z,MERGED,True,11,0,4,https://github.com/naoa,inspect: add scan_info->index,1,[],https://github.com/groonga/groonga/pull/563,https://github.com/kou,2,https://github.com/groonga/groonga/pull/563#issuecomment-228544800,scan_infoのinspectですが、indexが表示されていてほしいなと思いました。,いいと思います。,True,{}
groonga/groonga,https://github.com/groonga/groonga,564,2016-06-25T14:13:32Z,2016-07-05T10:21:16Z,2016-12-02T05:19:23Z,MERGED,True,220,0,7,https://github.com/naoa,plugin string: add string_substring(),1,[],https://github.com/groonga/groonga/pull/564,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/564,"substrみたいな関数がほしいと思いました。いかがでしょうか？
1スタートです。","substrみたいな関数がほしいと思いました。いかがでしょうか？
1スタートです。",True,{}
groonga/groonga,https://github.com/groonga/groonga,564,2016-06-25T14:13:32Z,2016-07-05T10:21:16Z,2016-12-02T05:19:23Z,MERGED,True,220,0,7,https://github.com/naoa,plugin string: add string_substring(),1,[],https://github.com/groonga/groonga/pull/564,https://github.com/kou,2,https://github.com/groonga/groonga/pull/564#issuecomment-228545385,"substrみたいな関数がほしいと思いました。いかがでしょうか？
1スタートです。","いいと思うんですが、名前も含めて仕様は他のもの（プログラミング言語のものだったりデータベースのものだったり）と合わせたいなぁと思います。
この実装の仕様はなにを参考にしましたか？",True,{}
groonga/groonga,https://github.com/groonga/groonga,564,2016-06-25T14:13:32Z,2016-07-05T10:21:16Z,2016-12-02T05:19:23Z,MERGED,True,220,0,7,https://github.com/naoa,plugin string: add string_substring(),1,[],https://github.com/groonga/groonga/pull/564,https://github.com/naoa,3,https://github.com/groonga/groonga/pull/564#issuecomment-228548689,"substrみたいな関数がほしいと思いました。いかがでしょうか？
1スタートです。","名前はsubstrのsubってなんだろうってsubtractかなぁと思って、Groongaのコマンドに習い動詞を後ろにしてみましたが、あまりプログラミング言語の英語の仕様を見てもあまりでてこないので、正しくないかもしれません。
Substring method to extract a substringなどsubstring自体が名詞として十分に使われているのでsubstringのがいいかもしれません。
MySQLのSUBSTRINGを想像してましたが、こちらの第三引数は長さでしたね。勘違いをしていました。
データベースの場合、１オリジン、文字開始位置、長さ、第三引数省略可が多いので
substring(string, from, [length])

みたいな感じではいかがでしょうか。
さくっとした調べでは以下のようでした。

MySQL SUBSTR/SUBSTRING 1オリジン, 文字開始位置、長さ
PostgreSQL substr/substring 1オリジン, 文字開始位置、長さ
Oracle SUBSTR 1オリジン, 文字開始位置、長さ
awk substr 1オリジン 文字開始位置, 長さ
C++ substr 0オリジン 文字開始位置、文字終端位置
Java substring 0オリジン 文字開始位置, 文字終端位置
JavaScript substring 0オリジン 文字開始位置, 文字終端位置
JavaScript substr 0オリジン 文字開始位置, 長さ
Ruby [0..5] 0オリジン 部分文字列指定 文字開始位置...文字終端位置
Python [0:5] 0オリジン 部分文字列指定 文字開始位置...文字終端位置
Perl substr 0オリジン 文字開始位置, 長さ
PHP substr 0オリジン 文字開始位置, 長さ",True,{}
groonga/groonga,https://github.com/groonga/groonga,564,2016-06-25T14:13:32Z,2016-07-05T10:21:16Z,2016-12-02T05:19:23Z,MERGED,True,220,0,7,https://github.com/naoa,plugin string: add string_substring(),1,[],https://github.com/groonga/groonga/pull/564,https://github.com/kou,4,https://github.com/groonga/groonga/pull/564#issuecomment-228772784,"substrみたいな関数がほしいと思いました。いかがでしょうか？
1スタートです。","調査ありがとうございます。では、
string_substring(string, from, [length])

で、0オリジンでおねがいします。
string_をつけたのはstring_lengthとかと同じように文字列用の関数はstring_をつけるルールにしているからです。
0オリジンなのはGroongaは配列アクセスがすでに0オリジンになっているのでそっちと合わせるためです。（PostgreSQLは配列アクセスも1オリジン。）",True,{}
groonga/groonga,https://github.com/groonga/groonga,564,2016-06-25T14:13:32Z,2016-07-05T10:21:16Z,2016-12-02T05:19:23Z,MERGED,True,220,0,7,https://github.com/naoa,plugin string: add string_substring(),1,[],https://github.com/groonga/groonga/pull/564,https://github.com/naoa,5,https://github.com/groonga/groonga/pull/564#issuecomment-228949385,"substrみたいな関数がほしいと思いました。いかがでしょうか？
1スタートです。",ありがとうございます。修正しました。,True,{}
groonga/groonga,https://github.com/groonga/groonga,564,2016-06-25T14:13:32Z,2016-07-05T10:21:16Z,2016-12-02T05:19:23Z,MERGED,True,220,0,7,https://github.com/naoa,plugin string: add string_substring(),1,[],https://github.com/groonga/groonga/pull/564,https://github.com/kou,6,https://github.com/groonga/groonga/pull/564#issuecomment-230454690,"substrみたいな関数がほしいと思いました。いかがでしょうか？
1スタートです。",取り込みました。,True,{}
groonga/groonga,https://github.com/groonga/groonga,565,2016-06-26T05:00:57Z,2016-06-26T05:55:00Z,2016-06-26T05:59:13Z,MERGED,True,51,0,5,https://github.com/naoa,expression_tree: add IndexColumn,1,[],https://github.com/groonga/groonga/pull/565,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/565,"IndexColumnがある場合でもExpressionTreeBuilderを落ちないようにしたいです。
とりあえず私の当面の目的は、私の使う予定のある構文でExpressionTreeBuilderが落ちないようにして、検索ワードに応じて使うインデックスをすげ替えるexpression-rewriterプラグインが動くようにしたいです。
https://github.com/naoa/groonga-index-selector
あと、AccesorとHashTableが指定された場合に落ちることがわかっています。","IndexColumnがある場合でもExpressionTreeBuilderを落ちないようにしたいです。
とりあえず私の当面の目的は、私の使う予定のある構文でExpressionTreeBuilderが落ちないようにして、検索ワードに応じて使うインデックスをすげ替えるexpression-rewriterプラグインが動くようにしたいです。
https://github.com/naoa/groonga-index-selector
あと、AccesorとHashTableが指定された場合に落ちることがわかっています。",True,{}
groonga/groonga,https://github.com/groonga/groonga,565,2016-06-26T05:00:57Z,2016-06-26T05:55:00Z,2016-06-26T05:59:13Z,MERGED,True,51,0,5,https://github.com/naoa,expression_tree: add IndexColumn,1,[],https://github.com/groonga/groonga/pull/565,https://github.com/kou,2,https://github.com/groonga/groonga/pull/565#issuecomment-228585923,"IndexColumnがある場合でもExpressionTreeBuilderを落ちないようにしたいです。
とりあえず私の当面の目的は、私の使う予定のある構文でExpressionTreeBuilderが落ちないようにして、検索ワードに応じて使うインデックスをすげ替えるexpression-rewriterプラグインが動くようにしたいです。
https://github.com/naoa/groonga-index-selector
あと、AccesorとHashTableが指定された場合に落ちることがわかっています。","マージしますがテストは整理しなければいけないことをメモしておきます。
ExpressionTreeを構築した結果をテストする、というレイヤーのテストの仕組みを用意しないといけない。",True,{}
groonga/groonga,https://github.com/groonga/groonga,565,2016-06-26T05:00:57Z,2016-06-26T05:55:00Z,2016-06-26T05:59:13Z,MERGED,True,51,0,5,https://github.com/naoa,expression_tree: add IndexColumn,1,[],https://github.com/groonga/groonga/pull/565,https://github.com/naoa,3,https://github.com/groonga/groonga/pull/565#issuecomment-228585961,"IndexColumnがある場合でもExpressionTreeBuilderを落ちないようにしたいです。
とりあえず私の当面の目的は、私の使う予定のある構文でExpressionTreeBuilderが落ちないようにして、検索ワードに応じて使うインデックスをすげ替えるexpression-rewriterプラグインが動くようにしたいです。
https://github.com/naoa/groonga-index-selector
あと、AccesorとHashTableが指定された場合に落ちることがわかっています。","日曜にマージありがとうございます。
betweenの最適化のテストじゃないですからね。。",True,{}
groonga/groonga,https://github.com/groonga/groonga,566,2016-06-26T06:31:01Z,2016-06-26T07:45:59Z,2016-06-26T07:47:20Z,MERGED,True,43,0,5,https://github.com/naoa,expression_tree: add Accessor,1,[],https://github.com/groonga/groonga/pull/566,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/566,ExpressionTreeBuilderを通すためにExpressionTreeにAccessorを追加しました。,ExpressionTreeBuilderを通すためにExpressionTreeにAccessorを追加しました。,True,{}
groonga/groonga,https://github.com/groonga/groonga,566,2016-06-26T06:31:01Z,2016-06-26T07:45:59Z,2016-06-26T07:47:20Z,MERGED,True,43,0,5,https://github.com/naoa,expression_tree: add Accessor,1,[],https://github.com/groonga/groonga/pull/566,https://github.com/kou,2,https://github.com/groonga/groonga/pull/566#issuecomment-228588944,ExpressionTreeBuilderを通すためにExpressionTreeにAccessorを追加しました。,マージしました！,True,{}
groonga/groonga,https://github.com/groonga/groonga,566,2016-06-26T06:31:01Z,2016-06-26T07:45:59Z,2016-06-26T07:47:20Z,MERGED,True,43,0,5,https://github.com/naoa,expression_tree: add Accessor,1,[],https://github.com/groonga/groonga/pull/566,https://github.com/naoa,3,https://github.com/groonga/groonga/pull/566#issuecomment-228588983,ExpressionTreeBuilderを通すためにExpressionTreeにAccessorを追加しました。,ありがとうございます！,True,{}
groonga/groonga,https://github.com/groonga/groonga,567,2016-06-26T08:24:23Z,2016-06-26T09:20:03Z,2016-06-26T09:21:02Z,MERGED,True,45,0,5,https://github.com/naoa,expression_tree: add Option,1,[],https://github.com/groonga/groonga/pull/567,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/567,"オブジェクトリテラル形式のオプション用にexpression_treeにOptionというクラスを追加しました。
現状、expressionの中でHashTableはオブジェクトリテラル形式のオプション用ぐらいかと思いOptionという名前にしてみました。他の方がよければご意見ください。
これのテストでexpression_treeとは別のところに１つ問題があるのですが、grn_table_createではなく直接grn_hash_createしたハッシュテーブルでgrn_table_inspectを通すと、rangeが設定されておらず、適当なrange_idが返ってきて、たまにクラッシュします。
https://github.com/groonga/groonga/blob/master/lib/util.c#L844-L845
-- C level backtrace information -------------------------------------------
/usr/local/rbenv/versions/2.3.0/bin/ruby(rb_vm_bugreport+0x51f) [0x7f98753fbd2f] vm_dump.c:688
/usr/local/rbenv/versions/2.3.0/bin/ruby(rb_bug_context+0xd0) [0x7f98753d6540] error.c:435
/usr/local/rbenv/versions/2.3.0/bin/ruby(sigsegv+0x3e) [0x7f98752d215e] signal.c:890
/lib64/libpthread.so.0 [0x7f9874db4100]
/usr/local/src/groonga/lib/.libs/libgroonga.so.0(grn_ctx_at+0x8e) [0x7f986c6aedde] db.c:9921
/usr/local/src/groonga/lib/.libs/libgroonga.so.0(grn_inspect+0x9f7) [0x7f986c8fa177] util.c:845
/usr/local/src/groonga/lib/.libs/libgroonga.so.0(grn_inspect_scan_info_list+0xde) [0x7f986c6fa78e] expr.c:5063
/usr/local/src/groonga/lib/.libs/libgroonga.so.0(grn_expr_dump_plan+0x58) [0x7f986c788388] expr.c:8515
/usr/local/src/groonga/test/mruby/rroonga/ext/groonga/groonga.so(rb_grn_expression_dump_plan+0x89) [0x7f986ccfcb39] rb-grn-expression.c:618

昨日から考えているのですが、今のところ、この回避方法が思いつきません。何かいい方法はないでしょうか？","オブジェクトリテラル形式のオプション用にexpression_treeにOptionというクラスを追加しました。
現状、expressionの中でHashTableはオブジェクトリテラル形式のオプション用ぐらいかと思いOptionという名前にしてみました。他の方がよければご意見ください。
これのテストでexpression_treeとは別のところに１つ問題があるのですが、grn_table_createではなく直接grn_hash_createしたハッシュテーブルでgrn_table_inspectを通すと、rangeが設定されておらず、適当なrange_idが返ってきて、たまにクラッシュします。
https://github.com/groonga/groonga/blob/master/lib/util.c#L844-L845
-- C level backtrace information -------------------------------------------
/usr/local/rbenv/versions/2.3.0/bin/ruby(rb_vm_bugreport+0x51f) [0x7f98753fbd2f] vm_dump.c:688
/usr/local/rbenv/versions/2.3.0/bin/ruby(rb_bug_context+0xd0) [0x7f98753d6540] error.c:435
/usr/local/rbenv/versions/2.3.0/bin/ruby(sigsegv+0x3e) [0x7f98752d215e] signal.c:890
/lib64/libpthread.so.0 [0x7f9874db4100]
/usr/local/src/groonga/lib/.libs/libgroonga.so.0(grn_ctx_at+0x8e) [0x7f986c6aedde] db.c:9921
/usr/local/src/groonga/lib/.libs/libgroonga.so.0(grn_inspect+0x9f7) [0x7f986c8fa177] util.c:845
/usr/local/src/groonga/lib/.libs/libgroonga.so.0(grn_inspect_scan_info_list+0xde) [0x7f986c6fa78e] expr.c:5063
/usr/local/src/groonga/lib/.libs/libgroonga.so.0(grn_expr_dump_plan+0x58) [0x7f986c788388] expr.c:8515
/usr/local/src/groonga/test/mruby/rroonga/ext/groonga/groonga.so(rb_grn_expression_dump_plan+0x89) [0x7f986ccfcb39] rb-grn-expression.c:618

昨日から考えているのですが、今のところ、この回避方法が思いつきません。何かいい方法はないでしょうか？",True,{}
groonga/groonga,https://github.com/groonga/groonga,567,2016-06-26T08:24:23Z,2016-06-26T09:20:03Z,2016-06-26T09:21:02Z,MERGED,True,45,0,5,https://github.com/naoa,expression_tree: add Option,1,[],https://github.com/groonga/groonga/pull/567,https://github.com/kou,2,https://github.com/groonga/groonga/pull/567#issuecomment-228591269,"オブジェクトリテラル形式のオプション用にexpression_treeにOptionというクラスを追加しました。
現状、expressionの中でHashTableはオブジェクトリテラル形式のオプション用ぐらいかと思いOptionという名前にしてみました。他の方がよければご意見ください。
これのテストでexpression_treeとは別のところに１つ問題があるのですが、grn_table_createではなく直接grn_hash_createしたハッシュテーブルでgrn_table_inspectを通すと、rangeが設定されておらず、適当なrange_idが返ってきて、たまにクラッシュします。
https://github.com/groonga/groonga/blob/master/lib/util.c#L844-L845
-- C level backtrace information -------------------------------------------
/usr/local/rbenv/versions/2.3.0/bin/ruby(rb_vm_bugreport+0x51f) [0x7f98753fbd2f] vm_dump.c:688
/usr/local/rbenv/versions/2.3.0/bin/ruby(rb_bug_context+0xd0) [0x7f98753d6540] error.c:435
/usr/local/rbenv/versions/2.3.0/bin/ruby(sigsegv+0x3e) [0x7f98752d215e] signal.c:890
/lib64/libpthread.so.0 [0x7f9874db4100]
/usr/local/src/groonga/lib/.libs/libgroonga.so.0(grn_ctx_at+0x8e) [0x7f986c6aedde] db.c:9921
/usr/local/src/groonga/lib/.libs/libgroonga.so.0(grn_inspect+0x9f7) [0x7f986c8fa177] util.c:845
/usr/local/src/groonga/lib/.libs/libgroonga.so.0(grn_inspect_scan_info_list+0xde) [0x7f986c6fa78e] expr.c:5063
/usr/local/src/groonga/lib/.libs/libgroonga.so.0(grn_expr_dump_plan+0x58) [0x7f986c788388] expr.c:8515
/usr/local/src/groonga/test/mruby/rroonga/ext/groonga/groonga.so(rb_grn_expression_dump_plan+0x89) [0x7f986ccfcb39] rb-grn-expression.c:618

昨日から考えているのですが、今のところ、この回避方法が思いつきません。何かいい方法はないでしょうか？","昨日から考えているのですが、今のところ、この回避方法が思いつきません。何かいい方法はないでしょうか？

GRN_MALLOC()ではなくGRN_CALLOC()を使うようにしたので大丈夫になったと思います。",True,{}
groonga/groonga,https://github.com/groonga/groonga,567,2016-06-26T08:24:23Z,2016-06-26T09:20:03Z,2016-06-26T09:21:02Z,MERGED,True,45,0,5,https://github.com/naoa,expression_tree: add Option,1,[],https://github.com/groonga/groonga/pull/567,https://github.com/kou,3,https://github.com/groonga/groonga/pull/567#issuecomment-228591316,"オブジェクトリテラル形式のオプション用にexpression_treeにOptionというクラスを追加しました。
現状、expressionの中でHashTableはオブジェクトリテラル形式のオプション用ぐらいかと思いOptionという名前にしてみました。他の方がよければご意見ください。
これのテストでexpression_treeとは別のところに１つ問題があるのですが、grn_table_createではなく直接grn_hash_createしたハッシュテーブルでgrn_table_inspectを通すと、rangeが設定されておらず、適当なrange_idが返ってきて、たまにクラッシュします。
https://github.com/groonga/groonga/blob/master/lib/util.c#L844-L845
-- C level backtrace information -------------------------------------------
/usr/local/rbenv/versions/2.3.0/bin/ruby(rb_vm_bugreport+0x51f) [0x7f98753fbd2f] vm_dump.c:688
/usr/local/rbenv/versions/2.3.0/bin/ruby(rb_bug_context+0xd0) [0x7f98753d6540] error.c:435
/usr/local/rbenv/versions/2.3.0/bin/ruby(sigsegv+0x3e) [0x7f98752d215e] signal.c:890
/lib64/libpthread.so.0 [0x7f9874db4100]
/usr/local/src/groonga/lib/.libs/libgroonga.so.0(grn_ctx_at+0x8e) [0x7f986c6aedde] db.c:9921
/usr/local/src/groonga/lib/.libs/libgroonga.so.0(grn_inspect+0x9f7) [0x7f986c8fa177] util.c:845
/usr/local/src/groonga/lib/.libs/libgroonga.so.0(grn_inspect_scan_info_list+0xde) [0x7f986c6fa78e] expr.c:5063
/usr/local/src/groonga/lib/.libs/libgroonga.so.0(grn_expr_dump_plan+0x58) [0x7f986c788388] expr.c:8515
/usr/local/src/groonga/test/mruby/rroonga/ext/groonga/groonga.so(rb_grn_expression_dump_plan+0x89) [0x7f986ccfcb39] rb-grn-expression.c:618

昨日から考えているのですが、今のところ、この回避方法が思いつきません。何かいい方法はないでしょうか？",複数になるのでOptionsでおねがいします！,True,{}
groonga/groonga,https://github.com/groonga/groonga,567,2016-06-26T08:24:23Z,2016-06-26T09:20:03Z,2016-06-26T09:21:02Z,MERGED,True,45,0,5,https://github.com/naoa,expression_tree: add Option,1,[],https://github.com/groonga/groonga/pull/567,https://github.com/naoa,4,https://github.com/groonga/groonga/pull/567#issuecomment-228591733,"オブジェクトリテラル形式のオプション用にexpression_treeにOptionというクラスを追加しました。
現状、expressionの中でHashTableはオブジェクトリテラル形式のオプション用ぐらいかと思いOptionという名前にしてみました。他の方がよければご意見ください。
これのテストでexpression_treeとは別のところに１つ問題があるのですが、grn_table_createではなく直接grn_hash_createしたハッシュテーブルでgrn_table_inspectを通すと、rangeが設定されておらず、適当なrange_idが返ってきて、たまにクラッシュします。
https://github.com/groonga/groonga/blob/master/lib/util.c#L844-L845
-- C level backtrace information -------------------------------------------
/usr/local/rbenv/versions/2.3.0/bin/ruby(rb_vm_bugreport+0x51f) [0x7f98753fbd2f] vm_dump.c:688
/usr/local/rbenv/versions/2.3.0/bin/ruby(rb_bug_context+0xd0) [0x7f98753d6540] error.c:435
/usr/local/rbenv/versions/2.3.0/bin/ruby(sigsegv+0x3e) [0x7f98752d215e] signal.c:890
/lib64/libpthread.so.0 [0x7f9874db4100]
/usr/local/src/groonga/lib/.libs/libgroonga.so.0(grn_ctx_at+0x8e) [0x7f986c6aedde] db.c:9921
/usr/local/src/groonga/lib/.libs/libgroonga.so.0(grn_inspect+0x9f7) [0x7f986c8fa177] util.c:845
/usr/local/src/groonga/lib/.libs/libgroonga.so.0(grn_inspect_scan_info_list+0xde) [0x7f986c6fa78e] expr.c:5063
/usr/local/src/groonga/lib/.libs/libgroonga.so.0(grn_expr_dump_plan+0x58) [0x7f986c788388] expr.c:8515
/usr/local/src/groonga/test/mruby/rroonga/ext/groonga/groonga.so(rb_grn_expression_dump_plan+0x89) [0x7f986ccfcb39] rb-grn-expression.c:618

昨日から考えているのですが、今のところ、この回避方法が思いつきません。何かいい方法はないでしょうか？",ありがとうございます。Optionsに修正しました。,True,{}
groonga/groonga,https://github.com/groonga/groonga,567,2016-06-26T08:24:23Z,2016-06-26T09:20:03Z,2016-06-26T09:21:02Z,MERGED,True,45,0,5,https://github.com/naoa,expression_tree: add Option,1,[],https://github.com/groonga/groonga/pull/567,https://github.com/kou,5,https://github.com/groonga/groonga/pull/567#issuecomment-228592057,"オブジェクトリテラル形式のオプション用にexpression_treeにOptionというクラスを追加しました。
現状、expressionの中でHashTableはオブジェクトリテラル形式のオプション用ぐらいかと思いOptionという名前にしてみました。他の方がよければご意見ください。
これのテストでexpression_treeとは別のところに１つ問題があるのですが、grn_table_createではなく直接grn_hash_createしたハッシュテーブルでgrn_table_inspectを通すと、rangeが設定されておらず、適当なrange_idが返ってきて、たまにクラッシュします。
https://github.com/groonga/groonga/blob/master/lib/util.c#L844-L845
-- C level backtrace information -------------------------------------------
/usr/local/rbenv/versions/2.3.0/bin/ruby(rb_vm_bugreport+0x51f) [0x7f98753fbd2f] vm_dump.c:688
/usr/local/rbenv/versions/2.3.0/bin/ruby(rb_bug_context+0xd0) [0x7f98753d6540] error.c:435
/usr/local/rbenv/versions/2.3.0/bin/ruby(sigsegv+0x3e) [0x7f98752d215e] signal.c:890
/lib64/libpthread.so.0 [0x7f9874db4100]
/usr/local/src/groonga/lib/.libs/libgroonga.so.0(grn_ctx_at+0x8e) [0x7f986c6aedde] db.c:9921
/usr/local/src/groonga/lib/.libs/libgroonga.so.0(grn_inspect+0x9f7) [0x7f986c8fa177] util.c:845
/usr/local/src/groonga/lib/.libs/libgroonga.so.0(grn_inspect_scan_info_list+0xde) [0x7f986c6fa78e] expr.c:5063
/usr/local/src/groonga/lib/.libs/libgroonga.so.0(grn_expr_dump_plan+0x58) [0x7f986c788388] expr.c:8515
/usr/local/src/groonga/test/mruby/rroonga/ext/groonga/groonga.so(rb_grn_expression_dump_plan+0x89) [0x7f986ccfcb39] rb-grn-expression.c:618

昨日から考えているのですが、今のところ、この回避方法が思いつきません。何かいい方法はないでしょうか？",マージしました！,True,{}
groonga/groonga,https://github.com/groonga/groonga,567,2016-06-26T08:24:23Z,2016-06-26T09:20:03Z,2016-06-26T09:21:02Z,MERGED,True,45,0,5,https://github.com/naoa,expression_tree: add Option,1,[],https://github.com/groonga/groonga/pull/567,https://github.com/naoa,6,https://github.com/groonga/groonga/pull/567#issuecomment-228592085,"オブジェクトリテラル形式のオプション用にexpression_treeにOptionというクラスを追加しました。
現状、expressionの中でHashTableはオブジェクトリテラル形式のオプション用ぐらいかと思いOptionという名前にしてみました。他の方がよければご意見ください。
これのテストでexpression_treeとは別のところに１つ問題があるのですが、grn_table_createではなく直接grn_hash_createしたハッシュテーブルでgrn_table_inspectを通すと、rangeが設定されておらず、適当なrange_idが返ってきて、たまにクラッシュします。
https://github.com/groonga/groonga/blob/master/lib/util.c#L844-L845
-- C level backtrace information -------------------------------------------
/usr/local/rbenv/versions/2.3.0/bin/ruby(rb_vm_bugreport+0x51f) [0x7f98753fbd2f] vm_dump.c:688
/usr/local/rbenv/versions/2.3.0/bin/ruby(rb_bug_context+0xd0) [0x7f98753d6540] error.c:435
/usr/local/rbenv/versions/2.3.0/bin/ruby(sigsegv+0x3e) [0x7f98752d215e] signal.c:890
/lib64/libpthread.so.0 [0x7f9874db4100]
/usr/local/src/groonga/lib/.libs/libgroonga.so.0(grn_ctx_at+0x8e) [0x7f986c6aedde] db.c:9921
/usr/local/src/groonga/lib/.libs/libgroonga.so.0(grn_inspect+0x9f7) [0x7f986c8fa177] util.c:845
/usr/local/src/groonga/lib/.libs/libgroonga.so.0(grn_inspect_scan_info_list+0xde) [0x7f986c6fa78e] expr.c:5063
/usr/local/src/groonga/lib/.libs/libgroonga.so.0(grn_expr_dump_plan+0x58) [0x7f986c788388] expr.c:8515
/usr/local/src/groonga/test/mruby/rroonga/ext/groonga/groonga.so(rb_grn_expression_dump_plan+0x89) [0x7f986ccfcb39] rb-grn-expression.c:618

昨日から考えているのですが、今のところ、この回避方法が思いつきません。何かいい方法はないでしょうか？",たくさんマージしていただきありがとうございます！,True,{}
groonga/groonga,https://github.com/groonga/groonga,568,2016-06-26T10:01:31Z,2016-06-26T13:31:35Z,2016-06-26T13:56:17Z,MERGED,True,215,1,5,https://github.com/naoa,select: support dynamic column as output stage,1,[],https://github.com/groonga/groonga/pull/568,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/568,関数の名前付けのために動的カラムを使いたかったのですが、filteredステージよりもoutputステージで使った方が速度劣化を抑えられそうでしたので実装してみました。ご確認ください。,関数の名前付けのために動的カラムを使いたかったのですが、filteredステージよりもoutputステージで使った方が速度劣化を抑えられそうでしたので実装してみました。ご確認ください。,True,{}
groonga/groonga,https://github.com/groonga/groonga,568,2016-06-26T10:01:31Z,2016-06-26T13:31:35Z,2016-06-26T13:56:17Z,MERGED,True,215,1,5,https://github.com/naoa,select: support dynamic column as output stage,1,[],https://github.com/groonga/groonga/pull/568,https://github.com/kou,2,https://github.com/groonga/groonga/pull/568#issuecomment-228602018,関数の名前付けのために動的カラムを使いたかったのですが、filteredステージよりもoutputステージで使った方が速度劣化を抑えられそうでしたので実装してみました。ご確認ください。,作ろうと思っていたものでした。,True,{}
groonga/groonga,https://github.com/groonga/groonga,569,2016-06-26T12:03:27Z,2016-06-26T13:45:06Z,2016-06-26T13:56:07Z,MERGED,True,174,8,3,https://github.com/naoa,select drilldown: support target slice table,1,[],https://github.com/groonga/groonga/pull/569,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/569,selectのsliceというものを試してみていて、sliceのテーブルをdrilldownで指定できるととても嬉しいなと思いました。,selectのsliceというものを試してみていて、sliceのテーブルをdrilldownで指定できるととても嬉しいなと思いました。,True,{}
groonga/groonga,https://github.com/groonga/groonga,569,2016-06-26T12:03:27Z,2016-06-26T13:45:06Z,2016-06-26T13:56:07Z,MERGED,True,174,8,3,https://github.com/naoa,select drilldown: support target slice table,1,[],https://github.com/groonga/groonga/pull/569,https://github.com/kou,2,https://github.com/groonga/groonga/pull/569#issuecomment-228602484,selectのsliceというものを試してみていて、sliceのテーブルをdrilldownで指定できるととても嬉しいなと思いました。,これも作ろうと思っていたものでした。,True,{}
groonga/groonga,https://github.com/groonga/groonga,569,2016-06-26T12:03:27Z,2016-06-26T13:45:06Z,2016-06-26T13:56:07Z,MERGED,True,174,8,3,https://github.com/naoa,select drilldown: support target slice table,1,[],https://github.com/groonga/groonga/pull/569,https://github.com/naoa,3,https://github.com/groonga/groonga/pull/569#issuecomment-228602602,selectのsliceというものを試してみていて、sliceのテーブルをdrilldownで指定できるととても嬉しいなと思いました。,"ありがとうございます！
Groongaのselect色々とできるようになっていて素晴らしいです！",True,{}
groonga/groonga,https://github.com/groonga/groonga,570,2016-06-28T06:06:20Z,2016-07-05T08:39:42Z,2016-07-05T08:56:42Z,MERGED,True,8,0,1,https://github.com/naoa,db: validate key_type existance when table type is not TABLE_NO_KEY,1,[],https://github.com/groonga/groonga/pull/570,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/570,"grn_table_createで、TABLE_NO_KEY以外が指定された場合、keyの存在チェックをしたほうがいいと思ったのですがいかがでしょうか？
以下のコマンドが正常に通って、なんで検索できないか気づくのに少し時間がかかりました。
table_create Lexicon TABLE_PAT_KEY --default_tokenizer TokenDelimit
[[0,0.0,0.0],true]
table_create Entries TABLE_NO_KEY
[[0,0.0,0.0],true]
column_create Entries title COLUMN_SCALAR ShortText
[[0,0.0,0.0],true]
column_create Lexicon title COLUMN_INDEX|WITH_POSITION Entries title
[[0,0.0,0.0],true]
load --table Entries
[
{""title"": ""Groonga and MySQL""}
]
[[0,0.0,0.0],1]
select Entries   --filter 'title @ ""MySQL""'
[[0,0.0,0.0],[[[0],[[""_id"",""UInt32""],[""title"",""ShortText""]]]]]","grn_table_createで、TABLE_NO_KEY以外が指定された場合、keyの存在チェックをしたほうがいいと思ったのですがいかがでしょうか？
以下のコマンドが正常に通って、なんで検索できないか気づくのに少し時間がかかりました。
table_create Lexicon TABLE_PAT_KEY --default_tokenizer TokenDelimit
[[0,0.0,0.0],true]
table_create Entries TABLE_NO_KEY
[[0,0.0,0.0],true]
column_create Entries title COLUMN_SCALAR ShortText
[[0,0.0,0.0],true]
column_create Lexicon title COLUMN_INDEX|WITH_POSITION Entries title
[[0,0.0,0.0],true]
load --table Entries
[
{""title"": ""Groonga and MySQL""}
]
[[0,0.0,0.0],1]
select Entries   --filter 'title @ ""MySQL""'
[[0,0.0,0.0],[[[0],[[""_id"",""UInt32""],[""title"",""ShortText""]]]]]",True,{}
groonga/groonga,https://github.com/groonga/groonga,570,2016-06-28T06:06:20Z,2016-07-05T08:39:42Z,2016-07-05T08:56:42Z,MERGED,True,8,0,1,https://github.com/naoa,db: validate key_type existance when table type is not TABLE_NO_KEY,1,[],https://github.com/groonga/groonga/pull/570,https://github.com/kou,2,https://github.com/groonga/groonga/pull/570#issuecomment-230421713,"grn_table_createで、TABLE_NO_KEY以外が指定された場合、keyの存在チェックをしたほうがいいと思ったのですがいかがでしょうか？
以下のコマンドが正常に通って、なんで検索できないか気づくのに少し時間がかかりました。
table_create Lexicon TABLE_PAT_KEY --default_tokenizer TokenDelimit
[[0,0.0,0.0],true]
table_create Entries TABLE_NO_KEY
[[0,0.0,0.0],true]
column_create Entries title COLUMN_SCALAR ShortText
[[0,0.0,0.0],true]
column_create Lexicon title COLUMN_INDEX|WITH_POSITION Entries title
[[0,0.0,0.0],true]
load --table Entries
[
{""title"": ""Groonga and MySQL""}
]
[[0,0.0,0.0],1]
select Entries   --filter 'title @ ""MySQL""'
[[0,0.0,0.0],[[[0],[[""_id"",""UInt32""],[""title"",""ShortText""]]]]]","やりたいことはいいと思うんですが、grn_table_create()の中の方でやっちゃうと複数キーでドリルダウンしたときの結果を保存するためのテーブルを作れなくなってしまうので、違う実装にするか複数キーでドリルダウンするときはShortTextにするかしないといけません。
なお、私は、複数キーでドリルダウンするときは文字列ではなくてバイナリーになるのでShortTextは不適切だと思っています。",True,{}
groonga/groonga,https://github.com/groonga/groonga,570,2016-06-28T06:06:20Z,2016-07-05T08:39:42Z,2016-07-05T08:56:42Z,MERGED,True,8,0,1,https://github.com/naoa,db: validate key_type existance when table type is not TABLE_NO_KEY,1,[],https://github.com/groonga/groonga/pull/570,https://github.com/naoa,3,https://github.com/groonga/groonga/pull/570#issuecomment-230423393,"grn_table_createで、TABLE_NO_KEY以外が指定された場合、keyの存在チェックをしたほうがいいと思ったのですがいかがでしょうか？
以下のコマンドが正常に通って、なんで検索できないか気づくのに少し時間がかかりました。
table_create Lexicon TABLE_PAT_KEY --default_tokenizer TokenDelimit
[[0,0.0,0.0],true]
table_create Entries TABLE_NO_KEY
[[0,0.0,0.0],true]
column_create Entries title COLUMN_SCALAR ShortText
[[0,0.0,0.0],true]
column_create Lexicon title COLUMN_INDEX|WITH_POSITION Entries title
[[0,0.0,0.0],true]
load --table Entries
[
{""title"": ""Groonga and MySQL""}
]
[[0,0.0,0.0],1]
select Entries   --filter 'title @ ""MySQL""'
[[0,0.0,0.0],[[[0],[[""_id"",""UInt32""],[""title"",""ShortText""]]]]]","なるほどAPIでそういう使われ方をされていたのですね、気づきませんでした。
コマンド使ってて引っかかって気になっただけですので、APIレベルで禁止しなくても別にいいと思います。",True,{}
groonga/groonga,https://github.com/groonga/groonga,571,2016-06-28T12:18:39Z,2016-06-28T12:20:39Z,2016-07-05T09:06:23Z,CLOSED,False,65,2,4,https://github.com/naoa,fuzzy_search: fix a bug that have same distance,1,[],https://github.com/groonga/groonga/pull/571,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/571,"すいません。fuzzy_search用にdistance順に出力するために実装した二分ヒープにバグがありました。
２分木にすでに同じ値がある場合、最後の位置に取り残されてしまっていました。","すいません。fuzzy_search用にdistance順に出力するために実装した二分ヒープにバグがありました。
２分木にすでに同じ値がある場合、最後の位置に取り残されてしまっていました。",True,{}
groonga/groonga,https://github.com/groonga/groonga,571,2016-06-28T12:18:39Z,2016-06-28T12:20:39Z,2016-07-05T09:06:23Z,CLOSED,False,65,2,4,https://github.com/naoa,fuzzy_search: fix a bug that have same distance,1,[],https://github.com/groonga/groonga/pull/571,https://github.com/naoa,2,https://github.com/groonga/groonga/pull/571#issuecomment-229032716,"すいません。fuzzy_search用にdistance順に出力するために実装した二分ヒープにバグがありました。
２分木にすでに同じ値がある場合、最後の位置に取り残されてしまっていました。",いや、ちょっとまだこれでもおかしいですね。。いったん取り下げます。。,True,{}
groonga/groonga,https://github.com/groonga/groonga,571,2016-06-28T12:18:39Z,2016-06-28T12:20:39Z,2016-07-05T09:06:23Z,CLOSED,False,65,2,4,https://github.com/naoa,fuzzy_search: fix a bug that have same distance,1,[],https://github.com/groonga/groonga/pull/571,https://github.com/naoa,3,https://github.com/groonga/groonga/pull/571#issuecomment-229055679,"すいません。fuzzy_search用にdistance順に出力するために実装した二分ヒープにバグがありました。
２分木にすでに同じ値がある場合、最後の位置に取り残されてしまっていました。",よくよく考えるとバグじゃなくて仕様でした。忘れていました。現状、ソートなしでは最小値（最も近いもの）しか保証されません。正確な距離順に出力するには_scoreソートが必要です。,True,{}
groonga/groonga,https://github.com/groonga/groonga,572,2016-06-28T12:46:38Z,2016-06-28T23:28:01Z,2016-06-28T23:34:23Z,MERGED,True,1,1,1,https://github.com/cosmo0920,doc news ja: Fix a typo,1,[],https://github.com/groonga/groonga/pull/572,https://github.com/cosmo0920,1,https://github.com/groonga/groonga/pull/572,"dirlldown_filter ->
drilldown_filter
 ^^","dirlldown_filter ->
drilldown_filter
 ^^",True,{}
groonga/groonga,https://github.com/groonga/groonga,572,2016-06-28T12:46:38Z,2016-06-28T23:28:01Z,2016-06-28T23:34:23Z,MERGED,True,1,1,1,https://github.com/cosmo0920,doc news ja: Fix a typo,1,[],https://github.com/groonga/groonga/pull/572,https://github.com/cosmo0920,2,https://github.com/groonga/groonga/pull/572#issuecomment-229215644,"dirlldown_filter ->
drilldown_filter
 ^^",Thanks!,True,{}
groonga/groonga,https://github.com/groonga/groonga,576,2016-07-01T16:47:54Z,2016-07-02T13:14:53Z,2016-07-02T13:15:03Z,MERGED,True,7,1,1,https://github.com/tamano,Use `gzcat` instead of `zcat` if exists.,1,[],https://github.com/groonga/groonga/pull/576,https://github.com/tamano,1,https://github.com/groonga/groonga/pull/576,OSXのzcatコマンドではシェルスクリプト実行時にエラーとなるため、gzcatコマンドで代用できるようにしたい。,OSXのzcatコマンドではシェルスクリプト実行時にエラーとなるため、gzcatコマンドで代用できるようにしたい。,True,{}
groonga/groonga,https://github.com/groonga/groonga,576,2016-07-01T16:47:54Z,2016-07-02T13:14:53Z,2016-07-02T13:15:03Z,MERGED,True,7,1,1,https://github.com/tamano,Use `gzcat` instead of `zcat` if exists.,1,[],https://github.com/groonga/groonga/pull/576,https://github.com/kou,2,https://github.com/groonga/groonga/pull/576#issuecomment-230101213,OSXのzcatコマンドではシェルスクリプト実行時にエラーとなるため、gzcatコマンドで代用できるようにしたい。,サイコーです！,True,{}
groonga/groonga,https://github.com/groonga/groonga,577,2016-07-05T01:07:50Z,2016-07-14T09:47:23Z,2016-07-14T09:47:29Z,CLOSED,False,157,4,3,https://github.com/naoa,select slices: support target sorted table,1,[],https://github.com/groonga/groonga/pull/577,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/577,"selectのslicesでfilter結果のresultテーブルだけでなくて、
sortedテーブルを指定できるといいなと思っています。
私の考えている１つのユースケースは、filterで誤差が含まれるが
高速な類似演算を行った後、outputステージで低速だが厳密な
類似演算を行って、それをソートしたいと考えています。","selectのslicesでfilter結果のresultテーブルだけでなくて、
sortedテーブルを指定できるといいなと思っています。
私の考えている１つのユースケースは、filterで誤差が含まれるが
高速な類似演算を行った後、outputステージで低速だが厳密な
類似演算を行って、それをソートしたいと考えています。",True,{}
groonga/groonga,https://github.com/groonga/groonga,577,2016-07-05T01:07:50Z,2016-07-14T09:47:23Z,2016-07-14T09:47:29Z,CLOSED,False,157,4,3,https://github.com/naoa,select slices: support target sorted table,1,[],https://github.com/groonga/groonga/pull/577,https://github.com/kou,2,https://github.com/groonga/groonga/pull/577#issuecomment-232283890,"selectのslicesでfilter結果のresultテーブルだけでなくて、
sortedテーブルを指定できるといいなと思っています。
私の考えている１つのユースケースは、filterで誤差が含まれるが
高速な類似演算を行った後、outputステージで低速だが厳密な
類似演算を行って、それをソートしたいと考えています。",うーん、--slices[XXX].columns[YYY]...ができるようになるといいのかなぁと思いました。,True,{}
groonga/groonga,https://github.com/groonga/groonga,577,2016-07-05T01:07:50Z,2016-07-14T09:47:23Z,2016-07-14T09:47:29Z,CLOSED,False,157,4,3,https://github.com/naoa,select slices: support target sorted table,1,[],https://github.com/groonga/groonga/pull/577,https://github.com/naoa,3,https://github.com/groonga/groonga/pull/577#issuecomment-232618817,"selectのslicesでfilter結果のresultテーブルだけでなくて、
sortedテーブルを指定できるといいなと思っています。
私の考えている１つのユースケースは、filterで誤差が含まれるが
高速な類似演算を行った後、outputステージで低速だが厳密な
類似演算を行って、それをソートしたいと考えています。","なるほど。一次カラムでソートするのですね。
それでもやりたいことは実現できますね。
しかし、色々と考えた結果、再スコアソートは自作のselector関数内で完結させることにしました。
そのため、こちらは閉じさせていただきます。
また、そのようなものを使用したいケースがでてきたときは相談させてください。",True,{}
groonga/groonga,https://github.com/groonga/groonga,578,2016-07-05T08:43:15Z,2016-07-05T08:43:21Z,2016-07-05T08:43:23Z,MERGED,True,0,8,1,https://github.com/kou,"Revert ""db: validate key_type existance when table type is not TABLE_NO_KEY""",1,[],https://github.com/groonga/groonga/pull/578,https://github.com/kou,1,https://github.com/groonga/groonga/pull/578,"Reverts #570
It also disables creating a result set table. It's not acceptable.","Reverts #570
It also disables creating a result set table. It's not acceptable.",True,{}
groonga/groonga,https://github.com/groonga/groonga,579,2016-07-06T09:27:18Z,2016-07-07T02:20:10Z,2016-07-07T05:27:53Z,MERGED,True,2,1,1,https://github.com/msh5,Null-check should precede dereference,1,[],https://github.com/groonga/groonga/pull/579,https://github.com/msh5,1,https://github.com/groonga/groonga/pull/579,"grn_proc_create 関数の冒頭で、ctx->impl を NULL チェックしているにも関わらず、
その手前で plugin_path メンバを参照しています。","grn_proc_create 関数の冒頭で、ctx->impl を NULL チェックしているにも関わらず、
その手前で plugin_path メンバを参照しています。",True,{}
groonga/groonga,https://github.com/groonga/groonga,579,2016-07-06T09:27:18Z,2016-07-07T02:20:10Z,2016-07-07T05:27:53Z,MERGED,True,2,1,1,https://github.com/msh5,Null-check should precede dereference,1,[],https://github.com/groonga/groonga/pull/579,https://github.com/kou,2,https://github.com/groonga/groonga/pull/579#issuecomment-230961912,"grn_proc_create 関数の冒頭で、ctx->impl を NULL チェックしているにも関わらず、
その手前で plugin_path メンバを参照しています。",たしかにこれはおかしいですね！,True,{}
groonga/groonga,https://github.com/groonga/groonga,579,2016-07-06T09:27:18Z,2016-07-07T02:20:10Z,2016-07-07T05:27:53Z,MERGED,True,2,1,1,https://github.com/msh5,Null-check should precede dereference,1,[],https://github.com/groonga/groonga/pull/579,https://github.com/msh5,3,https://github.com/groonga/groonga/pull/579#issuecomment-230982411,"grn_proc_create 関数の冒頭で、ctx->impl を NULL チェックしているにも関わらず、
その手前で plugin_path メンバを参照しています。",ご対応有難うございました。,True,{}
groonga/groonga,https://github.com/groonga/groonga,582,2016-07-11T14:42:11Z,2016-07-18T13:25:57Z,2016-07-18T23:13:35Z,MERGED,True,837,0,17,https://github.com/naoa,plugin vector: add vector_slice(),1,[],https://github.com/groonga/groonga/pull/582,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/582,"ベクターから要素を抽出する関数が欲しいです。
具体的には、文書から抽出した特徴語を２００次元ほどの重み付きリファレンスベクターに入れているのですが、それをサジェストワードに使うために上位10個ほどを抽出する目的に使いたいです。
第二引数fromに負の値を指定して後ろ１個だけ指定などをし易そうだったので、第三引数はlength(要素数)にしました。
他の方が良いなどの意見があればお願いします。
syntax
vector_slice(vector, from*[, length])

*fromは0 origin
Other language's syntax

PostgreSQL
ARRAY[start:end]
1 origin
Ruby
array.slice(index)
array.slice(index, length)
array.slice(start..end)
0 origin
Python
array[start:end]
0 origin
Javascript
array.slice(start,end)
0 origin
PHP
array_slice(array, offset, length)
0 origin","ベクターから要素を抽出する関数が欲しいです。
具体的には、文書から抽出した特徴語を２００次元ほどの重み付きリファレンスベクターに入れているのですが、それをサジェストワードに使うために上位10個ほどを抽出する目的に使いたいです。
第二引数fromに負の値を指定して後ろ１個だけ指定などをし易そうだったので、第三引数はlength(要素数)にしました。
他の方が良いなどの意見があればお願いします。
syntax
vector_slice(vector, from*[, length])

*fromは0 origin
Other language's syntax

PostgreSQL
ARRAY[start:end]
1 origin
Ruby
array.slice(index)
array.slice(index, length)
array.slice(start..end)
0 origin
Python
array[start:end]
0 origin
Javascript
array.slice(start,end)
0 origin
PHP
array_slice(array, offset, length)
0 origin",True,{}
groonga/groonga,https://github.com/groonga/groonga,582,2016-07-11T14:42:11Z,2016-07-18T13:25:57Z,2016-07-18T23:13:35Z,MERGED,True,837,0,17,https://github.com/naoa,plugin vector: add vector_slice(),1,[],https://github.com/groonga/groonga/pull/582,https://github.com/naoa,2,https://github.com/groonga/groonga/pull/582#issuecomment-231802486,"ベクターから要素を抽出する関数が欲しいです。
具体的には、文書から抽出した特徴語を２００次元ほどの重み付きリファレンスベクターに入れているのですが、それをサジェストワードに使うために上位10個ほどを抽出する目的に使いたいです。
第二引数fromに負の値を指定して後ろ１個だけ指定などをし易そうだったので、第三引数はlength(要素数)にしました。
他の方が良いなどの意見があればお願いします。
syntax
vector_slice(vector, from*[, length])

*fromは0 origin
Other language's syntax

PostgreSQL
ARRAY[start:end]
1 origin
Ruby
array.slice(index)
array.slice(index, length)
array.slice(start..end)
0 origin
Python
array[start:end]
0 origin
Javascript
array.slice(start,end)
0 origin
PHP
array_slice(array, offset, length)
0 origin","slice =
  grn_plugin_proc_alloc(ctx,
   user_data, target->header.domain, GRN_OBJ_VECTOR|GRN_OBJ_WITH_WEIGHT);

とGRN_OBJ_WIT_WEIGHTフラグを渡してgrn_obj_reinitできるといいのかなと思ったのですが、
grn_obj_reinitに渡せるフラグはunsigned char flagsと8ビット幅しかなくて、
WITH_WEIGHTフラグを判定することができませんでした。
そのため、2つ目のコミットでunsigned char flagsをgrn_obj_flags(uint16_t)に変更しています。
APIのflagsがunsigned char -> uint16_tになり非互換となると思いますがこれは受け入れ可能でしょうか。",True,{}
groonga/groonga,https://github.com/groonga/groonga,582,2016-07-11T14:42:11Z,2016-07-18T13:25:57Z,2016-07-18T23:13:35Z,MERGED,True,837,0,17,https://github.com/naoa,plugin vector: add vector_slice(),1,[],https://github.com/groonga/groonga/pull/582,https://github.com/kou,3,https://github.com/groonga/groonga/pull/582#issuecomment-232288499,"ベクターから要素を抽出する関数が欲しいです。
具体的には、文書から抽出した特徴語を２００次元ほどの重み付きリファレンスベクターに入れているのですが、それをサジェストワードに使うために上位10個ほどを抽出する目的に使いたいです。
第二引数fromに負の値を指定して後ろ１個だけ指定などをし易そうだったので、第三引数はlength(要素数)にしました。
他の方が良いなどの意見があればお願いします。
syntax
vector_slice(vector, from*[, length])

*fromは0 origin
Other language's syntax

PostgreSQL
ARRAY[start:end]
1 origin
Ruby
array.slice(index)
array.slice(index, length)
array.slice(start..end)
0 origin
Python
array[start:end]
0 origin
Javascript
array.slice(start,end)
0 origin
PHP
array_slice(array, offset, length)
0 origin","vector_sliceのインターフェイスはこれでよいと思います。
grn_plugin_proc_alloc()にGRN_OBJ_WITH_WEIGHTを渡せるようにするのは。。。ABIが壊れないことが確認できればアリなのかなぁ。。。ちなみに、16bit非符号整数（grn_obj_flags）を32bit非符号整数（grn_table_flags）にしてもABIが壊れないことは確認できたので、最近変更しました。
grn_obj_reinit()がGRN_OBJ_WITH_WEIGHTを受け付けるようにするなら、GRN_XXX_INITも受け付けるようにしないとバランスが悪いと思うんですよねぇ。いっそ、GRN_OBJ_WITH_FLAGSはINITしたあとにユーザーが別途指定してください、にしちゃうのがよいのかしら。",True,{}
groonga/groonga,https://github.com/groonga/groonga,582,2016-07-11T14:42:11Z,2016-07-18T13:25:57Z,2016-07-18T23:13:35Z,MERGED,True,837,0,17,https://github.com/naoa,plugin vector: add vector_slice(),1,[],https://github.com/groonga/groonga/pull/582,https://github.com/naoa,4,https://github.com/groonga/groonga/pull/582#issuecomment-232620743,"ベクターから要素を抽出する関数が欲しいです。
具体的には、文書から抽出した特徴語を２００次元ほどの重み付きリファレンスベクターに入れているのですが、それをサジェストワードに使うために上位10個ほどを抽出する目的に使いたいです。
第二引数fromに負の値を指定して後ろ１個だけ指定などをし易そうだったので、第三引数はlength(要素数)にしました。
他の方が良いなどの意見があればお願いします。
syntax
vector_slice(vector, from*[, length])

*fromは0 origin
Other language's syntax

PostgreSQL
ARRAY[start:end]
1 origin
Ruby
array.slice(index)
array.slice(index, length)
array.slice(start..end)
0 origin
Python
array[start:end]
0 origin
Javascript
array.slice(start,end)
0 origin
PHP
array_slice(array, offset, length)
0 origin","機能追加のために新しいフラグを追加したいというわけでもないので、非互換になるおそれのある変更を無理にいれる必要はないのかなと思いました。

いっそ、GRN_OBJ_WITH_FLAGSはINITしたあとにユーザーが別途指定してください、にしちゃうのがよいのかしら。

なので、今回はこちらのようにGRN_OBJ_WITH_WEIGHTはINITした後に付け足す形にしました。",True,{}
groonga/groonga,https://github.com/groonga/groonga,582,2016-07-11T14:42:11Z,2016-07-18T13:25:57Z,2016-07-18T23:13:35Z,MERGED,True,837,0,17,https://github.com/naoa,plugin vector: add vector_slice(),1,[],https://github.com/groonga/groonga/pull/582,https://github.com/kou,5,https://github.com/groonga/groonga/pull/582#issuecomment-233352572,"ベクターから要素を抽出する関数が欲しいです。
具体的には、文書から抽出した特徴語を２００次元ほどの重み付きリファレンスベクターに入れているのですが、それをサジェストワードに使うために上位10個ほどを抽出する目的に使いたいです。
第二引数fromに負の値を指定して後ろ１個だけ指定などをし易そうだったので、第三引数はlength(要素数)にしました。
他の方が良いなどの意見があればお願いします。
syntax
vector_slice(vector, from*[, length])

*fromは0 origin
Other language's syntax

PostgreSQL
ARRAY[start:end]
1 origin
Ruby
array.slice(index)
array.slice(index, length)
array.slice(start..end)
0 origin
Python
array[start:end]
0 origin
Javascript
array.slice(start,end)
0 origin
PHP
array_slice(array, offset, length)
0 origin","ありがとうございます。
マージしました。",True,{}
groonga/groonga,https://github.com/groonga/groonga,582,2016-07-11T14:42:11Z,2016-07-18T13:25:57Z,2016-07-18T23:13:35Z,MERGED,True,837,0,17,https://github.com/naoa,plugin vector: add vector_slice(),1,[],https://github.com/groonga/groonga/pull/582,https://github.com/naoa,6,https://github.com/groonga/groonga/pull/582#issuecomment-233486793,"ベクターから要素を抽出する関数が欲しいです。
具体的には、文書から抽出した特徴語を２００次元ほどの重み付きリファレンスベクターに入れているのですが、それをサジェストワードに使うために上位10個ほどを抽出する目的に使いたいです。
第二引数fromに負の値を指定して後ろ１個だけ指定などをし易そうだったので、第三引数はlength(要素数)にしました。
他の方が良いなどの意見があればお願いします。
syntax
vector_slice(vector, from*[, length])

*fromは0 origin
Other language's syntax

PostgreSQL
ARRAY[start:end]
1 origin
Ruby
array.slice(index)
array.slice(index, length)
array.slice(start..end)
0 origin
Python
array[start:end]
0 origin
Javascript
array.slice(start,end)
0 origin
PHP
array_slice(array, offset, length)
0 origin",ありがとうございます,True,{}
groonga/groonga,https://github.com/groonga/groonga,585,2016-07-15T08:43:43Z,2016-07-18T09:49:55Z,2016-07-18T11:25:35Z,MERGED,True,66,0,3,https://github.com/naoa,fix a bug object literal expression codes is broken,1,[],https://github.com/groonga/groonga/pull/585,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/585,"fix #584
オブジェクトリテラル形式のオプションを使うとgrn_expr_dfiがずれていて、複数の論理演算のときにうまくscan_infoを構築できていませんでしたので、修正しました。
なお、ubuntu16.04を入れてlemon 3.11を使ってみたのですが、grn_ecmascript.c が激しく書き換わってしまいました。
後で更新をお願いできますでしょうか。","fix #584
オブジェクトリテラル形式のオプションを使うとgrn_expr_dfiがずれていて、複数の論理演算のときにうまくscan_infoを構築できていませんでしたので、修正しました。
なお、ubuntu16.04を入れてlemon 3.11を使ってみたのですが、grn_ecmascript.c が激しく書き換わってしまいました。
後で更新をお願いできますでしょうか。",True,{}
groonga/groonga,https://github.com/groonga/groonga,585,2016-07-15T08:43:43Z,2016-07-18T09:49:55Z,2016-07-18T11:25:35Z,MERGED,True,66,0,3,https://github.com/naoa,fix a bug object literal expression codes is broken,1,[],https://github.com/groonga/groonga/pull/585,https://github.com/kou,2,https://github.com/groonga/groonga/pull/585#issuecomment-233288079,"fix #584
オブジェクトリテラル形式のオプションを使うとgrn_expr_dfiがずれていて、複数の論理演算のときにうまくscan_infoを構築できていませんでしたので、修正しました。
なお、ubuntu16.04を入れてlemon 3.11を使ってみたのですが、grn_ecmascript.c が激しく書き換わってしまいました。
後で更新をお願いできますでしょうか。",ありがとうございます！更新しました。,True,{}
groonga/groonga,https://github.com/groonga/groonga,585,2016-07-15T08:43:43Z,2016-07-18T09:49:55Z,2016-07-18T11:25:35Z,MERGED,True,66,0,3,https://github.com/naoa,fix a bug object literal expression codes is broken,1,[],https://github.com/groonga/groonga/pull/585,https://github.com/naoa,3,https://github.com/groonga/groonga/pull/585#issuecomment-233303925,"fix #584
オブジェクトリテラル形式のオプションを使うとgrn_expr_dfiがずれていて、複数の論理演算のときにうまくscan_infoを構築できていませんでしたので、修正しました。
なお、ubuntu16.04を入れてlemon 3.11を使ってみたのですが、grn_ecmascript.c が激しく書き換わってしまいました。
後で更新をお願いできますでしょうか。",ありがとうございます！,True,{}
groonga/groonga,https://github.com/groonga/groonga,587,2016-07-24T10:02:51Z,2016-07-25T00:33:17Z,2016-08-21T07:14:17Z,MERGED,True,7,0,1,https://github.com/naoa,mruby: support float bulk,1,[],https://github.com/groonga/groonga/pull/587,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/587,"expression_rewriterにfloatを通すと以下のようにエラーになったのでfloatに対応したいです。
  [
    -22,
    1469353071.917372,
    0.001502752304077148,
    ""unsupported bulk value type: <12>(Float)"",
    [
      [
        ""Groonga::ExpressionTreeBuilder.build"",
        ""/usr/lib64/groonga/scripts/ruby/expression_tree_builder.rb"",
        83
      ]
    ]
  ]","expression_rewriterにfloatを通すと以下のようにエラーになったのでfloatに対応したいです。
  [
    -22,
    1469353071.917372,
    0.001502752304077148,
    ""unsupported bulk value type: <12>(Float)"",
    [
      [
        ""Groonga::ExpressionTreeBuilder.build"",
        ""/usr/lib64/groonga/scripts/ruby/expression_tree_builder.rb"",
        83
      ]
    ]
  ]",True,{}
groonga/groonga,https://github.com/groonga/groonga,587,2016-07-24T10:02:51Z,2016-07-25T00:33:17Z,2016-08-21T07:14:17Z,MERGED,True,7,0,1,https://github.com/naoa,mruby: support float bulk,1,[],https://github.com/groonga/groonga/pull/587,https://github.com/kou,2,https://github.com/groonga/groonga/pull/587#issuecomment-234813451,"expression_rewriterにfloatを通すと以下のようにエラーになったのでfloatに対応したいです。
  [
    -22,
    1469353071.917372,
    0.001502752304077148,
    ""unsupported bulk value type: <12>(Float)"",
    [
      [
        ""Groonga::ExpressionTreeBuilder.build"",
        ""/usr/lib64/groonga/scripts/ruby/expression_tree_builder.rb"",
        83
      ]
    ]
  ]",サポートしましょう！,True,{}
groonga/groonga,https://github.com/groonga/groonga,590,2016-08-14T04:51:49Z,2016-08-14T05:49:15Z,2016-08-14T06:21:33Z,MERGED,True,64,19,3,https://github.com/naoa,pat_fuzzy: fix a bug that prefix_match_size option returns wrong node,1,[],https://github.com/groonga/groonga/pull/590,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/590,"grn_pat_fuzzy_searchのprefix_match_sizeオプションにバグがありました。
prefixが一致しているノードまで進めるのにpat_cursorを使っていましたが、この場合、実キーのidまで進んでしまっていました。
たとえば、以下のgrn_patに対してkey:Tom, prefix_match_size:1だとL:8{2,4,0}(""Tiga"")まで進んでしまっていました。
1つ目のR:6{1,5,0}のところまで進めるように修正しました。
#<table:pat Tags key:ShortText value:(nil) size:8 columns:[tag] default_tokenizer:(nil) normalizer:(nil) keys:[""Pam"", ""Pom"", ""Tiga"", ""Tim"", ""Tina"", ""Tom"", ""Tomas"", ""Tomy""] subrec:none nodes:{
4{0,5,0}
  L:5{1,4,0}
    L:5{1,4,0}(""Pam"")[01010000 01100001 01101101]
    R:4{0,5,0}(""Pom"")[01010000 01101111 01101101]
  R:6{1,5,0}
    L:8{2,4,0}
      L:8{2,4,0}(""Tiga"")[01010100 01101001 01100111 01100001]
      R:7{2,6,0}
        L:6{1,5,0}(""Tim"")[01010100 01101001 01101101]
        R:7{2,6,0}(""Tina"")[01010100 01101001 01101110 01100001]
    R:1{2,7,0}
      L:0{0,0,0}
      R:2{2,7,1}
        L:1{2,7,0}(""Tom"")[01010100 01101111 01101101]
        R:3{3,3,0}
          L:3{3,3,0}(""Tomas"")[01010100 01101111 01101101 01100001 01110011]
          R:2{2,7,1}(""Tomy"")[01010100 01101111 01101101 01111001]","grn_pat_fuzzy_searchのprefix_match_sizeオプションにバグがありました。
prefixが一致しているノードまで進めるのにpat_cursorを使っていましたが、この場合、実キーのidまで進んでしまっていました。
たとえば、以下のgrn_patに対してkey:Tom, prefix_match_size:1だとL:8{2,4,0}(""Tiga"")まで進んでしまっていました。
1つ目のR:6{1,5,0}のところまで進めるように修正しました。
#<table:pat Tags key:ShortText value:(nil) size:8 columns:[tag] default_tokenizer:(nil) normalizer:(nil) keys:[""Pam"", ""Pom"", ""Tiga"", ""Tim"", ""Tina"", ""Tom"", ""Tomas"", ""Tomy""] subrec:none nodes:{
4{0,5,0}
  L:5{1,4,0}
    L:5{1,4,0}(""Pam"")[01010000 01100001 01101101]
    R:4{0,5,0}(""Pom"")[01010000 01101111 01101101]
  R:6{1,5,0}
    L:8{2,4,0}
      L:8{2,4,0}(""Tiga"")[01010100 01101001 01100111 01100001]
      R:7{2,6,0}
        L:6{1,5,0}(""Tim"")[01010100 01101001 01101101]
        R:7{2,6,0}(""Tina"")[01010100 01101001 01101110 01100001]
    R:1{2,7,0}
      L:0{0,0,0}
      R:2{2,7,1}
        L:1{2,7,0}(""Tom"")[01010100 01101111 01101101]
        R:3{3,3,0}
          L:3{3,3,0}(""Tomas"")[01010100 01101111 01101101 01100001 01110011]
          R:2{2,7,1}(""Tomy"")[01010100 01101111 01101101 01111001]",True,{}
groonga/groonga,https://github.com/groonga/groonga,590,2016-08-14T04:51:49Z,2016-08-14T05:49:15Z,2016-08-14T06:21:33Z,MERGED,True,64,19,3,https://github.com/naoa,pat_fuzzy: fix a bug that prefix_match_size option returns wrong node,1,[],https://github.com/groonga/groonga/pull/590,https://github.com/kou,2,https://github.com/groonga/groonga/pull/590#issuecomment-239657470,"grn_pat_fuzzy_searchのprefix_match_sizeオプションにバグがありました。
prefixが一致しているノードまで進めるのにpat_cursorを使っていましたが、この場合、実キーのidまで進んでしまっていました。
たとえば、以下のgrn_patに対してkey:Tom, prefix_match_size:1だとL:8{2,4,0}(""Tiga"")まで進んでしまっていました。
1つ目のR:6{1,5,0}のところまで進めるように修正しました。
#<table:pat Tags key:ShortText value:(nil) size:8 columns:[tag] default_tokenizer:(nil) normalizer:(nil) keys:[""Pam"", ""Pom"", ""Tiga"", ""Tim"", ""Tina"", ""Tom"", ""Tomas"", ""Tomy""] subrec:none nodes:{
4{0,5,0}
  L:5{1,4,0}
    L:5{1,4,0}(""Pam"")[01010000 01100001 01101101]
    R:4{0,5,0}(""Pom"")[01010000 01101111 01101101]
  R:6{1,5,0}
    L:8{2,4,0}
      L:8{2,4,0}(""Tiga"")[01010100 01101001 01100111 01100001]
      R:7{2,6,0}
        L:6{1,5,0}(""Tim"")[01010100 01101001 01101101]
        R:7{2,6,0}(""Tina"")[01010100 01101001 01101110 01100001]
    R:1{2,7,0}
      L:0{0,0,0}
      R:2{2,7,1}
        L:1{2,7,0}(""Tom"")[01010100 01101111 01101101]
        R:3{3,3,0}
          L:3{3,3,0}(""Tomas"")[01010100 01101111 01101101 01100001 01110011]
          R:2{2,7,1}(""Tomy"")[01010100 01101111 01101101 01111001]",さすがです！,True,{}
groonga/groonga,https://github.com/groonga/groonga,590,2016-08-14T04:51:49Z,2016-08-14T05:49:15Z,2016-08-14T06:21:33Z,MERGED,True,64,19,3,https://github.com/naoa,pat_fuzzy: fix a bug that prefix_match_size option returns wrong node,1,[],https://github.com/groonga/groonga/pull/590,https://github.com/naoa,3,https://github.com/groonga/groonga/pull/590#issuecomment-239658265,"grn_pat_fuzzy_searchのprefix_match_sizeオプションにバグがありました。
prefixが一致しているノードまで進めるのにpat_cursorを使っていましたが、この場合、実キーのidまで進んでしまっていました。
たとえば、以下のgrn_patに対してkey:Tom, prefix_match_size:1だとL:8{2,4,0}(""Tiga"")まで進んでしまっていました。
1つ目のR:6{1,5,0}のところまで進めるように修正しました。
#<table:pat Tags key:ShortText value:(nil) size:8 columns:[tag] default_tokenizer:(nil) normalizer:(nil) keys:[""Pam"", ""Pom"", ""Tiga"", ""Tim"", ""Tina"", ""Tom"", ""Tomas"", ""Tomy""] subrec:none nodes:{
4{0,5,0}
  L:5{1,4,0}
    L:5{1,4,0}(""Pam"")[01010000 01100001 01101101]
    R:4{0,5,0}(""Pom"")[01010000 01101111 01101101]
  R:6{1,5,0}
    L:8{2,4,0}
      L:8{2,4,0}(""Tiga"")[01010100 01101001 01100111 01100001]
      R:7{2,6,0}
        L:6{1,5,0}(""Tim"")[01010100 01101001 01101101]
        R:7{2,6,0}(""Tina"")[01010100 01101001 01101110 01100001]
    R:1{2,7,0}
      L:0{0,0,0}
      R:2{2,7,1}
        L:1{2,7,0}(""Tom"")[01010100 01101111 01101101]
        R:3{3,3,0}
          L:3{3,3,0}(""Tomas"")[01010100 01101111 01101101 01100001 01110011]
          R:2{2,7,1}(""Tomy"")[01010100 01101111 01101101 01111001]","マージありがとうございます！
（余裕ができたらドキュメントがんばります）",True,{}
groonga/groonga,https://github.com/groonga/groonga,591,2016-08-20T22:44:34Z,2016-08-21T05:34:01Z,2016-08-21T06:29:58Z,MERGED,True,78,1,3,https://github.com/naoa,ii: resolve record id on grn_ii_select_sequential_search,1,[],https://github.com/groonga/groonga/pull/591,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/591,ii_selectのシーケンシャルサーチでresに対するcursorのIDをそのままpostingのridに設定しているのですが、これはレコードテーブル側のrecord_idに解決すべきだと思います。,ii_selectのシーケンシャルサーチでresに対するcursorのIDをそのままpostingのridに設定しているのですが、これはレコードテーブル側のrecord_idに解決すべきだと思います。,True,{}
groonga/groonga,https://github.com/groonga/groonga,591,2016-08-20T22:44:34Z,2016-08-21T05:34:01Z,2016-08-21T06:29:58Z,MERGED,True,78,1,3,https://github.com/naoa,ii: resolve record id on grn_ii_select_sequential_search,1,[],https://github.com/groonga/groonga/pull/591,https://github.com/kou,2,https://github.com/groonga/groonga/pull/591#issuecomment-241240337,ii_selectのシーケンシャルサーチでresに対するcursorのIDをそのままpostingのridに設定しているのですが、これはレコードテーブル側のrecord_idに解決すべきだと思います。,そのとおりですね！,True,{}
groonga/groonga,https://github.com/groonga/groonga,591,2016-08-20T22:44:34Z,2016-08-21T05:34:01Z,2016-08-21T06:29:58Z,MERGED,True,78,1,3,https://github.com/naoa,ii: resolve record id on grn_ii_select_sequential_search,1,[],https://github.com/groonga/groonga/pull/591,https://github.com/naoa,3,https://github.com/groonga/groonga/pull/591#issuecomment-241241371,ii_selectのシーケンシャルサーチでresに対するcursorのIDをそのままpostingのridに設定しているのですが、これはレコードテーブル側のrecord_idに解決すべきだと思います。,マージありがとうございます,True,{}
groonga/groonga,https://github.com/groonga/groonga,592,2016-08-20T22:45:24Z,2016-08-21T05:49:56Z,2016-08-21T06:30:13Z,MERGED,True,87,4,3,https://github.com/naoa,proc in_values: resolve rid on sequential search,1,[],https://github.com/groonga/groonga/pull/592,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/592,in_values関数のシーケンシャルサーチもrecord_idに解決する必要があると思います。,in_values関数のシーケンシャルサーチもrecord_idに解決する必要があると思います。,True,{}
groonga/groonga,https://github.com/groonga/groonga,592,2016-08-20T22:45:24Z,2016-08-21T05:49:56Z,2016-08-21T06:30:13Z,MERGED,True,87,4,3,https://github.com/naoa,proc in_values: resolve rid on sequential search,1,[],https://github.com/groonga/groonga/pull/592,https://github.com/kou,2,https://github.com/groonga/groonga/pull/592#issuecomment-241240394,in_values関数のシーケンシャルサーチもrecord_idに解決する必要があると思います。,そのとおりですね！,True,{}
groonga/groonga,https://github.com/groonga/groonga,593,2016-08-20T22:45:52Z,2016-08-21T05:52:54Z,2016-08-21T06:30:24Z,MERGED,True,20,11,3,https://github.com/naoa,proc fuzzy_search: resolve record id on sequential search,1,[],https://github.com/groonga/groonga/pull/593,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/593,fuzzy_search関数のシーケンシャルサーチもridを解決すべきでした。,fuzzy_search関数のシーケンシャルサーチもridを解決すべきでした。,True,{}
groonga/groonga,https://github.com/groonga/groonga,593,2016-08-20T22:45:52Z,2016-08-21T05:52:54Z,2016-08-21T06:30:24Z,MERGED,True,20,11,3,https://github.com/naoa,proc fuzzy_search: resolve record id on sequential search,1,[],https://github.com/groonga/groonga/pull/593,https://github.com/kou,2,https://github.com/groonga/groonga/pull/593#issuecomment-241240466,fuzzy_search関数のシーケンシャルサーチもridを解決すべきでした。,なるほど！,True,{}
groonga/groonga,https://github.com/groonga/groonga,594,2016-08-20T23:04:32Z,2016-08-21T06:21:15Z,2016-08-21T06:31:01Z,CLOSED,False,1,0,1,https://github.com/naoa,ii: unlink opened source column,1,[],https://github.com/groonga/groonga/pull/594,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/594,grn_ctx_atしたsourceカラムはgrn_obj_unlinkすべきでしょうか。,grn_ctx_atしたsourceカラムはgrn_obj_unlinkすべきでしょうか。,True,{}
groonga/groonga,https://github.com/groonga/groonga,594,2016-08-20T23:04:32Z,2016-08-21T06:21:15Z,2016-08-21T06:31:01Z,CLOSED,False,1,0,1,https://github.com/naoa,ii: unlink opened source column,1,[],https://github.com/groonga/groonga/pull/594,https://github.com/kou,2,https://github.com/groonga/groonga/pull/594#issuecomment-241241133,grn_ctx_atしたsourceカラムはgrn_obj_unlinkすべきでしょうか。,"しなくていいです！
grn_obj_unlink()ってとりあえず呼んでおけばいいみたいに見えるので便利なように見えるんですが、一時カラムに使うと意図せずに解放しちゃうとかハマりどころがあるんですよねぇ。。。
必要なくなったアクセサーに対してとか、ここで解放されちゃっても他のところで困らないよね！？くらいのときだけしか呼んじゃダメなんですよねぇ、実は。",True,{}
groonga/groonga,https://github.com/groonga/groonga,594,2016-08-20T23:04:32Z,2016-08-21T06:21:15Z,2016-08-21T06:31:01Z,CLOSED,False,1,0,1,https://github.com/naoa,ii: unlink opened source column,1,[],https://github.com/groonga/groonga/pull/594,https://github.com/naoa,3,https://github.com/groonga/groonga/pull/594#issuecomment-241241410,grn_ctx_atしたsourceカラムはgrn_obj_unlinkすべきでしょうか。,なるほど、わかりました,True,{}
groonga/groonga,https://github.com/groonga/groonga,595,2016-08-21T06:55:51Z,2016-09-22T23:31:04Z,2016-09-22T23:31:04Z,CLOSED,False,18582,9632,650,https://github.com/naoa,ii: support sequential search for reference column / reference vector,106,[],https://github.com/groonga/groonga/pull/595,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/595,"リファレンスカラム、リファレンスベクターカラムに対するii_selectの場合のシーケンシャルサーチに対応させたいです。
テキストに対する正規表現マッチよりも処理が断然に軽いと思うので、環境変数GRN_II_SELECT_TOO_MANY_INDEX_MATCH_RATIOとは別に、リファレンスカラム用の環境変数GRN_II_SELECT_TOO_MANY_INDEX_MATCH_RATIO_FOR_REFERENCEを追加しています。
これはありでしょうか？","リファレンスカラム、リファレンスベクターカラムに対するii_selectの場合のシーケンシャルサーチに対応させたいです。
テキストに対する正規表現マッチよりも処理が断然に軽いと思うので、環境変数GRN_II_SELECT_TOO_MANY_INDEX_MATCH_RATIOとは別に、リファレンスカラム用の環境変数GRN_II_SELECT_TOO_MANY_INDEX_MATCH_RATIO_FOR_REFERENCEを追加しています。
これはありでしょうか？",True,{}
groonga/groonga,https://github.com/groonga/groonga,595,2016-08-21T06:55:51Z,2016-09-22T23:31:04Z,2016-09-22T23:31:04Z,CLOSED,False,18582,9632,650,https://github.com/naoa,ii: support sequential search for reference column / reference vector,106,[],https://github.com/groonga/groonga/pull/595,https://github.com/kou,2,https://github.com/groonga/groonga/pull/595#issuecomment-241301025,"リファレンスカラム、リファレンスベクターカラムに対するii_selectの場合のシーケンシャルサーチに対応させたいです。
テキストに対する正規表現マッチよりも処理が断然に軽いと思うので、環境変数GRN_II_SELECT_TOO_MANY_INDEX_MATCH_RATIOとは別に、リファレンスカラム用の環境変数GRN_II_SELECT_TOO_MANY_INDEX_MATCH_RATIO_FOR_REFERENCEを追加しています。
これはありでしょうか？",コンセプトはいいと思うんですが、このコピペベースの実装は今後のメンテンナンスのことを考えるとしんどいなぁという感じです。。。,True,{}
groonga/groonga,https://github.com/groonga/groonga,595,2016-08-21T06:55:51Z,2016-09-22T23:31:04Z,2016-09-22T23:31:04Z,CLOSED,False,18582,9632,650,https://github.com/naoa,ii: support sequential search for reference column / reference vector,106,[],https://github.com/groonga/groonga/pull/595,https://github.com/naoa,3,https://github.com/groonga/groonga/pull/595#issuecomment-241340616,"リファレンスカラム、リファレンスベクターカラムに対するii_selectの場合のシーケンシャルサーチに対応させたいです。
テキストに対する正規表現マッチよりも処理が断然に軽いと思うので、環境変数GRN_II_SELECT_TOO_MANY_INDEX_MATCH_RATIOとは別に、リファレンスカラム用の環境変数GRN_II_SELECT_TOO_MANY_INDEX_MATCH_RATIO_FOR_REFERENCEを追加しています。
これはありでしょうか？","想定されている意図とあっているのかわかりませんが、

grn_ii_select_sequential_search_should_useを共通化しました。
リファレンスカラム用のシーケンシャルサーチもGRN_II_SELECT_ENABLE_SEQUENTIAL_SEARCHが定義されている場合にのみコンパイルされるようにしました。(ONIGMOいりませんが別にいいかなぁと。）
マクロを使ったりちょこっとシンプルにしました。

別API化したほうがいいなど、意図があってなければ、ご指摘ください。",True,{}
groonga/groonga,https://github.com/groonga/groonga,595,2016-08-21T06:55:51Z,2016-09-22T23:31:04Z,2016-09-22T23:31:04Z,CLOSED,False,18582,9632,650,https://github.com/naoa,ii: support sequential search for reference column / reference vector,106,[],https://github.com/groonga/groonga/pull/595,https://github.com/naoa,4,https://github.com/groonga/groonga/pull/595#issuecomment-241354609,"リファレンスカラム、リファレンスベクターカラムに対するii_selectの場合のシーケンシャルサーチに対応させたいです。
テキストに対する正規表現マッチよりも処理が断然に軽いと思うので、環境変数GRN_II_SELECT_TOO_MANY_INDEX_MATCH_RATIOとは別に、リファレンスカラム用の環境変数GRN_II_SELECT_TOO_MANY_INDEX_MATCH_RATIO_FOR_REFERENCEを追加しています。
これはありでしょうか？","今思ったのですが、インデックスのソースでカーソルを回すというところもマクロでブロック渡せば共通化できるかもしれませんね。
後で検討します。",True,{}
groonga/groonga,https://github.com/groonga/groonga,595,2016-08-21T06:55:51Z,2016-09-22T23:31:04Z,2016-09-22T23:31:04Z,CLOSED,False,18582,9632,650,https://github.com/naoa,ii: support sequential search for reference column / reference vector,106,[],https://github.com/groonga/groonga/pull/595,https://github.com/naoa,5,https://github.com/groonga/groonga/pull/595#issuecomment-241447279,"リファレンスカラム、リファレンスベクターカラムに対するii_selectの場合のシーケンシャルサーチに対応させたいです。
テキストに対する正規表現マッチよりも処理が断然に軽いと思うので、環境変数GRN_II_SELECT_TOO_MANY_INDEX_MATCH_RATIOとは別に、リファレンスカラム用の環境変数GRN_II_SELECT_TOO_MANY_INDEX_MATCH_RATIO_FOR_REFERENCEを追加しています。
これはありでしょうか？","GRN_II_SOURCE_EACH_VALUES_BEGIN ~ GRN_II_SOURCE_EACH_VALUES_ENDというgrn_iiのソースカラムの値を順次取り出すマクロを追加しました。

これで指摘の意図に沿うでしょうか。",True,{}
groonga/groonga,https://github.com/groonga/groonga,595,2016-08-21T06:55:51Z,2016-09-22T23:31:04Z,2016-09-22T23:31:04Z,CLOSED,False,18582,9632,650,https://github.com/naoa,ii: support sequential search for reference column / reference vector,106,[],https://github.com/groonga/groonga/pull/595,https://github.com/kou,6,https://github.com/groonga/groonga/pull/595#issuecomment-242261835,"リファレンスカラム、リファレンスベクターカラムに対するii_selectの場合のシーケンシャルサーチに対応させたいです。
テキストに対する正規表現マッチよりも処理が断然に軽いと思うので、環境変数GRN_II_SELECT_TOO_MANY_INDEX_MATCH_RATIOとは別に、リファレンスカラム用の環境変数GRN_II_SELECT_TOO_MANY_INDEX_MATCH_RATIO_FOR_REFERENCEを追加しています。
これはありでしょうか？","マクロを使うとそれはそれでしんどくなる（たとえば、デバッガーでステップ実行できない）ので、マクロを使わないアプローチがいいと思っています。
RubyKaigi 2016が終わったら見ます。。。",True,{}
groonga/groonga,https://github.com/groonga/groonga,595,2016-08-21T06:55:51Z,2016-09-22T23:31:04Z,2016-09-22T23:31:04Z,CLOSED,False,18582,9632,650,https://github.com/naoa,ii: support sequential search for reference column / reference vector,106,[],https://github.com/groonga/groonga/pull/595,https://github.com/naoa,7,https://github.com/groonga/groonga/pull/595#issuecomment-249057809,"リファレンスカラム、リファレンスベクターカラムに対するii_selectの場合のシーケンシャルサーチに対応させたいです。
テキストに対する正規表現マッチよりも処理が断然に軽いと思うので、環境変数GRN_II_SELECT_TOO_MANY_INDEX_MATCH_RATIOとは別に、リファレンスカラム用の環境変数GRN_II_SELECT_TOO_MANY_INDEX_MATCH_RATIO_FOR_REFERENCEを追加しています。
これはありでしょうか？","これ、取り下げます。
カーディナリーが低いカラムを絞り込むケースで10倍以上早くなるので必要ではあるのですが、他にも実験的に最適化を試したいこともあるので、当面、パッチか外側で対応します。",True,{}
groonga/groonga,https://github.com/groonga/groonga,596,2016-08-21T07:12:33Z,2016-08-22T11:51:34Z,2017-05-22T06:34:30Z,CLOSED,False,159,9,7,https://github.com/naoa,[WIP] fuzzy_search: use sequential search if enough filtered,2,[],https://github.com/groonga/groonga/pull/596,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/596,"fuzzy_search()関数ですでに十分に絞り込まれている場合にはシーケンシャルサーチを使えるようにしたいです。tokenはこの時点では揃わないので、resの件数を利用しています。
GRN_FUZZY_SEARCH_ENOUGH_FILTERED_RATIO
GRN_FUZZY_SEARCH_MAX_N_ENOUGH_FILTERED_RECORDS","fuzzy_search()関数ですでに十分に絞り込まれている場合にはシーケンシャルサーチを使えるようにしたいです。tokenはこの時点では揃わないので、resの件数を利用しています。
GRN_FUZZY_SEARCH_ENOUGH_FILTERED_RATIO
GRN_FUZZY_SEARCH_MAX_N_ENOUGH_FILTERED_RECORDS",True,{}
groonga/groonga,https://github.com/groonga/groonga,596,2016-08-21T07:12:33Z,2016-08-22T11:51:34Z,2017-05-22T06:34:30Z,CLOSED,False,159,9,7,https://github.com/naoa,[WIP] fuzzy_search: use sequential search if enough filtered,2,[],https://github.com/groonga/groonga/pull/596,https://github.com/naoa,2,https://github.com/groonga/groonga/pull/596#issuecomment-241390084,"fuzzy_search()関数ですでに十分に絞り込まれている場合にはシーケンシャルサーチを使えるようにしたいです。tokenはこの時点では揃わないので、resの件数を利用しています。
GRN_FUZZY_SEARCH_ENOUGH_FILTERED_RATIO
GRN_FUZZY_SEARCH_MAX_N_ENOUGH_FILTERED_RECORDS","grn_proc_init_from_env()で呼ぶようにしました。

が、インデックスを使うのをやめてシーケンシャルにするならノーマライザーをかけないといけませんし、トークナイザーが設定されていてもだめですね。。
すいません。こちらは今のところそこまで必要としていないので、いったん下げて余裕ができたらとさせていただきたいです。",True,{}
groonga/groonga,https://github.com/groonga/groonga,597,2016-08-21T22:22:39Z,2016-08-22T01:18:49Z,2016-08-22T15:27:20Z,MERGED,True,2,2,1,https://github.com/naoa,ii_similar_search: fix typos,1,[],https://github.com/groonga/groonga/pull/597,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/597,たまたま見つけて動作までは確認していないのですがtypoのように思いました。,たまたま見つけて動作までは確認していないのですがtypoのように思いました。,True,{}
groonga/groonga,https://github.com/groonga/groonga,597,2016-08-21T22:22:39Z,2016-08-22T01:18:49Z,2016-08-22T15:27:20Z,MERGED,True,2,2,1,https://github.com/naoa,ii_similar_search: fix typos,1,[],https://github.com/groonga/groonga/pull/597,https://github.com/kou,2,https://github.com/groonga/groonga/pull/597#issuecomment-241295606,たまたま見つけて動作までは確認していないのですがtypoのように思いました。,"その通りですね！
これ、Sennaの頃からのコードですね。。。",True,{}
groonga/groonga,https://github.com/groonga/groonga,607,2016-10-25T10:21:24Z,2016-10-25T13:48:27Z,2016-12-02T05:18:56Z,MERGED,True,19,3,1,https://github.com/naoa,mrb: support to convert time of mrb_value to grn_bulk,1,[],https://github.com/groonga/groonga/pull/607,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/607,"grn_mrb_value_to_bulkをtime型のデータにも対応させたいです。
本体の実装でこの関数を通るタイミングがつかめておらず、テストは組めていませんが、
自前のexpression_rewriterプラグインではunsupported objectにならなくなるようになることを確認しています。","grn_mrb_value_to_bulkをtime型のデータにも対応させたいです。
本体の実装でこの関数を通るタイミングがつかめておらず、テストは組めていませんが、
自前のexpression_rewriterプラグインではunsupported objectにならなくなるようになることを確認しています。",True,{}
groonga/groonga,https://github.com/groonga/groonga,607,2016-10-25T10:21:24Z,2016-10-25T13:48:27Z,2016-12-02T05:18:56Z,MERGED,True,19,3,1,https://github.com/naoa,mrb: support to convert time of mrb_value to grn_bulk,1,[],https://github.com/groonga/groonga/pull/607,https://github.com/kou,2,https://github.com/groonga/groonga/pull/607#issuecomment-256039556,"grn_mrb_value_to_bulkをtime型のデータにも対応させたいです。
本体の実装でこの関数を通るタイミングがつかめておらず、テストは組めていませんが、
自前のexpression_rewriterプラグインではunsupported objectにならなくなるようになることを確認しています。",ありがとうございます！,True,{}
groonga/groonga,https://github.com/groonga/groonga,611,2016-11-28T10:03:52Z,2016-11-28T10:44:36Z,2016-11-28T11:09:11Z,MERGED,True,1,1,1,https://github.com/cosmo0920,doc contribution: Update Homebrew repository URL,1,[],https://github.com/groonga/groonga/pull/611,https://github.com/cosmo0920,1,https://github.com/groonga/groonga/pull/611,"Because redirected homebrew/legacy-homebrew is the former repository
of Homebrew formulae.
This repository is not used anymore.
Now, that project uses homebrew/homebrew-core repository to manage
Formulae.","Because redirected homebrew/legacy-homebrew is the former repository
of Homebrew formulae.
This repository is not used anymore.
Now, that project uses homebrew/homebrew-core repository to manage
Formulae.",True,{}
groonga/groonga,https://github.com/groonga/groonga,611,2016-11-28T10:03:52Z,2016-11-28T10:44:36Z,2016-11-28T11:09:11Z,MERGED,True,1,1,1,https://github.com/cosmo0920,doc contribution: Update Homebrew repository URL,1,[],https://github.com/groonga/groonga/pull/611,https://github.com/cosmo0920,2,https://github.com/groonga/groonga/pull/611#issuecomment-263230943,"Because redirected homebrew/legacy-homebrew is the former repository
of Homebrew formulae.
This repository is not used anymore.
Now, that project uses homebrew/homebrew-core repository to manage
Formulae.",@piroor Could you take a look this PR?,True,{}
groonga/groonga,https://github.com/groonga/groonga,611,2016-11-28T10:03:52Z,2016-11-28T10:44:36Z,2016-11-28T11:09:11Z,MERGED,True,1,1,1,https://github.com/cosmo0920,doc contribution: Update Homebrew repository URL,1,[],https://github.com/groonga/groonga/pull/611,https://github.com/piroor,3,https://github.com/groonga/groonga/pull/611#issuecomment-263239549,"Because redirected homebrew/legacy-homebrew is the former repository
of Homebrew formulae.
This repository is not used anymore.
Now, that project uses homebrew/homebrew-core repository to manage
Formulae.",Thanks!,True,{'LAUGH': ['https://github.com/cosmo0920']}
groonga/groonga,https://github.com/groonga/groonga,612,2016-12-09T02:15:35Z,2016-12-09T02:31:36Z,2016-12-09T02:31:47Z,MERGED,True,1,0,1,https://github.com/kenhys,Add missing NULL check about return value of grn_ctx_at,1,[],https://github.com/groonga/groonga/pull/612,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/612,"There is a case that grn_ctx_at returns NULL. In such a case,
missing NULL check causes crash unexpectedly.","There is a case that grn_ctx_at returns NULL. In such a case,
missing NULL check causes crash unexpectedly.",True,{}
groonga/groonga,https://github.com/groonga/groonga,612,2016-12-09T02:15:35Z,2016-12-09T02:31:36Z,2016-12-09T02:31:47Z,MERGED,True,1,0,1,https://github.com/kenhys,Add missing NULL check about return value of grn_ctx_at,1,[],https://github.com/groonga/groonga/pull/612,https://github.com/kou,2,https://github.com/groonga/groonga/pull/612#issuecomment-265917145,"There is a case that grn_ctx_at returns NULL. In such a case,
missing NULL check causes crash unexpectedly.",Good catch!,True,{}
groonga/groonga,https://github.com/groonga/groonga,614,2016-12-16T07:52:30Z,,2022-03-15T05:24:16Z,OPEN,False,3,0,1,https://github.com/kenhys,Return immediately if grn_ctx_at returns NULL,1,[],https://github.com/groonga/groonga/pull/614,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/614,"GitHub#613
This commit avoids crash bug.","GitHub#613
This commit avoids crash bug.",True,{}
groonga/groonga,https://github.com/groonga/groonga,617,2016-12-27T06:49:20Z,2016-12-30T12:40:46Z,2017-01-18T00:44:44Z,CLOSED,False,88,41,2,https://github.com/kou,ii: improve performance on buffer_new's worst case,2,[],https://github.com/groonga/groonga/pull/617,https://github.com/kou,1,https://github.com/groonga/groonga/pull/617,"See commit messages of 5b6129d and dd67962 about description of this case in English.
転置インデックスを更新するときにbuffer_new()をすることがありますが、データの内容・更新順序によって、すごく遅く、かつ、インデックスサイズがすごく増えることがあります。
どのような内容・更新順序かというと次のようなケースです。
table_create a TABLE_NO_KEY
column_create a x COLUMN_SCALAR ShortText
table_create b TABLE_PAT_KEY ShortText
column_create b index COLUMN_INDEX a x

load --table a
[
{""x"": ""00000000""},
{""x"": ""00000001""},
...
{""x"": ""00486036""},
{""x"": ""00000000""},
{""x"": ""00000001""},
...
{""x"": ""00413962""}
]

Rubyスクリプトだと次のようになります。
puts ""table_create a TABLE_NO_KEY""
puts ""column_create a x COLUMN_SCALAR ShortText""
puts ""table_create b TABLE_PAT_KEY ShortText""
puts ""column_create b index COLUMN_INDEX a x""

puts ""load --table a""
puts ""[""
n = 900_000
n.times do |i|
  i %= 486_037
  puts ""{\""x\"": \""#{i.to_s.rjust(8, '0')}\""},""
end
puts ""]""
buffer_new()の中で語彙表をカーソルで回して既存のbufferがないか探していますが、↑のケースだとカーソルを回しきっても既存のbufferが見つかりません。00486036のレコードが終わって2週目（2回目の00000000）に入ると、レコードが増えるごとにカーソルが返すレコード数が増えるのでbuffer_new()の時間がどんどん増えてインデックス更新が遅くなります。
また、既存のbufferが見つからないので毎回新しくbufferを作ります。このためインデックスサイズも大きくなります。
解決策として以下を提案します。

既存のbufferが見つからなかった場合に過去にgrn_ii_update_one()したときに新しく作ったbufferを使いまわせないかチェックする。

既存のbufferが見つからないケースを減らす。これでインデックスサイズの増加を抑えられる。


カーソルで回すレコード数を制限する。

既存のbufferを見つけられるケースが減ることがあるが、buffer_new()にかかる時間が一定以下に抑えられるので前述のケースでの速度劣化が抑えられる。
既存のbufferを見つけられない場合は↑の使いまわせないかチェックでフォローするので影響は軽微なはず。



前者の実装は 5b6129d です。
grn_iiに追加しているnext_buffer_candidate_tidが使いまわせないかチェック対象のbuffer（に紐付いているtid）です。
buffer_open_by_tid()はbuffer_open()のコードの一部を抜き出しただけでロジックは変えていません。
SPLIT_COND()が変わっているのはbufferがb以外の変数にも入れられるようにです。
後者の実装は dd67962 です。
EXISTING_BUFFER_FIND_LIMITの10000はなんとなくで決めました。特に計測したわけではありません。
この変更を入れる前と入れた後では実行時間・サイズは以下のように変わります。データは前述のRubyスクリプトを実行した結果です。それをgroongaコマンドで処理しました。



項目
変更なし
変更あり




実行時間
30分以上(*)
約4分30秒


サイズ
約15GB（1GB * 15 + 4.5MB + 4KB）
約51MB（22MB + 29MB）



(*) 30分を過ぎたくらいからエラー発生。50万件後半くらいから発生する。45分くらいたって65万件くらいしかロードできていない。
以下は生結果です。
変更なし：
[[0,1482816822.219858,0.04200315475463867],true]
[[0,1482816822.261966,0.05740857124328613],true]
[[0,1482816822.319439,0.04283547401428223],true]
[[0,1482816822.362304,0.07676839828491211],true]

# select a --limit 0
[[0,1482821246.286818,0.0002453327178955078],[[[649709],[[""_id"",""UInt32""],[""x"",""ShortText""]]]]]

-rw-r----- 1 kou kou 4.0K Dec 27 14:33 db
-rw-r----- 1 kou kou  21M Dec 27 15:47 db.0000000
-rw-r----- 1 kou kou 8.1M Dec 27 15:47 db.0000100
-rw-r----- 1 kou kou  17M Dec 27 15:07 db.0000101
-rw-r----- 1 kou kou  13M Dec 27 15:47 db.0000102
-rw-r----- 1 kou kou 1.0G Dec 27 15:47 db.0000103
-rw-r----- 1 kou kou 1.0G Dec 27 14:38 db.0000103.001
-rw-r----- 1 kou kou 1.0G Dec 27 14:40 db.0000103.002
-rw-r----- 1 kou kou 1.0G Dec 27 14:42 db.0000103.003
-rw-r----- 1 kou kou 1.0G Dec 27 14:44 db.0000103.004
-rw-r----- 1 kou kou 1.0G Dec 27 14:46 db.0000103.005
-rw-r----- 1 kou kou 1.0G Dec 27 14:48 db.0000103.006
-rw-r----- 1 kou kou 1.0G Dec 27 14:51 db.0000103.007
-rw-r----- 1 kou kou 1.0G Dec 27 14:53 db.0000103.008
-rw-r----- 1 kou kou 1.0G Dec 27 14:55 db.0000103.009
-rw-r----- 1 kou kou 1.0G Dec 27 14:57 db.0000103.00A
-rw-r----- 1 kou kou 1.0G Dec 27 14:59 db.0000103.00B
-rw-r----- 1 kou kou 1.0G Dec 27 15:01 db.0000103.00C
-rw-r----- 1 kou kou 1.0G Dec 27 15:03 db.0000103.00D
-rw-r----- 1 kou kou 1.0G Dec 27 15:05 db.0000103.00E
-rw-r----- 1 kou kou 1.0G Dec 27 15:07 db.0000103.00F
-rw-r----- 1 kou kou 4.5M Dec 27 15:07 db.0000103.010
-rw-r----- 1 kou kou 4.0K Dec 27 14:33 db.0000103.c
-rw-r----- 1 kou kou 1.0M Dec 27 14:33 db.001
-rw-r----- 1 kou kou  13M Dec 27 14:33 db.conf
-rw-r--r-- 1 kou kou 177M Dec 27 15:48 log
-rw-r--r-- 1 kou kou  634 Dec 27 14:33 query.log

エラーログ：
2016-12-27 15:07:09.642377|A| [ii][update][one] failed to create a buffer2: <b.index>: <65537>:<1>:<65537>: size:<16>
2016-12-27 15:07:09.691508|A| /tmp/local/lib/libgroonga.so.0(grn_ii_update_one+0x2229) [0x7fb0403ff47e]
2016-12-27 15:07:09.691530|A| /tmp/local/lib/libgroonga.so.0(grn_ii_column_update+0x2740) [0x7fb040408be2]
2016-12-27 15:07:09.691534|A| /tmp/local/lib/libgroonga.so.0(grn_obj_default_set_value_hook+0x2f9) [0x7fb040270a1e]
2016-12-27 15:07:09.691536|A| /tmp/local/lib/libgroonga.so.0(+0xfe4a2) [0x7fb0402964a2]
2016-12-27 15:07:09.691538|A| /tmp/local/lib/libgroonga.so.0(+0xfe979) [0x7fb040296979]
2016-12-27 15:07:09.691540|A| /tmp/local/lib/libgroonga.so.0(grn_obj_set_value+0x3ad) [0x7fb040299ce0]
2016-12-27 15:07:09.691543|A| /tmp/local/lib/libgroonga.so.0(+0x122519) [0x7fb0402ba519]
2016-12-27 15:07:09.691545|A| /tmp/local/lib/libgroonga.so.0(+0x122dad) [0x7fb0402badad]
2016-12-27 15:07:09.691547|A| /tmp/local/lib/libgroonga.so.0(grn_load_+0xc42) [0x7fb0402bdf66]
2016-12-27 15:07:09.691549|A| /tmp/local/lib/libgroonga.so.0(+0x402282) [0x7fb04059a282]
2016-12-27 15:07:09.691552|A| /tmp/local/lib/libgroonga.so.0(grn_proc_call+0x426) [0x7fb0402cf606]
2016-12-27 15:07:09.691554|A| /tmp/local/lib/libgroonga.so.0(grn_command_run+0xce) [0x7fb040253187]
2016-12-27 15:07:09.691556|A| /tmp/local/lib/libgroonga.so.0(grn_expr_exec+0x1a5) [0x7fb0402cfd22]
2016-12-27 15:07:09.691558|A| /tmp/local/lib/libgroonga.so.0(grn_ctx_send+0x4d0) [0x7fb04025c122]
2016-12-27 15:07:09.691560|A| /tmp/local/bin/groonga(+0x634b) [0x56001bf9334b]
2016-12-27 15:07:09.691563|A| /tmp/local/bin/groonga(+0x18008) [0x56001bfa5008]
2016-12-27 15:07:09.691581|e| [table][load] failed to set column value: [ii][update][one] failed to create a buffer2: <b.index>: <65537>:<1>:<65537>: size:<16>: key: <(NULL)>, column: <x>, value: <""00065536"">

変更あり：
[[0,1482814433.974035,0.04183840751647949],true]
[[0,1482814434.015956,0.05599784851074219],true]
[[0,1482814434.072021,0.04459285736083984],true]
[[0,1482814434.116677,0.08618617057800293],true]
[[0,1482814434.20292,272.1374449729919],900000]

-rw-r----- 1 kou kou 4.0K Dec 27 13:58 db
-rw-r----- 1 kou kou  21M Dec 27 13:58 db.0000000
-rw-r----- 1 kou kou 8.1M Dec 27 13:58 db.0000100
-rw-r----- 1 kou kou  17M Dec 27 13:58 db.0000101
-rw-r----- 1 kou kou  13M Dec 27 13:58 db.0000102
-rw-r----- 1 kou kou  22M Dec 27 13:58 db.0000103
-rw-r----- 1 kou kou  29M Dec 27 13:58 db.0000103.c
-rw-r----- 1 kou kou 1.0M Dec 27 13:53 db.001
-rw-r----- 1 kou kou  13M Dec 27 13:53 db.conf
-rw-r--r-- 1 kou kou  13K Dec 27 13:58 log
-rw-r--r-- 1 kou kou  787 Dec 27 13:58 query.log","See commit messages of 5b6129d and dd67962 about description of this case in English.
転置インデックスを更新するときにbuffer_new()をすることがありますが、データの内容・更新順序によって、すごく遅く、かつ、インデックスサイズがすごく増えることがあります。
どのような内容・更新順序かというと次のようなケースです。
table_create a TABLE_NO_KEY
column_create a x COLUMN_SCALAR ShortText
table_create b TABLE_PAT_KEY ShortText
column_create b index COLUMN_INDEX a x

load --table a
[
{""x"": ""00000000""},
{""x"": ""00000001""},
...
{""x"": ""00486036""},
{""x"": ""00000000""},
{""x"": ""00000001""},
...
{""x"": ""00413962""}
]

Rubyスクリプトだと次のようになります。
puts ""table_create a TABLE_NO_KEY""
puts ""column_create a x COLUMN_SCALAR ShortText""
puts ""table_create b TABLE_PAT_KEY ShortText""
puts ""column_create b index COLUMN_INDEX a x""

puts ""load --table a""
puts ""[""
n = 900_000
n.times do |i|
  i %= 486_037
  puts ""{\""x\"": \""#{i.to_s.rjust(8, '0')}\""},""
end
puts ""]""
buffer_new()の中で語彙表をカーソルで回して既存のbufferがないか探していますが、↑のケースだとカーソルを回しきっても既存のbufferが見つかりません。00486036のレコードが終わって2週目（2回目の00000000）に入ると、レコードが増えるごとにカーソルが返すレコード数が増えるのでbuffer_new()の時間がどんどん増えてインデックス更新が遅くなります。
また、既存のbufferが見つからないので毎回新しくbufferを作ります。このためインデックスサイズも大きくなります。
解決策として以下を提案します。

既存のbufferが見つからなかった場合に過去にgrn_ii_update_one()したときに新しく作ったbufferを使いまわせないかチェックする。

既存のbufferが見つからないケースを減らす。これでインデックスサイズの増加を抑えられる。


カーソルで回すレコード数を制限する。

既存のbufferを見つけられるケースが減ることがあるが、buffer_new()にかかる時間が一定以下に抑えられるので前述のケースでの速度劣化が抑えられる。
既存のbufferを見つけられない場合は↑の使いまわせないかチェックでフォローするので影響は軽微なはず。



前者の実装は 5b6129d です。
grn_iiに追加しているnext_buffer_candidate_tidが使いまわせないかチェック対象のbuffer（に紐付いているtid）です。
buffer_open_by_tid()はbuffer_open()のコードの一部を抜き出しただけでロジックは変えていません。
SPLIT_COND()が変わっているのはbufferがb以外の変数にも入れられるようにです。
後者の実装は dd67962 です。
EXISTING_BUFFER_FIND_LIMITの10000はなんとなくで決めました。特に計測したわけではありません。
この変更を入れる前と入れた後では実行時間・サイズは以下のように変わります。データは前述のRubyスクリプトを実行した結果です。それをgroongaコマンドで処理しました。



項目
変更なし
変更あり




実行時間
30分以上(*)
約4分30秒


サイズ
約15GB（1GB * 15 + 4.5MB + 4KB）
約51MB（22MB + 29MB）



(*) 30分を過ぎたくらいからエラー発生。50万件後半くらいから発生する。45分くらいたって65万件くらいしかロードできていない。
以下は生結果です。
変更なし：
[[0,1482816822.219858,0.04200315475463867],true]
[[0,1482816822.261966,0.05740857124328613],true]
[[0,1482816822.319439,0.04283547401428223],true]
[[0,1482816822.362304,0.07676839828491211],true]

# select a --limit 0
[[0,1482821246.286818,0.0002453327178955078],[[[649709],[[""_id"",""UInt32""],[""x"",""ShortText""]]]]]

-rw-r----- 1 kou kou 4.0K Dec 27 14:33 db
-rw-r----- 1 kou kou  21M Dec 27 15:47 db.0000000
-rw-r----- 1 kou kou 8.1M Dec 27 15:47 db.0000100
-rw-r----- 1 kou kou  17M Dec 27 15:07 db.0000101
-rw-r----- 1 kou kou  13M Dec 27 15:47 db.0000102
-rw-r----- 1 kou kou 1.0G Dec 27 15:47 db.0000103
-rw-r----- 1 kou kou 1.0G Dec 27 14:38 db.0000103.001
-rw-r----- 1 kou kou 1.0G Dec 27 14:40 db.0000103.002
-rw-r----- 1 kou kou 1.0G Dec 27 14:42 db.0000103.003
-rw-r----- 1 kou kou 1.0G Dec 27 14:44 db.0000103.004
-rw-r----- 1 kou kou 1.0G Dec 27 14:46 db.0000103.005
-rw-r----- 1 kou kou 1.0G Dec 27 14:48 db.0000103.006
-rw-r----- 1 kou kou 1.0G Dec 27 14:51 db.0000103.007
-rw-r----- 1 kou kou 1.0G Dec 27 14:53 db.0000103.008
-rw-r----- 1 kou kou 1.0G Dec 27 14:55 db.0000103.009
-rw-r----- 1 kou kou 1.0G Dec 27 14:57 db.0000103.00A
-rw-r----- 1 kou kou 1.0G Dec 27 14:59 db.0000103.00B
-rw-r----- 1 kou kou 1.0G Dec 27 15:01 db.0000103.00C
-rw-r----- 1 kou kou 1.0G Dec 27 15:03 db.0000103.00D
-rw-r----- 1 kou kou 1.0G Dec 27 15:05 db.0000103.00E
-rw-r----- 1 kou kou 1.0G Dec 27 15:07 db.0000103.00F
-rw-r----- 1 kou kou 4.5M Dec 27 15:07 db.0000103.010
-rw-r----- 1 kou kou 4.0K Dec 27 14:33 db.0000103.c
-rw-r----- 1 kou kou 1.0M Dec 27 14:33 db.001
-rw-r----- 1 kou kou  13M Dec 27 14:33 db.conf
-rw-r--r-- 1 kou kou 177M Dec 27 15:48 log
-rw-r--r-- 1 kou kou  634 Dec 27 14:33 query.log

エラーログ：
2016-12-27 15:07:09.642377|A| [ii][update][one] failed to create a buffer2: <b.index>: <65537>:<1>:<65537>: size:<16>
2016-12-27 15:07:09.691508|A| /tmp/local/lib/libgroonga.so.0(grn_ii_update_one+0x2229) [0x7fb0403ff47e]
2016-12-27 15:07:09.691530|A| /tmp/local/lib/libgroonga.so.0(grn_ii_column_update+0x2740) [0x7fb040408be2]
2016-12-27 15:07:09.691534|A| /tmp/local/lib/libgroonga.so.0(grn_obj_default_set_value_hook+0x2f9) [0x7fb040270a1e]
2016-12-27 15:07:09.691536|A| /tmp/local/lib/libgroonga.so.0(+0xfe4a2) [0x7fb0402964a2]
2016-12-27 15:07:09.691538|A| /tmp/local/lib/libgroonga.so.0(+0xfe979) [0x7fb040296979]
2016-12-27 15:07:09.691540|A| /tmp/local/lib/libgroonga.so.0(grn_obj_set_value+0x3ad) [0x7fb040299ce0]
2016-12-27 15:07:09.691543|A| /tmp/local/lib/libgroonga.so.0(+0x122519) [0x7fb0402ba519]
2016-12-27 15:07:09.691545|A| /tmp/local/lib/libgroonga.so.0(+0x122dad) [0x7fb0402badad]
2016-12-27 15:07:09.691547|A| /tmp/local/lib/libgroonga.so.0(grn_load_+0xc42) [0x7fb0402bdf66]
2016-12-27 15:07:09.691549|A| /tmp/local/lib/libgroonga.so.0(+0x402282) [0x7fb04059a282]
2016-12-27 15:07:09.691552|A| /tmp/local/lib/libgroonga.so.0(grn_proc_call+0x426) [0x7fb0402cf606]
2016-12-27 15:07:09.691554|A| /tmp/local/lib/libgroonga.so.0(grn_command_run+0xce) [0x7fb040253187]
2016-12-27 15:07:09.691556|A| /tmp/local/lib/libgroonga.so.0(grn_expr_exec+0x1a5) [0x7fb0402cfd22]
2016-12-27 15:07:09.691558|A| /tmp/local/lib/libgroonga.so.0(grn_ctx_send+0x4d0) [0x7fb04025c122]
2016-12-27 15:07:09.691560|A| /tmp/local/bin/groonga(+0x634b) [0x56001bf9334b]
2016-12-27 15:07:09.691563|A| /tmp/local/bin/groonga(+0x18008) [0x56001bfa5008]
2016-12-27 15:07:09.691581|e| [table][load] failed to set column value: [ii][update][one] failed to create a buffer2: <b.index>: <65537>:<1>:<65537>: size:<16>: key: <(NULL)>, column: <x>, value: <""00065536"">

変更あり：
[[0,1482814433.974035,0.04183840751647949],true]
[[0,1482814434.015956,0.05599784851074219],true]
[[0,1482814434.072021,0.04459285736083984],true]
[[0,1482814434.116677,0.08618617057800293],true]
[[0,1482814434.20292,272.1374449729919],900000]

-rw-r----- 1 kou kou 4.0K Dec 27 13:58 db
-rw-r----- 1 kou kou  21M Dec 27 13:58 db.0000000
-rw-r----- 1 kou kou 8.1M Dec 27 13:58 db.0000100
-rw-r----- 1 kou kou  17M Dec 27 13:58 db.0000101
-rw-r----- 1 kou kou  13M Dec 27 13:58 db.0000102
-rw-r----- 1 kou kou  22M Dec 27 13:58 db.0000103
-rw-r----- 1 kou kou  29M Dec 27 13:58 db.0000103.c
-rw-r----- 1 kou kou 1.0M Dec 27 13:53 db.001
-rw-r----- 1 kou kou  13M Dec 27 13:53 db.conf
-rw-r--r-- 1 kou kou  13K Dec 27 13:58 log
-rw-r--r-- 1 kou kou  787 Dec 27 13:58 query.log",True,{}
groonga/groonga,https://github.com/groonga/groonga,617,2016-12-27T06:49:20Z,2016-12-30T12:40:46Z,2017-01-18T00:44:44Z,CLOSED,False,88,41,2,https://github.com/kou,ii: improve performance on buffer_new's worst case,2,[],https://github.com/groonga/groonga/pull/617,https://github.com/daijiro,2,https://github.com/groonga/groonga/pull/617#issuecomment-269752253,"See commit messages of 5b6129d and dd67962 about description of this case in English.
転置インデックスを更新するときにbuffer_new()をすることがありますが、データの内容・更新順序によって、すごく遅く、かつ、インデックスサイズがすごく増えることがあります。
どのような内容・更新順序かというと次のようなケースです。
table_create a TABLE_NO_KEY
column_create a x COLUMN_SCALAR ShortText
table_create b TABLE_PAT_KEY ShortText
column_create b index COLUMN_INDEX a x

load --table a
[
{""x"": ""00000000""},
{""x"": ""00000001""},
...
{""x"": ""00486036""},
{""x"": ""00000000""},
{""x"": ""00000001""},
...
{""x"": ""00413962""}
]

Rubyスクリプトだと次のようになります。
puts ""table_create a TABLE_NO_KEY""
puts ""column_create a x COLUMN_SCALAR ShortText""
puts ""table_create b TABLE_PAT_KEY ShortText""
puts ""column_create b index COLUMN_INDEX a x""

puts ""load --table a""
puts ""[""
n = 900_000
n.times do |i|
  i %= 486_037
  puts ""{\""x\"": \""#{i.to_s.rjust(8, '0')}\""},""
end
puts ""]""
buffer_new()の中で語彙表をカーソルで回して既存のbufferがないか探していますが、↑のケースだとカーソルを回しきっても既存のbufferが見つかりません。00486036のレコードが終わって2週目（2回目の00000000）に入ると、レコードが増えるごとにカーソルが返すレコード数が増えるのでbuffer_new()の時間がどんどん増えてインデックス更新が遅くなります。
また、既存のbufferが見つからないので毎回新しくbufferを作ります。このためインデックスサイズも大きくなります。
解決策として以下を提案します。

既存のbufferが見つからなかった場合に過去にgrn_ii_update_one()したときに新しく作ったbufferを使いまわせないかチェックする。

既存のbufferが見つからないケースを減らす。これでインデックスサイズの増加を抑えられる。


カーソルで回すレコード数を制限する。

既存のbufferを見つけられるケースが減ることがあるが、buffer_new()にかかる時間が一定以下に抑えられるので前述のケースでの速度劣化が抑えられる。
既存のbufferを見つけられない場合は↑の使いまわせないかチェックでフォローするので影響は軽微なはず。



前者の実装は 5b6129d です。
grn_iiに追加しているnext_buffer_candidate_tidが使いまわせないかチェック対象のbuffer（に紐付いているtid）です。
buffer_open_by_tid()はbuffer_open()のコードの一部を抜き出しただけでロジックは変えていません。
SPLIT_COND()が変わっているのはbufferがb以外の変数にも入れられるようにです。
後者の実装は dd67962 です。
EXISTING_BUFFER_FIND_LIMITの10000はなんとなくで決めました。特に計測したわけではありません。
この変更を入れる前と入れた後では実行時間・サイズは以下のように変わります。データは前述のRubyスクリプトを実行した結果です。それをgroongaコマンドで処理しました。



項目
変更なし
変更あり




実行時間
30分以上(*)
約4分30秒


サイズ
約15GB（1GB * 15 + 4.5MB + 4KB）
約51MB（22MB + 29MB）



(*) 30分を過ぎたくらいからエラー発生。50万件後半くらいから発生する。45分くらいたって65万件くらいしかロードできていない。
以下は生結果です。
変更なし：
[[0,1482816822.219858,0.04200315475463867],true]
[[0,1482816822.261966,0.05740857124328613],true]
[[0,1482816822.319439,0.04283547401428223],true]
[[0,1482816822.362304,0.07676839828491211],true]

# select a --limit 0
[[0,1482821246.286818,0.0002453327178955078],[[[649709],[[""_id"",""UInt32""],[""x"",""ShortText""]]]]]

-rw-r----- 1 kou kou 4.0K Dec 27 14:33 db
-rw-r----- 1 kou kou  21M Dec 27 15:47 db.0000000
-rw-r----- 1 kou kou 8.1M Dec 27 15:47 db.0000100
-rw-r----- 1 kou kou  17M Dec 27 15:07 db.0000101
-rw-r----- 1 kou kou  13M Dec 27 15:47 db.0000102
-rw-r----- 1 kou kou 1.0G Dec 27 15:47 db.0000103
-rw-r----- 1 kou kou 1.0G Dec 27 14:38 db.0000103.001
-rw-r----- 1 kou kou 1.0G Dec 27 14:40 db.0000103.002
-rw-r----- 1 kou kou 1.0G Dec 27 14:42 db.0000103.003
-rw-r----- 1 kou kou 1.0G Dec 27 14:44 db.0000103.004
-rw-r----- 1 kou kou 1.0G Dec 27 14:46 db.0000103.005
-rw-r----- 1 kou kou 1.0G Dec 27 14:48 db.0000103.006
-rw-r----- 1 kou kou 1.0G Dec 27 14:51 db.0000103.007
-rw-r----- 1 kou kou 1.0G Dec 27 14:53 db.0000103.008
-rw-r----- 1 kou kou 1.0G Dec 27 14:55 db.0000103.009
-rw-r----- 1 kou kou 1.0G Dec 27 14:57 db.0000103.00A
-rw-r----- 1 kou kou 1.0G Dec 27 14:59 db.0000103.00B
-rw-r----- 1 kou kou 1.0G Dec 27 15:01 db.0000103.00C
-rw-r----- 1 kou kou 1.0G Dec 27 15:03 db.0000103.00D
-rw-r----- 1 kou kou 1.0G Dec 27 15:05 db.0000103.00E
-rw-r----- 1 kou kou 1.0G Dec 27 15:07 db.0000103.00F
-rw-r----- 1 kou kou 4.5M Dec 27 15:07 db.0000103.010
-rw-r----- 1 kou kou 4.0K Dec 27 14:33 db.0000103.c
-rw-r----- 1 kou kou 1.0M Dec 27 14:33 db.001
-rw-r----- 1 kou kou  13M Dec 27 14:33 db.conf
-rw-r--r-- 1 kou kou 177M Dec 27 15:48 log
-rw-r--r-- 1 kou kou  634 Dec 27 14:33 query.log

エラーログ：
2016-12-27 15:07:09.642377|A| [ii][update][one] failed to create a buffer2: <b.index>: <65537>:<1>:<65537>: size:<16>
2016-12-27 15:07:09.691508|A| /tmp/local/lib/libgroonga.so.0(grn_ii_update_one+0x2229) [0x7fb0403ff47e]
2016-12-27 15:07:09.691530|A| /tmp/local/lib/libgroonga.so.0(grn_ii_column_update+0x2740) [0x7fb040408be2]
2016-12-27 15:07:09.691534|A| /tmp/local/lib/libgroonga.so.0(grn_obj_default_set_value_hook+0x2f9) [0x7fb040270a1e]
2016-12-27 15:07:09.691536|A| /tmp/local/lib/libgroonga.so.0(+0xfe4a2) [0x7fb0402964a2]
2016-12-27 15:07:09.691538|A| /tmp/local/lib/libgroonga.so.0(+0xfe979) [0x7fb040296979]
2016-12-27 15:07:09.691540|A| /tmp/local/lib/libgroonga.so.0(grn_obj_set_value+0x3ad) [0x7fb040299ce0]
2016-12-27 15:07:09.691543|A| /tmp/local/lib/libgroonga.so.0(+0x122519) [0x7fb0402ba519]
2016-12-27 15:07:09.691545|A| /tmp/local/lib/libgroonga.so.0(+0x122dad) [0x7fb0402badad]
2016-12-27 15:07:09.691547|A| /tmp/local/lib/libgroonga.so.0(grn_load_+0xc42) [0x7fb0402bdf66]
2016-12-27 15:07:09.691549|A| /tmp/local/lib/libgroonga.so.0(+0x402282) [0x7fb04059a282]
2016-12-27 15:07:09.691552|A| /tmp/local/lib/libgroonga.so.0(grn_proc_call+0x426) [0x7fb0402cf606]
2016-12-27 15:07:09.691554|A| /tmp/local/lib/libgroonga.so.0(grn_command_run+0xce) [0x7fb040253187]
2016-12-27 15:07:09.691556|A| /tmp/local/lib/libgroonga.so.0(grn_expr_exec+0x1a5) [0x7fb0402cfd22]
2016-12-27 15:07:09.691558|A| /tmp/local/lib/libgroonga.so.0(grn_ctx_send+0x4d0) [0x7fb04025c122]
2016-12-27 15:07:09.691560|A| /tmp/local/bin/groonga(+0x634b) [0x56001bf9334b]
2016-12-27 15:07:09.691563|A| /tmp/local/bin/groonga(+0x18008) [0x56001bfa5008]
2016-12-27 15:07:09.691581|e| [table][load] failed to set column value: [ii][update][one] failed to create a buffer2: <b.index>: <65537>:<1>:<65537>: size:<16>: key: <(NULL)>, column: <x>, value: <""00065536"">

変更あり：
[[0,1482814433.974035,0.04183840751647949],true]
[[0,1482814434.015956,0.05599784851074219],true]
[[0,1482814434.072021,0.04459285736083984],true]
[[0,1482814434.116677,0.08618617057800293],true]
[[0,1482814434.20292,272.1374449729919],900000]

-rw-r----- 1 kou kou 4.0K Dec 27 13:58 db
-rw-r----- 1 kou kou  21M Dec 27 13:58 db.0000000
-rw-r----- 1 kou kou 8.1M Dec 27 13:58 db.0000100
-rw-r----- 1 kou kou  17M Dec 27 13:58 db.0000101
-rw-r----- 1 kou kou  13M Dec 27 13:58 db.0000102
-rw-r----- 1 kou kou  22M Dec 27 13:58 db.0000103
-rw-r----- 1 kou kou  29M Dec 27 13:58 db.0000103.c
-rw-r----- 1 kou kou 1.0M Dec 27 13:53 db.001
-rw-r----- 1 kou kou  13M Dec 27 13:53 db.conf
-rw-r--r-- 1 kou kou  13K Dec 27 13:58 log
-rw-r--r-- 1 kou kou  787 Dec 27 13:58 query.log","別の実装になりましたが f578810 をpushしました。
これでどうでしょうか。。(今回のケースについては更新・検索とも問題なく動作することを確認しています)
もともとbuffer_new()の中でgrn_table_cursor()を呼んでいるのは、語彙表の中で値が近いキーについては、索引の中でもなるべく近くに配置してやりたいという意図があったのですが、そのためにはキーを完全に昇順に取り出さなくても、既存のキーの中でなるべく近いものを取り出せれば十分ですので、GRN_CURSOR_PREFIX|GRN_CURSOR_SIZE_BY_BITを使うように変えてみました。",True,{}
groonga/groonga,https://github.com/groonga/groonga,617,2016-12-27T06:49:20Z,2016-12-30T12:40:46Z,2017-01-18T00:44:44Z,CLOSED,False,88,41,2,https://github.com/kou,ii: improve performance on buffer_new's worst case,2,[],https://github.com/groonga/groonga/pull/617,https://github.com/kou,3,https://github.com/groonga/groonga/pull/617#issuecomment-269767352,"See commit messages of 5b6129d and dd67962 about description of this case in English.
転置インデックスを更新するときにbuffer_new()をすることがありますが、データの内容・更新順序によって、すごく遅く、かつ、インデックスサイズがすごく増えることがあります。
どのような内容・更新順序かというと次のようなケースです。
table_create a TABLE_NO_KEY
column_create a x COLUMN_SCALAR ShortText
table_create b TABLE_PAT_KEY ShortText
column_create b index COLUMN_INDEX a x

load --table a
[
{""x"": ""00000000""},
{""x"": ""00000001""},
...
{""x"": ""00486036""},
{""x"": ""00000000""},
{""x"": ""00000001""},
...
{""x"": ""00413962""}
]

Rubyスクリプトだと次のようになります。
puts ""table_create a TABLE_NO_KEY""
puts ""column_create a x COLUMN_SCALAR ShortText""
puts ""table_create b TABLE_PAT_KEY ShortText""
puts ""column_create b index COLUMN_INDEX a x""

puts ""load --table a""
puts ""[""
n = 900_000
n.times do |i|
  i %= 486_037
  puts ""{\""x\"": \""#{i.to_s.rjust(8, '0')}\""},""
end
puts ""]""
buffer_new()の中で語彙表をカーソルで回して既存のbufferがないか探していますが、↑のケースだとカーソルを回しきっても既存のbufferが見つかりません。00486036のレコードが終わって2週目（2回目の00000000）に入ると、レコードが増えるごとにカーソルが返すレコード数が増えるのでbuffer_new()の時間がどんどん増えてインデックス更新が遅くなります。
また、既存のbufferが見つからないので毎回新しくbufferを作ります。このためインデックスサイズも大きくなります。
解決策として以下を提案します。

既存のbufferが見つからなかった場合に過去にgrn_ii_update_one()したときに新しく作ったbufferを使いまわせないかチェックする。

既存のbufferが見つからないケースを減らす。これでインデックスサイズの増加を抑えられる。


カーソルで回すレコード数を制限する。

既存のbufferを見つけられるケースが減ることがあるが、buffer_new()にかかる時間が一定以下に抑えられるので前述のケースでの速度劣化が抑えられる。
既存のbufferを見つけられない場合は↑の使いまわせないかチェックでフォローするので影響は軽微なはず。



前者の実装は 5b6129d です。
grn_iiに追加しているnext_buffer_candidate_tidが使いまわせないかチェック対象のbuffer（に紐付いているtid）です。
buffer_open_by_tid()はbuffer_open()のコードの一部を抜き出しただけでロジックは変えていません。
SPLIT_COND()が変わっているのはbufferがb以外の変数にも入れられるようにです。
後者の実装は dd67962 です。
EXISTING_BUFFER_FIND_LIMITの10000はなんとなくで決めました。特に計測したわけではありません。
この変更を入れる前と入れた後では実行時間・サイズは以下のように変わります。データは前述のRubyスクリプトを実行した結果です。それをgroongaコマンドで処理しました。



項目
変更なし
変更あり




実行時間
30分以上(*)
約4分30秒


サイズ
約15GB（1GB * 15 + 4.5MB + 4KB）
約51MB（22MB + 29MB）



(*) 30分を過ぎたくらいからエラー発生。50万件後半くらいから発生する。45分くらいたって65万件くらいしかロードできていない。
以下は生結果です。
変更なし：
[[0,1482816822.219858,0.04200315475463867],true]
[[0,1482816822.261966,0.05740857124328613],true]
[[0,1482816822.319439,0.04283547401428223],true]
[[0,1482816822.362304,0.07676839828491211],true]

# select a --limit 0
[[0,1482821246.286818,0.0002453327178955078],[[[649709],[[""_id"",""UInt32""],[""x"",""ShortText""]]]]]

-rw-r----- 1 kou kou 4.0K Dec 27 14:33 db
-rw-r----- 1 kou kou  21M Dec 27 15:47 db.0000000
-rw-r----- 1 kou kou 8.1M Dec 27 15:47 db.0000100
-rw-r----- 1 kou kou  17M Dec 27 15:07 db.0000101
-rw-r----- 1 kou kou  13M Dec 27 15:47 db.0000102
-rw-r----- 1 kou kou 1.0G Dec 27 15:47 db.0000103
-rw-r----- 1 kou kou 1.0G Dec 27 14:38 db.0000103.001
-rw-r----- 1 kou kou 1.0G Dec 27 14:40 db.0000103.002
-rw-r----- 1 kou kou 1.0G Dec 27 14:42 db.0000103.003
-rw-r----- 1 kou kou 1.0G Dec 27 14:44 db.0000103.004
-rw-r----- 1 kou kou 1.0G Dec 27 14:46 db.0000103.005
-rw-r----- 1 kou kou 1.0G Dec 27 14:48 db.0000103.006
-rw-r----- 1 kou kou 1.0G Dec 27 14:51 db.0000103.007
-rw-r----- 1 kou kou 1.0G Dec 27 14:53 db.0000103.008
-rw-r----- 1 kou kou 1.0G Dec 27 14:55 db.0000103.009
-rw-r----- 1 kou kou 1.0G Dec 27 14:57 db.0000103.00A
-rw-r----- 1 kou kou 1.0G Dec 27 14:59 db.0000103.00B
-rw-r----- 1 kou kou 1.0G Dec 27 15:01 db.0000103.00C
-rw-r----- 1 kou kou 1.0G Dec 27 15:03 db.0000103.00D
-rw-r----- 1 kou kou 1.0G Dec 27 15:05 db.0000103.00E
-rw-r----- 1 kou kou 1.0G Dec 27 15:07 db.0000103.00F
-rw-r----- 1 kou kou 4.5M Dec 27 15:07 db.0000103.010
-rw-r----- 1 kou kou 4.0K Dec 27 14:33 db.0000103.c
-rw-r----- 1 kou kou 1.0M Dec 27 14:33 db.001
-rw-r----- 1 kou kou  13M Dec 27 14:33 db.conf
-rw-r--r-- 1 kou kou 177M Dec 27 15:48 log
-rw-r--r-- 1 kou kou  634 Dec 27 14:33 query.log

エラーログ：
2016-12-27 15:07:09.642377|A| [ii][update][one] failed to create a buffer2: <b.index>: <65537>:<1>:<65537>: size:<16>
2016-12-27 15:07:09.691508|A| /tmp/local/lib/libgroonga.so.0(grn_ii_update_one+0x2229) [0x7fb0403ff47e]
2016-12-27 15:07:09.691530|A| /tmp/local/lib/libgroonga.so.0(grn_ii_column_update+0x2740) [0x7fb040408be2]
2016-12-27 15:07:09.691534|A| /tmp/local/lib/libgroonga.so.0(grn_obj_default_set_value_hook+0x2f9) [0x7fb040270a1e]
2016-12-27 15:07:09.691536|A| /tmp/local/lib/libgroonga.so.0(+0xfe4a2) [0x7fb0402964a2]
2016-12-27 15:07:09.691538|A| /tmp/local/lib/libgroonga.so.0(+0xfe979) [0x7fb040296979]
2016-12-27 15:07:09.691540|A| /tmp/local/lib/libgroonga.so.0(grn_obj_set_value+0x3ad) [0x7fb040299ce0]
2016-12-27 15:07:09.691543|A| /tmp/local/lib/libgroonga.so.0(+0x122519) [0x7fb0402ba519]
2016-12-27 15:07:09.691545|A| /tmp/local/lib/libgroonga.so.0(+0x122dad) [0x7fb0402badad]
2016-12-27 15:07:09.691547|A| /tmp/local/lib/libgroonga.so.0(grn_load_+0xc42) [0x7fb0402bdf66]
2016-12-27 15:07:09.691549|A| /tmp/local/lib/libgroonga.so.0(+0x402282) [0x7fb04059a282]
2016-12-27 15:07:09.691552|A| /tmp/local/lib/libgroonga.so.0(grn_proc_call+0x426) [0x7fb0402cf606]
2016-12-27 15:07:09.691554|A| /tmp/local/lib/libgroonga.so.0(grn_command_run+0xce) [0x7fb040253187]
2016-12-27 15:07:09.691556|A| /tmp/local/lib/libgroonga.so.0(grn_expr_exec+0x1a5) [0x7fb0402cfd22]
2016-12-27 15:07:09.691558|A| /tmp/local/lib/libgroonga.so.0(grn_ctx_send+0x4d0) [0x7fb04025c122]
2016-12-27 15:07:09.691560|A| /tmp/local/bin/groonga(+0x634b) [0x56001bf9334b]
2016-12-27 15:07:09.691563|A| /tmp/local/bin/groonga(+0x18008) [0x56001bfa5008]
2016-12-27 15:07:09.691581|e| [table][load] failed to set column value: [ii][update][one] failed to create a buffer2: <b.index>: <65537>:<1>:<65537>: size:<16>: key: <(NULL)>, column: <x>, value: <""00065536"">

変更あり：
[[0,1482814433.974035,0.04183840751647949],true]
[[0,1482814434.015956,0.05599784851074219],true]
[[0,1482814434.072021,0.04459285736083984],true]
[[0,1482814434.116677,0.08618617057800293],true]
[[0,1482814434.20292,272.1374449729919],900000]

-rw-r----- 1 kou kou 4.0K Dec 27 13:58 db
-rw-r----- 1 kou kou  21M Dec 27 13:58 db.0000000
-rw-r----- 1 kou kou 8.1M Dec 27 13:58 db.0000100
-rw-r----- 1 kou kou  17M Dec 27 13:58 db.0000101
-rw-r----- 1 kou kou  13M Dec 27 13:58 db.0000102
-rw-r----- 1 kou kou  22M Dec 27 13:58 db.0000103
-rw-r----- 1 kou kou  29M Dec 27 13:58 db.0000103.c
-rw-r----- 1 kou kou 1.0M Dec 27 13:53 db.001
-rw-r----- 1 kou kou  13M Dec 27 13:53 db.conf
-rw-r--r-- 1 kou kou  13K Dec 27 13:58 log
-rw-r--r-- 1 kou kou  787 Dec 27 13:58 query.log","さすがです！
[groonga-dev,04219]のケースでも速く省サイズになっています！",True,{}
groonga/groonga,https://github.com/groonga/groonga,617,2016-12-27T06:49:20Z,2016-12-30T12:40:46Z,2017-01-18T00:44:44Z,CLOSED,False,88,41,2,https://github.com/kou,ii: improve performance on buffer_new's worst case,2,[],https://github.com/groonga/groonga/pull/617,https://github.com/kou,4,https://github.com/groonga/groonga/pull/617#issuecomment-269868701,"See commit messages of 5b6129d and dd67962 about description of this case in English.
転置インデックスを更新するときにbuffer_new()をすることがありますが、データの内容・更新順序によって、すごく遅く、かつ、インデックスサイズがすごく増えることがあります。
どのような内容・更新順序かというと次のようなケースです。
table_create a TABLE_NO_KEY
column_create a x COLUMN_SCALAR ShortText
table_create b TABLE_PAT_KEY ShortText
column_create b index COLUMN_INDEX a x

load --table a
[
{""x"": ""00000000""},
{""x"": ""00000001""},
...
{""x"": ""00486036""},
{""x"": ""00000000""},
{""x"": ""00000001""},
...
{""x"": ""00413962""}
]

Rubyスクリプトだと次のようになります。
puts ""table_create a TABLE_NO_KEY""
puts ""column_create a x COLUMN_SCALAR ShortText""
puts ""table_create b TABLE_PAT_KEY ShortText""
puts ""column_create b index COLUMN_INDEX a x""

puts ""load --table a""
puts ""[""
n = 900_000
n.times do |i|
  i %= 486_037
  puts ""{\""x\"": \""#{i.to_s.rjust(8, '0')}\""},""
end
puts ""]""
buffer_new()の中で語彙表をカーソルで回して既存のbufferがないか探していますが、↑のケースだとカーソルを回しきっても既存のbufferが見つかりません。00486036のレコードが終わって2週目（2回目の00000000）に入ると、レコードが増えるごとにカーソルが返すレコード数が増えるのでbuffer_new()の時間がどんどん増えてインデックス更新が遅くなります。
また、既存のbufferが見つからないので毎回新しくbufferを作ります。このためインデックスサイズも大きくなります。
解決策として以下を提案します。

既存のbufferが見つからなかった場合に過去にgrn_ii_update_one()したときに新しく作ったbufferを使いまわせないかチェックする。

既存のbufferが見つからないケースを減らす。これでインデックスサイズの増加を抑えられる。


カーソルで回すレコード数を制限する。

既存のbufferを見つけられるケースが減ることがあるが、buffer_new()にかかる時間が一定以下に抑えられるので前述のケースでの速度劣化が抑えられる。
既存のbufferを見つけられない場合は↑の使いまわせないかチェックでフォローするので影響は軽微なはず。



前者の実装は 5b6129d です。
grn_iiに追加しているnext_buffer_candidate_tidが使いまわせないかチェック対象のbuffer（に紐付いているtid）です。
buffer_open_by_tid()はbuffer_open()のコードの一部を抜き出しただけでロジックは変えていません。
SPLIT_COND()が変わっているのはbufferがb以外の変数にも入れられるようにです。
後者の実装は dd67962 です。
EXISTING_BUFFER_FIND_LIMITの10000はなんとなくで決めました。特に計測したわけではありません。
この変更を入れる前と入れた後では実行時間・サイズは以下のように変わります。データは前述のRubyスクリプトを実行した結果です。それをgroongaコマンドで処理しました。



項目
変更なし
変更あり




実行時間
30分以上(*)
約4分30秒


サイズ
約15GB（1GB * 15 + 4.5MB + 4KB）
約51MB（22MB + 29MB）



(*) 30分を過ぎたくらいからエラー発生。50万件後半くらいから発生する。45分くらいたって65万件くらいしかロードできていない。
以下は生結果です。
変更なし：
[[0,1482816822.219858,0.04200315475463867],true]
[[0,1482816822.261966,0.05740857124328613],true]
[[0,1482816822.319439,0.04283547401428223],true]
[[0,1482816822.362304,0.07676839828491211],true]

# select a --limit 0
[[0,1482821246.286818,0.0002453327178955078],[[[649709],[[""_id"",""UInt32""],[""x"",""ShortText""]]]]]

-rw-r----- 1 kou kou 4.0K Dec 27 14:33 db
-rw-r----- 1 kou kou  21M Dec 27 15:47 db.0000000
-rw-r----- 1 kou kou 8.1M Dec 27 15:47 db.0000100
-rw-r----- 1 kou kou  17M Dec 27 15:07 db.0000101
-rw-r----- 1 kou kou  13M Dec 27 15:47 db.0000102
-rw-r----- 1 kou kou 1.0G Dec 27 15:47 db.0000103
-rw-r----- 1 kou kou 1.0G Dec 27 14:38 db.0000103.001
-rw-r----- 1 kou kou 1.0G Dec 27 14:40 db.0000103.002
-rw-r----- 1 kou kou 1.0G Dec 27 14:42 db.0000103.003
-rw-r----- 1 kou kou 1.0G Dec 27 14:44 db.0000103.004
-rw-r----- 1 kou kou 1.0G Dec 27 14:46 db.0000103.005
-rw-r----- 1 kou kou 1.0G Dec 27 14:48 db.0000103.006
-rw-r----- 1 kou kou 1.0G Dec 27 14:51 db.0000103.007
-rw-r----- 1 kou kou 1.0G Dec 27 14:53 db.0000103.008
-rw-r----- 1 kou kou 1.0G Dec 27 14:55 db.0000103.009
-rw-r----- 1 kou kou 1.0G Dec 27 14:57 db.0000103.00A
-rw-r----- 1 kou kou 1.0G Dec 27 14:59 db.0000103.00B
-rw-r----- 1 kou kou 1.0G Dec 27 15:01 db.0000103.00C
-rw-r----- 1 kou kou 1.0G Dec 27 15:03 db.0000103.00D
-rw-r----- 1 kou kou 1.0G Dec 27 15:05 db.0000103.00E
-rw-r----- 1 kou kou 1.0G Dec 27 15:07 db.0000103.00F
-rw-r----- 1 kou kou 4.5M Dec 27 15:07 db.0000103.010
-rw-r----- 1 kou kou 4.0K Dec 27 14:33 db.0000103.c
-rw-r----- 1 kou kou 1.0M Dec 27 14:33 db.001
-rw-r----- 1 kou kou  13M Dec 27 14:33 db.conf
-rw-r--r-- 1 kou kou 177M Dec 27 15:48 log
-rw-r--r-- 1 kou kou  634 Dec 27 14:33 query.log

エラーログ：
2016-12-27 15:07:09.642377|A| [ii][update][one] failed to create a buffer2: <b.index>: <65537>:<1>:<65537>: size:<16>
2016-12-27 15:07:09.691508|A| /tmp/local/lib/libgroonga.so.0(grn_ii_update_one+0x2229) [0x7fb0403ff47e]
2016-12-27 15:07:09.691530|A| /tmp/local/lib/libgroonga.so.0(grn_ii_column_update+0x2740) [0x7fb040408be2]
2016-12-27 15:07:09.691534|A| /tmp/local/lib/libgroonga.so.0(grn_obj_default_set_value_hook+0x2f9) [0x7fb040270a1e]
2016-12-27 15:07:09.691536|A| /tmp/local/lib/libgroonga.so.0(+0xfe4a2) [0x7fb0402964a2]
2016-12-27 15:07:09.691538|A| /tmp/local/lib/libgroonga.so.0(+0xfe979) [0x7fb040296979]
2016-12-27 15:07:09.691540|A| /tmp/local/lib/libgroonga.so.0(grn_obj_set_value+0x3ad) [0x7fb040299ce0]
2016-12-27 15:07:09.691543|A| /tmp/local/lib/libgroonga.so.0(+0x122519) [0x7fb0402ba519]
2016-12-27 15:07:09.691545|A| /tmp/local/lib/libgroonga.so.0(+0x122dad) [0x7fb0402badad]
2016-12-27 15:07:09.691547|A| /tmp/local/lib/libgroonga.so.0(grn_load_+0xc42) [0x7fb0402bdf66]
2016-12-27 15:07:09.691549|A| /tmp/local/lib/libgroonga.so.0(+0x402282) [0x7fb04059a282]
2016-12-27 15:07:09.691552|A| /tmp/local/lib/libgroonga.so.0(grn_proc_call+0x426) [0x7fb0402cf606]
2016-12-27 15:07:09.691554|A| /tmp/local/lib/libgroonga.so.0(grn_command_run+0xce) [0x7fb040253187]
2016-12-27 15:07:09.691556|A| /tmp/local/lib/libgroonga.so.0(grn_expr_exec+0x1a5) [0x7fb0402cfd22]
2016-12-27 15:07:09.691558|A| /tmp/local/lib/libgroonga.so.0(grn_ctx_send+0x4d0) [0x7fb04025c122]
2016-12-27 15:07:09.691560|A| /tmp/local/bin/groonga(+0x634b) [0x56001bf9334b]
2016-12-27 15:07:09.691563|A| /tmp/local/bin/groonga(+0x18008) [0x56001bfa5008]
2016-12-27 15:07:09.691581|e| [table][load] failed to set column value: [ii][update][one] failed to create a buffer2: <b.index>: <65537>:<1>:<65537>: size:<16>: key: <(NULL)>, column: <x>, value: <""00065536"">

変更あり：
[[0,1482814433.974035,0.04183840751647949],true]
[[0,1482814434.015956,0.05599784851074219],true]
[[0,1482814434.072021,0.04459285736083984],true]
[[0,1482814434.116677,0.08618617057800293],true]
[[0,1482814434.20292,272.1374449729919],900000]

-rw-r----- 1 kou kou 4.0K Dec 27 13:58 db
-rw-r----- 1 kou kou  21M Dec 27 13:58 db.0000000
-rw-r----- 1 kou kou 8.1M Dec 27 13:58 db.0000100
-rw-r----- 1 kou kou  17M Dec 27 13:58 db.0000101
-rw-r----- 1 kou kou  13M Dec 27 13:58 db.0000102
-rw-r----- 1 kou kou  22M Dec 27 13:58 db.0000103
-rw-r----- 1 kou kou  29M Dec 27 13:58 db.0000103.c
-rw-r----- 1 kou kou 1.0M Dec 27 13:53 db.001
-rw-r----- 1 kou kou  13M Dec 27 13:53 db.conf
-rw-r--r-- 1 kou kou  13K Dec 27 13:58 log
-rw-r--r-- 1 kou kou  787 Dec 27 13:58 query.log","すみません、この実装だと、key_size_for_retry--するたびに同じレコードを何度もチェックしてしまう（key_size_for_retryにはkey_size_for_retry + 1のときの対象IDがすべて含まれるから）ので、なかなか見つからないときに遅いです。。。さらにキーサイズが大きい（数百バイトとか数キロバイトとか）とより遅いです。。。
重複なくカーソルを回せるといいのですが。。。",True,{}
groonga/groonga,https://github.com/groonga/groonga,617,2016-12-27T06:49:20Z,2016-12-30T12:40:46Z,2017-01-18T00:44:44Z,CLOSED,False,88,41,2,https://github.com/kou,ii: improve performance on buffer_new's worst case,2,[],https://github.com/groonga/groonga/pull/617,https://github.com/kou,5,https://github.com/groonga/groonga/pull/617#issuecomment-269908869,"See commit messages of 5b6129d and dd67962 about description of this case in English.
転置インデックスを更新するときにbuffer_new()をすることがありますが、データの内容・更新順序によって、すごく遅く、かつ、インデックスサイズがすごく増えることがあります。
どのような内容・更新順序かというと次のようなケースです。
table_create a TABLE_NO_KEY
column_create a x COLUMN_SCALAR ShortText
table_create b TABLE_PAT_KEY ShortText
column_create b index COLUMN_INDEX a x

load --table a
[
{""x"": ""00000000""},
{""x"": ""00000001""},
...
{""x"": ""00486036""},
{""x"": ""00000000""},
{""x"": ""00000001""},
...
{""x"": ""00413962""}
]

Rubyスクリプトだと次のようになります。
puts ""table_create a TABLE_NO_KEY""
puts ""column_create a x COLUMN_SCALAR ShortText""
puts ""table_create b TABLE_PAT_KEY ShortText""
puts ""column_create b index COLUMN_INDEX a x""

puts ""load --table a""
puts ""[""
n = 900_000
n.times do |i|
  i %= 486_037
  puts ""{\""x\"": \""#{i.to_s.rjust(8, '0')}\""},""
end
puts ""]""
buffer_new()の中で語彙表をカーソルで回して既存のbufferがないか探していますが、↑のケースだとカーソルを回しきっても既存のbufferが見つかりません。00486036のレコードが終わって2週目（2回目の00000000）に入ると、レコードが増えるごとにカーソルが返すレコード数が増えるのでbuffer_new()の時間がどんどん増えてインデックス更新が遅くなります。
また、既存のbufferが見つからないので毎回新しくbufferを作ります。このためインデックスサイズも大きくなります。
解決策として以下を提案します。

既存のbufferが見つからなかった場合に過去にgrn_ii_update_one()したときに新しく作ったbufferを使いまわせないかチェックする。

既存のbufferが見つからないケースを減らす。これでインデックスサイズの増加を抑えられる。


カーソルで回すレコード数を制限する。

既存のbufferを見つけられるケースが減ることがあるが、buffer_new()にかかる時間が一定以下に抑えられるので前述のケースでの速度劣化が抑えられる。
既存のbufferを見つけられない場合は↑の使いまわせないかチェックでフォローするので影響は軽微なはず。



前者の実装は 5b6129d です。
grn_iiに追加しているnext_buffer_candidate_tidが使いまわせないかチェック対象のbuffer（に紐付いているtid）です。
buffer_open_by_tid()はbuffer_open()のコードの一部を抜き出しただけでロジックは変えていません。
SPLIT_COND()が変わっているのはbufferがb以外の変数にも入れられるようにです。
後者の実装は dd67962 です。
EXISTING_BUFFER_FIND_LIMITの10000はなんとなくで決めました。特に計測したわけではありません。
この変更を入れる前と入れた後では実行時間・サイズは以下のように変わります。データは前述のRubyスクリプトを実行した結果です。それをgroongaコマンドで処理しました。



項目
変更なし
変更あり




実行時間
30分以上(*)
約4分30秒


サイズ
約15GB（1GB * 15 + 4.5MB + 4KB）
約51MB（22MB + 29MB）



(*) 30分を過ぎたくらいからエラー発生。50万件後半くらいから発生する。45分くらいたって65万件くらいしかロードできていない。
以下は生結果です。
変更なし：
[[0,1482816822.219858,0.04200315475463867],true]
[[0,1482816822.261966,0.05740857124328613],true]
[[0,1482816822.319439,0.04283547401428223],true]
[[0,1482816822.362304,0.07676839828491211],true]

# select a --limit 0
[[0,1482821246.286818,0.0002453327178955078],[[[649709],[[""_id"",""UInt32""],[""x"",""ShortText""]]]]]

-rw-r----- 1 kou kou 4.0K Dec 27 14:33 db
-rw-r----- 1 kou kou  21M Dec 27 15:47 db.0000000
-rw-r----- 1 kou kou 8.1M Dec 27 15:47 db.0000100
-rw-r----- 1 kou kou  17M Dec 27 15:07 db.0000101
-rw-r----- 1 kou kou  13M Dec 27 15:47 db.0000102
-rw-r----- 1 kou kou 1.0G Dec 27 15:47 db.0000103
-rw-r----- 1 kou kou 1.0G Dec 27 14:38 db.0000103.001
-rw-r----- 1 kou kou 1.0G Dec 27 14:40 db.0000103.002
-rw-r----- 1 kou kou 1.0G Dec 27 14:42 db.0000103.003
-rw-r----- 1 kou kou 1.0G Dec 27 14:44 db.0000103.004
-rw-r----- 1 kou kou 1.0G Dec 27 14:46 db.0000103.005
-rw-r----- 1 kou kou 1.0G Dec 27 14:48 db.0000103.006
-rw-r----- 1 kou kou 1.0G Dec 27 14:51 db.0000103.007
-rw-r----- 1 kou kou 1.0G Dec 27 14:53 db.0000103.008
-rw-r----- 1 kou kou 1.0G Dec 27 14:55 db.0000103.009
-rw-r----- 1 kou kou 1.0G Dec 27 14:57 db.0000103.00A
-rw-r----- 1 kou kou 1.0G Dec 27 14:59 db.0000103.00B
-rw-r----- 1 kou kou 1.0G Dec 27 15:01 db.0000103.00C
-rw-r----- 1 kou kou 1.0G Dec 27 15:03 db.0000103.00D
-rw-r----- 1 kou kou 1.0G Dec 27 15:05 db.0000103.00E
-rw-r----- 1 kou kou 1.0G Dec 27 15:07 db.0000103.00F
-rw-r----- 1 kou kou 4.5M Dec 27 15:07 db.0000103.010
-rw-r----- 1 kou kou 4.0K Dec 27 14:33 db.0000103.c
-rw-r----- 1 kou kou 1.0M Dec 27 14:33 db.001
-rw-r----- 1 kou kou  13M Dec 27 14:33 db.conf
-rw-r--r-- 1 kou kou 177M Dec 27 15:48 log
-rw-r--r-- 1 kou kou  634 Dec 27 14:33 query.log

エラーログ：
2016-12-27 15:07:09.642377|A| [ii][update][one] failed to create a buffer2: <b.index>: <65537>:<1>:<65537>: size:<16>
2016-12-27 15:07:09.691508|A| /tmp/local/lib/libgroonga.so.0(grn_ii_update_one+0x2229) [0x7fb0403ff47e]
2016-12-27 15:07:09.691530|A| /tmp/local/lib/libgroonga.so.0(grn_ii_column_update+0x2740) [0x7fb040408be2]
2016-12-27 15:07:09.691534|A| /tmp/local/lib/libgroonga.so.0(grn_obj_default_set_value_hook+0x2f9) [0x7fb040270a1e]
2016-12-27 15:07:09.691536|A| /tmp/local/lib/libgroonga.so.0(+0xfe4a2) [0x7fb0402964a2]
2016-12-27 15:07:09.691538|A| /tmp/local/lib/libgroonga.so.0(+0xfe979) [0x7fb040296979]
2016-12-27 15:07:09.691540|A| /tmp/local/lib/libgroonga.so.0(grn_obj_set_value+0x3ad) [0x7fb040299ce0]
2016-12-27 15:07:09.691543|A| /tmp/local/lib/libgroonga.so.0(+0x122519) [0x7fb0402ba519]
2016-12-27 15:07:09.691545|A| /tmp/local/lib/libgroonga.so.0(+0x122dad) [0x7fb0402badad]
2016-12-27 15:07:09.691547|A| /tmp/local/lib/libgroonga.so.0(grn_load_+0xc42) [0x7fb0402bdf66]
2016-12-27 15:07:09.691549|A| /tmp/local/lib/libgroonga.so.0(+0x402282) [0x7fb04059a282]
2016-12-27 15:07:09.691552|A| /tmp/local/lib/libgroonga.so.0(grn_proc_call+0x426) [0x7fb0402cf606]
2016-12-27 15:07:09.691554|A| /tmp/local/lib/libgroonga.so.0(grn_command_run+0xce) [0x7fb040253187]
2016-12-27 15:07:09.691556|A| /tmp/local/lib/libgroonga.so.0(grn_expr_exec+0x1a5) [0x7fb0402cfd22]
2016-12-27 15:07:09.691558|A| /tmp/local/lib/libgroonga.so.0(grn_ctx_send+0x4d0) [0x7fb04025c122]
2016-12-27 15:07:09.691560|A| /tmp/local/bin/groonga(+0x634b) [0x56001bf9334b]
2016-12-27 15:07:09.691563|A| /tmp/local/bin/groonga(+0x18008) [0x56001bfa5008]
2016-12-27 15:07:09.691581|e| [table][load] failed to set column value: [ii][update][one] failed to create a buffer2: <b.index>: <65537>:<1>:<65537>: size:<16>: key: <(NULL)>, column: <x>, value: <""00065536"">

変更あり：
[[0,1482814433.974035,0.04183840751647949],true]
[[0,1482814434.015956,0.05599784851074219],true]
[[0,1482814434.072021,0.04459285736083984],true]
[[0,1482814434.116677,0.08618617057800293],true]
[[0,1482814434.20292,272.1374449729919],900000]

-rw-r----- 1 kou kou 4.0K Dec 27 13:58 db
-rw-r----- 1 kou kou  21M Dec 27 13:58 db.0000000
-rw-r----- 1 kou kou 8.1M Dec 27 13:58 db.0000100
-rw-r----- 1 kou kou  17M Dec 27 13:58 db.0000101
-rw-r----- 1 kou kou  13M Dec 27 13:58 db.0000102
-rw-r----- 1 kou kou  22M Dec 27 13:58 db.0000103
-rw-r----- 1 kou kou  29M Dec 27 13:58 db.0000103.c
-rw-r----- 1 kou kou 1.0M Dec 27 13:53 db.001
-rw-r----- 1 kou kou  13M Dec 27 13:53 db.conf
-rw-r--r-- 1 kou kou  13K Dec 27 13:58 log
-rw-r--r-- 1 kou kou  787 Dec 27 13:58 query.log","既存の挙動が壊れているのでそもそもこのアプローチはよくなさそうです。。。
https://travis-ci.org/groonga/groonga/jobs/187655662",True,{}
groonga/groonga,https://github.com/groonga/groonga,617,2016-12-27T06:49:20Z,2016-12-30T12:40:46Z,2017-01-18T00:44:44Z,CLOSED,False,88,41,2,https://github.com/kou,ii: improve performance on buffer_new's worst case,2,[],https://github.com/groonga/groonga/pull/617,https://github.com/kou,6,https://github.com/groonga/groonga/pull/617#issuecomment-270065942,"See commit messages of 5b6129d and dd67962 about description of this case in English.
転置インデックスを更新するときにbuffer_new()をすることがありますが、データの内容・更新順序によって、すごく遅く、かつ、インデックスサイズがすごく増えることがあります。
どのような内容・更新順序かというと次のようなケースです。
table_create a TABLE_NO_KEY
column_create a x COLUMN_SCALAR ShortText
table_create b TABLE_PAT_KEY ShortText
column_create b index COLUMN_INDEX a x

load --table a
[
{""x"": ""00000000""},
{""x"": ""00000001""},
...
{""x"": ""00486036""},
{""x"": ""00000000""},
{""x"": ""00000001""},
...
{""x"": ""00413962""}
]

Rubyスクリプトだと次のようになります。
puts ""table_create a TABLE_NO_KEY""
puts ""column_create a x COLUMN_SCALAR ShortText""
puts ""table_create b TABLE_PAT_KEY ShortText""
puts ""column_create b index COLUMN_INDEX a x""

puts ""load --table a""
puts ""[""
n = 900_000
n.times do |i|
  i %= 486_037
  puts ""{\""x\"": \""#{i.to_s.rjust(8, '0')}\""},""
end
puts ""]""
buffer_new()の中で語彙表をカーソルで回して既存のbufferがないか探していますが、↑のケースだとカーソルを回しきっても既存のbufferが見つかりません。00486036のレコードが終わって2週目（2回目の00000000）に入ると、レコードが増えるごとにカーソルが返すレコード数が増えるのでbuffer_new()の時間がどんどん増えてインデックス更新が遅くなります。
また、既存のbufferが見つからないので毎回新しくbufferを作ります。このためインデックスサイズも大きくなります。
解決策として以下を提案します。

既存のbufferが見つからなかった場合に過去にgrn_ii_update_one()したときに新しく作ったbufferを使いまわせないかチェックする。

既存のbufferが見つからないケースを減らす。これでインデックスサイズの増加を抑えられる。


カーソルで回すレコード数を制限する。

既存のbufferを見つけられるケースが減ることがあるが、buffer_new()にかかる時間が一定以下に抑えられるので前述のケースでの速度劣化が抑えられる。
既存のbufferを見つけられない場合は↑の使いまわせないかチェックでフォローするので影響は軽微なはず。



前者の実装は 5b6129d です。
grn_iiに追加しているnext_buffer_candidate_tidが使いまわせないかチェック対象のbuffer（に紐付いているtid）です。
buffer_open_by_tid()はbuffer_open()のコードの一部を抜き出しただけでロジックは変えていません。
SPLIT_COND()が変わっているのはbufferがb以外の変数にも入れられるようにです。
後者の実装は dd67962 です。
EXISTING_BUFFER_FIND_LIMITの10000はなんとなくで決めました。特に計測したわけではありません。
この変更を入れる前と入れた後では実行時間・サイズは以下のように変わります。データは前述のRubyスクリプトを実行した結果です。それをgroongaコマンドで処理しました。



項目
変更なし
変更あり




実行時間
30分以上(*)
約4分30秒


サイズ
約15GB（1GB * 15 + 4.5MB + 4KB）
約51MB（22MB + 29MB）



(*) 30分を過ぎたくらいからエラー発生。50万件後半くらいから発生する。45分くらいたって65万件くらいしかロードできていない。
以下は生結果です。
変更なし：
[[0,1482816822.219858,0.04200315475463867],true]
[[0,1482816822.261966,0.05740857124328613],true]
[[0,1482816822.319439,0.04283547401428223],true]
[[0,1482816822.362304,0.07676839828491211],true]

# select a --limit 0
[[0,1482821246.286818,0.0002453327178955078],[[[649709],[[""_id"",""UInt32""],[""x"",""ShortText""]]]]]

-rw-r----- 1 kou kou 4.0K Dec 27 14:33 db
-rw-r----- 1 kou kou  21M Dec 27 15:47 db.0000000
-rw-r----- 1 kou kou 8.1M Dec 27 15:47 db.0000100
-rw-r----- 1 kou kou  17M Dec 27 15:07 db.0000101
-rw-r----- 1 kou kou  13M Dec 27 15:47 db.0000102
-rw-r----- 1 kou kou 1.0G Dec 27 15:47 db.0000103
-rw-r----- 1 kou kou 1.0G Dec 27 14:38 db.0000103.001
-rw-r----- 1 kou kou 1.0G Dec 27 14:40 db.0000103.002
-rw-r----- 1 kou kou 1.0G Dec 27 14:42 db.0000103.003
-rw-r----- 1 kou kou 1.0G Dec 27 14:44 db.0000103.004
-rw-r----- 1 kou kou 1.0G Dec 27 14:46 db.0000103.005
-rw-r----- 1 kou kou 1.0G Dec 27 14:48 db.0000103.006
-rw-r----- 1 kou kou 1.0G Dec 27 14:51 db.0000103.007
-rw-r----- 1 kou kou 1.0G Dec 27 14:53 db.0000103.008
-rw-r----- 1 kou kou 1.0G Dec 27 14:55 db.0000103.009
-rw-r----- 1 kou kou 1.0G Dec 27 14:57 db.0000103.00A
-rw-r----- 1 kou kou 1.0G Dec 27 14:59 db.0000103.00B
-rw-r----- 1 kou kou 1.0G Dec 27 15:01 db.0000103.00C
-rw-r----- 1 kou kou 1.0G Dec 27 15:03 db.0000103.00D
-rw-r----- 1 kou kou 1.0G Dec 27 15:05 db.0000103.00E
-rw-r----- 1 kou kou 1.0G Dec 27 15:07 db.0000103.00F
-rw-r----- 1 kou kou 4.5M Dec 27 15:07 db.0000103.010
-rw-r----- 1 kou kou 4.0K Dec 27 14:33 db.0000103.c
-rw-r----- 1 kou kou 1.0M Dec 27 14:33 db.001
-rw-r----- 1 kou kou  13M Dec 27 14:33 db.conf
-rw-r--r-- 1 kou kou 177M Dec 27 15:48 log
-rw-r--r-- 1 kou kou  634 Dec 27 14:33 query.log

エラーログ：
2016-12-27 15:07:09.642377|A| [ii][update][one] failed to create a buffer2: <b.index>: <65537>:<1>:<65537>: size:<16>
2016-12-27 15:07:09.691508|A| /tmp/local/lib/libgroonga.so.0(grn_ii_update_one+0x2229) [0x7fb0403ff47e]
2016-12-27 15:07:09.691530|A| /tmp/local/lib/libgroonga.so.0(grn_ii_column_update+0x2740) [0x7fb040408be2]
2016-12-27 15:07:09.691534|A| /tmp/local/lib/libgroonga.so.0(grn_obj_default_set_value_hook+0x2f9) [0x7fb040270a1e]
2016-12-27 15:07:09.691536|A| /tmp/local/lib/libgroonga.so.0(+0xfe4a2) [0x7fb0402964a2]
2016-12-27 15:07:09.691538|A| /tmp/local/lib/libgroonga.so.0(+0xfe979) [0x7fb040296979]
2016-12-27 15:07:09.691540|A| /tmp/local/lib/libgroonga.so.0(grn_obj_set_value+0x3ad) [0x7fb040299ce0]
2016-12-27 15:07:09.691543|A| /tmp/local/lib/libgroonga.so.0(+0x122519) [0x7fb0402ba519]
2016-12-27 15:07:09.691545|A| /tmp/local/lib/libgroonga.so.0(+0x122dad) [0x7fb0402badad]
2016-12-27 15:07:09.691547|A| /tmp/local/lib/libgroonga.so.0(grn_load_+0xc42) [0x7fb0402bdf66]
2016-12-27 15:07:09.691549|A| /tmp/local/lib/libgroonga.so.0(+0x402282) [0x7fb04059a282]
2016-12-27 15:07:09.691552|A| /tmp/local/lib/libgroonga.so.0(grn_proc_call+0x426) [0x7fb0402cf606]
2016-12-27 15:07:09.691554|A| /tmp/local/lib/libgroonga.so.0(grn_command_run+0xce) [0x7fb040253187]
2016-12-27 15:07:09.691556|A| /tmp/local/lib/libgroonga.so.0(grn_expr_exec+0x1a5) [0x7fb0402cfd22]
2016-12-27 15:07:09.691558|A| /tmp/local/lib/libgroonga.so.0(grn_ctx_send+0x4d0) [0x7fb04025c122]
2016-12-27 15:07:09.691560|A| /tmp/local/bin/groonga(+0x634b) [0x56001bf9334b]
2016-12-27 15:07:09.691563|A| /tmp/local/bin/groonga(+0x18008) [0x56001bfa5008]
2016-12-27 15:07:09.691581|e| [table][load] failed to set column value: [ii][update][one] failed to create a buffer2: <b.index>: <65537>:<1>:<65537>: size:<16>: key: <(NULL)>, column: <x>, value: <""00065536"">

変更あり：
[[0,1482814433.974035,0.04183840751647949],true]
[[0,1482814434.015956,0.05599784851074219],true]
[[0,1482814434.072021,0.04459285736083984],true]
[[0,1482814434.116677,0.08618617057800293],true]
[[0,1482814434.20292,272.1374449729919],900000]

-rw-r----- 1 kou kou 4.0K Dec 27 13:58 db
-rw-r----- 1 kou kou  21M Dec 27 13:58 db.0000000
-rw-r----- 1 kou kou 8.1M Dec 27 13:58 db.0000100
-rw-r----- 1 kou kou  17M Dec 27 13:58 db.0000101
-rw-r----- 1 kou kou  13M Dec 27 13:58 db.0000102
-rw-r----- 1 kou kou  22M Dec 27 13:58 db.0000103
-rw-r----- 1 kou kou  29M Dec 27 13:58 db.0000103.c
-rw-r----- 1 kou kou 1.0M Dec 27 13:53 db.001
-rw-r----- 1 kou kou  13M Dec 27 13:53 db.conf
-rw-r--r-- 1 kou kou  13K Dec 27 13:58 log
-rw-r--r-- 1 kou kou  787 Dec 27 13:58 query.log",キーにマルチバイト文字が含まれているときに1bitずつ減らしてgrn_table_open_cursor()すると不正なエンコーディングの文字列でノーマライズしようとしてエラーになるので一旦revertしました。,True,{}
groonga/groonga,https://github.com/groonga/groonga,617,2016-12-27T06:49:20Z,2016-12-30T12:40:46Z,2017-01-18T00:44:44Z,CLOSED,False,88,41,2,https://github.com/kou,ii: improve performance on buffer_new's worst case,2,[],https://github.com/groonga/groonga/pull/617,https://github.com/daijiro,7,https://github.com/groonga/groonga/pull/617#issuecomment-270557646,"See commit messages of 5b6129d and dd67962 about description of this case in English.
転置インデックスを更新するときにbuffer_new()をすることがありますが、データの内容・更新順序によって、すごく遅く、かつ、インデックスサイズがすごく増えることがあります。
どのような内容・更新順序かというと次のようなケースです。
table_create a TABLE_NO_KEY
column_create a x COLUMN_SCALAR ShortText
table_create b TABLE_PAT_KEY ShortText
column_create b index COLUMN_INDEX a x

load --table a
[
{""x"": ""00000000""},
{""x"": ""00000001""},
...
{""x"": ""00486036""},
{""x"": ""00000000""},
{""x"": ""00000001""},
...
{""x"": ""00413962""}
]

Rubyスクリプトだと次のようになります。
puts ""table_create a TABLE_NO_KEY""
puts ""column_create a x COLUMN_SCALAR ShortText""
puts ""table_create b TABLE_PAT_KEY ShortText""
puts ""column_create b index COLUMN_INDEX a x""

puts ""load --table a""
puts ""[""
n = 900_000
n.times do |i|
  i %= 486_037
  puts ""{\""x\"": \""#{i.to_s.rjust(8, '0')}\""},""
end
puts ""]""
buffer_new()の中で語彙表をカーソルで回して既存のbufferがないか探していますが、↑のケースだとカーソルを回しきっても既存のbufferが見つかりません。00486036のレコードが終わって2週目（2回目の00000000）に入ると、レコードが増えるごとにカーソルが返すレコード数が増えるのでbuffer_new()の時間がどんどん増えてインデックス更新が遅くなります。
また、既存のbufferが見つからないので毎回新しくbufferを作ります。このためインデックスサイズも大きくなります。
解決策として以下を提案します。

既存のbufferが見つからなかった場合に過去にgrn_ii_update_one()したときに新しく作ったbufferを使いまわせないかチェックする。

既存のbufferが見つからないケースを減らす。これでインデックスサイズの増加を抑えられる。


カーソルで回すレコード数を制限する。

既存のbufferを見つけられるケースが減ることがあるが、buffer_new()にかかる時間が一定以下に抑えられるので前述のケースでの速度劣化が抑えられる。
既存のbufferを見つけられない場合は↑の使いまわせないかチェックでフォローするので影響は軽微なはず。



前者の実装は 5b6129d です。
grn_iiに追加しているnext_buffer_candidate_tidが使いまわせないかチェック対象のbuffer（に紐付いているtid）です。
buffer_open_by_tid()はbuffer_open()のコードの一部を抜き出しただけでロジックは変えていません。
SPLIT_COND()が変わっているのはbufferがb以外の変数にも入れられるようにです。
後者の実装は dd67962 です。
EXISTING_BUFFER_FIND_LIMITの10000はなんとなくで決めました。特に計測したわけではありません。
この変更を入れる前と入れた後では実行時間・サイズは以下のように変わります。データは前述のRubyスクリプトを実行した結果です。それをgroongaコマンドで処理しました。



項目
変更なし
変更あり




実行時間
30分以上(*)
約4分30秒


サイズ
約15GB（1GB * 15 + 4.5MB + 4KB）
約51MB（22MB + 29MB）



(*) 30分を過ぎたくらいからエラー発生。50万件後半くらいから発生する。45分くらいたって65万件くらいしかロードできていない。
以下は生結果です。
変更なし：
[[0,1482816822.219858,0.04200315475463867],true]
[[0,1482816822.261966,0.05740857124328613],true]
[[0,1482816822.319439,0.04283547401428223],true]
[[0,1482816822.362304,0.07676839828491211],true]

# select a --limit 0
[[0,1482821246.286818,0.0002453327178955078],[[[649709],[[""_id"",""UInt32""],[""x"",""ShortText""]]]]]

-rw-r----- 1 kou kou 4.0K Dec 27 14:33 db
-rw-r----- 1 kou kou  21M Dec 27 15:47 db.0000000
-rw-r----- 1 kou kou 8.1M Dec 27 15:47 db.0000100
-rw-r----- 1 kou kou  17M Dec 27 15:07 db.0000101
-rw-r----- 1 kou kou  13M Dec 27 15:47 db.0000102
-rw-r----- 1 kou kou 1.0G Dec 27 15:47 db.0000103
-rw-r----- 1 kou kou 1.0G Dec 27 14:38 db.0000103.001
-rw-r----- 1 kou kou 1.0G Dec 27 14:40 db.0000103.002
-rw-r----- 1 kou kou 1.0G Dec 27 14:42 db.0000103.003
-rw-r----- 1 kou kou 1.0G Dec 27 14:44 db.0000103.004
-rw-r----- 1 kou kou 1.0G Dec 27 14:46 db.0000103.005
-rw-r----- 1 kou kou 1.0G Dec 27 14:48 db.0000103.006
-rw-r----- 1 kou kou 1.0G Dec 27 14:51 db.0000103.007
-rw-r----- 1 kou kou 1.0G Dec 27 14:53 db.0000103.008
-rw-r----- 1 kou kou 1.0G Dec 27 14:55 db.0000103.009
-rw-r----- 1 kou kou 1.0G Dec 27 14:57 db.0000103.00A
-rw-r----- 1 kou kou 1.0G Dec 27 14:59 db.0000103.00B
-rw-r----- 1 kou kou 1.0G Dec 27 15:01 db.0000103.00C
-rw-r----- 1 kou kou 1.0G Dec 27 15:03 db.0000103.00D
-rw-r----- 1 kou kou 1.0G Dec 27 15:05 db.0000103.00E
-rw-r----- 1 kou kou 1.0G Dec 27 15:07 db.0000103.00F
-rw-r----- 1 kou kou 4.5M Dec 27 15:07 db.0000103.010
-rw-r----- 1 kou kou 4.0K Dec 27 14:33 db.0000103.c
-rw-r----- 1 kou kou 1.0M Dec 27 14:33 db.001
-rw-r----- 1 kou kou  13M Dec 27 14:33 db.conf
-rw-r--r-- 1 kou kou 177M Dec 27 15:48 log
-rw-r--r-- 1 kou kou  634 Dec 27 14:33 query.log

エラーログ：
2016-12-27 15:07:09.642377|A| [ii][update][one] failed to create a buffer2: <b.index>: <65537>:<1>:<65537>: size:<16>
2016-12-27 15:07:09.691508|A| /tmp/local/lib/libgroonga.so.0(grn_ii_update_one+0x2229) [0x7fb0403ff47e]
2016-12-27 15:07:09.691530|A| /tmp/local/lib/libgroonga.so.0(grn_ii_column_update+0x2740) [0x7fb040408be2]
2016-12-27 15:07:09.691534|A| /tmp/local/lib/libgroonga.so.0(grn_obj_default_set_value_hook+0x2f9) [0x7fb040270a1e]
2016-12-27 15:07:09.691536|A| /tmp/local/lib/libgroonga.so.0(+0xfe4a2) [0x7fb0402964a2]
2016-12-27 15:07:09.691538|A| /tmp/local/lib/libgroonga.so.0(+0xfe979) [0x7fb040296979]
2016-12-27 15:07:09.691540|A| /tmp/local/lib/libgroonga.so.0(grn_obj_set_value+0x3ad) [0x7fb040299ce0]
2016-12-27 15:07:09.691543|A| /tmp/local/lib/libgroonga.so.0(+0x122519) [0x7fb0402ba519]
2016-12-27 15:07:09.691545|A| /tmp/local/lib/libgroonga.so.0(+0x122dad) [0x7fb0402badad]
2016-12-27 15:07:09.691547|A| /tmp/local/lib/libgroonga.so.0(grn_load_+0xc42) [0x7fb0402bdf66]
2016-12-27 15:07:09.691549|A| /tmp/local/lib/libgroonga.so.0(+0x402282) [0x7fb04059a282]
2016-12-27 15:07:09.691552|A| /tmp/local/lib/libgroonga.so.0(grn_proc_call+0x426) [0x7fb0402cf606]
2016-12-27 15:07:09.691554|A| /tmp/local/lib/libgroonga.so.0(grn_command_run+0xce) [0x7fb040253187]
2016-12-27 15:07:09.691556|A| /tmp/local/lib/libgroonga.so.0(grn_expr_exec+0x1a5) [0x7fb0402cfd22]
2016-12-27 15:07:09.691558|A| /tmp/local/lib/libgroonga.so.0(grn_ctx_send+0x4d0) [0x7fb04025c122]
2016-12-27 15:07:09.691560|A| /tmp/local/bin/groonga(+0x634b) [0x56001bf9334b]
2016-12-27 15:07:09.691563|A| /tmp/local/bin/groonga(+0x18008) [0x56001bfa5008]
2016-12-27 15:07:09.691581|e| [table][load] failed to set column value: [ii][update][one] failed to create a buffer2: <b.index>: <65537>:<1>:<65537>: size:<16>: key: <(NULL)>, column: <x>, value: <""00065536"">

変更あり：
[[0,1482814433.974035,0.04183840751647949],true]
[[0,1482814434.015956,0.05599784851074219],true]
[[0,1482814434.072021,0.04459285736083984],true]
[[0,1482814434.116677,0.08618617057800293],true]
[[0,1482814434.20292,272.1374449729919],900000]

-rw-r----- 1 kou kou 4.0K Dec 27 13:58 db
-rw-r----- 1 kou kou  21M Dec 27 13:58 db.0000000
-rw-r----- 1 kou kou 8.1M Dec 27 13:58 db.0000100
-rw-r----- 1 kou kou  17M Dec 27 13:58 db.0000101
-rw-r----- 1 kou kou  13M Dec 27 13:58 db.0000102
-rw-r----- 1 kou kou  22M Dec 27 13:58 db.0000103
-rw-r----- 1 kou kou  29M Dec 27 13:58 db.0000103.c
-rw-r----- 1 kou kou 1.0M Dec 27 13:53 db.001
-rw-r----- 1 kou kou  13M Dec 27 13:53 db.conf
-rw-r--r-- 1 kou kou  13K Dec 27 13:58 log
-rw-r--r-- 1 kou kou  787 Dec 27 13:58 query.log","とりあえずnormalizeを通さずにカーソルを回すのがいいんじゃないでしょうか。
あと、bit単位じゃなくてbyte単位でも良いかもですね。",True,{}
groonga/groonga,https://github.com/groonga/groonga,617,2016-12-27T06:49:20Z,2016-12-30T12:40:46Z,2017-01-18T00:44:44Z,CLOSED,False,88,41,2,https://github.com/kou,ii: improve performance on buffer_new's worst case,2,[],https://github.com/groonga/groonga/pull/617,https://github.com/kou,8,https://github.com/groonga/groonga/pull/617#issuecomment-272786438,"See commit messages of 5b6129d and dd67962 about description of this case in English.
転置インデックスを更新するときにbuffer_new()をすることがありますが、データの内容・更新順序によって、すごく遅く、かつ、インデックスサイズがすごく増えることがあります。
どのような内容・更新順序かというと次のようなケースです。
table_create a TABLE_NO_KEY
column_create a x COLUMN_SCALAR ShortText
table_create b TABLE_PAT_KEY ShortText
column_create b index COLUMN_INDEX a x

load --table a
[
{""x"": ""00000000""},
{""x"": ""00000001""},
...
{""x"": ""00486036""},
{""x"": ""00000000""},
{""x"": ""00000001""},
...
{""x"": ""00413962""}
]

Rubyスクリプトだと次のようになります。
puts ""table_create a TABLE_NO_KEY""
puts ""column_create a x COLUMN_SCALAR ShortText""
puts ""table_create b TABLE_PAT_KEY ShortText""
puts ""column_create b index COLUMN_INDEX a x""

puts ""load --table a""
puts ""[""
n = 900_000
n.times do |i|
  i %= 486_037
  puts ""{\""x\"": \""#{i.to_s.rjust(8, '0')}\""},""
end
puts ""]""
buffer_new()の中で語彙表をカーソルで回して既存のbufferがないか探していますが、↑のケースだとカーソルを回しきっても既存のbufferが見つかりません。00486036のレコードが終わって2週目（2回目の00000000）に入ると、レコードが増えるごとにカーソルが返すレコード数が増えるのでbuffer_new()の時間がどんどん増えてインデックス更新が遅くなります。
また、既存のbufferが見つからないので毎回新しくbufferを作ります。このためインデックスサイズも大きくなります。
解決策として以下を提案します。

既存のbufferが見つからなかった場合に過去にgrn_ii_update_one()したときに新しく作ったbufferを使いまわせないかチェックする。

既存のbufferが見つからないケースを減らす。これでインデックスサイズの増加を抑えられる。


カーソルで回すレコード数を制限する。

既存のbufferを見つけられるケースが減ることがあるが、buffer_new()にかかる時間が一定以下に抑えられるので前述のケースでの速度劣化が抑えられる。
既存のbufferを見つけられない場合は↑の使いまわせないかチェックでフォローするので影響は軽微なはず。



前者の実装は 5b6129d です。
grn_iiに追加しているnext_buffer_candidate_tidが使いまわせないかチェック対象のbuffer（に紐付いているtid）です。
buffer_open_by_tid()はbuffer_open()のコードの一部を抜き出しただけでロジックは変えていません。
SPLIT_COND()が変わっているのはbufferがb以外の変数にも入れられるようにです。
後者の実装は dd67962 です。
EXISTING_BUFFER_FIND_LIMITの10000はなんとなくで決めました。特に計測したわけではありません。
この変更を入れる前と入れた後では実行時間・サイズは以下のように変わります。データは前述のRubyスクリプトを実行した結果です。それをgroongaコマンドで処理しました。



項目
変更なし
変更あり




実行時間
30分以上(*)
約4分30秒


サイズ
約15GB（1GB * 15 + 4.5MB + 4KB）
約51MB（22MB + 29MB）



(*) 30分を過ぎたくらいからエラー発生。50万件後半くらいから発生する。45分くらいたって65万件くらいしかロードできていない。
以下は生結果です。
変更なし：
[[0,1482816822.219858,0.04200315475463867],true]
[[0,1482816822.261966,0.05740857124328613],true]
[[0,1482816822.319439,0.04283547401428223],true]
[[0,1482816822.362304,0.07676839828491211],true]

# select a --limit 0
[[0,1482821246.286818,0.0002453327178955078],[[[649709],[[""_id"",""UInt32""],[""x"",""ShortText""]]]]]

-rw-r----- 1 kou kou 4.0K Dec 27 14:33 db
-rw-r----- 1 kou kou  21M Dec 27 15:47 db.0000000
-rw-r----- 1 kou kou 8.1M Dec 27 15:47 db.0000100
-rw-r----- 1 kou kou  17M Dec 27 15:07 db.0000101
-rw-r----- 1 kou kou  13M Dec 27 15:47 db.0000102
-rw-r----- 1 kou kou 1.0G Dec 27 15:47 db.0000103
-rw-r----- 1 kou kou 1.0G Dec 27 14:38 db.0000103.001
-rw-r----- 1 kou kou 1.0G Dec 27 14:40 db.0000103.002
-rw-r----- 1 kou kou 1.0G Dec 27 14:42 db.0000103.003
-rw-r----- 1 kou kou 1.0G Dec 27 14:44 db.0000103.004
-rw-r----- 1 kou kou 1.0G Dec 27 14:46 db.0000103.005
-rw-r----- 1 kou kou 1.0G Dec 27 14:48 db.0000103.006
-rw-r----- 1 kou kou 1.0G Dec 27 14:51 db.0000103.007
-rw-r----- 1 kou kou 1.0G Dec 27 14:53 db.0000103.008
-rw-r----- 1 kou kou 1.0G Dec 27 14:55 db.0000103.009
-rw-r----- 1 kou kou 1.0G Dec 27 14:57 db.0000103.00A
-rw-r----- 1 kou kou 1.0G Dec 27 14:59 db.0000103.00B
-rw-r----- 1 kou kou 1.0G Dec 27 15:01 db.0000103.00C
-rw-r----- 1 kou kou 1.0G Dec 27 15:03 db.0000103.00D
-rw-r----- 1 kou kou 1.0G Dec 27 15:05 db.0000103.00E
-rw-r----- 1 kou kou 1.0G Dec 27 15:07 db.0000103.00F
-rw-r----- 1 kou kou 4.5M Dec 27 15:07 db.0000103.010
-rw-r----- 1 kou kou 4.0K Dec 27 14:33 db.0000103.c
-rw-r----- 1 kou kou 1.0M Dec 27 14:33 db.001
-rw-r----- 1 kou kou  13M Dec 27 14:33 db.conf
-rw-r--r-- 1 kou kou 177M Dec 27 15:48 log
-rw-r--r-- 1 kou kou  634 Dec 27 14:33 query.log

エラーログ：
2016-12-27 15:07:09.642377|A| [ii][update][one] failed to create a buffer2: <b.index>: <65537>:<1>:<65537>: size:<16>
2016-12-27 15:07:09.691508|A| /tmp/local/lib/libgroonga.so.0(grn_ii_update_one+0x2229) [0x7fb0403ff47e]
2016-12-27 15:07:09.691530|A| /tmp/local/lib/libgroonga.so.0(grn_ii_column_update+0x2740) [0x7fb040408be2]
2016-12-27 15:07:09.691534|A| /tmp/local/lib/libgroonga.so.0(grn_obj_default_set_value_hook+0x2f9) [0x7fb040270a1e]
2016-12-27 15:07:09.691536|A| /tmp/local/lib/libgroonga.so.0(+0xfe4a2) [0x7fb0402964a2]
2016-12-27 15:07:09.691538|A| /tmp/local/lib/libgroonga.so.0(+0xfe979) [0x7fb040296979]
2016-12-27 15:07:09.691540|A| /tmp/local/lib/libgroonga.so.0(grn_obj_set_value+0x3ad) [0x7fb040299ce0]
2016-12-27 15:07:09.691543|A| /tmp/local/lib/libgroonga.so.0(+0x122519) [0x7fb0402ba519]
2016-12-27 15:07:09.691545|A| /tmp/local/lib/libgroonga.so.0(+0x122dad) [0x7fb0402badad]
2016-12-27 15:07:09.691547|A| /tmp/local/lib/libgroonga.so.0(grn_load_+0xc42) [0x7fb0402bdf66]
2016-12-27 15:07:09.691549|A| /tmp/local/lib/libgroonga.so.0(+0x402282) [0x7fb04059a282]
2016-12-27 15:07:09.691552|A| /tmp/local/lib/libgroonga.so.0(grn_proc_call+0x426) [0x7fb0402cf606]
2016-12-27 15:07:09.691554|A| /tmp/local/lib/libgroonga.so.0(grn_command_run+0xce) [0x7fb040253187]
2016-12-27 15:07:09.691556|A| /tmp/local/lib/libgroonga.so.0(grn_expr_exec+0x1a5) [0x7fb0402cfd22]
2016-12-27 15:07:09.691558|A| /tmp/local/lib/libgroonga.so.0(grn_ctx_send+0x4d0) [0x7fb04025c122]
2016-12-27 15:07:09.691560|A| /tmp/local/bin/groonga(+0x634b) [0x56001bf9334b]
2016-12-27 15:07:09.691563|A| /tmp/local/bin/groonga(+0x18008) [0x56001bfa5008]
2016-12-27 15:07:09.691581|e| [table][load] failed to set column value: [ii][update][one] failed to create a buffer2: <b.index>: <65537>:<1>:<65537>: size:<16>: key: <(NULL)>, column: <x>, value: <""00065536"">

変更あり：
[[0,1482814433.974035,0.04183840751647949],true]
[[0,1482814434.015956,0.05599784851074219],true]
[[0,1482814434.072021,0.04459285736083984],true]
[[0,1482814434.116677,0.08618617057800293],true]
[[0,1482814434.20292,272.1374449729919],900000]

-rw-r----- 1 kou kou 4.0K Dec 27 13:58 db
-rw-r----- 1 kou kou  21M Dec 27 13:58 db.0000000
-rw-r----- 1 kou kou 8.1M Dec 27 13:58 db.0000100
-rw-r----- 1 kou kou  17M Dec 27 13:58 db.0000101
-rw-r----- 1 kou kou  13M Dec 27 13:58 db.0000102
-rw-r----- 1 kou kou  22M Dec 27 13:58 db.0000103
-rw-r----- 1 kou kou  29M Dec 27 13:58 db.0000103.c
-rw-r----- 1 kou kou 1.0M Dec 27 13:53 db.001
-rw-r----- 1 kou kou  13M Dec 27 13:53 db.conf
-rw-r--r-- 1 kou kou  13K Dec 27 13:58 log
-rw-r--r-- 1 kou kou  787 Dec 27 13:58 query.log",その方向でやってみます！,True,{}
groonga/groonga,https://github.com/groonga/groonga,617,2016-12-27T06:49:20Z,2016-12-30T12:40:46Z,2017-01-18T00:44:44Z,CLOSED,False,88,41,2,https://github.com/kou,ii: improve performance on buffer_new's worst case,2,[],https://github.com/groonga/groonga/pull/617,https://github.com/kou,9,https://github.com/groonga/groonga/pull/617#issuecomment-272798400,"See commit messages of 5b6129d and dd67962 about description of this case in English.
転置インデックスを更新するときにbuffer_new()をすることがありますが、データの内容・更新順序によって、すごく遅く、かつ、インデックスサイズがすごく増えることがあります。
どのような内容・更新順序かというと次のようなケースです。
table_create a TABLE_NO_KEY
column_create a x COLUMN_SCALAR ShortText
table_create b TABLE_PAT_KEY ShortText
column_create b index COLUMN_INDEX a x

load --table a
[
{""x"": ""00000000""},
{""x"": ""00000001""},
...
{""x"": ""00486036""},
{""x"": ""00000000""},
{""x"": ""00000001""},
...
{""x"": ""00413962""}
]

Rubyスクリプトだと次のようになります。
puts ""table_create a TABLE_NO_KEY""
puts ""column_create a x COLUMN_SCALAR ShortText""
puts ""table_create b TABLE_PAT_KEY ShortText""
puts ""column_create b index COLUMN_INDEX a x""

puts ""load --table a""
puts ""[""
n = 900_000
n.times do |i|
  i %= 486_037
  puts ""{\""x\"": \""#{i.to_s.rjust(8, '0')}\""},""
end
puts ""]""
buffer_new()の中で語彙表をカーソルで回して既存のbufferがないか探していますが、↑のケースだとカーソルを回しきっても既存のbufferが見つかりません。00486036のレコードが終わって2週目（2回目の00000000）に入ると、レコードが増えるごとにカーソルが返すレコード数が増えるのでbuffer_new()の時間がどんどん増えてインデックス更新が遅くなります。
また、既存のbufferが見つからないので毎回新しくbufferを作ります。このためインデックスサイズも大きくなります。
解決策として以下を提案します。

既存のbufferが見つからなかった場合に過去にgrn_ii_update_one()したときに新しく作ったbufferを使いまわせないかチェックする。

既存のbufferが見つからないケースを減らす。これでインデックスサイズの増加を抑えられる。


カーソルで回すレコード数を制限する。

既存のbufferを見つけられるケースが減ることがあるが、buffer_new()にかかる時間が一定以下に抑えられるので前述のケースでの速度劣化が抑えられる。
既存のbufferを見つけられない場合は↑の使いまわせないかチェックでフォローするので影響は軽微なはず。



前者の実装は 5b6129d です。
grn_iiに追加しているnext_buffer_candidate_tidが使いまわせないかチェック対象のbuffer（に紐付いているtid）です。
buffer_open_by_tid()はbuffer_open()のコードの一部を抜き出しただけでロジックは変えていません。
SPLIT_COND()が変わっているのはbufferがb以外の変数にも入れられるようにです。
後者の実装は dd67962 です。
EXISTING_BUFFER_FIND_LIMITの10000はなんとなくで決めました。特に計測したわけではありません。
この変更を入れる前と入れた後では実行時間・サイズは以下のように変わります。データは前述のRubyスクリプトを実行した結果です。それをgroongaコマンドで処理しました。



項目
変更なし
変更あり




実行時間
30分以上(*)
約4分30秒


サイズ
約15GB（1GB * 15 + 4.5MB + 4KB）
約51MB（22MB + 29MB）



(*) 30分を過ぎたくらいからエラー発生。50万件後半くらいから発生する。45分くらいたって65万件くらいしかロードできていない。
以下は生結果です。
変更なし：
[[0,1482816822.219858,0.04200315475463867],true]
[[0,1482816822.261966,0.05740857124328613],true]
[[0,1482816822.319439,0.04283547401428223],true]
[[0,1482816822.362304,0.07676839828491211],true]

# select a --limit 0
[[0,1482821246.286818,0.0002453327178955078],[[[649709],[[""_id"",""UInt32""],[""x"",""ShortText""]]]]]

-rw-r----- 1 kou kou 4.0K Dec 27 14:33 db
-rw-r----- 1 kou kou  21M Dec 27 15:47 db.0000000
-rw-r----- 1 kou kou 8.1M Dec 27 15:47 db.0000100
-rw-r----- 1 kou kou  17M Dec 27 15:07 db.0000101
-rw-r----- 1 kou kou  13M Dec 27 15:47 db.0000102
-rw-r----- 1 kou kou 1.0G Dec 27 15:47 db.0000103
-rw-r----- 1 kou kou 1.0G Dec 27 14:38 db.0000103.001
-rw-r----- 1 kou kou 1.0G Dec 27 14:40 db.0000103.002
-rw-r----- 1 kou kou 1.0G Dec 27 14:42 db.0000103.003
-rw-r----- 1 kou kou 1.0G Dec 27 14:44 db.0000103.004
-rw-r----- 1 kou kou 1.0G Dec 27 14:46 db.0000103.005
-rw-r----- 1 kou kou 1.0G Dec 27 14:48 db.0000103.006
-rw-r----- 1 kou kou 1.0G Dec 27 14:51 db.0000103.007
-rw-r----- 1 kou kou 1.0G Dec 27 14:53 db.0000103.008
-rw-r----- 1 kou kou 1.0G Dec 27 14:55 db.0000103.009
-rw-r----- 1 kou kou 1.0G Dec 27 14:57 db.0000103.00A
-rw-r----- 1 kou kou 1.0G Dec 27 14:59 db.0000103.00B
-rw-r----- 1 kou kou 1.0G Dec 27 15:01 db.0000103.00C
-rw-r----- 1 kou kou 1.0G Dec 27 15:03 db.0000103.00D
-rw-r----- 1 kou kou 1.0G Dec 27 15:05 db.0000103.00E
-rw-r----- 1 kou kou 1.0G Dec 27 15:07 db.0000103.00F
-rw-r----- 1 kou kou 4.5M Dec 27 15:07 db.0000103.010
-rw-r----- 1 kou kou 4.0K Dec 27 14:33 db.0000103.c
-rw-r----- 1 kou kou 1.0M Dec 27 14:33 db.001
-rw-r----- 1 kou kou  13M Dec 27 14:33 db.conf
-rw-r--r-- 1 kou kou 177M Dec 27 15:48 log
-rw-r--r-- 1 kou kou  634 Dec 27 14:33 query.log

エラーログ：
2016-12-27 15:07:09.642377|A| [ii][update][one] failed to create a buffer2: <b.index>: <65537>:<1>:<65537>: size:<16>
2016-12-27 15:07:09.691508|A| /tmp/local/lib/libgroonga.so.0(grn_ii_update_one+0x2229) [0x7fb0403ff47e]
2016-12-27 15:07:09.691530|A| /tmp/local/lib/libgroonga.so.0(grn_ii_column_update+0x2740) [0x7fb040408be2]
2016-12-27 15:07:09.691534|A| /tmp/local/lib/libgroonga.so.0(grn_obj_default_set_value_hook+0x2f9) [0x7fb040270a1e]
2016-12-27 15:07:09.691536|A| /tmp/local/lib/libgroonga.so.0(+0xfe4a2) [0x7fb0402964a2]
2016-12-27 15:07:09.691538|A| /tmp/local/lib/libgroonga.so.0(+0xfe979) [0x7fb040296979]
2016-12-27 15:07:09.691540|A| /tmp/local/lib/libgroonga.so.0(grn_obj_set_value+0x3ad) [0x7fb040299ce0]
2016-12-27 15:07:09.691543|A| /tmp/local/lib/libgroonga.so.0(+0x122519) [0x7fb0402ba519]
2016-12-27 15:07:09.691545|A| /tmp/local/lib/libgroonga.so.0(+0x122dad) [0x7fb0402badad]
2016-12-27 15:07:09.691547|A| /tmp/local/lib/libgroonga.so.0(grn_load_+0xc42) [0x7fb0402bdf66]
2016-12-27 15:07:09.691549|A| /tmp/local/lib/libgroonga.so.0(+0x402282) [0x7fb04059a282]
2016-12-27 15:07:09.691552|A| /tmp/local/lib/libgroonga.so.0(grn_proc_call+0x426) [0x7fb0402cf606]
2016-12-27 15:07:09.691554|A| /tmp/local/lib/libgroonga.so.0(grn_command_run+0xce) [0x7fb040253187]
2016-12-27 15:07:09.691556|A| /tmp/local/lib/libgroonga.so.0(grn_expr_exec+0x1a5) [0x7fb0402cfd22]
2016-12-27 15:07:09.691558|A| /tmp/local/lib/libgroonga.so.0(grn_ctx_send+0x4d0) [0x7fb04025c122]
2016-12-27 15:07:09.691560|A| /tmp/local/bin/groonga(+0x634b) [0x56001bf9334b]
2016-12-27 15:07:09.691563|A| /tmp/local/bin/groonga(+0x18008) [0x56001bfa5008]
2016-12-27 15:07:09.691581|e| [table][load] failed to set column value: [ii][update][one] failed to create a buffer2: <b.index>: <65537>:<1>:<65537>: size:<16>: key: <(NULL)>, column: <x>, value: <""00065536"">

変更あり：
[[0,1482814433.974035,0.04183840751647949],true]
[[0,1482814434.015956,0.05599784851074219],true]
[[0,1482814434.072021,0.04459285736083984],true]
[[0,1482814434.116677,0.08618617057800293],true]
[[0,1482814434.20292,272.1374449729919],900000]

-rw-r----- 1 kou kou 4.0K Dec 27 13:58 db
-rw-r----- 1 kou kou  21M Dec 27 13:58 db.0000000
-rw-r----- 1 kou kou 8.1M Dec 27 13:58 db.0000100
-rw-r----- 1 kou kou  17M Dec 27 13:58 db.0000101
-rw-r----- 1 kou kou  13M Dec 27 13:58 db.0000102
-rw-r----- 1 kou kou  22M Dec 27 13:58 db.0000103
-rw-r----- 1 kou kou  29M Dec 27 13:58 db.0000103.c
-rw-r----- 1 kou kou 1.0M Dec 27 13:53 db.001
-rw-r----- 1 kou kou  13M Dec 27 13:53 db.conf
-rw-r--r-- 1 kou kou  13K Dec 27 13:58 log
-rw-r--r-- 1 kou kou  787 Dec 27 13:58 query.log","その方向で実装してみたので動作チェックとパフォーマンス測定をしてみる。
単体テストは失敗しなくなった。パフォーマンスはここに書いてあるケースは速くなった。",True,{}
groonga/groonga,https://github.com/groonga/groonga,617,2016-12-27T06:49:20Z,2016-12-30T12:40:46Z,2017-01-18T00:44:44Z,CLOSED,False,88,41,2,https://github.com/kou,ii: improve performance on buffer_new's worst case,2,[],https://github.com/groonga/groonga/pull/617,https://github.com/kou,10,https://github.com/groonga/groonga/pull/617#issuecomment-272798521,"See commit messages of 5b6129d and dd67962 about description of this case in English.
転置インデックスを更新するときにbuffer_new()をすることがありますが、データの内容・更新順序によって、すごく遅く、かつ、インデックスサイズがすごく増えることがあります。
どのような内容・更新順序かというと次のようなケースです。
table_create a TABLE_NO_KEY
column_create a x COLUMN_SCALAR ShortText
table_create b TABLE_PAT_KEY ShortText
column_create b index COLUMN_INDEX a x

load --table a
[
{""x"": ""00000000""},
{""x"": ""00000001""},
...
{""x"": ""00486036""},
{""x"": ""00000000""},
{""x"": ""00000001""},
...
{""x"": ""00413962""}
]

Rubyスクリプトだと次のようになります。
puts ""table_create a TABLE_NO_KEY""
puts ""column_create a x COLUMN_SCALAR ShortText""
puts ""table_create b TABLE_PAT_KEY ShortText""
puts ""column_create b index COLUMN_INDEX a x""

puts ""load --table a""
puts ""[""
n = 900_000
n.times do |i|
  i %= 486_037
  puts ""{\""x\"": \""#{i.to_s.rjust(8, '0')}\""},""
end
puts ""]""
buffer_new()の中で語彙表をカーソルで回して既存のbufferがないか探していますが、↑のケースだとカーソルを回しきっても既存のbufferが見つかりません。00486036のレコードが終わって2週目（2回目の00000000）に入ると、レコードが増えるごとにカーソルが返すレコード数が増えるのでbuffer_new()の時間がどんどん増えてインデックス更新が遅くなります。
また、既存のbufferが見つからないので毎回新しくbufferを作ります。このためインデックスサイズも大きくなります。
解決策として以下を提案します。

既存のbufferが見つからなかった場合に過去にgrn_ii_update_one()したときに新しく作ったbufferを使いまわせないかチェックする。

既存のbufferが見つからないケースを減らす。これでインデックスサイズの増加を抑えられる。


カーソルで回すレコード数を制限する。

既存のbufferを見つけられるケースが減ることがあるが、buffer_new()にかかる時間が一定以下に抑えられるので前述のケースでの速度劣化が抑えられる。
既存のbufferを見つけられない場合は↑の使いまわせないかチェックでフォローするので影響は軽微なはず。



前者の実装は 5b6129d です。
grn_iiに追加しているnext_buffer_candidate_tidが使いまわせないかチェック対象のbuffer（に紐付いているtid）です。
buffer_open_by_tid()はbuffer_open()のコードの一部を抜き出しただけでロジックは変えていません。
SPLIT_COND()が変わっているのはbufferがb以外の変数にも入れられるようにです。
後者の実装は dd67962 です。
EXISTING_BUFFER_FIND_LIMITの10000はなんとなくで決めました。特に計測したわけではありません。
この変更を入れる前と入れた後では実行時間・サイズは以下のように変わります。データは前述のRubyスクリプトを実行した結果です。それをgroongaコマンドで処理しました。



項目
変更なし
変更あり




実行時間
30分以上(*)
約4分30秒


サイズ
約15GB（1GB * 15 + 4.5MB + 4KB）
約51MB（22MB + 29MB）



(*) 30分を過ぎたくらいからエラー発生。50万件後半くらいから発生する。45分くらいたって65万件くらいしかロードできていない。
以下は生結果です。
変更なし：
[[0,1482816822.219858,0.04200315475463867],true]
[[0,1482816822.261966,0.05740857124328613],true]
[[0,1482816822.319439,0.04283547401428223],true]
[[0,1482816822.362304,0.07676839828491211],true]

# select a --limit 0
[[0,1482821246.286818,0.0002453327178955078],[[[649709],[[""_id"",""UInt32""],[""x"",""ShortText""]]]]]

-rw-r----- 1 kou kou 4.0K Dec 27 14:33 db
-rw-r----- 1 kou kou  21M Dec 27 15:47 db.0000000
-rw-r----- 1 kou kou 8.1M Dec 27 15:47 db.0000100
-rw-r----- 1 kou kou  17M Dec 27 15:07 db.0000101
-rw-r----- 1 kou kou  13M Dec 27 15:47 db.0000102
-rw-r----- 1 kou kou 1.0G Dec 27 15:47 db.0000103
-rw-r----- 1 kou kou 1.0G Dec 27 14:38 db.0000103.001
-rw-r----- 1 kou kou 1.0G Dec 27 14:40 db.0000103.002
-rw-r----- 1 kou kou 1.0G Dec 27 14:42 db.0000103.003
-rw-r----- 1 kou kou 1.0G Dec 27 14:44 db.0000103.004
-rw-r----- 1 kou kou 1.0G Dec 27 14:46 db.0000103.005
-rw-r----- 1 kou kou 1.0G Dec 27 14:48 db.0000103.006
-rw-r----- 1 kou kou 1.0G Dec 27 14:51 db.0000103.007
-rw-r----- 1 kou kou 1.0G Dec 27 14:53 db.0000103.008
-rw-r----- 1 kou kou 1.0G Dec 27 14:55 db.0000103.009
-rw-r----- 1 kou kou 1.0G Dec 27 14:57 db.0000103.00A
-rw-r----- 1 kou kou 1.0G Dec 27 14:59 db.0000103.00B
-rw-r----- 1 kou kou 1.0G Dec 27 15:01 db.0000103.00C
-rw-r----- 1 kou kou 1.0G Dec 27 15:03 db.0000103.00D
-rw-r----- 1 kou kou 1.0G Dec 27 15:05 db.0000103.00E
-rw-r----- 1 kou kou 1.0G Dec 27 15:07 db.0000103.00F
-rw-r----- 1 kou kou 4.5M Dec 27 15:07 db.0000103.010
-rw-r----- 1 kou kou 4.0K Dec 27 14:33 db.0000103.c
-rw-r----- 1 kou kou 1.0M Dec 27 14:33 db.001
-rw-r----- 1 kou kou  13M Dec 27 14:33 db.conf
-rw-r--r-- 1 kou kou 177M Dec 27 15:48 log
-rw-r--r-- 1 kou kou  634 Dec 27 14:33 query.log

エラーログ：
2016-12-27 15:07:09.642377|A| [ii][update][one] failed to create a buffer2: <b.index>: <65537>:<1>:<65537>: size:<16>
2016-12-27 15:07:09.691508|A| /tmp/local/lib/libgroonga.so.0(grn_ii_update_one+0x2229) [0x7fb0403ff47e]
2016-12-27 15:07:09.691530|A| /tmp/local/lib/libgroonga.so.0(grn_ii_column_update+0x2740) [0x7fb040408be2]
2016-12-27 15:07:09.691534|A| /tmp/local/lib/libgroonga.so.0(grn_obj_default_set_value_hook+0x2f9) [0x7fb040270a1e]
2016-12-27 15:07:09.691536|A| /tmp/local/lib/libgroonga.so.0(+0xfe4a2) [0x7fb0402964a2]
2016-12-27 15:07:09.691538|A| /tmp/local/lib/libgroonga.so.0(+0xfe979) [0x7fb040296979]
2016-12-27 15:07:09.691540|A| /tmp/local/lib/libgroonga.so.0(grn_obj_set_value+0x3ad) [0x7fb040299ce0]
2016-12-27 15:07:09.691543|A| /tmp/local/lib/libgroonga.so.0(+0x122519) [0x7fb0402ba519]
2016-12-27 15:07:09.691545|A| /tmp/local/lib/libgroonga.so.0(+0x122dad) [0x7fb0402badad]
2016-12-27 15:07:09.691547|A| /tmp/local/lib/libgroonga.so.0(grn_load_+0xc42) [0x7fb0402bdf66]
2016-12-27 15:07:09.691549|A| /tmp/local/lib/libgroonga.so.0(+0x402282) [0x7fb04059a282]
2016-12-27 15:07:09.691552|A| /tmp/local/lib/libgroonga.so.0(grn_proc_call+0x426) [0x7fb0402cf606]
2016-12-27 15:07:09.691554|A| /tmp/local/lib/libgroonga.so.0(grn_command_run+0xce) [0x7fb040253187]
2016-12-27 15:07:09.691556|A| /tmp/local/lib/libgroonga.so.0(grn_expr_exec+0x1a5) [0x7fb0402cfd22]
2016-12-27 15:07:09.691558|A| /tmp/local/lib/libgroonga.so.0(grn_ctx_send+0x4d0) [0x7fb04025c122]
2016-12-27 15:07:09.691560|A| /tmp/local/bin/groonga(+0x634b) [0x56001bf9334b]
2016-12-27 15:07:09.691563|A| /tmp/local/bin/groonga(+0x18008) [0x56001bfa5008]
2016-12-27 15:07:09.691581|e| [table][load] failed to set column value: [ii][update][one] failed to create a buffer2: <b.index>: <65537>:<1>:<65537>: size:<16>: key: <(NULL)>, column: <x>, value: <""00065536"">

変更あり：
[[0,1482814433.974035,0.04183840751647949],true]
[[0,1482814434.015956,0.05599784851074219],true]
[[0,1482814434.072021,0.04459285736083984],true]
[[0,1482814434.116677,0.08618617057800293],true]
[[0,1482814434.20292,272.1374449729919],900000]

-rw-r----- 1 kou kou 4.0K Dec 27 13:58 db
-rw-r----- 1 kou kou  21M Dec 27 13:58 db.0000000
-rw-r----- 1 kou kou 8.1M Dec 27 13:58 db.0000100
-rw-r----- 1 kou kou  17M Dec 27 13:58 db.0000101
-rw-r----- 1 kou kou  13M Dec 27 13:58 db.0000102
-rw-r----- 1 kou kou  22M Dec 27 13:58 db.0000103
-rw-r----- 1 kou kou  29M Dec 27 13:58 db.0000103.c
-rw-r----- 1 kou kou 1.0M Dec 27 13:53 db.001
-rw-r----- 1 kou kou  13M Dec 27 13:53 db.conf
-rw-r--r-- 1 kou kou  13K Dec 27 13:58 log
-rw-r--r-- 1 kou kou  787 Dec 27 13:58 query.log",↑はとりあえずの結果。後でちゃんとやる。,True,{}
groonga/groonga,https://github.com/groonga/groonga,617,2016-12-27T06:49:20Z,2016-12-30T12:40:46Z,2017-01-18T00:44:44Z,CLOSED,False,88,41,2,https://github.com/kou,ii: improve performance on buffer_new's worst case,2,[],https://github.com/groonga/groonga/pull/617,https://github.com/kou,11,https://github.com/groonga/groonga/pull/617#issuecomment-273343367,"See commit messages of 5b6129d and dd67962 about description of this case in English.
転置インデックスを更新するときにbuffer_new()をすることがありますが、データの内容・更新順序によって、すごく遅く、かつ、インデックスサイズがすごく増えることがあります。
どのような内容・更新順序かというと次のようなケースです。
table_create a TABLE_NO_KEY
column_create a x COLUMN_SCALAR ShortText
table_create b TABLE_PAT_KEY ShortText
column_create b index COLUMN_INDEX a x

load --table a
[
{""x"": ""00000000""},
{""x"": ""00000001""},
...
{""x"": ""00486036""},
{""x"": ""00000000""},
{""x"": ""00000001""},
...
{""x"": ""00413962""}
]

Rubyスクリプトだと次のようになります。
puts ""table_create a TABLE_NO_KEY""
puts ""column_create a x COLUMN_SCALAR ShortText""
puts ""table_create b TABLE_PAT_KEY ShortText""
puts ""column_create b index COLUMN_INDEX a x""

puts ""load --table a""
puts ""[""
n = 900_000
n.times do |i|
  i %= 486_037
  puts ""{\""x\"": \""#{i.to_s.rjust(8, '0')}\""},""
end
puts ""]""
buffer_new()の中で語彙表をカーソルで回して既存のbufferがないか探していますが、↑のケースだとカーソルを回しきっても既存のbufferが見つかりません。00486036のレコードが終わって2週目（2回目の00000000）に入ると、レコードが増えるごとにカーソルが返すレコード数が増えるのでbuffer_new()の時間がどんどん増えてインデックス更新が遅くなります。
また、既存のbufferが見つからないので毎回新しくbufferを作ります。このためインデックスサイズも大きくなります。
解決策として以下を提案します。

既存のbufferが見つからなかった場合に過去にgrn_ii_update_one()したときに新しく作ったbufferを使いまわせないかチェックする。

既存のbufferが見つからないケースを減らす。これでインデックスサイズの増加を抑えられる。


カーソルで回すレコード数を制限する。

既存のbufferを見つけられるケースが減ることがあるが、buffer_new()にかかる時間が一定以下に抑えられるので前述のケースでの速度劣化が抑えられる。
既存のbufferを見つけられない場合は↑の使いまわせないかチェックでフォローするので影響は軽微なはず。



前者の実装は 5b6129d です。
grn_iiに追加しているnext_buffer_candidate_tidが使いまわせないかチェック対象のbuffer（に紐付いているtid）です。
buffer_open_by_tid()はbuffer_open()のコードの一部を抜き出しただけでロジックは変えていません。
SPLIT_COND()が変わっているのはbufferがb以外の変数にも入れられるようにです。
後者の実装は dd67962 です。
EXISTING_BUFFER_FIND_LIMITの10000はなんとなくで決めました。特に計測したわけではありません。
この変更を入れる前と入れた後では実行時間・サイズは以下のように変わります。データは前述のRubyスクリプトを実行した結果です。それをgroongaコマンドで処理しました。



項目
変更なし
変更あり




実行時間
30分以上(*)
約4分30秒


サイズ
約15GB（1GB * 15 + 4.5MB + 4KB）
約51MB（22MB + 29MB）



(*) 30分を過ぎたくらいからエラー発生。50万件後半くらいから発生する。45分くらいたって65万件くらいしかロードできていない。
以下は生結果です。
変更なし：
[[0,1482816822.219858,0.04200315475463867],true]
[[0,1482816822.261966,0.05740857124328613],true]
[[0,1482816822.319439,0.04283547401428223],true]
[[0,1482816822.362304,0.07676839828491211],true]

# select a --limit 0
[[0,1482821246.286818,0.0002453327178955078],[[[649709],[[""_id"",""UInt32""],[""x"",""ShortText""]]]]]

-rw-r----- 1 kou kou 4.0K Dec 27 14:33 db
-rw-r----- 1 kou kou  21M Dec 27 15:47 db.0000000
-rw-r----- 1 kou kou 8.1M Dec 27 15:47 db.0000100
-rw-r----- 1 kou kou  17M Dec 27 15:07 db.0000101
-rw-r----- 1 kou kou  13M Dec 27 15:47 db.0000102
-rw-r----- 1 kou kou 1.0G Dec 27 15:47 db.0000103
-rw-r----- 1 kou kou 1.0G Dec 27 14:38 db.0000103.001
-rw-r----- 1 kou kou 1.0G Dec 27 14:40 db.0000103.002
-rw-r----- 1 kou kou 1.0G Dec 27 14:42 db.0000103.003
-rw-r----- 1 kou kou 1.0G Dec 27 14:44 db.0000103.004
-rw-r----- 1 kou kou 1.0G Dec 27 14:46 db.0000103.005
-rw-r----- 1 kou kou 1.0G Dec 27 14:48 db.0000103.006
-rw-r----- 1 kou kou 1.0G Dec 27 14:51 db.0000103.007
-rw-r----- 1 kou kou 1.0G Dec 27 14:53 db.0000103.008
-rw-r----- 1 kou kou 1.0G Dec 27 14:55 db.0000103.009
-rw-r----- 1 kou kou 1.0G Dec 27 14:57 db.0000103.00A
-rw-r----- 1 kou kou 1.0G Dec 27 14:59 db.0000103.00B
-rw-r----- 1 kou kou 1.0G Dec 27 15:01 db.0000103.00C
-rw-r----- 1 kou kou 1.0G Dec 27 15:03 db.0000103.00D
-rw-r----- 1 kou kou 1.0G Dec 27 15:05 db.0000103.00E
-rw-r----- 1 kou kou 1.0G Dec 27 15:07 db.0000103.00F
-rw-r----- 1 kou kou 4.5M Dec 27 15:07 db.0000103.010
-rw-r----- 1 kou kou 4.0K Dec 27 14:33 db.0000103.c
-rw-r----- 1 kou kou 1.0M Dec 27 14:33 db.001
-rw-r----- 1 kou kou  13M Dec 27 14:33 db.conf
-rw-r--r-- 1 kou kou 177M Dec 27 15:48 log
-rw-r--r-- 1 kou kou  634 Dec 27 14:33 query.log

エラーログ：
2016-12-27 15:07:09.642377|A| [ii][update][one] failed to create a buffer2: <b.index>: <65537>:<1>:<65537>: size:<16>
2016-12-27 15:07:09.691508|A| /tmp/local/lib/libgroonga.so.0(grn_ii_update_one+0x2229) [0x7fb0403ff47e]
2016-12-27 15:07:09.691530|A| /tmp/local/lib/libgroonga.so.0(grn_ii_column_update+0x2740) [0x7fb040408be2]
2016-12-27 15:07:09.691534|A| /tmp/local/lib/libgroonga.so.0(grn_obj_default_set_value_hook+0x2f9) [0x7fb040270a1e]
2016-12-27 15:07:09.691536|A| /tmp/local/lib/libgroonga.so.0(+0xfe4a2) [0x7fb0402964a2]
2016-12-27 15:07:09.691538|A| /tmp/local/lib/libgroonga.so.0(+0xfe979) [0x7fb040296979]
2016-12-27 15:07:09.691540|A| /tmp/local/lib/libgroonga.so.0(grn_obj_set_value+0x3ad) [0x7fb040299ce0]
2016-12-27 15:07:09.691543|A| /tmp/local/lib/libgroonga.so.0(+0x122519) [0x7fb0402ba519]
2016-12-27 15:07:09.691545|A| /tmp/local/lib/libgroonga.so.0(+0x122dad) [0x7fb0402badad]
2016-12-27 15:07:09.691547|A| /tmp/local/lib/libgroonga.so.0(grn_load_+0xc42) [0x7fb0402bdf66]
2016-12-27 15:07:09.691549|A| /tmp/local/lib/libgroonga.so.0(+0x402282) [0x7fb04059a282]
2016-12-27 15:07:09.691552|A| /tmp/local/lib/libgroonga.so.0(grn_proc_call+0x426) [0x7fb0402cf606]
2016-12-27 15:07:09.691554|A| /tmp/local/lib/libgroonga.so.0(grn_command_run+0xce) [0x7fb040253187]
2016-12-27 15:07:09.691556|A| /tmp/local/lib/libgroonga.so.0(grn_expr_exec+0x1a5) [0x7fb0402cfd22]
2016-12-27 15:07:09.691558|A| /tmp/local/lib/libgroonga.so.0(grn_ctx_send+0x4d0) [0x7fb04025c122]
2016-12-27 15:07:09.691560|A| /tmp/local/bin/groonga(+0x634b) [0x56001bf9334b]
2016-12-27 15:07:09.691563|A| /tmp/local/bin/groonga(+0x18008) [0x56001bfa5008]
2016-12-27 15:07:09.691581|e| [table][load] failed to set column value: [ii][update][one] failed to create a buffer2: <b.index>: <65537>:<1>:<65537>: size:<16>: key: <(NULL)>, column: <x>, value: <""00065536"">

変更あり：
[[0,1482814433.974035,0.04183840751647949],true]
[[0,1482814434.015956,0.05599784851074219],true]
[[0,1482814434.072021,0.04459285736083984],true]
[[0,1482814434.116677,0.08618617057800293],true]
[[0,1482814434.20292,272.1374449729919],900000]

-rw-r----- 1 kou kou 4.0K Dec 27 13:58 db
-rw-r----- 1 kou kou  21M Dec 27 13:58 db.0000000
-rw-r----- 1 kou kou 8.1M Dec 27 13:58 db.0000100
-rw-r----- 1 kou kou  17M Dec 27 13:58 db.0000101
-rw-r----- 1 kou kou  13M Dec 27 13:58 db.0000102
-rw-r----- 1 kou kou  22M Dec 27 13:58 db.0000103
-rw-r----- 1 kou kou  29M Dec 27 13:58 db.0000103.c
-rw-r----- 1 kou kou 1.0M Dec 27 13:53 db.001
-rw-r----- 1 kou kou  13M Dec 27 13:53 db.conf
-rw-r--r-- 1 kou kou  13K Dec 27 13:58 log
-rw-r--r-- 1 kou kou  787 Dec 27 13:58 query.log","キーが大きくて（たとえば256バイトとか1KiBとか）さらに見つからないケースだと1bitではなく1バイトずつ減らしていっても結構な時間がかかってしまうので、ずらしていく量は倍々で増やす（1, 2, 4, 8, ...）ことにした。
通常は元のキーサイズのプレフィックスサーチか元のキーサイズ-1のプレフィックスサーチで見つかるはずなので従来のケースへの影響はないはず。",True,{}
groonga/groonga,https://github.com/groonga/groonga,617,2016-12-27T06:49:20Z,2016-12-30T12:40:46Z,2017-01-18T00:44:44Z,CLOSED,False,88,41,2,https://github.com/kou,ii: improve performance on buffer_new's worst case,2,[],https://github.com/groonga/groonga/pull/617,https://github.com/daijiro,12,https://github.com/groonga/groonga/pull/617#issuecomment-273348098,"See commit messages of 5b6129d and dd67962 about description of this case in English.
転置インデックスを更新するときにbuffer_new()をすることがありますが、データの内容・更新順序によって、すごく遅く、かつ、インデックスサイズがすごく増えることがあります。
どのような内容・更新順序かというと次のようなケースです。
table_create a TABLE_NO_KEY
column_create a x COLUMN_SCALAR ShortText
table_create b TABLE_PAT_KEY ShortText
column_create b index COLUMN_INDEX a x

load --table a
[
{""x"": ""00000000""},
{""x"": ""00000001""},
...
{""x"": ""00486036""},
{""x"": ""00000000""},
{""x"": ""00000001""},
...
{""x"": ""00413962""}
]

Rubyスクリプトだと次のようになります。
puts ""table_create a TABLE_NO_KEY""
puts ""column_create a x COLUMN_SCALAR ShortText""
puts ""table_create b TABLE_PAT_KEY ShortText""
puts ""column_create b index COLUMN_INDEX a x""

puts ""load --table a""
puts ""[""
n = 900_000
n.times do |i|
  i %= 486_037
  puts ""{\""x\"": \""#{i.to_s.rjust(8, '0')}\""},""
end
puts ""]""
buffer_new()の中で語彙表をカーソルで回して既存のbufferがないか探していますが、↑のケースだとカーソルを回しきっても既存のbufferが見つかりません。00486036のレコードが終わって2週目（2回目の00000000）に入ると、レコードが増えるごとにカーソルが返すレコード数が増えるのでbuffer_new()の時間がどんどん増えてインデックス更新が遅くなります。
また、既存のbufferが見つからないので毎回新しくbufferを作ります。このためインデックスサイズも大きくなります。
解決策として以下を提案します。

既存のbufferが見つからなかった場合に過去にgrn_ii_update_one()したときに新しく作ったbufferを使いまわせないかチェックする。

既存のbufferが見つからないケースを減らす。これでインデックスサイズの増加を抑えられる。


カーソルで回すレコード数を制限する。

既存のbufferを見つけられるケースが減ることがあるが、buffer_new()にかかる時間が一定以下に抑えられるので前述のケースでの速度劣化が抑えられる。
既存のbufferを見つけられない場合は↑の使いまわせないかチェックでフォローするので影響は軽微なはず。



前者の実装は 5b6129d です。
grn_iiに追加しているnext_buffer_candidate_tidが使いまわせないかチェック対象のbuffer（に紐付いているtid）です。
buffer_open_by_tid()はbuffer_open()のコードの一部を抜き出しただけでロジックは変えていません。
SPLIT_COND()が変わっているのはbufferがb以外の変数にも入れられるようにです。
後者の実装は dd67962 です。
EXISTING_BUFFER_FIND_LIMITの10000はなんとなくで決めました。特に計測したわけではありません。
この変更を入れる前と入れた後では実行時間・サイズは以下のように変わります。データは前述のRubyスクリプトを実行した結果です。それをgroongaコマンドで処理しました。



項目
変更なし
変更あり




実行時間
30分以上(*)
約4分30秒


サイズ
約15GB（1GB * 15 + 4.5MB + 4KB）
約51MB（22MB + 29MB）



(*) 30分を過ぎたくらいからエラー発生。50万件後半くらいから発生する。45分くらいたって65万件くらいしかロードできていない。
以下は生結果です。
変更なし：
[[0,1482816822.219858,0.04200315475463867],true]
[[0,1482816822.261966,0.05740857124328613],true]
[[0,1482816822.319439,0.04283547401428223],true]
[[0,1482816822.362304,0.07676839828491211],true]

# select a --limit 0
[[0,1482821246.286818,0.0002453327178955078],[[[649709],[[""_id"",""UInt32""],[""x"",""ShortText""]]]]]

-rw-r----- 1 kou kou 4.0K Dec 27 14:33 db
-rw-r----- 1 kou kou  21M Dec 27 15:47 db.0000000
-rw-r----- 1 kou kou 8.1M Dec 27 15:47 db.0000100
-rw-r----- 1 kou kou  17M Dec 27 15:07 db.0000101
-rw-r----- 1 kou kou  13M Dec 27 15:47 db.0000102
-rw-r----- 1 kou kou 1.0G Dec 27 15:47 db.0000103
-rw-r----- 1 kou kou 1.0G Dec 27 14:38 db.0000103.001
-rw-r----- 1 kou kou 1.0G Dec 27 14:40 db.0000103.002
-rw-r----- 1 kou kou 1.0G Dec 27 14:42 db.0000103.003
-rw-r----- 1 kou kou 1.0G Dec 27 14:44 db.0000103.004
-rw-r----- 1 kou kou 1.0G Dec 27 14:46 db.0000103.005
-rw-r----- 1 kou kou 1.0G Dec 27 14:48 db.0000103.006
-rw-r----- 1 kou kou 1.0G Dec 27 14:51 db.0000103.007
-rw-r----- 1 kou kou 1.0G Dec 27 14:53 db.0000103.008
-rw-r----- 1 kou kou 1.0G Dec 27 14:55 db.0000103.009
-rw-r----- 1 kou kou 1.0G Dec 27 14:57 db.0000103.00A
-rw-r----- 1 kou kou 1.0G Dec 27 14:59 db.0000103.00B
-rw-r----- 1 kou kou 1.0G Dec 27 15:01 db.0000103.00C
-rw-r----- 1 kou kou 1.0G Dec 27 15:03 db.0000103.00D
-rw-r----- 1 kou kou 1.0G Dec 27 15:05 db.0000103.00E
-rw-r----- 1 kou kou 1.0G Dec 27 15:07 db.0000103.00F
-rw-r----- 1 kou kou 4.5M Dec 27 15:07 db.0000103.010
-rw-r----- 1 kou kou 4.0K Dec 27 14:33 db.0000103.c
-rw-r----- 1 kou kou 1.0M Dec 27 14:33 db.001
-rw-r----- 1 kou kou  13M Dec 27 14:33 db.conf
-rw-r--r-- 1 kou kou 177M Dec 27 15:48 log
-rw-r--r-- 1 kou kou  634 Dec 27 14:33 query.log

エラーログ：
2016-12-27 15:07:09.642377|A| [ii][update][one] failed to create a buffer2: <b.index>: <65537>:<1>:<65537>: size:<16>
2016-12-27 15:07:09.691508|A| /tmp/local/lib/libgroonga.so.0(grn_ii_update_one+0x2229) [0x7fb0403ff47e]
2016-12-27 15:07:09.691530|A| /tmp/local/lib/libgroonga.so.0(grn_ii_column_update+0x2740) [0x7fb040408be2]
2016-12-27 15:07:09.691534|A| /tmp/local/lib/libgroonga.so.0(grn_obj_default_set_value_hook+0x2f9) [0x7fb040270a1e]
2016-12-27 15:07:09.691536|A| /tmp/local/lib/libgroonga.so.0(+0xfe4a2) [0x7fb0402964a2]
2016-12-27 15:07:09.691538|A| /tmp/local/lib/libgroonga.so.0(+0xfe979) [0x7fb040296979]
2016-12-27 15:07:09.691540|A| /tmp/local/lib/libgroonga.so.0(grn_obj_set_value+0x3ad) [0x7fb040299ce0]
2016-12-27 15:07:09.691543|A| /tmp/local/lib/libgroonga.so.0(+0x122519) [0x7fb0402ba519]
2016-12-27 15:07:09.691545|A| /tmp/local/lib/libgroonga.so.0(+0x122dad) [0x7fb0402badad]
2016-12-27 15:07:09.691547|A| /tmp/local/lib/libgroonga.so.0(grn_load_+0xc42) [0x7fb0402bdf66]
2016-12-27 15:07:09.691549|A| /tmp/local/lib/libgroonga.so.0(+0x402282) [0x7fb04059a282]
2016-12-27 15:07:09.691552|A| /tmp/local/lib/libgroonga.so.0(grn_proc_call+0x426) [0x7fb0402cf606]
2016-12-27 15:07:09.691554|A| /tmp/local/lib/libgroonga.so.0(grn_command_run+0xce) [0x7fb040253187]
2016-12-27 15:07:09.691556|A| /tmp/local/lib/libgroonga.so.0(grn_expr_exec+0x1a5) [0x7fb0402cfd22]
2016-12-27 15:07:09.691558|A| /tmp/local/lib/libgroonga.so.0(grn_ctx_send+0x4d0) [0x7fb04025c122]
2016-12-27 15:07:09.691560|A| /tmp/local/bin/groonga(+0x634b) [0x56001bf9334b]
2016-12-27 15:07:09.691563|A| /tmp/local/bin/groonga(+0x18008) [0x56001bfa5008]
2016-12-27 15:07:09.691581|e| [table][load] failed to set column value: [ii][update][one] failed to create a buffer2: <b.index>: <65537>:<1>:<65537>: size:<16>: key: <(NULL)>, column: <x>, value: <""00065536"">

変更あり：
[[0,1482814433.974035,0.04183840751647949],true]
[[0,1482814434.015956,0.05599784851074219],true]
[[0,1482814434.072021,0.04459285736083984],true]
[[0,1482814434.116677,0.08618617057800293],true]
[[0,1482814434.20292,272.1374449729919],900000]

-rw-r----- 1 kou kou 4.0K Dec 27 13:58 db
-rw-r----- 1 kou kou  21M Dec 27 13:58 db.0000000
-rw-r----- 1 kou kou 8.1M Dec 27 13:58 db.0000100
-rw-r----- 1 kou kou  17M Dec 27 13:58 db.0000101
-rw-r----- 1 kou kou  13M Dec 27 13:58 db.0000102
-rw-r----- 1 kou kou  22M Dec 27 13:58 db.0000103
-rw-r----- 1 kou kou  29M Dec 27 13:58 db.0000103.c
-rw-r----- 1 kou kou 1.0M Dec 27 13:53 db.001
-rw-r----- 1 kou kou  13M Dec 27 13:53 db.conf
-rw-r--r-- 1 kou kou  13K Dec 27 13:58 log
-rw-r--r-- 1 kou kou  787 Dec 27 13:58 query.log",いいと思います!,True,{}
groonga/groonga,https://github.com/groonga/groonga,618,2016-12-27T08:11:49Z,2016-12-28T07:18:52Z,2016-12-28T11:16:37Z,MERGED,True,89,37,4,https://github.com/naoa,Support setting minimum record id to ii_cursor if operator is GRN_OP_AND,5,[],https://github.com/groonga/groonga/pull/618,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/618,"grn_obj_searchのgrn_search_optargにiiでヒットした最小のrecord_idを保持しておくminのポインタを追加し、
grn_table_selectでGRN_OP_ANDのときのみひとつ前のminを引き継いで、minよりも小さい部分のiiのchunkを飛ばせる処理を追加してみました。
grn_ii_selectは必ずridの昇順にヒットするという認識で組んでいます。
よければ、ご検討下さい。
以下は実験結果です。
最初のクエリで最小record_idが大きく、且つ、後に続くANDのクエリのヒット数が大きい場合に、少し早くできていて、ヒット数が変わらないことがわかります。
将来的にiiのestimiate_sizeを基にクエリの順番を入れ替えるというoptimizerを実装するときにも有効に働きそうです。

最大record_id: 17876360
脱髄損傷 最小record_id: 4440339
装置 最小record_id: 3
処理 最小record_id: 3
アルブミン 最小record_id: 369




Query
Elappsed time
Elappsed time(Patched)
N hits
N hits(Patched)




--match_columns 'index1' --query '脱髄損傷 装置'
0.048963
0.033436
4
4


--match_columns 'index1' --query '脱髄損傷 OR 装置'
0.136230
0.137176
1138666
1138666


--match_columns 'index1' --query '脱髄損傷 装置 -アルブミン'
0.047645
0.035868
1
1


``--match_columns 'index1

index2' --query '脱髄損傷 装置'``
0.083177
0.051815


``--match_columns 'index1

index2' --query '脱髄損傷 OR 装置'``
0.270109
0.262461


``--match_columns 'index1

index2' --query '脱髄損傷 装置 -アルブミン'``
0.082023
0.058829


--match_columns 'index1' --query '(脱髄損傷 装置) OR (脱髄損傷 処理)'
0.072944
0.047004
6
6


--match_columns 'index1' --query '(脱髄損傷 装置) OR (脱髄損傷 OR 処理)'
0.133479
0.118541
852920
852920


--match_columns 'index1' --query '(脱髄損傷 OR 装置) (脱髄損傷 OR 処理)'
0.607880
0.601427
682676
682676


--match_columns 'index1' --query '(脱髄損傷 OR 装置) (脱髄損傷 処理)'
0.165896
0.149621
6
6


``--match_columns 'index1

index2' --query '(脱髄損傷 装置) OR (脱髄損傷 処理)'``
0.131188
0.080436","grn_obj_searchのgrn_search_optargにiiでヒットした最小のrecord_idを保持しておくminのポインタを追加し、
grn_table_selectでGRN_OP_ANDのときのみひとつ前のminを引き継いで、minよりも小さい部分のiiのchunkを飛ばせる処理を追加してみました。
grn_ii_selectは必ずridの昇順にヒットするという認識で組んでいます。
よければ、ご検討下さい。
以下は実験結果です。
最初のクエリで最小record_idが大きく、且つ、後に続くANDのクエリのヒット数が大きい場合に、少し早くできていて、ヒット数が変わらないことがわかります。
将来的にiiのestimiate_sizeを基にクエリの順番を入れ替えるというoptimizerを実装するときにも有効に働きそうです。

最大record_id: 17876360
脱髄損傷 最小record_id: 4440339
装置 最小record_id: 3
処理 最小record_id: 3
アルブミン 最小record_id: 369




Query
Elappsed time
Elappsed time(Patched)
N hits
N hits(Patched)




--match_columns 'index1' --query '脱髄損傷 装置'
0.048963
0.033436
4
4


--match_columns 'index1' --query '脱髄損傷 OR 装置'
0.136230
0.137176
1138666
1138666


--match_columns 'index1' --query '脱髄損傷 装置 -アルブミン'
0.047645
0.035868
1
1


``--match_columns 'index1

index2' --query '脱髄損傷 装置'``
0.083177
0.051815


``--match_columns 'index1

index2' --query '脱髄損傷 OR 装置'``
0.270109
0.262461


``--match_columns 'index1

index2' --query '脱髄損傷 装置 -アルブミン'``
0.082023
0.058829


--match_columns 'index1' --query '(脱髄損傷 装置) OR (脱髄損傷 処理)'
0.072944
0.047004
6
6


--match_columns 'index1' --query '(脱髄損傷 装置) OR (脱髄損傷 OR 処理)'
0.133479
0.118541
852920
852920


--match_columns 'index1' --query '(脱髄損傷 OR 装置) (脱髄損傷 OR 処理)'
0.607880
0.601427
682676
682676


--match_columns 'index1' --query '(脱髄損傷 OR 装置) (脱髄損傷 処理)'
0.165896
0.149621
6
6


``--match_columns 'index1

index2' --query '(脱髄損傷 装置) OR (脱髄損傷 処理)'``
0.131188
0.080436",True,{}
groonga/groonga,https://github.com/groonga/groonga,618,2016-12-27T08:11:49Z,2016-12-28T07:18:52Z,2016-12-28T11:16:37Z,MERGED,True,89,37,4,https://github.com/naoa,Support setting minimum record id to ii_cursor if operator is GRN_OP_AND,5,[],https://github.com/groonga/groonga/pull/618,https://github.com/naoa,2,https://github.com/groonga/groonga/pull/618#issuecomment-269316896,"grn_obj_searchのgrn_search_optargにiiでヒットした最小のrecord_idを保持しておくminのポインタを追加し、
grn_table_selectでGRN_OP_ANDのときのみひとつ前のminを引き継いで、minよりも小さい部分のiiのchunkを飛ばせる処理を追加してみました。
grn_ii_selectは必ずridの昇順にヒットするという認識で組んでいます。
よければ、ご検討下さい。
以下は実験結果です。
最初のクエリで最小record_idが大きく、且つ、後に続くANDのクエリのヒット数が大きい場合に、少し早くできていて、ヒット数が変わらないことがわかります。
将来的にiiのestimiate_sizeを基にクエリの順番を入れ替えるというoptimizerを実装するときにも有効に働きそうです。

最大record_id: 17876360
脱髄損傷 最小record_id: 4440339
装置 最小record_id: 3
処理 最小record_id: 3
アルブミン 最小record_id: 369




Query
Elappsed time
Elappsed time(Patched)
N hits
N hits(Patched)




--match_columns 'index1' --query '脱髄損傷 装置'
0.048963
0.033436
4
4


--match_columns 'index1' --query '脱髄損傷 OR 装置'
0.136230
0.137176
1138666
1138666


--match_columns 'index1' --query '脱髄損傷 装置 -アルブミン'
0.047645
0.035868
1
1


``--match_columns 'index1

index2' --query '脱髄損傷 装置'``
0.083177
0.051815


``--match_columns 'index1

index2' --query '脱髄損傷 OR 装置'``
0.270109
0.262461


``--match_columns 'index1

index2' --query '脱髄損傷 装置 -アルブミン'``
0.082023
0.058829


--match_columns 'index1' --query '(脱髄損傷 装置) OR (脱髄損傷 処理)'
0.072944
0.047004
6
6


--match_columns 'index1' --query '(脱髄損傷 装置) OR (脱髄損傷 OR 処理)'
0.133479
0.118541
852920
852920


--match_columns 'index1' --query '(脱髄損傷 OR 装置) (脱髄損傷 OR 処理)'
0.607880
0.601427
682676
682676


--match_columns 'index1' --query '(脱髄損傷 OR 装置) (脱髄損傷 処理)'
0.165896
0.149621
6
6


``--match_columns 'index1

index2' --query '(脱髄損傷 装置) OR (脱髄損傷 処理)'``
0.131188
0.080436","互換性と今後の拡張性のためにgrn_search_optargにgrn_match_infoという構造体を実体で持つようにしました。
#define GRN_MATCH_INFO_GET_MIN_RECORD_ID                           (0x01)

typedef struct _grn_match_info grn_match_info;

struct _grn_match_info {
  int flags;
  grn_id *min;
};

struct _grn_search_optarg {
...
  grn_match_info match_info;
};
grn_match_infoは、検索時に得られる情報を後で使うための構造体を想定しており、
最小レコードIDのほかには例えば、マッチした最初のtokenのポジション位置を返して
snippetのヒントに使うことなどが考えられます。
（大変そうでしばらくはそれに手をつけようとは思っていませんが。）",True,{}
groonga/groonga,https://github.com/groonga/groonga,618,2016-12-27T08:11:49Z,2016-12-28T07:18:52Z,2016-12-28T11:16:37Z,MERGED,True,89,37,4,https://github.com/naoa,Support setting minimum record id to ii_cursor if operator is GRN_OP_AND,5,[],https://github.com/groonga/groonga/pull/618,https://github.com/kou,3,https://github.com/groonga/groonga/pull/618#issuecomment-269425031,"grn_obj_searchのgrn_search_optargにiiでヒットした最小のrecord_idを保持しておくminのポインタを追加し、
grn_table_selectでGRN_OP_ANDのときのみひとつ前のminを引き継いで、minよりも小さい部分のiiのchunkを飛ばせる処理を追加してみました。
grn_ii_selectは必ずridの昇順にヒットするという認識で組んでいます。
よければ、ご検討下さい。
以下は実験結果です。
最初のクエリで最小record_idが大きく、且つ、後に続くANDのクエリのヒット数が大きい場合に、少し早くできていて、ヒット数が変わらないことがわかります。
将来的にiiのestimiate_sizeを基にクエリの順番を入れ替えるというoptimizerを実装するときにも有効に働きそうです。

最大record_id: 17876360
脱髄損傷 最小record_id: 4440339
装置 最小record_id: 3
処理 最小record_id: 3
アルブミン 最小record_id: 369




Query
Elappsed time
Elappsed time(Patched)
N hits
N hits(Patched)




--match_columns 'index1' --query '脱髄損傷 装置'
0.048963
0.033436
4
4


--match_columns 'index1' --query '脱髄損傷 OR 装置'
0.136230
0.137176
1138666
1138666


--match_columns 'index1' --query '脱髄損傷 装置 -アルブミン'
0.047645
0.035868
1
1


``--match_columns 'index1

index2' --query '脱髄損傷 装置'``
0.083177
0.051815


``--match_columns 'index1

index2' --query '脱髄損傷 OR 装置'``
0.270109
0.262461


``--match_columns 'index1

index2' --query '脱髄損傷 装置 -アルブミン'``
0.082023
0.058829


--match_columns 'index1' --query '(脱髄損傷 装置) OR (脱髄損傷 処理)'
0.072944
0.047004
6
6


--match_columns 'index1' --query '(脱髄損傷 装置) OR (脱髄損傷 OR 処理)'
0.133479
0.118541
852920
852920


--match_columns 'index1' --query '(脱髄損傷 OR 装置) (脱髄損傷 OR 処理)'
0.607880
0.601427
682676
682676


--match_columns 'index1' --query '(脱髄損傷 OR 装置) (脱髄損傷 処理)'
0.165896
0.149621
6
6


``--match_columns 'index1

index2' --query '(脱髄損傷 装置) OR (脱髄損傷 処理)'``
0.131188
0.080436","「脱髄損傷」があると効きますね！
grn_match_info::minはgrn_id *じゃなくてgrn_idでよさそうに思いました。
後は私はよいと思いました。
@daijiro 判断をお願いします！",True,{}
groonga/groonga,https://github.com/groonga/groonga,618,2016-12-27T08:11:49Z,2016-12-28T07:18:52Z,2016-12-28T11:16:37Z,MERGED,True,89,37,4,https://github.com/naoa,Support setting minimum record id to ii_cursor if operator is GRN_OP_AND,5,[],https://github.com/groonga/groonga/pull/618,https://github.com/daijiro,4,https://github.com/groonga/groonga/pull/618#issuecomment-269437182,"grn_obj_searchのgrn_search_optargにiiでヒットした最小のrecord_idを保持しておくminのポインタを追加し、
grn_table_selectでGRN_OP_ANDのときのみひとつ前のminを引き継いで、minよりも小さい部分のiiのchunkを飛ばせる処理を追加してみました。
grn_ii_selectは必ずridの昇順にヒットするという認識で組んでいます。
よければ、ご検討下さい。
以下は実験結果です。
最初のクエリで最小record_idが大きく、且つ、後に続くANDのクエリのヒット数が大きい場合に、少し早くできていて、ヒット数が変わらないことがわかります。
将来的にiiのestimiate_sizeを基にクエリの順番を入れ替えるというoptimizerを実装するときにも有効に働きそうです。

最大record_id: 17876360
脱髄損傷 最小record_id: 4440339
装置 最小record_id: 3
処理 最小record_id: 3
アルブミン 最小record_id: 369




Query
Elappsed time
Elappsed time(Patched)
N hits
N hits(Patched)




--match_columns 'index1' --query '脱髄損傷 装置'
0.048963
0.033436
4
4


--match_columns 'index1' --query '脱髄損傷 OR 装置'
0.136230
0.137176
1138666
1138666


--match_columns 'index1' --query '脱髄損傷 装置 -アルブミン'
0.047645
0.035868
1
1


``--match_columns 'index1

index2' --query '脱髄損傷 装置'``
0.083177
0.051815


``--match_columns 'index1

index2' --query '脱髄損傷 OR 装置'``
0.270109
0.262461


``--match_columns 'index1

index2' --query '脱髄損傷 装置 -アルブミン'``
0.082023
0.058829


--match_columns 'index1' --query '(脱髄損傷 装置) OR (脱髄損傷 処理)'
0.072944
0.047004
6
6


--match_columns 'index1' --query '(脱髄損傷 装置) OR (脱髄損傷 OR 処理)'
0.133479
0.118541
852920
852920


--match_columns 'index1' --query '(脱髄損傷 OR 装置) (脱髄損傷 OR 処理)'
0.607880
0.601427
682676
682676


--match_columns 'index1' --query '(脱髄損傷 OR 装置) (脱髄損傷 処理)'
0.165896
0.149621
6
6


``--match_columns 'index1

index2' --query '(脱髄損傷 装置) OR (脱髄損傷 処理)'``
0.131188
0.080436",とりこませていただきました!,True,{}
groonga/groonga,https://github.com/groonga/groonga,618,2016-12-27T08:11:49Z,2016-12-28T07:18:52Z,2016-12-28T11:16:37Z,MERGED,True,89,37,4,https://github.com/naoa,Support setting minimum record id to ii_cursor if operator is GRN_OP_AND,5,[],https://github.com/groonga/groonga/pull/618,https://github.com/naoa,5,https://github.com/groonga/groonga/pull/618#issuecomment-269438121,"grn_obj_searchのgrn_search_optargにiiでヒットした最小のrecord_idを保持しておくminのポインタを追加し、
grn_table_selectでGRN_OP_ANDのときのみひとつ前のminを引き継いで、minよりも小さい部分のiiのchunkを飛ばせる処理を追加してみました。
grn_ii_selectは必ずridの昇順にヒットするという認識で組んでいます。
よければ、ご検討下さい。
以下は実験結果です。
最初のクエリで最小record_idが大きく、且つ、後に続くANDのクエリのヒット数が大きい場合に、少し早くできていて、ヒット数が変わらないことがわかります。
将来的にiiのestimiate_sizeを基にクエリの順番を入れ替えるというoptimizerを実装するときにも有効に働きそうです。

最大record_id: 17876360
脱髄損傷 最小record_id: 4440339
装置 最小record_id: 3
処理 最小record_id: 3
アルブミン 最小record_id: 369




Query
Elappsed time
Elappsed time(Patched)
N hits
N hits(Patched)




--match_columns 'index1' --query '脱髄損傷 装置'
0.048963
0.033436
4
4


--match_columns 'index1' --query '脱髄損傷 OR 装置'
0.136230
0.137176
1138666
1138666


--match_columns 'index1' --query '脱髄損傷 装置 -アルブミン'
0.047645
0.035868
1
1


``--match_columns 'index1

index2' --query '脱髄損傷 装置'``
0.083177
0.051815


``--match_columns 'index1

index2' --query '脱髄損傷 OR 装置'``
0.270109
0.262461


``--match_columns 'index1

index2' --query '脱髄損傷 装置 -アルブミン'``
0.082023
0.058829


--match_columns 'index1' --query '(脱髄損傷 装置) OR (脱髄損傷 処理)'
0.072944
0.047004
6
6


--match_columns 'index1' --query '(脱髄損傷 装置) OR (脱髄損傷 OR 処理)'
0.133479
0.118541
852920
852920


--match_columns 'index1' --query '(脱髄損傷 OR 装置) (脱髄損傷 OR 処理)'
0.607880
0.601427
682676
682676


--match_columns 'index1' --query '(脱髄損傷 OR 装置) (脱髄損傷 処理)'
0.165896
0.149621
6
6


``--match_columns 'index1

index2' --query '(脱髄損傷 装置) OR (脱髄損傷 処理)'``
0.131188
0.080436","ありがとうございます。
後で気づいたのですが、
obj_searchでoptargがNULLで渡されたときに落ちるようになってしまっているのと、
escalation_thresholdが1以上に設定されたときにescalationする場合は、
minをresetしておかないといけないと思ったので、それを別PRで修正します。",True,{}
groonga/groonga,https://github.com/groonga/groonga,619,2016-12-28T08:06:01Z,2016-12-28T08:33:37Z,2016-12-28T11:16:25Z,MERGED,True,6,4,1,https://github.com/naoa,Add NULL check for grn_select_optarg->match_info,2,[],https://github.com/groonga/groonga/pull/619,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/619,grn_select_optarg->match_infoのNULLチェックを追加しました,grn_select_optarg->match_infoのNULLチェックを追加しました,True,{}
groonga/groonga,https://github.com/groonga/groonga,619,2016-12-28T08:06:01Z,2016-12-28T08:33:37Z,2016-12-28T11:16:25Z,MERGED,True,6,4,1,https://github.com/naoa,Add NULL check for grn_select_optarg->match_info,2,[],https://github.com/groonga/groonga/pull/619,https://github.com/kou,2,https://github.com/groonga/groonga/pull/619#issuecomment-269448372,grn_select_optarg->match_infoのNULLチェックを追加しました,"マージしました。
expr.cの中にも1箇所あったので対応しておきました。",True,{}
groonga/groonga,https://github.com/groonga/groonga,619,2016-12-28T08:06:01Z,2016-12-28T08:33:37Z,2016-12-28T11:16:25Z,MERGED,True,6,4,1,https://github.com/naoa,Add NULL check for grn_select_optarg->match_info,2,[],https://github.com/groonga/groonga/pull/619,https://github.com/naoa,3,https://github.com/groonga/groonga/pull/619#issuecomment-269463421,grn_select_optarg->match_infoのNULLチェックを追加しました,マージありがとうございます,True,{}
groonga/groonga,https://github.com/groonga/groonga,620,2016-12-28T11:27:00Z,2016-12-29T02:52:56Z,2017-01-07T09:25:33Z,MERGED,True,27,0,1,https://github.com/naoa,Reset match_info->min when escalation,1,[],https://github.com/groonga/groonga/pull/620,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/620,"escalationが実行されるときに最初のii_selectの結果のminが適用されていたので、escalation時はminを退避しておいてnilにし、escalation結果のminよりも小さい場合はそちらのminを適用するようにしました。
（match_escalation_thresholdが1以上の場合は１つ目のii_selectでminが設定されることがある）","escalationが実行されるときに最初のii_selectの結果のminが適用されていたので、escalation時はminを退避しておいてnilにし、escalation結果のminよりも小さい場合はそちらのminを適用するようにしました。
（match_escalation_thresholdが1以上の場合は１つ目のii_selectでminが設定されることがある）",True,{}
groonga/groonga,https://github.com/groonga/groonga,620,2016-12-28T11:27:00Z,2016-12-29T02:52:56Z,2017-01-07T09:25:33Z,MERGED,True,27,0,1,https://github.com/naoa,Reset match_info->min when escalation,1,[],https://github.com/groonga/groonga/pull/620,https://github.com/daijiro,2,https://github.com/groonga/groonga/pull/620#issuecomment-269574627,"escalationが実行されるときに最初のii_selectの結果のminが適用されていたので、escalation時はminを退避しておいてnilにし、escalation結果のminよりも小さい場合はそちらのminを適用するようにしました。
（match_escalation_thresholdが1以上の場合は１つ目のii_selectでminが設定されることがある）",とりこませていただきました!,True,{}
groonga/groonga,https://github.com/groonga/groonga,622,2017-01-07T06:29:29Z,2017-01-07T12:01:03Z,2017-01-18T20:02:18Z,MERGED,True,2,0,2,https://github.com/naoa,Fix memory leak when truncate hash/pat has many token filters,2,[],https://github.com/groonga/groonga/pull/622,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/622,"テーブルをtruncateするタイミングでtoken_filtersのポインタの解放漏れがあるようです。
以下で再現できます。
静的索引構築時にもgrn_table_truncateが呼ばれるところがあって、静的索引構築でも再現します。
plugin_register token_filters/stop_word

table_create Memos TABLE_NO_KEY
column_create Memos content COLUMN_SCALAR ShortText

table_create Terms TABLE_HASH_KEY ShortText \
  --default_tokenizer TokenBigram \
  --normalizer NormalizerAuto \
  --token_filters TokenFilterStopWord,TokenFilterStopWord,TokenFilterStopWord,TokenFilterStopWord,TokenFilterStopWord
column_create Terms memos_content COLUMN_INDEX|WITH_POSITION Memos content
column_create Terms is_stop_word COLUMN_SCALAR Bool

load --table Terms
[
{""_key"": ""and"", ""is_stop_word"": true}
]

load --table Memos
[
{""content"": ""Hello""},
{""content"": ""Hello and Good-bye""},
{""content"": ""Good-bye""}
]

truncate Terms

select Memos --match_columns content --query ""Hello and""","テーブルをtruncateするタイミングでtoken_filtersのポインタの解放漏れがあるようです。
以下で再現できます。
静的索引構築時にもgrn_table_truncateが呼ばれるところがあって、静的索引構築でも再現します。
plugin_register token_filters/stop_word

table_create Memos TABLE_NO_KEY
column_create Memos content COLUMN_SCALAR ShortText

table_create Terms TABLE_HASH_KEY ShortText \
  --default_tokenizer TokenBigram \
  --normalizer NormalizerAuto \
  --token_filters TokenFilterStopWord,TokenFilterStopWord,TokenFilterStopWord,TokenFilterStopWord,TokenFilterStopWord
column_create Terms memos_content COLUMN_INDEX|WITH_POSITION Memos content
column_create Terms is_stop_word COLUMN_SCALAR Bool

load --table Terms
[
{""_key"": ""and"", ""is_stop_word"": true}
]

load --table Memos
[
{""content"": ""Hello""},
{""content"": ""Hello and Good-bye""},
{""content"": ""Good-bye""}
]

truncate Terms

select Memos --match_columns content --query ""Hello and""",True,{}
groonga/groonga,https://github.com/groonga/groonga,622,2017-01-07T06:29:29Z,2017-01-07T12:01:03Z,2017-01-18T20:02:18Z,MERGED,True,2,0,2,https://github.com/naoa,Fix memory leak when truncate hash/pat has many token filters,2,[],https://github.com/groonga/groonga/pull/622,https://github.com/kou,2,https://github.com/groonga/groonga/pull/622#issuecomment-271079632,"テーブルをtruncateするタイミングでtoken_filtersのポインタの解放漏れがあるようです。
以下で再現できます。
静的索引構築時にもgrn_table_truncateが呼ばれるところがあって、静的索引構築でも再現します。
plugin_register token_filters/stop_word

table_create Memos TABLE_NO_KEY
column_create Memos content COLUMN_SCALAR ShortText

table_create Terms TABLE_HASH_KEY ShortText \
  --default_tokenizer TokenBigram \
  --normalizer NormalizerAuto \
  --token_filters TokenFilterStopWord,TokenFilterStopWord,TokenFilterStopWord,TokenFilterStopWord,TokenFilterStopWord
column_create Terms memos_content COLUMN_INDEX|WITH_POSITION Memos content
column_create Terms is_stop_word COLUMN_SCALAR Bool

load --table Terms
[
{""_key"": ""and"", ""is_stop_word"": true}
]

load --table Memos
[
{""content"": ""Hello""},
{""content"": ""Hello and Good-bye""},
{""content"": ""Good-bye""}
]

truncate Terms

select Memos --match_columns content --query ""Hello and""",ありがとうございます！,True,{}
groonga/groonga,https://github.com/groonga/groonga,624,2017-01-13T12:12:40Z,2017-01-16T02:56:48Z,2017-01-16T04:55:00Z,MERGED,True,12,1,1,https://github.com/naoa,Fix a bug that couldn't search index correctly,3,[],https://github.com/groonga/groonga/pull/624,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/624,"すいません
ANDの高速化のパッチ(#618)により一部のケースで絞り込みすぎのバグがありました。
わかっている１つのケースは以下の再現ケースのように、
１つめのORクエリの最小record_id < 2つめのORクエリの最小record_id
(todaymin:1) < (tommowmin:2)
の後にANDクエリが続くようなケースです。
この場合、3つめのdayのANDクエリのii_selectではmin:2が設定されてid:2しかヒットしないため、
それ以外のレコードはii_resolve_sel_andで削除されてしまいます。

再現ケース

table_create Terms TABLE_HASH_KEY ShortText \
  --default_tokenizer TokenBigram \
  --normalizer NormalizerAuto

table_create Memos TABLE_NO_KEY
column_create Memos content COLUMN_SCALAR ShortText
column_create Terms index COLUMN_INDEX|WITH_POSITION Memos content

load --table Memos
[
{""content"": ""Today is good day.""},
{""content"": ""Tomorrow will be good day.""}
]

select Memos   --match_columns 'content'   --query 'today OR tomorrow day'
[
  [
    0,
    0.0,
    0.0
  ],
  [
    [
      [
        1
      ],
      [
        [
          ""_id"",
          ""UInt32""
        ],
        [
          ""content"",
          ""ShortText""
        ]
      ],
      [
        2,
        ""Tomorrow will be good day.""
      ]
    ]
  ]
]

きっちりとminが結果hashテーブルresの最小レコードIDのキーを示すようにできればいいの
ですが、そのためには、全ての検索ケースでminを設定するようにしないといけず、また、最初
からresにレコードが入っている状態でgrn_table_selectがGRN_OP_ORで呼ばれる
ケースもあるかもしれないので難しそうに感じました。
今のところ、ii_selectで取得したminを次のANDクエリに安全に引き継げるケースは

OP_ANDの場合
OP_ORの場合であって、(検索前の)結果テーブルresのサイズが0

ぐらいと考えました。
そこで、その他のケースはすべて取得したminをすぐにGRN_ID_NILするようにしています。
ここまで絞っても、効果のあるケースはそこそこあると考えています。
(検索クエリはだいたいOR AND AND...みたいな形になると思われる。)","すいません
ANDの高速化のパッチ(#618)により一部のケースで絞り込みすぎのバグがありました。
わかっている１つのケースは以下の再現ケースのように、
１つめのORクエリの最小record_id < 2つめのORクエリの最小record_id
(todaymin:1) < (tommowmin:2)
の後にANDクエリが続くようなケースです。
この場合、3つめのdayのANDクエリのii_selectではmin:2が設定されてid:2しかヒットしないため、
それ以外のレコードはii_resolve_sel_andで削除されてしまいます。

再現ケース

table_create Terms TABLE_HASH_KEY ShortText \
  --default_tokenizer TokenBigram \
  --normalizer NormalizerAuto

table_create Memos TABLE_NO_KEY
column_create Memos content COLUMN_SCALAR ShortText
column_create Terms index COLUMN_INDEX|WITH_POSITION Memos content

load --table Memos
[
{""content"": ""Today is good day.""},
{""content"": ""Tomorrow will be good day.""}
]

select Memos   --match_columns 'content'   --query 'today OR tomorrow day'
[
  [
    0,
    0.0,
    0.0
  ],
  [
    [
      [
        1
      ],
      [
        [
          ""_id"",
          ""UInt32""
        ],
        [
          ""content"",
          ""ShortText""
        ]
      ],
      [
        2,
        ""Tomorrow will be good day.""
      ]
    ]
  ]
]

きっちりとminが結果hashテーブルresの最小レコードIDのキーを示すようにできればいいの
ですが、そのためには、全ての検索ケースでminを設定するようにしないといけず、また、最初
からresにレコードが入っている状態でgrn_table_selectがGRN_OP_ORで呼ばれる
ケースもあるかもしれないので難しそうに感じました。
今のところ、ii_selectで取得したminを次のANDクエリに安全に引き継げるケースは

OP_ANDの場合
OP_ORの場合であって、(検索前の)結果テーブルresのサイズが0

ぐらいと考えました。
そこで、その他のケースはすべて取得したminをすぐにGRN_ID_NILするようにしています。
ここまで絞っても、効果のあるケースはそこそこあると考えています。
(検索クエリはだいたいOR AND AND...みたいな形になると思われる。)",True,{}
groonga/groonga,https://github.com/groonga/groonga,624,2017-01-13T12:12:40Z,2017-01-16T02:56:48Z,2017-01-16T04:55:00Z,MERGED,True,12,1,1,https://github.com/naoa,Fix a bug that couldn't search index correctly,3,[],https://github.com/groonga/groonga/pull/624,https://github.com/kou,2,https://github.com/groonga/groonga/pull/624#issuecomment-272768195,"すいません
ANDの高速化のパッチ(#618)により一部のケースで絞り込みすぎのバグがありました。
わかっている１つのケースは以下の再現ケースのように、
１つめのORクエリの最小record_id < 2つめのORクエリの最小record_id
(todaymin:1) < (tommowmin:2)
の後にANDクエリが続くようなケースです。
この場合、3つめのdayのANDクエリのii_selectではmin:2が設定されてid:2しかヒットしないため、
それ以外のレコードはii_resolve_sel_andで削除されてしまいます。

再現ケース

table_create Terms TABLE_HASH_KEY ShortText \
  --default_tokenizer TokenBigram \
  --normalizer NormalizerAuto

table_create Memos TABLE_NO_KEY
column_create Memos content COLUMN_SCALAR ShortText
column_create Terms index COLUMN_INDEX|WITH_POSITION Memos content

load --table Memos
[
{""content"": ""Today is good day.""},
{""content"": ""Tomorrow will be good day.""}
]

select Memos   --match_columns 'content'   --query 'today OR tomorrow day'
[
  [
    0,
    0.0,
    0.0
  ],
  [
    [
      [
        1
      ],
      [
        [
          ""_id"",
          ""UInt32""
        ],
        [
          ""content"",
          ""ShortText""
        ]
      ],
      [
        2,
        ""Tomorrow will be good day.""
      ]
    ]
  ]
]

きっちりとminが結果hashテーブルresの最小レコードIDのキーを示すようにできればいいの
ですが、そのためには、全ての検索ケースでminを設定するようにしないといけず、また、最初
からresにレコードが入っている状態でgrn_table_selectがGRN_OP_ORで呼ばれる
ケースもあるかもしれないので難しそうに感じました。
今のところ、ii_selectで取得したminを次のANDクエリに安全に引き継げるケースは

OP_ANDの場合
OP_ORの場合であって、(検索前の)結果テーブルresのサイズが0

ぐらいと考えました。
そこで、その他のケースはすべて取得したminをすぐにGRN_ID_NILするようにしています。
ここまで絞っても、効果のあるケースはそこそこあると考えています。
(検索クエリはだいたいOR AND AND...みたいな形になると思われる。)","ありがとうございます！
テストを追加して取り込みました。
いろんなところでminをリセットしているので、リセットし忘れが怖いですね。。。",True,{}
groonga/groonga,https://github.com/groonga/groonga,624,2017-01-13T12:12:40Z,2017-01-16T02:56:48Z,2017-01-16T04:55:00Z,MERGED,True,12,1,1,https://github.com/naoa,Fix a bug that couldn't search index correctly,3,[],https://github.com/groonga/groonga/pull/624,https://github.com/naoa,3,https://github.com/groonga/groonga/pull/624#issuecomment-272773876,"すいません
ANDの高速化のパッチ(#618)により一部のケースで絞り込みすぎのバグがありました。
わかっている１つのケースは以下の再現ケースのように、
１つめのORクエリの最小record_id < 2つめのORクエリの最小record_id
(todaymin:1) < (tommowmin:2)
の後にANDクエリが続くようなケースです。
この場合、3つめのdayのANDクエリのii_selectではmin:2が設定されてid:2しかヒットしないため、
それ以外のレコードはii_resolve_sel_andで削除されてしまいます。

再現ケース

table_create Terms TABLE_HASH_KEY ShortText \
  --default_tokenizer TokenBigram \
  --normalizer NormalizerAuto

table_create Memos TABLE_NO_KEY
column_create Memos content COLUMN_SCALAR ShortText
column_create Terms index COLUMN_INDEX|WITH_POSITION Memos content

load --table Memos
[
{""content"": ""Today is good day.""},
{""content"": ""Tomorrow will be good day.""}
]

select Memos   --match_columns 'content'   --query 'today OR tomorrow day'
[
  [
    0,
    0.0,
    0.0
  ],
  [
    [
      [
        1
      ],
      [
        [
          ""_id"",
          ""UInt32""
        ],
        [
          ""content"",
          ""ShortText""
        ]
      ],
      [
        2,
        ""Tomorrow will be good day.""
      ]
    ]
  ]
]

きっちりとminが結果hashテーブルresの最小レコードIDのキーを示すようにできればいいの
ですが、そのためには、全ての検索ケースでminを設定するようにしないといけず、また、最初
からresにレコードが入っている状態でgrn_table_selectがGRN_OP_ORで呼ばれる
ケースもあるかもしれないので難しそうに感じました。
今のところ、ii_selectで取得したminを次のANDクエリに安全に引き継げるケースは

OP_ANDの場合
OP_ORの場合であって、(検索前の)結果テーブルresのサイズが0

ぐらいと考えました。
そこで、その他のケースはすべて取得したminをすぐにGRN_ID_NILするようにしています。
ここまで絞っても、効果のあるケースはそこそこあると考えています。
(検索クエリはだいたいOR AND AND...みたいな形になると思われる。)","マージありがとうございます。
実行しようとするクエリの状態だけでなく、手前の状態をちゃんとみないといけないので危なそうですね。。",True,{}
groonga/groonga,https://github.com/groonga/groonga,625,2017-01-13T15:33:11Z,2017-01-24T06:18:15Z,2017-01-24T08:33:51Z,MERGED,True,20,0,1,https://github.com/naoa,Avoid access to non existence sub records for group,1,[],https://github.com/groonga/groonga/pull/625,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/625,"ドリルダウンでcalc_typesが設定されていないときに、_sum等でソートをしようとすると、
存在しない_sumのサブレコードにアクセスしようとしてクラッシュします。
以下は再現ケースです。
table_create Tags TABLE_PAT_KEY ShortText
[[0,0.0,0.0],true]
table_create Memos TABLE_HASH_KEY ShortText
[[0,0.0,0.0],true]
column_create Memos tag COLUMN_SCALAR Tags
[[0,0.0,0.0],true]
column_create Memos value COLUMN_SCALAR Int64
[[0,0.0,0.0],true]
load --table Memos
[
{""_key"": ""Groonga is fast!"", ""tag"": ""Groonga"", ""value"": 10},
{""_key"": ""Mroonga is fast!"", ""tag"": ""Mroonga"", ""value"": 20},
{""_key"": ""Groonga sticker!"", ""tag"": ""Groonga"", ""value"": 40},
{""_key"": ""Rroonga is fast!"", ""tag"": ""Rroonga"", ""value"": 80}
]
[[0,0.0,0.0],4]
select Memos   --filter ''  \
 --drilldowns[tag].keys tag  \
 --drilldowns[tag].output_columns _key \
 --drilldowns[tag].sort_keys -_sum
#|C| -- CRASHED!!! --
実際のケースではqueryもfilterもなしのときに_scoreの_sumを取ってソートしようとして
クラッシュしました。(_scoreがないから、calc_typesは指定しても無視される)","ドリルダウンでcalc_typesが設定されていないときに、_sum等でソートをしようとすると、
存在しない_sumのサブレコードにアクセスしようとしてクラッシュします。
以下は再現ケースです。
table_create Tags TABLE_PAT_KEY ShortText
[[0,0.0,0.0],true]
table_create Memos TABLE_HASH_KEY ShortText
[[0,0.0,0.0],true]
column_create Memos tag COLUMN_SCALAR Tags
[[0,0.0,0.0],true]
column_create Memos value COLUMN_SCALAR Int64
[[0,0.0,0.0],true]
load --table Memos
[
{""_key"": ""Groonga is fast!"", ""tag"": ""Groonga"", ""value"": 10},
{""_key"": ""Mroonga is fast!"", ""tag"": ""Mroonga"", ""value"": 20},
{""_key"": ""Groonga sticker!"", ""tag"": ""Groonga"", ""value"": 40},
{""_key"": ""Rroonga is fast!"", ""tag"": ""Rroonga"", ""value"": 80}
]
[[0,0.0,0.0],4]
select Memos   --filter ''  \
 --drilldowns[tag].keys tag  \
 --drilldowns[tag].output_columns _key \
 --drilldowns[tag].sort_keys -_sum
#|C| -- CRASHED!!! --
実際のケースではqueryもfilterもなしのときに_scoreの_sumを取ってソートしようとして
クラッシュしました。(_scoreがないから、calc_typesは指定しても無視される)",True,{}
groonga/groonga,https://github.com/groonga/groonga,625,2017-01-13T15:33:11Z,2017-01-24T06:18:15Z,2017-01-24T08:33:51Z,MERGED,True,20,0,1,https://github.com/naoa,Avoid access to non existence sub records for group,1,[],https://github.com/groonga/groonga/pull/625,https://github.com/naoa,2,https://github.com/groonga/groonga/pull/625#issuecomment-272617303,"ドリルダウンでcalc_typesが設定されていないときに、_sum等でソートをしようとすると、
存在しない_sumのサブレコードにアクセスしようとしてクラッシュします。
以下は再現ケースです。
table_create Tags TABLE_PAT_KEY ShortText
[[0,0.0,0.0],true]
table_create Memos TABLE_HASH_KEY ShortText
[[0,0.0,0.0],true]
column_create Memos tag COLUMN_SCALAR Tags
[[0,0.0,0.0],true]
column_create Memos value COLUMN_SCALAR Int64
[[0,0.0,0.0],true]
load --table Memos
[
{""_key"": ""Groonga is fast!"", ""tag"": ""Groonga"", ""value"": 10},
{""_key"": ""Mroonga is fast!"", ""tag"": ""Mroonga"", ""value"": 20},
{""_key"": ""Groonga sticker!"", ""tag"": ""Groonga"", ""value"": 40},
{""_key"": ""Rroonga is fast!"", ""tag"": ""Rroonga"", ""value"": 80}
]
[[0,0.0,0.0],4]
select Memos   --filter ''  \
 --drilldowns[tag].keys tag  \
 --drilldowns[tag].output_columns _key \
 --drilldowns[tag].sort_keys -_sum
#|C| -- CRASHED!!! --
実際のケースではqueryもfilterもなしのときに_scoreの_sumを取ってソートしようとして
クラッシュしました。(_scoreがないから、calc_typesは指定しても無視される)",sortでなくoutputの中でsumを取ろうとしてクラッシュするケースもあったので一旦WIPします,True,{}
groonga/groonga,https://github.com/groonga/groonga,625,2017-01-13T15:33:11Z,2017-01-24T06:18:15Z,2017-01-24T08:33:51Z,MERGED,True,20,0,1,https://github.com/naoa,Avoid access to non existence sub records for group,1,[],https://github.com/groonga/groonga/pull/625,https://github.com/naoa,3,https://github.com/groonga/groonga/pull/625#issuecomment-272623955,"ドリルダウンでcalc_typesが設定されていないときに、_sum等でソートをしようとすると、
存在しない_sumのサブレコードにアクセスしようとしてクラッシュします。
以下は再現ケースです。
table_create Tags TABLE_PAT_KEY ShortText
[[0,0.0,0.0],true]
table_create Memos TABLE_HASH_KEY ShortText
[[0,0.0,0.0],true]
column_create Memos tag COLUMN_SCALAR Tags
[[0,0.0,0.0],true]
column_create Memos value COLUMN_SCALAR Int64
[[0,0.0,0.0],true]
load --table Memos
[
{""_key"": ""Groonga is fast!"", ""tag"": ""Groonga"", ""value"": 10},
{""_key"": ""Mroonga is fast!"", ""tag"": ""Mroonga"", ""value"": 20},
{""_key"": ""Groonga sticker!"", ""tag"": ""Groonga"", ""value"": 40},
{""_key"": ""Rroonga is fast!"", ""tag"": ""Rroonga"", ""value"": 80}
]
[[0,0.0,0.0],4]
select Memos   --filter ''  \
 --drilldowns[tag].keys tag  \
 --drilldowns[tag].output_columns _key \
 --drilldowns[tag].sort_keys -_sum
#|C| -- CRASHED!!! --
実際のケースではqueryもfilterもなしのときに_scoreの_sumを取ってソートしようとして
クラッシュしました。(_scoreがないから、calc_typesは指定しても無視される)","GRN_TABLE_IS_GROUPEDをチェックするのを忘れていました。pushし直しました。
これでクラッシュしなくなりました。",True,{}
groonga/groonga,https://github.com/groonga/groonga,625,2017-01-13T15:33:11Z,2017-01-24T06:18:15Z,2017-01-24T08:33:51Z,MERGED,True,20,0,1,https://github.com/naoa,Avoid access to non existence sub records for group,1,[],https://github.com/groonga/groonga/pull/625,https://github.com/kou,4,https://github.com/groonga/groonga/pull/625#issuecomment-272783993,"ドリルダウンでcalc_typesが設定されていないときに、_sum等でソートをしようとすると、
存在しない_sumのサブレコードにアクセスしようとしてクラッシュします。
以下は再現ケースです。
table_create Tags TABLE_PAT_KEY ShortText
[[0,0.0,0.0],true]
table_create Memos TABLE_HASH_KEY ShortText
[[0,0.0,0.0],true]
column_create Memos tag COLUMN_SCALAR Tags
[[0,0.0,0.0],true]
column_create Memos value COLUMN_SCALAR Int64
[[0,0.0,0.0],true]
load --table Memos
[
{""_key"": ""Groonga is fast!"", ""tag"": ""Groonga"", ""value"": 10},
{""_key"": ""Mroonga is fast!"", ""tag"": ""Mroonga"", ""value"": 20},
{""_key"": ""Groonga sticker!"", ""tag"": ""Groonga"", ""value"": 40},
{""_key"": ""Rroonga is fast!"", ""tag"": ""Rroonga"", ""value"": 80}
]
[[0,0.0,0.0],4]
select Memos   --filter ''  \
 --drilldowns[tag].keys tag  \
 --drilldowns[tag].output_columns _key \
 --drilldowns[tag].sort_keys -_sum
#|C| -- CRASHED!!! --
実際のケースではqueryもfilterもなしのときに_scoreの_sumを取ってソートしようとして
クラッシュしました。(_scoreがないから、calc_typesは指定しても無視される)",テストも含めてください！,True,{}
groonga/groonga,https://github.com/groonga/groonga,625,2017-01-13T15:33:11Z,2017-01-24T06:18:15Z,2017-01-24T08:33:51Z,MERGED,True,20,0,1,https://github.com/naoa,Avoid access to non existence sub records for group,1,[],https://github.com/groonga/groonga/pull/625,https://github.com/kou,5,https://github.com/groonga/groonga/pull/625#issuecomment-274720001,"ドリルダウンでcalc_typesが設定されていないときに、_sum等でソートをしようとすると、
存在しない_sumのサブレコードにアクセスしようとしてクラッシュします。
以下は再現ケースです。
table_create Tags TABLE_PAT_KEY ShortText
[[0,0.0,0.0],true]
table_create Memos TABLE_HASH_KEY ShortText
[[0,0.0,0.0],true]
column_create Memos tag COLUMN_SCALAR Tags
[[0,0.0,0.0],true]
column_create Memos value COLUMN_SCALAR Int64
[[0,0.0,0.0],true]
load --table Memos
[
{""_key"": ""Groonga is fast!"", ""tag"": ""Groonga"", ""value"": 10},
{""_key"": ""Mroonga is fast!"", ""tag"": ""Mroonga"", ""value"": 20},
{""_key"": ""Groonga sticker!"", ""tag"": ""Groonga"", ""value"": 40},
{""_key"": ""Rroonga is fast!"", ""tag"": ""Rroonga"", ""value"": 80}
]
[[0,0.0,0.0],4]
select Memos   --filter ''  \
 --drilldowns[tag].keys tag  \
 --drilldowns[tag].output_columns _key \
 --drilldowns[tag].sort_keys -_sum
#|C| -- CRASHED!!! --
実際のケースではqueryもfilterもなしのときに_scoreの_sumを取ってソートしようとして
クラッシュしました。(_scoreがないから、calc_typesは指定しても無視される)",マージしてテストを追加しました！,True,{}
groonga/groonga,https://github.com/groonga/groonga,625,2017-01-13T15:33:11Z,2017-01-24T06:18:15Z,2017-01-24T08:33:51Z,MERGED,True,20,0,1,https://github.com/naoa,Avoid access to non existence sub records for group,1,[],https://github.com/groonga/groonga/pull/625,https://github.com/naoa,6,https://github.com/groonga/groonga/pull/625#issuecomment-274740456,"ドリルダウンでcalc_typesが設定されていないときに、_sum等でソートをしようとすると、
存在しない_sumのサブレコードにアクセスしようとしてクラッシュします。
以下は再現ケースです。
table_create Tags TABLE_PAT_KEY ShortText
[[0,0.0,0.0],true]
table_create Memos TABLE_HASH_KEY ShortText
[[0,0.0,0.0],true]
column_create Memos tag COLUMN_SCALAR Tags
[[0,0.0,0.0],true]
column_create Memos value COLUMN_SCALAR Int64
[[0,0.0,0.0],true]
load --table Memos
[
{""_key"": ""Groonga is fast!"", ""tag"": ""Groonga"", ""value"": 10},
{""_key"": ""Mroonga is fast!"", ""tag"": ""Mroonga"", ""value"": 20},
{""_key"": ""Groonga sticker!"", ""tag"": ""Groonga"", ""value"": 40},
{""_key"": ""Rroonga is fast!"", ""tag"": ""Rroonga"", ""value"": 80}
]
[[0,0.0,0.0],4]
select Memos   --filter ''  \
 --drilldowns[tag].keys tag  \
 --drilldowns[tag].output_columns _key \
 --drilldowns[tag].sort_keys -_sum
#|C| -- CRASHED!!! --
実際のケースではqueryもfilterもなしのときに_scoreの_sumを取ってソートしようとして
クラッシュしました。(_scoreがないから、calc_typesは指定しても無視される)",マージありがとうございます！,True,{}
groonga/groonga,https://github.com/groonga/groonga,626,2017-01-14T08:21:10Z,2017-01-15T06:26:43Z,2017-01-15T07:37:17Z,MERGED,True,3,1,1,https://github.com/obache,Change to install groonga-httpd-restart conditionally,1,[],https://github.com/groonga/groonga/pull/626,https://github.com/obache,1,https://github.com/groonga/groonga/pull/626,"It should be installed with groonga-httpd, and should not be in
distribution file in any case.","It should be installed with groonga-httpd, and should not be in
distribution file in any case.",True,{}
groonga/groonga,https://github.com/groonga/groonga,626,2017-01-14T08:21:10Z,2017-01-15T06:26:43Z,2017-01-15T07:37:17Z,MERGED,True,3,1,1,https://github.com/obache,Change to install groonga-httpd-restart conditionally,1,[],https://github.com/groonga/groonga/pull/626,https://github.com/kou,2,https://github.com/groonga/groonga/pull/626#issuecomment-272676844,"It should be installed with groonga-httpd, and should not be in
distribution file in any case.",Thanks! It's reasonable.,True,{}
groonga/groonga,https://github.com/groonga/groonga,627,2017-01-14T09:51:09Z,2017-01-24T06:25:52Z,2017-01-24T08:34:04Z,MERGED,True,430,6,11,https://github.com/naoa,Dont output label if can't sort,4,[],https://github.com/groonga/groonga/pull/627,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/627,"ドリルダウンで存在しないソートキーを指定した場合、labelのみが出力されて不正なJSONで
パースできなくなります。
このケースをできるだけ回避するためにlabelを出力するのはoutput直前にしたいです。
(その後のoutputの途中で失敗しても壊れる気がしますが。とりあえず）

再現ケース

table_create Tags TABLE_PAT_KEY ShortText
[[0,0.0,0.0],true]
table_create Memos TABLE_HASH_KEY ShortText
[[0,0.0,0.0],true]
column_create Memos tag COLUMN_SCALAR Tags
[[0,0.0,0.0],true]
column_create Memos value COLUMN_SCALAR Int64
[[0,0.0,0.0],true]
load --table Memos
[
{""_key"": ""Groonga is fast!"", ""tag"": ""Groonga"", ""value"": 10},
{""_key"": ""Mroonga is fast!"", ""tag"": ""Mroonga"", ""value"": 20},
{""_key"": ""Groonga sticker!"", ""tag"": ""Groonga"", ""value"": 40},
{""_key"": ""Rroonga is fast!"", ""tag"": ""Rroonga"", ""value"": 80}
]
[[0,0.0,0.0],4]
select Memos   --filter ''   --drilldowns[tag].keys tag   --drilldowns[tag].output_columns _key   --drilldowns[tag].sort_keys hoge
failed to parse <json> content: 409: unexpected token at '{""tag""}]]': <[[-22,1484386639.571185,0.0002415180206298828,""invalid sort key: <hoge>: table:<(anonymous)> keys:<hoge>"",[[""grn_table_sort_key_from_str"",""db.c"",13475]]],[[[4],[[""_id"",""UInt32""],[""_key"",""ShortText""],[""tag"",""Tags""],[""value"",""Int64""]],[1,""Groonga is fast!"",""Groonga"",10],[2,""Mroonga is fast!"",""Mroonga"",20],[3,""Groonga sticker!"",""Groonga"",40],[4,""Rroonga is fast!"",""Rroonga"",80]],{""tag""}]]>#|w| invalid sort key: <hoge>: table:<(anonymous)> keys:<hoge>","ドリルダウンで存在しないソートキーを指定した場合、labelのみが出力されて不正なJSONで
パースできなくなります。
このケースをできるだけ回避するためにlabelを出力するのはoutput直前にしたいです。
(その後のoutputの途中で失敗しても壊れる気がしますが。とりあえず）

再現ケース

table_create Tags TABLE_PAT_KEY ShortText
[[0,0.0,0.0],true]
table_create Memos TABLE_HASH_KEY ShortText
[[0,0.0,0.0],true]
column_create Memos tag COLUMN_SCALAR Tags
[[0,0.0,0.0],true]
column_create Memos value COLUMN_SCALAR Int64
[[0,0.0,0.0],true]
load --table Memos
[
{""_key"": ""Groonga is fast!"", ""tag"": ""Groonga"", ""value"": 10},
{""_key"": ""Mroonga is fast!"", ""tag"": ""Mroonga"", ""value"": 20},
{""_key"": ""Groonga sticker!"", ""tag"": ""Groonga"", ""value"": 40},
{""_key"": ""Rroonga is fast!"", ""tag"": ""Rroonga"", ""value"": 80}
]
[[0,0.0,0.0],4]
select Memos   --filter ''   --drilldowns[tag].keys tag   --drilldowns[tag].output_columns _key   --drilldowns[tag].sort_keys hoge
failed to parse <json> content: 409: unexpected token at '{""tag""}]]': <[[-22,1484386639.571185,0.0002415180206298828,""invalid sort key: <hoge>: table:<(anonymous)> keys:<hoge>"",[[""grn_table_sort_key_from_str"",""db.c"",13475]]],[[[4],[[""_id"",""UInt32""],[""_key"",""ShortText""],[""tag"",""Tags""],[""value"",""Int64""]],[1,""Groonga is fast!"",""Groonga"",10],[2,""Mroonga is fast!"",""Mroonga"",20],[3,""Groonga sticker!"",""Groonga"",40],[4,""Rroonga is fast!"",""Rroonga"",80]],{""tag""}]]>#|w| invalid sort key: <hoge>: table:<(anonymous)> keys:<hoge>",True,{}
groonga/groonga,https://github.com/groonga/groonga,627,2017-01-14T09:51:09Z,2017-01-24T06:25:52Z,2017-01-24T08:34:04Z,MERGED,True,430,6,11,https://github.com/naoa,Dont output label if can't sort,4,[],https://github.com/groonga/groonga/pull/627,https://github.com/naoa,2,https://github.com/groonga/groonga/pull/627#issuecomment-272617677,"ドリルダウンで存在しないソートキーを指定した場合、labelのみが出力されて不正なJSONで
パースできなくなります。
このケースをできるだけ回避するためにlabelを出力するのはoutput直前にしたいです。
(その後のoutputの途中で失敗しても壊れる気がしますが。とりあえず）

再現ケース

table_create Tags TABLE_PAT_KEY ShortText
[[0,0.0,0.0],true]
table_create Memos TABLE_HASH_KEY ShortText
[[0,0.0,0.0],true]
column_create Memos tag COLUMN_SCALAR Tags
[[0,0.0,0.0],true]
column_create Memos value COLUMN_SCALAR Int64
[[0,0.0,0.0],true]
load --table Memos
[
{""_key"": ""Groonga is fast!"", ""tag"": ""Groonga"", ""value"": 10},
{""_key"": ""Mroonga is fast!"", ""tag"": ""Mroonga"", ""value"": 20},
{""_key"": ""Groonga sticker!"", ""tag"": ""Groonga"", ""value"": 40},
{""_key"": ""Rroonga is fast!"", ""tag"": ""Rroonga"", ""value"": 80}
]
[[0,0.0,0.0],4]
select Memos   --filter ''   --drilldowns[tag].keys tag   --drilldowns[tag].output_columns _key   --drilldowns[tag].sort_keys hoge
failed to parse <json> content: 409: unexpected token at '{""tag""}]]': <[[-22,1484386639.571185,0.0002415180206298828,""invalid sort key: <hoge>: table:<(anonymous)> keys:<hoge>"",[[""grn_table_sort_key_from_str"",""db.c"",13475]]],[[[4],[[""_id"",""UInt32""],[""_key"",""ShortText""],[""tag"",""Tags""],[""value"",""Int64""]],[1,""Groonga is fast!"",""Groonga"",10],[2,""Mroonga is fast!"",""Mroonga"",20],[3,""Groonga sticker!"",""Groonga"",40],[4,""Rroonga is fast!"",""Rroonga"",80]],{""tag""}]]>#|w| invalid sort key: <hoge>: table:<(anonymous)> keys:<hoge>","以下のように複数ラベルがある際に1つ目のラベルでsort_keysに失敗すると、
以降のラベルのレコードが出力できなり、この場合もJSONが壊れます。
sort_keys見つからなかったときは、GRN_PLUGIN_CLEAR_ERROR(ctx);するようにしました。
select Memos \
  --filter '' \
  --drilldowns[tag].keys tag \
  --drilldowns[tag].sort_keys hoge \
  --drilldowns[tag2].keys tag",True,{}
groonga/groonga,https://github.com/groonga/groonga,627,2017-01-14T09:51:09Z,2017-01-24T06:25:52Z,2017-01-24T08:34:04Z,MERGED,True,430,6,11,https://github.com/naoa,Dont output label if can't sort,4,[],https://github.com/groonga/groonga/pull/627,https://github.com/kou,3,https://github.com/groonga/groonga/pull/627#issuecomment-272784117,"ドリルダウンで存在しないソートキーを指定した場合、labelのみが出力されて不正なJSONで
パースできなくなります。
このケースをできるだけ回避するためにlabelを出力するのはoutput直前にしたいです。
(その後のoutputの途中で失敗しても壊れる気がしますが。とりあえず）

再現ケース

table_create Tags TABLE_PAT_KEY ShortText
[[0,0.0,0.0],true]
table_create Memos TABLE_HASH_KEY ShortText
[[0,0.0,0.0],true]
column_create Memos tag COLUMN_SCALAR Tags
[[0,0.0,0.0],true]
column_create Memos value COLUMN_SCALAR Int64
[[0,0.0,0.0],true]
load --table Memos
[
{""_key"": ""Groonga is fast!"", ""tag"": ""Groonga"", ""value"": 10},
{""_key"": ""Mroonga is fast!"", ""tag"": ""Mroonga"", ""value"": 20},
{""_key"": ""Groonga sticker!"", ""tag"": ""Groonga"", ""value"": 40},
{""_key"": ""Rroonga is fast!"", ""tag"": ""Rroonga"", ""value"": 80}
]
[[0,0.0,0.0],4]
select Memos   --filter ''   --drilldowns[tag].keys tag   --drilldowns[tag].output_columns _key   --drilldowns[tag].sort_keys hoge
failed to parse <json> content: 409: unexpected token at '{""tag""}]]': <[[-22,1484386639.571185,0.0002415180206298828,""invalid sort key: <hoge>: table:<(anonymous)> keys:<hoge>"",[[""grn_table_sort_key_from_str"",""db.c"",13475]]],[[[4],[[""_id"",""UInt32""],[""_key"",""ShortText""],[""tag"",""Tags""],[""value"",""Int64""]],[1,""Groonga is fast!"",""Groonga"",10],[2,""Mroonga is fast!"",""Mroonga"",20],[3,""Groonga sticker!"",""Groonga"",40],[4,""Rroonga is fast!"",""Rroonga"",80]],{""tag""}]]>#|w| invalid sort key: <hoge>: table:<(anonymous)> keys:<hoge>",テストも含めてください！,True,{}
groonga/groonga,https://github.com/groonga/groonga,627,2017-01-14T09:51:09Z,2017-01-24T06:25:52Z,2017-01-24T08:34:04Z,MERGED,True,430,6,11,https://github.com/naoa,Dont output label if can't sort,4,[],https://github.com/groonga/groonga/pull/627,https://github.com/naoa,4,https://github.com/groonga/groonga/pull/627#issuecomment-272892196,"ドリルダウンで存在しないソートキーを指定した場合、labelのみが出力されて不正なJSONで
パースできなくなります。
このケースをできるだけ回避するためにlabelを出力するのはoutput直前にしたいです。
(その後のoutputの途中で失敗しても壊れる気がしますが。とりあえず）

再現ケース

table_create Tags TABLE_PAT_KEY ShortText
[[0,0.0,0.0],true]
table_create Memos TABLE_HASH_KEY ShortText
[[0,0.0,0.0],true]
column_create Memos tag COLUMN_SCALAR Tags
[[0,0.0,0.0],true]
column_create Memos value COLUMN_SCALAR Int64
[[0,0.0,0.0],true]
load --table Memos
[
{""_key"": ""Groonga is fast!"", ""tag"": ""Groonga"", ""value"": 10},
{""_key"": ""Mroonga is fast!"", ""tag"": ""Mroonga"", ""value"": 20},
{""_key"": ""Groonga sticker!"", ""tag"": ""Groonga"", ""value"": 40},
{""_key"": ""Rroonga is fast!"", ""tag"": ""Rroonga"", ""value"": 80}
]
[[0,0.0,0.0],4]
select Memos   --filter ''   --drilldowns[tag].keys tag   --drilldowns[tag].output_columns _key   --drilldowns[tag].sort_keys hoge
failed to parse <json> content: 409: unexpected token at '{""tag""}]]': <[[-22,1484386639.571185,0.0002415180206298828,""invalid sort key: <hoge>: table:<(anonymous)> keys:<hoge>"",[[""grn_table_sort_key_from_str"",""db.c"",13475]]],[[[4],[[""_id"",""UInt32""],[""_key"",""ShortText""],[""tag"",""Tags""],[""value"",""Int64""]],[1,""Groonga is fast!"",""Groonga"",10],[2,""Mroonga is fast!"",""Mroonga"",20],[3,""Groonga sticker!"",""Groonga"",40],[4,""Rroonga is fast!"",""Rroonga"",80]],{""tag""}]]>#|w| invalid sort key: <hoge>: table:<(anonymous)> keys:<hoge>",テストを追加しました！,True,{}
groonga/groonga,https://github.com/groonga/groonga,627,2017-01-14T09:51:09Z,2017-01-24T06:25:52Z,2017-01-24T08:34:04Z,MERGED,True,430,6,11,https://github.com/naoa,Dont output label if can't sort,4,[],https://github.com/groonga/groonga/pull/627,https://github.com/kou,5,https://github.com/groonga/groonga/pull/627#issuecomment-274725268,"ドリルダウンで存在しないソートキーを指定した場合、labelのみが出力されて不正なJSONで
パースできなくなります。
このケースをできるだけ回避するためにlabelを出力するのはoutput直前にしたいです。
(その後のoutputの途中で失敗しても壊れる気がしますが。とりあえず）

再現ケース

table_create Tags TABLE_PAT_KEY ShortText
[[0,0.0,0.0],true]
table_create Memos TABLE_HASH_KEY ShortText
[[0,0.0,0.0],true]
column_create Memos tag COLUMN_SCALAR Tags
[[0,0.0,0.0],true]
column_create Memos value COLUMN_SCALAR Int64
[[0,0.0,0.0],true]
load --table Memos
[
{""_key"": ""Groonga is fast!"", ""tag"": ""Groonga"", ""value"": 10},
{""_key"": ""Mroonga is fast!"", ""tag"": ""Mroonga"", ""value"": 20},
{""_key"": ""Groonga sticker!"", ""tag"": ""Groonga"", ""value"": 40},
{""_key"": ""Rroonga is fast!"", ""tag"": ""Rroonga"", ""value"": 80}
]
[[0,0.0,0.0],4]
select Memos   --filter ''   --drilldowns[tag].keys tag   --drilldowns[tag].output_columns _key   --drilldowns[tag].sort_keys hoge
failed to parse <json> content: 409: unexpected token at '{""tag""}]]': <[[-22,1484386639.571185,0.0002415180206298828,""invalid sort key: <hoge>: table:<(anonymous)> keys:<hoge>"",[[""grn_table_sort_key_from_str"",""db.c"",13475]]],[[[4],[[""_id"",""UInt32""],[""_key"",""ShortText""],[""tag"",""Tags""],[""value"",""Int64""]],[1,""Groonga is fast!"",""Groonga"",10],[2,""Mroonga is fast!"",""Mroonga"",20],[3,""Groonga sticker!"",""Groonga"",40],[4,""Rroonga is fast!"",""Rroonga"",80]],{""tag""}]]>#|w| invalid sort key: <hoge>: table:<(anonymous)> keys:<hoge>","マージしました！
エラーを無視するよりは通知する方がユーザーにとってうれしいと思うのでそのようにしました！",True,{}
groonga/groonga,https://github.com/groonga/groonga,627,2017-01-14T09:51:09Z,2017-01-24T06:25:52Z,2017-01-24T08:34:04Z,MERGED,True,430,6,11,https://github.com/naoa,Dont output label if can't sort,4,[],https://github.com/groonga/groonga/pull/627,https://github.com/naoa,6,https://github.com/groonga/groonga/pull/627#issuecomment-274740500,"ドリルダウンで存在しないソートキーを指定した場合、labelのみが出力されて不正なJSONで
パースできなくなります。
このケースをできるだけ回避するためにlabelを出力するのはoutput直前にしたいです。
(その後のoutputの途中で失敗しても壊れる気がしますが。とりあえず）

再現ケース

table_create Tags TABLE_PAT_KEY ShortText
[[0,0.0,0.0],true]
table_create Memos TABLE_HASH_KEY ShortText
[[0,0.0,0.0],true]
column_create Memos tag COLUMN_SCALAR Tags
[[0,0.0,0.0],true]
column_create Memos value COLUMN_SCALAR Int64
[[0,0.0,0.0],true]
load --table Memos
[
{""_key"": ""Groonga is fast!"", ""tag"": ""Groonga"", ""value"": 10},
{""_key"": ""Mroonga is fast!"", ""tag"": ""Mroonga"", ""value"": 20},
{""_key"": ""Groonga sticker!"", ""tag"": ""Groonga"", ""value"": 40},
{""_key"": ""Rroonga is fast!"", ""tag"": ""Rroonga"", ""value"": 80}
]
[[0,0.0,0.0],4]
select Memos   --filter ''   --drilldowns[tag].keys tag   --drilldowns[tag].output_columns _key   --drilldowns[tag].sort_keys hoge
failed to parse <json> content: 409: unexpected token at '{""tag""}]]': <[[-22,1484386639.571185,0.0002415180206298828,""invalid sort key: <hoge>: table:<(anonymous)> keys:<hoge>"",[[""grn_table_sort_key_from_str"",""db.c"",13475]]],[[[4],[[""_id"",""UInt32""],[""_key"",""ShortText""],[""tag"",""Tags""],[""value"",""Int64""]],[1,""Groonga is fast!"",""Groonga"",10],[2,""Mroonga is fast!"",""Mroonga"",20],[3,""Groonga sticker!"",""Groonga"",40],[4,""Rroonga is fast!"",""Rroonga"",80]],{""tag""}]]>#|w| invalid sort key: <hoge>: table:<(anonymous)> keys:<hoge>",ありがとうございます！,True,{}
groonga/groonga,https://github.com/groonga/groonga,628,2017-01-16T08:22:31Z,2017-01-18T07:10:41Z,2017-01-18T08:07:48Z,MERGED,True,33,7,2,https://github.com/obache,Allow to select Onigmo support,1,[],https://github.com/groonga/groonga/pull/628,https://github.com/obache,1,https://github.com/groonga/groonga/pull/628,"Introduce --with-onigmo GNU configure option.
""bundled"" (default):  use in-tree Onigmo
""system"": try to use system Onigomo or rise error
""yes"": try to use system Onigmo or fallback to in-tree one
""no"" (--without-onigmo): disalbe Onigmo support
Default ""bundled"" is the same behavior so far.","Introduce --with-onigmo GNU configure option.
""bundled"" (default):  use in-tree Onigmo
""system"": try to use system Onigomo or rise error
""yes"": try to use system Onigmo or fallback to in-tree one
""no"" (--without-onigmo): disalbe Onigmo support
Default ""bundled"" is the same behavior so far.",True,{}
groonga/groonga,https://github.com/groonga/groonga,628,2017-01-16T08:22:31Z,2017-01-18T07:10:41Z,2017-01-18T08:07:48Z,MERGED,True,33,7,2,https://github.com/obache,Allow to select Onigmo support,1,[],https://github.com/groonga/groonga/pull/628,https://github.com/kou,2,https://github.com/groonga/groonga/pull/628#issuecomment-273400666,"Introduce --with-onigmo GNU configure option.
""bundled"" (default):  use in-tree Onigmo
""system"": try to use system Onigomo or rise error
""yes"": try to use system Onigmo or fallback to in-tree one
""no"" (--without-onigmo): disalbe Onigmo support
Default ""bundled"" is the same behavior so far.",Thanks!,True,{}
groonga/groonga,https://github.com/groonga/groonga,629,2017-01-18T22:24:54Z,2017-01-24T10:22:24Z,2017-06-13T07:07:21Z,MERGED,True,122,8,5,https://github.com/naoa,proc in_values: support sequential_search for reference vector column,1,[],https://github.com/groonga/groonga/pull/629,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/629,"in_valuesのシーケンシャルサーチはリファレンスベクターに対応していないようですが、シーケンシャルに処理しようとしていました。
#$GRN_IN_VALUES_TOO_MANY_INDEX_MATCH_RATIO=0.7
table_create Tags TABLE_HASH_KEY ShortText
[[0,0.0,0.0],true]
table_create Memos TABLE_HASH_KEY ShortText
[[0,0.0,0.0],true]
column_create Memos tags COLUMN_VECTOR Tags
[[0,0.0,0.0],true]
load --table Memos
[
{""_key"": ""Rroonga is fast!"", ""tags"": [""Rroonga""]},
{""_key"": ""Groonga is fast!"", ""tags"": [""Groonga""]},
{""_key"": ""Mroonga is fast!"", ""tags"": [""Mroonga""]},
{""_key"": ""Groonga sticker!"", ""tags"": [""Sticker"", ""Groonga""]},
{""_key"": ""Groonga is good!"", ""tags"": [""Groonga""]}
]
[[0,0.0,0.0],5]
column_create Tags memos_tags COLUMN_INDEX Memos tags
[[0,0.0,0.0],true]
select Memos --filter '_id >= 3 && in_values(tags, ""Groonga"")' --output_columns _id,_score,_key,tags
[
  [
    0,
    0.0,
    0.0
  ],
  [
    [
      [
        1
      ],
      [
        [
          ""_id"",
          ""UInt32""
        ],
        [
          ""_score"",
          ""Int32""
        ],
        [
          ""_key"",
          ""ShortText""
        ],
        [
          ""tags"",
          ""Tags""
        ]
      ],
      [
        5,
        2,
        ""Groonga is good!"",
        [
          ""Groonga""
        ]
      ]
    ]
  ]
]","in_valuesのシーケンシャルサーチはリファレンスベクターに対応していないようですが、シーケンシャルに処理しようとしていました。
#$GRN_IN_VALUES_TOO_MANY_INDEX_MATCH_RATIO=0.7
table_create Tags TABLE_HASH_KEY ShortText
[[0,0.0,0.0],true]
table_create Memos TABLE_HASH_KEY ShortText
[[0,0.0,0.0],true]
column_create Memos tags COLUMN_VECTOR Tags
[[0,0.0,0.0],true]
load --table Memos
[
{""_key"": ""Rroonga is fast!"", ""tags"": [""Rroonga""]},
{""_key"": ""Groonga is fast!"", ""tags"": [""Groonga""]},
{""_key"": ""Mroonga is fast!"", ""tags"": [""Mroonga""]},
{""_key"": ""Groonga sticker!"", ""tags"": [""Sticker"", ""Groonga""]},
{""_key"": ""Groonga is good!"", ""tags"": [""Groonga""]}
]
[[0,0.0,0.0],5]
column_create Tags memos_tags COLUMN_INDEX Memos tags
[[0,0.0,0.0],true]
select Memos --filter '_id >= 3 && in_values(tags, ""Groonga"")' --output_columns _id,_score,_key,tags
[
  [
    0,
    0.0,
    0.0
  ],
  [
    [
      [
        1
      ],
      [
        [
          ""_id"",
          ""UInt32""
        ],
        [
          ""_score"",
          ""Int32""
        ],
        [
          ""_key"",
          ""ShortText""
        ],
        [
          ""tags"",
          ""Tags""
        ]
      ],
      [
        5,
        2,
        ""Groonga is good!"",
        [
          ""Groonga""
        ]
      ]
    ]
  ]
]",True,{}
groonga/groonga,https://github.com/groonga/groonga,629,2017-01-18T22:24:54Z,2017-01-24T10:22:24Z,2017-06-13T07:07:21Z,MERGED,True,122,8,5,https://github.com/naoa,proc in_values: support sequential_search for reference vector column,1,[],https://github.com/groonga/groonga/pull/629,https://github.com/kou,2,https://github.com/groonga/groonga/pull/629#issuecomment-274765823,"in_valuesのシーケンシャルサーチはリファレンスベクターに対応していないようですが、シーケンシャルに処理しようとしていました。
#$GRN_IN_VALUES_TOO_MANY_INDEX_MATCH_RATIO=0.7
table_create Tags TABLE_HASH_KEY ShortText
[[0,0.0,0.0],true]
table_create Memos TABLE_HASH_KEY ShortText
[[0,0.0,0.0],true]
column_create Memos tags COLUMN_VECTOR Tags
[[0,0.0,0.0],true]
load --table Memos
[
{""_key"": ""Rroonga is fast!"", ""tags"": [""Rroonga""]},
{""_key"": ""Groonga is fast!"", ""tags"": [""Groonga""]},
{""_key"": ""Mroonga is fast!"", ""tags"": [""Mroonga""]},
{""_key"": ""Groonga sticker!"", ""tags"": [""Sticker"", ""Groonga""]},
{""_key"": ""Groonga is good!"", ""tags"": [""Groonga""]}
]
[[0,0.0,0.0],5]
column_create Tags memos_tags COLUMN_INDEX Memos tags
[[0,0.0,0.0],true]
select Memos --filter '_id >= 3 && in_values(tags, ""Groonga"")' --output_columns _id,_score,_key,tags
[
  [
    0,
    0.0,
    0.0
  ],
  [
    [
      [
        1
      ],
      [
        [
          ""_id"",
          ""UInt32""
        ],
        [
          ""_score"",
          ""Int32""
        ],
        [
          ""_key"",
          ""ShortText""
        ],
        [
          ""tags"",
          ""Tags""
        ]
      ],
      [
        5,
        2,
        ""Groonga is good!"",
        [
          ""Groonga""
        ]
      ]
    ]
  ]
]",マージしました！,True,{}
groonga/groonga,https://github.com/groonga/groonga,630,2017-01-21T11:15:26Z,2017-01-21T13:06:15Z,2017-01-22T14:57:41Z,CLOSED,False,23,0,1,https://github.com/genki,Added dockerfile,1,[],https://github.com/groonga/groonga/pull/630,https://github.com/genki,1,https://github.com/groonga/groonga/pull/630,Added Dockerfile based on alpine linux image.,Added Dockerfile based on alpine linux image.,True,{}
groonga/groonga,https://github.com/groonga/groonga,630,2017-01-21T11:15:26Z,2017-01-21T13:06:15Z,2017-01-22T14:57:41Z,CLOSED,False,23,0,1,https://github.com/genki,Added dockerfile,1,[],https://github.com/groonga/groonga/pull/630,https://github.com/kou,2,https://github.com/groonga/groonga/pull/630#issuecomment-274257538,Added Dockerfile based on alpine linux image.,"Thanks.
How about creating a new repository for Docker as ""groonga/docker"" like mroonga/docker? If it's reasonable, I'll create a repository.",True,{'THUMBS_UP': ['https://github.com/genki']}
groonga/groonga,https://github.com/groonga/groonga,630,2017-01-21T11:15:26Z,2017-01-21T13:06:15Z,2017-01-22T14:57:41Z,CLOSED,False,23,0,1,https://github.com/genki,Added dockerfile,1,[],https://github.com/groonga/groonga/pull/630,https://github.com/genki,3,https://github.com/groonga/groonga/pull/630#issuecomment-274260350,Added Dockerfile based on alpine linux image.,@kou it's nice. Could you create it?,True,{}
groonga/groonga,https://github.com/groonga/groonga,630,2017-01-21T11:15:26Z,2017-01-21T13:06:15Z,2017-01-22T14:57:41Z,CLOSED,False,23,0,1,https://github.com/genki,Added dockerfile,1,[],https://github.com/groonga/groonga/pull/630,https://github.com/kou,4,https://github.com/groonga/groonga/pull/630#issuecomment-274260608,Added Dockerfile based on alpine linux image.,Sure. I've created https://github.com/groonga/docker . You have admin permission. Please commit the Dockerfile directly!,True,{}
groonga/groonga,https://github.com/groonga/groonga,630,2017-01-21T11:15:26Z,2017-01-21T13:06:15Z,2017-01-22T14:57:41Z,CLOSED,False,23,0,1,https://github.com/genki,Added dockerfile,1,[],https://github.com/groonga/groonga/pull/630,https://github.com/genki,5,https://github.com/groonga/groonga/pull/630#issuecomment-274270878,Added Dockerfile based on alpine linux image.,@kou thanks!,True,{}
groonga/groonga,https://github.com/groonga/groonga,630,2017-01-21T11:15:26Z,2017-01-21T13:06:15Z,2017-01-22T14:57:41Z,CLOSED,False,23,0,1,https://github.com/genki,Added dockerfile,1,[],https://github.com/groonga/groonga/pull/630,https://github.com/kou,6,https://github.com/groonga/groonga/pull/630#issuecomment-274325891,Added Dockerfile based on alpine linux image.,"If you have an account on https://hub.docker.com/ , please tell me. I'll add you to ""groonga"" organization: https://hub.docker.com/u/groonga/",True,{}
groonga/groonga,https://github.com/groonga/groonga,630,2017-01-21T11:15:26Z,2017-01-21T13:06:15Z,2017-01-22T14:57:41Z,CLOSED,False,23,0,1,https://github.com/genki,Added dockerfile,1,[],https://github.com/groonga/groonga/pull/630,https://github.com/genki,7,https://github.com/groonga/groonga/pull/630#issuecomment-274332146,Added Dockerfile based on alpine linux image.,@kou my account is takiuchi,True,{}
groonga/groonga,https://github.com/groonga/groonga,630,2017-01-21T11:15:26Z,2017-01-21T13:06:15Z,2017-01-22T14:57:41Z,CLOSED,False,23,0,1,https://github.com/genki,Added dockerfile,1,[],https://github.com/groonga/groonga/pull/630,https://github.com/kou,8,https://github.com/groonga/groonga/pull/630#issuecomment-274334570,Added Dockerfile based on alpine linux image.,"Thanks. I've added you.
Now you can also use https://hub.docker.com/r/groonga/groonga/ .",True,{}
groonga/groonga,https://github.com/groonga/groonga,630,2017-01-21T11:15:26Z,2017-01-21T13:06:15Z,2017-01-22T14:57:41Z,CLOSED,False,23,0,1,https://github.com/genki,Added dockerfile,1,[],https://github.com/groonga/groonga/pull/630,https://github.com/genki,9,https://github.com/groonga/groonga/pull/630#issuecomment-274335268,Added Dockerfile based on alpine linux image.,"@kou  This repository seems normal repo. The automated build needs to have been setup by special way in the menu ""Create Automated Build"".",True,{}
groonga/groonga,https://github.com/groonga/groonga,630,2017-01-21T11:15:26Z,2017-01-21T13:06:15Z,2017-01-22T14:57:41Z,CLOSED,False,23,0,1,https://github.com/genki,Added dockerfile,1,[],https://github.com/groonga/groonga/pull/630,https://github.com/kou,10,https://github.com/groonga/groonga/pull/630#issuecomment-274335555,Added Dockerfile based on alpine linux image.,"Sorry. Could you try to recreate the repository? You have admin permission in the organization. If you can recreate the repository, we can confirm that you have right permission.",True,{}
groonga/groonga,https://github.com/groonga/groonga,630,2017-01-21T11:15:26Z,2017-01-21T13:06:15Z,2017-01-22T14:57:41Z,CLOSED,False,23,0,1,https://github.com/genki,Added dockerfile,1,[],https://github.com/groonga/groonga/pull/630,https://github.com/genki,11,https://github.com/groonga/groonga/pull/630#issuecomment-274335631,Added Dockerfile based on alpine linux image.,"okey, I will do it :)",True,{}
groonga/groonga,https://github.com/groonga/groonga,630,2017-01-21T11:15:26Z,2017-01-21T13:06:15Z,2017-01-22T14:57:41Z,CLOSED,False,23,0,1,https://github.com/genki,Added dockerfile,1,[],https://github.com/groonga/groonga/pull/630,https://github.com/kou,12,https://github.com/groonga/groonga/pull/630#issuecomment-274335683,Added Dockerfile based on alpine linux image.,Thanks!,True,{}
groonga/groonga,https://github.com/groonga/groonga,632,2017-01-25T22:30:27Z,2017-01-27T06:54:30Z,2017-01-27T06:54:48Z,MERGED,True,25,3,1,https://github.com/kou,ii: add missing reused check,1,[],https://github.com/groonga/groonga/pull/632,https://github.com/kou,1,https://github.com/groonga/groonga/pull/632,@daijiro ここってreusedなチェックって必要そうですか！？,@daijiro ここってreusedなチェックって必要そうですか！？,True,{}
groonga/groonga,https://github.com/groonga/groonga,632,2017-01-25T22:30:27Z,2017-01-27T06:54:30Z,2017-01-27T06:54:48Z,MERGED,True,25,3,1,https://github.com/kou,ii: add missing reused check,1,[],https://github.com/groonga/groonga/pull/632,https://github.com/yoku0825,2,https://github.com/groonga/groonga/pull/632#issuecomment-275285440,@daijiro ここってreusedなチェックって必要そうですか！？,"ウチのクラッシュ時のバックトレースです
https://gist.githubusercontent.com/yoku0825/5eb91846d0e300f92b20f620edc0a024/raw/2e96aba28c6b414c71379c95bf7eb9b653fc63c3/bt.txt",True,{}
groonga/groonga,https://github.com/groonga/groonga,632,2017-01-25T22:30:27Z,2017-01-27T06:54:30Z,2017-01-27T06:54:48Z,MERGED,True,25,3,1,https://github.com/kou,ii: add missing reused check,1,[],https://github.com/groonga/groonga/pull/632,https://github.com/yoku0825,3,https://github.com/groonga/groonga/pull/632#issuecomment-275334158,@daijiro ここってreusedなチェックって必要そうですか！？,"別のcoreが残っていたので、そっちのbt fullとthread1 frame3 (Thread 13の #1 chunk_mergeと因縁が？）を取ってみました。
https://gist.github.com/yoku0825/5eb91846d0e300f92b20f620edc0a024/raw/0d3cb491df12b996adeee0bb50e769926a54f6aa/ya_bt_full.txt.gz
https://gist.github.com/yoku0825/5eb91846d0e300f92b20f620edc0a024/raw/0d3cb491df12b996adeee0bb50e769926a54f6aa/ya_thread1_frame3.txt",True,{}
groonga/groonga,https://github.com/groonga/groonga,632,2017-01-25T22:30:27Z,2017-01-27T06:54:30Z,2017-01-27T06:54:48Z,MERGED,True,25,3,1,https://github.com/kou,ii: add missing reused check,1,[],https://github.com/groonga/groonga/pull/632,https://github.com/kou,4,https://github.com/groonga/groonga/pull/632#issuecomment-275541634,@daijiro ここってreusedなチェックって必要そうですか！？,"あざっす！
同じterm IDを対象にしていたので関係がありそうな気がしました！
どっちもterm IDが1なのは気になりますが、このデータのケースだとterm ID 1のtermが更新されやすいだけなのかしら。",True,{}
groonga/groonga,https://github.com/groonga/groonga,632,2017-01-25T22:30:27Z,2017-01-27T06:54:30Z,2017-01-27T06:54:48Z,MERGED,True,25,3,1,https://github.com/kou,ii: add missing reused check,1,[],https://github.com/groonga/groonga/pull/632,https://github.com/kou,5,https://github.com/groonga/groonga/pull/632#issuecomment-275601077,@daijiro ここってreusedなチェックって必要そうですか！？,問題は解決していないけどこのチェックは必要なのでマージする。,True,{}
groonga/groonga,https://github.com/groonga/groonga,634,2017-01-28T01:56:48Z,2017-01-29T13:46:24Z,2017-02-01T07:48:28Z,MERGED,True,4,4,3,https://github.com/naoa,Support args for window function,1,[],https://github.com/groonga/groonga/pull/634,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/634,"window関数の引数がうまく渡っていないようで渡せるようにしたいです。
時系列を右肩上がりになるよう累積値で取得したくて、window関数を自作しています。
window関数があると全部出力しなくても昇順で累積した後に降順でソートして必要な直近のものだけだしたりできて便利です。
https://github.com/naoa/groonga-function-yawindow","window関数の引数がうまく渡っていないようで渡せるようにしたいです。
時系列を右肩上がりになるよう累積値で取得したくて、window関数を自作しています。
window関数があると全部出力しなくても昇順で累積した後に降順でソートして必要な直近のものだけだしたりできて便利です。
https://github.com/naoa/groonga-function-yawindow",True,{}
groonga/groonga,https://github.com/groonga/groonga,634,2017-01-28T01:56:48Z,2017-01-29T13:46:24Z,2017-02-01T07:48:28Z,MERGED,True,4,4,3,https://github.com/naoa,Support args for window function,1,[],https://github.com/groonga/groonga/pull/634,https://github.com/kou,2,https://github.com/groonga/groonga/pull/634#issuecomment-275917944,"window関数の引数がうまく渡っていないようで渡せるようにしたいです。
時系列を右肩上がりになるよう累積値で取得したくて、window関数を自作しています。
window関数があると全部出力しなくても昇順で累積した後に降順でソートして必要な直近のものだけだしたりできて便利です。
https://github.com/naoa/groonga-function-yawindow","マージしました！
running_total相当のものはwindow_sumとして追加しました。
group_running_totalはウィンドウ関数とは外のところでやりたくて、↓みたいなcolumns[LABEL].window.group_keysを指定したらグループ毎にウィンドウ関数を呼ぶようにしたいです。
select Items \
  --drilldowns[yearly_sale].keys 'year,price' \
  --drilldowns[yearly_sale].columns[total].stage initial \
  --drilldowns[yearly_sale].columns[total].value 'window_sum(_nsubrecs)' \
  --drilldowns[yearly_sale].columns[total].type Int32 \
  --drilldowns[yearly_sale].columns[total].window.sort_keys _value.year \
  --drilldowns[yearly_sale].columns[total].window.group_keys _value.price \
  --drilldowns[yearly_sale].sort_keys _value.year \
  --drilldowns[yearly_sale].output_columns '_key[0], _key[1], _nsubrecs, total'

grn_table_apply_window_function()の中の↓をグループ毎に実行するイメージです。
  grn_window_init(ctx, &window, table);
  grn_window_set_direction(ctx, &window, window.direction);
  grn_window_set_sort_keys(ctx, &window,
                           definition->sort_keys,
                           definition->n_sort_keys);
  grn_expr_call_window_function(ctx,
                                output_column,
                                &window,
                                window_function_call);
  grn_window_fin(ctx, &window);",True,{}
groonga/groonga,https://github.com/groonga/groonga,634,2017-01-28T01:56:48Z,2017-01-29T13:46:24Z,2017-02-01T07:48:28Z,MERGED,True,4,4,3,https://github.com/naoa,Support args for window function,1,[],https://github.com/groonga/groonga/pull/634,https://github.com/naoa,3,https://github.com/groonga/groonga/pull/634#issuecomment-275958475,"window関数の引数がうまく渡っていないようで渡せるようにしたいです。
時系列を右肩上がりになるよう累積値で取得したくて、window関数を自作しています。
window関数があると全部出力しなくても昇順で累積した後に降順でソートして必要な直近のものだけだしたりできて便利です。
https://github.com/naoa/groonga-function-yawindow","ありがとうございます！
少し見てみたらPostgreSQLのウィンドウ関数版のsumと同じような動きですね。

group_running_totalはウィンドウ関数とは外のところでやりたくて、↓みたいなcolumns[LABEL].window.group_keysを指定したらグループ毎にウィンドウ関数を呼ぶようにしたいです。

わかりました。今のところアプリ上、最低限必要なところは満たせたので、
少し落ち着いてから、まだ実装されてなかったら対応してみたいと思います。
あとは、0の値を集計対象から外したくて、window.filterみたいなのがあるといいなぁ
とか思っています。",True,{}
groonga/groonga,https://github.com/groonga/groonga,634,2017-01-28T01:56:48Z,2017-01-29T13:46:24Z,2017-02-01T07:48:28Z,MERGED,True,4,4,3,https://github.com/naoa,Support args for window function,1,[],https://github.com/groonga/groonga/pull/634,https://github.com/kou,4,https://github.com/groonga/groonga/pull/634#issuecomment-276560760,"window関数の引数がうまく渡っていないようで渡せるようにしたいです。
時系列を右肩上がりになるよう累積値で取得したくて、window関数を自作しています。
window関数があると全部出力しなくても昇順で累積した後に降順でソートして必要な直近のものだけだしたりできて便利です。
https://github.com/naoa/groonga-function-yawindow",window.group_keysは実装しました。window.filterはあってよいと思います！,True,{}
groonga/groonga,https://github.com/groonga/groonga,634,2017-01-28T01:56:48Z,2017-01-29T13:46:24Z,2017-02-01T07:48:28Z,MERGED,True,4,4,3,https://github.com/naoa,Support args for window function,1,[],https://github.com/groonga/groonga/pull/634,https://github.com/naoa,5,https://github.com/groonga/groonga/pull/634#issuecomment-276574426,"window関数の引数がうまく渡っていないようで渡せるようにしたいです。
時系列を右肩上がりになるよう累積値で取得したくて、window関数を自作しています。
window関数があると全部出力しなくても昇順で累積した後に降順でソートして必要な直近のものだけだしたりできて便利です。
https://github.com/naoa/groonga-function-yawindow","おお、ありがとうございます！
私のユースケースで置き換えられるか試してみたんですが、うまくグループ対象ごとに昇順に累積できませんでした。
ちょっとややこしいのですが、参照ベクターが絡んでいる関係上、１回一時カラムを作っています。
以下では、[2012, ""Book"", 3], [2013, ""Book"", 2]となっていますが、2012の方が先に1になってほしいです。
今は、少し手が空いていなくてコードを追えていませんが、ひとまず報告だけしておきます。
able_create Categories TABLE_HASH_KEY ShortText
[[0,0.0,0.0],true]
table_create Items TABLE_HASH_KEY ShortText
[[0,0.0,0.0],true]
column_create Items year COLUMN_SCALAR Int32
[[0,0.0,0.0],true]
column_create Items categories COLUMN_VECTOR Categories
[[0,0.0,0.0],true]
load --table Items
[
{""_key"": ""item1"", ""year"": 2013, ""categories"": [""Book""]},
{""_key"": ""item2"", ""year"": 2013, ""categories"": [""Book"", ""Office Supply""]},
{""_key"": ""item3"", ""year"": 2013, ""categories"": [""Office Supply""]},
{""_key"": ""item4"", ""year"": 2010, ""categories"": [""Food""]},
{""_key"": ""item5"", ""year"": 2010, ""categories"": [""Food""]},
{""_key"": ""item6"", ""year"": 2012, ""categories"": [""Food"", ""Drink""]},
{""_key"": ""item7"", ""year"": 2012, ""categories"": [""Book""]}
]
[[0,0.0,0.0],7]
select Items   --drilldowns[yearly_sale].keys 'year,categories'  \
--drilldowns[yearly_sale].columns[category].stage initial \
--drilldowns[yearly_sale].columns[category].type Categories  \
--drilldowns[yearly_sale].columns[category].flags COLUMN_SCALAR  \
--drilldowns[yearly_sale].columns[category].value '_key[1]' \
--drilldowns[yearly_sale].columns[total].stage initial \
--drilldowns[yearly_sale].columns[total].value 'window_sum(_nsubrecs)'  \
--drilldowns[yearly_sale].columns[total].type Int32  \
--drilldowns[yearly_sale].columns[total].window.group_keys category  \
--drilldowns[yearly_sale].columns[total].window.sort_keys _value.year \
 --drilldowns[yearly_sale].sort_keys _value.year \
 --drilldowns[yearly_sale].output_columns '_key[0], _key[1], _nsubrecs, total'
[
  [
    0,
    0.0,
    0.0
  ],
  [
    [
      [
        7
      ],
      [
        [
          ""_id"",
          ""UInt32""
        ],
        [
          ""_key"",
          ""ShortText""
        ],
        [
          ""categories"",
          ""Categories""
        ],
        [
          ""year"",
          ""Int32""
        ]
      ],
      [
        1,
        ""item1"",
        [
          ""Book""
        ],
        2013
      ],
      [
        2,
        ""item2"",
        [
          ""Book"",
          ""Office Supply""
        ],
        2013
      ],
      [
        3,
        ""item3"",
        [
          ""Office Supply""
        ],
        2013
      ],
      [
        4,
        ""item4"",
        [
          ""Food""
        ],
        2010
      ],
      [
        5,
        ""item5"",
        [
          ""Food""
        ],
        2010
      ],
      [
        6,
        ""item6"",
        [
          ""Food"",
          ""Drink""
        ],
        2012
      ],
      [
        7,
        ""item7"",
        [
          ""Book""
        ],
        2012
      ]
    ],
    {
      ""yearly_sale"": [
        [
          6
        ],
        [
          [
            ""_key[0]"",
            null
          ],
          [
            ""_key[1]"",
            null
          ],
          [
            ""_nsubrecs"",
            ""Int32""
          ],
          [
            ""total"",
            ""Int32""
          ]
        ],
        [
          2010,
          ""Food"",
          2,
          2
        ],
        [
          2012,
          ""Drink"",
          1,
          1
        ],
        [
          2012,
          ""Food"",
          1,
          3
        ],
        [
          2012,
          ""Book"",
          1,
          3
        ],
        [
          2013,
          ""Book"",
          2,
          2
        ],
        [
          2013,
          ""Office Supply"",
          2,
          2
        ]
      ]
    }
  ]
]",True,{}
groonga/groonga,https://github.com/groonga/groonga,634,2017-01-28T01:56:48Z,2017-01-29T13:46:24Z,2017-02-01T07:48:28Z,MERGED,True,4,4,3,https://github.com/naoa,Support args for window function,1,[],https://github.com/groonga/groonga/pull/634,https://github.com/kou,6,https://github.com/groonga/groonga/pull/634#issuecomment-276582527,"window関数の引数がうまく渡っていないようで渡せるようにしたいです。
時系列を右肩上がりになるよう累積値で取得したくて、window関数を自作しています。
window関数があると全部出力しなくても昇順で累積した後に降順でソートして必要な直近のものだけだしたりできて便利です。
https://github.com/naoa/groonga-function-yawindow","これはバグだったので直しました。
window.filterはなくてよさそうな気がしてきました。ウィンドウ関数は対象のレコードすべてを処理するべきで、フィルターするのはもっと別の場所な気がします。",True,{}
groonga/groonga,https://github.com/groonga/groonga,634,2017-01-28T01:56:48Z,2017-01-29T13:46:24Z,2017-02-01T07:48:28Z,MERGED,True,4,4,3,https://github.com/naoa,Support args for window function,1,[],https://github.com/groonga/groonga/pull/634,https://github.com/naoa,7,https://github.com/groonga/groonga/pull/634#issuecomment-276593324,"window関数の引数がうまく渡っていないようで渡せるようにしたいです。
時系列を右肩上がりになるよう累積値で取得したくて、window関数を自作しています。
window関数があると全部出力しなくても昇順で累積した後に降順でソートして必要な直近のものだけだしたりできて便利です。
https://github.com/naoa/groonga-function-yawindow","ありがとうございます！正常に動くのを確認できたので置き換えました。
Timeカラムに対する値なしが0000-01-01になっている場合に、累積値を取ると、カウントしたくない0000-01-01の数でドカンとでかくなっちゃうんですよね。累積の場合、後の値に影響しちゃっているのでdrilldown_filterだと外せないんですよね。
なんか除外する方法があると良さそうなのですが、今はとりあえずいいかなって思って後回しにしています。
（クロス集計じゃないところは数も大したことないので今のところ結局アプリ側で累積している）",True,{}
groonga/groonga,https://github.com/groonga/groonga,635,2017-02-07T08:36:16Z,2017-02-13T02:09:33Z,2017-02-13T02:09:42Z,MERGED,True,6,1,1,https://github.com/kou,Fix a crash bug by lock_clear against temporary database,1,[],https://github.com/groonga/groonga/pull/635,https://github.com/kou,1,https://github.com/groonga/groonga/pull/635,"% groonga
> lock_clear
(crash)","% groonga
> lock_clear
(crash)",True,{}
groonga/groonga,https://github.com/groonga/groonga,636,2017-02-07T09:15:52Z,2017-02-13T02:10:13Z,2017-02-13T02:10:17Z,MERGED,True,1,1,2,https://github.com/kou,Export grn_ii_cursor_next_pos(),1,[],https://github.com/groonga/groonga/pull/636,https://github.com/kou,1,https://github.com/groonga/groonga/pull/636,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,640,2017-03-10T06:33:09Z,2017-03-10T07:10:20Z,2017-03-14T07:39:33Z,CLOSED,False,73,4,3,https://github.com/kou,grn_pat_scan: ignore blanks in target string.,1,[],https://github.com/groonga/groonga/pull/640,https://github.com/kou,1,https://github.com/groonga/groonga/pull/640,"With this change, highlight family functions support highlighting text
that has some blanks. See the test in this change for example.","With this change, highlight family functions support highlighting text
that has some blanks. See the test in this change for example.",True,{}
groonga/groonga,https://github.com/groonga/groonga,640,2017-03-10T06:33:09Z,2017-03-10T07:10:20Z,2017-03-14T07:39:33Z,CLOSED,False,73,4,3,https://github.com/kou,grn_pat_scan: ignore blanks in target string.,1,[],https://github.com/groonga/groonga/pull/640,https://github.com/kou,2,https://github.com/groonga/groonga/pull/640#issuecomment-285595140,"With this change, highlight family functions support highlighting text
that has some blanks. See the test in this change for example.",悪影響の方が大きそう（「apple」で「app leader」がハイライトされるとか）なのでボツ。,True,{}
groonga/groonga,https://github.com/groonga/groonga,640,2017-03-10T06:33:09Z,2017-03-10T07:10:20Z,2017-03-14T07:39:33Z,CLOSED,False,73,4,3,https://github.com/kou,grn_pat_scan: ignore blanks in target string.,1,[],https://github.com/groonga/groonga/pull/640,https://github.com/kou,3,https://github.com/groonga/groonga/pull/640#issuecomment-286344438,"With this change, highlight family functions support highlighting text
that has some blanks. See the test in this change for example.",アルファベット・数字の連続の中に空白があるときはハイライトしないようにした。これで「apple」で「app leader」がハイライトされるというのはなくなる。,True,{}
groonga/groonga,https://github.com/groonga/groonga,641,2017-03-14T07:41:38Z,2017-03-14T07:49:55Z,2017-03-14T07:49:58Z,MERGED,True,98,8,3,https://github.com/kou,grn_pat_scan: ignore blanks in target string.,1,[],https://github.com/groonga/groonga/pull/641,https://github.com/kou,1,https://github.com/groonga/groonga/pull/641,"With this change, highlight family functions support highlighting text
that has some blanks. See the test in this change for example.","With this change, highlight family functions support highlighting text
that has some blanks. See the test in this change for example.",True,{}
groonga/groonga,https://github.com/groonga/groonga,641,2017-03-14T07:41:38Z,2017-03-14T07:49:55Z,2017-03-14T07:49:58Z,MERGED,True,98,8,3,https://github.com/kou,grn_pat_scan: ignore blanks in target string.,1,[],https://github.com/groonga/groonga/pull/641,https://github.com/kou,2,https://github.com/groonga/groonga/pull/641#issuecomment-286344838,"With this change, highlight family functions support highlighting text
that has some blanks. See the test in this change for example.",#640 のリベンジ。,True,{}
groonga/groonga,https://github.com/groonga/groonga,642,2017-03-17T05:06:45Z,2017-03-17T06:11:11Z,2017-03-17T06:12:05Z,MERGED,True,138,11,4,https://github.com/kou,highlight_html: support similar search,2,[],https://github.com/groonga/groonga/pull/642,https://github.com/kou,1,https://github.com/groonga/groonga/pull/642,"類似文書検索のときに検索文書をトークナイズしてハイライト対象のキーワードに追加してみました。
句読点とかストップワードをちゃんと設定すれば実用になりそうな印象があります、が、ストップワードなしだといろんなところがハイライトされてビミョウです。。。","類似文書検索のときに検索文書をトークナイズしてハイライト対象のキーワードに追加してみました。
句読点とかストップワードをちゃんと設定すれば実用になりそうな印象があります、が、ストップワードなしだといろんなところがハイライトされてビミョウです。。。",True,{}
groonga/groonga,https://github.com/groonga/groonga,642,2017-03-17T05:06:45Z,2017-03-17T06:11:11Z,2017-03-17T06:12:05Z,MERGED,True,138,11,4,https://github.com/kou,highlight_html: support similar search,2,[],https://github.com/groonga/groonga/pull/642,https://github.com/kou,2,https://github.com/groonga/groonga/pull/642#issuecomment-287275644,"類似文書検索のときに検索文書をトークナイズしてハイライト対象のキーワードに追加してみました。
句読点とかストップワードをちゃんと設定すれば実用になりそうな印象があります、が、ストップワードなしだといろんなところがハイライトされてビミョウです。。。",半分以上の文書に出現しているトークンを自動で間引くようにしたら手動でストップワードを管理しなくてもそれっぽくなったので、そういうのを入れてから取り込んだ。,True,{}
groonga/groonga,https://github.com/groonga/groonga,645,2017-03-27T03:14:33Z,2017-03-30T03:24:05Z,2017-04-03T00:50:04Z,MERGED,True,43,36,4,https://github.com/kou,package windows: use Docker,1,[],https://github.com/groonga/groonga/pull/645,https://github.com/kou,1,https://github.com/groonga/groonga/pull/645,It'll reduce build environment preparing time.,It'll reduce build environment preparing time.,True,{}
groonga/groonga,https://github.com/groonga/groonga,645,2017-03-27T03:14:33Z,2017-03-30T03:24:05Z,2017-04-03T00:50:04Z,MERGED,True,43,36,4,https://github.com/kou,package windows: use Docker,1,[],https://github.com/groonga/groonga/pull/645,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/645#issuecomment-290291436,It'll reduce build environment preparing time.,"Looks, good. Merged.",True,{}
groonga/groonga,https://github.com/groonga/groonga,650,2017-04-12T00:14:19Z,2017-04-12T00:14:39Z,2017-04-12T00:14:41Z,MERGED,True,549,19,4,https://github.com/kou,"Support index search for "".*"" regexp pattern",2,[],https://github.com/groonga/groonga/pull/650,https://github.com/kou,1,https://github.com/groonga/groonga/pull/650,"TODO:

Need more tests.","TODO:

Need more tests.",True,{}
groonga/groonga,https://github.com/groonga/groonga,651,2017-04-14T03:31:37Z,2017-04-17T23:45:03Z,2019-02-01T12:11:47Z,MERGED,True,173,0,2,https://github.com/kenhys,test: add test case when match_columns parameter is changed,1,[],https://github.com/groonga/groonga/pull/651,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/651,"When the value of --match_columms parameter is changed, Groonga
returns result without using cache.","When the value of --match_columms parameter is changed, Groonga
returns result without using cache.",True,{}
groonga/groonga,https://github.com/groonga/groonga,651,2017-04-14T03:31:37Z,2017-04-17T23:45:03Z,2019-02-01T12:11:47Z,MERGED,True,173,0,2,https://github.com/kenhys,test: add test case when match_columns parameter is changed,1,[],https://github.com/groonga/groonga/pull/651,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/651#issuecomment-294396399,"When the value of --match_columms parameter is changed, Groonga
returns result without using cache.",I fixed test case to logical_select.,True,{}
groonga/groonga,https://github.com/groonga/groonga,651,2017-04-14T03:31:37Z,2017-04-17T23:45:03Z,2019-02-01T12:11:47Z,MERGED,True,173,0,2,https://github.com/kenhys,test: add test case when match_columns parameter is changed,1,[],https://github.com/groonga/groonga/pull/651,https://github.com/kou,3,https://github.com/groonga/groonga/pull/651#issuecomment-294628615,"When the value of --match_columms parameter is changed, Groonga
returns result without using cache.",Cache tests for select are also useful. So it was better that we add both select version and logical_select version.,True,{}
groonga/groonga,https://github.com/groonga/groonga,652,2017-04-14T05:16:16Z,2017-04-19T05:18:28Z,2019-02-01T12:13:13Z,MERGED,True,69,0,2,https://github.com/kenhys,test: add no hit dynamic columns with sort_keys without error,1,[],https://github.com/groonga/groonga/pull/652,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/652,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,652,2017-04-14T05:16:16Z,2017-04-19T05:18:28Z,2019-02-01T12:13:13Z,MERGED,True,69,0,2,https://github.com/kenhys,test: add no hit dynamic columns with sort_keys without error,1,[],https://github.com/groonga/groonga/pull/652,https://github.com/kou,2,https://github.com/groonga/groonga/pull/652#issuecomment-294629047,,test/command/suite/select/columns/stage/initial/no_hit/sort_keys.test is better because this test focuses on columns not sort_keys.,True,{}
groonga/groonga,https://github.com/groonga/groonga,652,2017-04-14T05:16:16Z,2017-04-19T05:18:28Z,2019-02-01T12:13:13Z,MERGED,True,69,0,2,https://github.com/kenhys,test: add no hit dynamic columns with sort_keys without error,1,[],https://github.com/groonga/groonga/pull/652,https://github.com/kenhys,3,https://github.com/groonga/groonga/pull/652#issuecomment-295096345,,I've fixed test case.,True,{}
groonga/groonga,https://github.com/groonga/groonga,652,2017-04-14T05:16:16Z,2017-04-19T05:18:28Z,2019-02-01T12:13:13Z,MERGED,True,69,0,2,https://github.com/kenhys,test: add no hit dynamic columns with sort_keys without error,1,[],https://github.com/groonga/groonga/pull/652,https://github.com/kou,4,https://github.com/groonga/groonga/pull/652#issuecomment-295097559,,Merged!,True,{}
groonga/groonga,https://github.com/groonga/groonga,653,2017-04-14T05:23:07Z,2017-04-17T23:52:41Z,2019-02-01T12:11:54Z,MERGED,True,140,0,2,https://github.com/kenhys,test: add query test case without cache,1,[],https://github.com/groonga/groonga/pull/653,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/653,"Confirm whether query parameter is changed, Groonga returns result
without using cache.","Confirm whether query parameter is changed, Groonga returns result
without using cache.",True,{}
groonga/groonga,https://github.com/groonga/groonga,653,2017-04-14T05:23:07Z,2017-04-17T23:52:41Z,2019-02-01T12:11:54Z,MERGED,True,140,0,2,https://github.com/kenhys,test: add query test case without cache,1,[],https://github.com/groonga/groonga/pull/653,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/653#issuecomment-294402455,"Confirm whether query parameter is changed, Groonga returns result
without using cache.",I've fixed test case to use logical_select,True,{}
groonga/groonga,https://github.com/groonga/groonga,654,2017-04-14T05:39:26Z,2017-04-17T04:05:54Z,2017-04-17T04:05:54Z,CLOSED,False,163,0,2,https://github.com/kenhys,test: add columns[NAME].stage test case without cache,1,[],https://github.com/groonga/groonga/pull/654,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/654,TODO: confirm the value of price_with_tax,TODO: confirm the value of price_with_tax,True,{}
groonga/groonga,https://github.com/groonga/groonga,654,2017-04-14T05:39:26Z,2017-04-17T04:05:54Z,2017-04-17T04:05:54Z,CLOSED,False,163,0,2,https://github.com/kenhys,test: add columns[NAME].stage test case without cache,1,[],https://github.com/groonga/groonga/pull/654,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/654#issuecomment-294401234,TODO: confirm the value of price_with_tax,stageの値を変更することで結果に違いが出るクエリにしないといけない,True,{}
groonga/groonga,https://github.com/groonga/groonga,656,2017-04-14T06:40:11Z,2017-04-19T07:36:59Z,2019-02-01T12:13:29Z,MERGED,True,161,0,2,https://github.com/kenhys,test: add columns[NAME].value test case without cache,1,[],https://github.com/groonga/groonga/pull/656,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/656,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,656,2017-04-14T06:40:11Z,2017-04-19T07:36:59Z,2019-02-01T12:13:29Z,MERGED,True,161,0,2,https://github.com/kenhys,test: add columns[NAME].value test case without cache,1,[],https://github.com/groonga/groonga/pull/656,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/656#issuecomment-294402542,,I've fixed test case to use logical_select,True,{}
groonga/groonga,https://github.com/groonga/groonga,656,2017-04-14T06:40:11Z,2017-04-19T07:36:59Z,2019-02-01T12:13:29Z,MERGED,True,161,0,2,https://github.com/kenhys,test: add columns[NAME].value test case without cache,1,[],https://github.com/groonga/groonga/pull/656,https://github.com/kou,3,https://github.com/groonga/groonga/pull/656#issuecomment-294629903,,We should put .expected file instead of .actual file.,True,{}
groonga/groonga,https://github.com/groonga/groonga,656,2017-04-14T06:40:11Z,2017-04-19T07:36:59Z,2019-02-01T12:13:29Z,MERGED,True,161,0,2,https://github.com/kenhys,test: add columns[NAME].value test case without cache,1,[],https://github.com/groonga/groonga/pull/656,https://github.com/kenhys,4,https://github.com/groonga/groonga/pull/656#issuecomment-295131471,,"Oops!
I've put .expected file.",True,{}
groonga/groonga,https://github.com/groonga/groonga,656,2017-04-14T06:40:11Z,2017-04-19T07:36:59Z,2019-02-01T12:13:29Z,MERGED,True,161,0,2,https://github.com/kenhys,test: add columns[NAME].value test case without cache,1,[],https://github.com/groonga/groonga/pull/656,https://github.com/kou,5,https://github.com/groonga/groonga/pull/656#issuecomment-295141196,,Merged!,True,{}
groonga/groonga,https://github.com/groonga/groonga,657,2017-04-14T07:06:52Z,2017-04-20T04:00:46Z,2019-05-22T02:55:13Z,MERGED,True,155,0,2,https://github.com/kenhys,test: add columns[NAME].window.sort_keys test case without cache,1,[],https://github.com/groonga/groonga/pull/657,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/657,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,657,2017-04-14T07:06:52Z,2017-04-20T04:00:46Z,2019-05-22T02:55:13Z,MERGED,True,155,0,2,https://github.com/kenhys,test: add columns[NAME].window.sort_keys test case without cache,1,[],https://github.com/groonga/groonga/pull/657,https://github.com/kou,2,https://github.com/groonga/groonga/pull/657#issuecomment-294631548,,UInt32 type comment column is a bit strange... I thought that comment column isShortText type but I was wrong.,True,{}
groonga/groonga,https://github.com/groonga/groonga,657,2017-04-14T07:06:52Z,2017-04-20T04:00:46Z,2019-05-22T02:55:13Z,MERGED,True,155,0,2,https://github.com/kenhys,test: add columns[NAME].window.sort_keys test case without cache,1,[],https://github.com/groonga/groonga/pull/657,https://github.com/kenhys,3,https://github.com/groonga/groonga/pull/657#issuecomment-295559798,,I've fixed test case to use logical_select.,True,{}
groonga/groonga,https://github.com/groonga/groonga,657,2017-04-14T07:06:52Z,2017-04-20T04:00:46Z,2019-05-22T02:55:13Z,MERGED,True,155,0,2,https://github.com/kenhys,test: add columns[NAME].window.sort_keys test case without cache,1,[],https://github.com/groonga/groonga/pull/657,https://github.com/kenhys,4,https://github.com/groonga/groonga/pull/657#issuecomment-295560271,,There is one concern about test result. It seems that the value of window_sum(price) is calculated each Logs_XXX.,True,{}
groonga/groonga,https://github.com/groonga/groonga,657,2017-04-14T07:06:52Z,2017-04-20T04:00:46Z,2019-05-22T02:55:13Z,MERGED,True,155,0,2,https://github.com/kenhys,test: add columns[NAME].window.sort_keys test case without cache,1,[],https://github.com/groonga/groonga/pull/657,https://github.com/kou,5,https://github.com/groonga/groonga/pull/657#issuecomment-295572162,,"Merged.

There is one concern about test result. It seems that the value of window_sum(price) is calculated each Logs_XXX.

It should be documented as a limitation or implemented.",True,{}
groonga/groonga,https://github.com/groonga/groonga,658,2017-04-14T07:22:35Z,2017-04-20T08:00:45Z,2019-05-22T02:55:10Z,MERGED,True,175,0,2,https://github.com/kenhys,test: add columns[NAME].window.group_keys test case without cache,1,[],https://github.com/groonga/groonga/pull/658,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/658,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,658,2017-04-14T07:22:35Z,2017-04-20T08:00:45Z,2019-05-22T02:55:10Z,MERGED,True,175,0,2,https://github.com/kenhys,test: add columns[NAME].window.group_keys test case without cache,1,[],https://github.com/groonga/groonga/pull/658,https://github.com/kou,2,https://github.com/groonga/groonga/pull/658#issuecomment-294631932,,All item and user values are same. They aren't good test cases.,True,{}
groonga/groonga,https://github.com/groonga/groonga,658,2017-04-14T07:22:35Z,2017-04-20T08:00:45Z,2019-05-22T02:55:10Z,MERGED,True,175,0,2,https://github.com/kenhys,test: add columns[NAME].window.group_keys test case without cache,1,[],https://github.com/groonga/groonga/pull/658,https://github.com/kou,3,https://github.com/groonga/groonga/pull/658#issuecomment-294631981,,It's better that window/group_keys.test instead of window_group_keys.test.,True,{}
groonga/groonga,https://github.com/groonga/groonga,658,2017-04-14T07:22:35Z,2017-04-20T08:00:45Z,2019-05-22T02:55:10Z,MERGED,True,175,0,2,https://github.com/kenhys,test: add columns[NAME].window.group_keys test case without cache,1,[],https://github.com/groonga/groonga/pull/658,https://github.com/kenhys,4,https://github.com/groonga/groonga/pull/658#issuecomment-295612316,,I've fixed test case.,True,{}
groonga/groonga,https://github.com/groonga/groonga,658,2017-04-14T07:22:35Z,2017-04-20T08:00:45Z,2019-05-22T02:55:10Z,MERGED,True,175,0,2,https://github.com/kenhys,test: add columns[NAME].window.group_keys test case without cache,1,[],https://github.com/groonga/groonga/pull/658,https://github.com/kou,5,https://github.com/groonga/groonga/pull/658#issuecomment-295620218,,Merged.,True,{}
groonga/groonga,https://github.com/groonga/groonga,659,2017-04-14T09:07:23Z,2017-04-18T00:26:12Z,2019-02-01T12:12:40Z,MERGED,True,388,0,2,https://github.com/kenhys,test: add drilldowns[LABEL].filter test case without cache,1,[],https://github.com/groonga/groonga/pull/659,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/659,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,659,2017-04-14T09:07:23Z,2017-04-18T00:26:12Z,2019-02-01T12:12:40Z,MERGED,True,388,0,2,https://github.com/kenhys,test: add drilldowns[LABEL].filter test case without cache,1,[],https://github.com/groonga/groonga/pull/659,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/659#issuecomment-294443907,,I've fixed test case to use logical_select.,True,{}
groonga/groonga,https://github.com/groonga/groonga,659,2017-04-14T09:07:23Z,2017-04-18T00:26:12Z,2019-02-01T12:12:40Z,MERGED,True,388,0,2,https://github.com/kenhys,test: add drilldowns[LABEL].filter test case without cache,1,[],https://github.com/groonga/groonga/pull/659,https://github.com/kou,3,https://github.com/groonga/groonga/pull/659#issuecomment-294634986,,It's better that query has --limit 0 option. Because the original records aren't important for drilldown tests.,True,{}
groonga/groonga,https://github.com/groonga/groonga,660,2017-04-14T09:20:29Z,2017-04-18T00:29:06Z,2019-02-01T12:12:29Z,MERGED,True,320,0,2,https://github.com/kenhys,test: add drilldowns[LABEL].columns[NAME].type test case without cache,1,[],https://github.com/groonga/groonga/pull/660,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/660,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,660,2017-04-14T09:20:29Z,2017-04-18T00:29:06Z,2019-02-01T12:12:29Z,MERGED,True,320,0,2,https://github.com/kenhys,test: add drilldowns[LABEL].columns[NAME].type test case without cache,1,[],https://github.com/groonga/groonga/pull/660,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/660#issuecomment-294443604,,I've fixed the test case to use logical_select.,True,{}
groonga/groonga,https://github.com/groonga/groonga,660,2017-04-14T09:20:29Z,2017-04-18T00:29:06Z,2019-02-01T12:12:29Z,MERGED,True,320,0,2,https://github.com/kenhys,test: add drilldowns[LABEL].columns[NAME].type test case without cache,1,[],https://github.com/groonga/groonga/pull/660,https://github.com/kou,3,https://github.com/groonga/groonga/pull/660#issuecomment-294635574,,output_columns _id for reducing needless output is a good practice.,True,{}
groonga/groonga,https://github.com/groonga/groonga,661,2017-04-14T09:33:31Z,2017-04-18T00:30:32Z,2019-02-01T12:12:51Z,MERGED,True,286,0,2,https://github.com/kenhys,test: add drilldowns[LABEL].columns[NAME].value test case without cache,1,[],https://github.com/groonga/groonga/pull/661,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/661,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,661,2017-04-14T09:33:31Z,2017-04-18T00:30:32Z,2019-02-01T12:12:51Z,MERGED,True,286,0,2,https://github.com/kenhys,test: add drilldowns[LABEL].columns[NAME].value test case without cache,1,[],https://github.com/groonga/groonga/pull/661,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/661#issuecomment-294444996,,I've fixed test case to use logical_select,True,{}
groonga/groonga,https://github.com/groonga/groonga,661,2017-04-14T09:33:31Z,2017-04-18T00:30:32Z,2019-02-01T12:12:51Z,MERGED,True,286,0,2,https://github.com/kenhys,test: add drilldowns[LABEL].columns[NAME].value test case without cache,1,[],https://github.com/groonga/groonga/pull/661,https://github.com/kou,3,https://github.com/groonga/groonga/pull/661#issuecomment-294635903,,Using both --output_columns _id and --limit 0 options is a good practice to reduce needless output.,True,{}
groonga/groonga,https://github.com/groonga/groonga,662,2017-04-14T09:52:35Z,2017-04-21T01:25:07Z,2019-05-22T02:55:21Z,MERGED,True,211,0,2,https://github.com/kenhys,test: add drilldowns[LABEL].columns[NAME].window.sort_keys without cache,1,[],https://github.com/groonga/groonga/pull/662,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/662,WIP because of error. Wrong usage of window.sort_keys?,WIP because of error. Wrong usage of window.sort_keys?,True,{}
groonga/groonga,https://github.com/groonga/groonga,662,2017-04-14T09:52:35Z,2017-04-21T01:25:07Z,2019-05-22T02:55:21Z,MERGED,True,211,0,2,https://github.com/kenhys,test: add drilldowns[LABEL].columns[NAME].window.sort_keys without cache,1,[],https://github.com/groonga/groonga/pull/662,https://github.com/kou,2,https://github.com/groonga/groonga/pull/662#issuecomment-294638692,WIP because of error. Wrong usage of window.sort_keys?,'price * 1.08' isn't window function call expression.,True,{}
groonga/groonga,https://github.com/groonga/groonga,662,2017-04-14T09:52:35Z,2017-04-21T01:25:07Z,2019-05-22T02:55:21Z,MERGED,True,211,0,2,https://github.com/kenhys,test: add drilldowns[LABEL].columns[NAME].window.sort_keys without cache,1,[],https://github.com/groonga/groonga/pull/662,https://github.com/kenhys,3,https://github.com/groonga/groonga/pull/662#issuecomment-295635076,WIP because of error. Wrong usage of window.sort_keys?,I've fixed test case to use window function call,True,{}
groonga/groonga,https://github.com/groonga/groonga,662,2017-04-14T09:52:35Z,2017-04-21T01:25:07Z,2019-05-22T02:55:21Z,MERGED,True,211,0,2,https://github.com/kenhys,test: add drilldowns[LABEL].columns[NAME].window.sort_keys without cache,1,[],https://github.com/groonga/groonga/pull/662,https://github.com/kou,4,https://github.com/groonga/groonga/pull/662#issuecomment-296002672,WIP because of error. Wrong usage of window.sort_keys?,"Merged.
But number name is meaningless...",True,{}
groonga/groonga,https://github.com/groonga/groonga,663,2017-04-17T04:13:45Z,2017-04-18T00:38:18Z,2019-02-01T12:12:15Z,MERGED,True,139,0,2,https://github.com/kenhys,test: add columns[NAME].type test case without cache,1,[],https://github.com/groonga/groonga/pull/663,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/663,"When the value of --columns[NAME].type parameter is changed, Groonga
returns result without using cache.","When the value of --columns[NAME].type parameter is changed, Groonga
returns result without using cache.",True,{}
groonga/groonga,https://github.com/groonga/groonga,664,2017-04-19T03:13:14Z,2017-04-19T05:11:57Z,2019-02-01T12:13:09Z,MERGED,True,70,0,2,https://github.com/kenhys,test: add no hit dynamic columns with filter without error,1,[],https://github.com/groonga/groonga/pull/664,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/664,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,664,2017-04-19T03:13:14Z,2017-04-19T05:11:57Z,2019-02-01T12:13:09Z,MERGED,True,70,0,2,https://github.com/kenhys,test: add no hit dynamic columns with filter without error,1,[],https://github.com/groonga/groonga/pull/664,https://github.com/kou,2,https://github.com/groonga/groonga/pull/664#issuecomment-295074771,,"It seems that this is meaningless no hit test because there are all records in ""initial"" stage. ""initial"" stage is executed before filter.",True,{}
groonga/groonga,https://github.com/groonga/groonga,664,2017-04-19T03:13:14Z,2017-04-19T05:11:57Z,2019-02-01T12:13:09Z,MERGED,True,70,0,2,https://github.com/kenhys,test: add no hit dynamic columns with filter without error,1,[],https://github.com/groonga/groonga/pull/664,https://github.com/kenhys,3,https://github.com/groonga/groonga/pull/664#issuecomment-295091070,,"It means that filtering should be done by --min option, doesn't it?",True,{}
groonga/groonga,https://github.com/groonga/groonga,664,2017-04-19T03:13:14Z,2017-04-19T05:11:57Z,2019-02-01T12:13:09Z,MERGED,True,70,0,2,https://github.com/kenhys,test: add no hit dynamic columns with filter without error,1,[],https://github.com/groonga/groonga/pull/664,https://github.com/kenhys,4,https://github.com/groonga/groonga/pull/664#issuecomment-295095421,,I've fixed test case again.,True,{}
groonga/groonga,https://github.com/groonga/groonga,664,2017-04-19T03:13:14Z,2017-04-19T05:11:57Z,2019-02-01T12:13:09Z,MERGED,True,70,0,2,https://github.com/kenhys,test: add no hit dynamic columns with filter without error,1,[],https://github.com/groonga/groonga/pull/664,https://github.com/kou,5,https://github.com/groonga/groonga/pull/664#issuecomment-295095734,,Merged!,True,{}
groonga/groonga,https://github.com/groonga/groonga,665,2017-04-19T05:29:31Z,2017-04-19T06:07:12Z,2019-02-01T12:13:20Z,MERGED,True,96,0,2,https://github.com/kenhys,test: add no hit dynamic columns with match_columns without error,1,[],https://github.com/groonga/groonga/pull/665,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/665,"This test case checks whether match_columns with empty records of
dynamic columns (price_with_tax) in initial stage doesn't cause an
error.","This test case checks whether match_columns with empty records of
dynamic columns (price_with_tax) in initial stage doesn't cause an
error.",True,{}
groonga/groonga,https://github.com/groonga/groonga,665,2017-04-19T05:29:31Z,2017-04-19T06:07:12Z,2019-02-01T12:13:20Z,MERGED,True,96,0,2,https://github.com/kenhys,test: add no hit dynamic columns with match_columns without error,1,[],https://github.com/groonga/groonga/pull/665,https://github.com/kou,2,https://github.com/groonga/groonga/pull/665#issuecomment-295101101,"This test case checks whether match_columns with empty records of
dynamic columns (price_with_tax) in initial stage doesn't cause an
error.",match_columns isn't used when query isn't specified.,True,{}
groonga/groonga,https://github.com/groonga/groonga,665,2017-04-19T05:29:31Z,2017-04-19T06:07:12Z,2019-02-01T12:13:20Z,MERGED,True,96,0,2,https://github.com/kenhys,test: add no hit dynamic columns with match_columns without error,1,[],https://github.com/groonga/groonga/pull/665,https://github.com/kou,3,https://github.com/groonga/groonga/pull/665#issuecomment-295101394,"This test case checks whether match_columns with empty records of
dynamic columns (price_with_tax) in initial stage doesn't cause an
error.","Normally, UInt32 value isn't used as match_columns. So test data isn't suitable.",True,{}
groonga/groonga,https://github.com/groonga/groonga,665,2017-04-19T05:29:31Z,2017-04-19T06:07:12Z,2019-02-01T12:13:20Z,MERGED,True,96,0,2,https://github.com/kenhys,test: add no hit dynamic columns with match_columns without error,1,[],https://github.com/groonga/groonga/pull/665,https://github.com/kenhys,4,https://github.com/groonga/groonga/pull/665#issuecomment-295106010,"This test case checks whether match_columns with empty records of
dynamic columns (price_with_tax) in initial stage doesn't cause an
error.",I've fixed test case with feedback.,True,{}
groonga/groonga,https://github.com/groonga/groonga,665,2017-04-19T05:29:31Z,2017-04-19T06:07:12Z,2019-02-01T12:13:20Z,MERGED,True,96,0,2,https://github.com/kenhys,test: add no hit dynamic columns with match_columns without error,1,[],https://github.com/groonga/groonga/pull/665,https://github.com/kou,5,https://github.com/groonga/groonga/pull/665#issuecomment-295111441,"This test case checks whether match_columns with empty records of
dynamic columns (price_with_tax) in initial stage doesn't cause an
error.",Merged!,True,{}
groonga/groonga,https://github.com/groonga/groonga,666,2017-04-19T07:20:15Z,2017-04-19T07:38:06Z,2019-02-01T12:13:39Z,MERGED,True,38,0,2,https://github.com/kenhys,test: add no hit dynamic columns with output_columns without error,1,[],https://github.com/groonga/groonga/pull/666,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/666,"This test case checks whether output_columns with empty records of
dynamic columns (price_with_tax) in initial stage doesn't cause an
error.","This test case checks whether output_columns with empty records of
dynamic columns (price_with_tax) in initial stage doesn't cause an
error.",True,{}
groonga/groonga,https://github.com/groonga/groonga,666,2017-04-19T07:20:15Z,2017-04-19T07:38:06Z,2019-02-01T12:13:39Z,MERGED,True,38,0,2,https://github.com/kenhys,test: add no hit dynamic columns with output_columns without error,1,[],https://github.com/groonga/groonga/pull/666,https://github.com/kou,2,https://github.com/groonga/groonga/pull/666#issuecomment-295141731,"This test case checks whether output_columns with empty records of
dynamic columns (price_with_tax) in initial stage doesn't cause an
error.","Merged.
filteredstage case is also needed for output_columns case.",True,{}
groonga/groonga,https://github.com/groonga/groonga,667,2017-04-19T07:41:48Z,2017-04-19T08:27:13Z,2019-02-01T12:13:43Z,MERGED,True,79,0,2,https://github.com/kenhys,test: add columns[NAME].flags test case without cache,1,[],https://github.com/groonga/groonga/pull/667,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/667,"When the value of --columns[NAME].flags parameter is changed, Groonga
returns result without using cache.","When the value of --columns[NAME].flags parameter is changed, Groonga
returns result without using cache.",True,{}
groonga/groonga,https://github.com/groonga/groonga,667,2017-04-19T07:41:48Z,2017-04-19T08:27:13Z,2019-02-01T12:13:43Z,MERGED,True,79,0,2,https://github.com/kenhys,test: add columns[NAME].flags test case without cache,1,[],https://github.com/groonga/groonga/pull/667,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/667#issuecomment-295143069,"When the value of --columns[NAME].flags parameter is changed, Groonga
returns result without using cache.",WIP because there is no different between output of VECTOR_COLUMN and VECTOR_COLUMN|WITH_WEIGHT.,True,{}
groonga/groonga,https://github.com/groonga/groonga,667,2017-04-19T07:41:48Z,2017-04-19T08:27:13Z,2019-02-01T12:13:43Z,MERGED,True,79,0,2,https://github.com/kenhys,test: add columns[NAME].flags test case without cache,1,[],https://github.com/groonga/groonga/pull/667,https://github.com/kou,3,https://github.com/groonga/groonga/pull/667#issuecomment-295144601,"When the value of --columns[NAME].flags parameter is changed, Groonga
returns result without using cache.",How about adding any elements?,True,{}
groonga/groonga,https://github.com/groonga/groonga,667,2017-04-19T07:41:48Z,2017-04-19T08:27:13Z,2019-02-01T12:13:43Z,MERGED,True,79,0,2,https://github.com/kenhys,test: add columns[NAME].flags test case without cache,1,[],https://github.com/groonga/groonga/pull/667,https://github.com/kenhys,4,https://github.com/groonga/groonga/pull/667#issuecomment-295145088,"When the value of --columns[NAME].flags parameter is changed, Groonga
returns result without using cache.","It means that .value 'vector_new(1, 2, 3)' ? I've tried it but no difference.",True,{}
groonga/groonga,https://github.com/groonga/groonga,667,2017-04-19T07:41:48Z,2017-04-19T08:27:13Z,2019-02-01T12:13:43Z,MERGED,True,79,0,2,https://github.com/kenhys,test: add columns[NAME].flags test case without cache,1,[],https://github.com/groonga/groonga/pull/667,https://github.com/kou,5,https://github.com/groonga/groonga/pull/667#issuecomment-295152514,"When the value of --columns[NAME].flags parameter is changed, Groonga
returns result without using cache.",Ah. You need to use reference type or ShortText type for outputting weight vector. Or you can implement weight vector output for uvector in grn_output_uvector() at output.c.,True,{}
groonga/groonga,https://github.com/groonga/groonga,667,2017-04-19T07:41:48Z,2017-04-19T08:27:13Z,2019-02-01T12:13:43Z,MERGED,True,79,0,2,https://github.com/kenhys,test: add columns[NAME].flags test case without cache,1,[],https://github.com/groonga/groonga/pull/667,https://github.com/kenhys,6,https://github.com/groonga/groonga/pull/667#issuecomment-295159301,"When the value of --columns[NAME].flags parameter is changed, Groonga
returns result without using cache.",I've updated the test case which uses ShortText.,True,{}
groonga/groonga,https://github.com/groonga/groonga,667,2017-04-19T07:41:48Z,2017-04-19T08:27:13Z,2019-02-01T12:13:43Z,MERGED,True,79,0,2,https://github.com/kenhys,test: add columns[NAME].flags test case without cache,1,[],https://github.com/groonga/groonga/pull/667,https://github.com/kou,7,https://github.com/groonga/groonga/pull/667#issuecomment-295161333,"When the value of --columns[NAME].flags parameter is changed, Groonga
returns result without using cache.","Merged.
Supporting outputting non reference column weight vector should be issued.",True,{}
groonga/groonga,https://github.com/groonga/groonga,667,2017-04-19T07:41:48Z,2017-04-19T08:27:13Z,2019-02-01T12:13:43Z,MERGED,True,79,0,2,https://github.com/kenhys,test: add columns[NAME].flags test case without cache,1,[],https://github.com/groonga/groonga/pull/667,https://github.com/kenhys,8,https://github.com/groonga/groonga/pull/667#issuecomment-295168706,"When the value of --columns[NAME].flags parameter is changed, Groonga
returns result without using cache.",I've created issue as #669,True,{}
groonga/groonga,https://github.com/groonga/groonga,667,2017-04-19T07:41:48Z,2017-04-19T08:27:13Z,2019-02-01T12:13:43Z,MERGED,True,79,0,2,https://github.com/kenhys,test: add columns[NAME].flags test case without cache,1,[],https://github.com/groonga/groonga/pull/667,https://github.com/kou,9,https://github.com/groonga/groonga/pull/667#issuecomment-295179614,"When the value of --columns[NAME].flags parameter is changed, Groonga
returns result without using cache.",Good!,True,{}
groonga/groonga,https://github.com/groonga/groonga,667,2017-04-19T07:41:48Z,2017-04-19T08:27:13Z,2019-02-01T12:13:43Z,MERGED,True,79,0,2,https://github.com/kenhys,test: add columns[NAME].flags test case without cache,1,[],https://github.com/groonga/groonga/pull/667,https://github.com/kenhys,10,https://github.com/groonga/groonga/pull/667#issuecomment-295182196,"When the value of --columns[NAME].flags parameter is changed, Groonga
returns result without using cache.",I've also created found issue as #670,True,{}
groonga/groonga,https://github.com/groonga/groonga,668,2017-04-19T08:11:24Z,2017-04-19T09:15:04Z,2019-02-01T12:13:50Z,MERGED,True,60,0,2,https://github.com/kenhys,test: add no hit dynamic columns with output_columns without error,1,[],https://github.com/groonga/groonga/pull/668,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/668,"This test case checks whether output_columns with empty records of
dynamic columns (highlighted_content) in filtered stage doesn't cause
an error.","This test case checks whether output_columns with empty records of
dynamic columns (highlighted_content) in filtered stage doesn't cause
an error.",True,{}
groonga/groonga,https://github.com/groonga/groonga,668,2017-04-19T08:11:24Z,2017-04-19T09:15:04Z,2019-02-01T12:13:50Z,MERGED,True,60,0,2,https://github.com/kenhys,test: add no hit dynamic columns with output_columns without error,1,[],https://github.com/groonga/groonga/pull/668,https://github.com/kou,2,https://github.com/groonga/groonga/pull/668#issuecomment-295156689,"This test case checks whether output_columns with empty records of
dynamic columns (highlighted_content) in filtered stage doesn't cause
an error.",It's better that we remove all records by query not min because filtered stage is executed after query.,True,{}
groonga/groonga,https://github.com/groonga/groonga,668,2017-04-19T08:11:24Z,2017-04-19T09:15:04Z,2019-02-01T12:13:50Z,MERGED,True,60,0,2,https://github.com/kenhys,test: add no hit dynamic columns with output_columns without error,1,[],https://github.com/groonga/groonga/pull/668,https://github.com/kenhys,3,https://github.com/groonga/groonga/pull/668#issuecomment-295161090,"This test case checks whether output_columns with empty records of
dynamic columns (highlighted_content) in filtered stage doesn't cause
an error.",I think that  execution order is: min -> query -> filtered. so it is good enough by min. Is query better in this case because it reduces scope of processing pipeline?,True,{}
groonga/groonga,https://github.com/groonga/groonga,668,2017-04-19T08:11:24Z,2017-04-19T09:15:04Z,2019-02-01T12:13:50Z,MERGED,True,60,0,2,https://github.com/kenhys,test: add no hit dynamic columns with output_columns without error,1,[],https://github.com/groonga/groonga/pull/668,https://github.com/kou,4,https://github.com/groonga/groonga/pull/668#issuecomment-295162353,"This test case checks whether output_columns with empty records of
dynamic columns (highlighted_content) in filtered stage doesn't cause
an error.",No records by min and no records by query use the different execution pass in implementation.,True,{}
groonga/groonga,https://github.com/groonga/groonga,668,2017-04-19T08:11:24Z,2017-04-19T09:15:04Z,2019-02-01T12:13:50Z,MERGED,True,60,0,2,https://github.com/kenhys,test: add no hit dynamic columns with output_columns without error,1,[],https://github.com/groonga/groonga/pull/668,https://github.com/kenhys,5,https://github.com/groonga/groonga/pull/668#issuecomment-295176528,"This test case checks whether output_columns with empty records of
dynamic columns (highlighted_content) in filtered stage doesn't cause
an error.",I've fixed to use --query 'content:@slow' in this case.,True,{}
groonga/groonga,https://github.com/groonga/groonga,668,2017-04-19T08:11:24Z,2017-04-19T09:15:04Z,2019-02-01T12:13:50Z,MERGED,True,60,0,2,https://github.com/kenhys,test: add no hit dynamic columns with output_columns without error,1,[],https://github.com/groonga/groonga/pull/668,https://github.com/kou,6,https://github.com/groonga/groonga/pull/668#issuecomment-295179750,"This test case checks whether output_columns with empty records of
dynamic columns (highlighted_content) in filtered stage doesn't cause
an error.",Merged.,True,{}
groonga/groonga,https://github.com/groonga/groonga,671,2017-04-20T05:55:28Z,2017-04-20T05:59:13Z,2019-02-01T12:19:39Z,MERGED,True,159,0,2,https://github.com/kenhys,test: add no hit dynamic columns with drilldowns[LABEL].keys without error,1,[],https://github.com/groonga/groonga/pull/671,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/671,"This test case checks whether drilldowns[LABEL].keys with empty
records of dynamic columns (price_with_tax) in initial stage doesn't
cause an error.","This test case checks whether drilldowns[LABEL].keys with empty
records of dynamic columns (price_with_tax) in initial stage doesn't
cause an error.",True,{}
groonga/groonga,https://github.com/groonga/groonga,671,2017-04-20T05:55:28Z,2017-04-20T05:59:13Z,2019-02-01T12:19:39Z,MERGED,True,159,0,2,https://github.com/kenhys,test: add no hit dynamic columns with drilldowns[LABEL].keys without error,1,[],https://github.com/groonga/groonga/pull/671,https://github.com/kou,2,https://github.com/groonga/groonga/pull/671#issuecomment-295591452,"This test case checks whether drilldowns[LABEL].keys with empty
records of dynamic columns (price_with_tax) in initial stage doesn't
cause an error.",Merged.,True,{}
groonga/groonga,https://github.com/groonga/groonga,672,2017-04-20T06:09:28Z,2017-04-20T06:24:30Z,2019-02-01T12:19:37Z,MERGED,True,114,0,2,https://github.com/kenhys,test: add no hit dynamic columns with drilldown without error,1,[],https://github.com/groonga/groonga/pull/672,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/672,"This test case checks whether drilldown with empty records of dynamic
columns (price_with_tax) in initial stage doesn't cause an error.","This test case checks whether drilldown with empty records of dynamic
columns (price_with_tax) in initial stage doesn't cause an error.",True,{}
groonga/groonga,https://github.com/groonga/groonga,672,2017-04-20T06:09:28Z,2017-04-20T06:24:30Z,2019-02-01T12:19:37Z,MERGED,True,114,0,2,https://github.com/kenhys,test: add no hit dynamic columns with drilldown without error,1,[],https://github.com/groonga/groonga/pull/672,https://github.com/kou,2,https://github.com/groonga/groonga/pull/672#issuecomment-295596326,"This test case checks whether drilldown with empty records of dynamic
columns (price_with_tax) in initial stage doesn't cause an error.",Merged.,True,{}
groonga/groonga,https://github.com/groonga/groonga,673,2017-04-20T06:42:51Z,2017-04-21T02:45:35Z,2019-02-01T12:18:45Z,MERGED,True,158,0,2,https://github.com/kenhys,test: add no hit dynamic columns with drilldowns[LABEL].filter without error,1,[],https://github.com/groonga/groonga/pull/673,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/673,"This test case checks whether drilldowns[LABEL].filter with empty
records of dynamic columns (price_with_tax) in initial stage doesn't
cause an error.","This test case checks whether drilldowns[LABEL].filter with empty
records of dynamic columns (price_with_tax) in initial stage doesn't
cause an error.",True,{}
groonga/groonga,https://github.com/groonga/groonga,673,2017-04-20T06:42:51Z,2017-04-21T02:45:35Z,2019-02-01T12:18:45Z,MERGED,True,158,0,2,https://github.com/kenhys,test: add no hit dynamic columns with drilldowns[LABEL].filter without error,1,[],https://github.com/groonga/groonga/pull/673,https://github.com/kou,2,https://github.com/groonga/groonga/pull/673#issuecomment-295602743,"This test case checks whether drilldowns[LABEL].filter with empty
records of dynamic columns (price_with_tax) in initial stage doesn't
cause an error.","Ah, we should refer a column created by drilldowns[LABEL].columns[NAME].stage initial in drilldowns[LABEL].filter.",True,{}
groonga/groonga,https://github.com/groonga/groonga,673,2017-04-20T06:42:51Z,2017-04-21T02:45:35Z,2019-02-01T12:18:45Z,MERGED,True,158,0,2,https://github.com/kenhys,test: add no hit dynamic columns with drilldowns[LABEL].filter without error,1,[],https://github.com/groonga/groonga/pull/673,https://github.com/kenhys,3,https://github.com/groonga/groonga/pull/673#issuecomment-295603006,"This test case checks whether drilldowns[LABEL].filter with empty
records of dynamic columns (price_with_tax) in initial stage doesn't
cause an error.","Thanks.
I'll fix it.",True,{}
groonga/groonga,https://github.com/groonga/groonga,673,2017-04-20T06:42:51Z,2017-04-21T02:45:35Z,2019-02-01T12:18:45Z,MERGED,True,158,0,2,https://github.com/kenhys,test: add no hit dynamic columns with drilldowns[LABEL].filter without error,1,[],https://github.com/groonga/groonga/pull/673,https://github.com/kenhys,4,https://github.com/groonga/groonga/pull/673#issuecomment-295645558,"This test case checks whether drilldowns[LABEL].filter with empty
records of dynamic columns (price_with_tax) in initial stage doesn't
cause an error.",I've just fixed test case.,True,{}
groonga/groonga,https://github.com/groonga/groonga,673,2017-04-20T06:42:51Z,2017-04-21T02:45:35Z,2019-02-01T12:18:45Z,MERGED,True,158,0,2,https://github.com/kenhys,test: add no hit dynamic columns with drilldowns[LABEL].filter without error,1,[],https://github.com/groonga/groonga/pull/673,https://github.com/kou,5,https://github.com/groonga/groonga/pull/673#issuecomment-296003498,"This test case checks whether drilldowns[LABEL].filter with empty
records of dynamic columns (price_with_tax) in initial stage doesn't
cause an error.",There is a needless commit: 2ada771,True,{}
groonga/groonga,https://github.com/groonga/groonga,673,2017-04-20T06:42:51Z,2017-04-21T02:45:35Z,2019-02-01T12:18:45Z,MERGED,True,158,0,2,https://github.com/kenhys,test: add no hit dynamic columns with drilldowns[LABEL].filter without error,1,[],https://github.com/groonga/groonga/pull/673,https://github.com/kenhys,6,https://github.com/groonga/groonga/pull/673#issuecomment-296021093,"This test case checks whether drilldowns[LABEL].filter with empty
records of dynamic columns (price_with_tax) in initial stage doesn't
cause an error.",Just removed 2ada771 . @kou,True,{}
groonga/groonga,https://github.com/groonga/groonga,673,2017-04-20T06:42:51Z,2017-04-21T02:45:35Z,2019-02-01T12:18:45Z,MERGED,True,158,0,2,https://github.com/kenhys,test: add no hit dynamic columns with drilldowns[LABEL].filter without error,1,[],https://github.com/groonga/groonga/pull/673,https://github.com/kou,7,https://github.com/groonga/groonga/pull/673#issuecomment-296027051,"This test case checks whether drilldowns[LABEL].filter with empty
records of dynamic columns (price_with_tax) in initial stage doesn't
cause an error.",Merged.,True,{}
groonga/groonga,https://github.com/groonga/groonga,674,2017-04-20T06:56:23Z,2017-04-20T07:05:25Z,2017-04-20T07:05:25Z,CLOSED,False,104,0,2,https://github.com/kenhys,test: add no hit dynamic columns with drilldown_filter without error,1,[],https://github.com/groonga/groonga/pull/674,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/674,"This test case checks whether drilldown_filter with empty drilldown
records (price_with_tax) in initial stage doesn't cause an error.","This test case checks whether drilldown_filter with empty drilldown
records (price_with_tax) in initial stage doesn't cause an error.",True,{}
groonga/groonga,https://github.com/groonga/groonga,674,2017-04-20T06:56:23Z,2017-04-20T07:05:25Z,2017-04-20T07:05:25Z,CLOSED,False,104,0,2,https://github.com/kenhys,test: add no hit dynamic columns with drilldown_filter without error,1,[],https://github.com/groonga/groonga/pull/674,https://github.com/kou,2,https://github.com/groonga/groonga/pull/674#issuecomment-295603964,"This test case checks whether drilldown_filter with empty drilldown
records (price_with_tax) in initial stage doesn't cause an error.","Ah, this pattern is meaningless. It's not needed. Sorry.",True,{}
groonga/groonga,https://github.com/groonga/groonga,675,2017-04-20T09:46:17Z,2017-04-24T06:14:02Z,2019-02-01T12:17:06Z,MERGED,True,212,0,2,https://github.com/kenhys,test: add drilldowns[LABEL].columns[NAME].window.group_keys test case without cache,1,[],https://github.com/groonga/groonga/pull/675,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/675,"When the value of --drilldowns[LABEL].columns[NAME].window.group_keys
parameter is changed, Groonga returns result without using cache.","When the value of --drilldowns[LABEL].columns[NAME].window.group_keys
parameter is changed, Groonga returns result without using cache.",True,{}
groonga/groonga,https://github.com/groonga/groonga,675,2017-04-20T09:46:17Z,2017-04-24T06:14:02Z,2019-02-01T12:17:06Z,MERGED,True,212,0,2,https://github.com/kenhys,test: add drilldowns[LABEL].columns[NAME].window.group_keys test case without cache,1,[],https://github.com/groonga/groonga/pull/675,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/675#issuecomment-296532631,"When the value of --drilldowns[LABEL].columns[NAME].window.group_keys
parameter is changed, Groonga returns result without using cache.","I've changed to use multiple keys in this case.
In rewriting test case process, I've found crash bug so I filed it as a issue #681",True,{}
groonga/groonga,https://github.com/groonga/groonga,675,2017-04-20T09:46:17Z,2017-04-24T06:14:02Z,2019-02-01T12:17:06Z,MERGED,True,212,0,2,https://github.com/kenhys,test: add drilldowns[LABEL].columns[NAME].window.group_keys test case without cache,1,[],https://github.com/groonga/groonga/pull/675,https://github.com/kou,3,https://github.com/groonga/groonga/pull/675#issuecomment-296533900,"When the value of --drilldowns[LABEL].columns[NAME].window.group_keys
parameter is changed, Groonga returns result without using cache.","Merged.
If output_columns includes _value.category, I could confirm more easily.",True,{}
groonga/groonga,https://github.com/groonga/groonga,676,2017-04-20T09:59:35Z,2017-04-21T01:59:52Z,2019-05-22T02:55:17Z,MERGED,True,164,0,2,https://github.com/kenhys,test: add drilldown_filter test case without cache,1,[],https://github.com/groonga/groonga/pull/676,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/676,"When the value of --drilldown_filter parameter is changed, Groonga
returns result without using cache.","When the value of --drilldown_filter parameter is changed, Groonga
returns result without using cache.",True,{}
groonga/groonga,https://github.com/groonga/groonga,676,2017-04-20T09:59:35Z,2017-04-21T01:59:52Z,2019-05-22T02:55:17Z,MERGED,True,164,0,2,https://github.com/kenhys,test: add drilldown_filter test case without cache,1,[],https://github.com/groonga/groonga/pull/676,https://github.com/kou,2,https://github.com/groonga/groonga/pull/676#issuecomment-296013276,"When the value of --drilldown_filter parameter is changed, Groonga
returns result without using cache.",Merged.,True,{}
groonga/groonga,https://github.com/groonga/groonga,677,2017-04-20T10:10:51Z,2017-04-25T00:05:51Z,2019-02-01T12:16:16Z,MERGED,True,268,0,2,https://github.com/kenhys,test: add drilldowns[LABEL].columns[NAME].flags test case without cache,1,[],https://github.com/groonga/groonga/pull/677,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/677,"When the value of --drilldowns[LABEL].columns[NAME].flags parameter is
changed, Groonga returns result without using cache.","When the value of --drilldowns[LABEL].columns[NAME].flags parameter is
changed, Groonga returns result without using cache.",True,{}
groonga/groonga,https://github.com/groonga/groonga,677,2017-04-20T10:10:51Z,2017-04-25T00:05:51Z,2019-02-01T12:16:16Z,MERGED,True,268,0,2,https://github.com/kenhys,test: add drilldowns[LABEL].columns[NAME].flags test case without cache,1,[],https://github.com/groonga/groonga/pull/677,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/677#issuecomment-295666018,"When the value of --drilldowns[LABEL].columns[NAME].flags parameter is
changed, Groonga returns result without using cache.","I've expected that the result of price_with_tax is different, but not.",True,{}
groonga/groonga,https://github.com/groonga/groonga,677,2017-04-20T10:10:51Z,2017-04-25T00:05:51Z,2019-02-01T12:16:16Z,MERGED,True,268,0,2,https://github.com/kenhys,test: add drilldowns[LABEL].columns[NAME].flags test case without cache,1,[],https://github.com/groonga/groonga/pull/677,https://github.com/kenhys,3,https://github.com/groonga/groonga/pull/677#issuecomment-296141374,"When the value of --drilldowns[LABEL].columns[NAME].flags parameter is
changed, Groonga returns result without using cache.","Now, I've changed to use ShortText. It now works as expected.",True,{}
groonga/groonga,https://github.com/groonga/groonga,677,2017-04-20T10:10:51Z,2017-04-25T00:05:51Z,2019-02-01T12:16:16Z,MERGED,True,268,0,2,https://github.com/kenhys,test: add drilldowns[LABEL].columns[NAME].flags test case without cache,1,[],https://github.com/groonga/groonga/pull/677,https://github.com/kou,4,https://github.com/groonga/groonga/pull/677#issuecomment-296854773,"When the value of --drilldowns[LABEL].columns[NAME].flags parameter is
changed, Groonga returns result without using cache.",Merged.,True,{}
groonga/groonga,https://github.com/groonga/groonga,678,2017-04-21T03:11:53Z,,2022-03-15T05:24:16Z,OPEN,False,107,0,2,https://github.com/kenhys,test: add columns[NAME].stage test case without cache,1,[],https://github.com/groonga/groonga/pull/678,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/678,"When the value of --columns[NAME].stage parameter is changed, Groonga
returns result without using cache.","When the value of --columns[NAME].stage parameter is changed, Groonga
returns result without using cache.",True,{}
groonga/groonga,https://github.com/groonga/groonga,678,2017-04-21T03:11:53Z,,2022-03-15T05:24:16Z,OPEN,False,107,0,2,https://github.com/kenhys,test: add columns[NAME].stage test case without cache,1,[],https://github.com/groonga/groonga/pull/678,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/678#issuecomment-296035244,"When the value of --columns[NAME].stage parameter is changed, Groonga
returns result without using cache.",I tried snippet_html() but it causes an constant is null error.,True,{}
groonga/groonga,https://github.com/groonga/groonga,678,2017-04-21T03:11:53Z,,2022-03-15T05:24:16Z,OPEN,False,107,0,2,https://github.com/kenhys,test: add columns[NAME].stage test case without cache,1,[],https://github.com/groonga/groonga/pull/678,https://github.com/kou,3,https://github.com/groonga/groonga/pull/678#issuecomment-296041083,"When the value of --columns[NAME].stage parameter is changed, Groonga
returns result without using cache.",match_columns is missing.,True,{}
groonga/groonga,https://github.com/groonga/groonga,678,2017-04-21T03:11:53Z,,2022-03-15T05:24:16Z,OPEN,False,107,0,2,https://github.com/kenhys,test: add columns[NAME].stage test case without cache,1,[],https://github.com/groonga/groonga/pull/678,https://github.com/kenhys,4,https://github.com/groonga/groonga/pull/678#issuecomment-296051013,"When the value of --columns[NAME].stage parameter is changed, Groonga
returns result without using cache.","Thanks.
I've fixed test case. @kou",True,{}
groonga/groonga,https://github.com/groonga/groonga,678,2017-04-21T03:11:53Z,,2022-03-15T05:24:16Z,OPEN,False,107,0,2,https://github.com/kenhys,test: add columns[NAME].stage test case without cache,1,[],https://github.com/groonga/groonga/pull/678,https://github.com/kenhys,5,https://github.com/groonga/groonga/pull/678#issuecomment-296138799,"When the value of --columns[NAME].stage parameter is changed, Groonga
returns result without using cache.",I've fixed test case to use highlight_html(). Now this test case is executed as expected.,True,{}
groonga/groonga,https://github.com/groonga/groonga,678,2017-04-21T03:11:53Z,,2022-03-15T05:24:16Z,OPEN,False,107,0,2,https://github.com/kenhys,test: add columns[NAME].stage test case without cache,1,[],https://github.com/groonga/groonga/pull/678,https://github.com/kou,6,https://github.com/groonga/groonga/pull/678#issuecomment-296855096,"When the value of --columns[NAME].stage parameter is changed, Groonga
returns result without using cache.",It's strange that initial stage case doesn't output any records.,True,{}
groonga/groonga,https://github.com/groonga/groonga,678,2017-04-21T03:11:53Z,,2022-03-15T05:24:16Z,OPEN,False,107,0,2,https://github.com/kenhys,test: add columns[NAME].stage test case without cache,1,[],https://github.com/groonga/groonga/pull/678,https://github.com/kenhys,7,https://github.com/groonga/groonga/pull/678#issuecomment-296881381,"When the value of --columns[NAME].stage parameter is changed, Groonga
returns result without using cache.",initial stage returns non empty results because it should be matched.,True,{}
groonga/groonga,https://github.com/groonga/groonga,679,2017-04-24T03:24:16Z,2017-04-24T04:30:26Z,2019-05-22T02:55:25Z,MERGED,True,338,0,2,https://github.com/kenhys,test: add drilldowns[LABEL].table test case without cache,1,[],https://github.com/groonga/groonga/pull/679,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/679,"When the value of --drilldowns[LABEL].table parameter is changed,
Groonga returns result without using cache.","When the value of --drilldowns[LABEL].table parameter is changed,
Groonga returns result without using cache.",True,{}
groonga/groonga,https://github.com/groonga/groonga,679,2017-04-24T03:24:16Z,2017-04-24T04:30:26Z,2019-05-22T02:55:25Z,MERGED,True,338,0,2,https://github.com/kenhys,test: add drilldowns[LABEL].table test case without cache,1,[],https://github.com/groonga/groonga/pull/679,https://github.com/kou,2,https://github.com/groonga/groonga/pull/679#issuecomment-296522451,"When the value of --drilldowns[LABEL].table parameter is changed,
Groonga returns result without using cache.",Merged.,True,{}
groonga/groonga,https://github.com/groonga/groonga,680,2017-04-24T05:11:30Z,,2022-03-15T05:24:16Z,OPEN,False,234,0,2,https://github.com/kenhys,WIP test: add drilldowns[LABEL].columns[NAME].stage test case without cache,1,[],https://github.com/groonga/groonga/pull/680,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/680,"When the value of --drilldowns[LABEL].columns[NAME].stage parameter is
changed, Groonga returns result without using cache.","When the value of --drilldowns[LABEL].columns[NAME].stage parameter is
changed, Groonga returns result without using cache.",True,{}
groonga/groonga,https://github.com/groonga/groonga,680,2017-04-24T05:11:30Z,,2022-03-15T05:24:16Z,OPEN,False,234,0,2,https://github.com/kenhys,WIP test: add drilldowns[LABEL].columns[NAME].stage test case without cache,1,[],https://github.com/groonga/groonga/pull/680,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/680#issuecomment-296526122,"When the value of --drilldowns[LABEL].columns[NAME].stage parameter is
changed, Groonga returns result without using cache.","I've expected that output of this case is different, but not. any idea?",True,{}
groonga/groonga,https://github.com/groonga/groonga,680,2017-04-24T05:11:30Z,,2022-03-15T05:24:16Z,OPEN,False,234,0,2,https://github.com/kenhys,WIP test: add drilldowns[LABEL].columns[NAME].stage test case without cache,1,[],https://github.com/groonga/groonga/pull/680,https://github.com/kou,3,https://github.com/groonga/groonga/pull/680#issuecomment-296528322,"When the value of --drilldowns[LABEL].columns[NAME].stage parameter is
changed, Groonga returns result without using cache.",Could you try --drilldowns[LABEL].filter instead of --query?,True,{}
groonga/groonga,https://github.com/groonga/groonga,680,2017-04-24T05:11:30Z,,2022-03-15T05:24:16Z,OPEN,False,234,0,2,https://github.com/kenhys,WIP test: add drilldowns[LABEL].columns[NAME].stage test case without cache,1,[],https://github.com/groonga/groonga/pull/680,https://github.com/kenhys,4,https://github.com/groonga/groonga/pull/680#issuecomment-296540750,"When the value of --drilldowns[LABEL].columns[NAME].stage parameter is
changed, Groonga returns result without using cache.","Could you try --drilldowns[LABEL].filter instead of --query?

Could you explain what you mean precisely? @kou
In other test case, we discussed that --filter is not worked expectedly for stage, so switched to use --query.
In this case, I think that the situation is same as before. But is --drilldowns[LABEL].filter effective?",True,{}
groonga/groonga,https://github.com/groonga/groonga,680,2017-04-24T05:11:30Z,,2022-03-15T05:24:16Z,OPEN,False,234,0,2,https://github.com/kenhys,WIP test: add drilldowns[LABEL].columns[NAME].stage test case without cache,1,[],https://github.com/groonga/groonga/pull/680,https://github.com/kou,5,https://github.com/groonga/groonga/pull/680#issuecomment-296542664,"When the value of --drilldowns[LABEL].columns[NAME].stage parameter is
changed, Groonga returns result without using cache.",Issue number please.,True,{}
groonga/groonga,https://github.com/groonga/groonga,680,2017-04-24T05:11:30Z,,2022-03-15T05:24:16Z,OPEN,False,234,0,2,https://github.com/kenhys,WIP test: add drilldowns[LABEL].columns[NAME].stage test case without cache,1,[],https://github.com/groonga/groonga/pull/680,https://github.com/kenhys,6,https://github.com/groonga/groonga/pull/680#issuecomment-296558261,"When the value of --drilldowns[LABEL].columns[NAME].stage parameter is
changed, Groonga returns result without using cache.","In other test case

I means #678 as other test case.",True,{}
groonga/groonga,https://github.com/groonga/groonga,680,2017-04-24T05:11:30Z,,2022-03-15T05:24:16Z,OPEN,False,234,0,2,https://github.com/kenhys,WIP test: add drilldowns[LABEL].columns[NAME].stage test case without cache,1,[],https://github.com/groonga/groonga/pull/680,https://github.com/kou,7,https://github.com/groonga/groonga/pull/680#issuecomment-296568936,"When the value of --drilldowns[LABEL].columns[NAME].stage parameter is
changed, Groonga returns result without using cache.",It's a --columns[NAME] test. This is a --drilldowns[LABEL].columns[NAME] test.,True,{}
groonga/groonga,https://github.com/groonga/groonga,680,2017-04-24T05:11:30Z,,2022-03-15T05:24:16Z,OPEN,False,234,0,2,https://github.com/kenhys,WIP test: add drilldowns[LABEL].columns[NAME].stage test case without cache,1,[],https://github.com/groonga/groonga/pull/680,https://github.com/kenhys,8,https://github.com/groonga/groonga/pull/680#issuecomment-296881878,"When the value of --drilldowns[LABEL].columns[NAME].stage parameter is
changed, Groonga returns result without using cache.","Note that filtered stage is not supported yet. so this test always fails.
And the following part is meaningless because query is already processed before drilldown.
--match_columns items \
+  --output_columns content \
+  --query ""Book""

See http://groonga.org/ja/docs/reference/commands/select.html#select-columns-name-stage about processing order of dynamic columns and drilldowns.",True,{}
groonga/groonga,https://github.com/groonga/groonga,687,2017-05-07T22:48:05Z,,2022-03-15T05:24:16Z,OPEN,False,14,5,1,https://github.com/kou,ii: use TF-IDF like score for similar search,1,[],https://github.com/groonga/groonga/pull/687,https://github.com/kou,1,https://github.com/groonga/groonga/pull/687,"Old Groonga uses int for score data type. Recent Groonga uses double for score data type.
Now, we can use floating point number for score.
How about using TF-IDF like score for similar search? This change doesn't change matched records order. It just changes score values to smaller values (around 1.0) from larger values. For example, 419432 -> 1.11 and 209716 -> 0.55. Smaller values will be useful for combining score computed by other search methods.","Old Groonga uses int for score data type. Recent Groonga uses double for score data type.
Now, we can use floating point number for score.
How about using TF-IDF like score for similar search? This change doesn't change matched records order. It just changes score values to smaller values (around 1.0) from larger values. For example, 419432 -> 1.11 and 209716 -> 0.55. Smaller values will be useful for combining score computed by other search methods.",True,{}
groonga/groonga,https://github.com/groonga/groonga,689,2017-05-10T02:21:05Z,2017-05-10T02:32:16Z,2017-05-10T02:36:28Z,MERGED,True,90,2,1,https://github.com/komainu8,doc: update po.,1,[],https://github.com/groonga/groonga/pull/689,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/689,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,689,2017-05-10T02:21:05Z,2017-05-10T02:32:16Z,2017-05-10T02:36:28Z,MERGED,True,90,2,1,https://github.com/komainu8,doc: update po.,1,[],https://github.com/groonga/groonga/pull/689,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/689#issuecomment-300357239,,Merged!,True,{}
groonga/groonga,https://github.com/groonga/groonga,690,2017-05-10T10:10:55Z,2017-05-11T09:46:41Z,2018-02-07T06:51:50Z,MERGED,True,17,2,2,https://github.com/komainu8,Modify release script for windows.,1,[],https://github.com/groonga/groonga/pull/690,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/690,Add feature uploading sources whitch used to build groonga.,Add feature uploading sources whitch used to build groonga.,True,{}
groonga/groonga,https://github.com/groonga/groonga,690,2017-05-10T10:10:55Z,2017-05-11T09:46:41Z,2018-02-07T06:51:50Z,MERGED,True,17,2,2,https://github.com/komainu8,Modify release script for windows.,1,[],https://github.com/groonga/groonga/pull/690,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/690#issuecomment-300740028,Add feature uploading sources whitch used to build groonga.,LGTM.,True,{}
groonga/groonga,https://github.com/groonga/groonga,691,2017-05-15T02:38:34Z,2017-05-15T03:13:35Z,2017-05-15T03:13:38Z,MERGED,True,947,2,13,https://github.com/kou,Support Apache Arrow,4,[],https://github.com/groonga/groonga/pull/691,https://github.com/kou,1,https://github.com/groonga/groonga/pull/691,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,692,2017-05-18T02:44:04Z,2017-05-18T07:38:18Z,2017-05-18T07:38:21Z,MERGED,True,49,15,1,https://github.com/kou,grn_column_name: return fully qualified name for accessor,1,[],https://github.com/groonga/groonga/pull/692,https://github.com/kou,1,https://github.com/groonga/groonga/pull/692,"Before:
grn_table_select() ->
  grn_obj_column(""column1.column2"") ->
  # _key.column1.column2 accessor
  grn_column_name() ->
  ""_key""

After:
grn_table_select() ->
  grn_obj_column(""column1.column2"") ->
  # _key.column1.column2 accessor
  grn_column_name() ->
  ""column1.column2""
# internal ""_key"" is omitted.","Before:
grn_table_select() ->
  grn_obj_column(""column1.column2"") ->
  # _key.column1.column2 accessor
  grn_column_name() ->
  ""_key""

After:
grn_table_select() ->
  grn_obj_column(""column1.column2"") ->
  # _key.column1.column2 accessor
  grn_column_name() ->
  ""column1.column2""
# internal ""_key"" is omitted.",True,{}
groonga/groonga,https://github.com/groonga/groonga,693,2017-05-18T08:24:45Z,2017-06-14T04:12:20Z,2019-05-22T04:50:31Z,CLOSED,False,32,0,2,https://github.com/kenhys,WIP: grndb corrupted check,3,[],https://github.com/groonga/groonga/pull/693,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/693,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,693,2017-05-18T08:24:45Z,2017-06-14T04:12:20Z,2019-05-22T04:50:31Z,CLOSED,False,32,0,2,https://github.com/kenhys,WIP: grndb corrupted check,3,[],https://github.com/groonga/groonga/pull/693,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/693#issuecomment-308314693,,I'll try another PR.,True,{}
groonga/groonga,https://github.com/groonga/groonga,695,2017-05-21T20:31:14Z,2017-05-21T23:56:38Z,2017-05-22T04:17:22Z,MERGED,True,120,1,3,https://github.com/naoa,vector_slice: fix a bug that non 4 bytes vector columns can't slice,1,[],https://github.com/groonga/groonga/pull/695,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/695,GitHub: #694,GitHub: #694,True,{}
groonga/groonga,https://github.com/groonga/groonga,695,2017-05-21T20:31:14Z,2017-05-21T23:56:38Z,2017-05-22T04:17:22Z,MERGED,True,120,1,3,https://github.com/naoa,vector_slice: fix a bug that non 4 bytes vector columns can't slice,1,[],https://github.com/groonga/groonga/pull/695,https://github.com/kou,2,https://github.com/groonga/groonga/pull/695#issuecomment-302972097,GitHub: #694,Thanks!,True,{}
groonga/groonga,https://github.com/groonga/groonga,696,2017-05-21T20:31:44Z,2017-05-22T00:09:43Z,2017-05-22T04:17:11Z,MERGED,True,167,6,9,https://github.com/naoa,expr: fix a bug that non 4 bytes fixed vector column can't sequential…,1,[],https://github.com/groonga/groonga/pull/696,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/696,"… match by specifying index of vector
GitHub: #694","… match by specifying index of vector
GitHub: #694",True,{}
groonga/groonga,https://github.com/groonga/groonga,696,2017-05-21T20:31:44Z,2017-05-22T00:09:43Z,2017-05-22T04:17:11Z,MERGED,True,167,6,9,https://github.com/naoa,expr: fix a bug that non 4 bytes fixed vector column can't sequential…,1,[],https://github.com/groonga/groonga/pull/696,https://github.com/kou,2,https://github.com/groonga/groonga/pull/696#issuecomment-302972805,"… match by specifying index of vector
GitHub: #694",Thanks!!,True,{}
groonga/groonga,https://github.com/groonga/groonga,698,2017-05-24T08:26:15Z,2017-05-25T00:49:05Z,2017-05-25T02:03:10Z,MERGED,True,207,7,9,https://github.com/komainu8,"Fix a bug that occur ""argument out of range"" when executing `logical_select` with min and max options.",1,[],https://github.com/groonga/groonga/pull/698,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/698,logical_tableで指定したテーブルのテーブル名に月の最終日が含まれていてかつ、logical_selectをminオプション付きで実行した際にlogical_selectがargument out of rangeで失敗する問題を修正しました。,logical_tableで指定したテーブルのテーブル名に月の最終日が含まれていてかつ、logical_selectをminオプション付きで実行した際にlogical_selectがargument out of rangeで失敗する問題を修正しました。,True,{}
groonga/groonga,https://github.com/groonga/groonga,698,2017-05-24T08:26:15Z,2017-05-25T00:49:05Z,2017-05-25T02:03:10Z,MERGED,True,207,7,9,https://github.com/komainu8,"Fix a bug that occur ""argument out of range"" when executing `logical_select` with min and max options.",1,[],https://github.com/groonga/groonga/pull/698,https://github.com/kou,2,https://github.com/groonga/groonga/pull/698#issuecomment-303901536,logical_tableで指定したテーブルのテーブル名に月の最終日が含まれていてかつ、logical_selectをminオプション付きで実行した際にlogical_selectがargument out of rangeで失敗する問題を修正しました。,"マージしました。
マージした後にいろいろ直したので確認しておいてください。",True,{}
groonga/groonga,https://github.com/groonga/groonga,698,2017-05-24T08:26:15Z,2017-05-25T00:49:05Z,2017-05-25T02:03:10Z,MERGED,True,207,7,9,https://github.com/komainu8,"Fix a bug that occur ""argument out of range"" when executing `logical_select` with min and max options.",1,[],https://github.com/groonga/groonga/pull/698,https://github.com/komainu8,3,https://github.com/groonga/groonga/pull/698#issuecomment-303901925,logical_tableで指定したテーブルのテーブル名に月の最終日が含まれていてかつ、logical_selectをminオプション付きで実行した際にlogical_selectがargument out of rangeで失敗する問題を修正しました。,承知しました。ありがとうございます。,True,{}
groonga/groonga,https://github.com/groonga/groonga,699,2017-06-02T03:31:06Z,2017-06-03T15:03:13Z,2019-05-22T05:27:39Z,CLOSED,False,4,0,1,https://github.com/kenhys,db: add missing null check for grn_table_setoperation(),1,[],https://github.com/groonga/groonga/pull/699,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/699,"This commit fixes a crash bug when grn_table_setoperation() is called
with unexpected NULL arguments.
Such a situation may occur when indexes are broken.","This commit fixes a crash bug when grn_table_setoperation() is called
with unexpected NULL arguments.
Such a situation may occur when indexes are broken.",True,{}
groonga/groonga,https://github.com/groonga/groonga,699,2017-06-02T03:31:06Z,2017-06-03T15:03:13Z,2019-05-22T05:27:39Z,CLOSED,False,4,0,1,https://github.com/kenhys,db: add missing null check for grn_table_setoperation(),1,[],https://github.com/groonga/groonga/pull/699,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/699#issuecomment-305736027,"This commit fixes a crash bug when grn_table_setoperation() is called
with unexpected NULL arguments.
Such a situation may occur when indexes are broken.","I've fixed

use ERR
return ctx->rc
more meaningful error message",True,{}
groonga/groonga,https://github.com/groonga/groonga,699,2017-06-02T03:31:06Z,2017-06-03T15:03:13Z,2019-05-22T05:27:39Z,CLOSED,False,4,0,1,https://github.com/kenhys,db: add missing null check for grn_table_setoperation(),1,[],https://github.com/groonga/groonga/pull/699,https://github.com/kenhys,3,https://github.com/groonga/groonga/pull/699#issuecomment-306079207,"This commit fixes a crash bug when grn_table_setoperation() is called
with unexpected NULL arguments.
Such a situation may occur when indexes are broken.",Thanks! I've checked f662925,True,{}
groonga/groonga,https://github.com/groonga/groonga,700,2017-06-05T05:55:53Z,2017-06-05T07:21:29Z,2019-05-22T02:54:53Z,MERGED,True,39,4,3,https://github.com/kenhys,Add more delete operation logs,1,[],https://github.com/groonga/groonga/pull/700,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/700,It is needed to identify problem about vanished database files.,It is needed to identify problem about vanished database files.,True,{}
groonga/groonga,https://github.com/groonga/groonga,700,2017-06-05T05:55:53Z,2017-06-05T07:21:29Z,2019-05-22T02:54:53Z,MERGED,True,39,4,3,https://github.com/kenhys,Add more delete operation logs,1,[],https://github.com/groonga/groonga/pull/700,https://github.com/kou,2,https://github.com/groonga/groonga/pull/700#issuecomment-306124082,It is needed to identify problem about vanished database files.,Merged with some modifications.,True,{}
groonga/groonga,https://github.com/groonga/groonga,700,2017-06-05T05:55:53Z,2017-06-05T07:21:29Z,2019-05-22T02:54:53Z,MERGED,True,39,4,3,https://github.com/kenhys,Add more delete operation logs,1,[],https://github.com/groonga/groonga/pull/700,https://github.com/kenhys,3,https://github.com/groonga/groonga/pull/700#issuecomment-306125205,It is needed to identify problem about vanished database files.,Thanks! I've checked it.,True,{}
groonga/groonga,https://github.com/groonga/groonga,701,2017-06-05T07:46:20Z,2017-06-05T07:52:13Z,2019-05-22T02:54:41Z,MERGED,True,9,0,1,https://github.com/kenhys,Add more create operation logs,1,[],https://github.com/groonga/groonga/pull/701,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/701,It may be useful to identify lifetime of created files.,It may be useful to identify lifetime of created files.,True,{}
groonga/groonga,https://github.com/groonga/groonga,701,2017-06-05T07:46:20Z,2017-06-05T07:52:13Z,2019-05-22T02:54:41Z,MERGED,True,9,0,1,https://github.com/kenhys,Add more create operation logs,1,[],https://github.com/groonga/groonga/pull/701,https://github.com/kou,2,https://github.com/groonga/groonga/pull/701#issuecomment-306128028,It may be useful to identify lifetime of created files.,Merged with some modifications,True,{}
groonga/groonga,https://github.com/groonga/groonga,702,2017-06-05T09:04:59Z,2017-06-06T02:19:20Z,2019-02-01T12:28:31Z,CLOSED,False,20,0,2,https://github.com/kenhys,WIP grndb: support --log-path option,1,[],https://github.com/groonga/groonga/pull/702,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/702,It is useful feature to verify grndb log when something weird happens,It is useful feature to verify grndb log when something weird happens,True,{}
groonga/groonga,https://github.com/groonga/groonga,702,2017-06-05T09:04:59Z,2017-06-06T02:19:20Z,2019-02-01T12:28:31Z,CLOSED,False,20,0,2,https://github.com/kenhys,WIP grndb: support --log-path option,1,[],https://github.com/groonga/groonga/pull/702,https://github.com/kou,2,https://github.com/groonga/groonga/pull/702#issuecomment-306344013,It is useful feature to verify grndb log when something weird happens,--log-path should be processed before grn_init() in src/grndb.c.,True,{}
groonga/groonga,https://github.com/groonga/groonga,702,2017-06-05T09:04:59Z,2017-06-06T02:19:20Z,2019-02-01T12:28:31Z,CLOSED,False,20,0,2,https://github.com/kenhys,WIP grndb: support --log-path option,1,[],https://github.com/groonga/groonga/pull/702,https://github.com/kou,3,https://github.com/groonga/groonga/pull/702#issuecomment-306362720,It is useful feature to verify grndb log when something weird happens,I've implemented.,True,{}
groonga/groonga,https://github.com/groonga/groonga,703,2017-06-05T09:52:47Z,2017-06-06T03:15:35Z,2019-02-01T12:24:17Z,MERGED,True,39,1,2,https://github.com/kenhys,Add log-path documentation for grndb,2,[],https://github.com/groonga/groonga/pull/703,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/703,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,703,2017-06-05T09:52:47Z,2017-06-06T03:15:35Z,2019-02-01T12:24:17Z,MERGED,True,39,1,2,https://github.com/kenhys,Add log-path documentation for grndb,2,[],https://github.com/groonga/groonga/pull/703,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/703#issuecomment-306368471,,"fix markup about grndb.
fix ""groonga log"" to ""grndb log"".",True,{}
groonga/groonga,https://github.com/groonga/groonga,703,2017-06-05T09:52:47Z,2017-06-06T03:15:35Z,2019-02-01T12:24:17Z,MERGED,True,39,1,2,https://github.com/kenhys,Add log-path documentation for grndb,2,[],https://github.com/groonga/groonga/pull/703,https://github.com/kou,3,https://github.com/groonga/groonga/pull/703#issuecomment-306370133,,Merged.,True,{}
groonga/groonga,https://github.com/groonga/groonga,704,2017-06-06T01:16:27Z,2017-06-06T01:33:26Z,2017-06-06T02:24:48Z,MERGED,True,1,1,1,https://github.com/komainu8,remove needless `;`,1,[],https://github.com/groonga/groonga/pull/704,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/704,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,704,2017-06-06T01:16:27Z,2017-06-06T01:33:26Z,2017-06-06T02:24:48Z,MERGED,True,1,1,1,https://github.com/komainu8,remove needless `;`,1,[],https://github.com/groonga/groonga/pull/704,https://github.com/kou,2,https://github.com/groonga/groonga/pull/704#issuecomment-306356287,,Good catch!,True,{}
groonga/groonga,https://github.com/groonga/groonga,705,2017-06-07T05:41:06Z,2017-06-07T06:31:52Z,2019-02-01T12:27:57Z,CLOSED,False,1,0,1,https://github.com/kenhys,grndb: change log level from notice to info,1,[],https://github.com/groonga/groonga/pull/705,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/705,"When physical file operation (add/remove) is now logged in info level,
so log level for grndb should be GRN_LOG_INFO because above logs are
not logged in notice level.","When physical file operation (add/remove) is now logged in info level,
so log level for grndb should be GRN_LOG_INFO because above logs are
not logged in notice level.",True,{}
groonga/groonga,https://github.com/groonga/groonga,705,2017-06-07T05:41:06Z,2017-06-07T06:31:52Z,2019-02-01T12:27:57Z,CLOSED,False,1,0,1,https://github.com/kenhys,grndb: change log level from notice to info,1,[],https://github.com/groonga/groonga/pull/705,https://github.com/kou,2,https://github.com/groonga/groonga/pull/705#issuecomment-306692465,"When physical file operation (add/remove) is now logged in info level,
so log level for grndb should be GRN_LOG_INFO because above logs are
not logged in notice level.",We should provide --log-level option.,True,{}
groonga/groonga,https://github.com/groonga/groonga,705,2017-06-07T05:41:06Z,2017-06-07T06:31:52Z,2019-02-01T12:27:57Z,CLOSED,False,1,0,1,https://github.com/kenhys,grndb: change log level from notice to info,1,[],https://github.com/groonga/groonga/pull/705,https://github.com/kenhys,3,https://github.com/groonga/groonga/pull/705#issuecomment-306694124,"When physical file operation (add/remove) is now logged in info level,
so log level for grndb should be GRN_LOG_INFO because above logs are
not logged in notice level.","OK, but default log level should be info for grndb, isn't it ?

grndb log level to info (This PR) because grndb is used for troubleshooting
add log-level option for grndb (not yet, I'll support it anther PR)",True,{}
groonga/groonga,https://github.com/groonga/groonga,705,2017-06-07T05:41:06Z,2017-06-07T06:31:52Z,2019-02-01T12:27:57Z,CLOSED,False,1,0,1,https://github.com/kenhys,grndb: change log level from notice to info,1,[],https://github.com/groonga/groonga/pull/705,https://github.com/kou,4,https://github.com/groonga/groonga/pull/705#issuecomment-306694735,"When physical file operation (add/remove) is now logged in info level,
so log level for grndb should be GRN_LOG_INFO because above logs are
not logged in notice level.","OK, but default log level should be info for grndb, isn't it ?

I don't think so.

grndb log level to info (This PR) because grndb is used for troubleshooting

With this logic, we should use more verbose log level such as debug log level.",True,{}
groonga/groonga,https://github.com/groonga/groonga,705,2017-06-07T05:41:06Z,2017-06-07T06:31:52Z,2019-02-01T12:27:57Z,CLOSED,False,1,0,1,https://github.com/kenhys,grndb: change log level from notice to info,1,[],https://github.com/groonga/groonga/pull/705,https://github.com/kenhys,5,https://github.com/groonga/groonga/pull/705#issuecomment-306696851,"When physical file operation (add/remove) is now logged in info level,
so log level for grndb should be GRN_LOG_INFO because above logs are
not logged in notice level.","grndb log level to info (This PR) because grndb is used for troubleshooting



With this logic, we should use more verbose log level such as debug log level.

If default log level for grndb is changed to debug, it it still acceptable idea or not?",True,{}
groonga/groonga,https://github.com/groonga/groonga,705,2017-06-07T05:41:06Z,2017-06-07T06:31:52Z,2019-02-01T12:27:57Z,CLOSED,False,1,0,1,https://github.com/kenhys,grndb: change log level from notice to info,1,[],https://github.com/groonga/groonga/pull/705,https://github.com/kou,6,https://github.com/groonga/groonga/pull/705#issuecomment-306696997,"When physical file operation (add/remove) is now logged in info level,
so log level for grndb should be GRN_LOG_INFO because above logs are
not logged in notice level.",Not acceptable. Production tool shouldn't use debug log level by default.,True,{}
groonga/groonga,https://github.com/groonga/groonga,705,2017-06-07T05:41:06Z,2017-06-07T06:31:52Z,2019-02-01T12:27:57Z,CLOSED,False,1,0,1,https://github.com/kenhys,grndb: change log level from notice to info,1,[],https://github.com/groonga/groonga/pull/705,https://github.com/kenhys,7,https://github.com/groonga/groonga/pull/705#issuecomment-306700107,"When physical file operation (add/remove) is now logged in info level,
so log level for grndb should be GRN_LOG_INFO because above logs are
not logged in notice level.","Production tool shouldn't use debug log level by default.

There is no reason to insist 'changing default log level to debug' anymore, so I close this PR.",True,{}
groonga/groonga,https://github.com/groonga/groonga,706,2017-06-07T07:11:43Z,2017-06-07T07:13:56Z,2019-02-01T12:24:15Z,MERGED,True,32,0,3,https://github.com/kenhys,grndb: support --log-level option,3,[],https://github.com/groonga/groonga/pull/706,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/706,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,706,2017-06-07T07:11:43Z,2017-06-07T07:13:56Z,2019-02-01T12:24:15Z,MERGED,True,32,0,3,https://github.com/kenhys,grndb: support --log-level option,3,[],https://github.com/groonga/groonga/pull/706,https://github.com/kou,2,https://github.com/groonga/groonga/pull/706#issuecomment-306715355,,Merged with some modifications.,True,{}
groonga/groonga,https://github.com/groonga/groonga,707,2017-06-07T07:24:08Z,2017-06-07T07:31:23Z,2019-05-22T05:28:40Z,CLOSED,False,2,2,1,https://github.com/kenhys,mrb: follow changed method name in the previous commit,1,[],https://github.com/groonga/groonga/pull/707,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/707,"ref. 3783f32
Logger.default_log_level ->
Logger.default_level","ref. 3783f32
Logger.default_log_level ->
Logger.default_level",True,{}
groonga/groonga,https://github.com/groonga/groonga,707,2017-06-07T07:24:08Z,2017-06-07T07:31:23Z,2019-05-22T05:28:40Z,CLOSED,False,2,2,1,https://github.com/kenhys,mrb: follow changed method name in the previous commit,1,[],https://github.com/groonga/groonga/pull/707,https://github.com/kou,2,https://github.com/groonga/groonga/pull/707#issuecomment-306712174,"ref. 3783f32
Logger.default_log_level ->
Logger.default_level",Please wait. I have more works.,True,{}
groonga/groonga,https://github.com/groonga/groonga,708,2017-06-07T09:44:29Z,2017-06-08T06:00:33Z,2019-02-01T12:24:09Z,MERGED,True,42,1,2,https://github.com/kenhys,doc: document grndb --log-level option,2,[],https://github.com/groonga/groonga/pull/708,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/708,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,709,2017-06-08T23:18:50Z,2017-06-08T23:29:44Z,2017-06-13T07:07:09Z,CLOSED,False,175,39,7,https://github.com/naoa,Support persistent expression,2,[],https://github.com/groonga/groonga/pull/709,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/709,"I would like to use index for computed value of some expression to optimize filter.
(For example, min(A, B) > C)
So, I've implemented persistent expression and GRN_OP_EXPR_EXEC at first.
Is this implementation acceptable?","I would like to use index for computed value of some expression to optimize filter.
(For example, min(A, B) > C)
So, I've implemented persistent expression and GRN_OP_EXPR_EXEC at first.
Is this implementation acceptable?",True,{}
groonga/groonga,https://github.com/groonga/groonga,709,2017-06-08T23:18:50Z,2017-06-08T23:29:44Z,2017-06-13T07:07:09Z,CLOSED,False,175,39,7,https://github.com/naoa,Support persistent expression,2,[],https://github.com/groonga/groonga/pull/709,https://github.com/naoa,2,https://github.com/groonga/groonga/pull/709#issuecomment-307254949,"I would like to use index for computed value of some expression to optimize filter.
(For example, min(A, B) > C)
So, I've implemented persistent expression and GRN_OP_EXPR_EXEC at first.
Is this implementation acceptable?","Oh sorry, I noticed that the expression should not be independent object but meta data of index_column object.
I will PR again when I change.",True,{}
groonga/groonga,https://github.com/groonga/groonga,711,2017-06-11T22:55:24Z,2017-06-12T14:26:16Z,2017-06-12T14:30:31Z,CLOSED,False,810,33,23,https://github.com/naoa,[WIP] Support index expression,6,[],https://github.com/groonga/groonga/pull/711,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/711,"どちらかの日付のうち最先の日付といった計算結果をインデックスできるようにしたく、式インデックスを使いたいと考えています。（この他、HTMLタグ除去など全文インデックスの前処理等にも使えると考えています。）
そこで、式インデックスを実装しました。WITH_EXPRESSIONフラグと式を渡してカラムを構築することによりインデックスに式を持たせられるようにしています。

grn_exprは、TokenFilterと同様にDBのspecに保存しており、ii->expressionにそのポインタを持たせるようにしています。
永続化させたgrn_expr_varから値を取得できるよう関数を修正しました。
grn_expr_var中のgrn_accessorの永続化を対応させました。
インデックス更新時に保存したgrn_expr中の更新対象と同じカラムオブジェクトを、更新前の値、および更新後の値に置き換えてgrn_exprを評価するようにしました。

なお、今のところ、範囲や比較の場合、自動で式インデックスを見つけることはできません。
この実装は受け入れ可能でしょうか？
table_create Patents TABLE_HASH_KEY ShortText
column_create Patents app_date COLUMN_SCALAR Time
column_create Patents priority_date COLUMN_SCALAR Time
table_create Dates TABLE_PAT_KEY Time
column_create Dates earliest_date COLUMN_INDEX|WITH_EXPRESSION ¥
  Patents app_date,priority_date   'min(app_date,priority_date)'
load --table Patents
[
{""_key"": ""JP20010123456"", ""app_date"": ""2001-01-01 00:00:00"", ""priority_date"": ""2000-12-01 00:00:00""},
{""_key"": ""JP20000123456"", ""app_date"": ""2000-12-11 00:00:00"", ""priority_date"": ""9999-12-31 00:00:00""}
]
[[0,0.0,0.0],2]
select Patents   --filter 'Dates.earliest_date > ""2000-12-10 00:00:00""' ¥
  --output_columns _id,_key,app_date,priority_date
[
   ...
      [
        2,
        ""JP20000123456"",
        976492800.0,
        253402214400.0
      ]
    ]
  ]
]","どちらかの日付のうち最先の日付といった計算結果をインデックスできるようにしたく、式インデックスを使いたいと考えています。（この他、HTMLタグ除去など全文インデックスの前処理等にも使えると考えています。）
そこで、式インデックスを実装しました。WITH_EXPRESSIONフラグと式を渡してカラムを構築することによりインデックスに式を持たせられるようにしています。

grn_exprは、TokenFilterと同様にDBのspecに保存しており、ii->expressionにそのポインタを持たせるようにしています。
永続化させたgrn_expr_varから値を取得できるよう関数を修正しました。
grn_expr_var中のgrn_accessorの永続化を対応させました。
インデックス更新時に保存したgrn_expr中の更新対象と同じカラムオブジェクトを、更新前の値、および更新後の値に置き換えてgrn_exprを評価するようにしました。

なお、今のところ、範囲や比較の場合、自動で式インデックスを見つけることはできません。
この実装は受け入れ可能でしょうか？
table_create Patents TABLE_HASH_KEY ShortText
column_create Patents app_date COLUMN_SCALAR Time
column_create Patents priority_date COLUMN_SCALAR Time
table_create Dates TABLE_PAT_KEY Time
column_create Dates earliest_date COLUMN_INDEX|WITH_EXPRESSION ¥
  Patents app_date,priority_date   'min(app_date,priority_date)'
load --table Patents
[
{""_key"": ""JP20010123456"", ""app_date"": ""2001-01-01 00:00:00"", ""priority_date"": ""2000-12-01 00:00:00""},
{""_key"": ""JP20000123456"", ""app_date"": ""2000-12-11 00:00:00"", ""priority_date"": ""9999-12-31 00:00:00""}
]
[[0,0.0,0.0],2]
select Patents   --filter 'Dates.earliest_date > ""2000-12-10 00:00:00""' ¥
  --output_columns _id,_key,app_date,priority_date
[
   ...
      [
        2,
        ""JP20000123456"",
        976492800.0,
        253402214400.0
      ]
    ]
  ]
]",True,{}
groonga/groonga,https://github.com/groonga/groonga,711,2017-06-11T22:55:24Z,2017-06-12T14:26:16Z,2017-06-12T14:30:31Z,CLOSED,False,810,33,23,https://github.com/naoa,[WIP] Support index expression,6,[],https://github.com/groonga/groonga/pull/711,https://github.com/naoa,2,https://github.com/groonga/groonga/pull/711#issuecomment-307805499,"どちらかの日付のうち最先の日付といった計算結果をインデックスできるようにしたく、式インデックスを使いたいと考えています。（この他、HTMLタグ除去など全文インデックスの前処理等にも使えると考えています。）
そこで、式インデックスを実装しました。WITH_EXPRESSIONフラグと式を渡してカラムを構築することによりインデックスに式を持たせられるようにしています。

grn_exprは、TokenFilterと同様にDBのspecに保存しており、ii->expressionにそのポインタを持たせるようにしています。
永続化させたgrn_expr_varから値を取得できるよう関数を修正しました。
grn_expr_var中のgrn_accessorの永続化を対応させました。
インデックス更新時に保存したgrn_expr中の更新対象と同じカラムオブジェクトを、更新前の値、および更新後の値に置き換えてgrn_exprを評価するようにしました。

なお、今のところ、範囲や比較の場合、自動で式インデックスを見つけることはできません。
この実装は受け入れ可能でしょうか？
table_create Patents TABLE_HASH_KEY ShortText
column_create Patents app_date COLUMN_SCALAR Time
column_create Patents priority_date COLUMN_SCALAR Time
table_create Dates TABLE_PAT_KEY Time
column_create Dates earliest_date COLUMN_INDEX|WITH_EXPRESSION ¥
  Patents app_date,priority_date   'min(app_date,priority_date)'
load --table Patents
[
{""_key"": ""JP20010123456"", ""app_date"": ""2001-01-01 00:00:00"", ""priority_date"": ""2000-12-01 00:00:00""},
{""_key"": ""JP20000123456"", ""app_date"": ""2000-12-11 00:00:00"", ""priority_date"": ""9999-12-31 00:00:00""}
]
[[0,0.0,0.0],2]
select Patents   --filter 'Dates.earliest_date > ""2000-12-10 00:00:00""' ¥
  --output_columns _id,_key,app_date,priority_date
[
   ...
      [
        2,
        ""JP20000123456"",
        976492800.0,
        253402214400.0
      ]
    ]
  ]
]","iiに付属させた状態でのexprの永続化に失敗してました。。
grn_exprの永続化は独立したオブジェクトにした方がいいような気がしてきました。
一旦出直します。
少し運用してみて問題なくて、且つ、いい感じの実装だったら再度提案しようと思います。",True,{}
groonga/groonga,https://github.com/groonga/groonga,711,2017-06-11T22:55:24Z,2017-06-12T14:26:16Z,2017-06-12T14:30:31Z,CLOSED,False,810,33,23,https://github.com/naoa,[WIP] Support index expression,6,[],https://github.com/groonga/groonga/pull/711,https://github.com/kou,3,https://github.com/groonga/groonga/pull/711#issuecomment-307806790,"どちらかの日付のうち最先の日付といった計算結果をインデックスできるようにしたく、式インデックスを使いたいと考えています。（この他、HTMLタグ除去など全文インデックスの前処理等にも使えると考えています。）
そこで、式インデックスを実装しました。WITH_EXPRESSIONフラグと式を渡してカラムを構築することによりインデックスに式を持たせられるようにしています。

grn_exprは、TokenFilterと同様にDBのspecに保存しており、ii->expressionにそのポインタを持たせるようにしています。
永続化させたgrn_expr_varから値を取得できるよう関数を修正しました。
grn_expr_var中のgrn_accessorの永続化を対応させました。
インデックス更新時に保存したgrn_expr中の更新対象と同じカラムオブジェクトを、更新前の値、および更新後の値に置き換えてgrn_exprを評価するようにしました。

なお、今のところ、範囲や比較の場合、自動で式インデックスを見つけることはできません。
この実装は受け入れ可能でしょうか？
table_create Patents TABLE_HASH_KEY ShortText
column_create Patents app_date COLUMN_SCALAR Time
column_create Patents priority_date COLUMN_SCALAR Time
table_create Dates TABLE_PAT_KEY Time
column_create Dates earliest_date COLUMN_INDEX|WITH_EXPRESSION ¥
  Patents app_date,priority_date   'min(app_date,priority_date)'
load --table Patents
[
{""_key"": ""JP20010123456"", ""app_date"": ""2001-01-01 00:00:00"", ""priority_date"": ""2000-12-01 00:00:00""},
{""_key"": ""JP20000123456"", ""app_date"": ""2000-12-11 00:00:00"", ""priority_date"": ""9999-12-31 00:00:00""}
]
[[0,0.0,0.0],2]
select Patents   --filter 'Dates.earliest_date > ""2000-12-10 00:00:00""' ¥
  --output_columns _id,_key,app_date,priority_date
[
   ...
      [
        2,
        ""JP20000123456"",
        976492800.0,
        253402214400.0
      ]
    ]
  ]
]","table_create Lexicon TABLE_PAT_KEY ShortText --token_filters 'TokenFilterStem(""English"")'

みたいにトークンフィルターやトークナイザーやノーマライザーにパラメーターを指定できるようにする機能を考えているんですが、それもgrn_exprで表現して永続化しようと思っていました。
それの実装ができたら、それと同じように実装できるかもしれません。",True,{}
groonga/groonga,https://github.com/groonga/groonga,712,2017-06-14T04:41:25Z,2017-06-19T07:16:19Z,2019-05-22T04:50:04Z,CLOSED,False,29,1,1,https://github.com/kenhys,WIP grndb: add option to remove existent database files on recover,4,[],https://github.com/groonga/groonga/pull/712,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/712,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,713,2017-06-14T06:46:46Z,2017-06-24T05:51:33Z,2019-02-01T12:14:38Z,MERGED,True,79,0,2,https://github.com/kenhys,doc: add grndb --force-truncate option,2,[],https://github.com/groonga/groonga/pull/713,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/713,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,714,2017-06-20T06:35:58Z,2017-06-23T09:39:43Z,2019-05-22T02:54:45Z,MERGED,True,46,1,1,https://github.com/kenhys,Add --force-truncate option for grndb,4,[],https://github.com/groonga/groonga/pull/714,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/714,This option enable to recover corrupted object in database.,This option enable to recover corrupted object in database.,True,{}
groonga/groonga,https://github.com/groonga/groonga,714,2017-06-20T06:35:58Z,2017-06-23T09:39:43Z,2019-05-22T02:54:45Z,MERGED,True,46,1,1,https://github.com/kenhys,Add --force-truncate option for grndb,4,[],https://github.com/groonga/groonga/pull/714,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/714#issuecomment-310272720,This option enable to recover corrupted object in database.,"I've fixed with above feedback except the following two feedback

logger or standard output
object.truncate",True,{}
groonga/groonga,https://github.com/groonga/groonga,714,2017-06-20T06:35:58Z,2017-06-23T09:39:43Z,2019-05-22T02:54:45Z,MERGED,True,46,1,1,https://github.com/kenhys,Add --force-truncate option for grndb,4,[],https://github.com/groonga/groonga/pull/714,https://github.com/kenhys,3,https://github.com/groonga/groonga/pull/714#issuecomment-310621373,This option enable to recover corrupted object in database.,"Here is the corrupted database.
PS C:\cygwin64\home\Administrator\kenhys> dir .\testdb.corrupted


    ディレクトリ: C:\cygwin64\home\Administrator\kenhys\testdb.corrupted


Mode                LastWriteTime     Length Name
----                -------------     ------ ----
-a---        2017/06/23     11:47      65536 db
-a---        2017/06/23     11:47   12910592 db.0000000
-a---        2017/06/23     11:47    8454144 db.0000100
-a---        2017/06/23     11:47 1069875200 db.0000101
-a---        2017/06/23     11:48 1073741824 db.0000101.001
-a---        2017/06/23     11:49  562036736 db.0000101.003
-a---        2017/06/23     11:47    1048576 db.001
-a---        2017/06/23     11:47   12648448 db.conf

Then execute grndb check:
PS C:\cygwin64\home\Administrator\kenhys> .\groonga-7.0.4-x64\bin\grndb.exe check --log-path grndb.check.win.log --log-level info .\testdb.corrupted\db
[x.a] Data column is corrupt. (1) Truncate the column (truncate x.a or 'C:\cygwin64\home\Administrator\kenhys\groonga-7.
0.4-x64\bin\grndb.exe recover --force-truncate .\testdb.corrupted\db') and (2) load data again.

After grndb check, execute grndb recover with --force-truncate option.
PS C:\cygwin64\home\Administrator\kenhys> .\groonga-7.0.4-x64\bin\grndb.exe recover --force-truncate --log-path grndb.re
conver.force.win.log --log-level info .\testdb.corrupted\db
Corrupted <.\testdb.corrupted\db.0000101> related file is removed: <db.0000101.003>

.003 is also removed.

PS C:\cygwin64\home\Administrator\kenhys> dir .\testdb.corrupted


    ディレクトリ: C:\cygwin64\home\Administrator\kenhys\testdb.corrupted


Mode                LastWriteTime     Length Name
----                -------------     ------ ----
-a---        2017/06/23     18:31      65536 db
-a---        2017/06/23     11:47   12910592 db.0000000
-a---        2017/06/23     11:47    8454144 db.0000100
-a---        2017/06/23     18:31     327680 db.0000101
-a---        2017/06/23     11:47    1048576 db.001
-a---        2017/06/23     11:47   12648448 db.conf",True,{}
groonga/groonga,https://github.com/groonga/groonga,715,2017-06-20T06:36:44Z,2017-06-23T09:35:31Z,2019-02-01T12:22:12Z,MERGED,True,10,2,4,https://github.com/kenhys,mrb: enable mruby-dir for Dir#foreach,1,[],https://github.com/groonga/groonga/pull/715,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/715,"grndb --force-truncate use Dir#foreach so, this PR enable mruby-dir for it.","grndb --force-truncate use Dir#foreach so, this PR enable mruby-dir for it.",True,{}
groonga/groonga,https://github.com/groonga/groonga,715,2017-06-20T06:36:44Z,2017-06-23T09:35:31Z,2019-02-01T12:22:12Z,MERGED,True,10,2,4,https://github.com/kenhys,mrb: enable mruby-dir for Dir#foreach,1,[],https://github.com/groonga/groonga/pull/715,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/715#issuecomment-309658734,"grndb --force-truncate use Dir#foreach so, this PR enable mruby-dir for it.",windowsでビルドできない問題ではまっている。,True,{}
groonga/groonga,https://github.com/groonga/groonga,715,2017-06-20T06:36:44Z,2017-06-23T09:35:31Z,2019-02-01T12:22:12Z,MERGED,True,10,2,4,https://github.com/kenhys,mrb: enable mruby-dir for Dir#foreach,1,[],https://github.com/groonga/groonga/pull/715,https://github.com/kenhys,3,https://github.com/groonga/groonga/pull/715#issuecomment-309658844,"grndb --force-truncate use Dir#foreach so, this PR enable mruby-dir for it.","CXXLD    libgroonga.la
../vendor/mruby/.libs/libmruby.a(dirent.o): In function `opendir':
/tmp/groonga/groonga-7.0.4/vendor/mruby/mruby-dir/src/Win/dirent.c:39: multiple definition of `opendir'
../vendor/mruby/.libs/libmruby.a(dir.o):/tmp/groonga/groonga-7.0.4/vendor/mruby/mruby-dir/src/Win/dirent.c:39: first defined here
../vendor/mruby/.libs/libmruby.a(dirent.o): In function `closedir':
/tmp/groonga/groonga-7.0.4/vendor/mruby/mruby-dir/src/Win/dirent.c:81: multiple definition of `closedir'
../vendor/mruby/.libs/libmruby.a(dir.o):/tmp/groonga/groonga-7.0.4/vendor/mruby/mruby-dir/src/Win/dirent.c:81: first defined here
../vendor/mruby/.libs/libmruby.a(dirent.o): In function `readdir':
/tmp/groonga/groonga-7.0.4/vendor/mruby/mruby-dir/src/Win/dirent.c:104: multiple definition of `readdir'
../vendor/mruby/.libs/libmruby.a(dir.o):/tmp/groonga/groonga-7.0.4/vendor/mruby/mruby-dir/src/Win/dirent.c:104: first defined here
../vendor/mruby/.libs/libmruby.a(dirent.o): In function `rewinddir':
/tmp/groonga/groonga-7.0.4/vendor/mruby/mruby-dir/src/Win/dirent.c:124: multiple definition of `rewinddir'
../vendor/mruby/.libs/libmruby.a(dir.o):/tmp/groonga/groonga-7.0.4/vendor/mruby/mruby-dir/src/Win/dirent.c:124: first defined here
collect2: error: ld returned 1 exit status",True,{}
groonga/groonga,https://github.com/groonga/groonga,715,2017-06-20T06:36:44Z,2017-06-23T09:35:31Z,2019-02-01T12:22:12Z,MERGED,True,10,2,4,https://github.com/kenhys,mrb: enable mruby-dir for Dir#foreach,1,[],https://github.com/groonga/groonga/pull/715,https://github.com/kenhys,4,https://github.com/groonga/groonga/pull/715#issuecomment-309707456,"grndb --force-truncate use Dir#foreach so, this PR enable mruby-dir for it.",I've fixed above build issue.,True,{}
groonga/groonga,https://github.com/groonga/groonga,715,2017-06-20T06:36:44Z,2017-06-23T09:35:31Z,2019-02-01T12:22:12Z,MERGED,True,10,2,4,https://github.com/kenhys,mrb: enable mruby-dir for Dir#foreach,1,[],https://github.com/groonga/groonga/pull/715,https://github.com/kenhys,5,https://github.com/groonga/groonga/pull/715#issuecomment-310620514,"grndb --force-truncate use Dir#foreach so, this PR enable mruby-dir for it.",I've confirmed on windows.,True,{}
groonga/groonga,https://github.com/groonga/groonga,716,2017-06-21T10:09:39Z,2017-06-22T00:39:59Z,2017-06-22T01:57:52Z,MERGED,True,15,0,1,https://github.com/komainu8,Add null check of grn_ctx_at()'s return value in geo.c,1,[],https://github.com/groonga/groonga/pull/716,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/716,"GitHub #613
This commit avoids crash bug.","GitHub #613
This commit avoids crash bug.",True,{}
groonga/groonga,https://github.com/groonga/groonga,716,2017-06-21T10:09:39Z,2017-06-22T00:39:59Z,2017-06-22T01:57:52Z,MERGED,True,15,0,1,https://github.com/komainu8,Add null check of grn_ctx_at()'s return value in geo.c,1,[],https://github.com/groonga/groonga/pull/716,https://github.com/kou,2,https://github.com/groonga/groonga/pull/716#issuecomment-310251133,"GitHub #613
This commit avoids crash bug.",I've merged with some modifications.,True,{}
groonga/groonga,https://github.com/groonga/groonga,719,2017-06-26T06:22:29Z,2017-06-26T07:46:04Z,2017-06-26T07:46:04Z,CLOSED,False,39,0,3,https://github.com/kenhys,grndb: recover locked objects in --force-truncate mode,1,[],https://github.com/groonga/groonga/pull/719,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/719,"In the previous versions, grndb recover --force-truncate doesn't work if there are locked objects.
This PR supports it.","In the previous versions, grndb recover --force-truncate doesn't work if there are locked objects.
This PR supports it.",True,{}
groonga/groonga,https://github.com/groonga/groonga,719,2017-06-26T06:22:29Z,2017-06-26T07:46:04Z,2017-06-26T07:46:04Z,CLOSED,False,39,0,3,https://github.com/kenhys,grndb: recover locked objects in --force-truncate mode,1,[],https://github.com/groonga/groonga/pull/719,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/719#issuecomment-310986791,"In the previous versions, grndb recover --force-truncate doesn't work if there are locked objects.
This PR supports it.",This PR is not suitable to solve issue. I'll close it.,True,{}
groonga/groonga,https://github.com/groonga/groonga,720,2017-06-26T07:49:22Z,2017-06-26T10:06:40Z,2019-02-01T12:14:22Z,MERGED,True,1,1,1,https://github.com/kenhys,grndb: truncate object in advance for force truncate mode,1,[],https://github.com/groonga/groonga/pull/720,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/720,"Database#recover fails when corrupted object is locked.
so truncate such a object in advance.","Database#recover fails when corrupted object is locked.
so truncate such a object in advance.",True,{}
groonga/groonga,https://github.com/groonga/groonga,721,2017-06-29T09:26:44Z,2017-07-03T09:37:53Z,2019-02-01T12:21:46Z,MERGED,True,505,0,30,https://github.com/kenhys,Support function/math plugin,2,[],https://github.com/groonga/groonga/pull/721,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/721,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,721,2017-06-29T09:26:44Z,2017-07-03T09:37:53Z,2019-02-01T12:21:46Z,MERGED,True,505,0,30,https://github.com/kenhys,Support function/math plugin,2,[],https://github.com/groonga/groonga/pull/721,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/721#issuecomment-312164896,,UInt64の最大値が正しくloadできない疑惑がある。,True,{}
groonga/groonga,https://github.com/groonga/groonga,721,2017-06-29T09:26:44Z,2017-07-03T09:37:53Z,2019-02-01T12:21:46Z,MERGED,True,505,0,30,https://github.com/kenhys,Support function/math plugin,2,[],https://github.com/groonga/groonga/pull/721,https://github.com/kou,3,https://github.com/groonga/groonga/pull/721#issuecomment-312438037,,Test on AppVeyor is failed.,True,{}
groonga/groonga,https://github.com/groonga/groonga,721,2017-06-29T09:26:44Z,2017-07-03T09:37:53Z,2019-02-01T12:21:46Z,MERGED,True,505,0,30,https://github.com/kenhys,Support function/math plugin,2,[],https://github.com/groonga/groonga/pull/721,https://github.com/kenhys,4,https://github.com/groonga/groonga/pull/721#issuecomment-312550552,,"fixed plugin order in Makefile.am
fixed testcase to use --output 'math_abs(value)'
support GRN_DB_FLOAT in math_abs()",True,{}
groonga/groonga,https://github.com/groonga/groonga,721,2017-06-29T09:26:44Z,2017-07-03T09:37:53Z,2019-02-01T12:21:46Z,MERGED,True,505,0,30,https://github.com/kenhys,Support function/math plugin,2,[],https://github.com/groonga/groonga/pull/721,https://github.com/kenhys,5,https://github.com/groonga/groonga/pull/721#issuecomment-312550569,,But still AppVeyor test fails. umm...,True,{}
groonga/groonga,https://github.com/groonga/groonga,721,2017-06-29T09:26:44Z,2017-07-03T09:37:53Z,2019-02-01T12:21:46Z,MERGED,True,505,0,30,https://github.com/kenhys,Support function/math plugin,2,[],https://github.com/groonga/groonga/pull/721,https://github.com/kenhys,6,https://github.com/groonga/groonga/pull/721#issuecomment-312598555,,"Now test passed.
C:\cygwin64\home\Administrator\support\test\unit>grntest --groonga c:\cygwin64\home\Administrator\kenhys\groonga-7.0.5-x
64-2017-07-03\bin\groonga --base-directory c:\cygwin64\home\Administrator\kenhys\groonga\test\command --n-workers 4 c:\c
ygwin64\home\Administrator\kenhys\groonga\test\command\suite\select\function\math_abs
  tests/sec |    tests |   passes | failures |   leaked |  omitted | !checked |
[0]                                                                  [finished]
       0.59 |        3 |        3 |        0 |        0 |        0 |        0 |
[1]                                                                  [finished]
       0.78 |        4 |        4 |        0 |        0 |        0 |        0 |
[2]                                                                  [finished]
       0.61 |        3 |        3 |        0 |        0 |        0 |        0 |
[3]                                                                  [finished]
       0.63 |        3 |        3 |        0 |        0 |        0 |        0 |
|----------------------------------------------------------------------| [100%]

  tests/sec |    tests |   passes | failures |   leaked |  omitted | !checked |
       2.52 |       13 |       13 |        0 |        0 |        0 |        0 |
100% passed in 5.1567s.
PS C:\cygwin64\home\Administrator\support\test\unit>",True,{}
groonga/groonga,https://github.com/groonga/groonga,723,2017-06-30T07:57:08Z,2017-06-30T07:57:20Z,2019-05-22T02:54:49Z,MERGED,True,274,0,22,https://github.com/kenhys,test: add load minmax test case,1,[],https://github.com/groonga/groonga/pull/723,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/723,TODO: max UInt64 test case may return unexpected result.,TODO: max UInt64 test case may return unexpected result.,True,{}
groonga/groonga,https://github.com/groonga/groonga,724,2017-06-30T09:07:33Z,2017-06-30T13:03:12Z,2017-07-01T16:10:20Z,MERGED,True,111,13,1,https://github.com/s-yata,Assign inverted-index sections to text vector elements,2,[],https://github.com/groonga/groonga/pull/724,https://github.com/s-yata,1,https://github.com/groonga/groonga/pull/724,"Description
These commits fix a bug that a select cannot find phrases in vector columns (#494) by assigning inverted-index sections to vector elements.","Description
These commits fix a bug that a select cannot find phrases in vector columns (#494) by assigning inverted-index sections to vector elements.",True,{}
groonga/groonga,https://github.com/groonga/groonga,725,2017-07-01T15:31:46Z,2017-07-03T01:53:05Z,2017-07-03T03:47:17Z,MERGED,True,11,0,2,https://github.com/naoa,Add grn_window_size,1,[],https://github.com/groonga/groonga/pull/725,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/725,I would like to get grn_window->n_ids.,I would like to get grn_window->n_ids.,True,{}
groonga/groonga,https://github.com/groonga/groonga,725,2017-07-01T15:31:46Z,2017-07-03T01:53:05Z,2017-07-03T03:47:17Z,MERGED,True,11,0,2,https://github.com/naoa,Add grn_window_size,1,[],https://github.com/groonga/groonga/pull/725,https://github.com/naoa,2,https://github.com/groonga/groonga/pull/725#issuecomment-312531864,I would like to get grn_window->n_ids.,I've fixed and squashed.,True,{}
groonga/groonga,https://github.com/groonga/groonga,725,2017-07-01T15:31:46Z,2017-07-03T01:53:05Z,2017-07-03T03:47:17Z,MERGED,True,11,0,2,https://github.com/naoa,Add grn_window_size,1,[],https://github.com/groonga/groonga/pull/725,https://github.com/kou,3,https://github.com/groonga/groonga/pull/725#issuecomment-312532455,I would like to get grn_window->n_ids.,Thanks!,True,{}
groonga/groonga,https://github.com/groonga/groonga,726,2017-07-01T15:36:12Z,2017-07-03T14:18:56Z,2017-07-20T14:27:46Z,CLOSED,False,638,4,14,https://github.com/naoa,Add limit and ofset for window function,2,[],https://github.com/groonga/groonga/pull/726,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/726,"I would like to define limit and offset for window function for huge size dataset.
(e.g. If a resultset has 1M records, it needs to set 1M ids)","I would like to define limit and offset for window function for huge size dataset.
(e.g. If a resultset has 1M records, it needs to set 1M ids)",True,{}
groonga/groonga,https://github.com/groonga/groonga,726,2017-07-01T15:36:12Z,2017-07-03T14:18:56Z,2017-07-20T14:27:46Z,CLOSED,False,638,4,14,https://github.com/naoa,Add limit and ofset for window function,2,[],https://github.com/groonga/groonga/pull/726,https://github.com/kou,2,https://github.com/groonga/groonga/pull/726#issuecomment-312489233,"I would like to define limit and offset for window function for huge size dataset.
(e.g. If a resultset has 1M records, it needs to set 1M ids)",Umm... Could you show use case?,True,{}
groonga/groonga,https://github.com/groonga/groonga,726,2017-07-01T15:36:12Z,2017-07-03T14:18:56Z,2017-07-20T14:27:46Z,CLOSED,False,638,4,14,https://github.com/naoa,Add limit and ofset for window function,2,[],https://github.com/groonga/groonga/pull/726,https://github.com/naoa,3,https://github.com/groonga/groonga/pull/726#issuecomment-312534779,"I would like to define limit and offset for window function for huge size dataset.
(e.g. If a resultset has 1M records, it needs to set 1M ids)","At first, I was thinking to get some slices have different # of records with one query as following.
For example, # of output records is 10-100 including some detail info to show search results, # of output records on slice is 1000-100000 including just short info to visualize document featured vector.
select Documents --filter 'index1 @ ""データ""' ¥
  --columns[map].stage filtered ¥
  --columns[map].type Float ¥
  --columns[map].flags COLUMN_VECTOR ¥
  --columns[map].value 'window_pca(featured_vector,{""n_clusters"": 10})' ¥
  --columns[map].window.sort_keys '-_score' ¥
  --columns[map].window.limit 5 ¥
  --slices[featured_map].filter 'vector_size(map) > 0' ¥
  --slices[featured_map].limit -1 ¥
  --slices[featured_map].output_columns _id,app_id,map,map_cluster ¥
  --output_columns _id,_score,app_id,title,abstract ¥
  --sort_keys -_score --limit 1

(window_pca function processes Principal component analysis(PCA). PCA is reducing dimension of matrix to make easy to visualize.)
But, After I started to implement WebApp, I am thinking now it is okay with 2 queries using just output stage.
select Documents --filter 'index1 @ ""データ""' ¥
--columns[map].stage output ¥
--columns[map].type Float ¥
--columns[map].flags COLUMN_VECTOR ¥
--columns[map].value 'window_pca(featured_vector,{""n_clusters"": 10})' ¥
--columns[map].window.sort_keys '-_score' ¥
--output_columns _id,_score,app_id,title,map,map_cluster ¥
--sort_keys -_score --limit 5

So, If you feel it is non natural way, I am okay that this PR will be closed.",True,{}
groonga/groonga,https://github.com/groonga/groonga,726,2017-07-01T15:36:12Z,2017-07-03T14:18:56Z,2017-07-20T14:27:46Z,CLOSED,False,638,4,14,https://github.com/naoa,Add limit and ofset for window function,2,[],https://github.com/groonga/groonga/pull/726,https://github.com/kou,4,https://github.com/groonga/groonga/pull/726#issuecomment-312644090,"I would like to define limit and offset for window function for huge size dataset.
(e.g. If a resultset has 1M records, it needs to set 1M ids)","Thanks.
I think that we need dynamic columns support for slices instead of window.offset and window.limit:
select Documents \
  --filter 'index1 @ ""データ""' \
  --slices[featured_map1].columns[map].stage output \
  --slices[featured_map1].columns[map].type Float \
  --slices[featured_map1].columns[map].flags COLUMN_VECTOR \
  --slices[featured_map1].columns[map].value 'window_pca(featured_vector1,{""n_clusters"": 10})' \
  --slices[featured_map1].columns[map].window.sort_keys '-_score' \
  --slices[featured_map1].output_columns id,_score,app_id,title,map,map_cluster \
  --slices[featured_map1].sort_keys -_score \
  --slices[featured_map1].limit 5 \
  --slices[featured_map2].columns[map].stage output \
  --slices[featured_map2].columns[map].type Float \
  --slices[featured_map2].columns[map].flags COLUMN_VECTOR \
  --slices[featured_map2].columns[map].value 'window_pca(featured_vector2,{""n_clusters"": 10})' \
  --slices[featured_map2].columns[map].window.sort_keys '-_score' \
  --slices[featured_map2].sort_keys -_score \
  --slices[featured_map2].limit 5 \
  --output_columns _id \
  --limit 0",True,{}
groonga/groonga,https://github.com/groonga/groonga,726,2017-07-01T15:36:12Z,2017-07-03T14:18:56Z,2017-07-20T14:27:46Z,CLOSED,False,638,4,14,https://github.com/naoa,Add limit and ofset for window function,2,[],https://github.com/groonga/groonga/pull/726,https://github.com/naoa,5,https://github.com/groonga/groonga/pull/726#issuecomment-312652475,"I would like to define limit and offset for window function for huge size dataset.
(e.g. If a resultset has 1M records, it needs to set 1M ids)","Thanks.
I think that it is more natural way too.
But, currently slices require filter as mandatory.
  --slices[featured_map1].filter 'all_records() \

So I feel it is a little waste to copy all ids of resultset.
(The resultset may have around 1M records.)
slices allow to pass a case having sort_keys and  no filter in special.
The case uses just the original resultset for sorting.
What do you think it? Is this way acceptable?",True,{}
groonga/groonga,https://github.com/groonga/groonga,726,2017-07-01T15:36:12Z,2017-07-03T14:18:56Z,2017-07-20T14:27:46Z,CLOSED,False,638,4,14,https://github.com/naoa,Add limit and ofset for window function,2,[],https://github.com/groonga/groonga/pull/726,https://github.com/kou,6,https://github.com/groonga/groonga/pull/726#issuecomment-312655751,"I would like to define limit and offset for window function for huge size dataset.
(e.g. If a resultset has 1M records, it needs to set 1M ids)","What do you think it? Is this way acceptable?

Ah, no filtering isn't OLAP slicing...
Umm... OK. We accept the no filter case for slices as a special case.",True,{}
groonga/groonga,https://github.com/groonga/groonga,726,2017-07-01T15:36:12Z,2017-07-03T14:18:56Z,2017-07-20T14:27:46Z,CLOSED,False,638,4,14,https://github.com/naoa,Add limit and ofset for window function,2,[],https://github.com/groonga/groonga/pull/726,https://github.com/naoa,7,https://github.com/groonga/groonga/pull/726#issuecomment-312657741,"I would like to define limit and offset for window function for huge size dataset.
(e.g. If a resultset has 1M records, it needs to set 1M ids)","Thanks for discussion.
I'll implement dynamic column creation on slices and no filter case for slices later.
(It may be a while later, but it's useful for me, so I will implement it.)
This PR is closed.",True,{}
groonga/groonga,https://github.com/groonga/groonga,726,2017-07-01T15:36:12Z,2017-07-03T14:18:56Z,2017-07-20T14:27:46Z,CLOSED,False,638,4,14,https://github.com/naoa,Add limit and ofset for window function,2,[],https://github.com/groonga/groonga/pull/726,https://github.com/kou,8,https://github.com/groonga/groonga/pull/726#issuecomment-312658273,"I would like to define limit and offset for window function for huge size dataset.
(e.g. If a resultset has 1M records, it needs to set 1M ids)",Thanks!,True,{}
groonga/groonga,https://github.com/groonga/groonga,727,2017-07-04T05:49:26Z,2017-07-04T05:49:34Z,2019-02-01T12:21:38Z,MERGED,True,198,7,6,https://github.com/kenhys,doc: add math_abs documentation,3,[],https://github.com/groonga/groonga/pull/727,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/727,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,729,2017-07-06T08:05:01Z,2017-07-06T08:13:13Z,2017-07-06T08:35:39Z,MERGED,True,1,1,1,https://github.com/komainu8,package windows: use the latest pcre,1,[],https://github.com/groonga/groonga/pull/729,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/729,"pcre-8.39 had not been exist in ftp://ftp.csx.cam.ac.uk/pub/software/programming/pcre
So, I modified to use pcre-8.41 instead pcre-8.39.","pcre-8.39 had not been exist in ftp://ftp.csx.cam.ac.uk/pub/software/programming/pcre
So, I modified to use pcre-8.41 instead pcre-8.39.",True,{}
groonga/groonga,https://github.com/groonga/groonga,729,2017-07-06T08:05:01Z,2017-07-06T08:13:13Z,2017-07-06T08:35:39Z,MERGED,True,1,1,1,https://github.com/komainu8,package windows: use the latest pcre,1,[],https://github.com/groonga/groonga/pull/729,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/729#issuecomment-313330295,"pcre-8.39 had not been exist in ftp://ftp.csx.cam.ac.uk/pub/software/programming/pcre
So, I modified to use pcre-8.41 instead pcre-8.39.",Good catch! merged,True,{}
groonga/groonga,https://github.com/groonga/groonga,730,2017-07-07T03:48:27Z,2017-07-07T04:22:53Z,2017-07-07T04:24:56Z,MERGED,True,0,3,1,https://github.com/s-yata,"normalize: don't output """" on error",1,[],https://github.com/groonga/groonga/pull/730,https://github.com/s-yata,1,https://github.com/groonga/groonga/pull/730,"Description
The command normalize returns normalized_text on success.
See http://groonga.org/ja/docs/reference/commands/normalize.html for details.
The expected format is as follows.
> normalize NormalizerAuto 'String' --output_pretty yes
[
  [
    0,
    1499398853.852021,
    0.0001425743103027344
  ],
  {
    ""normalized"": ""string"",
    ""types"": [
    ],
    ""checks"": [
    ]
  }
]

However, normalize returns an empty string on error.
> normalize NoSuchNormalizer 'String' --output_pretty yes
[
  [
    -22,
    1499398844.332195,
    8.940696716308594e-05,
    ""[normalize] nonexistent normalizer: <NoSuchNormalizer>"",
    [
      [
        ""proc_normalize"",
        ""proc.c"",
        1110
      ]
    ]
  ],
  """"
]

After applying this patch, normalize returns nothing on error.
See the following example.
> normalize NoSuchNormalizer 'String' --output_pretty yes
[
  [
    -22,
    1499399034.379015,
    0.001290321350097656,
    ""[normalize] nonexistent normalizer: <NoSuchNormalizer>"",
    [
      [
        ""proc_normalize"",
        ""proc.c"",
        1110
      ]
    ]
  ]
]","Description
The command normalize returns normalized_text on success.
See http://groonga.org/ja/docs/reference/commands/normalize.html for details.
The expected format is as follows.
> normalize NormalizerAuto 'String' --output_pretty yes
[
  [
    0,
    1499398853.852021,
    0.0001425743103027344
  ],
  {
    ""normalized"": ""string"",
    ""types"": [
    ],
    ""checks"": [
    ]
  }
]

However, normalize returns an empty string on error.
> normalize NoSuchNormalizer 'String' --output_pretty yes
[
  [
    -22,
    1499398844.332195,
    8.940696716308594e-05,
    ""[normalize] nonexistent normalizer: <NoSuchNormalizer>"",
    [
      [
        ""proc_normalize"",
        ""proc.c"",
        1110
      ]
    ]
  ],
  """"
]

After applying this patch, normalize returns nothing on error.
See the following example.
> normalize NoSuchNormalizer 'String' --output_pretty yes
[
  [
    -22,
    1499399034.379015,
    0.001290321350097656,
    ""[normalize] nonexistent normalizer: <NoSuchNormalizer>"",
    [
      [
        ""proc_normalize"",
        ""proc.c"",
        1110
      ]
    ]
  ]
]",True,{}
groonga/groonga,https://github.com/groonga/groonga,730,2017-07-07T03:48:27Z,2017-07-07T04:22:53Z,2017-07-07T04:24:56Z,MERGED,True,0,3,1,https://github.com/s-yata,"normalize: don't output """" on error",1,[],https://github.com/groonga/groonga/pull/730,https://github.com/kou,2,https://github.com/groonga/groonga/pull/730#issuecomment-313583537,"Description
The command normalize returns normalized_text on success.
See http://groonga.org/ja/docs/reference/commands/normalize.html for details.
The expected format is as follows.
> normalize NormalizerAuto 'String' --output_pretty yes
[
  [
    0,
    1499398853.852021,
    0.0001425743103027344
  ],
  {
    ""normalized"": ""string"",
    ""types"": [
    ],
    ""checks"": [
    ]
  }
]

However, normalize returns an empty string on error.
> normalize NoSuchNormalizer 'String' --output_pretty yes
[
  [
    -22,
    1499398844.332195,
    8.940696716308594e-05,
    ""[normalize] nonexistent normalizer: <NoSuchNormalizer>"",
    [
      [
        ""proc_normalize"",
        ""proc.c"",
        1110
      ]
    ]
  ],
  """"
]

After applying this patch, normalize returns nothing on error.
See the following example.
> normalize NoSuchNormalizer 'String' --output_pretty yes
[
  [
    -22,
    1499399034.379015,
    0.001290321350097656,
    ""[normalize] nonexistent normalizer: <NoSuchNormalizer>"",
    [
      [
        ""proc_normalize"",
        ""proc.c"",
        1110
      ]
    ]
  ]
]",Good catch!,True,{}
groonga/groonga,https://github.com/groonga/groonga,730,2017-07-07T03:48:27Z,2017-07-07T04:22:53Z,2017-07-07T04:24:56Z,MERGED,True,0,3,1,https://github.com/s-yata,"normalize: don't output """" on error",1,[],https://github.com/groonga/groonga/pull/730,https://github.com/s-yata,3,https://github.com/groonga/groonga/pull/730#issuecomment-313583745,"Description
The command normalize returns normalized_text on success.
See http://groonga.org/ja/docs/reference/commands/normalize.html for details.
The expected format is as follows.
> normalize NormalizerAuto 'String' --output_pretty yes
[
  [
    0,
    1499398853.852021,
    0.0001425743103027344
  ],
  {
    ""normalized"": ""string"",
    ""types"": [
    ],
    ""checks"": [
    ]
  }
]

However, normalize returns an empty string on error.
> normalize NoSuchNormalizer 'String' --output_pretty yes
[
  [
    -22,
    1499398844.332195,
    8.940696716308594e-05,
    ""[normalize] nonexistent normalizer: <NoSuchNormalizer>"",
    [
      [
        ""proc_normalize"",
        ""proc.c"",
        1110
      ]
    ]
  ],
  """"
]

After applying this patch, normalize returns nothing on error.
See the following example.
> normalize NoSuchNormalizer 'String' --output_pretty yes
[
  [
    -22,
    1499399034.379015,
    0.001290321350097656,
    ""[normalize] nonexistent normalizer: <NoSuchNormalizer>"",
    [
      [
        ""proc_normalize"",
        ""proc.c"",
        1110
      ]
    ]
  ]
]",Thank you!,True,{}
groonga/groonga,https://github.com/groonga/groonga,731,2017-07-07T07:36:02Z,2017-07-10T07:36:37Z,2017-07-10T07:36:43Z,MERGED,True,4,1,1,https://github.com/s-yata,table_tokenize: add a missing error,1,[],https://github.com/groonga/groonga/pull/731,https://github.com/s-yata,1,https://github.com/groonga/groonga/pull/731,"Description
table_tokenize returns nothing if the specified table does not exist.
> table_tokenize no_such_table 'あいうえお'

This patch updates table_tokenize to return an error as follows.
> table_tokenize no_such_table 'あいうえお'
[[-22,1499412795.316891,0.001605749130249023,""[table_tokenize] nonexistent lexicon: <no_such_table>"",[[""command_table_tokenize"",""proc_tokenize.c"",271]]]]","Description
table_tokenize returns nothing if the specified table does not exist.
> table_tokenize no_such_table 'あいうえお'

This patch updates table_tokenize to return an error as follows.
> table_tokenize no_such_table 'あいうえお'
[[-22,1499412795.316891,0.001605749130249023,""[table_tokenize] nonexistent lexicon: <no_such_table>"",[[""command_table_tokenize"",""proc_tokenize.c"",271]]]]",True,{}
groonga/groonga,https://github.com/groonga/groonga,732,2017-07-10T03:35:52Z,2017-07-10T04:25:29Z,2018-02-07T06:51:50Z,MERGED,True,2,2,1,https://github.com/komainu8,doc: fix a typo,1,[],https://github.com/groonga/groonga/pull/732,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/732,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,732,2017-07-10T03:35:52Z,2017-07-10T04:25:29Z,2018-02-07T06:51:50Z,MERGED,True,2,2,1,https://github.com/komainu8,doc: fix a typo,1,[],https://github.com/groonga/groonga/pull/732,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/732#issuecomment-313998777,,Good catch!,True,{}
groonga/groonga,https://github.com/groonga/groonga,733,2017-07-11T13:06:50Z,2017-07-11T14:26:57Z,2017-07-11T14:50:55Z,MERGED,True,16,0,1,https://github.com/naoa,functions/time: avoid divided by zero,1,[],https://github.com/groonga/groonga/pull/733,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/733,It is caused crash process.,It is caused crash process.,True,{}
groonga/groonga,https://github.com/groonga/groonga,733,2017-07-11T13:06:50Z,2017-07-11T14:26:57Z,2017-07-11T14:50:55Z,MERGED,True,16,0,1,https://github.com/naoa,functions/time: avoid divided by zero,1,[],https://github.com/groonga/groonga/pull/733,https://github.com/naoa,2,https://github.com/groonga/groonga/pull/733#issuecomment-314458895,It is caused crash process.,"I've fixed to show the interval.
overflow case sample:
""time_classify_month(): the second argument must not be zero: <4294967296>",True,{}
groonga/groonga,https://github.com/groonga/groonga,733,2017-07-11T13:06:50Z,2017-07-11T14:26:57Z,2017-07-11T14:50:55Z,MERGED,True,16,0,1,https://github.com/naoa,functions/time: avoid divided by zero,1,[],https://github.com/groonga/groonga/pull/733,https://github.com/kou,3,https://github.com/groonga/groonga/pull/733#issuecomment-314461596,It is caused crash process.,"Thanks!
Adding a test is better. :-)",True,{}
groonga/groonga,https://github.com/groonga/groonga,734,2017-07-11T14:34:51Z,2017-07-11T14:48:36Z,2017-07-11T14:51:27Z,MERGED,True,85,0,2,https://github.com/naoa,functions/time: add test for overflow interval case,1,[],https://github.com/groonga/groonga/pull/734,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/734,"I added test case base on the comment of #733.
I thought it doesn't need because it is invalid case.","I added test case base on the comment of #733.
I thought it doesn't need because it is invalid case.",True,{}
groonga/groonga,https://github.com/groonga/groonga,734,2017-07-11T14:34:51Z,2017-07-11T14:48:36Z,2017-07-11T14:51:27Z,MERGED,True,85,0,2,https://github.com/naoa,functions/time: add test for overflow interval case,1,[],https://github.com/groonga/groonga/pull/734,https://github.com/kou,2,https://github.com/groonga/groonga/pull/734#issuecomment-314468845,"I added test case base on the comment of #733.
I thought it doesn't need because it is invalid case.","Thanks!
We need invalid cases to confirm Groonga doesn't crash for invalid cases.",True,{}
groonga/groonga,https://github.com/groonga/groonga,734,2017-07-11T14:34:51Z,2017-07-11T14:48:36Z,2017-07-11T14:51:27Z,MERGED,True,85,0,2,https://github.com/naoa,functions/time: add test for overflow interval case,1,[],https://github.com/groonga/groonga/pull/734,https://github.com/naoa,3,https://github.com/groonga/groonga/pull/734#issuecomment-314469668,"I added test case base on the comment of #733.
I thought it doesn't need because it is invalid case.","I see.
Thanks for merging.",True,{}
groonga/groonga,https://github.com/groonga/groonga,735,2017-07-12T03:24:53Z,2017-07-17T12:33:55Z,2017-07-20T14:27:25Z,MERGED,True,277,60,9,https://github.com/naoa,"min,max: support number in vector",1,[],https://github.com/groonga/groonga/pull/735,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/735,I would like to retrieve number in grn_uvector with min and max.,I would like to retrieve number in grn_uvector with min and max.,True,{}
groonga/groonga,https://github.com/groonga/groonga,735,2017-07-12T03:24:53Z,2017-07-17T12:33:55Z,2017-07-20T14:27:25Z,MERGED,True,277,60,9,https://github.com/naoa,"min,max: support number in vector",1,[],https://github.com/groonga/groonga/pull/735,https://github.com/kou,2,https://github.com/groonga/groonga/pull/735#issuecomment-315749993,I would like to retrieve number in grn_uvector with min and max.,Thanks!!,True,{}
groonga/groonga,https://github.com/groonga/groonga,736,2017-07-12T10:06:47Z,2017-07-14T06:31:50Z,2018-02-07T06:51:46Z,MERGED,True,182,88,3,https://github.com/komainu8,Add `--sort_hash_table` option in dump command,3,[],https://github.com/groonga/groonga/pull/736,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/736,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,736,2017-07-12T10:06:47Z,2017-07-14T06:31:50Z,2018-02-07T06:51:46Z,MERGED,True,182,88,3,https://github.com/komainu8,Add `--sort_hash_table` option in dump command,3,[],https://github.com/groonga/groonga/pull/736,https://github.com/kou,2,https://github.com/groonga/groonga/pull/736#issuecomment-315286553,,I've merged with some modifications.,True,{}
groonga/groonga,https://github.com/groonga/groonga,737,2017-07-13T03:15:53Z,2017-08-25T05:27:26Z,2018-02-07T06:51:22Z,MERGED,True,70,15,2,https://github.com/komainu8,doc dump: add sort_hash_table option,2,[],https://github.com/groonga/groonga/pull/737,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/737,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,737,2017-07-13T03:15:53Z,2017-08-25T05:27:26Z,2018-02-07T06:51:22Z,MERGED,True,70,15,2,https://github.com/komainu8,doc dump: add sort_hash_table option,2,[],https://github.com/groonga/groonga/pull/737,https://github.com/s-yata,2,https://github.com/groonga/groonga/pull/737#issuecomment-318960602,,"[dump_records]
         [dump_indexes]
+        [sort_hash_table]

 Usage
The dump command seems to handle the 6-th unnamed argument as --dump_configs, not --sort_hash_table, as follows.
void
grn_proc_init_dump(grn_ctx *ctx)
{
  grn_expr_var vars[7];

  grn_plugin_expr_var_init(ctx, &(vars[0]), ""tables"", -1);
  grn_plugin_expr_var_init(ctx, &(vars[1]), ""dump_plugins"", -1);
  grn_plugin_expr_var_init(ctx, &(vars[2]), ""dump_schema"", -1);
  grn_plugin_expr_var_init(ctx, &(vars[3]), ""dump_records"", -1);
  grn_plugin_expr_var_init(ctx, &(vars[4]), ""dump_indexes"", -1);
  grn_plugin_expr_var_init(ctx, &(vars[5]), ""dump_configs"", -1);
  grn_plugin_expr_var_init(ctx, &(vars[6]), ""sort_hash_table"", -1);
  grn_plugin_command_create(ctx,
                            ""dump"", -1,
                            command_dump,
                            sizeof(vars) / sizeof(vars[0]),
                            vars);
}",True,{}
groonga/groonga,https://github.com/groonga/groonga,737,2017-07-13T03:15:53Z,2017-08-25T05:27:26Z,2018-02-07T06:51:22Z,MERGED,True,70,15,2,https://github.com/komainu8,doc dump: add sort_hash_table option,2,[],https://github.com/groonga/groonga/pull/737,https://github.com/komainu8,3,https://github.com/groonga/groonga/pull/737#issuecomment-318994920,,"@s-yata @kenhys Thank you for your comments.
I've fixed it.",True,{}
groonga/groonga,https://github.com/groonga/groonga,739,2017-07-13T08:33:51Z,2018-02-07T06:51:18Z,2018-02-07T06:51:18Z,CLOSED,False,32,5,1,https://github.com/komainu8,doc api: add reference in `grn_table`,2,[],https://github.com/groonga/groonga/pull/739,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/739,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,740,2017-07-13T22:11:43Z,2017-07-17T12:19:23Z,2017-07-20T14:27:23Z,MERGED,True,105,5,4,https://github.com/naoa,between: support specifying index column,2,[],https://github.com/groonga/groonga/pull/740,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/740,I would like to specify directly index column with between().,I would like to specify directly index column with between().,True,{}
groonga/groonga,https://github.com/groonga/groonga,740,2017-07-13T22:11:43Z,2017-07-17T12:19:23Z,2017-07-20T14:27:23Z,MERGED,True,105,5,4,https://github.com/naoa,between: support specifying index column,2,[],https://github.com/groonga/groonga/pull/740,https://github.com/kou,2,https://github.com/groonga/groonga/pull/740#issuecomment-315741624,I would like to specify directly index column with between().,Thanks!,True,{}
groonga/groonga,https://github.com/groonga/groonga,741,2017-07-14T06:14:24Z,2017-07-14T06:17:29Z,2018-02-07T06:51:45Z,MERGED,True,1,0,1,https://github.com/komainu8,doc: add GRN_ZSTD_ERROR,1,[],https://github.com/groonga/groonga/pull/741,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/741,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,741,2017-07-14T06:14:24Z,2017-07-14T06:17:29Z,2018-02-07T06:51:45Z,MERGED,True,1,0,1,https://github.com/komainu8,doc: add GRN_ZSTD_ERROR,1,[],https://github.com/groonga/groonga/pull/741,https://github.com/kou,2,https://github.com/groonga/groonga/pull/741#issuecomment-315280126,,Good catch!,True,{}
groonga/groonga,https://github.com/groonga/groonga,744,2017-07-20T02:25:36Z,2017-07-20T08:15:17Z,2017-07-24T02:39:48Z,MERGED,True,74,0,1,https://github.com/komainu8,Add how to troubleshooting,1,[],https://github.com/groonga/groonga/pull/744,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/744,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,744,2017-07-20T02:25:36Z,2017-07-20T08:15:17Z,2017-07-24T02:39:48Z,MERGED,True,74,0,1,https://github.com/komainu8,Add how to troubleshooting,1,[],https://github.com/groonga/groonga/pull/744,https://github.com/kou,2,https://github.com/groonga/groonga/pull/744#issuecomment-317295019,,of in file name is needless. how_to_analyze_error_message.,True,{}
groonga/groonga,https://github.com/groonga/groonga,745,2017-07-21T06:19:57Z,2017-07-21T06:20:07Z,2019-02-01T12:21:29Z,MERGED,True,1,1,1,https://github.com/kenhys,httpd: put groonga-httpd.pid under /var/run/groonga/,1,[],https://github.com/groonga/groonga/pull/745,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/745,"The default pid path (/var/run/groonga-httpd.pid) and pid path of
groonga-httpd-restart (/var/run/groonga/groonga-httpd.pid) are
different.
This mismatch blocks restarting groonga-httpd.
GitHub: #743
Reported by sozaki. Thanks!!!","The default pid path (/var/run/groonga-httpd.pid) and pid path of
groonga-httpd-restart (/var/run/groonga/groonga-httpd.pid) are
different.
This mismatch blocks restarting groonga-httpd.
GitHub: #743
Reported by sozaki. Thanks!!!",True,{}
groonga/groonga,https://github.com/groonga/groonga,746,2017-07-24T02:43:01Z,2017-07-24T05:18:33Z,2017-07-24T05:48:20Z,MERGED,True,0,0,1,https://github.com/komainu8,Remove needless `of` in file name.,1,[],https://github.com/groonga/groonga/pull/746,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/746,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,746,2017-07-24T02:43:01Z,2017-07-24T05:18:33Z,2017-07-24T05:48:20Z,MERGED,True,0,0,1,https://github.com/komainu8,Remove needless `of` in file name.,1,[],https://github.com/groonga/groonga/pull/746,https://github.com/kou,2,https://github.com/groonga/groonga/pull/746#issuecomment-317321792,,Thanks!,True,{}
groonga/groonga,https://github.com/groonga/groonga,746,2017-07-24T02:43:01Z,2017-07-24T05:18:33Z,2017-07-24T05:48:20Z,MERGED,True,0,0,1,https://github.com/komainu8,Remove needless `of` in file name.,1,[],https://github.com/groonga/groonga/pull/746,https://github.com/kou,3,https://github.com/groonga/groonga/pull/746#issuecomment-317325327,,doc/files.am should also be updated.,True,{}
groonga/groonga,https://github.com/groonga/groonga,747,2017-07-24T09:11:10Z,2017-07-24T09:15:52Z,2018-02-07T06:51:28Z,CLOSED,False,4,0,1,https://github.com/komainu8,doc: update files.am,1,[],https://github.com/groonga/groonga/pull/747,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/747,Add how_to_analyze_error_message in files.am,Add how_to_analyze_error_message in files.am,True,{}
groonga/groonga,https://github.com/groonga/groonga,747,2017-07-24T09:11:10Z,2017-07-24T09:15:52Z,2018-02-07T06:51:28Z,CLOSED,False,4,0,1,https://github.com/komainu8,doc: update files.am,1,[],https://github.com/groonga/groonga/pull/747,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/747#issuecomment-317365394,Add how_to_analyze_error_message in files.am,"Thanks!
but this issue is already fixed via 24853a7",True,{}
groonga/groonga,https://github.com/groonga/groonga,750,2017-08-01T06:20:53Z,2017-08-01T12:55:08Z,2017-08-01T13:56:54Z,MERGED,True,79,21,3,https://github.com/s-yata,Support prefix match search using multiple indexes,2,[],https://github.com/groonga/groonga/pull/750,https://github.com/s-yata,1,https://github.com/groonga/groonga/pull/750,"Description
The current Groonga does not support prefix match search using multiple indexes.
The following is an example.
table_create Tbl TABLE_NO_KEY
# [[0,1501469829.300504,0.0007023811340332031],true]
column_create Tbl title COLUMN_SCALAR ShortText
# [[0,1501469829.30153,0.0002200603485107422],true]
column_create Tbl body COLUMN_SCALAR Text
# [[0,1501469829.302014,0.0001537799835205078],true]

load --table Tbl --columns 'title,body'
[
[""Groonga overview"",""Groonga is a fast and accurate full text search engine based on inverted index.""],
[""Full text search and Instant update"",""Groonga also uses inverted indexes but supports instant updates.""]
]
# [[0,1501469829.302454,0.00145721435546875],2]

table_create Idx TABLE_PAT_KEY ShortText --default_tokenizer TokenBigram --normalizer NormalizerAuto
# [[0,1501469829.304491,0.0002417564392089844],true]
column_create Idx title COLUMN_INDEX|WITH_POSITION Tbl title
# [[0,1501469829.305091,0.004905223846435547],true]
column_create Idx body COLUMN_INDEX|WITH_POSITION Tbl body
# [[0,1501469829.310441,0.004695653915405273],true]


# The following select commands must return the same records,
# but the actual results are different.

select Tbl --match_columns 'title||body' --query 'Groo*' --output_columns '_id,_score' --match_escalation_threshold -1
# [[0,1501469829.315903,0.03078055381774902],
#  [[[1],[[""_id"",""UInt32""],[""_score"",""Int32""]],[1,1]]]]

select Tbl --match_columns 'body||title' --query 'Groo*' --output_columns '_id,_score' --match_escalation_threshold -1
# [[0,1501469829.346935,0.0007908344268798828],
#  [[[2],[[""_id"",""UInt32""],[""_score"",""Int32""]],[1,1],[2,1]]]]

This pull request changes the result as follows.
select Tbl --match_columns 'title||body' --query 'Groo*' --output_columns '_id,_score' --match_escalation_threshold -1
# [[0,1501568194.686332,0.02700471878051758],
#  [[[2],[[""_id"",""UInt32""],[""_score"",""Int32""]],[1,2],[2,1]]]]

select Tbl --match_columns 'body||title' --query 'Groo*' --output_columns '_id,_score' --match_escalation_threshold -1
# [[0,1501568194.713654,0.0007750988006591797],
#  [[[2],[[""_id"",""UInt32""],[""_score"",""Int32""]],[1,2],[2,1]]]]","Description
The current Groonga does not support prefix match search using multiple indexes.
The following is an example.
table_create Tbl TABLE_NO_KEY
# [[0,1501469829.300504,0.0007023811340332031],true]
column_create Tbl title COLUMN_SCALAR ShortText
# [[0,1501469829.30153,0.0002200603485107422],true]
column_create Tbl body COLUMN_SCALAR Text
# [[0,1501469829.302014,0.0001537799835205078],true]

load --table Tbl --columns 'title,body'
[
[""Groonga overview"",""Groonga is a fast and accurate full text search engine based on inverted index.""],
[""Full text search and Instant update"",""Groonga also uses inverted indexes but supports instant updates.""]
]
# [[0,1501469829.302454,0.00145721435546875],2]

table_create Idx TABLE_PAT_KEY ShortText --default_tokenizer TokenBigram --normalizer NormalizerAuto
# [[0,1501469829.304491,0.0002417564392089844],true]
column_create Idx title COLUMN_INDEX|WITH_POSITION Tbl title
# [[0,1501469829.305091,0.004905223846435547],true]
column_create Idx body COLUMN_INDEX|WITH_POSITION Tbl body
# [[0,1501469829.310441,0.004695653915405273],true]


# The following select commands must return the same records,
# but the actual results are different.

select Tbl --match_columns 'title||body' --query 'Groo*' --output_columns '_id,_score' --match_escalation_threshold -1
# [[0,1501469829.315903,0.03078055381774902],
#  [[[1],[[""_id"",""UInt32""],[""_score"",""Int32""]],[1,1]]]]

select Tbl --match_columns 'body||title' --query 'Groo*' --output_columns '_id,_score' --match_escalation_threshold -1
# [[0,1501469829.346935,0.0007908344268798828],
#  [[[2],[[""_id"",""UInt32""],[""_score"",""Int32""]],[1,1],[2,1]]]]

This pull request changes the result as follows.
select Tbl --match_columns 'title||body' --query 'Groo*' --output_columns '_id,_score' --match_escalation_threshold -1
# [[0,1501568194.686332,0.02700471878051758],
#  [[[2],[[""_id"",""UInt32""],[""_score"",""Int32""]],[1,2],[2,1]]]]

select Tbl --match_columns 'body||title' --query 'Groo*' --output_columns '_id,_score' --match_escalation_threshold -1
# [[0,1501568194.713654,0.0007750988006591797],
#  [[[2],[[""_id"",""UInt32""],[""_score"",""Int32""]],[1,2],[2,1]]]]",True,{}
groonga/groonga,https://github.com/groonga/groonga,750,2017-08-01T06:20:53Z,2017-08-01T12:55:08Z,2017-08-01T13:56:54Z,MERGED,True,79,21,3,https://github.com/s-yata,Support prefix match search using multiple indexes,2,[],https://github.com/groonga/groonga/pull/750,https://github.com/kou,2,https://github.com/groonga/groonga/pull/750#issuecomment-319362091,"Description
The current Groonga does not support prefix match search using multiple indexes.
The following is an example.
table_create Tbl TABLE_NO_KEY
# [[0,1501469829.300504,0.0007023811340332031],true]
column_create Tbl title COLUMN_SCALAR ShortText
# [[0,1501469829.30153,0.0002200603485107422],true]
column_create Tbl body COLUMN_SCALAR Text
# [[0,1501469829.302014,0.0001537799835205078],true]

load --table Tbl --columns 'title,body'
[
[""Groonga overview"",""Groonga is a fast and accurate full text search engine based on inverted index.""],
[""Full text search and Instant update"",""Groonga also uses inverted indexes but supports instant updates.""]
]
# [[0,1501469829.302454,0.00145721435546875],2]

table_create Idx TABLE_PAT_KEY ShortText --default_tokenizer TokenBigram --normalizer NormalizerAuto
# [[0,1501469829.304491,0.0002417564392089844],true]
column_create Idx title COLUMN_INDEX|WITH_POSITION Tbl title
# [[0,1501469829.305091,0.004905223846435547],true]
column_create Idx body COLUMN_INDEX|WITH_POSITION Tbl body
# [[0,1501469829.310441,0.004695653915405273],true]


# The following select commands must return the same records,
# but the actual results are different.

select Tbl --match_columns 'title||body' --query 'Groo*' --output_columns '_id,_score' --match_escalation_threshold -1
# [[0,1501469829.315903,0.03078055381774902],
#  [[[1],[[""_id"",""UInt32""],[""_score"",""Int32""]],[1,1]]]]

select Tbl --match_columns 'body||title' --query 'Groo*' --output_columns '_id,_score' --match_escalation_threshold -1
# [[0,1501469829.346935,0.0007908344268798828],
#  [[[2],[[""_id"",""UInt32""],[""_score"",""Int32""]],[1,1],[2,1]]]]

This pull request changes the result as follows.
select Tbl --match_columns 'title||body' --query 'Groo*' --output_columns '_id,_score' --match_escalation_threshold -1
# [[0,1501568194.686332,0.02700471878051758],
#  [[[2],[[""_id"",""UInt32""],[""_score"",""Int32""]],[1,2],[2,1]]]]

select Tbl --match_columns 'body||title' --query 'Groo*' --output_columns '_id,_score' --match_escalation_threshold -1
# [[0,1501568194.713654,0.0007750988006591797],
#  [[[2],[[""_id"",""UInt32""],[""_score"",""Int32""]],[1,2],[2,1]]]]","Merged.
We may be able to move index loop to grn_table_select_index().",True,{}
groonga/groonga,https://github.com/groonga/groonga,750,2017-08-01T06:20:53Z,2017-08-01T12:55:08Z,2017-08-01T13:56:54Z,MERGED,True,79,21,3,https://github.com/s-yata,Support prefix match search using multiple indexes,2,[],https://github.com/groonga/groonga/pull/750,https://github.com/s-yata,3,https://github.com/groonga/groonga/pull/750#issuecomment-319377376,"Description
The current Groonga does not support prefix match search using multiple indexes.
The following is an example.
table_create Tbl TABLE_NO_KEY
# [[0,1501469829.300504,0.0007023811340332031],true]
column_create Tbl title COLUMN_SCALAR ShortText
# [[0,1501469829.30153,0.0002200603485107422],true]
column_create Tbl body COLUMN_SCALAR Text
# [[0,1501469829.302014,0.0001537799835205078],true]

load --table Tbl --columns 'title,body'
[
[""Groonga overview"",""Groonga is a fast and accurate full text search engine based on inverted index.""],
[""Full text search and Instant update"",""Groonga also uses inverted indexes but supports instant updates.""]
]
# [[0,1501469829.302454,0.00145721435546875],2]

table_create Idx TABLE_PAT_KEY ShortText --default_tokenizer TokenBigram --normalizer NormalizerAuto
# [[0,1501469829.304491,0.0002417564392089844],true]
column_create Idx title COLUMN_INDEX|WITH_POSITION Tbl title
# [[0,1501469829.305091,0.004905223846435547],true]
column_create Idx body COLUMN_INDEX|WITH_POSITION Tbl body
# [[0,1501469829.310441,0.004695653915405273],true]


# The following select commands must return the same records,
# but the actual results are different.

select Tbl --match_columns 'title||body' --query 'Groo*' --output_columns '_id,_score' --match_escalation_threshold -1
# [[0,1501469829.315903,0.03078055381774902],
#  [[[1],[[""_id"",""UInt32""],[""_score"",""Int32""]],[1,1]]]]

select Tbl --match_columns 'body||title' --query 'Groo*' --output_columns '_id,_score' --match_escalation_threshold -1
# [[0,1501469829.346935,0.0007908344268798828],
#  [[[2],[[""_id"",""UInt32""],[""_score"",""Int32""]],[1,1],[2,1]]]]

This pull request changes the result as follows.
select Tbl --match_columns 'title||body' --query 'Groo*' --output_columns '_id,_score' --match_escalation_threshold -1
# [[0,1501568194.686332,0.02700471878051758],
#  [[[2],[[""_id"",""UInt32""],[""_score"",""Int32""]],[1,2],[2,1]]]]

select Tbl --match_columns 'body||title' --query 'Groo*' --output_columns '_id,_score' --match_escalation_threshold -1
# [[0,1501568194.713654,0.0007750988006591797],
#  [[[2],[[""_id"",""UInt32""],[""_score"",""Int32""]],[1,2],[2,1]]]]","Thank you!

We may be able to move index loop to grn_table_select_index().

grn_table_select_index_match() has a loop for multiple indexes, so I put such a loop in grn_table_select_index_prefix().
I'm not sure which one is better.",True,{}
groonga/groonga,https://github.com/groonga/groonga,752,2017-08-16T05:26:01Z,,2022-03-15T05:24:16Z,OPEN,False,428,0,13,https://github.com/kenhys,Add selector to check lexicon record which desn't contain any posting list,3,[],https://github.com/groonga/groonga/pull/752,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/752,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,752,2017-08-16T05:26:01Z,,2022-03-15T05:24:16Z,OPEN,False,428,0,13,https://github.com/kenhys,Add selector to check lexicon record which desn't contain any posting list,3,[],https://github.com/groonga/groonga/pull/752,https://github.com/kou,2,https://github.com/groonga/groonga/pull/752#issuecomment-322671596,,It should be implemented as a C API that the target token ID doesn't match anything.,True,{}
groonga/groonga,https://github.com/groonga/groonga,752,2017-08-16T05:26:01Z,,2022-03-15T05:24:16Z,OPEN,False,428,0,13,https://github.com/kenhys,Add selector to check lexicon record which desn't contain any posting list,3,[],https://github.com/groonga/groonga/pull/752,https://github.com/kou,3,https://github.com/groonga/groonga/pull/752#issuecomment-322671714,,All or nothing match tests are insufficient. Some tokens are matched but others aren't matched case is needed.,True,{}
groonga/groonga,https://github.com/groonga/groonga,752,2017-08-16T05:26:01Z,,2022-03-15T05:24:16Z,OPEN,False,428,0,13,https://github.com/kenhys,Add selector to check lexicon record which desn't contain any posting list,3,[],https://github.com/groonga/groonga/pull/752,https://github.com/kou,4,https://github.com/groonga/groonga/pull/752#issuecomment-322671965,,Test for invalid index name argument case is missing.,True,{}
groonga/groonga,https://github.com/groonga/groonga,752,2017-08-16T05:26:01Z,,2022-03-15T05:24:16Z,OPEN,False,428,0,13,https://github.com/kenhys,Add selector to check lexicon record which desn't contain any posting list,3,[],https://github.com/groonga/groonga/pull/752,https://github.com/kenhys,5,https://github.com/groonga/groonga/pull/752#issuecomment-324284362,,"I've push -f fixed version,

Changed to use experimental C API
Added invalid index name testcase
Added some tokens are matched testcase",True,{}
groonga/groonga,https://github.com/groonga/groonga,754,2017-08-22T03:37:32Z,2017-08-23T00:21:15Z,2017-08-23T00:21:18Z,MERGED,True,1221,1080,7,https://github.com/kou,Support adjust in query,2,[],https://github.com/groonga/groonga/pull/754,https://github.com/kou,1,https://github.com/groonga/groonga/pull/754,"Supported operators:

"">"": increments score of a term
""<"": decrements score of a term (decremented score is lower than
incremented score but higher than normal score)
""~"": doesn't change search result but decreases score of matched
document in the current search result

Notable changes:


grn_ii_sel(), grn_ii_select(): accept negative weight


"">"" and ""<"" aren't logical operator such as ""+"" and ""-"".


""~"" is a logical operator


"">"", ""<"" and ""~"" put weight as GRN_DB_INT32 bulk to
grn_expr_code::value of search operator

Before: grn_expr_code::value of GRN_OP_MATCH is NULL
After: grn_expr_code::value of GRN_OP_MATCH is GRN_BULK of weight","Supported operators:

"">"": increments score of a term
""<"": decrements score of a term (decremented score is lower than
incremented score but higher than normal score)
""~"": doesn't change search result but decreases score of matched
document in the current search result

Notable changes:


grn_ii_sel(), grn_ii_select(): accept negative weight


"">"" and ""<"" aren't logical operator such as ""+"" and ""-"".


""~"" is a logical operator


"">"", ""<"" and ""~"" put weight as GRN_DB_INT32 bulk to
grn_expr_code::value of search operator

Before: grn_expr_code::value of GRN_OP_MATCH is NULL
After: grn_expr_code::value of GRN_OP_MATCH is GRN_BULK of weight",True,{}
groonga/groonga,https://github.com/groonga/groonga,758,2017-08-27T05:57:11Z,2017-08-27T13:49:51Z,2017-08-27T14:22:28Z,MERGED,True,87,2,7,https://github.com/ryo-pinus,Fix crash when ruby_eval returned syntax error,1,[],https://github.com/groonga/groonga/pull/758,https://github.com/ryo-pinus,1,https://github.com/groonga/groonga/pull/758,Fixed crash when ruby_eval returned syntax error. (e.g. #751),Fixed crash when ruby_eval returned syntax error. (e.g. #751),True,{}
groonga/groonga,https://github.com/groonga/groonga,758,2017-08-27T05:57:11Z,2017-08-27T13:49:51Z,2017-08-27T14:22:28Z,MERGED,True,87,2,7,https://github.com/ryo-pinus,Fix crash when ruby_eval returned syntax error,1,[],https://github.com/groonga/groonga/pull/758,https://github.com/kou,2,https://github.com/groonga/groonga/pull/758#issuecomment-325201376,Fixed crash when ruby_eval returned syntax error. (e.g. #751),Thanks!,True,{}
groonga/groonga,https://github.com/groonga/groonga,759,2017-08-31T07:52:52Z,2017-09-15T03:46:59Z,2019-02-01T12:21:12Z,MERGED,True,11,0,1,https://github.com/kenhys,Don't keep created 0byte file on error,1,[],https://github.com/groonga/groonga/pull/759,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/759,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,759,2017-08-31T07:52:52Z,2017-09-15T03:46:59Z,2019-02-01T12:21:12Z,MERGED,True,11,0,1,https://github.com/kenhys,Don't keep created 0byte file on error,1,[],https://github.com/groonga/groonga/pull/759,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/759#issuecomment-329383170,,"I've fixed some feedback points.

Use grn_path_exist utility function.
Change variable name from path_exists to path_exist
Use !path_exist conditional expression instead of path_exist == GRN_FALSE
Use empty in message instead of 0byte.",True,{}
groonga/groonga,https://github.com/groonga/groonga,761,2017-09-14T06:19:02Z,2017-09-25T00:04:08Z,2019-05-22T02:55:01Z,MERGED,True,1,12,1,https://github.com/kenhys,Support --default-command-version 3,1,[],https://github.com/groonga/groonga/pull/761,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/761,"In the previous versions, --default-command-version 3 is not supported.
Before:
% groonga --default-command-version 3 -n db/db
invalid command version: <3>
After:
% groonga --default-command-version 3 -n db/db","In the previous versions, --default-command-version 3 is not supported.
Before:
% groonga --default-command-version 3 -n db/db
invalid command version: <3>
After:
% groonga --default-command-version 3 -n db/db",True,{}
groonga/groonga,https://github.com/groonga/groonga,761,2017-09-14T06:19:02Z,2017-09-25T00:04:08Z,2019-05-22T02:55:01Z,MERGED,True,1,12,1,https://github.com/kenhys,Support --default-command-version 3,1,[],https://github.com/groonga/groonga/pull/761,https://github.com/kou,2,https://github.com/groonga/groonga/pull/761#issuecomment-329517591,"In the previous versions, --default-command-version 3 is not supported.
Before:
% groonga --default-command-version 3 -n db/db
invalid command version: <3>
After:
% groonga --default-command-version 3 -n db/db",We don't need the whole switch. We can just assign value to default_command_version.,True,{}
groonga/groonga,https://github.com/groonga/groonga,761,2017-09-14T06:19:02Z,2017-09-25T00:04:08Z,2019-05-22T02:55:01Z,MERGED,True,1,12,1,https://github.com/kenhys,Support --default-command-version 3,1,[],https://github.com/groonga/groonga/pull/761,https://github.com/kenhys,3,https://github.com/groonga/groonga/pull/761#issuecomment-331096623,"In the previous versions, --default-command-version 3 is not supported.
Before:
% groonga --default-command-version 3 -n db/db
invalid command version: <3>
After:
% groonga --default-command-version 3 -n db/db","I see.
It is good enough to assign value to default_comand_version. The range of value is checked in beforehand.",True,{}
groonga/groonga,https://github.com/groonga/groonga,761,2017-09-14T06:19:02Z,2017-09-25T00:04:08Z,2019-05-22T02:55:01Z,MERGED,True,1,12,1,https://github.com/kenhys,Support --default-command-version 3,1,[],https://github.com/groonga/groonga/pull/761,https://github.com/kou,4,https://github.com/groonga/groonga/pull/761#issuecomment-331749315,"In the previous versions, --default-command-version 3 is not supported.
Before:
% groonga --default-command-version 3 -n db/db
invalid command version: <3>
After:
% groonga --default-command-version 3 -n db/db",Merged.,True,{}
groonga/groonga,https://github.com/groonga/groonga,762,2017-09-14T07:03:55Z,2017-09-25T03:14:06Z,2017-09-25T03:14:06Z,CLOSED,False,21,3,2,https://github.com/kenhys,Support to log location uri as is in query log,1,[],https://github.com/groonga/groonga/pull/762,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/762,"In the previous versions, even though ""location /cmd/xxx""
configuration is set in groonga-httpd.conf, ""/cmd/xxx"" query is
always converted into ""/d/xxx"" in query log.
It may be confusing situation by such a implicit conversion.
Before:
/cmd/status is logged as /d/status in query log.
After:
If ""groonga_log_location_uri on;"" is set, /cmd/status is
logged as /cmd/status in query log.","In the previous versions, even though ""location /cmd/xxx""
configuration is set in groonga-httpd.conf, ""/cmd/xxx"" query is
always converted into ""/d/xxx"" in query log.
It may be confusing situation by such a implicit conversion.
Before:
/cmd/status is logged as /d/status in query log.
After:
If ""groonga_log_location_uri on;"" is set, /cmd/status is
logged as /cmd/status in query log.",True,{}
groonga/groonga,https://github.com/groonga/groonga,762,2017-09-14T07:03:55Z,2017-09-25T03:14:06Z,2017-09-25T03:14:06Z,CLOSED,False,21,3,2,https://github.com/kenhys,Support to log location uri as is in query log,1,[],https://github.com/groonga/groonga/pull/762,https://github.com/kou,2,https://github.com/groonga/groonga/pull/762#issuecomment-329518855,"In the previous versions, even though ""location /cmd/xxx""
configuration is set in groonga-httpd.conf, ""/cmd/xxx"" query is
always converted into ""/d/xxx"" in query log.
It may be confusing situation by such a implicit conversion.
Before:
/cmd/status is logged as /d/status in query log.
After:
If ""groonga_log_location_uri on;"" is set, /cmd/status is
logged as /cmd/status in query log.",Is examples/dictionary/ still workable with this change and groonga --protocol http?,True,{}
groonga/groonga,https://github.com/groonga/groonga,762,2017-09-14T07:03:55Z,2017-09-25T03:14:06Z,2017-09-25T03:14:06Z,CLOSED,False,21,3,2,https://github.com/kenhys,Support to log location uri as is in query log,1,[],https://github.com/groonga/groonga/pull/762,https://github.com/kenhys,3,https://github.com/groonga/groonga/pull/762#issuecomment-331355020,"In the previous versions, even though ""location /cmd/xxx""
configuration is set in groonga-httpd.conf, ""/cmd/xxx"" query is
always converted into ""/d/xxx"" in query log.
It may be confusing situation by such a implicit conversion.
Before:
/cmd/status is logged as /d/status in query log.
After:
If ""groonga_log_location_uri on;"" is set, /cmd/status is
logged as /cmd/status in query log.","Yes, it's workable with groonga --protocol http in above examples.",True,{}
groonga/groonga,https://github.com/groonga/groonga,762,2017-09-14T07:03:55Z,2017-09-25T03:14:06Z,2017-09-25T03:14:06Z,CLOSED,False,21,3,2,https://github.com/kenhys,Support to log location uri as is in query log,1,[],https://github.com/groonga/groonga/pull/762,https://github.com/kou,4,https://github.com/groonga/groonga/pull/762#issuecomment-331749706,"In the previous versions, even though ""location /cmd/xxx""
configuration is set in groonga-httpd.conf, ""/cmd/xxx"" query is
always converted into ""/d/xxx"" in query log.
It may be confusing situation by such a implicit conversion.
Before:
/cmd/status is logged as /d/status in query log.
After:
If ""groonga_log_location_uri on;"" is set, /cmd/status is
logged as /cmd/status in query log.",Really? Did you really get /js/dictionary.js? I think that Groonga processes it as a dictionary command instead of static file. It breaks backward compatibility.,True,{}
groonga/groonga,https://github.com/groonga/groonga,762,2017-09-14T07:03:55Z,2017-09-25T03:14:06Z,2017-09-25T03:14:06Z,CLOSED,False,21,3,2,https://github.com/kenhys,Support to log location uri as is in query log,1,[],https://github.com/groonga/groonga/pull/762,https://github.com/kou,5,https://github.com/groonga/groonga/pull/762#issuecomment-331749728,"In the previous versions, even though ""location /cmd/xxx""
configuration is set in groonga-httpd.conf, ""/cmd/xxx"" query is
always converted into ""/d/xxx"" in query log.
It may be confusing situation by such a implicit conversion.
Before:
/cmd/status is logged as /d/status in query log.
After:
If ""groonga_log_location_uri on;"" is set, /cmd/status is
logged as /cmd/status in query log.",Do you still really want this feature?,True,{}
groonga/groonga,https://github.com/groonga/groonga,762,2017-09-14T07:03:55Z,2017-09-25T03:14:06Z,2017-09-25T03:14:06Z,CLOSED,False,21,3,2,https://github.com/kenhys,Support to log location uri as is in query log,1,[],https://github.com/groonga/groonga/pull/762,https://github.com/kenhys,6,https://github.com/groonga/groonga/pull/762#issuecomment-331766998,"In the previous versions, even though ""location /cmd/xxx""
configuration is set in groonga-httpd.conf, ""/cmd/xxx"" query is
always converted into ""/d/xxx"" in query log.
It may be confusing situation by such a implicit conversion.
Before:
/cmd/status is logged as /d/status in query log.
After:
If ""groonga_log_location_uri on;"" is set, /cmd/status is
logged as /cmd/status in query log.","Ah, I did not take into account that case.
I don't want to break backward compatibility unexpectedly, so It should be close this feature.",True,{}
groonga/groonga,https://github.com/groonga/groonga,763,2017-09-28T06:05:44Z,2017-09-30T15:02:18Z,2017-09-30T15:02:35Z,MERGED,True,9,0,2,https://github.com/s-yata,dat: limit the number of nodes per key,1,[],https://github.com/groonga/groonga/pull/763,https://github.com/s-yata,1,https://github.com/groonga/groonga/pull/763,"Description
This change limits the number of nodes per key of a dat trie.
If it is unlimited, grn_dat_rebuild_trie creates a huge file in the worst case.","Description
This change limits the number of nodes per key of a dat trie.
If it is unlimited, grn_dat_rebuild_trie creates a huge file in the worst case.",True,{}
groonga/groonga,https://github.com/groonga/groonga,763,2017-09-28T06:05:44Z,2017-09-30T15:02:18Z,2017-09-30T15:02:35Z,MERGED,True,9,0,2,https://github.com/s-yata,dat: limit the number of nodes per key,1,[],https://github.com/groonga/groonga/pull/763,https://github.com/kou,2,https://github.com/groonga/groonga/pull/763#issuecomment-333314125,"Description
This change limits the number of nodes per key of a dat trie.
If it is unlimited, grn_dat_rebuild_trie creates a huge file in the worst case.",Merged.,True,{}
groonga/groonga,https://github.com/groonga/groonga,764,2017-10-04T03:09:08Z,2017-10-04T03:49:55Z,2019-02-01T12:20:56Z,MERGED,True,1,1,1,https://github.com/kenhys,io: set proper log level to DEBUG,1,[],https://github.com/groonga/groonga/pull/764,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/764,"It should be DEBUG because it doesn't cause problem by itself.
This message is logged when mapped area for indexes is unmapped.","It should be DEBUG because it doesn't cause problem by itself.
This message is logged when mapped area for indexes is unmapped.",True,{}
groonga/groonga,https://github.com/groonga/groonga,764,2017-10-04T03:09:08Z,2017-10-04T03:49:55Z,2019-02-01T12:20:56Z,MERGED,True,1,1,1,https://github.com/kenhys,io: set proper log level to DEBUG,1,[],https://github.com/groonga/groonga/pull/764,https://github.com/kou,2,https://github.com/groonga/groonga/pull/764#issuecomment-334042835,"It should be DEBUG because it doesn't cause problem by itself.
This message is logged when mapped area for indexes is unmapped.",Merged.,True,{}
groonga/groonga,https://github.com/groonga/groonga,766,2017-10-06T08:18:35Z,2017-10-08T01:44:59Z,2017-10-12T09:37:42Z,MERGED,True,59,0,1,https://github.com/myokoym,doc: add 7.0.7 entry,2,[],https://github.com/groonga/groonga/pull/766,https://github.com/myokoym,1,https://github.com/groonga/groonga/pull/766,#765,#765,True,{}
groonga/groonga,https://github.com/groonga/groonga,766,2017-10-06T08:18:35Z,2017-10-08T01:44:59Z,2017-10-12T09:37:42Z,MERGED,True,59,0,1,https://github.com/myokoym,doc: add 7.0.7 entry,2,[],https://github.com/groonga/groonga/pull/766,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/766#issuecomment-334977071,#765,Thanks! I'll fix some points in later commit.,True,{}
groonga/groonga,https://github.com/groonga/groonga,768,2017-10-10T06:00:59Z,,2022-03-15T05:24:16Z,OPEN,False,18,0,1,https://github.com/kenhys,plugin suggest: add missing NULL check for grn_ctx_at(),1,[],https://github.com/groonga/groonga/pull/768,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/768,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,769,2017-10-23T08:22:00Z,,2022-03-15T05:24:16Z,OPEN,False,11,1,4,https://github.com/kenhys,WIP: support mruby miniz,1,[],https://github.com/groonga/groonga/pull/769,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/769,This work in progress version.,This work in progress version.,True,{}
groonga/groonga,https://github.com/groonga/groonga,771,2017-10-24T07:57:02Z,2017-10-24T08:34:49Z,2017-10-24T08:34:49Z,MERGED,True,22,0,1,https://github.com/komainu8,doc: add 7.0.8 entry,1,[],https://github.com/groonga/groonga/pull/771,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/771,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,772,2017-10-24T10:23:31Z,2017-10-26T05:14:40Z,2018-02-07T06:51:21Z,MERGED,True,15,0,1,https://github.com/komainu8,doc: update 7.0.8 entry,1,[],https://github.com/groonga/groonga/pull/772,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/772,"Added the following missing items.

50e24c8
0839cf6
b042a32","Added the following missing items.

50e24c8
0839cf6
b042a32",True,{}
groonga/groonga,https://github.com/groonga/groonga,773,2017-10-25T12:14:48Z,2017-10-26T03:20:21Z,2018-02-07T06:51:20Z,MERGED,True,213,2,4,https://github.com/komainu8,Added feature that sort the results of `logical_select` in descending…,2,[],https://github.com/groonga/groonga/pull/773,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/773,… order.,… order.,True,{}
groonga/groonga,https://github.com/groonga/groonga,773,2017-10-25T12:14:48Z,2017-10-26T03:20:21Z,2018-02-07T06:51:20Z,MERGED,True,213,2,4,https://github.com/komainu8,Added feature that sort the results of `logical_select` in descending…,2,[],https://github.com/groonga/groonga/pull/773,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/773#issuecomment-339534480,… order.,"@kou Thank you for your comments.
I've fied them below commit.
abcb4f4",True,{}
groonga/groonga,https://github.com/groonga/groonga,773,2017-10-25T12:14:48Z,2017-10-26T03:20:21Z,2018-02-07T06:51:20Z,MERGED,True,213,2,4,https://github.com/komainu8,Added feature that sort the results of `logical_select` in descending…,2,[],https://github.com/groonga/groonga/pull/773,https://github.com/kou,3,https://github.com/groonga/groonga/pull/773#issuecomment-339539329,… order.,Merged.,True,{}
groonga/groonga,https://github.com/groonga/groonga,777,2017-11-09T08:08:56Z,2017-11-13T08:05:06Z,2018-02-07T06:51:16Z,CLOSED,False,85,11,7,https://github.com/komainu8,Add parse groonga log,1,[],https://github.com/groonga/groonga/pull/777,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/777,"Todo:

 Modified test","Todo:

 Modified test",True,{}
groonga/groonga,https://github.com/groonga/groonga,777,2017-11-09T08:08:56Z,2017-11-13T08:05:06Z,2018-02-07T06:51:16Z,CLOSED,False,85,11,7,https://github.com/komainu8,Add parse groonga log,1,[],https://github.com/groonga/groonga/pull/777,https://github.com/kou,2,https://github.com/groonga/groonga/pull/777#issuecomment-343841687,"Todo:

 Modified test",I've implemented with different approach. Please check  8560e44.,True,{}
groonga/groonga,https://github.com/groonga/groonga,779,2017-11-14T05:49:56Z,2018-02-07T06:51:15Z,2018-02-07T06:51:15Z,CLOSED,False,182,2,10,https://github.com/komainu8,grndb: Added groonga-query-log parser,1,[],https://github.com/groonga/groonga/pull/779,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/779,I finished implementation of query log parser.,I finished implementation of query log parser.,True,{}
groonga/groonga,https://github.com/groonga/groonga,784,2017-12-04T09:51:58Z,2017-12-04T13:22:45Z,2018-02-07T06:51:11Z,MERGED,True,6,0,1,https://github.com/komainu8,Add number of loaded in groonga-query-log,1,[],https://github.com/groonga/groonga/pull/784,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/784,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,785,2017-12-05T03:14:19Z,2017-12-09T06:25:10Z,2018-02-07T06:51:08Z,CLOSED,False,16,0,2,https://github.com/komainu8,delete: log deletion count and error count into query-log,3,[],https://github.com/groonga/groonga/pull/785,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/785,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,785,2017-12-05T03:14:19Z,2017-12-09T06:25:10Z,2018-02-07T06:51:08Z,CLOSED,False,16,0,2,https://github.com/komainu8,delete: log deletion count and error count into query-log,3,[],https://github.com/groonga/groonga/pull/785,https://github.com/kou,2,https://github.com/groonga/groonga/pull/785#issuecomment-350427563,,"We should count one by one instead of using grn_table_size() because grn_table_size() may return wrong value when load or delete are executed in the same time.
And this pull request needless commit for logical_select.",True,{}
groonga/groonga,https://github.com/groonga/groonga,786,2017-12-05T04:21:18Z,2018-02-07T06:51:06Z,2018-02-07T06:51:06Z,CLOSED,False,1,0,1,https://github.com/komainu8,logical_select: log select count into query-log,1,[],https://github.com/groonga/groonga/pull/786,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/786,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,788,2017-12-06T14:55:18Z,2017-12-07T01:26:53Z,2017-12-25T07:06:00Z,MERGED,True,1,0,1,https://github.com/komainu8,Fix a memory leak in func_highlight_full,2,[],https://github.com/groonga/groonga/pull/788,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/788,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,789,2017-12-07T02:09:27Z,2017-12-07T02:10:56Z,2017-12-25T07:05:59Z,MERGED,True,1,0,1,https://github.com/komainu8,Fix a memory leak in func_highlight,1,[],https://github.com/groonga/groonga/pull/789,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/789,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,790,2017-12-21T12:00:03Z,2017-12-22T15:37:37Z,2017-12-25T07:00:38Z,MERGED,True,606,52,9,https://github.com/naoa,Add index_column_source_records() function,4,[],https://github.com/groonga/groonga/pull/790,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/790,"I would like to add function to retrieve source records of index column in order to efficiently get value of referenced column such as parent-child relationship.
Syntax:
  index_column_source_records(index_column_name[, limit])

index_column_name: name of index columns as string
limit(option): number of records to get (default: -1, -1 means all records)","I would like to add function to retrieve source records of index column in order to efficiently get value of referenced column such as parent-child relationship.
Syntax:
  index_column_source_records(index_column_name[, limit])

index_column_name: name of index columns as string
limit(option): number of records to get (default: -1, -1 means all records)",True,{}
groonga/groonga,https://github.com/groonga/groonga,790,2017-12-21T12:00:03Z,2017-12-22T15:37:37Z,2017-12-25T07:00:38Z,MERGED,True,606,52,9,https://github.com/naoa,Add index_column_source_records() function,4,[],https://github.com/groonga/groonga/pull/790,https://github.com/kou,2,https://github.com/groonga/groonga/pull/790#issuecomment-353621432,"I would like to add function to retrieve source records of index column in order to efficiently get value of referenced column such as parent-child relationship.
Syntax:
  index_column_source_records(index_column_name[, limit])

index_column_name: name of index columns as string
limit(option): number of records to get (default: -1, -1 means all records)","Thanks.
index_column_source_records(index_column_name[, {""limit"": -1}]) may be better because we may want offset parameter. Can you try it?",True,{}
groonga/groonga,https://github.com/groonga/groonga,790,2017-12-21T12:00:03Z,2017-12-22T15:37:37Z,2017-12-25T07:00:38Z,MERGED,True,606,52,9,https://github.com/naoa,Add index_column_source_records() function,4,[],https://github.com/groonga/groonga/pull/790,https://github.com/naoa,3,https://github.com/groonga/groonga/pull/790#issuecomment-353839188,"I would like to add function to retrieve source records of index column in order to efficiently get value of referenced column such as parent-child relationship.
Syntax:
  index_column_source_records(index_column_name[, limit])

index_column_name: name of index columns as string
limit(option): number of records to get (default: -1, -1 means all records)",Thanks for merging. Maybe I can do it tonight.,True,{}
groonga/groonga,https://github.com/groonga/groonga,791,2017-12-25T12:48:58Z,2017-12-25T13:22:33Z,2017-12-25T13:22:39Z,MERGED,True,1,1,1,https://github.com/naoa,functions/index_column: add missing static,1,[],https://github.com/groonga/groonga/pull/791,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/791,I forgot put static.,I forgot put static.,True,{}
groonga/groonga,https://github.com/groonga/groonga,791,2017-12-25T12:48:58Z,2017-12-25T13:22:33Z,2017-12-25T13:22:39Z,MERGED,True,1,1,1,https://github.com/naoa,functions/index_column: add missing static,1,[],https://github.com/groonga/groonga/pull/791,https://github.com/kou,2,https://github.com/groonga/groonga/pull/791#issuecomment-353869339,I forgot put static.,Good catch!,True,{}
groonga/groonga,https://github.com/groonga/groonga,792,2017-12-25T12:51:32Z,2017-12-25T13:23:56Z,2017-12-25T13:24:00Z,MERGED,True,56,8,3,https://github.com/naoa,index_column_source_records: use object literal style option,1,[],https://github.com/groonga/groonga/pull/792,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/792,#790,#790,True,{}
groonga/groonga,https://github.com/groonga/groonga,792,2017-12-25T12:51:32Z,2017-12-25T13:23:56Z,2017-12-25T13:24:00Z,MERGED,True,56,8,3,https://github.com/naoa,index_column_source_records: use object literal style option,1,[],https://github.com/groonga/groonga/pull/792,https://github.com/kou,2,https://github.com/groonga/groonga/pull/792#issuecomment-353869421,#790,Thanks!,True,{}
groonga/groonga,https://github.com/groonga/groonga,793,2017-12-25T13:40:48Z,2017-12-25T13:44:21Z,2017-12-25T13:44:25Z,MERGED,True,1,1,1,https://github.com/naoa,index_column_source_records: fix wrong error message,1,[],https://github.com/groonga/groonga/pull/793,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/793,Sorry. It allows only object literal now.,Sorry. It allows only object literal now.,True,{}
groonga/groonga,https://github.com/groonga/groonga,793,2017-12-25T13:40:48Z,2017-12-25T13:44:21Z,2017-12-25T13:44:25Z,MERGED,True,1,1,1,https://github.com/naoa,index_column_source_records: fix wrong error message,1,[],https://github.com/groonga/groonga/pull/793,https://github.com/kou,2,https://github.com/groonga/groonga/pull/793#issuecomment-353870489,Sorry. It allows only object literal now.,Good catch!,True,{}
groonga/groonga,https://github.com/groonga/groonga,794,2017-12-25T21:07:38Z,2017-12-25T23:45:32Z,2017-12-25T23:45:53Z,MERGED,True,1,0,1,https://github.com/naoa,index_column_source_records: fix memory leak,1,[],https://github.com/groonga/groonga/pull/794,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/794,Sorry. I missed it.,Sorry. I missed it.,True,{}
groonga/groonga,https://github.com/groonga/groonga,794,2017-12-25T21:07:38Z,2017-12-25T23:45:32Z,2017-12-25T23:45:53Z,MERGED,True,1,0,1,https://github.com/naoa,index_column_source_records: fix memory leak,1,[],https://github.com/groonga/groonga/pull/794,https://github.com/kou,2,https://github.com/groonga/groonga/pull/794#issuecomment-353896110,Sorry. I missed it.,Good catch!,True,{}
groonga/groonga,https://github.com/groonga/groonga,795,2017-12-26T10:27:40Z,2017-12-28T00:56:49Z,2017-12-28T00:56:49Z,MERGED,True,93,0,1,https://github.com/komainu8,doc: update news,4,[],https://github.com/groonga/groonga/pull/795,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/795,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,795,2017-12-26T10:27:40Z,2017-12-28T00:56:49Z,2017-12-28T00:56:49Z,MERGED,True,93,0,1,https://github.com/komainu8,doc: update news,4,[],https://github.com/groonga/groonga/pull/795,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/795#issuecomment-354088827,,"@kou Thank you for your comments.
I've fixed them.",True,{}
groonga/groonga,https://github.com/groonga/groonga,796,2017-12-27T03:46:46Z,2017-12-28T12:14:37Z,2018-02-07T06:50:55Z,MERGED,True,454,611,59,https://github.com/komainu8,doc: update execution examples,5,[],https://github.com/groonga/groonga/pull/796,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/796,% make update-examples,% make update-examples,True,{}
groonga/groonga,https://github.com/groonga/groonga,796,2017-12-27T03:46:46Z,2017-12-28T12:14:37Z,2018-02-07T06:50:55Z,MERGED,True,454,611,59,https://github.com/komainu8,doc: update execution examples,5,[],https://github.com/groonga/groonga/pull/796,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/796#issuecomment-354220930,% make update-examples,"@kou Thank you for your comments.
I've fixed all bad examples.",True,{}
groonga/groonga,https://github.com/groonga/groonga,796,2017-12-27T03:46:46Z,2017-12-28T12:14:37Z,2018-02-07T06:50:55Z,MERGED,True,454,611,59,https://github.com/komainu8,doc: update execution examples,5,[],https://github.com/groonga/groonga/pull/796,https://github.com/komainu8,3,https://github.com/groonga/groonga/pull/796#issuecomment-354269852,% make update-examples,I've fied all bad examples.,True,{}
groonga/groonga,https://github.com/groonga/groonga,797,2017-12-27T04:01:29Z,2017-12-28T03:39:22Z,2018-02-07T06:51:02Z,CLOSED,False,1,1,1,https://github.com/komainu8, doc: update files,1,[],https://github.com/groonga/groonga/pull/797,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/797,% make update-files,% make update-files,True,{}
groonga/groonga,https://github.com/groonga/groonga,797,2017-12-27T04:01:29Z,2017-12-28T03:39:22Z,2018-02-07T06:51:02Z,CLOSED,False,1,1,1,https://github.com/komainu8, doc: update files,1,[],https://github.com/groonga/groonga/pull/797,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/797#issuecomment-354222772,% make update-files,"I'm sorry.
I executed ""make update-files"" with the latest Sphinx, files.am was no changed from before version.
So, I close this pull request.",True,{}
groonga/groonga,https://github.com/groonga/groonga,799,2017-12-27T14:15:16Z,2017-12-28T12:28:50Z,2017-12-28T12:28:50Z,MERGED,True,181,11,1,https://github.com/komainu8,doc: update po,4,[],https://github.com/groonga/groonga/pull/799,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/799,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,799,2017-12-27T14:15:16Z,2017-12-28T12:28:50Z,2017-12-28T12:28:50Z,MERGED,True,181,11,1,https://github.com/komainu8,doc: update po,4,[],https://github.com/groonga/groonga/pull/799,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/799#issuecomment-354222310,,"@kou Thank you for your comment.
I've fixed it.",True,{}
groonga/groonga,https://github.com/groonga/groonga,799,2017-12-27T14:15:16Z,2017-12-28T12:28:50Z,2017-12-28T12:28:50Z,MERGED,True,181,11,1,https://github.com/komainu8,doc: update po,4,[],https://github.com/groonga/groonga/pull/799,https://github.com/komainu8,3,https://github.com/groonga/groonga/pull/799#issuecomment-354242310,,@kou 「groonga-server」 を 「groonga -s で実行したサーバー」へ書き直しました。,True,{}
groonga/groonga,https://github.com/groonga/groonga,800,2017-12-27T14:34:35Z,2017-12-28T00:57:54Z,2018-02-07T06:50:58Z,MERGED,True,299,70,446,https://github.com/komainu8,vendor nginx: update bundled nginx to 1.13.8,1,[],https://github.com/groonga/groonga/pull/800,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/800,$ ./update_nginx.sh 1.13.8,$ ./update_nginx.sh 1.13.8,True,{}
groonga/groonga,https://github.com/groonga/groonga,801,2017-12-27T14:41:25Z,2017-12-28T00:58:15Z,2018-02-07T06:50:57Z,MERGED,True,1,1,1,https://github.com/komainu8,Bump version,1,[],https://github.com/groonga/groonga/pull/801,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/801,% make update-version NEW_VERSION=7.1.0,% make update-version NEW_VERSION=7.1.0,True,{}
groonga/groonga,https://github.com/groonga/groonga,802,2017-12-28T07:17:05Z,2017-12-28T09:48:22Z,2017-12-28T09:48:22Z,CLOSED,False,1,2,1,https://github.com/komainu8,doc: Fix a tag,1,[],https://github.com/groonga/groonga/pull/802,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/802,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,802,2017-12-28T07:17:05Z,2017-12-28T09:48:22Z,2017-12-28T09:48:22Z,CLOSED,False,1,2,1,https://github.com/komainu8,doc: Fix a tag,1,[],https://github.com/groonga/groonga/pull/802,https://github.com/kou,2,https://github.com/groonga/groonga/pull/802#issuecomment-354245573,,Why? The original tag is correct.,True,{}
groonga/groonga,https://github.com/groonga/groonga,802,2017-12-28T07:17:05Z,2017-12-28T09:48:22Z,2017-12-28T09:48:22Z,CLOSED,False,1,2,1,https://github.com/komainu8,doc: Fix a tag,1,[],https://github.com/groonga/groonga/pull/802,https://github.com/komainu8,3,https://github.com/groonga/groonga/pull/802#issuecomment-354260974,,"I'm sorry.
I had a misunderstanding.",True,{}
groonga/groonga,https://github.com/groonga/groonga,803,2017-12-28T11:41:57Z,2017-12-28T12:29:30Z,2017-12-28T12:29:31Z,MERGED,True,2,2,1,https://github.com/komainu8,doc: update news,2,[],https://github.com/groonga/groonga/pull/803,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/803,Add detail information about groonga-server.,Add detail information about groonga-server.,True,{}
groonga/groonga,https://github.com/groonga/groonga,804,2017-12-29T08:58:01Z,2017-12-29T09:09:07Z,2018-02-07T06:50:54Z,MERGED,True,2,0,1,https://github.com/komainu8,doc news: add missing entry,1,[],https://github.com/groonga/groonga/pull/804,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/804,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,805,2017-12-29T09:06:06Z,2017-12-29T09:27:54Z,2018-02-07T06:50:46Z,MERGED,True,4,1,1,https://github.com/komainu8,doc: add missing entry and fix a typo,1,[],https://github.com/groonga/groonga/pull/805,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/805,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,807,2018-01-10T10:10:13Z,2018-01-11T00:11:06Z,2018-02-07T06:50:41Z,MERGED,True,78,0,5,https://github.com/komainu8,grndb: add --force-lock-clear option,2,[],https://github.com/groonga/groonga/pull/807,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/807,"This option force to clear lock of object(Database, Column, Table).
You can use if you want to database recover even if remain locked of database.
But this option very risky.
Because can not safty recover database if remain locked of database.
Usage:
grndb recover --force-lock-clear DB_PATH","This option force to clear lock of object(Database, Column, Table).
You can use if you want to database recover even if remain locked of database.
But this option very risky.
Because can not safty recover database if remain locked of database.
Usage:
grndb recover --force-lock-clear DB_PATH",True,{}
groonga/groonga,https://github.com/groonga/groonga,807,2018-01-10T10:10:13Z,2018-01-11T00:11:06Z,2018-02-07T06:50:41Z,MERGED,True,78,0,5,https://github.com/komainu8,grndb: add --force-lock-clear option,2,[],https://github.com/groonga/groonga/pull/807,https://github.com/kou,2,https://github.com/groonga/groonga/pull/807#issuecomment-356785200,"This option force to clear lock of object(Database, Column, Table).
You can use if you want to database recover even if remain locked of database.
But this option very risky.
Because can not safty recover database if remain locked of database.
Usage:
grndb recover --force-lock-clear DB_PATH",いくつか直しておいたので確認しておいてください。,True,{}
groonga/groonga,https://github.com/groonga/groonga,808,2018-01-11T01:09:44Z,2018-01-11T02:31:03Z,2018-01-11T02:31:10Z,MERGED,True,158,2,8,https://github.com/s-yata,load: support surrogate pairs,1,[],https://github.com/groonga/groonga/pull/808,https://github.com/s-yata,1,https://github.com/groonga/groonga/pull/808,"Description
This commit supports surrogate pairs in a load body.
For example, \uD83C\uDF7A is decoded to 🍺.","Description
This commit supports surrogate pairs in a load body.
For example, \uD83C\uDF7A is decoded to 🍺.",True,{}
groonga/groonga,https://github.com/groonga/groonga,809,2018-01-11T02:52:02Z,2018-01-11T03:54:04Z,2018-02-07T06:50:38Z,MERGED,True,55,0,2,https://github.com/komainu8,doc grndb: add --force-lock-clear option's information,1,[],https://github.com/groonga/groonga/pull/809,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/809,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,810,2018-01-23T03:42:28Z,2018-01-25T03:46:08Z,2018-01-25T03:51:21Z,MERGED,True,171,23,5,https://github.com/s-yata,between: accept between() without borders,1,[],https://github.com/groonga/groonga/pull/810,https://github.com/s-yata,1,https://github.com/groonga/groonga/pull/810,"If the number of arguments passed to between() is 3, the 2nd and 3rd arguments are handled as the inclusive edges.
GitHub: fix #685

I'm not sure this change is acceptable.","If the number of arguments passed to between() is 3, the 2nd and 3rd arguments are handled as the inclusive edges.
GitHub: fix #685

I'm not sure this change is acceptable.",True,{}
groonga/groonga,https://github.com/groonga/groonga,810,2018-01-23T03:42:28Z,2018-01-25T03:46:08Z,2018-01-25T03:51:21Z,MERGED,True,171,23,5,https://github.com/s-yata,between: accept between() without borders,1,[],https://github.com/groonga/groonga/pull/810,https://github.com/kou,2,https://github.com/groonga/groonga/pull/810#issuecomment-360352639,"If the number of arguments passed to between() is 3, the 2nd and 3rd arguments are handled as the inclusive edges.
GitHub: fix #685

I'm not sure this change is acceptable.","SQL's BETWEEN uses min <= VALUE and VALUE <= max. ""include"" is suitable for the default.
We also need to update document.",True,{}
groonga/groonga,https://github.com/groonga/groonga,810,2018-01-23T03:42:28Z,2018-01-25T03:46:08Z,2018-01-25T03:51:21Z,MERGED,True,171,23,5,https://github.com/s-yata,between: accept between() without borders,1,[],https://github.com/groonga/groonga/pull/810,https://github.com/s-yata,3,https://github.com/groonga/groonga/pull/810#issuecomment-360353176,"If the number of arguments passed to between() is 3, the 2nd and 3rd arguments are handled as the inclusive edges.
GitHub: fix #685

I'm not sure this change is acceptable.",Thank you!,True,{}
groonga/groonga,https://github.com/groonga/groonga,812,2018-01-24T10:26:43Z,2018-01-26T00:11:45Z,2018-01-26T00:11:45Z,MERGED,True,50,0,1,https://github.com/komainu8,doc: update news,1,[],https://github.com/groonga/groonga/pull/812,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/812,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,813,2018-01-26T09:37:07Z,2018-01-26T22:39:24Z,2018-02-07T06:50:37Z,MERGED,True,106,11,1,https://github.com/komainu8,doc: update po,2,[],https://github.com/groonga/groonga/pull/813,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/813,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,814,2018-01-30T10:56:32Z,2018-01-31T01:04:27Z,2018-01-31T01:04:34Z,MERGED,True,10,0,2,https://github.com/myokoym,doc: Add a note about dropped Ubuntu 17.04 to 7.1.1 news,1,[],https://github.com/groonga/groonga/pull/814,https://github.com/myokoym,1,https://github.com/groonga/groonga/pull/814,ref: 58779cd,ref: 58779cd,True,{}
groonga/groonga,https://github.com/groonga/groonga,814,2018-01-30T10:56:32Z,2018-01-31T01:04:27Z,2018-01-31T01:04:34Z,MERGED,True,10,0,2,https://github.com/myokoym,doc: Add a note about dropped Ubuntu 17.04 to 7.1.1 news,1,[],https://github.com/groonga/groonga/pull/814,https://github.com/kou,2,https://github.com/groonga/groonga/pull/814#issuecomment-361788380,ref: 58779cd,Good catch!,True,{}
groonga/groonga,https://github.com/groonga/groonga,816,2018-02-07T08:16:07Z,2018-02-07T23:58:36Z,2018-06-21T06:16:08Z,MERGED,True,44,0,1,https://github.com/komainu8,doc: update news,2,[],https://github.com/groonga/groonga/pull/816,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/816,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,816,2018-02-07T08:16:07Z,2018-02-07T23:58:36Z,2018-06-21T06:16:08Z,MERGED,True,44,0,1,https://github.com/komainu8,doc: update news,2,[],https://github.com/groonga/groonga/pull/816,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/816#issuecomment-363761448,,"@kou Thank you for your comments.
I've fixed them.",True,{}
groonga/groonga,https://github.com/groonga/groonga,816,2018-02-07T08:16:07Z,2018-02-07T23:58:36Z,2018-06-21T06:16:08Z,MERGED,True,44,0,1,https://github.com/komainu8,doc: update news,2,[],https://github.com/groonga/groonga/pull/816,https://github.com/kou,3,https://github.com/groonga/groonga/pull/816#issuecomment-363954979,,Merged with a GRN_II_REDUCE_EXPIRE_THRESHOLD fix.,True,{}
groonga/groonga,https://github.com/groonga/groonga,817,2018-02-08T03:54:17Z,2018-02-08T03:56:36Z,2018-06-21T06:16:06Z,MERGED,True,74,8,1,https://github.com/komainu8,doc: update po,1,[],https://github.com/groonga/groonga/pull/817,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/817,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,817,2018-02-08T03:54:17Z,2018-02-08T03:56:36Z,2018-06-21T06:16:06Z,MERGED,True,74,8,1,https://github.com/komainu8,doc: update po,1,[],https://github.com/groonga/groonga/pull/817,https://github.com/kou,2,https://github.com/groonga/groonga/pull/817#issuecomment-363995166,,"``...``
の前後に空白が足りないところがある気がするので出力を確認してみてください。",True,{}
groonga/groonga,https://github.com/groonga/groonga,820,2018-02-11T14:05:33Z,2018-02-12T13:21:13Z,2018-02-12T13:21:17Z,MERGED,True,107,0,5,https://github.com/naoa,pat_fuzzy: fix memory leak that prefix query isn't match any tokens,1,[],https://github.com/groonga/groonga/pull/820,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/820,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,820,2018-02-11T14:05:33Z,2018-02-12T13:21:13Z,2018-02-12T13:21:17Z,MERGED,True,107,0,5,https://github.com/naoa,pat_fuzzy: fix memory leak that prefix query isn't match any tokens,1,[],https://github.com/groonga/groonga/pull/820,https://github.com/kou,2,https://github.com/groonga/groonga/pull/820#issuecomment-364920469,,Good catch!,True,{}
groonga/groonga,https://github.com/groonga/groonga,823,2018-02-16T06:01:59Z,2018-02-19T06:52:44Z,2018-06-21T06:16:12Z,CLOSED,False,347,17,7,https://github.com/komainu8,logical_count: add post_filter,2,[],https://github.com/groonga/groonga/pull/823,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/823,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,823,2018-02-16T06:01:59Z,2018-02-19T06:52:44Z,2018-06-21T06:16:12Z,CLOSED,False,347,17,7,https://github.com/komainu8,logical_count: add post_filter,2,[],https://github.com/groonga/groonga/pull/823,https://github.com/kou,2,https://github.com/groonga/groonga/pull/823#issuecomment-366602548,,"This implementation has some problems:

filtered stage dynamic columns are evaluated before filter
Any dynamic columns don't exist in post_filter when filter isn't specified
post_filter is ignored when min or max is specified and filter isn't specified

I've implemented.",True,{}
groonga/groonga,https://github.com/groonga/groonga,824,2018-02-19T08:15:52Z,2018-02-19T09:39:59Z,2018-06-21T06:16:13Z,MERGED,True,422,0,7,https://github.com/komainu8,Add post filter in logical select,2,[],https://github.com/groonga/groonga/pull/824,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/824,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,825,2018-02-19T09:34:26Z,2018-02-19T09:54:24Z,2018-02-19T09:54:24Z,MERGED,True,101,9,3,https://github.com/komainu8,doc logical_select: add document for post_filter,1,[],https://github.com/groonga/groonga/pull/825,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/825,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,826,2018-02-20T03:48:34Z,2018-02-20T05:32:43Z,2018-02-20T05:36:05Z,MERGED,True,67,16,3,https://github.com/komainu8,doc logical_count: add document for post_filter,2,[],https://github.com/groonga/groonga/pull/826,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/826,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,826,2018-02-20T03:48:34Z,2018-02-20T05:32:43Z,2018-02-20T05:36:05Z,MERGED,True,67,16,3,https://github.com/komainu8,doc logical_count: add document for post_filter,2,[],https://github.com/groonga/groonga/pull/826,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/826#issuecomment-366868165,,@kenhys Thank you for your comment. I've fixed it.,True,{}
groonga/groonga,https://github.com/groonga/groonga,826,2018-02-20T03:48:34Z,2018-02-20T05:32:43Z,2018-02-20T05:36:05Z,MERGED,True,67,16,3,https://github.com/komainu8,doc logical_count: add document for post_filter,2,[],https://github.com/groonga/groonga/pull/826,https://github.com/kenhys,3,https://github.com/groonga/groonga/pull/826#issuecomment-366871496,,@komainu8 LGTM,True,{}
groonga/groonga,https://github.com/groonga/groonga,827,2018-02-20T13:31:21Z,2018-02-21T01:15:42Z,2018-06-21T06:16:23Z,MERGED,True,18,12,2,https://github.com/komainu8,doc logical_select: fix a typo,1,[],https://github.com/groonga/groonga/pull/827,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/827,Because the number of records is different from the example.,Because the number of records is different from the example.,True,{}
groonga/groonga,https://github.com/groonga/groonga,828,2018-02-20T13:46:31Z,2018-02-21T01:18:03Z,2018-06-21T06:16:24Z,MERGED,True,100,4,3,https://github.com/komainu8,doc logical_range_filter: add execution examples of logical_table,1,[],https://github.com/groonga/groonga/pull/828,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/828,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,828,2018-02-20T13:46:31Z,2018-02-21T01:18:03Z,2018-06-21T06:16:24Z,MERGED,True,100,4,3,https://github.com/komainu8,doc logical_range_filter: add execution examples of logical_table,1,[],https://github.com/groonga/groonga/pull/828,https://github.com/kou,2,https://github.com/groonga/groonga/pull/828#issuecomment-367180529,,We need to update file list by make -C doc update-files when we add/remove files.,True,{}
groonga/groonga,https://github.com/groonga/groonga,830,2018-03-03T03:01:58Z,2018-03-03T12:45:43Z,2018-03-03T12:57:23Z,MERGED,True,3,3,2,https://github.com/genki,file_lock: Copy path to buffer to avoid storing a pointer to a local buffer.,1,[],https://github.com/groonga/groonga/pull/830,https://github.com/genki,1,https://github.com/groonga/groonga/pull/830,grn_file_lock should have path buffer in its struct to prevent storing a pointer to a stack local buffer.,grn_file_lock should have path buffer in its struct to prevent storing a pointer to a stack local buffer.,True,{}
groonga/groonga,https://github.com/groonga/groonga,830,2018-03-03T03:01:58Z,2018-03-03T12:45:43Z,2018-03-03T12:57:23Z,MERGED,True,3,3,2,https://github.com/genki,file_lock: Copy path to buffer to avoid storing a pointer to a local buffer.,1,[],https://github.com/groonga/groonga/pull/830,https://github.com/kou,2,https://github.com/groonga/groonga/pull/830#issuecomment-370145744,grn_file_lock should have path buffer in its struct to prevent storing a pointer to a stack local buffer.,Thanks!,True,{}
groonga/groonga,https://github.com/groonga/groonga,831,2018-03-03T03:46:59Z,,2022-03-15T05:24:16Z,OPEN,False,453,9,10,https://github.com/genki,Generational lock,24,[],https://github.com/groonga/groonga/pull/831,https://github.com/genki,1,https://github.com/groonga/groonga/pull/831,"This PR wants to introduce a more robust way to recovery from crash in comparision to lock_clear.
Unfortunately, all software systems complicated enough can crash. Groonga is too.
Crashed Groonga processes could remain some locks in its database. Previously, so we have to unlock them by calling lock_clear.
In production system, it is not acceptable there to be down time even while clearing locks manually.
By this PR, we can automatically recover the dead lock by introducting generantional lock to the io lock.
Every grn_io_lock/grn_io_unlock works with generation ID which is uniquely related with a process.
generation ID is only effective while a process is alive. It is achieved by using flock/LockFileEx.
At the starting up, check running processes and its generation IDs.
If lock failed, extract the generation ID from the lock and test if the ID is in the available ID table. If not, the lock was made by crashed process, so we clear it.","This PR wants to introduce a more robust way to recovery from crash in comparision to lock_clear.
Unfortunately, all software systems complicated enough can crash. Groonga is too.
Crashed Groonga processes could remain some locks in its database. Previously, so we have to unlock them by calling lock_clear.
In production system, it is not acceptable there to be down time even while clearing locks manually.
By this PR, we can automatically recover the dead lock by introducting generantional lock to the io lock.
Every grn_io_lock/grn_io_unlock works with generation ID which is uniquely related with a process.
generation ID is only effective while a process is alive. It is achieved by using flock/LockFileEx.
At the starting up, check running processes and its generation IDs.
If lock failed, extract the generation ID from the lock and test if the ID is in the available ID table. If not, the lock was made by crashed process, so we clear it.",True,{}
groonga/groonga,https://github.com/groonga/groonga,831,2018-03-03T03:46:59Z,,2022-03-15T05:24:16Z,OPEN,False,453,9,10,https://github.com/genki,Generational lock,24,[],https://github.com/groonga/groonga/pull/831,https://github.com/s-yata,2,https://github.com/groonga/groonga/pull/831#issuecomment-370655474,"This PR wants to introduce a more robust way to recovery from crash in comparision to lock_clear.
Unfortunately, all software systems complicated enough can crash. Groonga is too.
Crashed Groonga processes could remain some locks in its database. Previously, so we have to unlock them by calling lock_clear.
In production system, it is not acceptable there to be down time even while clearing locks manually.
By this PR, we can automatically recover the dead lock by introducting generantional lock to the io lock.
Every grn_io_lock/grn_io_unlock works with generation ID which is uniquely related with a process.
generation ID is only effective while a process is alive. It is achieved by using flock/LockFileEx.
At the starting up, check running processes and its generation IDs.
If lock failed, extract the generation ID from the lock and test if the ID is in the available ID table. If not, the lock was made by crashed process, so we clear it.","Abstract
The idea seems to be good.
The implicit lock_clear is helpful for not only you but also other users.
However, this pull request is not acceptable due to several problems.
Major problems
Multi-thread safety
The provided implementation is dangerous if the same DB is opened by multiple processes or threads.
For example, grn_io_clear_lock() assumes that other threads and processes don't attempt to lock the grn_io at the same time, because *io->lock = 0 might be executed between GRN_ATOMIC_ADD_EX(io->lock, 1, lock) and GRN_ATOMIC_ADD_EX(io->lock, -1, lock).
If there is only one process with one thread, lock_clear works well.
Initilization
grn_obj_clear_lock() should not be called before grn_db_init_builtin_types().
Minor problems
Compilation errors
Compilation for Windows fails as follows:
C:\projects\groonga\lib\file_lock.c(141): error C2065: 'TESTSTRLEN' : undeclared identifier [C:\projects\groonga\lib\libgroonga.vcxproj]
4972
C:\projects\groonga\lib\file_lock.c(172): error C2065: 'TESTSTRLEN' : undeclared identifier [C:\projects\groonga\lib\libgroonga.vcxproj]

Compilation warnings
#includes are missing.
file_lock.c: In function ‘grn_file_lock_takeover’:
file_lock.c:143:7: warning: implicit declaration of function ‘flock’ [-Wimplicit-function-declaration]
   if (flock(file_lock->fd, LOCK_EX|LOCK_NB) != 0) {
       ^
  CC       io.lo

io.c: In function ‘grn_io_lock’:
io.c:1379:10: warning: implicit declaration of function ‘grn_gen_lock’ [-Wimplicit-function-declaration]
     if (!grn_gen_lock(ctx, io, count)) {
          ^
io.c: In function ‘grn_io_unlock’:
io.c:1417:5: warning: implicit declaration of function ‘grn_gen_unlock’ [-Wimplicit-function-declaration]
     grn_gen_unlock(io);
     ^
  CC       gen.lo

A typecast is missing.
gen.c: In function ‘grn_gen_init’:
gen.c:122:29: warning: passing argument 2 of ‘grn_obj_clear_lock’ from incompatible pointer type [-Wincompatible-pointer-types]
     grn_obj_clear_lock(ctx, db);
                             ^
In file included from ../include/groonga.h:22:0,
                 from grn.h:743,
                 from gen.c:19:
../include/groonga/groonga.h:767:16: note: expected ‘grn_obj * {aka struct _grn_obj *}’ but argument is of type ‘grn_db * {aka struct _grn_db *}’
 GRN_API grn_rc grn_obj_clear_lock(grn_ctx *ctx, grn_obj *obj);
                ^

Interfaces
Local functions should be static.
int
gen_id_is_newer(grn_gen *gen, int id)
{
  // ...
}

If a function has no argument, void should be specified in its declaration.
void grn_gen_enable();
Functions grn_gen_*() should be defined for grn_gen.
grn_rc grn_gen_init(grn_ctx *ctx, grn_db *db);
grn_rc grn_gen_fin(grn_ctx *ctx, grn_db *db);
int grn_gen_lock(grn_ctx *ctx, grn_io *io, uint32_t count);
int grn_gen_unlock(grn_io *io);
The difference between grn_file_lock_fin() and grn_file_lock_close() is not clear.
*_close() is generally used in combination with *_open() but grn_file_lock_open() does not exist.
void grn_file_lock_fin(grn_ctx *ctx, grn_file_lock *file_lock);
void grn_file_lock_close(grn_ctx *ctx, grn_file_lock *file_lock);
Performance
grn_gen_init() checks GRN_GEN_SIZE (2,048) file locks in initialization but most checks are not required in practice.
for(int i = 1; i < GRN_GEN_SIZE; i++){
  gen_path_fill(ctx, db, i, gen_path);
  grn_file_lock file_lock;
  grn_file_lock_init(ctx, &file_lock, gen_path);
  if (grn_file_lock_exist(ctx, &file_lock)) {
    // ...
  }
  grn_file_lock_fin(ctx, &file_lock);
}
grn_gen_unlock() requires an additional atomic operation even if the generational lock is disabled.
GRN_ATOMIC_ADD_EX(io->lock, -1, lock);
if ((lock & grn_gen_lock_count_mask) == 1) {
  GRN_ATOMIC_ADD_EX(io->lock, -(lock & GEN_ID_MASK), lock);
  return 1;
}",True,{}
groonga/groonga,https://github.com/groonga/groonga,831,2018-03-03T03:46:59Z,,2022-03-15T05:24:16Z,OPEN,False,453,9,10,https://github.com/genki,Generational lock,24,[],https://github.com/groonga/groonga/pull/831,https://github.com/genki,3,https://github.com/groonga/groonga/pull/831#issuecomment-370675301,"This PR wants to introduce a more robust way to recovery from crash in comparision to lock_clear.
Unfortunately, all software systems complicated enough can crash. Groonga is too.
Crashed Groonga processes could remain some locks in its database. Previously, so we have to unlock them by calling lock_clear.
In production system, it is not acceptable there to be down time even while clearing locks manually.
By this PR, we can automatically recover the dead lock by introducting generantional lock to the io lock.
Every grn_io_lock/grn_io_unlock works with generation ID which is uniquely related with a process.
generation ID is only effective while a process is alive. It is achieved by using flock/LockFileEx.
At the starting up, check running processes and its generation IDs.
If lock failed, extract the generation ID from the lock and test if the ID is in the available ID table. If not, the lock was made by crashed process, so we clear it.","Thank you for reviewing.
Sorry for not tested yet on Windows environment because currently I have no Windows machines. This PR is still WIP and I have understood there must be more improvements. My motivation was offering a concept in advance of further works.
So, let me think about individual issues.
At first, grn_io_lock_clear is not thread safe. Yes, you right.
The purpose is ignoring the locks made by crashed process.
If the crashed locker is one process, there is no doubt to be only single overlocking for each dead locks. If there are more crashed lockers (at the same time!), even althrough, the overlocking count still must be one.
So we can use GRN_ATOMIC_ADD_EX(io->lock, -1, lock) for clearing the lock instead of grn_io_lock_clear.
It is going to be thread safe.
If I won't use grn_io_lock_clear, the next issue relating with the initialization is solved as well.
Succeeding minor issues. Yeah, I will fix them. It's ok.
I am sorry in advance for my blindness in Windows environment.
The last, performance issue. I knew it can be solved if we use directory reading API or such like system calls. But I had no self-confidence to use it in WIN32 block according previously I mentioned.
Not only for that, I had tested it and found there is virtually no time to check existense of the files. In addition, I have experience which the listing up directory entries is relatively high cost compared to testing file existance, in particular, if there are many items in it.
I don't know which way is low cost.
One more option to get rid of that cost is using grn_config_get/set to remember the paths of lock files.
Let say what messy is, it uses grn_io_lock internally. It draws unnecessary complication. Preparing a special file for recording the paths can achive same thing without complication.",True,{}
groonga/groonga,https://github.com/groonga/groonga,831,2018-03-03T03:46:59Z,,2022-03-15T05:24:16Z,OPEN,False,453,9,10,https://github.com/genki,Generational lock,24,[],https://github.com/groonga/groonga/pull/831,https://github.com/genki,4,https://github.com/groonga/groonga/pull/831#issuecomment-370685905,"This PR wants to introduce a more robust way to recovery from crash in comparision to lock_clear.
Unfortunately, all software systems complicated enough can crash. Groonga is too.
Crashed Groonga processes could remain some locks in its database. Previously, so we have to unlock them by calling lock_clear.
In production system, it is not acceptable there to be down time even while clearing locks manually.
By this PR, we can automatically recover the dead lock by introducting generantional lock to the io lock.
Every grn_io_lock/grn_io_unlock works with generation ID which is uniquely related with a process.
generation ID is only effective while a process is alive. It is achieved by using flock/LockFileEx.
At the starting up, check running processes and its generation IDs.
If lock failed, extract the generation ID from the lock and test if the ID is in the available ID table. If not, the lock was made by crashed process, so we clear it.",Fixed issues about thread-safety and minor issues.,True,{}
groonga/groonga,https://github.com/groonga/groonga,831,2018-03-03T03:46:59Z,,2022-03-15T05:24:16Z,OPEN,False,453,9,10,https://github.com/genki,Generational lock,24,[],https://github.com/groonga/groonga/pull/831,https://github.com/genki,5,https://github.com/groonga/groonga/pull/831#issuecomment-370722573,"This PR wants to introduce a more robust way to recovery from crash in comparision to lock_clear.
Unfortunately, all software systems complicated enough can crash. Groonga is too.
Crashed Groonga processes could remain some locks in its database. Previously, so we have to unlock them by calling lock_clear.
In production system, it is not acceptable there to be down time even while clearing locks manually.
By this PR, we can automatically recover the dead lock by introducting generantional lock to the io lock.
Every grn_io_lock/grn_io_unlock works with generation ID which is uniquely related with a process.
generation ID is only effective while a process is alive. It is achieved by using flock/LockFileEx.
At the starting up, check running processes and its generation IDs.
If lock failed, extract the generation ID from the lock and test if the ID is in the available ID table. If not, the lock was made by crashed process, so we clear it.","Uses the id list file for remembering which generation id is acquired and safely released.
So now file existence test is only applied for files listed.
<db_path>.gen # id list file. 2046 bytes.
<db_path>.gen.<id> # lock file for individual gen id",True,{}
groonga/groonga,https://github.com/groonga/groonga,832,2018-03-15T02:03:31Z,2018-03-15T02:10:31Z,2018-06-21T06:16:25Z,MERGED,True,459,1,7,https://github.com/komainu8,logical_range_filter: Support decimal point,1,[],https://github.com/groonga/groonga/pull/832,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/832,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,832,2018-03-15T02:03:31Z,2018-03-15T02:10:31Z,2018-06-21T06:16:25Z,MERGED,True,459,1,7,https://github.com/komainu8,logical_range_filter: Support decimal point,1,[],https://github.com/groonga/groonga/pull/832,https://github.com/kou,2,https://github.com/groonga/groonga/pull/832#issuecomment-373237018,,"Merged but it's better that we should use test data that care msec.
For example:

Data: 2018/03/15 11:11:02.001 and 2018/03/15 11:11:02.002
Min/Max: 2018/03/15 11:11:02.001 with excluded border",True,{}
groonga/groonga,https://github.com/groonga/groonga,834,2018-03-23T09:49:38Z,2018-03-26T06:45:05Z,2018-06-21T06:15:42Z,MERGED,True,72,0,1,https://github.com/komainu8,doc: update news,2,[],https://github.com/groonga/groonga/pull/834,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/834,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,834,2018-03-23T09:49:38Z,2018-03-26T06:45:05Z,2018-06-21T06:15:42Z,MERGED,True,72,0,1,https://github.com/komainu8,doc: update news,2,[],https://github.com/groonga/groonga/pull/834,https://github.com/kou,2,https://github.com/groonga/groonga/pull/834#issuecomment-375827446,,"I don't have enough time to review this.
Can someone take care of this?",True,{}
groonga/groonga,https://github.com/groonga/groonga,834,2018-03-23T09:49:38Z,2018-03-26T06:45:05Z,2018-06-21T06:15:42Z,MERGED,True,72,0,1,https://github.com/komainu8,doc: update news,2,[],https://github.com/groonga/groonga/pull/834,https://github.com/s-yata,3,https://github.com/groonga/groonga/pull/834#issuecomment-375852783,,"こんな感じでしょうか．
diff --git a/doc/source/news.rst b/doc/source/news.rst
index b6684f0..6240c58 100644
--- a/doc/source/news.rst
+++ b/doc/source/news.rst
@@ -15,45 +15,42 @@ Release 8.0.1 - 2018-03-29
 Improvements
 ^^^^^^^^^^^^
 
-* [:doc:`/reference/log`] Added showing condition in each ``filter``
-  to query log.
-  It's disabled by default. You need to set
-  ``GRN_QUERY_LOG_SHOW_CONDITION=yes`` environment variable to
-  enable it.
+* [:doc:`/reference/log`] Show ``filter`` conditions in query log.
+  It's disabled by default. To enable it, you need to set an environment
+  variable ``GRN_QUERY_LOG_SHOW_CONDITION=yes``.
 
-* Use the same directory as .dll/.exe for .pdb
+* Install ``*.pdb`` into the directory where ``*.dll`` and ``*.exe``
+  are installed.
 
-* [:doc:`/reference/commands/logical_count`] Supported ``filtered``
+* [:doc:`/reference/commands/logical_count`] Support ``filtered``
   stage dynamic columns.
 
 * [:doc:`/reference/commands/logical_count`]
   [:ref:`logical-count-post-filter`] Added a new filter timing.
-  It's executed after ``filtered`` stage generated columns are generated.
+  It's executed after ``filtered`` stage columns are generated.
 
 * [:doc:`/reference/commands/logical_select`]
   [:ref:`logical-select-post-filter`] Added a new filter timing.
-  It's executed after ``filtered`` stage generated columns are generated.
+  It's executed after ``filtered`` stage columns are generated.
 
-* Supported LZ4/Zstd/zlib compression for vector data.
+* Support LZ4/Zstd/zlib compression for vector data.
 
-* Supported alias to accessor such as ``_key``.
+* Support alias to accessor such as ``_key``.
 
-* [:doc:`/reference/commands/logical_range-filter`] optimize applying
+* [:doc:`/reference/commands/logical_range_filter`] Optimize
   window function for large result set.
-  If result set is large, applying window function is slow.
-  If enough matched records exist near head windows, we don't need to
-  apply window function to rest windows.
+  If we find enough matched records, we don't apply window function
+  to the remaining windows.
 
-  TODO: Disable this optimization if result set is small. Because this
-  optimization may have non-negligible overhead for small result
-  set. (It's not confirmed yet.)
+  TODO: Disable this optimization for small result set if its overhead
+  is not negligible. The overhead is not evaluated yet.
 
-* [:doc:`/reference/commands/select`] Added match_escalation parameter.
+* [:doc:`/reference/commands/select`] Added ``match_escalation`` parameter.
   You can force to enable match escalation by ``--match_escalation yes``.
-  It's stronger than ``--match_escalation_threshold 99999....999``.
-  Because ``--match_escalation yes`` also works with
+  It's stronger than ``--match_escalation_threshold 99999....999``
+  because ``--match_escalation yes`` also works with
   ``SOME_CONDITIONS && column @ 'query'``.
-  ``--match_escalation_threshold`` isn't used the case.
+  ``--match_escalation_threshold`` isn't used in this case.
 
   The default is ``--match_escalation auto``. It doesn't change the
   current behavior.
@@ -64,20 +61,18 @@ Improvements
 Fixes
 ^^^^^
 
-* Fixed memory leak that prefix query isn't match any token.
+* Fixed memory leak that occurs when a prefix query doesn't match any token.
   [GitHub#820][Patch by Naoya Murakami]
 
-* Fixed a bug that returning cache of different databases, when
-  Groonga of the same process had multiple databases.
+* Fixed a bug that a cache for different databases is used when
+  multiple databases are opened in the same process.
 
-* Fixed a bug that wrong index constructed bug.
-  It's caused only when vector column is a source and ``WITH_SECTION``
-  isn't specified.
+* Fixed a bug that a wrong index is constructed.
+  This occurs only when the source of a column is a vector column and
+  ``WITH_SECTION`` isn't specified.
 
-* Fixed a bug that constant value is overflow/underflow-ed in
-  >,>=,<,<=,==,!=.
-  If you set overflow/underflow constant value in >,>=,<,<=,==,!=,
-  query is not return recoards.
+* Fixed a bug that a constant value can overflow or underflow in
+  comparison (>,>=,<,<=,==,!=).
 
 Thanks
 ^^^^^^",True,{}
groonga/groonga,https://github.com/groonga/groonga,834,2018-03-23T09:49:38Z,2018-03-26T06:45:05Z,2018-06-21T06:15:42Z,MERGED,True,72,0,1,https://github.com/komainu8,doc: update news,2,[],https://github.com/groonga/groonga/pull/834,https://github.com/komainu8,4,https://github.com/groonga/groonga/pull/834#issuecomment-376060734,,"@s-yata ご指摘ありがとうございます。
指摘いただいた内容を修正しました。",True,{}
groonga/groonga,https://github.com/groonga/groonga,835,2018-03-26T08:43:51Z,2018-03-26T09:29:59Z,2018-06-21T06:15:44Z,MERGED,True,140,16,1,https://github.com/komainu8,doc ja: translate,1,[],https://github.com/groonga/groonga/pull/835,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/835,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,836,2018-04-04T08:52:57Z,2018-04-24T07:09:28Z,2018-04-24T08:57:44Z,MERGED,True,70,0,3,https://github.com/cosmo0920,Add Groonga docker installation document,2,[],https://github.com/groonga/groonga/pull/836,https://github.com/cosmo0920,1,https://github.com/groonga/groonga/pull/836,"Groonga Alpine Linux minimal image is distributed on DockerHub.
Should we describe this minimal image on document?","Groonga Alpine Linux minimal image is distributed on DockerHub.
Should we describe this minimal image on document?",True,{}
groonga/groonga,https://github.com/groonga/groonga,836,2018-04-04T08:52:57Z,2018-04-24T07:09:28Z,2018-04-24T08:57:44Z,MERGED,True,70,0,3,https://github.com/cosmo0920,Add Groonga docker installation document,2,[],https://github.com/groonga/groonga/pull/836,https://github.com/kou,2,https://github.com/groonga/groonga/pull/836#issuecomment-383826987,"Groonga Alpine Linux minimal image is distributed on DockerHub.
Should we describe this minimal image on document?",Thanks!,True,{'LAUGH': ['https://github.com/cosmo0920']}
groonga/groonga,https://github.com/groonga/groonga,837,2018-04-06T02:23:43Z,2018-04-06T07:40:10Z,2018-04-06T07:40:14Z,MERGED,True,34,34,18,https://github.com/okkez,Fix typo,6,[],https://github.com/groonga/groonga/pull/837,https://github.com/okkez,1,https://github.com/groonga/groonga/pull/837,"Groogna ->
Groonga
^^
groogna ->
groonga
^^","Groogna ->
Groonga
^^
groogna ->
groonga
^^",True,{}
groonga/groonga,https://github.com/groonga/groonga,837,2018-04-06T02:23:43Z,2018-04-06T07:40:10Z,2018-04-06T07:40:14Z,MERGED,True,34,34,18,https://github.com/okkez,Fix typo,6,[],https://github.com/groonga/groonga/pull/837,https://github.com/kou,2,https://github.com/groonga/groonga/pull/837#issuecomment-379174165,"Groogna ->
Groonga
^^
groogna ->
groonga
^^",Good catch!,True,{}
groonga/groonga,https://github.com/groonga/groonga,838,2018-04-20T08:41:31Z,2018-04-24T05:42:05Z,2018-06-21T06:15:46Z,MERGED,True,87,0,1,https://github.com/komainu8,doc: update news,2,[],https://github.com/groonga/groonga/pull/838,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/838,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,838,2018-04-20T08:41:31Z,2018-04-24T05:42:05Z,2018-06-21T06:15:46Z,MERGED,True,87,0,1,https://github.com/komainu8,doc: update news,2,[],https://github.com/groonga/groonga/pull/838,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/838#issuecomment-383525377,,"@kenhys Thank you for your comments.
I've fixed them.",True,{}
groonga/groonga,https://github.com/groonga/groonga,838,2018-04-20T08:41:31Z,2018-04-24T05:42:05Z,2018-06-21T06:15:46Z,MERGED,True,87,0,1,https://github.com/komainu8,doc: update news,2,[],https://github.com/groonga/groonga/pull/838,https://github.com/kenhys,3,https://github.com/groonga/groonga/pull/838#issuecomment-383810092,,@komainu8  Merged.,True,{}
groonga/groonga,https://github.com/groonga/groonga,840,2018-04-23T03:55:32Z,2018-04-25T02:56:11Z,2018-06-21T06:16:42Z,MERGED,True,175,22,1,https://github.com/komainu8,ii: add log enhancements that output contents of a token,10,[],https://github.com/groonga/groonga/pull/840,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/840,I added ii's log enhancements that not only token id but also output contents of a token.,I added ii's log enhancements that not only token id but also output contents of a token.,True,{}
groonga/groonga,https://github.com/groonga/groonga,840,2018-04-23T03:55:32Z,2018-04-25T02:56:11Z,2018-06-21T06:16:42Z,MERGED,True,175,22,1,https://github.com/komainu8,ii: add log enhancements that output contents of a token,10,[],https://github.com/groonga/groonga/pull/840,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/840#issuecomment-383824769,I added ii's log enhancements that not only token id but also output contents of a token.,"@kou Thank you for your comments.
I've fixed them.",True,{}
groonga/groonga,https://github.com/groonga/groonga,840,2018-04-23T03:55:32Z,2018-04-25T02:56:11Z,2018-06-21T06:16:42Z,MERGED,True,175,22,1,https://github.com/komainu8,ii: add log enhancements that output contents of a token,10,[],https://github.com/groonga/groonga/pull/840,https://github.com/komainu8,3,https://github.com/groonga/groonga/pull/840#issuecomment-383836959,I added ii's log enhancements that not only token id but also output contents of a token.,"@kou Thank you for your comments.
I've fixed them again.",True,{}
groonga/groonga,https://github.com/groonga/groonga,841,2018-04-24T08:40:08Z,2018-04-25T10:06:43Z,2018-04-27T08:09:15Z,MERGED,True,243,62,3,https://github.com/piroor,Translate 8.0.2 news,6,[],https://github.com/groonga/groonga/pull/841,https://github.com/piroor,1,https://github.com/groonga/groonga/pull/841,I've translated news for Groonga 8.0.2.,I've translated news for Groonga 8.0.2.,True,{}
groonga/groonga,https://github.com/groonga/groonga,841,2018-04-24T08:40:08Z,2018-04-25T10:06:43Z,2018-04-27T08:09:15Z,MERGED,True,243,62,3,https://github.com/piroor,Translate 8.0.2 news,6,[],https://github.com/groonga/groonga/pull/841,https://github.com/piroor,2,https://github.com/groonga/groonga/pull/841#issuecomment-383868842,I've translated news for Groonga 8.0.2.,"Thanks, I've updated the po file.",True,{'THUMBS_UP': ['https://github.com/cosmo0920']}
groonga/groonga,https://github.com/groonga/groonga,842,2018-04-26T08:32:04Z,2018-04-27T08:08:50Z,2018-04-27T08:08:57Z,MERGED,True,51,43,3,https://github.com/piroor,Fix descriptions in 8.0.2 news,5,[],https://github.com/groonga/groonga/pull/842,https://github.com/piroor,1,https://github.com/groonga/groonga/pull/842,Fix mismatched descriptions.,Fix mismatched descriptions.,True,{}
groonga/groonga,https://github.com/groonga/groonga,842,2018-04-26T08:32:04Z,2018-04-27T08:08:50Z,2018-04-27T08:08:57Z,MERGED,True,51,43,3,https://github.com/piroor,Fix descriptions in 8.0.2 news,5,[],https://github.com/groonga/groonga/pull/842,https://github.com/myokoym,2,https://github.com/groonga/groonga/pull/842#issuecomment-384894543,Fix mismatched descriptions.,詳細は見れていませんが、問題ないと思うのでマージします。,True,{}
groonga/groonga,https://github.com/groonga/groonga,843,2018-05-19T09:31:02Z,2018-05-19T21:01:50Z,2018-05-19T21:01:56Z,MERGED,True,2,2,1,https://github.com/noritada,doc: correct command lines of groonga executable in the client mode,1,[],https://github.com/groonga/groonga/pull/843,https://github.com/noritada,1,https://github.com/groonga/groonga/pull/843,"""--host"" option is not available in the client mode.","""--host"" option is not available in the client mode.",True,{}
groonga/groonga,https://github.com/groonga/groonga,843,2018-05-19T09:31:02Z,2018-05-19T21:01:50Z,2018-05-19T21:01:56Z,MERGED,True,2,2,1,https://github.com/noritada,doc: correct command lines of groonga executable in the client mode,1,[],https://github.com/groonga/groonga/pull/843,https://github.com/kou,2,https://github.com/groonga/groonga/pull/843#issuecomment-390432432,"""--host"" option is not available in the client mode.",Good catch!,True,{'THUMBS_UP': ['https://github.com/noritada']}
groonga/groonga,https://github.com/groonga/groonga,844,2018-05-20T12:14:42Z,2018-05-20T23:53:54Z,2018-05-20T23:54:01Z,MERGED,True,1,1,1,https://github.com/noritada,doc: correct a description on protocols available in the client mode.,1,[],https://github.com/groonga/groonga/pull/844,https://github.com/noritada,1,https://github.com/groonga/groonga/pull/844,"As far as I understand from a description as follows (and from source code and behavior),
the client mode only supports GQTP and HTTP is not supported.
Users cannot specify a protocol to access the server.

In client mode, groonga executable file runs as a client for GQTP
protocol Groonga server.

Sorry if my understanding is not correct.
Thanks!","As far as I understand from a description as follows (and from source code and behavior),
the client mode only supports GQTP and HTTP is not supported.
Users cannot specify a protocol to access the server.

In client mode, groonga executable file runs as a client for GQTP
protocol Groonga server.

Sorry if my understanding is not correct.
Thanks!",True,{}
groonga/groonga,https://github.com/groonga/groonga,844,2018-05-20T12:14:42Z,2018-05-20T23:53:54Z,2018-05-20T23:54:01Z,MERGED,True,1,1,1,https://github.com/noritada,doc: correct a description on protocols available in the client mode.,1,[],https://github.com/groonga/groonga/pull/844,https://github.com/kou,2,https://github.com/groonga/groonga/pull/844#issuecomment-390522454,"As far as I understand from a description as follows (and from source code and behavior),
the client mode only supports GQTP and HTTP is not supported.
Users cannot specify a protocol to access the server.

In client mode, groonga executable file runs as a client for GQTP
protocol Groonga server.

Sorry if my understanding is not correct.
Thanks!","Good catch!
You're right.",True,{'THUMBS_UP': ['https://github.com/noritada']}
groonga/groonga,https://github.com/groonga/groonga,846,2018-05-22T09:06:19Z,2018-05-22T09:38:35Z,2018-05-22T09:38:38Z,MERGED,True,11,1,1,https://github.com/komainu8,expr: fix a bug that extra scores were added,1,[],https://github.com/groonga/groonga/pull/846,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/846,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,847,2018-05-23T05:58:06Z,2018-05-23T08:43:29Z,2018-06-21T06:16:40Z,MERGED,True,55,0,2,https://github.com/komainu8,test: add a test for grn_table_select optimization for a case that needs any temporary table,1,[],https://github.com/groonga/groonga/pull/847,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/847,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,848,2018-05-25T10:08:08Z,2018-05-28T09:53:20Z,2018-05-28T09:53:24Z,CLOSED,False,54,0,1,https://github.com/komainu8,doc: update news,1,[],https://github.com/groonga/groonga/pull/848,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/848,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,849,2018-06-04T04:26:49Z,2018-06-04T04:56:59Z,2018-06-04T14:14:42Z,MERGED,True,16,2,3,https://github.com/komainu8,sub_filter: fix too much score with a too filtered case,1,[],https://github.com/groonga/groonga/pull/849,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/849,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,850,2018-06-19T08:42:01Z,2018-06-25T02:46:27Z,2018-06-25T04:41:37Z,MERGED,True,121,125,11,https://github.com/komainu8,"Add check exist of ""WITH SECTION"" flag when a full-text search for vector column",13,[],https://github.com/groonga/groonga/pull/850,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/850,"Because we can't a full-text search for vector column if we don't set ""WITH_SECTION"" flag.","Because we can't a full-text search for vector column if we don't set ""WITH_SECTION"" flag.",True,{}
groonga/groonga,https://github.com/groonga/groonga,850,2018-06-19T08:42:01Z,2018-06-25T02:46:27Z,2018-06-25T04:41:37Z,MERGED,True,121,125,11,https://github.com/komainu8,"Add check exist of ""WITH SECTION"" flag when a full-text search for vector column",13,[],https://github.com/groonga/groonga/pull/850,https://github.com/kou,2,https://github.com/groonga/groonga/pull/850#issuecomment-399815528,"Because we can't a full-text search for vector column if we don't set ""WITH_SECTION"" flag.",Merged.,True,{}
groonga/groonga,https://github.com/groonga/groonga,852,2018-06-20T05:40:15Z,2018-06-20T06:49:18Z,2018-06-20T06:49:26Z,CLOSED,False,4,4,4,https://github.com/komainu8,test: remove needless flag,1,[],https://github.com/groonga/groonga/pull/852,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/852,Because it does not have to be a full-text search index.,Because it does not have to be a full-text search index.,True,{}
groonga/groonga,https://github.com/groonga/groonga,854,2018-06-20T09:14:10Z,2018-06-21T00:43:33Z,2018-06-21T06:14:18Z,MERGED,True,0,16,1,https://github.com/komainu8,test: remove unused variables,1,[],https://github.com/groonga/groonga/pull/854,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/854,"When building Groonga,  I found an below warning.
So, I removed these variables.
test-string.c:72:20: warning: ‘normalized_text_ja_utf8’ defined but not used [-Wunused-const-variable=]
 static const gchar normalized_text_ja_utf8[] =
                    ^~~~~~~~~~~~~~~~~~~~~~~
test-string.c:64:20: warning: ‘text_ja_utf8’ defined but not used [-Wunused-const-variable=]
 static const gchar text_ja_utf8[] =
                    ^~~~~~~~~~~~","When building Groonga,  I found an below warning.
So, I removed these variables.
test-string.c:72:20: warning: ‘normalized_text_ja_utf8’ defined but not used [-Wunused-const-variable=]
 static const gchar normalized_text_ja_utf8[] =
                    ^~~~~~~~~~~~~~~~~~~~~~~
test-string.c:64:20: warning: ‘text_ja_utf8’ defined but not used [-Wunused-const-variable=]
 static const gchar text_ja_utf8[] =
                    ^~~~~~~~~~~~",True,{}
groonga/groonga,https://github.com/groonga/groonga,854,2018-06-20T09:14:10Z,2018-06-21T00:43:33Z,2018-06-21T06:14:18Z,MERGED,True,0,16,1,https://github.com/komainu8,test: remove unused variables,1,[],https://github.com/groonga/groonga/pull/854,https://github.com/kou,2,https://github.com/groonga/groonga/pull/854#issuecomment-398941021,"When building Groonga,  I found an below warning.
So, I removed these variables.
test-string.c:72:20: warning: ‘normalized_text_ja_utf8’ defined but not used [-Wunused-const-variable=]
 static const gchar normalized_text_ja_utf8[] =
                    ^~~~~~~~~~~~~~~~~~~~~~~
test-string.c:64:20: warning: ‘text_ja_utf8’ defined but not used [-Wunused-const-variable=]
 static const gchar text_ja_utf8[] =
                    ^~~~~~~~~~~~",Good catch!,True,{}
groonga/groonga,https://github.com/groonga/groonga,855,2018-06-21T05:58:00Z,2018-06-22T01:29:35Z,2018-06-23T02:46:00Z,MERGED,True,22,0,2,https://github.com/komainu8,"doc: add api reference for ""grn_obj_is_index_column""",1,[],https://github.com/groonga/groonga/pull/855,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/855,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,855,2018-06-21T05:58:00Z,2018-06-22T01:29:35Z,2018-06-23T02:46:00Z,MERGED,True,22,0,2,https://github.com/komainu8,"doc: add api reference for ""grn_obj_is_index_column""",1,[],https://github.com/groonga/groonga/pull/855,https://github.com/kou,2,https://github.com/groonga/groonga/pull/855#issuecomment-399292688,,Thanks!,True,{}
groonga/groonga,https://github.com/groonga/groonga,856,2018-06-23T02:47:07Z,2018-06-25T01:45:43Z,2019-11-06T01:32:52Z,MERGED,True,19,0,2,https://github.com/komainu8,"doc: add api reference for ""grn_obj_is_vector_column""",1,[],https://github.com/groonga/groonga/pull/856,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/856,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,856,2018-06-23T02:47:07Z,2018-06-25T01:45:43Z,2019-11-06T01:32:52Z,MERGED,True,19,0,2,https://github.com/komainu8,"doc: add api reference for ""grn_obj_is_vector_column""",1,[],https://github.com/groonga/groonga/pull/856,https://github.com/kou,2,https://github.com/groonga/groonga/pull/856#issuecomment-399808068,,Thanks!,True,{}
groonga/groonga,https://github.com/groonga/groonga,858,2018-06-26T08:16:16Z,2018-07-02T02:50:27Z,2018-08-07T03:18:42Z,MERGED,True,12,0,2,https://github.com/komainu8,doc: add complementary explain about similar search against Japanese documents,1,[],https://github.com/groonga/groonga/pull/858,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/858,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,858,2018-06-26T08:16:16Z,2018-07-02T02:50:27Z,2018-08-07T03:18:42Z,MERGED,True,12,0,2,https://github.com/komainu8,doc: add complementary explain about similar search against Japanese documents,1,[],https://github.com/groonga/groonga/pull/858,https://github.com/kou,2,https://github.com/groonga/groonga/pull/858#issuecomment-401657478,,Thanks!,True,{}
groonga/groonga,https://github.com/groonga/groonga,859,2018-07-20T13:18:24Z,2018-07-25T02:40:28Z,2018-07-25T11:30:38Z,MERGED,True,18,2,3,https://github.com/siepkes,Use POSIX compatible futimens method,1,[],https://github.com/groonga/groonga/pull/859,https://github.com/siepkes,1,https://github.com/groonga/groonga/pull/859,"futimes (ie. without the 'n') is the non-POSIX compatible brother of the POSIX compatible method futimens. futimes Is only implemented on Linux and some of the BSD's. Other POSIX compliant platforms do not provide this method but do provide futimens.
This came up when I was trying to build groonga on SmartOS (ie. Illumos / Solaris).
See also: http://pubs.opengroup.org/onlinepubs/9699919799/functions/futimens.html","futimes (ie. without the 'n') is the non-POSIX compatible brother of the POSIX compatible method futimens. futimes Is only implemented on Linux and some of the BSD's. Other POSIX compliant platforms do not provide this method but do provide futimens.
This came up when I was trying to build groonga on SmartOS (ie. Illumos / Solaris).
See also: http://pubs.opengroup.org/onlinepubs/9699919799/functions/futimens.html",True,{}
groonga/groonga,https://github.com/groonga/groonga,859,2018-07-20T13:18:24Z,2018-07-25T02:40:28Z,2018-07-25T11:30:38Z,MERGED,True,18,2,3,https://github.com/siepkes,Use POSIX compatible futimens method,1,[],https://github.com/groonga/groonga/pull/859,https://github.com/siepkes,2,https://github.com/groonga/groonga/pull/859#issuecomment-406614287,"futimes (ie. without the 'n') is the non-POSIX compatible brother of the POSIX compatible method futimens. futimes Is only implemented on Linux and some of the BSD's. Other POSIX compliant platforms do not provide this method but do provide futimens.
This came up when I was trying to build groonga on SmartOS (ie. Illumos / Solaris).
See also: http://pubs.opengroup.org/onlinepubs/9699919799/functions/futimens.html","Interestingly enough it seems the build for OS X breaks. From what I can find OS X only supports futimens starting from OS X 10.13.
In that case, would you guys rather do this with an ifdef ?",True,{}
groonga/groonga,https://github.com/groonga/groonga,859,2018-07-20T13:18:24Z,2018-07-25T02:40:28Z,2018-07-25T11:30:38Z,MERGED,True,18,2,3,https://github.com/siepkes,Use POSIX compatible futimens method,1,[],https://github.com/groonga/groonga/pull/859,https://github.com/kou,3,https://github.com/groonga/groonga/pull/859#issuecomment-406824974,"futimes (ie. without the 'n') is the non-POSIX compatible brother of the POSIX compatible method futimens. futimes Is only implemented on Linux and some of the BSD's. Other POSIX compliant platforms do not provide this method but do provide futimens.
This came up when I was trying to build groonga on SmartOS (ie. Illumos / Solaris).
See also: http://pubs.opengroup.org/onlinepubs/9699919799/functions/futimens.html","It seems that it's better that we check futimes and futimens availability in configure (and cmake). We will be able to use HAVE_FUNTIMENS and HAVE_FUTIMES by the following change:
diff --git a/build/ac_macros/check_functions.m4 b/build/ac_macros/check_functions.m4
index a0b424b31..8c2081dbb 100644
--- a/build/ac_macros/check_functions.m4
+++ b/build/ac_macros/check_functions.m4
@@ -3,6 +3,8 @@
 AC_CHECK_FUNCS(_gmtime64_s)
 AC_CHECK_FUNCS(_localtime64_s)
 AC_CHECK_FUNCS(_strtoui64)
+AC_CHECK_FUNCS(futimens)
+AC_CHECK_FUNCS(futimes)
 AC_CHECK_FUNCS(gmtime_r)
 AC_CHECK_FUNCS(localtime_r)
 AC_CHECK_FUNCS(mkstemp)
diff --git a/config.h.cmake b/config.h.cmake
index 5ee382357..e899f3444 100644
--- a/config.h.cmake
+++ b/config.h.cmake
@@ -139,6 +139,8 @@
 #cmakedefine HAVE_CLOCK
 #cmakedefine HAVE_CLOCK_GETTIME
 #cmakedefine HAVE_FPCLASSIFY
+#cmakedefine HAVE_FUTIMENS
+#cmakedefine HAVE_FUTIMES
 #cmakedefine HAVE_GMTIME_R
 #cmakedefine HAVE_LOCALTIME_R
 #cmakedefine HAVE_MKSTEMP
I like that we use a macro for portability instead of embedding ifdef in code. For example:
diff --git a/lib/io.c b/lib/io.c
index b3171c2e9..5d5dbf270 100644
--- a/lib/io.c
+++ b/lib/io.c
@@ -49,6 +49,16 @@
 # define GRN_IO_FILE_SIZE_V0  GRN_IO_FILE_SIZE_V1
 #endif /* WIN32 */
 
+#ifdef HAVE_FUTIMENS
+# define grn_futimens(fd, times) futimens((fd), (times))
+# define grn_futimens_name ""futimens""
+#elif defined(HAVE_FUTIMES) /* HAVE_FUTIMENS */
+# define grn_futimens(fd, times) futimes((fd), (times))
+# define grn_futimens_name ""futimes""
+#else /* HAVE_FUTIMENS */
+# error ERROR_MESSAGE
+#endif /* HAVE_FUTIMENS */
+
 typedef struct _grn_io_fileinfo {
 #ifdef WIN32
   HANDLE fh;
@@ -2141,9 +2151,9 @@ grn_msync(grn_ctx *ctx, fileinfo *fi, void *start, size_t length)
     struct timeval times[2];
     gettimeofday(&(times[0]), NULL);
     times[1] = times[0];
-    r = futimes(fi->fd, times);
+    r = grn_futimens(fi->fd, times);
     if (r == -1) {
-      SERR(""futimes failed: <%d>"", fi->fd);
+      SERR(""%s failed: <%d>"", grn_futimens_name, fi->fd);
     }
   }",True,{}
groonga/groonga,https://github.com/groonga/groonga,859,2018-07-20T13:18:24Z,2018-07-25T02:40:28Z,2018-07-25T11:30:38Z,MERGED,True,18,2,3,https://github.com/siepkes,Use POSIX compatible futimens method,1,[],https://github.com/groonga/groonga/pull/859,https://github.com/siepkes,4,https://github.com/groonga/groonga/pull/859#issuecomment-406856254,"futimes (ie. without the 'n') is the non-POSIX compatible brother of the POSIX compatible method futimens. futimes Is only implemented on Linux and some of the BSD's. Other POSIX compliant platforms do not provide this method but do provide futimens.
This came up when I was trying to build groonga on SmartOS (ie. Illumos / Solaris).
See also: http://pubs.opengroup.org/onlinepubs/9699919799/functions/futimens.html",@kou Thanks for the thorough feedback! I've incorporated it in the PR. I've verified this also works for SmartOS (and should also work on Solaris). However the automated Windows build breaks. I'm assuming this is because the Windows build doesn't run ./autogen.sh?,True,{}
groonga/groonga,https://github.com/groonga/groonga,859,2018-07-20T13:18:24Z,2018-07-25T02:40:28Z,2018-07-25T11:30:38Z,MERGED,True,18,2,3,https://github.com/siepkes,Use POSIX compatible futimens method,1,[],https://github.com/groonga/groonga/pull/859,https://github.com/kou,5,https://github.com/groonga/groonga/pull/859#issuecomment-406906189,"futimes (ie. without the 'n') is the non-POSIX compatible brother of the POSIX compatible method futimens. futimes Is only implemented on Linux and some of the BSD's. Other POSIX compliant platforms do not provide this method but do provide futimens.
This came up when I was trying to build groonga on SmartOS (ie. Illumos / Solaris).
See also: http://pubs.opengroup.org/onlinepubs/9699919799/functions/futimens.html","Ah, we need to add ifndef WIN32 check because we don't need futimens() family on Windows. For example:
#ifndef WIN32
# ifdef HAVE_FUTIMENS
...
# endif /* HAVE_FUTIMENS */
#endif /* WIN32 */
We use SystemTimeToFileTime() on Windows not futimens() family.",True,{}
groonga/groonga,https://github.com/groonga/groonga,859,2018-07-20T13:18:24Z,2018-07-25T02:40:28Z,2018-07-25T11:30:38Z,MERGED,True,18,2,3,https://github.com/siepkes,Use POSIX compatible futimens method,1,[],https://github.com/groonga/groonga/pull/859,https://github.com/kou,6,https://github.com/groonga/groonga/pull/859#issuecomment-407615011,"futimes (ie. without the 'n') is the non-POSIX compatible brother of the POSIX compatible method futimens. futimes Is only implemented on Linux and some of the BSD's. Other POSIX compliant platforms do not provide this method but do provide futimens.
This came up when I was trying to build groonga on SmartOS (ie. Illumos / Solaris).
See also: http://pubs.opengroup.org/onlinepubs/9699919799/functions/futimens.html","Thanks.
I've merged.",True,{}
groonga/groonga,https://github.com/groonga/groonga,859,2018-07-20T13:18:24Z,2018-07-25T02:40:28Z,2018-07-25T11:30:38Z,MERGED,True,18,2,3,https://github.com/siepkes,Use POSIX compatible futimens method,1,[],https://github.com/groonga/groonga/pull/859,https://github.com/siepkes,7,https://github.com/groonga/groonga/pull/859#issuecomment-407723056,"futimes (ie. without the 'n') is the non-POSIX compatible brother of the POSIX compatible method futimens. futimes Is only implemented on Linux and some of the BSD's. Other POSIX compliant platforms do not provide this method but do provide futimens.
This came up when I was trying to build groonga on SmartOS (ie. Illumos / Solaris).
See also: http://pubs.opengroup.org/onlinepubs/9699919799/functions/futimens.html",Thanks for all the assistance!,True,{}
groonga/groonga,https://github.com/groonga/groonga,860,2018-07-24T02:50:43Z,2018-07-25T03:58:12Z,2018-07-25T03:58:12Z,CLOSED,False,9,0,3,https://github.com/daijiro,Fix returning wrong result ater the client closed accidentally,1,[],https://github.com/groonga/groonga/pull/860,https://github.com/daijiro,1,https://github.com/groonga/groonga/pull/860,"When a client closed just after sending a request and just before receiving the corresponding result,
another client occasionally receives the results which should have been sent to the former client.
Apparently, this problem started after ctx->impl->command.keep.command implemented.
This patch fixes the problem.","When a client closed just after sending a request and just before receiving the corresponding result,
another client occasionally receives the results which should have been sent to the former client.
Apparently, this problem started after ctx->impl->command.keep.command implemented.
This patch fixes the problem.",True,{}
groonga/groonga,https://github.com/groonga/groonga,860,2018-07-24T02:50:43Z,2018-07-25T03:58:12Z,2018-07-25T03:58:12Z,CLOSED,False,9,0,3,https://github.com/daijiro,Fix returning wrong result ater the client closed accidentally,1,[],https://github.com/groonga/groonga/pull/860,https://github.com/kou,2,https://github.com/groonga/groonga/pull/860#issuecomment-407601216,"When a client closed just after sending a request and just before receiving the corresponding result,
another client occasionally receives the results which should have been sent to the former client.
Apparently, this problem started after ctx->impl->command.keep.command implemented.
This patch fixes the problem.","This can be reproducable with the following command lines:
% curl 'http://localhost:10041/d/table_create?name=x&flags=TABLE_NO_KEY'                           
[[0,1532481286.949041,0.03842496871948242],true]
% curl -X POST -H ""Content-Type: application/json"" -d '' 'http://localhost:10041/d/load?table=x'
curl: (52) Empty reply from server
% curl 'http://localhost:10041/d/status'                              
[[-22,1532481300.105667,12.53006744384766,""JSON must start with '[' or '{': </d/status>"",[[""json_read"",""load.c"",735]]],0]",True,{}
groonga/groonga,https://github.com/groonga/groonga,860,2018-07-24T02:50:43Z,2018-07-25T03:58:12Z,2018-07-25T03:58:12Z,CLOSED,False,9,0,3,https://github.com/daijiro,Fix returning wrong result ater the client closed accidentally,1,[],https://github.com/groonga/groonga/pull/860,https://github.com/kou,3,https://github.com/groonga/groonga/pull/860#issuecomment-407602395,"When a client closed just after sending a request and just before receiving the corresponding result,
another client occasionally receives the results which should have been sent to the former client.
Apparently, this problem started after ctx->impl->command.keep.command implemented.
This patch fixes the problem.","Does this fix this case?
diff --git a/src/groonga.c b/src/groonga.c
index 462832ad7..3a512f549 100644
--- a/src/groonga.c
+++ b/src/groonga.c
@@ -1575,6 +1575,7 @@ do_htreq_post(grn_ctx *ctx, ht_context *hc)
   }
 
   {
+    grn_bool is_tail_sent = GRN_FALSE;
     grn_obj chunk_buffer;
     long long int read_content_length = 0;
 
@@ -1631,6 +1632,7 @@ do_htreq_post(grn_ctx *ctx, ht_context *hc)
             flags |= GRN_CTX_MORE;
           } else {
             flags |= GRN_CTX_TAIL;
+            is_tail_sent = GRN_TRUE;
           }
           grn_ctx_send(ctx,
                        GRN_TEXT_VALUE(&chunk_buffer),
@@ -1652,13 +1654,13 @@ do_htreq_post(grn_ctx *ctx, ht_context *hc)
       }
     }
 
-    if (ctx->rc == GRN_CANCEL) {
-      h_output(ctx, GRN_CTX_TAIL, hc);
-    } else if (ctx->rc == GRN_SUCCESS && GRN_TEXT_LEN(&chunk_buffer) > 0) {
+    if (ctx->rc == GRN_SUCCESS && GRN_TEXT_LEN(&chunk_buffer) > 0) {
       grn_ctx_send(ctx,
                    GRN_TEXT_VALUE(&chunk_buffer),
                    GRN_TEXT_LEN(&chunk_buffer),
                    GRN_CTX_TAIL);
+    } else if (!is_tail_sent) {
+      grn_ctx_send(ctx, NULL, 0, GRN_CTX_TAIL);
     }
 
     GRN_OBJ_FIN(ctx, &chunk_buffer);",True,{}
groonga/groonga,https://github.com/groonga/groonga,861,2018-07-24T08:30:18Z,2018-07-24T08:32:14Z,2018-07-25T00:22:51Z,MERGED,True,1,1,1,https://github.com/myokoym,Fix markup,1,[],https://github.com/groonga/groonga/pull/861,https://github.com/myokoym,1,https://github.com/groonga/groonga/pull/861,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,862,2018-08-14T01:56:52Z,2018-08-14T03:38:26Z,2019-11-06T01:32:50Z,MERGED,True,62,0,2,https://github.com/komainu8,test: add a test for an online index that lexcon tyepe is hash table,2,[],https://github.com/groonga/groonga/pull/862,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/862,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,862,2018-08-14T01:56:52Z,2018-08-14T03:38:26Z,2019-11-06T01:32:50Z,MERGED,True,62,0,2,https://github.com/komainu8,test: add a test for an online index that lexcon tyepe is hash table,2,[],https://github.com/groonga/groonga/pull/862,https://github.com/kou,2,https://github.com/groonga/groonga/pull/862#issuecomment-412744799,,Thanks.,True,{}
groonga/groonga,https://github.com/groonga/groonga,865,2018-09-03T03:25:25Z,2018-09-03T03:29:11Z,2018-09-03T04:19:43Z,MERGED,True,52,0,2,https://github.com/komainu8,regexp test: add a test for negative lookahead,1,[],https://github.com/groonga/groonga/pull/865,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/865,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,866,2018-09-04T08:36:33Z,2018-09-04T08:45:13Z,2018-09-04T09:16:34Z,MERGED,True,1,1,1,https://github.com/komainu8,doc: fix a typo,1,[],https://github.com/groonga/groonga/pull/866,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/866,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,866,2018-09-04T08:36:33Z,2018-09-04T08:45:13Z,2018-09-04T09:16:34Z,MERGED,True,1,1,1,https://github.com/komainu8,doc: fix a typo,1,[],https://github.com/groonga/groonga/pull/866,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/866#issuecomment-418289434,,Good catch!,True,{}
groonga/groonga,https://github.com/groonga/groonga,867,2018-09-04T13:24:46Z,2019-04-18T04:47:59Z,2019-04-18T04:48:02Z,MERGED,True,9,2,1,https://github.com/komainu8,doc: translate a part of suggestion,1,[],https://github.com/groonga/groonga/pull/867,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/867,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,867,2018-09-04T13:24:46Z,2019-04-18T04:47:59Z,2019-04-18T04:48:02Z,MERGED,True,9,2,1,https://github.com/komainu8,doc: translate a part of suggestion,1,[],https://github.com/groonga/groonga/pull/867,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/867#issuecomment-484313531,,"@kenhys Could you review this PR, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,867,2018-09-04T13:24:46Z,2019-04-18T04:47:59Z,2019-04-18T04:48:02Z,MERGED,True,9,2,1,https://github.com/komainu8,doc: translate a part of suggestion,1,[],https://github.com/groonga/groonga/pull/867,https://github.com/komainu8,3,https://github.com/groonga/groonga/pull/867#issuecomment-484354414,,"@kenhys Thank you for your review.
I'll fix original text markups the other commit.",True,{}
groonga/groonga,https://github.com/groonga/groonga,869,2018-09-10T02:45:20Z,2018-09-10T03:16:21Z,2018-09-11T02:13:17Z,MERGED,True,23,0,2,https://github.com/komainu8,scorer test: add a test to multiply the score,3,[],https://github.com/groonga/groonga/pull/869,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/869,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,869,2018-09-10T02:45:20Z,2018-09-10T03:16:21Z,2018-09-11T02:13:17Z,MERGED,True,23,0,2,https://github.com/komainu8,scorer test: add a test to multiply the score,3,[],https://github.com/groonga/groonga/pull/869,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/869#issuecomment-419774717,,"@kou Thank you for your comment.
I've fixed them.",True,{}
groonga/groonga,https://github.com/groonga/groonga,869,2018-09-10T02:45:20Z,2018-09-10T03:16:21Z,2018-09-11T02:13:17Z,MERGED,True,23,0,2,https://github.com/komainu8,scorer test: add a test to multiply the score,3,[],https://github.com/groonga/groonga/pull/869,https://github.com/kou,3,https://github.com/groonga/groonga/pull/869#issuecomment-419775830,,We should fix this ASAP.,True,{}
groonga/groonga,https://github.com/groonga/groonga,870,2018-09-11T03:39:41Z,2018-09-11T04:30:30Z,2018-09-11T06:11:21Z,MERGED,True,24,0,2,https://github.com/komainu8,scorer test: add a test for a score of reference to a vector column,1,[],https://github.com/groonga/groonga/pull/870,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/870,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,870,2018-09-11T03:39:41Z,2018-09-11T04:30:30Z,2018-09-11T06:11:21Z,MERGED,True,24,0,2,https://github.com/komainu8,scorer test: add a test for a score of reference to a vector column,1,[],https://github.com/groonga/groonga/pull/870,https://github.com/kou,2,https://github.com/groonga/groonga/pull/870#issuecomment-420149711,,I've fixed this case.,True,{}
groonga/groonga,https://github.com/groonga/groonga,871,2018-09-11T03:46:44Z,2018-09-11T05:17:00Z,2018-09-11T06:11:27Z,MERGED,True,26,0,2,https://github.com/komainu8,scorer test: add a test that adds a score,1,[],https://github.com/groonga/groonga/pull/871,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/871,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,871,2018-09-11T03:46:44Z,2018-09-11T05:17:00Z,2018-09-11T06:11:27Z,MERGED,True,26,0,2,https://github.com/komainu8,scorer test: add a test that adds a score,1,[],https://github.com/groonga/groonga/pull/871,https://github.com/kou,2,https://github.com/groonga/groonga/pull/871#issuecomment-420150405,,I've fixed this case.,True,{}
groonga/groonga,https://github.com/groonga/groonga,872,2018-09-25T02:45:30Z,2018-09-25T02:59:42Z,2018-09-25T03:17:15Z,MERGED,True,18,0,2,https://github.com/komainu8,"test scorer: add a test that applies ""!="" for empty vector column.",1,[],https://github.com/groonga/groonga/pull/872,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/872,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,873,2018-09-25T03:17:02Z,2018-09-25T03:37:52Z,2018-09-25T04:31:22Z,MERGED,True,1,1,1,https://github.com/komainu8,test scorer: fix wrong expect value,1,[],https://github.com/groonga/groonga/pull/873,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/873,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,875,2018-10-11T00:35:31Z,2018-10-11T01:04:11Z,2018-10-11T01:04:14Z,MERGED,True,42,0,2,https://github.com/komainu8,"test: add test for ""cast_loose""",3,[],https://github.com/groonga/groonga/pull/875,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/875,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,876,2018-10-11T03:48:47Z,2018-10-11T04:31:14Z,2018-10-11T05:04:22Z,MERGED,True,53,28,5,https://github.com/komainu8,select : add a cast_loose function,1,[],https://github.com/groonga/groonga/pull/876,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/876,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,877,2018-10-11T05:30:49Z,2018-10-11T06:06:25Z,2019-11-06T01:32:49Z,MERGED,True,15,0,2,https://github.com/komainu8,test: add a test when the cast failed,1,[],https://github.com/groonga/groonga/pull/877,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/877,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,878,2018-10-26T05:31:55Z,2018-10-29T02:35:46Z,2018-10-29T02:35:48Z,MERGED,True,188,5,2,https://github.com/komainu8,doc: add news topics for 8.0.8,2,[],https://github.com/groonga/groonga/pull/878,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/878,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,881,2018-11-13T07:27:58Z,2018-11-13T08:16:47Z,2019-01-16T00:00:49Z,MERGED,True,80,1,3,https://github.com/komainu8,TokenFilterStopWord: fix a bug that an error occurs when executing a query with a column option,1,[],https://github.com/groonga/groonga/pull/881,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/881,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,881,2018-11-13T07:27:58Z,2018-11-13T08:16:47Z,2019-01-16T00:00:49Z,MERGED,True,80,1,3,https://github.com/komainu8,TokenFilterStopWord: fix a bug that an error occurs when executing a query with a column option,1,[],https://github.com/groonga/groonga/pull/881,https://github.com/kou,2,https://github.com/groonga/groonga/pull/881#issuecomment-438175685,,Good catch!,True,{}
groonga/groonga,https://github.com/groonga/groonga,882,2018-11-15T03:11:36Z,2018-11-16T00:28:22Z,2018-11-16T00:28:27Z,CLOSED,False,2,2,1,https://github.com/komainu8,Change build type for Windows to Release,1,[],https://github.com/groonga/groonga/pull/882,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/882,Because we should provide a binary that was made the appveyor.,Because we should provide a binary that was made the appveyor.,True,{}
groonga/groonga,https://github.com/groonga/groonga,882,2018-11-15T03:11:36Z,2018-11-16T00:28:22Z,2018-11-16T00:28:27Z,CLOSED,False,2,2,1,https://github.com/komainu8,Change build type for Windows to Release,1,[],https://github.com/groonga/groonga/pull/882,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/882#issuecomment-439239326,Because we should provide a binary that was made the appveyor.,Release is not generate PDB files.,True,{}
groonga/groonga,https://github.com/groonga/groonga,885,2018-12-13T05:59:09Z,2018-12-28T13:52:16Z,2018-12-28T13:52:19Z,CLOSED,False,183,0,2,https://github.com/komainu8,logical_select: add a test fot load_table option,4,[],https://github.com/groonga/groonga/pull/885,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/885,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,885,2018-12-13T05:59:09Z,2018-12-28T13:52:16Z,2018-12-28T13:52:19Z,CLOSED,False,183,0,2,https://github.com/komainu8,logical_select: add a test fot load_table option,4,[],https://github.com/groonga/groonga/pull/885,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/885#issuecomment-447234206,,"@kou
Thank you for your comments.
I've fixed them.",True,{}
groonga/groonga,https://github.com/groonga/groonga,885,2018-12-13T05:59:09Z,2018-12-28T13:52:16Z,2018-12-28T13:52:19Z,CLOSED,False,183,0,2,https://github.com/komainu8,logical_select: add a test fot load_table option,4,[],https://github.com/groonga/groonga/pull/885,https://github.com/komainu8,3,https://github.com/groonga/groonga/pull/885#issuecomment-450362342,,This pull request close. Because It has already been implemented.,True,{}
groonga/groonga,https://github.com/groonga/groonga,886,2018-12-14T08:29:55Z,2018-12-28T13:52:01Z,2018-12-28T13:52:06Z,CLOSED,False,196,0,3,https://github.com/komainu8,[WIP] logical_select: add --load_table option,5,[],https://github.com/groonga/groonga/pull/886,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/886,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,886,2018-12-14T08:29:55Z,2018-12-28T13:52:01Z,2018-12-28T13:52:06Z,CLOSED,False,196,0,3,https://github.com/komainu8,[WIP] logical_select: add --load_table option,5,[],https://github.com/groonga/groonga/pull/886,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/886#issuecomment-450362312,,This pull request close. Because It has already been implemented.,True,{}
groonga/groonga,https://github.com/groonga/groonga,890,2019-01-05T08:29:32Z,2019-01-07T07:38:27Z,2019-01-16T00:00:14Z,MERGED,True,133,0,5,https://github.com/komainu8,doc select: add QUERY_NO_SYNTAX_ERROR into --query_flags ,2,[],https://github.com/groonga/groonga/pull/890,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/890,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,893,2019-01-17T08:27:06Z,2019-01-21T03:56:40Z,2019-11-06T01:32:48Z,MERGED,True,46,0,3,https://github.com/komainu8,[WIP] logger: add log-flags option,2,[],https://github.com/groonga/groonga/pull/893,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/893,TODO: test,TODO: test,True,{}
groonga/groonga,https://github.com/groonga/groonga,894,2019-01-23T09:08:49Z,2019-01-30T11:53:12Z,2019-01-30T11:53:17Z,CLOSED,False,39,4,2,https://github.com/komainu8,[WIP] extend memory check,2,[],https://github.com/groonga/groonga/pull/894,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/894,TODO: test,TODO: test,True,{}
groonga/groonga,https://github.com/groonga/groonga,894,2019-01-23T09:08:49Z,2019-01-30T11:53:12Z,2019-01-30T11:53:17Z,CLOSED,False,39,4,2,https://github.com/komainu8,[WIP] extend memory check,2,[],https://github.com/groonga/groonga/pull/894,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/894#issuecomment-458917207,TODO: test,"This feature has already implemented.
So, this pull request to close.",True,{}
groonga/groonga,https://github.com/groonga/groonga,896,2019-02-02T01:37:23Z,2019-02-02T01:37:33Z,2019-02-02T01:47:16Z,MERGED,True,20,3,1,https://github.com/kenhys,appveyor: enable Visual Studio 2017 worker image,2,[],https://github.com/groonga/groonga/pull/896,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/896,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,897,2019-02-04T02:11:25Z,2019-02-04T07:28:16Z,2019-02-06T08:26:14Z,MERGED,True,4,1,1,https://github.com/kenhys,appveyor: execute command line test,2,[],https://github.com/groonga/groonga/pull/897,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/897,TODO: It should work on appveyor worker image even though non-ascii directory name is used,TODO: It should work on appveyor worker image even though non-ascii directory name is used,True,{}
groonga/groonga,https://github.com/groonga/groonga,898,2019-02-04T04:46:58Z,2019-02-04T07:28:29Z,2019-02-06T08:25:54Z,MERGED,True,1,1,1,https://github.com/kenhys,logger windows: avoid confusion about pid and thread id,1,[],https://github.com/groonga/groonga/pull/898,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/898,"It makes clear which is process_id or thread_id.
Before:
|2436|1032:
After:
|2436|00001032:","It makes clear which is process_id or thread_id.
Before:
|2436|1032:
After:
|2436|00001032:",True,{}
groonga/groonga,https://github.com/groonga/groonga,899,2019-02-04T08:20:52Z,2019-04-26T05:43:53Z,2019-05-22T04:47:12Z,MERGED,True,285,17,7,https://github.com/kenhys,table: add missing check for unexpected error case,19,[],https://github.com/groonga/groonga/pull/899,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/899,It seems that there is a case unexpected error occurs but not correct error is not set.,It seems that there is a case unexpected error occurs but not correct error is not set.,True,{}
groonga/groonga,https://github.com/groonga/groonga,899,2019-02-04T08:20:52Z,2019-04-26T05:43:53Z,2019-05-22T04:47:12Z,MERGED,True,285,17,7,https://github.com/kenhys,table: add missing check for unexpected error case,19,[],https://github.com/groonga/groonga/pull/899,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/899#issuecomment-463534076,It seems that there is a case unexpected error occurs but not correct error is not set.,"I've fixed and squashed commit.
Just waiting for passing Travis-CI.",True,{}
groonga/groonga,https://github.com/groonga/groonga,899,2019-02-04T08:20:52Z,2019-04-26T05:43:53Z,2019-05-22T04:47:12Z,MERGED,True,285,17,7,https://github.com/kenhys,table: add missing check for unexpected error case,19,[],https://github.com/groonga/groonga/pull/899,https://github.com/kenhys,3,https://github.com/groonga/groonga/pull/899#issuecomment-463886151,It seems that there is a case unexpected error occurs but not correct error is not set.,"@komainu8
Could you review this PR again, please?
https://travis-ci.org/groonga/groonga/builds/493243339 passed.",True,{}
groonga/groonga,https://github.com/groonga/groonga,899,2019-02-04T08:20:52Z,2019-04-26T05:43:53Z,2019-05-22T04:47:12Z,MERGED,True,285,17,7,https://github.com/kenhys,table: add missing check for unexpected error case,19,[],https://github.com/groonga/groonga/pull/899,https://github.com/kenhys,4,https://github.com/groonga/groonga/pull/899#issuecomment-465850774,It seems that there is a case unexpected error occurs but not correct error is not set.,"I've fixed the issue.
@komainu8 Could you review again?",True,{}
groonga/groonga,https://github.com/groonga/groonga,899,2019-02-04T08:20:52Z,2019-04-26T05:43:53Z,2019-05-22T04:47:12Z,MERGED,True,285,17,7,https://github.com/kenhys,table: add missing check for unexpected error case,19,[],https://github.com/groonga/groonga/pull/899,https://github.com/komainu8,5,https://github.com/groonga/groonga/pull/899#issuecomment-465857855,It seems that there is a case unexpected error occurs but not correct error is not set.,LGTM 👍,True,{}
groonga/groonga,https://github.com/groonga/groonga,899,2019-02-04T08:20:52Z,2019-04-26T05:43:53Z,2019-05-22T04:47:12Z,MERGED,True,285,17,7,https://github.com/kenhys,table: add missing check for unexpected error case,19,[],https://github.com/groonga/groonga/pull/899,https://github.com/kenhys,6,https://github.com/groonga/groonga/pull/899#issuecomment-482369307,It seems that there is a case unexpected error occurs but not correct error is not set.,"@kou could you review again, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,899,2019-02-04T08:20:52Z,2019-04-26T05:43:53Z,2019-05-22T04:47:12Z,MERGED,True,285,17,7,https://github.com/kenhys,table: add missing check for unexpected error case,19,[],https://github.com/groonga/groonga/pull/899,https://github.com/kenhys,7,https://github.com/groonga/groonga/pull/899#issuecomment-483521836,It seems that there is a case unexpected error occurs but not correct error is not set.,"@kou could you review this PR again, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,899,2019-02-04T08:20:52Z,2019-04-26T05:43:53Z,2019-05-22T04:47:12Z,MERGED,True,285,17,7,https://github.com/kenhys,table: add missing check for unexpected error case,19,[],https://github.com/groonga/groonga/pull/899,https://github.com/kenhys,8,https://github.com/groonga/groonga/pull/899#issuecomment-486043591,It seems that there is a case unexpected error occurs but not correct error is not set.,"@kou thanks. I've rebased and fixed based on your feedbacks.
Could you review again, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,899,2019-02-04T08:20:52Z,2019-04-26T05:43:53Z,2019-05-22T04:47:12Z,MERGED,True,285,17,7,https://github.com/kenhys,table: add missing check for unexpected error case,19,[],https://github.com/groonga/groonga/pull/899,https://github.com/kenhys,9,https://github.com/groonga/groonga/pull/899#issuecomment-486588307,It seems that there is a case unexpected error occurs but not correct error is not set.,"@kou I've rebased and fixed again. could you review, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,899,2019-02-04T08:20:52Z,2019-04-26T05:43:53Z,2019-05-22T04:47:12Z,MERGED,True,285,17,7,https://github.com/kenhys,table: add missing check for unexpected error case,19,[],https://github.com/groonga/groonga/pull/899,https://github.com/kenhys,10,https://github.com/groonga/groonga/pull/899#issuecomment-486919536,It seems that there is a case unexpected error occurs but not correct error is not set.,"@kou Thanks!
I've rebased and fixed to follow other grn_inspect family, could you review again, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,899,2019-02-04T08:20:52Z,2019-04-26T05:43:53Z,2019-05-22T04:47:12Z,MERGED,True,285,17,7,https://github.com/kenhys,table: add missing check for unexpected error case,19,[],https://github.com/groonga/groonga/pull/899,https://github.com/kenhys,11,https://github.com/groonga/groonga/pull/899#issuecomment-486931260,It seems that there is a case unexpected error occurs but not correct error is not set.,"@kou  Thanks! I've fixed to remove needless temporary buffer.
Could you review it again, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,899,2019-02-04T08:20:52Z,2019-04-26T05:43:53Z,2019-05-22T04:47:12Z,MERGED,True,285,17,7,https://github.com/kenhys,table: add missing check for unexpected error case,19,[],https://github.com/groonga/groonga/pull/899,https://github.com/kenhys,12,https://github.com/groonga/groonga/pull/899#issuecomment-486932966,It seems that there is a case unexpected error occurs but not correct error is not set.,@kou  I've fixed to #<key (nil) ...> style.,True,{}
groonga/groonga,https://github.com/groonga/groonga,904,2019-02-10T13:08:39Z,2019-02-26T23:45:33Z,2019-02-26T23:48:49Z,MERGED,True,1,1,1,https://github.com/komainu8,Modify for suppressing a warning that C4018,1,[],https://github.com/groonga/groonga/pull/904,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/904,"A type of variable ""i"" is int and a type of variable ""n_floating_threads"" is uint32_t.
So, if the size of the value of ""n_floating_threads"" over the size of ""int"", ""i"" occurs overflow.","A type of variable ""i"" is int and a type of variable ""n_floating_threads"" is uint32_t.
So, if the size of the value of ""n_floating_threads"" over the size of ""int"", ""i"" occurs overflow.",True,{}
groonga/groonga,https://github.com/groonga/groonga,904,2019-02-10T13:08:39Z,2019-02-26T23:45:33Z,2019-02-26T23:48:49Z,MERGED,True,1,1,1,https://github.com/komainu8,Modify for suppressing a warning that C4018,1,[],https://github.com/groonga/groonga/pull/904,https://github.com/kou,2,https://github.com/groonga/groonga/pull/904#issuecomment-467662451,"A type of variable ""i"" is int and a type of variable ""n_floating_threads"" is uint32_t.
So, if the size of the value of ""n_floating_threads"" over the size of ""int"", ""i"" occurs overflow.",Thanks.,True,{}
groonga/groonga,https://github.com/groonga/groonga,908,2019-02-25T07:31:13Z,2019-02-26T02:28:29Z,2019-04-03T08:10:31Z,MERGED,True,7,7,1,https://github.com/kenhys,test windows fix for command line test,5,[],https://github.com/groonga/groonga/pull/908,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/908,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,908,2019-02-25T07:31:13Z,2019-02-26T02:28:29Z,2019-04-03T08:10:31Z,MERGED,True,7,7,1,https://github.com/kenhys,test windows fix for command line test,5,[],https://github.com/groonga/groonga/pull/908,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/908#issuecomment-466935050,,"@kou
I've fixed it based on feedback. 46a2639",True,{}
groonga/groonga,https://github.com/groonga/groonga,908,2019-02-25T07:31:13Z,2019-02-26T02:28:29Z,2019-04-03T08:10:31Z,MERGED,True,7,7,1,https://github.com/kenhys,test windows fix for command line test,5,[],https://github.com/groonga/groonga/pull/908,https://github.com/kenhys,3,https://github.com/groonga/groonga/pull/908#issuecomment-467251935,,"@kou
I've fixed feedback by efd5251 and  9a5b9ae",True,{}
groonga/groonga,https://github.com/groonga/groonga,908,2019-02-25T07:31:13Z,2019-02-26T02:28:29Z,2019-04-03T08:10:31Z,MERGED,True,7,7,1,https://github.com/kenhys,test windows fix for command line test,5,[],https://github.com/groonga/groonga/pull/908,https://github.com/kou,4,https://github.com/groonga/groonga/pull/908#issuecomment-467268058,,Thanks. I've merged.,True,{}
groonga/groonga,https://github.com/groonga/groonga,909,2019-02-25T14:39:02Z,2019-02-27T05:55:01Z,2019-02-27T23:05:40Z,MERGED,True,6,3,1,https://github.com/shiro615,Fix build error on macOS,1,[],https://github.com/groonga/groonga/pull/909,https://github.com/shiro615,1,https://github.com/groonga/groonga/pull/909,"I read http://groonga.org/ja/docs/contribution/development/build/unix_autotools.html.
I run make on macOS Mojave 10.14.3.
I got the following result.
arrow.cpp:745:8: error: no matching function for call to 'check_status'
  if (!grnarrow::check_status(ctx,
       ^~~~~~~~~~~~~~~~~~~~~~
arrow.cpp:55:12: note: candidate function not viable: no known conversion from
      'std::__1::basic_ostringstream<char, std::__1::char_traits<char>,
      std::__1::allocator<char> >' to 'const char *' for 3rd argument
  grn_bool check_status(grn_ctx *ctx,
           ^
arrow.cpp:68:12: note: candidate function not viable: no known conversion from
      'std::__1::basic_ostringstream<char, std::__1::char_traits<char>,
      std::__1::allocator<char> >' to 'std::ostream &'
      (aka 'basic_ostream<char> &') for 3rd argument
  grn_bool check_status(grn_ctx *ctx,
           ^
arrow.cpp:766:10: error: no matching function for call to 'check_status'
    if (!grnarrow::check_status(ctx,
         ^~~~~~~~~~~~~~~~~~~~~~
arrow.cpp:55:12: note: candidate function not viable: no known conversion from
      'std::__1::basic_ostringstream<char, std::__1::char_traits<char>,
      std::__1::allocator<char> >' to 'const char *' for 3rd argument
  grn_bool check_status(grn_ctx *ctx,
           ^
arrow.cpp:68:12: note: candidate function not viable: no known conversion from
      'std::__1::basic_ostringstream<char, std::__1::char_traits<char>,
      std::__1::allocator<char> >' to 'std::ostream &'
      (aka 'basic_ostream<char> &') for 3rd argument
  grn_bool check_status(grn_ctx *ctx,
           ^
arrow.cpp:833:8: error: no matching function for call to 'check_status'
  if (!grnarrow::check_status(ctx,
       ^~~~~~~~~~~~~~~~~~~~~~
arrow.cpp:55:12: note: candidate function not viable: no known conversion from
      'std::__1::basic_stringstream<char, std::__1::char_traits<char>,
      std::__1::allocator<char> >' to 'const char *' for 3rd argument
  grn_bool check_status(grn_ctx *ctx,
           ^
arrow.cpp:68:12: note: candidate function not viable: no known conversion from
      'std::__1::basic_stringstream<char, std::__1::char_traits<char>,
      std::__1::allocator<char> >' to 'std::ostream &'
      (aka 'basic_ostream<char> &') for 3rd argument
  grn_bool check_status(grn_ctx *ctx,

This PR fixes it.","I read http://groonga.org/ja/docs/contribution/development/build/unix_autotools.html.
I run make on macOS Mojave 10.14.3.
I got the following result.
arrow.cpp:745:8: error: no matching function for call to 'check_status'
  if (!grnarrow::check_status(ctx,
       ^~~~~~~~~~~~~~~~~~~~~~
arrow.cpp:55:12: note: candidate function not viable: no known conversion from
      'std::__1::basic_ostringstream<char, std::__1::char_traits<char>,
      std::__1::allocator<char> >' to 'const char *' for 3rd argument
  grn_bool check_status(grn_ctx *ctx,
           ^
arrow.cpp:68:12: note: candidate function not viable: no known conversion from
      'std::__1::basic_ostringstream<char, std::__1::char_traits<char>,
      std::__1::allocator<char> >' to 'std::ostream &'
      (aka 'basic_ostream<char> &') for 3rd argument
  grn_bool check_status(grn_ctx *ctx,
           ^
arrow.cpp:766:10: error: no matching function for call to 'check_status'
    if (!grnarrow::check_status(ctx,
         ^~~~~~~~~~~~~~~~~~~~~~
arrow.cpp:55:12: note: candidate function not viable: no known conversion from
      'std::__1::basic_ostringstream<char, std::__1::char_traits<char>,
      std::__1::allocator<char> >' to 'const char *' for 3rd argument
  grn_bool check_status(grn_ctx *ctx,
           ^
arrow.cpp:68:12: note: candidate function not viable: no known conversion from
      'std::__1::basic_ostringstream<char, std::__1::char_traits<char>,
      std::__1::allocator<char> >' to 'std::ostream &'
      (aka 'basic_ostream<char> &') for 3rd argument
  grn_bool check_status(grn_ctx *ctx,
           ^
arrow.cpp:833:8: error: no matching function for call to 'check_status'
  if (!grnarrow::check_status(ctx,
       ^~~~~~~~~~~~~~~~~~~~~~
arrow.cpp:55:12: note: candidate function not viable: no known conversion from
      'std::__1::basic_stringstream<char, std::__1::char_traits<char>,
      std::__1::allocator<char> >' to 'const char *' for 3rd argument
  grn_bool check_status(grn_ctx *ctx,
           ^
arrow.cpp:68:12: note: candidate function not viable: no known conversion from
      'std::__1::basic_stringstream<char, std::__1::char_traits<char>,
      std::__1::allocator<char> >' to 'std::ostream &'
      (aka 'basic_ostream<char> &') for 3rd argument
  grn_bool check_status(grn_ctx *ctx,

This PR fixes it.",True,{}
groonga/groonga,https://github.com/groonga/groonga,909,2019-02-25T14:39:02Z,2019-02-27T05:55:01Z,2019-02-27T23:05:40Z,MERGED,True,6,3,1,https://github.com/shiro615,Fix build error on macOS,1,[],https://github.com/groonga/groonga/pull/909,https://github.com/kou,2,https://github.com/groonga/groonga/pull/909#issuecomment-467696884,"I read http://groonga.org/ja/docs/contribution/development/build/unix_autotools.html.
I run make on macOS Mojave 10.14.3.
I got the following result.
arrow.cpp:745:8: error: no matching function for call to 'check_status'
  if (!grnarrow::check_status(ctx,
       ^~~~~~~~~~~~~~~~~~~~~~
arrow.cpp:55:12: note: candidate function not viable: no known conversion from
      'std::__1::basic_ostringstream<char, std::__1::char_traits<char>,
      std::__1::allocator<char> >' to 'const char *' for 3rd argument
  grn_bool check_status(grn_ctx *ctx,
           ^
arrow.cpp:68:12: note: candidate function not viable: no known conversion from
      'std::__1::basic_ostringstream<char, std::__1::char_traits<char>,
      std::__1::allocator<char> >' to 'std::ostream &'
      (aka 'basic_ostream<char> &') for 3rd argument
  grn_bool check_status(grn_ctx *ctx,
           ^
arrow.cpp:766:10: error: no matching function for call to 'check_status'
    if (!grnarrow::check_status(ctx,
         ^~~~~~~~~~~~~~~~~~~~~~
arrow.cpp:55:12: note: candidate function not viable: no known conversion from
      'std::__1::basic_ostringstream<char, std::__1::char_traits<char>,
      std::__1::allocator<char> >' to 'const char *' for 3rd argument
  grn_bool check_status(grn_ctx *ctx,
           ^
arrow.cpp:68:12: note: candidate function not viable: no known conversion from
      'std::__1::basic_ostringstream<char, std::__1::char_traits<char>,
      std::__1::allocator<char> >' to 'std::ostream &'
      (aka 'basic_ostream<char> &') for 3rd argument
  grn_bool check_status(grn_ctx *ctx,
           ^
arrow.cpp:833:8: error: no matching function for call to 'check_status'
  if (!grnarrow::check_status(ctx,
       ^~~~~~~~~~~~~~~~~~~~~~
arrow.cpp:55:12: note: candidate function not viable: no known conversion from
      'std::__1::basic_stringstream<char, std::__1::char_traits<char>,
      std::__1::allocator<char> >' to 'const char *' for 3rd argument
  grn_bool check_status(grn_ctx *ctx,
           ^
arrow.cpp:68:12: note: candidate function not viable: no known conversion from
      'std::__1::basic_stringstream<char, std::__1::char_traits<char>,
      std::__1::allocator<char> >' to 'std::ostream &'
      (aka 'basic_ostream<char> &') for 3rd argument
  grn_bool check_status(grn_ctx *ctx,

This PR fixes it.","@cosmo0920 It's done at https://github.com/groonga/groonga/blob/master/configure.ac#L89-L90
You need to install autoconf-archive: https://github.com/groonga/groonga/blob/master/Brewfile#L1",True,{'THUMBS_UP': ['https://github.com/cosmo0920']}
groonga/groonga,https://github.com/groonga/groonga,909,2019-02-25T14:39:02Z,2019-02-27T05:55:01Z,2019-02-27T23:05:40Z,MERGED,True,6,3,1,https://github.com/shiro615,Fix build error on macOS,1,[],https://github.com/groonga/groonga/pull/909,https://github.com/cosmo0920,3,https://github.com/groonga/groonga/pull/909#issuecomment-467697752,"I read http://groonga.org/ja/docs/contribution/development/build/unix_autotools.html.
I run make on macOS Mojave 10.14.3.
I got the following result.
arrow.cpp:745:8: error: no matching function for call to 'check_status'
  if (!grnarrow::check_status(ctx,
       ^~~~~~~~~~~~~~~~~~~~~~
arrow.cpp:55:12: note: candidate function not viable: no known conversion from
      'std::__1::basic_ostringstream<char, std::__1::char_traits<char>,
      std::__1::allocator<char> >' to 'const char *' for 3rd argument
  grn_bool check_status(grn_ctx *ctx,
           ^
arrow.cpp:68:12: note: candidate function not viable: no known conversion from
      'std::__1::basic_ostringstream<char, std::__1::char_traits<char>,
      std::__1::allocator<char> >' to 'std::ostream &'
      (aka 'basic_ostream<char> &') for 3rd argument
  grn_bool check_status(grn_ctx *ctx,
           ^
arrow.cpp:766:10: error: no matching function for call to 'check_status'
    if (!grnarrow::check_status(ctx,
         ^~~~~~~~~~~~~~~~~~~~~~
arrow.cpp:55:12: note: candidate function not viable: no known conversion from
      'std::__1::basic_ostringstream<char, std::__1::char_traits<char>,
      std::__1::allocator<char> >' to 'const char *' for 3rd argument
  grn_bool check_status(grn_ctx *ctx,
           ^
arrow.cpp:68:12: note: candidate function not viable: no known conversion from
      'std::__1::basic_ostringstream<char, std::__1::char_traits<char>,
      std::__1::allocator<char> >' to 'std::ostream &'
      (aka 'basic_ostream<char> &') for 3rd argument
  grn_bool check_status(grn_ctx *ctx,
           ^
arrow.cpp:833:8: error: no matching function for call to 'check_status'
  if (!grnarrow::check_status(ctx,
       ^~~~~~~~~~~~~~~~~~~~~~
arrow.cpp:55:12: note: candidate function not viable: no known conversion from
      'std::__1::basic_stringstream<char, std::__1::char_traits<char>,
      std::__1::allocator<char> >' to 'const char *' for 3rd argument
  grn_bool check_status(grn_ctx *ctx,
           ^
arrow.cpp:68:12: note: candidate function not viable: no known conversion from
      'std::__1::basic_stringstream<char, std::__1::char_traits<char>,
      std::__1::allocator<char> >' to 'std::ostream &'
      (aka 'basic_ostream<char> &') for 3rd argument
  grn_bool check_status(grn_ctx *ctx,

This PR fixes it.","It's done at https://github.com/groonga/groonga/blob/master/configure.ac#L89-L90
You need to install autoconf-archive: https://github.com/groonga/groonga/blob/master/Brewfile#L1

Oops! Thanks for the tips. :)",True,{}
groonga/groonga,https://github.com/groonga/groonga,909,2019-02-25T14:39:02Z,2019-02-27T05:55:01Z,2019-02-27T23:05:40Z,MERGED,True,6,3,1,https://github.com/shiro615,Fix build error on macOS,1,[],https://github.com/groonga/groonga/pull/909,https://github.com/komainu8,4,https://github.com/groonga/groonga/pull/909#issuecomment-467721397,"I read http://groonga.org/ja/docs/contribution/development/build/unix_autotools.html.
I run make on macOS Mojave 10.14.3.
I got the following result.
arrow.cpp:745:8: error: no matching function for call to 'check_status'
  if (!grnarrow::check_status(ctx,
       ^~~~~~~~~~~~~~~~~~~~~~
arrow.cpp:55:12: note: candidate function not viable: no known conversion from
      'std::__1::basic_ostringstream<char, std::__1::char_traits<char>,
      std::__1::allocator<char> >' to 'const char *' for 3rd argument
  grn_bool check_status(grn_ctx *ctx,
           ^
arrow.cpp:68:12: note: candidate function not viable: no known conversion from
      'std::__1::basic_ostringstream<char, std::__1::char_traits<char>,
      std::__1::allocator<char> >' to 'std::ostream &'
      (aka 'basic_ostream<char> &') for 3rd argument
  grn_bool check_status(grn_ctx *ctx,
           ^
arrow.cpp:766:10: error: no matching function for call to 'check_status'
    if (!grnarrow::check_status(ctx,
         ^~~~~~~~~~~~~~~~~~~~~~
arrow.cpp:55:12: note: candidate function not viable: no known conversion from
      'std::__1::basic_ostringstream<char, std::__1::char_traits<char>,
      std::__1::allocator<char> >' to 'const char *' for 3rd argument
  grn_bool check_status(grn_ctx *ctx,
           ^
arrow.cpp:68:12: note: candidate function not viable: no known conversion from
      'std::__1::basic_ostringstream<char, std::__1::char_traits<char>,
      std::__1::allocator<char> >' to 'std::ostream &'
      (aka 'basic_ostream<char> &') for 3rd argument
  grn_bool check_status(grn_ctx *ctx,
           ^
arrow.cpp:833:8: error: no matching function for call to 'check_status'
  if (!grnarrow::check_status(ctx,
       ^~~~~~~~~~~~~~~~~~~~~~
arrow.cpp:55:12: note: candidate function not viable: no known conversion from
      'std::__1::basic_stringstream<char, std::__1::char_traits<char>,
      std::__1::allocator<char> >' to 'const char *' for 3rd argument
  grn_bool check_status(grn_ctx *ctx,
           ^
arrow.cpp:68:12: note: candidate function not viable: no known conversion from
      'std::__1::basic_stringstream<char, std::__1::char_traits<char>,
      std::__1::allocator<char> >' to 'std::ostream &'
      (aka 'basic_ostream<char> &') for 3rd argument
  grn_bool check_status(grn_ctx *ctx,

This PR fixes it.","Thank you for your PR!
LGTM 👍
@kenhys Could you confirm this PR, please？",True,{}
groonga/groonga,https://github.com/groonga/groonga,909,2019-02-25T14:39:02Z,2019-02-27T05:55:01Z,2019-02-27T23:05:40Z,MERGED,True,6,3,1,https://github.com/shiro615,Fix build error on macOS,1,[],https://github.com/groonga/groonga/pull/909,https://github.com/kou,5,https://github.com/groonga/groonga/pull/909#issuecomment-467734334,"I read http://groonga.org/ja/docs/contribution/development/build/unix_autotools.html.
I run make on macOS Mojave 10.14.3.
I got the following result.
arrow.cpp:745:8: error: no matching function for call to 'check_status'
  if (!grnarrow::check_status(ctx,
       ^~~~~~~~~~~~~~~~~~~~~~
arrow.cpp:55:12: note: candidate function not viable: no known conversion from
      'std::__1::basic_ostringstream<char, std::__1::char_traits<char>,
      std::__1::allocator<char> >' to 'const char *' for 3rd argument
  grn_bool check_status(grn_ctx *ctx,
           ^
arrow.cpp:68:12: note: candidate function not viable: no known conversion from
      'std::__1::basic_ostringstream<char, std::__1::char_traits<char>,
      std::__1::allocator<char> >' to 'std::ostream &'
      (aka 'basic_ostream<char> &') for 3rd argument
  grn_bool check_status(grn_ctx *ctx,
           ^
arrow.cpp:766:10: error: no matching function for call to 'check_status'
    if (!grnarrow::check_status(ctx,
         ^~~~~~~~~~~~~~~~~~~~~~
arrow.cpp:55:12: note: candidate function not viable: no known conversion from
      'std::__1::basic_ostringstream<char, std::__1::char_traits<char>,
      std::__1::allocator<char> >' to 'const char *' for 3rd argument
  grn_bool check_status(grn_ctx *ctx,
           ^
arrow.cpp:68:12: note: candidate function not viable: no known conversion from
      'std::__1::basic_ostringstream<char, std::__1::char_traits<char>,
      std::__1::allocator<char> >' to 'std::ostream &'
      (aka 'basic_ostream<char> &') for 3rd argument
  grn_bool check_status(grn_ctx *ctx,
           ^
arrow.cpp:833:8: error: no matching function for call to 'check_status'
  if (!grnarrow::check_status(ctx,
       ^~~~~~~~~~~~~~~~~~~~~~
arrow.cpp:55:12: note: candidate function not viable: no known conversion from
      'std::__1::basic_stringstream<char, std::__1::char_traits<char>,
      std::__1::allocator<char> >' to 'const char *' for 3rd argument
  grn_bool check_status(grn_ctx *ctx,
           ^
arrow.cpp:68:12: note: candidate function not viable: no known conversion from
      'std::__1::basic_stringstream<char, std::__1::char_traits<char>,
      std::__1::allocator<char> >' to 'std::ostream &'
      (aka 'basic_ostream<char> &') for 3rd argument
  grn_bool check_status(grn_ctx *ctx,

This PR fixes it.","Thanks.
I've merged.",True,{}
groonga/groonga,https://github.com/groonga/groonga,910,2019-03-13T23:53:42Z,2019-03-18T01:47:17Z,2019-11-06T01:32:47Z,CLOSED,False,232,1,4,https://github.com/komainu8,[WIP] select: add support for loading result to table,1,[],https://github.com/groonga/groonga/pull/910,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/910,"Added new options:

load_table
load_columns
load_values","Added new options:

load_table
load_columns
load_values",True,{}
groonga/groonga,https://github.com/groonga/groonga,910,2019-03-13T23:53:42Z,2019-03-18T01:47:17Z,2019-11-06T01:32:47Z,CLOSED,False,232,1,4,https://github.com/komainu8,[WIP] select: add support for loading result to table,1,[],https://github.com/groonga/groonga/pull/910,https://github.com/kou,2,https://github.com/groonga/groonga/pull/910#issuecomment-473741119,"Added new options:

load_table
load_columns
load_values",Done.,True,{}
groonga/groonga,https://github.com/groonga/groonga,911,2019-03-15T17:12:08Z,2019-03-18T05:37:07Z,2019-03-18T05:37:07Z,MERGED,True,1,0,1,https://github.com/HashidaTKS,fix memory leak when logical_range_filter returns no records.,1,[],https://github.com/groonga/groonga/pull/911,https://github.com/HashidaTKS,1,https://github.com/groonga/groonga/pull/911,logical_range_filterで結果が0件だった場合に作成する一時テーブルがtemporary_tablesに追加されておらず、context.close時の解放対象になっていなかったため、temporary_tablesに追加するよう修正。,logical_range_filterで結果が0件だった場合に作成する一時テーブルがtemporary_tablesに追加されておらず、context.close時の解放対象になっていなかったため、temporary_tablesに追加するよう修正。,True,{}
groonga/groonga,https://github.com/groonga/groonga,911,2019-03-15T17:12:08Z,2019-03-18T05:37:07Z,2019-03-18T05:37:07Z,MERGED,True,1,0,1,https://github.com/HashidaTKS,fix memory leak when logical_range_filter returns no records.,1,[],https://github.com/groonga/groonga/pull/911,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/911#issuecomment-473773083,logical_range_filterで結果が0件だった場合に作成する一時テーブルがtemporary_tablesに追加されておらず、context.close時の解放対象になっていなかったため、temporary_tablesに追加するよう修正。,@kou 私と @kenhys  のレビューが終わりましたので、レビューをお願いします。,True,{}
groonga/groonga,https://github.com/groonga/groonga,913,2019-03-20T05:45:03Z,2019-03-20T09:00:44Z,2019-11-06T01:32:21Z,MERGED,True,73,8,3,https://github.com/komainu8,normalizer: use GRN_CHAR_TYPE,3,[],https://github.com/groonga/groonga/pull/913,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/913,"Because char_type is sometimes OR operated with GRN_CHAR_BLANK.
Therefore, when load data that there is whitespace after KATAKANA,
load data are not normalize.
Because KATAKANA before whitespace is operated OR with GRN_CHAR_BLANK,
it can not be decided as KATAKANA.
Fix issues #912","Because char_type is sometimes OR operated with GRN_CHAR_BLANK.
Therefore, when load data that there is whitespace after KATAKANA,
load data are not normalize.
Because KATAKANA before whitespace is operated OR with GRN_CHAR_BLANK,
it can not be decided as KATAKANA.
Fix issues #912",True,{}
groonga/groonga,https://github.com/groonga/groonga,913,2019-03-20T05:45:03Z,2019-03-20T09:00:44Z,2019-11-06T01:32:21Z,MERGED,True,73,8,3,https://github.com/komainu8,normalizer: use GRN_CHAR_TYPE,3,[],https://github.com/groonga/groonga/pull/913,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/913#issuecomment-474704427,"Because char_type is sometimes OR operated with GRN_CHAR_BLANK.
Therefore, when load data that there is whitespace after KATAKANA,
load data are not normalize.
Because KATAKANA before whitespace is operated OR with GRN_CHAR_BLANK,
it can not be decided as KATAKANA.
Fix issues #912","@kou Could you review this PR, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,913,2019-03-20T05:45:03Z,2019-03-20T09:00:44Z,2019-11-06T01:32:21Z,MERGED,True,73,8,3,https://github.com/komainu8,normalizer: use GRN_CHAR_TYPE,3,[],https://github.com/groonga/groonga/pull/913,https://github.com/komainu8,3,https://github.com/groonga/groonga/pull/913#issuecomment-474739168,"Because char_type is sometimes OR operated with GRN_CHAR_BLANK.
Therefore, when load data that there is whitespace after KATAKANA,
load data are not normalize.
Because KATAKANA before whitespace is operated OR with GRN_CHAR_BLANK,
it can not be decided as KATAKANA.
Fix issues #912",@kou Thank you for your comments. I've fixed them.,True,{}
groonga/groonga,https://github.com/groonga/groonga,913,2019-03-20T05:45:03Z,2019-03-20T09:00:44Z,2019-11-06T01:32:21Z,MERGED,True,73,8,3,https://github.com/komainu8,normalizer: use GRN_CHAR_TYPE,3,[],https://github.com/groonga/groonga/pull/913,https://github.com/kou,4,https://github.com/groonga/groonga/pull/913#issuecomment-474743607,"Because char_type is sometimes OR operated with GRN_CHAR_BLANK.
Therefore, when load data that there is whitespace after KATAKANA,
load data are not normalize.
Because KATAKANA before whitespace is operated OR with GRN_CHAR_BLANK,
it can not be decided as KATAKANA.
Fix issues #912",I've merged but we should also have a test for test/command/suite/normalizers/nfkc100/.,True,{}
groonga/groonga,https://github.com/groonga/groonga,914,2019-03-21T23:27:24Z,2019-03-26T08:27:54Z,2019-11-06T01:31:06Z,CLOSED,False,20,0,1,https://github.com/komainu8,[WIP] ii: add check for destination chunk area,1,[],https://github.com/groonga/groonga/pull/914,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/914,"Because there is a problem that crash when a destination chunk area isn't enough.
If the destination chunk area isn't enough, we expand its area and output log.
TODO: Test","Because there is a problem that crash when a destination chunk area isn't enough.
If the destination chunk area isn't enough, we expand its area and output log.
TODO: Test",True,{}
groonga/groonga,https://github.com/groonga/groonga,914,2019-03-21T23:27:24Z,2019-03-26T08:27:54Z,2019-11-06T01:31:06Z,CLOSED,False,20,0,1,https://github.com/komainu8,[WIP] ii: add check for destination chunk area,1,[],https://github.com/groonga/groonga/pull/914,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/914#issuecomment-476521966,"Because there is a problem that crash when a destination chunk area isn't enough.
If the destination chunk area isn't enough, we expand its area and output log.
TODO: Test","This feature already implemented by 3d10711.
Therefore, this PR close.",True,{}
groonga/groonga,https://github.com/groonga/groonga,917,2019-04-02T08:51:41Z,2019-04-03T01:17:26Z,2019-04-03T08:04:42Z,MERGED,True,20,0,1,https://github.com/kenhys,windows: install missing pdb files,1,[],https://github.com/groonga/groonga/pull/917,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/917,"string and vector pdb files are exists, but time, number, index_column, math pdb files are missing","string and vector pdb files are exists, but time, number, index_column, math pdb files are missing",True,{}
groonga/groonga,https://github.com/groonga/groonga,917,2019-04-02T08:51:41Z,2019-04-03T01:17:26Z,2019-04-03T08:04:42Z,MERGED,True,20,0,1,https://github.com/kenhys,windows: install missing pdb files,1,[],https://github.com/groonga/groonga/pull/917,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/917#issuecomment-479281415,"string and vector pdb files are exists, but time, number, index_column, math pdb files are missing","@kou could you review this PR, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,918,2019-04-02T09:33:30Z,2019-04-03T01:18:09Z,2019-04-03T08:04:29Z,MERGED,True,6,0,1,https://github.com/kenhys,appveyor: install groonga-admin,1,[],https://github.com/groonga/groonga/pull/918,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/918,Because MinGW bundles groonga-admin.,Because MinGW bundles groonga-admin.,True,{}
groonga/groonga,https://github.com/groonga/groonga,918,2019-04-02T09:33:30Z,2019-04-03T01:18:09Z,2019-04-03T08:04:29Z,MERGED,True,6,0,1,https://github.com/kenhys,appveyor: install groonga-admin,1,[],https://github.com/groonga/groonga/pull/918,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/918#issuecomment-479281514,Because MinGW bundles groonga-admin.,"Thanks!
@kou could you review this PR, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,919,2019-04-02T10:13:11Z,2019-04-03T01:54:52Z,2019-04-03T08:04:14Z,MERGED,True,4,0,1,https://github.com/kenhys,appveyor: bundle groonga-normalizer-mysql,1,[],https://github.com/groonga/groonga/pull/919,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/919,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,919,2019-04-02T10:13:11Z,2019-04-03T01:54:52Z,2019-04-03T08:04:14Z,MERGED,True,4,0,1,https://github.com/kenhys,appveyor: bundle groonga-normalizer-mysql,1,[],https://github.com/groonga/groonga/pull/919,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/919#issuecomment-479281627,,"Thanks. @komainu8
@kou could you review this PR, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,919,2019-04-02T10:13:11Z,2019-04-03T01:54:52Z,2019-04-03T08:04:14Z,MERGED,True,4,0,1,https://github.com/kenhys,appveyor: bundle groonga-normalizer-mysql,1,[],https://github.com/groonga/groonga/pull/919,https://github.com/kenhys,3,https://github.com/groonga/groonga/pull/919#issuecomment-479292602,,"@kou as #917 #918 was merged, I've rebased and fixed your feedback!",True,{}
groonga/groonga,https://github.com/groonga/groonga,920,2019-04-02T10:14:08Z,2019-04-03T01:44:16Z,2019-04-03T08:04:51Z,CLOSED,False,11,0,1,https://github.com/kenhys,appveyor: install license files under share\license,1,[],https://github.com/groonga/groonga/pull/920,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/920,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,920,2019-04-02T10:14:08Z,2019-04-03T01:44:16Z,2019-04-03T08:04:51Z,CLOSED,False,11,0,1,https://github.com/kenhys,appveyor: install license files under share\license,1,[],https://github.com/groonga/groonga/pull/920,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/920#issuecomment-479281747,,"@komainu8  thanks!
@kou could you review this PR, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,920,2019-04-02T10:14:08Z,2019-04-03T01:44:16Z,2019-04-03T08:04:51Z,CLOSED,False,11,0,1,https://github.com/kenhys,appveyor: install license files under share\license,1,[],https://github.com/groonga/groonga/pull/920,https://github.com/kenhys,3,https://github.com/groonga/groonga/pull/920#issuecomment-479291820,,I've got a feedback that share/license is not common way. so withdraw this PR.,True,{}
groonga/groonga,https://github.com/groonga/groonga,921,2019-04-03T05:10:15Z,2019-04-03T06:18:38Z,2019-04-03T08:04:03Z,MERGED,True,3,1,1,https://github.com/kenhys,appveyor: fix wrong argument to move,1,[],https://github.com/groonga/groonga/pull/921,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/921,"In the previous version, it causes the following error.
The filename, directory name, or volume label syntax is incorrect.","In the previous version, it causes the following error.
The filename, directory name, or volume label syntax is incorrect.",True,{}
groonga/groonga,https://github.com/groonga/groonga,921,2019-04-03T05:10:15Z,2019-04-03T06:18:38Z,2019-04-03T08:04:03Z,MERGED,True,3,1,1,https://github.com/kenhys,appveyor: fix wrong argument to move,1,[],https://github.com/groonga/groonga/pull/921,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/921#issuecomment-479354608,"In the previous version, it causes the following error.
The filename, directory name, or volume label syntax is incorrect.","@kou could you review this PR, please?
Now It's ready for creating an artifact again.
https://ci.appveyor.com/project/kenhys/groonga/builds/23556931/job/slrgb3lpca006v6b/artifacts",True,{}
groonga/groonga,https://github.com/groonga/groonga,922,2019-04-03T08:45:43Z,2019-04-04T00:47:13Z,2019-04-04T00:53:19Z,MERGED,True,3,1,1,https://github.com/kenhys,cmake message pack: install missing message pack header files,1,[],https://github.com/groonga/groonga/pull/922,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/922,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,922,2019-04-03T08:45:43Z,2019-04-04T00:47:13Z,2019-04-04T00:53:19Z,MERGED,True,3,1,1,https://github.com/kenhys,cmake message pack: install missing message pack header files,1,[],https://github.com/groonga/groonga/pull/922,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/922#issuecomment-479400546,,"It works as expected.
https://ci.appveyor.com/project/kenhys/groonga/builds/23560885/job/dbj99s1pa2uctl7s",True,{}
groonga/groonga,https://github.com/groonga/groonga,923,2019-04-03T09:23:43Z,2019-04-04T03:59:22Z,2019-05-22T05:32:26Z,MERGED,True,7,3,1,https://github.com/kenhys,cmake: install missing *.hpp,1,[],https://github.com/groonga/groonga/pull/923,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/923,groonga.hpp and arrow.hpp are missing.,groonga.hpp and arrow.hpp are missing.,True,{}
groonga/groonga,https://github.com/groonga/groonga,923,2019-04-03T09:23:43Z,2019-04-04T03:59:22Z,2019-05-22T05:32:26Z,MERGED,True,7,3,1,https://github.com/kenhys,cmake: install missing *.hpp,1,[],https://github.com/groonga/groonga/pull/923,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/923#issuecomment-479722007,groonga.hpp and arrow.hpp are missing.,"@komainu8 Thanks!
I've fixed it.
Also, I've found the problem that groonga.h is installed to a wrong path, so I've also fixed it.",True,{}
groonga/groonga,https://github.com/groonga/groonga,923,2019-04-03T09:23:43Z,2019-04-04T03:59:22Z,2019-05-22T05:32:26Z,MERGED,True,7,3,1,https://github.com/kenhys,cmake: install missing *.hpp,1,[],https://github.com/groonga/groonga/pull/923,https://github.com/kenhys,3,https://github.com/groonga/groonga/pull/923#issuecomment-479728182,groonga.hpp and arrow.hpp are missing.,"Hmm, not completed yet... it need more fixes.",True,{}
groonga/groonga,https://github.com/groonga/groonga,923,2019-04-03T09:23:43Z,2019-04-04T03:59:22Z,2019-05-22T05:32:26Z,MERGED,True,7,3,1,https://github.com/kenhys,cmake: install missing *.hpp,1,[],https://github.com/groonga/groonga/pull/923,https://github.com/kenhys,4,https://github.com/groonga/groonga/pull/923#issuecomment-479730098,groonga.hpp and arrow.hpp are missing.,"61de0f9 is not needed.
@komainu8 now, ready for review again.",True,{}
groonga/groonga,https://github.com/groonga/groonga,923,2019-04-03T09:23:43Z,2019-04-04T03:59:22Z,2019-05-22T05:32:26Z,MERGED,True,7,3,1,https://github.com/kenhys,cmake: install missing *.hpp,1,[],https://github.com/groonga/groonga/pull/923,https://github.com/kenhys,5,https://github.com/groonga/groonga/pull/923#issuecomment-479741305,groonga.hpp and arrow.hpp are missing.,Thanks!,True,{}
groonga/groonga,https://github.com/groonga/groonga,924,2019-04-04T09:37:01Z,2019-04-05T05:38:22Z,2019-05-22T05:31:54Z,MERGED,True,3,1,2,https://github.com/kenhys,cmake windows: enable USE_EXACT_ALLOC_COUNT,4,[],https://github.com/groonga/groonga/pull/924,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/924,"WIP: Without USE_EXACT_ALLOC_COUNT, grn_fin(N) reports unexpected leaks.","WIP: Without USE_EXACT_ALLOC_COUNT, grn_fin(N) reports unexpected leaks.",True,{}
groonga/groonga,https://github.com/groonga/groonga,924,2019-04-04T09:37:01Z,2019-04-05T05:38:22Z,2019-05-22T05:31:54Z,MERGED,True,3,1,2,https://github.com/kenhys,cmake windows: enable USE_EXACT_ALLOC_COUNT,4,[],https://github.com/groonga/groonga/pull/924,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/924#issuecomment-480142628,"WIP: Without USE_EXACT_ALLOC_COUNT, grn_fin(N) reports unexpected leaks.","with intrinsic bultin function, command test will succeeds",True,{}
groonga/groonga,https://github.com/groonga/groonga,924,2019-04-04T09:37:01Z,2019-04-05T05:38:22Z,2019-05-22T05:31:54Z,MERGED,True,3,1,2,https://github.com/kenhys,cmake windows: enable USE_EXACT_ALLOC_COUNT,4,[],https://github.com/groonga/groonga/pull/924,https://github.com/kenhys,3,https://github.com/groonga/groonga/pull/924#issuecomment-480145681,"WIP: Without USE_EXACT_ALLOC_COUNT, grn_fin(N) reports unexpected leaks.","@kou could you review this PR, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,924,2019-04-04T09:37:01Z,2019-04-05T05:38:22Z,2019-05-22T05:31:54Z,MERGED,True,3,1,2,https://github.com/kenhys,cmake windows: enable USE_EXACT_ALLOC_COUNT,4,[],https://github.com/groonga/groonga/pull/924,https://github.com/kenhys,4,https://github.com/groonga/groonga/pull/924#issuecomment-480153879,"WIP: Without USE_EXACT_ALLOC_COUNT, grn_fin(N) reports unexpected leaks.",@kou I've fixed based on your feedback!,True,{}
groonga/groonga,https://github.com/groonga/groonga,925,2019-04-04T13:47:14Z,2019-04-16T05:33:46Z,2019-04-16T05:33:47Z,CLOSED,False,9,0,1,https://github.com/kenhys,appveyor: enable http command test,1,[],https://github.com/groonga/groonga/pull/925,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/925,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,925,2019-04-04T13:47:14Z,2019-04-16T05:33:46Z,2019-04-16T05:33:47Z,CLOSED,False,9,0,1,https://github.com/kenhys,appveyor: enable http command test,1,[],https://github.com/groonga/groonga/pull/925,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/925#issuecomment-481529912,,@komainu8  I've rebased and fixed to use multiple worker.,True,{}
groonga/groonga,https://github.com/groonga/groonga,925,2019-04-04T13:47:14Z,2019-04-16T05:33:46Z,2019-04-16T05:33:47Z,CLOSED,False,9,0,1,https://github.com/kenhys,appveyor: enable http command test,1,[],https://github.com/groonga/groonga/pull/925,https://github.com/komainu8,3,https://github.com/groonga/groonga/pull/925#issuecomment-482484204,,"@kenhys
The following test fails.
https://ci.appveyor.com/project/groonga/groonga/builds/23730567/job/ey22198bc9qwydew#L8235",True,{}
groonga/groonga,https://github.com/groonga/groonga,925,2019-04-04T13:47:14Z,2019-04-16T05:33:46Z,2019-04-16T05:33:47Z,CLOSED,False,9,0,1,https://github.com/kenhys,appveyor: enable http command test,1,[],https://github.com/groonga/groonga/pull/925,https://github.com/kenhys,4,https://github.com/groonga/groonga/pull/925#issuecomment-482486701,,"@komainu8
Hmm, https://ci.appveyor.com/project/groonga/groonga/builds/23730567
some works, but not all.
So, It seems that multiple worker is not appropriate...",True,{}
groonga/groonga,https://github.com/groonga/groonga,925,2019-04-04T13:47:14Z,2019-04-16T05:33:46Z,2019-04-16T05:33:47Z,CLOSED,False,9,0,1,https://github.com/kenhys,appveyor: enable http command test,1,[],https://github.com/groonga/groonga/pull/925,https://github.com/kenhys,5,https://github.com/groonga/groonga/pull/925#issuecomment-483489629,,@komainu8  I've rebased and reverted multiple worker commit.,True,{}
groonga/groonga,https://github.com/groonga/groonga,925,2019-04-04T13:47:14Z,2019-04-16T05:33:46Z,2019-04-16T05:33:47Z,CLOSED,False,9,0,1,https://github.com/kenhys,appveyor: enable http command test,1,[],https://github.com/groonga/groonga/pull/925,https://github.com/kenhys,6,https://github.com/groonga/groonga/pull/925#issuecomment-483517501,,https://ci.appveyor.com/project/groonga/groonga/builds/23876216 indicates that it can't be enabled http test because of execution time limit. (1h over) 😢,True,{}
groonga/groonga,https://github.com/groonga/groonga,926,2019-04-05T06:19:26Z,2019-04-05T06:32:07Z,2019-04-16T02:50:01Z,MERGED,True,6,6,1,https://github.com/kenhys,appveyor: change build order,1,[],https://github.com/groonga/groonga/pull/926,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/926,"build with VS2017, VS2015, VS2013.","build with VS2017, VS2015, VS2013.",True,{}
groonga/groonga,https://github.com/groonga/groonga,927,2019-04-05T07:25:54Z,2019-04-05T07:41:05Z,2019-05-22T04:46:25Z,MERGED,True,1,0,1,https://github.com/kenhys,appveyor: create version.sh to detect commit,1,[],https://github.com/groonga/groonga/pull/927,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/927,"Without this commit, only base_version is used.","Without this commit, only base_version is used.",True,{}
groonga/groonga,https://github.com/groonga/groonga,928,2019-04-08T09:11:26Z,2019-04-10T01:14:40Z,2019-04-16T02:49:51Z,MERGED,True,6,6,1,https://github.com/kenhys,"appveyor: change build order (amd64, x86)",1,[],https://github.com/groonga/groonga/pull/928,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/928,It reduces waiting time to check amd64 packages,It reduces waiting time to check amd64 packages,True,{}
groonga/groonga,https://github.com/groonga/groonga,929,2019-04-09T01:15:43Z,2019-04-25T07:19:30Z,2019-05-22T04:44:40Z,MERGED,True,501,4,2,https://github.com/kenhys,doc: add inspect documentation,2,[],https://github.com/groonga/groonga/pull/929,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/929,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,929,2019-04-09T01:15:43Z,2019-04-25T07:19:30Z,2019-05-22T04:44:40Z,MERGED,True,501,4,2,https://github.com/kenhys,doc: add inspect documentation,2,[],https://github.com/groonga/groonga/pull/929,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/929#issuecomment-486499961,,"@komainu8  I've fixed based on your review, could you review again, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,930,2019-04-09T03:28:57Z,2019-04-16T02:44:50Z,2019-05-22T05:30:42Z,CLOSED,False,164,1,12,https://github.com/kenhys,add io_flush --dependent option,7,[],https://github.com/groonga/groonga/pull/930,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/930,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,930,2019-04-09T03:28:57Z,2019-04-16T02:44:50Z,2019-05-22T05:30:42Z,CLOSED,False,164,1,12,https://github.com/kenhys,add io_flush --dependent option,7,[],https://github.com/groonga/groonga/pull/930,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/930#issuecomment-483489769,,"No need to work, so close it.",True,{}
groonga/groonga,https://github.com/groonga/groonga,931,2019-04-09T06:20:29Z,2019-05-16T08:10:03Z,2019-05-17T00:38:04Z,MERGED,True,581,188,16,https://github.com/komainu8,"snippet, snippet_html: add an option for changing return value for no match",24,[],https://github.com/groonga/groonga/pull/931,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/931,"I added this feature for backward compatibility.
We can change the return value for no match by the second argument of snippet_html.
The default return value is ""null"".
For example, if we specify ""[]"" in the second argument,  return values is ""[]"" for no match.
If we specify none in the second argument, return value is ""null"" for no match.","I added this feature for backward compatibility.
We can change the return value for no match by the second argument of snippet_html.
The default return value is ""null"".
For example, if we specify ""[]"" in the second argument,  return values is ""[]"" for no match.
If we specify none in the second argument, return value is ""null"" for no match.",True,{}
groonga/groonga,https://github.com/groonga/groonga,931,2019-04-09T06:20:29Z,2019-05-16T08:10:03Z,2019-05-17T00:38:04Z,MERGED,True,581,188,16,https://github.com/komainu8,"snippet, snippet_html: add an option for changing return value for no match",24,[],https://github.com/groonga/groonga/pull/931,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/931#issuecomment-481118134,"I added this feature for backward compatibility.
We can change the return value for no match by the second argument of snippet_html.
The default return value is ""null"".
For example, if we specify ""[]"" in the second argument,  return values is ""[]"" for no match.
If we specify none in the second argument, return value is ""null"" for no match.","@kenhys Could you review this PR, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,931,2019-04-09T06:20:29Z,2019-05-16T08:10:03Z,2019-05-17T00:38:04Z,MERGED,True,581,188,16,https://github.com/komainu8,"snippet, snippet_html: add an option for changing return value for no match",24,[],https://github.com/groonga/groonga/pull/931,https://github.com/kenhys,3,https://github.com/groonga/groonga/pull/931#issuecomment-481120339,"I added this feature for backward compatibility.
We can change the return value for no match by the second argument of snippet_html.
The default return value is ""null"".
For example, if we specify ""[]"" in the second argument,  return values is ""[]"" for no match.
If we specify none in the second argument, return value is ""null"" for no match.","@komainu8 I'll review it, just a moment, please.",True,{}
groonga/groonga,https://github.com/groonga/groonga,931,2019-04-09T06:20:29Z,2019-05-16T08:10:03Z,2019-05-17T00:38:04Z,MERGED,True,581,188,16,https://github.com/komainu8,"snippet, snippet_html: add an option for changing return value for no match",24,[],https://github.com/groonga/groonga/pull/931,https://github.com/komainu8,4,https://github.com/groonga/groonga/pull/931#issuecomment-481131547,"I added this feature for backward compatibility.
We can change the return value for no match by the second argument of snippet_html.
The default return value is ""null"".
For example, if we specify ""[]"" in the second argument,  return values is ""[]"" for no match.
If we specify none in the second argument, return value is ""null"" for no match.","@kou Could you review this PR, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,931,2019-04-09T06:20:29Z,2019-05-16T08:10:03Z,2019-05-17T00:38:04Z,MERGED,True,581,188,16,https://github.com/komainu8,"snippet, snippet_html: add an option for changing return value for no match",24,[],https://github.com/groonga/groonga/pull/931,https://github.com/kou,5,https://github.com/groonga/groonga/pull/931#issuecomment-481489504,"I added this feature for backward compatibility.
We can change the return value for no match by the second argument of snippet_html.
The default return value is ""null"".
For example, if we specify ""[]"" in the second argument,  return values is ""[]"" for no match.
If we specify none in the second argument, return value is ""null"" for no match.","This is too ad-hoc. For example, we can't use ""[]"" string (not empty vector) as the default value.
We should implement real solution.",True,{}
groonga/groonga,https://github.com/groonga/groonga,931,2019-04-09T06:20:29Z,2019-05-16T08:10:03Z,2019-05-17T00:38:04Z,MERGED,True,581,188,16,https://github.com/komainu8,"snippet, snippet_html: add an option for changing return value for no match",24,[],https://github.com/groonga/groonga/pull/931,https://github.com/komainu8,6,https://github.com/groonga/groonga/pull/931#issuecomment-483128461,"I added this feature for backward compatibility.
We can change the return value for no match by the second argument of snippet_html.
The default return value is ""null"".
For example, if we specify ""[]"" in the second argument,  return values is ""[]"" for no match.
If we specify none in the second argument, return value is ""null"" for no match.","@kou Thank you for your comment.
I've fixed to use an ""option object"".",True,{}
groonga/groonga,https://github.com/groonga/groonga,931,2019-04-09T06:20:29Z,2019-05-16T08:10:03Z,2019-05-17T00:38:04Z,MERGED,True,581,188,16,https://github.com/komainu8,"snippet, snippet_html: add an option for changing return value for no match",24,[],https://github.com/groonga/groonga/pull/931,https://github.com/komainu8,7,https://github.com/groonga/groonga/pull/931#issuecomment-483649284,"I added this feature for backward compatibility.
We can change the return value for no match by the second argument of snippet_html.
The default return value is ""null"".
For example, if we specify ""[]"" in the second argument,  return values is ""[]"" for no match.
If we specify none in the second argument, return value is ""null"" for no match.","@kou Thank you for your comments.
I've fixed them.",True,{}
groonga/groonga,https://github.com/groonga/groonga,931,2019-04-09T06:20:29Z,2019-05-16T08:10:03Z,2019-05-17T00:38:04Z,MERGED,True,581,188,16,https://github.com/komainu8,"snippet, snippet_html: add an option for changing return value for no match",24,[],https://github.com/groonga/groonga/pull/931,https://github.com/komainu8,8,https://github.com/groonga/groonga/pull/931#issuecomment-483876797,"I added this feature for backward compatibility.
We can change the return value for no match by the second argument of snippet_html.
The default return value is ""null"".
For example, if we specify ""[]"" in the second argument,  return values is ""[]"" for no match.
If we specify none in the second argument, return value is ""null"" for no match.","Ah...Sorry.
This PR is error now in Travis CI.
I request a review again after I'll fix it.",True,{}
groonga/groonga,https://github.com/groonga/groonga,931,2019-04-09T06:20:29Z,2019-05-16T08:10:03Z,2019-05-17T00:38:04Z,MERGED,True,581,188,16,https://github.com/komainu8,"snippet, snippet_html: add an option for changing return value for no match",24,[],https://github.com/groonga/groonga/pull/931,https://github.com/komainu8,9,https://github.com/groonga/groonga/pull/931#issuecomment-483975790,"I added this feature for backward compatibility.
We can change the return value for no match by the second argument of snippet_html.
The default return value is ""null"".
For example, if we specify ""[]"" in the second argument,  return values is ""[]"" for no match.
If we specify none in the second argument, return value is ""null"" for no match.","@kou Thank you for your comments.
I've fixed them.",True,{}
groonga/groonga,https://github.com/groonga/groonga,931,2019-04-09T06:20:29Z,2019-05-16T08:10:03Z,2019-05-17T00:38:04Z,MERGED,True,581,188,16,https://github.com/komainu8,"snippet, snippet_html: add an option for changing return value for no match",24,[],https://github.com/groonga/groonga/pull/931,https://github.com/kou,10,https://github.com/groonga/groonga/pull/931#issuecomment-483979932,"I added this feature for backward compatibility.
We can change the return value for no match by the second argument of snippet_html.
The default return value is ""null"".
For example, if we specify ""[]"" in the second argument,  return values is ""[]"" for no match.
If we specify none in the second argument, return value is ""null"" for no match.",Could you rebase on master?,True,{}
groonga/groonga,https://github.com/groonga/groonga,931,2019-04-09T06:20:29Z,2019-05-16T08:10:03Z,2019-05-17T00:38:04Z,MERGED,True,581,188,16,https://github.com/komainu8,"snippet, snippet_html: add an option for changing return value for no match",24,[],https://github.com/groonga/groonga/pull/931,https://github.com/komainu8,11,https://github.com/groonga/groonga/pull/931#issuecomment-483988208,"I added this feature for backward compatibility.
We can change the return value for no match by the second argument of snippet_html.
The default return value is ""null"".
For example, if we specify ""[]"" in the second argument,  return values is ""[]"" for no match.
If we specify none in the second argument, return value is ""null"" for no match.",I've finished rebasing on master.,True,{}
groonga/groonga,https://github.com/groonga/groonga,931,2019-04-09T06:20:29Z,2019-05-16T08:10:03Z,2019-05-17T00:38:04Z,MERGED,True,581,188,16,https://github.com/komainu8,"snippet, snippet_html: add an option for changing return value for no match",24,[],https://github.com/groonga/groonga/pull/931,https://github.com/komainu8,12,https://github.com/groonga/groonga/pull/931#issuecomment-483997246,"I added this feature for backward compatibility.
We can change the return value for no match by the second argument of snippet_html.
The default return value is ""null"".
For example, if we specify ""[]"" in the second argument,  return values is ""[]"" for no match.
If we specify none in the second argument, return value is ""null"" for no match.","@kou Thank you for your comments.
I've fixed them.",True,{}
groonga/groonga,https://github.com/groonga/groonga,931,2019-04-09T06:20:29Z,2019-05-16T08:10:03Z,2019-05-17T00:38:04Z,MERGED,True,581,188,16,https://github.com/komainu8,"snippet, snippet_html: add an option for changing return value for no match",24,[],https://github.com/groonga/groonga/pull/931,https://github.com/kou,13,https://github.com/groonga/groonga/pull/931#issuecomment-484001747,"I added this feature for backward compatibility.
We can change the return value for no match by the second argument of snippet_html.
The default return value is ""null"".
For example, if we specify ""[]"" in the second argument,  return values is ""[]"" for no match.
If we specify none in the second argument, return value is ""null"" for no match.",Could you remove the change for lib/grn_ecmascript.c? Is it needed?,True,{}
groonga/groonga,https://github.com/groonga/groonga,931,2019-04-09T06:20:29Z,2019-05-16T08:10:03Z,2019-05-17T00:38:04Z,MERGED,True,581,188,16,https://github.com/komainu8,"snippet, snippet_html: add an option for changing return value for no match",24,[],https://github.com/groonga/groonga/pull/931,https://github.com/komainu8,14,https://github.com/groonga/groonga/pull/931#issuecomment-484016760,"I added this feature for backward compatibility.
We can change the return value for no match by the second argument of snippet_html.
The default return value is ""null"".
For example, if we specify ""[]"" in the second argument,  return values is ""[]"" for no match.
If we specify none in the second argument, return value is ""null"" for no match.","@kou Thank you for your comments.
I've added a test case for the error case and remove the needless change.",True,{}
groonga/groonga,https://github.com/groonga/groonga,931,2019-04-09T06:20:29Z,2019-05-16T08:10:03Z,2019-05-17T00:38:04Z,MERGED,True,581,188,16,https://github.com/komainu8,"snippet, snippet_html: add an option for changing return value for no match",24,[],https://github.com/groonga/groonga/pull/931,https://github.com/kou,15,https://github.com/groonga/groonga/pull/931#issuecomment-484022763,"I added this feature for backward compatibility.
We can change the return value for no match by the second argument of snippet_html.
The default return value is ""null"".
For example, if we specify ""[]"" in the second argument,  return values is ""[]"" for no match.
If we specify none in the second argument, return value is ""null"" for no match.","Could you also add empty option case? snippet_html(""..."", {})",True,{}
groonga/groonga,https://github.com/groonga/groonga,931,2019-04-09T06:20:29Z,2019-05-16T08:10:03Z,2019-05-17T00:38:04Z,MERGED,True,581,188,16,https://github.com/komainu8,"snippet, snippet_html: add an option for changing return value for no match",24,[],https://github.com/groonga/groonga/pull/931,https://github.com/komainu8,16,https://github.com/groonga/groonga/pull/931#issuecomment-484411500,"I added this feature for backward compatibility.
We can change the return value for no match by the second argument of snippet_html.
The default return value is ""null"".
For example, if we specify ""[]"" in the second argument,  return values is ""[]"" for no match.
If we specify none in the second argument, return value is ""null"" for no match.","I've added a test for empty option.
However, Groonga is crash when executing a test for invalid option case.
I'll fix it.",True,{}
groonga/groonga,https://github.com/groonga/groonga,931,2019-04-09T06:20:29Z,2019-05-16T08:10:03Z,2019-05-17T00:38:04Z,MERGED,True,581,188,16,https://github.com/komainu8,"snippet, snippet_html: add an option for changing return value for no match",24,[],https://github.com/groonga/groonga/pull/931,https://github.com/kou,17,https://github.com/groonga/groonga/pull/931#issuecomment-492965115,"I added this feature for backward compatibility.
We can change the return value for no match by the second argument of snippet_html.
The default return value is ""null"".
For example, if we specify ""[]"" in the second argument,  return values is ""[]"" for no match.
If we specify none in the second argument, return value is ""null"" for no match.",I've fixed remained problems.,True,{}
groonga/groonga,https://github.com/groonga/groonga,932,2019-04-09T07:06:19Z,2019-04-18T02:42:00Z,2019-05-22T05:31:16Z,MERGED,True,7,3,2,https://github.com/kenhys,appveyor: enable testing with japanese directory,2,[],https://github.com/groonga/groonga/pull/932,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/932,"On Appveyor,  directory name is recognized unicode escape
sequence. so it should be unescaped correctly.","On Appveyor,  directory name is recognized unicode escape
sequence. so it should be unescaped correctly.",True,{}
groonga/groonga,https://github.com/groonga/groonga,932,2019-04-09T07:06:19Z,2019-04-18T02:42:00Z,2019-05-22T05:31:16Z,MERGED,True,7,3,2,https://github.com/kenhys,appveyor: enable testing with japanese directory,2,[],https://github.com/groonga/groonga/pull/932,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/932#issuecomment-481129694,"On Appveyor,  directory name is recognized unicode escape
sequence. so it should be unescaped correctly.","test has passed
https://ci.appveyor.com/project/kenhys/groonga/builds/23699671/job/6p2i79x3hk0oxikb",True,{}
groonga/groonga,https://github.com/groonga/groonga,932,2019-04-09T07:06:19Z,2019-04-18T02:42:00Z,2019-05-22T05:31:16Z,MERGED,True,7,3,2,https://github.com/kenhys,appveyor: enable testing with japanese directory,2,[],https://github.com/groonga/groonga/pull/932,https://github.com/kenhys,3,https://github.com/groonga/groonga/pull/932#issuecomment-481571854,"On Appveyor,  directory name is recognized unicode escape
sequence. so it should be unescaped correctly.","@komainu8 I've fixed it. It is ok.
https://ci.appveyor.com/project/kenhys/groonga/builds/23732395/job/06b9apan544hc1wy",True,{}
groonga/groonga,https://github.com/groonga/groonga,932,2019-04-09T07:06:19Z,2019-04-18T02:42:00Z,2019-05-22T05:31:16Z,MERGED,True,7,3,2,https://github.com/kenhys,appveyor: enable testing with japanese directory,2,[],https://github.com/groonga/groonga/pull/932,https://github.com/kenhys,4,https://github.com/groonga/groonga/pull/932#issuecomment-481939886,"On Appveyor,  directory name is recognized unicode escape
sequence. so it should be unescaped correctly.","@komainu8 I've fixed it.
waiting https://ci.appveyor.com/project/kenhys/groonga/builds/23759695 test result again.",True,{}
groonga/groonga,https://github.com/groonga/groonga,933,2019-04-10T03:12:28Z,2019-04-16T02:40:29Z,2019-05-22T04:44:56Z,CLOSED,False,155,10,4,https://github.com/kenhys,doc: documentation about io_flush --dependent option,8,[],https://github.com/groonga/groonga/pull/933,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/933,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,933,2019-04-10T03:12:28Z,2019-04-16T02:40:29Z,2019-05-22T04:44:56Z,CLOSED,False,155,10,4,https://github.com/kenhys,doc: documentation about io_flush --dependent option,8,[],https://github.com/groonga/groonga/pull/933,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/933#issuecomment-482455064,,"@komainu8 implementation is not added yet, but in advance, draft review to get feedback is good manner.  could you do draft review?",True,{}
groonga/groonga,https://github.com/groonga/groonga,933,2019-04-10T03:12:28Z,2019-04-16T02:40:29Z,2019-05-22T04:44:56Z,CLOSED,False,155,10,4,https://github.com/kenhys,doc: documentation about io_flush --dependent option,8,[],https://github.com/groonga/groonga/pull/933,https://github.com/kenhys,3,https://github.com/groonga/groonga/pull/933#issuecomment-483489064,,"needless PR, so close.",True,{}
groonga/groonga,https://github.com/groonga/groonga,935,2019-04-11T02:11:03Z,2019-04-12T08:27:42Z,2019-04-16T02:50:15Z,MERGED,True,25,0,1,https://github.com/kenhys,appveyor: create VC++ runtime bundled package,1,[],https://github.com/groonga/groonga/pull/935,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/935,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,935,2019-04-11T02:11:03Z,2019-04-12T08:27:42Z,2019-04-16T02:50:15Z,MERGED,True,25,0,1,https://github.com/kenhys,appveyor: create VC++ runtime bundled package,1,[],https://github.com/groonga/groonga/pull/935,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/935#issuecomment-481983113,,"@komainu8 now ready for review!
https://ci.appveyor.com/project/kenhys/groonga/builds/23759554",True,{}
groonga/groonga,https://github.com/groonga/groonga,935,2019-04-11T02:11:03Z,2019-04-12T08:27:42Z,2019-04-16T02:50:15Z,MERGED,True,25,0,1,https://github.com/kenhys,appveyor: create VC++ runtime bundled package,1,[],https://github.com/groonga/groonga/pull/935,https://github.com/kenhys,3,https://github.com/groonga/groonga/pull/935#issuecomment-482444755,,"@komainu8 I've fixed code to predefined path to VC runtime directory.
could you review again, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,936,2019-04-12T05:10:32Z,2019-04-15T01:42:18Z,2019-04-15T01:42:18Z,MERGED,True,1,1,1,https://github.com/HashidaTKS,Correct writer write output type,1,[],https://github.com/groonga/groonga/pull/936,https://github.com/HashidaTKS,1,https://github.com/groonga/groonga/pull/936,"Correct output type of writer_write function in case target type is MRB_TT_FIXNUM.
The output type should be int64_t because the target type(mrb_int) can be int64_t.","Correct output type of writer_write function in case target type is MRB_TT_FIXNUM.
The output type should be int64_t because the target type(mrb_int) can be int64_t.",True,{}
groonga/groonga,https://github.com/groonga/groonga,936,2019-04-12T05:10:32Z,2019-04-15T01:42:18Z,2019-04-15T01:42:18Z,MERGED,True,1,1,1,https://github.com/HashidaTKS,Correct writer write output type,1,[],https://github.com/groonga/groonga/pull/936,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/936#issuecomment-482460371,"Correct output type of writer_write function in case target type is MRB_TT_FIXNUM.
The output type should be int64_t because the target type(mrb_int) can be int64_t.","Thank you for your pull request!
However, Could you modify the following tiny fix?
This pull request includes merge commit.
Therefore, would you these commits into a single commit as below, please?

git reset --soft HEAD~4
git stash
git remote add upstream git@github.com:groonga/groonga.git
git fetch upstream
git rebase upstream/master
git stash pop
git add lib/mrb/mrb_writer.c
git commit lib/mrb/mrb_writer.c
git push -f origin correct_writer_write_output_type",True,{}
groonga/groonga,https://github.com/groonga/groonga,936,2019-04-12T05:10:32Z,2019-04-15T01:42:18Z,2019-04-15T01:42:18Z,MERGED,True,1,1,1,https://github.com/HashidaTKS,Correct writer write output type,1,[],https://github.com/groonga/groonga/pull/936,https://github.com/HashidaTKS,3,https://github.com/groonga/groonga/pull/936#issuecomment-482474801,"Correct output type of writer_write function in case target type is MRB_TT_FIXNUM.
The output type should be int64_t because the target type(mrb_int) can be int64_t.",Sorry. I modified it.,True,{}
groonga/groonga,https://github.com/groonga/groonga,936,2019-04-12T05:10:32Z,2019-04-15T01:42:18Z,2019-04-15T01:42:18Z,MERGED,True,1,1,1,https://github.com/HashidaTKS,Correct writer write output type,1,[],https://github.com/groonga/groonga/pull/936,https://github.com/komainu8,4,https://github.com/groonga/groonga/pull/936#issuecomment-482475702,"Correct output type of writer_write function in case target type is MRB_TT_FIXNUM.
The output type should be int64_t because the target type(mrb_int) can be int64_t.","Thank you for fixing them!
LGTM 👍
@kenhys Could you review this pull request, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,936,2019-04-12T05:10:32Z,2019-04-15T01:42:18Z,2019-04-15T01:42:18Z,MERGED,True,1,1,1,https://github.com/HashidaTKS,Correct writer write output type,1,[],https://github.com/groonga/groonga/pull/936,https://github.com/komainu8,5,https://github.com/groonga/groonga/pull/936#issuecomment-483073633,"Correct output type of writer_write function in case target type is MRB_TT_FIXNUM.
The output type should be int64_t because the target type(mrb_int) can be int64_t.","@kou Could you review this pull request, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,937,2019-04-12T10:10:38Z,2019-04-15T09:00:03Z,2019-04-16T02:50:24Z,MERGED,True,52,0,4,https://github.com/kenhys,appveyor: add license notice about VC++ distributale code,1,[],https://github.com/groonga/groonga/pull/937,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/937,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,937,2019-04-12T10:10:38Z,2019-04-15T09:00:03Z,2019-04-16T02:50:24Z,MERGED,True,52,0,4,https://github.com/kenhys,appveyor: add license notice about VC++ distributale code,1,[],https://github.com/groonga/groonga/pull/937,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/937#issuecomment-482525391,,just waiting appveyor result.,True,{}
groonga/groonga,https://github.com/groonga/groonga,937,2019-04-12T10:10:38Z,2019-04-15T09:00:03Z,2019-04-16T02:50:24Z,MERGED,True,52,0,4,https://github.com/kenhys,appveyor: add license notice about VC++ distributale code,1,[],https://github.com/groonga/groonga/pull/937,https://github.com/kenhys,3,https://github.com/groonga/groonga/pull/937#issuecomment-483092934,,"@komainu8 , @kou
Is it enough to note about redistributable code? (Does it need more something?)",True,{}
groonga/groonga,https://github.com/groonga/groonga,937,2019-04-12T10:10:38Z,2019-04-15T09:00:03Z,2019-04-16T02:50:24Z,MERGED,True,52,0,4,https://github.com/kenhys,appveyor: add license notice about VC++ distributale code,1,[],https://github.com/groonga/groonga/pull/937,https://github.com/cosmo0920,4,https://github.com/groonga/groonga/pull/937#issuecomment-483136046,,@kenhys I've added suggested changes comments. Could you kindly take a look?,True,{}
groonga/groonga,https://github.com/groonga/groonga,937,2019-04-12T10:10:38Z,2019-04-15T09:00:03Z,2019-04-16T02:50:24Z,MERGED,True,52,0,4,https://github.com/kenhys,appveyor: add license notice about VC++ distributale code,1,[],https://github.com/groonga/groonga/pull/937,https://github.com/kenhys,5,https://github.com/groonga/groonga/pull/937#issuecomment-483141669,,Thanks! @cosmo0920 !,True,{}
groonga/groonga,https://github.com/groonga/groonga,937,2019-04-12T10:10:38Z,2019-04-15T09:00:03Z,2019-04-16T02:50:24Z,MERGED,True,52,0,4,https://github.com/kenhys,appveyor: add license notice about VC++ distributale code,1,[],https://github.com/groonga/groonga/pull/937,https://github.com/kenhys,6,https://github.com/groonga/groonga/pull/937#issuecomment-483146035,,"@komainu8 I've fixed link to them. (except vs2017, japanese edition is not published)",True,{}
groonga/groonga,https://github.com/groonga/groonga,938,2019-04-15T09:32:07Z,2019-04-17T09:08:49Z,2019-05-22T04:45:09Z,MERGED,True,377,50,2,https://github.com/kenhys,doc: add explanation about extended recursive behavior,8,[],https://github.com/groonga/groonga/pull/938,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/938,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,938,2019-04-15T09:32:07Z,2019-04-17T09:08:49Z,2019-05-22T04:45:09Z,MERGED,True,377,50,2,https://github.com/kenhys,doc: add explanation about extended recursive behavior,8,[],https://github.com/groonga/groonga/pull/938,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/938#issuecomment-483530875,,"@komainu8  I've fixed based on your feedback. Could you check it again, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,938,2019-04-15T09:32:07Z,2019-04-17T09:08:49Z,2019-05-22T04:45:09Z,MERGED,True,377,50,2,https://github.com/kenhys,doc: add explanation about extended recursive behavior,8,[],https://github.com/groonga/groonga/pull/938,https://github.com/kenhys,3,https://github.com/groonga/groonga/pull/938#issuecomment-483936930,,@komainu8 I've rewrite a document about recursive=dependent again.,True,{}
groonga/groonga,https://github.com/groonga/groonga,938,2019-04-15T09:32:07Z,2019-04-17T09:08:49Z,2019-05-22T04:45:09Z,MERGED,True,377,50,2,https://github.com/kenhys,doc: add explanation about extended recursive behavior,8,[],https://github.com/groonga/groonga/pull/938,https://github.com/kenhys,4,https://github.com/groonga/groonga/pull/938#issuecomment-483966177,,"@kou could you review this PR, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,938,2019-04-15T09:32:07Z,2019-04-17T09:08:49Z,2019-05-22T04:45:09Z,MERGED,True,377,50,2,https://github.com/kenhys,doc: add explanation about extended recursive behavior,8,[],https://github.com/groonga/groonga/pull/938,https://github.com/kenhys,5,https://github.com/groonga/groonga/pull/938#issuecomment-483998356,,"@kou, I've fixed based on your feedbacks!",True,{}
groonga/groonga,https://github.com/groonga/groonga,939,2019-04-16T03:19:55Z,2019-04-17T07:43:24Z,2019-05-22T05:31:35Z,MERGED,True,34,0,2,https://github.com/kenhys,test: add test about reference table,1,[],https://github.com/groonga/groonga/pull/939,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/939,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,939,2019-04-16T03:19:55Z,2019-04-17T07:43:24Z,2019-05-22T05:31:35Z,MERGED,True,34,0,2,https://github.com/kenhys,test: add test about reference table,1,[],https://github.com/groonga/groonga/pull/939,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/939#issuecomment-483521773,,"@kou could you review this PR, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,939,2019-04-16T03:19:55Z,2019-04-17T07:43:24Z,2019-05-22T05:31:35Z,MERGED,True,34,0,2,https://github.com/kenhys,test: add test about reference table,1,[],https://github.com/groonga/groonga/pull/939,https://github.com/kenhys,3,https://github.com/groonga/groonga/pull/939#issuecomment-483913237,,@kou I've fixed  test case based on recursive=dependent. (removed duplicated tests and tweak outout order),True,{}
groonga/groonga,https://github.com/groonga/groonga,939,2019-04-16T03:19:55Z,2019-04-17T07:43:24Z,2019-05-22T05:31:35Z,MERGED,True,34,0,2,https://github.com/kenhys,test: add test about reference table,1,[],https://github.com/groonga/groonga/pull/939,https://github.com/kenhys,4,https://github.com/groonga/groonga/pull/939#issuecomment-483968125,,@kou I've rebased && removed all redundant test case.,True,{}
groonga/groonga,https://github.com/groonga/groonga,940,2019-04-17T05:54:57Z,2019-04-22T08:10:49Z,2019-04-22T08:12:57Z,MERGED,True,2310,0,34,https://github.com/komainu8,test logical_select: add test for window function over shards,6,[],https://github.com/groonga/groonga/pull/940,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/940,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,940,2019-04-17T05:54:57Z,2019-04-22T08:10:49Z,2019-04-22T08:12:57Z,MERGED,True,2310,0,34,https://github.com/komainu8,test logical_select: add test for window function over shards,6,[],https://github.com/groonga/groonga/pull/940,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/940#issuecomment-483947484,,"@kenhys Could you review this PR, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,940,2019-04-17T05:54:57Z,2019-04-22T08:10:49Z,2019-04-22T08:12:57Z,MERGED,True,2310,0,34,https://github.com/komainu8,test logical_select: add test for window function over shards,6,[],https://github.com/groonga/groonga/pull/940,https://github.com/kenhys,3,https://github.com/groonga/groonga/pull/940#issuecomment-483950531,,I'll look it.,True,{}
groonga/groonga,https://github.com/groonga/groonga,940,2019-04-17T05:54:57Z,2019-04-22T08:10:49Z,2019-04-22T08:12:57Z,MERGED,True,2310,0,34,https://github.com/komainu8,test logical_select: add test for window function over shards,6,[],https://github.com/groonga/groonga/pull/940,https://github.com/komainu8,4,https://github.com/groonga/groonga/pull/940#issuecomment-484313785,,"@kou Could you review this PR, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,940,2019-04-17T05:54:57Z,2019-04-22T08:10:49Z,2019-04-22T08:12:57Z,MERGED,True,2310,0,34,https://github.com/komainu8,test logical_select: add test for window function over shards,6,[],https://github.com/groonga/groonga/pull/940,https://github.com/komainu8,5,https://github.com/groonga/groonga/pull/940#issuecomment-484750502,,"@kou Thank you for your comment.
I've fixed them.
I've added tests for case of different order ""sort keys"" and ""shard keys"".
I've fixed wrong window.sort_keyss in 5449d89",True,{}
groonga/groonga,https://github.com/groonga/groonga,940,2019-04-17T05:54:57Z,2019-04-22T08:10:49Z,2019-04-22T08:12:57Z,MERGED,True,2310,0,34,https://github.com/komainu8,test logical_select: add test for window function over shards,6,[],https://github.com/groonga/groonga/pull/940,https://github.com/komainu8,6,https://github.com/groonga/groonga/pull/940#issuecomment-485337182,,"@kou Thank you for your comments.
I've fixed them.",True,{}
groonga/groonga,https://github.com/groonga/groonga,940,2019-04-17T05:54:57Z,2019-04-22T08:10:49Z,2019-04-22T08:12:57Z,MERGED,True,2310,0,34,https://github.com/komainu8,test logical_select: add test for window function over shards,6,[],https://github.com/groonga/groonga/pull/940,https://github.com/komainu8,7,https://github.com/groonga/groonga/pull/940#issuecomment-485338901,,"Ah...Sorry.
There were still problems with these tests.
I request review again after I'll fix them.",True,{}
groonga/groonga,https://github.com/groonga/groonga,940,2019-04-17T05:54:57Z,2019-04-22T08:10:49Z,2019-04-22T08:12:57Z,MERGED,True,2310,0,34,https://github.com/komainu8,test logical_select: add test for window function over shards,6,[],https://github.com/groonga/groonga/pull/940,https://github.com/komainu8,8,https://github.com/groonga/groonga/pull/940#issuecomment-485344260,,@kou I've finished fixes.,True,{}
groonga/groonga,https://github.com/groonga/groonga,940,2019-04-17T05:54:57Z,2019-04-22T08:10:49Z,2019-04-22T08:12:57Z,MERGED,True,2310,0,34,https://github.com/komainu8,test logical_select: add test for window function over shards,6,[],https://github.com/groonga/groonga/pull/940,https://github.com/kou,9,https://github.com/groonga/groonga/pull/940#issuecomment-485344936,,Should we include document update in this pull request?,True,{}
groonga/groonga,https://github.com/groonga/groonga,940,2019-04-17T05:54:57Z,2019-04-22T08:10:49Z,2019-04-22T08:12:57Z,MERGED,True,2310,0,34,https://github.com/komainu8,test logical_select: add test for window function over shards,6,[],https://github.com/groonga/groonga/pull/940,https://github.com/komainu8,10,https://github.com/groonga/groonga/pull/940#issuecomment-485348155,,"This pull request is for adding test cases.
Therefore, in my opinion, we should separate those pull requests(this pull request and pull request for document update.).",True,{}
groonga/groonga,https://github.com/groonga/groonga,940,2019-04-17T05:54:57Z,2019-04-22T08:10:49Z,2019-04-22T08:12:57Z,MERGED,True,2310,0,34,https://github.com/komainu8,test logical_select: add test for window function over shards,6,[],https://github.com/groonga/groonga/pull/940,https://github.com/komainu8,11,https://github.com/groonga/groonga/pull/940#issuecomment-485356391,,@kou I've removed commit for document update in this pull request.,True,{}
groonga/groonga,https://github.com/groonga/groonga,941,2019-04-18T08:37:58Z,2019-04-22T23:20:32Z,2019-04-22T23:20:39Z,CLOSED,False,141,0,5,https://github.com/komainu8,NormalizerNFKC100: Add unify_kana_v_sounds option,1,[],https://github.com/groonga/groonga/pull/941,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/941,"This options normalize ゔぁゔぃゔゔぇゔぉ to ばびぶべぼ.
If combined with the unify_katakana_v_sounds option, for example, we can below terms to classify as the same things.

いゔぁんか
いばんか
イヴァンカ
イバンカ","This options normalize ゔぁゔぃゔゔぇゔぉ to ばびぶべぼ.
If combined with the unify_katakana_v_sounds option, for example, we can below terms to classify as the same things.

いゔぁんか
いばんか
イヴァンカ
イバンカ",True,{}
groonga/groonga,https://github.com/groonga/groonga,941,2019-04-18T08:37:58Z,2019-04-22T23:20:32Z,2019-04-22T23:20:39Z,CLOSED,False,141,0,5,https://github.com/komainu8,NormalizerNFKC100: Add unify_kana_v_sounds option,1,[],https://github.com/groonga/groonga/pull/941,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/941#issuecomment-484408992,"This options normalize ゔぁゔぃゔゔぇゔぉ to ばびぶべぼ.
If combined with the unify_katakana_v_sounds option, for example, we can below terms to classify as the same things.

いゔぁんか
いばんか
イヴァンカ
イバンカ","@kenhys Could you review this PR, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,941,2019-04-18T08:37:58Z,2019-04-22T23:20:32Z,2019-04-22T23:20:39Z,CLOSED,False,141,0,5,https://github.com/komainu8,NormalizerNFKC100: Add unify_kana_v_sounds option,1,[],https://github.com/groonga/groonga/pull/941,https://github.com/kou,3,https://github.com/groonga/groonga/pull/941#issuecomment-484721458,"This options normalize ゔぁゔぃゔゔぇゔぉ to ばびぶべぼ.
If combined with the unify_katakana_v_sounds option, for example, we can below terms to classify as the same things.

いゔぁんか
いばんか
イヴァンカ
イバンカ","We should provide unify_to_katakana option.
If we have unify_to_katakana, we can use both unify_katakana_v_sounds and unify_katakana_bu_sound.",True,{}
groonga/groonga,https://github.com/groonga/groonga,941,2019-04-18T08:37:58Z,2019-04-22T23:20:32Z,2019-04-22T23:20:39Z,CLOSED,False,141,0,5,https://github.com/komainu8,NormalizerNFKC100: Add unify_kana_v_sounds option,1,[],https://github.com/groonga/groonga/pull/941,https://github.com/komainu8,4,https://github.com/groonga/groonga/pull/941#issuecomment-484759481,"This options normalize ゔぁゔぃゔゔぇゔぉ to ばびぶべぼ.
If combined with the unify_katakana_v_sounds option, for example, we can below terms to classify as the same things.

いゔぁんか
いばんか
イヴァンカ
イバンカ","Could you teach me about the unify_to_katakana option?
Is it correct my below understand?
This option normalize hiragana to katakana.
For example, ゔぁゔぃゔゔぇゔぉ normalize to ヴァヴィヴヴェヴォ.
We can identify below terms by unify_to_katakana and unify_katakana_v_sounds.

いゔぁんか
いばんか
イヴァンカ
イバンカ




First, we apply unify_to_katakana.

いゔぁんか -> イヴァンカ
いばんか -> イバンカ
イヴァンカ -> イヴァンカ
イバンカ -> イバンカ



Second, we apply unify_katakana_v_sounds.

イヴァンカ -> イバンカ
イバンカ -> イバンカ",True,{}
groonga/groonga,https://github.com/groonga/groonga,941,2019-04-18T08:37:58Z,2019-04-22T23:20:32Z,2019-04-22T23:20:39Z,CLOSED,False,141,0,5,https://github.com/komainu8,NormalizerNFKC100: Add unify_kana_v_sounds option,1,[],https://github.com/groonga/groonga/pull/941,https://github.com/kou,5,https://github.com/groonga/groonga/pull/941#issuecomment-485040098,"This options normalize ゔぁゔぃゔゔぇゔぉ to ばびぶべぼ.
If combined with the unify_katakana_v_sounds option, for example, we can below terms to classify as the same things.

いゔぁんか
いばんか
イヴァンカ
イバンカ",Yes.,True,{}
groonga/groonga,https://github.com/groonga/groonga,941,2019-04-18T08:37:58Z,2019-04-22T23:20:32Z,2019-04-22T23:20:39Z,CLOSED,False,141,0,5,https://github.com/komainu8,NormalizerNFKC100: Add unify_kana_v_sounds option,1,[],https://github.com/groonga/groonga/pull/941,https://github.com/komainu8,6,https://github.com/groonga/groonga/pull/941#issuecomment-485586046,"This options normalize ゔぁゔぃゔゔぇゔぉ to ばびぶべぼ.
If combined with the unify_katakana_v_sounds option, for example, we can below terms to classify as the same things.

いゔぁんか
いばんか
イヴァンカ
イバンカ","@kou Thak you for your suggestion.
I'll make unify_to_katakana option.
Therefore, This PR close.",True,{}
groonga/groonga,https://github.com/groonga/groonga,942,2019-04-19T04:08:08Z,2019-04-23T02:18:01Z,2019-04-23T02:18:04Z,MERGED,True,399,8,8,https://github.com/komainu8,doc: add explanation about window function over shards,2,[],https://github.com/groonga/groonga/pull/942,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/942,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,942,2019-04-19T04:08:08Z,2019-04-23T02:18:01Z,2019-04-23T02:18:04Z,MERGED,True,399,8,8,https://github.com/komainu8,doc: add explanation about window function over shards,2,[],https://github.com/groonga/groonga/pull/942,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/942#issuecomment-484761559,,"@kenhys Could you review this PR, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,942,2019-04-19T04:08:08Z,2019-04-23T02:18:01Z,2019-04-23T02:18:04Z,MERGED,True,399,8,8,https://github.com/komainu8,doc: add explanation about window function over shards,2,[],https://github.com/groonga/groonga/pull/942,https://github.com/kenhys,3,https://github.com/groonga/groonga/pull/942#issuecomment-484768532,,I'll review it.,True,{}
groonga/groonga,https://github.com/groonga/groonga,942,2019-04-19T04:08:08Z,2019-04-23T02:18:01Z,2019-04-23T02:18:04Z,MERGED,True,399,8,8,https://github.com/komainu8,doc: add explanation about window function over shards,2,[],https://github.com/groonga/groonga/pull/942,https://github.com/komainu8,4,https://github.com/groonga/groonga/pull/942#issuecomment-485355804,,"@kenhys Thank you for your comments.
I've fixed them.",True,{}
groonga/groonga,https://github.com/groonga/groonga,943,2019-04-19T06:58:49Z,2019-04-22T00:29:57Z,2019-04-22T06:52:20Z,MERGED,True,187,0,4,https://github.com/komainu8,test logical_count: add test for window function over shards,1,[],https://github.com/groonga/groonga/pull/943,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/943,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,943,2019-04-19T06:58:49Z,2019-04-22T00:29:57Z,2019-04-22T06:52:20Z,MERGED,True,187,0,4,https://github.com/komainu8,test logical_count: add test for window function over shards,1,[],https://github.com/groonga/groonga/pull/943,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/943#issuecomment-484785953,,"@kou Could you review this PR, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,944,2019-04-19T08:12:06Z,2019-05-21T09:31:43Z,2019-05-22T04:46:50Z,MERGED,True,222,39,8,https://github.com/kenhys,Support grndb --log-flags,4,[],https://github.com/groonga/groonga/pull/944,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/944,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,944,2019-04-19T08:12:06Z,2019-05-21T09:31:43Z,2019-05-22T04:46:50Z,MERGED,True,222,39,8,https://github.com/kenhys,Support grndb --log-flags,4,[],https://github.com/groonga/groonga/pull/944,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/944#issuecomment-486111113,,"If kou/mruby-slop#1 is merged, this PR works as expected.",True,{}
groonga/groonga,https://github.com/groonga/groonga,944,2019-04-19T08:12:06Z,2019-05-21T09:31:43Z,2019-05-22T04:46:50Z,MERGED,True,222,39,8,https://github.com/kenhys,Support grndb --log-flags,4,[],https://github.com/groonga/groonga/pull/944,https://github.com/kenhys,3,https://github.com/groonga/groonga/pull/944#issuecomment-486517759,,@komainu8 I've rebased and added default test case. could you review again please?,True,{}
groonga/groonga,https://github.com/groonga/groonga,944,2019-04-19T08:12:06Z,2019-05-21T09:31:43Z,2019-05-22T04:46:50Z,MERGED,True,222,39,8,https://github.com/kenhys,Support grndb --log-flags,4,[],https://github.com/groonga/groonga/pull/944,https://github.com/kenhys,4,https://github.com/groonga/groonga/pull/944#issuecomment-486945742,,"now, mruby-slop supports slop 4.6.2. kou/mruby-slop@0aa5b83",True,{}
groonga/groonga,https://github.com/groonga/groonga,944,2019-04-19T08:12:06Z,2019-05-21T09:31:43Z,2019-05-22T04:46:50Z,MERGED,True,222,39,8,https://github.com/kenhys,Support grndb --log-flags,4,[],https://github.com/groonga/groonga/pull/944,https://github.com/kenhys,5,https://github.com/groonga/groonga/pull/944#issuecomment-486948833,,"To use latest mruby-slop, need to update vendor/mruby-source, but I've found that there is some incompatible changes are introduced.
/usr/bin/ld: ./.libs/libgroonga.so: undefined reference to `MKOP_A'
/usr/bin/ld: ./.libs/libgroonga.so: undefined reference to `GET_OPCODE'
/usr/bin/ld: ./.libs/libgroonga.so: undefined reference to `MKOP_AB'
collect2: error: ld returned 1 exit status

This incompatibility is introduced at mruby/mruby@891839b
The feature about keyword argument is supported after above commit, so need to support new bytecode implementation.
https://github.com/mruby/mruby/commits/stable?before=8ee516436b8d174a50764939bee23a442aa00b3f+661",True,{}
groonga/groonga,https://github.com/groonga/groonga,944,2019-04-19T08:12:06Z,2019-05-21T09:31:43Z,2019-05-22T04:46:50Z,MERGED,True,222,39,8,https://github.com/kenhys,Support grndb --log-flags,4,[],https://github.com/groonga/groonga/pull/944,https://github.com/kenhys,6,https://github.com/groonga/groonga/pull/944#issuecomment-486950199,,"And recent mruby-time split header file, so include path need to be updated build mruby.
diff --git a/vendor/mruby/Makefile.am b/vendor/mruby/Makefile.am
index c7c021ac4..e330469a2 100644
--- a/vendor/mruby/Makefile.am
+++ b/vendor/mruby/Makefile.am
@@ -11,7 +11,8 @@ DEFAULT_INCLUDES =                                            \
        -I$(srcdir)/../mruby-source/include                     \
        -I$(srcdir)/../mruby-source/src                         \
        -I$(srcdir)/../mruby-source/mrbgems/mruby-compiler/core \
-       -I$(srcdir)/../mruby-source/mrbgems/mruby-io/include
+       -I$(srcdir)/../mruby-source/mrbgems/mruby-io/include    \
+       -I$(srcdir)/../mruby-source/mrbgems/mruby-time/include",True,{}
groonga/groonga,https://github.com/groonga/groonga,944,2019-04-19T08:12:06Z,2019-05-21T09:31:43Z,2019-05-22T04:46:50Z,MERGED,True,222,39,8,https://github.com/kenhys,Support grndb --log-flags,4,[],https://github.com/groonga/groonga/pull/944,https://github.com/kenhys,7,https://github.com/groonga/groonga/pull/944#issuecomment-493380513,,"even though on only travis fails, now test passes on locally.",True,{}
groonga/groonga,https://github.com/groonga/groonga,944,2019-04-19T08:12:06Z,2019-05-21T09:31:43Z,2019-05-22T04:46:50Z,MERGED,True,222,39,8,https://github.com/kenhys,Support grndb --log-flags,4,[],https://github.com/groonga/groonga/pull/944,https://github.com/kenhys,8,https://github.com/groonga/groonga/pull/944#issuecomment-493380652,,"Could you review this PR, @kou",True,{}
groonga/groonga,https://github.com/groonga/groonga,944,2019-04-19T08:12:06Z,2019-05-21T09:31:43Z,2019-05-22T04:46:50Z,MERGED,True,222,39,8,https://github.com/kenhys,Support grndb --log-flags,4,[],https://github.com/groonga/groonga/pull/944,https://github.com/kou,9,https://github.com/groonga/groonga/pull/944#issuecomment-493381178,,"Could you rebase on master?
Most of CI failures will be fixed.",True,{}
groonga/groonga,https://github.com/groonga/groonga,944,2019-04-19T08:12:06Z,2019-05-21T09:31:43Z,2019-05-22T04:46:50Z,MERGED,True,222,39,8,https://github.com/kenhys,Support grndb --log-flags,4,[],https://github.com/groonga/groonga/pull/944,https://github.com/kenhys,10,https://github.com/groonga/groonga/pull/944#issuecomment-493866467,,"@kou Thanks, I've fixed based on your feedback.",True,{}
groonga/groonga,https://github.com/groonga/groonga,944,2019-04-19T08:12:06Z,2019-05-21T09:31:43Z,2019-05-22T04:46:50Z,MERGED,True,222,39,8,https://github.com/kenhys,Support grndb --log-flags,4,[],https://github.com/groonga/groonga/pull/944,https://github.com/kenhys,11,https://github.com/groonga/groonga/pull/944#issuecomment-494233130,,@kou I've fixed based on your suggestion. could you review again?,True,{}
groonga/groonga,https://github.com/groonga/groonga,944,2019-04-19T08:12:06Z,2019-05-21T09:31:43Z,2019-05-22T04:46:50Z,MERGED,True,222,39,8,https://github.com/kenhys,Support grndb --log-flags,4,[],https://github.com/groonga/groonga/pull/944,https://github.com/kenhys,12,https://github.com/groonga/groonga/pull/944#issuecomment-494298005,,@kou I've fixed them!,True,{}
groonga/groonga,https://github.com/groonga/groonga,945,2019-04-19T09:09:48Z,2019-04-23T06:51:22Z,2019-05-22T04:45:26Z,MERGED,True,49,1,2,https://github.com/kenhys,doc: add grndb --log-flags explanation,2,[],https://github.com/groonga/groonga/pull/945,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/945,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,945,2019-04-19T09:09:48Z,2019-04-23T06:51:22Z,2019-05-22T04:45:26Z,MERGED,True,49,1,2,https://github.com/kenhys,doc: add grndb --log-flags explanation,2,[],https://github.com/groonga/groonga/pull/945,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/945#issuecomment-485656917,,"@komainu8  I've fixed based on your review, could you review again, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,946,2019-04-19T13:20:10Z,2019-04-22T05:26:28Z,2019-04-22T06:52:08Z,MERGED,True,345,0,4,https://github.com/komainu8,test logical_range_filter: add test for window function over shards,1,[],https://github.com/groonga/groonga/pull/946,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/946,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,946,2019-04-19T13:20:10Z,2019-04-22T05:26:28Z,2019-04-22T06:52:08Z,MERGED,True,345,0,4,https://github.com/komainu8,test logical_range_filter: add test for window function over shards,1,[],https://github.com/groonga/groonga/pull/946,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/946#issuecomment-484894024,,"@kou Could you review this PR, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,946,2019-04-19T13:20:10Z,2019-04-22T05:26:28Z,2019-04-22T06:52:08Z,MERGED,True,345,0,4,https://github.com/komainu8,test logical_range_filter: add test for window function over shards,1,[],https://github.com/groonga/groonga/pull/946,https://github.com/komainu8,3,https://github.com/groonga/groonga/pull/946#issuecomment-485326185,,"@kou
I've modified these tests to the case that uses only two shards at most.
Could you review this PR again, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,947,2019-04-23T14:04:44Z,2019-05-17T03:05:04Z,2019-05-17T03:05:08Z,MERGED,True,100,51,2,https://github.com/komainu8,doc object_inspect: add the explanation of new statistics,3,[],https://github.com/groonga/groonga/pull/947,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/947,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,947,2019-04-23T14:04:44Z,2019-05-17T03:05:04Z,2019-05-17T03:05:08Z,MERGED,True,100,51,2,https://github.com/komainu8,doc object_inspect: add the explanation of new statistics,3,[],https://github.com/groonga/groonga/pull/947,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/947#issuecomment-485817578,,"@kenhys Could you review this PR, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,947,2019-04-23T14:04:44Z,2019-05-17T03:05:04Z,2019-05-17T03:05:08Z,MERGED,True,100,51,2,https://github.com/komainu8,doc object_inspect: add the explanation of new statistics,3,[],https://github.com/groonga/groonga/pull/947,https://github.com/komainu8,3,https://github.com/groonga/groonga/pull/947#issuecomment-489916703,,@kenhys Thank you for your comment. I've fixed it.,True,{}
groonga/groonga,https://github.com/groonga/groonga,947,2019-04-23T14:04:44Z,2019-05-17T03:05:04Z,2019-05-17T03:05:08Z,MERGED,True,100,51,2,https://github.com/komainu8,doc object_inspect: add the explanation of new statistics,3,[],https://github.com/groonga/groonga/pull/947,https://github.com/komainu8,4,https://github.com/groonga/groonga/pull/947#issuecomment-491593555,,"@kenhys Thank you for your comment.
I've fixed it.",True,{}
groonga/groonga,https://github.com/groonga/groonga,949,2019-04-24T15:40:59Z,2019-04-25T01:28:10Z,2019-04-25T01:28:10Z,CLOSED,False,6,0,1,https://github.com/tomas,"Fix ""unknown type name 'bool'"" compilation error with musl libc",1,[],https://github.com/groonga/groonga/pull/949,https://github.com/tomas,1,https://github.com/groonga/groonga/pull/949,"When building on an Alpine Linux system (with musl libc), I get the following error:
ii.c: In function 'buffer_flush':
ii.c:4491:11: error: unknown type name 'bool'; did you mean '_Bool'?
           bool need_chunk_free = true;
           ^~~~
           _Bool
ii.c:4491:34: error: 'true' undeclared (first use in this function); did you mean 'tee'?
           bool need_chunk_free = true;
                                  ^~~~
                                  tee
ii.c:4491:34: note: each undeclared identifier is reported only once for each function it appears in
ii.c:4508:33: error: 'false' undeclared (first use in this function); did you mean 'raise'?
               need_chunk_free = false;
                                 ^~~~~
                                 raise
ii.c: In function 'buffer_split':
ii.c:4886:13: error: unknown type name 'bool'; did you mean '_Bool'?
             bool need_db0_chunk_free = false;
             ^~~~
             _Bool
ii.c:4886:40: error: 'false' undeclared (first use in this function); did you mean 'raise'?
             bool need_db0_chunk_free = false;
                                        ^~~~~
                                        raise
ii.c:4890:39: error: 'true' undeclared (first use in this function); did you mean 'tee'?
                 need_db0_chunk_free = true;
                                       ^~~~
                                       tee
ii.c:4905:19: error: unknown type name 'bool'; did you mean '_Bool'?
                   bool need_db1_chunk_free = false;
                   ^~~~
                   _Bool
make[4]: *** [Makefile:982: ii.lo] Error 1

This PR fixes it.","When building on an Alpine Linux system (with musl libc), I get the following error:
ii.c: In function 'buffer_flush':
ii.c:4491:11: error: unknown type name 'bool'; did you mean '_Bool'?
           bool need_chunk_free = true;
           ^~~~
           _Bool
ii.c:4491:34: error: 'true' undeclared (first use in this function); did you mean 'tee'?
           bool need_chunk_free = true;
                                  ^~~~
                                  tee
ii.c:4491:34: note: each undeclared identifier is reported only once for each function it appears in
ii.c:4508:33: error: 'false' undeclared (first use in this function); did you mean 'raise'?
               need_chunk_free = false;
                                 ^~~~~
                                 raise
ii.c: In function 'buffer_split':
ii.c:4886:13: error: unknown type name 'bool'; did you mean '_Bool'?
             bool need_db0_chunk_free = false;
             ^~~~
             _Bool
ii.c:4886:40: error: 'false' undeclared (first use in this function); did you mean 'raise'?
             bool need_db0_chunk_free = false;
                                        ^~~~~
                                        raise
ii.c:4890:39: error: 'true' undeclared (first use in this function); did you mean 'tee'?
                 need_db0_chunk_free = true;
                                       ^~~~
                                       tee
ii.c:4905:19: error: unknown type name 'bool'; did you mean '_Bool'?
                   bool need_db1_chunk_free = false;
                   ^~~~
                   _Bool
make[4]: *** [Makefile:982: ii.lo] Error 1

This PR fixes it.",True,{}
groonga/groonga,https://github.com/groonga/groonga,949,2019-04-24T15:40:59Z,2019-04-25T01:28:10Z,2019-04-25T01:28:10Z,CLOSED,False,6,0,1,https://github.com/tomas,"Fix ""unknown type name 'bool'"" compilation error with musl libc",1,[],https://github.com/groonga/groonga/pull/949,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/949#issuecomment-486466618,"When building on an Alpine Linux system (with musl libc), I get the following error:
ii.c: In function 'buffer_flush':
ii.c:4491:11: error: unknown type name 'bool'; did you mean '_Bool'?
           bool need_chunk_free = true;
           ^~~~
           _Bool
ii.c:4491:34: error: 'true' undeclared (first use in this function); did you mean 'tee'?
           bool need_chunk_free = true;
                                  ^~~~
                                  tee
ii.c:4491:34: note: each undeclared identifier is reported only once for each function it appears in
ii.c:4508:33: error: 'false' undeclared (first use in this function); did you mean 'raise'?
               need_chunk_free = false;
                                 ^~~~~
                                 raise
ii.c: In function 'buffer_split':
ii.c:4886:13: error: unknown type name 'bool'; did you mean '_Bool'?
             bool need_db0_chunk_free = false;
             ^~~~
             _Bool
ii.c:4886:40: error: 'false' undeclared (first use in this function); did you mean 'raise'?
             bool need_db0_chunk_free = false;
                                        ^~~~~
                                        raise
ii.c:4890:39: error: 'true' undeclared (first use in this function); did you mean 'tee'?
                 need_db0_chunk_free = true;
                                       ^~~~
                                       tee
ii.c:4905:19: error: unknown type name 'bool'; did you mean '_Bool'?
                   bool need_db1_chunk_free = false;
                   ^~~~
                   _Bool
make[4]: *** [Makefile:982: ii.lo] Error 1

This PR fixes it.","Thank you for your pull request!
However, this issue has already resolved by da5444e.",True,{}
groonga/groonga,https://github.com/groonga/groonga,949,2019-04-24T15:40:59Z,2019-04-25T01:28:10Z,2019-04-25T01:28:10Z,CLOSED,False,6,0,1,https://github.com/tomas,"Fix ""unknown type name 'bool'"" compilation error with musl libc",1,[],https://github.com/groonga/groonga/pull/949,https://github.com/tomas,3,https://github.com/groonga/groonga/pull/949#issuecomment-486471824,"When building on an Alpine Linux system (with musl libc), I get the following error:
ii.c: In function 'buffer_flush':
ii.c:4491:11: error: unknown type name 'bool'; did you mean '_Bool'?
           bool need_chunk_free = true;
           ^~~~
           _Bool
ii.c:4491:34: error: 'true' undeclared (first use in this function); did you mean 'tee'?
           bool need_chunk_free = true;
                                  ^~~~
                                  tee
ii.c:4491:34: note: each undeclared identifier is reported only once for each function it appears in
ii.c:4508:33: error: 'false' undeclared (first use in this function); did you mean 'raise'?
               need_chunk_free = false;
                                 ^~~~~
                                 raise
ii.c: In function 'buffer_split':
ii.c:4886:13: error: unknown type name 'bool'; did you mean '_Bool'?
             bool need_db0_chunk_free = false;
             ^~~~
             _Bool
ii.c:4886:40: error: 'false' undeclared (first use in this function); did you mean 'raise'?
             bool need_db0_chunk_free = false;
                                        ^~~~~
                                        raise
ii.c:4890:39: error: 'true' undeclared (first use in this function); did you mean 'tee'?
                 need_db0_chunk_free = true;
                                       ^~~~
                                       tee
ii.c:4905:19: error: unknown type name 'bool'; did you mean '_Bool'?
                   bool need_db1_chunk_free = false;
                   ^~~~
                   _Bool
make[4]: *** [Makefile:982: ii.lo] Error 1

This PR fixes it.",I see. Would you please update groonga-latest.tar.gz so I can build it when installing the rroonga gem? Thanks.,True,{}
groonga/groonga,https://github.com/groonga/groonga,949,2019-04-24T15:40:59Z,2019-04-25T01:28:10Z,2019-04-25T01:28:10Z,CLOSED,False,6,0,1,https://github.com/tomas,"Fix ""unknown type name 'bool'"" compilation error with musl libc",1,[],https://github.com/groonga/groonga/pull/949,https://github.com/komainu8,4,https://github.com/groonga/groonga/pull/949#issuecomment-486480894,"When building on an Alpine Linux system (with musl libc), I get the following error:
ii.c: In function 'buffer_flush':
ii.c:4491:11: error: unknown type name 'bool'; did you mean '_Bool'?
           bool need_chunk_free = true;
           ^~~~
           _Bool
ii.c:4491:34: error: 'true' undeclared (first use in this function); did you mean 'tee'?
           bool need_chunk_free = true;
                                  ^~~~
                                  tee
ii.c:4491:34: note: each undeclared identifier is reported only once for each function it appears in
ii.c:4508:33: error: 'false' undeclared (first use in this function); did you mean 'raise'?
               need_chunk_free = false;
                                 ^~~~~
                                 raise
ii.c: In function 'buffer_split':
ii.c:4886:13: error: unknown type name 'bool'; did you mean '_Bool'?
             bool need_db0_chunk_free = false;
             ^~~~
             _Bool
ii.c:4886:40: error: 'false' undeclared (first use in this function); did you mean 'raise'?
             bool need_db0_chunk_free = false;
                                        ^~~~~
                                        raise
ii.c:4890:39: error: 'true' undeclared (first use in this function); did you mean 'tee'?
                 need_db0_chunk_free = true;
                                       ^~~~
                                       tee
ii.c:4905:19: error: unknown type name 'bool'; did you mean '_Bool'?
                   bool need_db1_chunk_free = false;
                   ^~~~
                   _Bool
make[4]: *** [Makefile:982: ii.lo] Error 1

This PR fixes it.","Sure.
We will update groonga-latest.tar.gz on Apr 26 or 29.
We will also update Rroonga's within a few weeks.",True,{}
groonga/groonga,https://github.com/groonga/groonga,950,2019-05-03T21:26:40Z,2019-07-03T07:36:29Z,2019-07-03T07:47:30Z,MERGED,True,973,2,43,https://github.com/komainu8,NormalizerNFKC100: add a unify_to_katakana option,7,[],https://github.com/groonga/groonga/pull/950,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/950,"This option normalize hiragana to katakana.
For example, ゔぁゔぃゔゔぇゔぉ normalize to ヴァヴィヴヴェヴォ.
We can identify below terms by unify_to_katakana and unify_katakana_v_sounds.

ゔぁゔぃゔゔぇゔぉ
ばびぶべぼ
ヴァヴィヴヴェヴォ
バビブベボ




First, we apply unify_to_katakana.

ゔぁゔぃゔゔぇゔぉ -> ヴァヴィヴヴェヴォ
ばびぶべぼ -> バビブベボ
ヴァヴィヴヴェヴォ -> ヴァヴィヴヴェヴォ
バビブベボ -> バビブベボ



Second, we apply unify_katakana_v_sounds.

ヴァヴィヴヴェヴォ -> バビブベボ
バビブベボ -> バビブベボ","This option normalize hiragana to katakana.
For example, ゔぁゔぃゔゔぇゔぉ normalize to ヴァヴィヴヴェヴォ.
We can identify below terms by unify_to_katakana and unify_katakana_v_sounds.

ゔぁゔぃゔゔぇゔぉ
ばびぶべぼ
ヴァヴィヴヴェヴォ
バビブベボ




First, we apply unify_to_katakana.

ゔぁゔぃゔゔぇゔぉ -> ヴァヴィヴヴェヴォ
ばびぶべぼ -> バビブベボ
ヴァヴィヴヴェヴォ -> ヴァヴィヴヴェヴォ
バビブベボ -> バビブベボ



Second, we apply unify_katakana_v_sounds.

ヴァヴィヴヴェヴォ -> バビブベボ
バビブベボ -> バビブベボ",True,{}
groonga/groonga,https://github.com/groonga/groonga,950,2019-05-03T21:26:40Z,2019-07-03T07:36:29Z,2019-07-03T07:47:30Z,MERGED,True,973,2,43,https://github.com/komainu8,NormalizerNFKC100: add a unify_to_katakana option,7,[],https://github.com/groonga/groonga/pull/950,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/950#issuecomment-489245282,"This option normalize hiragana to katakana.
For example, ゔぁゔぃゔゔぇゔぉ normalize to ヴァヴィヴヴェヴォ.
We can identify below terms by unify_to_katakana and unify_katakana_v_sounds.

ゔぁゔぃゔゔぇゔぉ
ばびぶべぼ
ヴァヴィヴヴェヴォ
バビブベボ




First, we apply unify_to_katakana.

ゔぁゔぃゔゔぇゔぉ -> ヴァヴィヴヴェヴォ
ばびぶべぼ -> バビブベボ
ヴァヴィヴヴェヴォ -> ヴァヴィヴヴェヴォ
バビブベボ -> バビブベボ



Second, we apply unify_katakana_v_sounds.

ヴァヴィヴヴェヴォ -> バビブベボ
バビブベボ -> バビブベボ","@kenhys Could you review this PR, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,950,2019-05-03T21:26:40Z,2019-07-03T07:36:29Z,2019-07-03T07:47:30Z,MERGED,True,973,2,43,https://github.com/komainu8,NormalizerNFKC100: add a unify_to_katakana option,7,[],https://github.com/groonga/groonga/pull/950,https://github.com/komainu8,3,https://github.com/groonga/groonga/pull/950#issuecomment-489927503,"This option normalize hiragana to katakana.
For example, ゔぁゔぃゔゔぇゔぉ normalize to ヴァヴィヴヴェヴォ.
We can identify below terms by unify_to_katakana and unify_katakana_v_sounds.

ゔぁゔぃゔゔぇゔぉ
ばびぶべぼ
ヴァヴィヴヴェヴォ
バビブベボ




First, we apply unify_to_katakana.

ゔぁゔぃゔゔぇゔぉ -> ヴァヴィヴヴェヴォ
ばびぶべぼ -> バビブベボ
ヴァヴィヴヴェヴォ -> ヴァヴィヴヴェヴォ
バビブベボ -> バビブベボ



Second, we apply unify_katakana_v_sounds.

ヴァヴィヴヴェヴォ -> バビブベボ
バビブベボ -> バビブベボ","@kou Could you review this PR, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,950,2019-05-03T21:26:40Z,2019-07-03T07:36:29Z,2019-07-03T07:47:30Z,MERGED,True,973,2,43,https://github.com/komainu8,NormalizerNFKC100: add a unify_to_katakana option,7,[],https://github.com/groonga/groonga/pull/950,https://github.com/kou,4,https://github.com/groonga/groonga/pull/950#issuecomment-489960606,"This option normalize hiragana to katakana.
For example, ゔぁゔぃゔゔぇゔぉ normalize to ヴァヴィヴヴェヴォ.
We can identify below terms by unify_to_katakana and unify_katakana_v_sounds.

ゔぁゔぃゔゔぇゔぉ
ばびぶべぼ
ヴァヴィヴヴェヴォ
バビブベボ




First, we apply unify_to_katakana.

ゔぁゔぃゔゔぇゔぉ -> ヴァヴィヴヴェヴォ
ばびぶべぼ -> バビブベボ
ヴァヴィヴヴェヴォ -> ヴァヴィヴヴェヴォ
バビブベボ -> バビブベボ



Second, we apply unify_katakana_v_sounds.

ヴァヴィヴヴェヴォ -> バビブベボ
バビブベボ -> バビブベボ","By the way, are you using gucharmap application for this work?",True,{}
groonga/groonga,https://github.com/groonga/groonga,950,2019-05-03T21:26:40Z,2019-07-03T07:36:29Z,2019-07-03T07:47:30Z,MERGED,True,973,2,43,https://github.com/komainu8,NormalizerNFKC100: add a unify_to_katakana option,7,[],https://github.com/groonga/groonga/pull/950,https://github.com/komainu8,5,https://github.com/groonga/groonga/pull/950#issuecomment-507285440,"This option normalize hiragana to katakana.
For example, ゔぁゔぃゔゔぇゔぉ normalize to ヴァヴィヴヴェヴォ.
We can identify below terms by unify_to_katakana and unify_katakana_v_sounds.

ゔぁゔぃゔゔぇゔぉ
ばびぶべぼ
ヴァヴィヴヴェヴォ
バビブベボ




First, we apply unify_to_katakana.

ゔぁゔぃゔゔぇゔぉ -> ヴァヴィヴヴェヴォ
ばびぶべぼ -> バビブベボ
ヴァヴィヴヴェヴォ -> ヴァヴィヴヴェヴォ
バビブベボ -> バビブベボ



Second, we apply unify_katakana_v_sounds.

ヴァヴィヴヴェヴォ -> バビブベボ
バビブベボ -> バビブベボ","@kou Thank you for your comments.
I've fixed them.",True,{}
groonga/groonga,https://github.com/groonga/groonga,950,2019-05-03T21:26:40Z,2019-07-03T07:36:29Z,2019-07-03T07:47:30Z,MERGED,True,973,2,43,https://github.com/komainu8,NormalizerNFKC100: add a unify_to_katakana option,7,[],https://github.com/groonga/groonga/pull/950,https://github.com/komainu8,6,https://github.com/groonga/groonga/pull/950#issuecomment-507981109,"This option normalize hiragana to katakana.
For example, ゔぁゔぃゔゔぇゔぉ normalize to ヴァヴィヴヴェヴォ.
We can identify below terms by unify_to_katakana and unify_katakana_v_sounds.

ゔぁゔぃゔゔぇゔぉ
ばびぶべぼ
ヴァヴィヴヴェヴォ
バビブベボ




First, we apply unify_to_katakana.

ゔぁゔぃゔゔぇゔぉ -> ヴァヴィヴヴェヴォ
ばびぶべぼ -> バビブベボ
ヴァヴィヴヴェヴォ -> ヴァヴィヴヴェヴォ
バビブベボ -> バビブベボ



Second, we apply unify_katakana_v_sounds.

ヴァヴィヴヴェヴォ -> バビブベボ
バビブベボ -> バビブベボ","@kou
最初 gucharmap のことを知らなくて使っていなかったのですが、途中から使いました。
便利ですね。ツールの紹介ありがとうございました。",True,{}
groonga/groonga,https://github.com/groonga/groonga,952,2019-05-04T21:41:00Z,,2022-03-15T05:24:16Z,OPEN,False,183,7,8,https://github.com/komainu8,doc normalize: add missing explanation for flags,3,[],https://github.com/groonga/groonga/pull/952,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/952,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,952,2019-05-04T21:41:00Z,,2022-03-15T05:24:16Z,OPEN,False,183,7,8,https://github.com/komainu8,doc normalize: add missing explanation for flags,3,[],https://github.com/groonga/groonga/pull/952,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/952#issuecomment-489637963,,"@kenhys Could you review this PR, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,952,2019-05-04T21:41:00Z,,2022-03-15T05:24:16Z,OPEN,False,183,7,8,https://github.com/komainu8,doc normalize: add missing explanation for flags,3,[],https://github.com/groonga/groonga/pull/952,https://github.com/kenhys,3,https://github.com/groonga/groonga/pull/952#issuecomment-489874672,,I'll review.,True,{}
groonga/groonga,https://github.com/groonga/groonga,954,2019-05-07T04:25:46Z,,2022-03-15T05:24:16Z,OPEN,False,514,9,1,https://github.com/kenhys,doc: update list of APIs,14,[],https://github.com/groonga/groonga/pull/954,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/954,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,956,2019-05-07T15:11:58Z,2019-05-09T09:36:43Z,2019-06-21T05:04:20Z,MERGED,True,1,1,1,https://github.com/kenhys,cmake windows: set CMAKE_SHARED_LIBRARY_PREFIX explicitly,1,[],https://github.com/groonga/groonga/pull/956,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/956,"On windows, CMAKE_SHARED_LIBRARY_PREFIX is set to """", it causes
mismatch between target dll name (GRN_DLL_FILENAME) and actual
file name (libgroonga.dll). Because of this, grn_windows_base_dir
returns incorrect path.
GitHub: #953
Reported by @yagisumi. Thanks!!!","On windows, CMAKE_SHARED_LIBRARY_PREFIX is set to """", it causes
mismatch between target dll name (GRN_DLL_FILENAME) and actual
file name (libgroonga.dll). Because of this, grn_windows_base_dir
returns incorrect path.
GitHub: #953
Reported by @yagisumi. Thanks!!!",True,{}
groonga/groonga,https://github.com/groonga/groonga,956,2019-05-07T15:11:58Z,2019-05-09T09:36:43Z,2019-06-21T05:04:20Z,MERGED,True,1,1,1,https://github.com/kenhys,cmake windows: set CMAKE_SHARED_LIBRARY_PREFIX explicitly,1,[],https://github.com/groonga/groonga/pull/956,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/956#issuecomment-490295126,"On windows, CMAKE_SHARED_LIBRARY_PREFIX is set to """", it causes
mismatch between target dll name (GRN_DLL_FILENAME) and actual
file name (libgroonga.dll). Because of this, grn_windows_base_dir
returns incorrect path.
GitHub: #953
Reported by @yagisumi. Thanks!!!",@kenhys I've finished review. Could you confirm my comment?,True,{}
groonga/groonga,https://github.com/groonga/groonga,956,2019-05-07T15:11:58Z,2019-05-09T09:36:43Z,2019-06-21T05:04:20Z,MERGED,True,1,1,1,https://github.com/kenhys,cmake windows: set CMAKE_SHARED_LIBRARY_PREFIX explicitly,1,[],https://github.com/groonga/groonga/pull/956,https://github.com/yagisumi,3,https://github.com/groonga/groonga/pull/956#issuecomment-490329136,"On windows, CMAKE_SHARED_LIBRARY_PREFIX is set to """", it causes
mismatch between target dll name (GRN_DLL_FILENAME) and actual
file name (libgroonga.dll). Because of this, grn_windows_base_dir
returns incorrect path.
GitHub: #953
Reported by @yagisumi. Thanks!!!","CMAKE_SHARED_LIBRARY_PREFFIXをlibにすると、liblibgroonga.dllやlibliblz4.dllができちゃう感じです。
ターゲット名がベースの名前になるようなのでCMAKE_SHARED_LIBRARY_PREFFIXを使わずにlibgroongaで決め打ちするか、set_target_propertiesでOUTPUT_NAMEを変更している箇所をMSVCにも適用する必要がありそうです。",True,{}
groonga/groonga,https://github.com/groonga/groonga,956,2019-05-07T15:11:58Z,2019-05-09T09:36:43Z,2019-06-21T05:04:20Z,MERGED,True,1,1,1,https://github.com/kenhys,cmake windows: set CMAKE_SHARED_LIBRARY_PREFIX explicitly,1,[],https://github.com/groonga/groonga/pull/956,https://github.com/kenhys,4,https://github.com/groonga/groonga/pull/956#issuecomment-490713382,"On windows, CMAKE_SHARED_LIBRARY_PREFIX is set to """", it causes
mismatch between target dll name (GRN_DLL_FILENAME) and actual
file name (libgroonga.dll). Because of this, grn_windows_base_dir
returns incorrect path.
GitHub: #953
Reported by @yagisumi. Thanks!!!","CMAKE_SHARED_LIBRARY_PREFFIXをlibにすると、liblibgroonga.dllやlibliblz4.dllができちゃう感じです。

たしかにそうでした。。。",True,{}
groonga/groonga,https://github.com/groonga/groonga,956,2019-05-07T15:11:58Z,2019-05-09T09:36:43Z,2019-06-21T05:04:20Z,MERGED,True,1,1,1,https://github.com/kenhys,cmake windows: set CMAKE_SHARED_LIBRARY_PREFIX explicitly,1,[],https://github.com/groonga/groonga/pull/956,https://github.com/kenhys,5,https://github.com/groonga/groonga/pull/956#issuecomment-490754559,"On windows, CMAKE_SHARED_LIBRARY_PREFIX is set to """", it causes
mismatch between target dll name (GRN_DLL_FILENAME) and actual
file name (libgroonga.dll). Because of this, grn_windows_base_dir
returns incorrect path.
GitHub: #953
Reported by @yagisumi. Thanks!!!","Is the support to remove a prefix ""?"" needless?

It should be handled in another issue (#958)",True,{}
groonga/groonga,https://github.com/groonga/groonga,956,2019-05-07T15:11:58Z,2019-05-09T09:36:43Z,2019-06-21T05:04:20Z,MERGED,True,1,1,1,https://github.com/kenhys,cmake windows: set CMAKE_SHARED_LIBRARY_PREFIX explicitly,1,[],https://github.com/groonga/groonga/pull/956,https://github.com/kenhys,6,https://github.com/groonga/groonga/pull/956#issuecomment-490754630,"On windows, CMAKE_SHARED_LIBRARY_PREFIX is set to """", it causes
mismatch between target dll name (GRN_DLL_FILENAME) and actual
file name (libgroonga.dll). Because of this, grn_windows_base_dir
returns incorrect path.
GitHub: #953
Reported by @yagisumi. Thanks!!!",@komainu8 I've fixed it.,True,{}
groonga/groonga,https://github.com/groonga/groonga,957,2019-05-08T01:20:39Z,2019-05-09T11:43:22Z,2019-05-09T11:44:20Z,CLOSED,False,974,140,9,https://github.com/komainu8,[WIP] Add document for TokenNgram,7,[],https://github.com/groonga/groonga/pull/957,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/957,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,959,2019-05-08T07:29:03Z,2019-05-08T09:00:55Z,2019-05-22T04:47:10Z,MERGED,True,9,0,2,https://github.com/kenhys,test: check whether over int32 value is returned correctly,1,[],https://github.com/groonga/groonga/pull/959,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/959,Added test case for GitHub#936,Added test case for GitHub#936,True,{}
groonga/groonga,https://github.com/groonga/groonga,960,2019-05-09T11:44:00Z,2019-06-14T03:29:01Z,2019-06-14T03:29:04Z,MERGED,True,1187,0,14,https://github.com/komainu8,doc tokenizers: add a document for TokenNgram,17,[],https://github.com/groonga/groonga/pull/960,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/960,FIx #892,FIx #892,True,{}
groonga/groonga,https://github.com/groonga/groonga,960,2019-05-09T11:44:00Z,2019-06-14T03:29:01Z,2019-06-14T03:29:04Z,MERGED,True,1187,0,14,https://github.com/komainu8,doc tokenizers: add a document for TokenNgram,17,[],https://github.com/groonga/groonga/pull/960,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/960#issuecomment-490898391,FIx #892,"@kenhys Could you review this PR, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,960,2019-05-09T11:44:00Z,2019-06-14T03:29:01Z,2019-06-14T03:29:04Z,MERGED,True,1187,0,14,https://github.com/komainu8,doc tokenizers: add a document for TokenNgram,17,[],https://github.com/groonga/groonga/pull/960,https://github.com/komainu8,3,https://github.com/groonga/groonga/pull/960#issuecomment-498081763,FIx #892,"@kenhys Thank you for your comments.
I've fixed them.",True,{}
groonga/groonga,https://github.com/groonga/groonga,960,2019-05-09T11:44:00Z,2019-06-14T03:29:01Z,2019-06-14T03:29:04Z,MERGED,True,1187,0,14,https://github.com/komainu8,doc tokenizers: add a document for TokenNgram,17,[],https://github.com/groonga/groonga/pull/960,https://github.com/komainu8,4,https://github.com/groonga/groonga/pull/960#issuecomment-500647164,FIx #892,"@kenhys Thank you for your comments.
I've fixed them.",True,{}
groonga/groonga,https://github.com/groonga/groonga,961,2019-05-09T13:12:58Z,2019-05-17T02:59:52Z,2019-05-17T02:59:55Z,MERGED,True,97,1,4,https://github.com/komainu8,"doc logical_range_filter: add a explanation for ""order"" parameter",2,[],https://github.com/groonga/groonga/pull/961,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/961,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,961,2019-05-09T13:12:58Z,2019-05-17T02:59:52Z,2019-05-17T02:59:55Z,MERGED,True,97,1,4,https://github.com/komainu8,"doc logical_range_filter: add a explanation for ""order"" parameter",2,[],https://github.com/groonga/groonga/pull/961,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/961#issuecomment-490898625,,"@kenhys Could you review this PR, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,961,2019-05-09T13:12:58Z,2019-05-17T02:59:52Z,2019-05-17T02:59:55Z,MERGED,True,97,1,4,https://github.com/komainu8,"doc logical_range_filter: add a explanation for ""order"" parameter",2,[],https://github.com/groonga/groonga/pull/961,https://github.com/komainu8,3,https://github.com/groonga/groonga/pull/961#issuecomment-491591986,,"@kenhys Thank you for your comment.
I've fixed it.",True,{}
groonga/groonga,https://github.com/groonga/groonga,963,2019-05-21T07:29:39Z,2019-05-22T09:12:33Z,2019-05-22T09:45:31Z,MERGED,True,44,5,7,https://github.com/komainu8,Add support LuaJIT,10,[],https://github.com/groonga/groonga/pull/963,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/963,"This pull request for bundling LuaJIT in Groonga.
However, I think this pull request is not enough implementation.","This pull request for bundling LuaJIT in Groonga.
However, I think this pull request is not enough implementation.",True,{}
groonga/groonga,https://github.com/groonga/groonga,963,2019-05-21T07:29:39Z,2019-05-22T09:12:33Z,2019-05-22T09:45:31Z,MERGED,True,44,5,7,https://github.com/komainu8,Add support LuaJIT,10,[],https://github.com/groonga/groonga/pull/963,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/963#issuecomment-494299049,"This pull request for bundling LuaJIT in Groonga.
However, I think this pull request is not enough implementation.","@kou Thank you for your comments.
I've fixed them.",True,{}
groonga/groonga,https://github.com/groonga/groonga,963,2019-05-21T07:29:39Z,2019-05-22T09:12:33Z,2019-05-22T09:45:31Z,MERGED,True,44,5,7,https://github.com/komainu8,Add support LuaJIT,10,[],https://github.com/groonga/groonga/pull/963,https://github.com/komainu8,3,https://github.com/groonga/groonga/pull/963#issuecomment-494627618,"This pull request for bundling LuaJIT in Groonga.
However, I think this pull request is not enough implementation.","@kou Thank you for your comments
I've fixed them and I've added install LuaJIT in travis in 17a4189 .",True,{}
groonga/groonga,https://github.com/groonga/groonga,963,2019-05-21T07:29:39Z,2019-05-22T09:12:33Z,2019-05-22T09:45:31Z,MERGED,True,44,5,7,https://github.com/komainu8,Add support LuaJIT,10,[],https://github.com/groonga/groonga/pull/963,https://github.com/komainu8,4,https://github.com/groonga/groonga/pull/963#issuecomment-494639716,"This pull request for bundling LuaJIT in Groonga.
However, I think this pull request is not enough implementation.","I found some mistakes.
Therefore, I've fixed them.",True,{}
groonga/groonga,https://github.com/groonga/groonga,963,2019-05-21T07:29:39Z,2019-05-22T09:12:33Z,2019-05-22T09:45:31Z,MERGED,True,44,5,7,https://github.com/komainu8,Add support LuaJIT,10,[],https://github.com/groonga/groonga/pull/963,https://github.com/komainu8,5,https://github.com/groonga/groonga/pull/963#issuecomment-494714216,"This pull request for bundling LuaJIT in Groonga.
However, I think this pull request is not enough implementation.","@kou Thank you for your comment.
I've removed a needless trailing space.",True,{}
groonga/groonga,https://github.com/groonga/groonga,964,2019-05-22T02:46:24Z,2019-05-22T08:38:00Z,2019-05-22T08:44:03Z,MERGED,True,1,0,1,https://github.com/komainu8,travis: supress warning,1,[],https://github.com/groonga/groonga/pull/964,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/964,"Currently, Travis raises the following warning.
Because automake1.11 is not installed.
/home/travis/build/groonga/groonga/vendor/onigmo-source/missing: line 52: aclocal-1.11: command not found
WARNING: `aclocal-1.11' is missing on your system.  You should only need it if
         you modified `acinclude.m4' or `configure.ac'.  You might want
         to install the `Automake' and `Perl' packages.  Grab them from
         any GNU archive site.
/home/travis/build/groonga/groonga/vendor/onigmo-source/missing: line 52: automake-1.11: command not found
WARNING: `automake-1.11' is missing on your system.  You should only need it if
         you modified `Makefile.am', `acinclude.m4' or `configure.ac'.
         You might want to install the `Automake' and `Perl' packages.
         Grab them from any GNU archive site.","Currently, Travis raises the following warning.
Because automake1.11 is not installed.
/home/travis/build/groonga/groonga/vendor/onigmo-source/missing: line 52: aclocal-1.11: command not found
WARNING: `aclocal-1.11' is missing on your system.  You should only need it if
         you modified `acinclude.m4' or `configure.ac'.  You might want
         to install the `Automake' and `Perl' packages.  Grab them from
         any GNU archive site.
/home/travis/build/groonga/groonga/vendor/onigmo-source/missing: line 52: automake-1.11: command not found
WARNING: `automake-1.11' is missing on your system.  You should only need it if
         you modified `Makefile.am', `acinclude.m4' or `configure.ac'.
         You might want to install the `Automake' and `Perl' packages.
         Grab them from any GNU archive site.",True,{}
groonga/groonga,https://github.com/groonga/groonga,964,2019-05-22T02:46:24Z,2019-05-22T08:38:00Z,2019-05-22T08:44:03Z,MERGED,True,1,0,1,https://github.com/komainu8,travis: supress warning,1,[],https://github.com/groonga/groonga/pull/964,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/964#issuecomment-494633747,"Currently, Travis raises the following warning.
Because automake1.11 is not installed.
/home/travis/build/groonga/groonga/vendor/onigmo-source/missing: line 52: aclocal-1.11: command not found
WARNING: `aclocal-1.11' is missing on your system.  You should only need it if
         you modified `acinclude.m4' or `configure.ac'.  You might want
         to install the `Automake' and `Perl' packages.  Grab them from
         any GNU archive site.
/home/travis/build/groonga/groonga/vendor/onigmo-source/missing: line 52: automake-1.11: command not found
WARNING: `automake-1.11' is missing on your system.  You should only need it if
         you modified `Makefile.am', `acinclude.m4' or `configure.ac'.
         You might want to install the `Automake' and `Perl' packages.
         Grab them from any GNU archive site.","@kenhys Could you review this PR, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,965,2019-05-22T05:20:55Z,2019-05-23T08:11:42Z,2019-05-27T07:19:23Z,MERGED,True,123,4,3,https://github.com/kenhys,doc: add indexes with weight description,3,[],https://github.com/groonga/groonga/pull/965,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/965,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,965,2019-05-22T05:20:55Z,2019-05-23T08:11:42Z,2019-05-27T07:19:23Z,MERGED,True,123,4,3,https://github.com/kenhys,doc: add indexes with weight description,3,[],https://github.com/groonga/groonga/pull/965,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/965#issuecomment-495072369,,"@komainu8 I've rebased and fixed based on your feedback.
Could you review it again, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,965,2019-05-22T05:20:55Z,2019-05-23T08:11:42Z,2019-05-27T07:19:23Z,MERGED,True,123,4,3,https://github.com/kenhys,doc: add indexes with weight description,3,[],https://github.com/groonga/groonga/pull/965,https://github.com/kenhys,3,https://github.com/groonga/groonga/pull/965#issuecomment-495114285,,@komainu8  Thanks!,True,{}
groonga/groonga,https://github.com/groonga/groonga,966,2019-05-22T08:46:20Z,2019-05-23T07:05:50Z,2019-05-23T07:05:55Z,CLOSED,False,159,6,12,https://github.com/komainu8,ctx: add a initilaization of lua vm,11,[],https://github.com/groonga/groonga/pull/966,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/966,"TODO:
コミットの整理
リンクエラーの解消","TODO:
コミットの整理
リンクエラーの解消",True,{}
groonga/groonga,https://github.com/groonga/groonga,967,2019-05-23T06:31:18Z,2019-05-24T00:50:48Z,2019-11-06T01:30:54Z,MERGED,True,2,1,1,https://github.com/komainu8,Makefile.am: add a missing definition,1,[],https://github.com/groonga/groonga/pull/967,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/967,"If there is not this definition, libluajit is not linked to libgroonga.","If there is not this definition, libluajit is not linked to libgroonga.",True,{}
groonga/groonga,https://github.com/groonga/groonga,968,2019-05-23T06:57:44Z,2019-05-24T03:48:15Z,2019-05-24T04:01:29Z,MERGED,True,189,68,5,https://github.com/komainu8,ctx: add support lua vm,5,[],https://github.com/groonga/groonga/pull/968,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/968,"However, currently, this feature is just only initialized the lua vm
and remove the lua vm when groonga finish.","However, currently, this feature is just only initialized the lua vm
and remove the lua vm when groonga finish.",True,{}
groonga/groonga,https://github.com/groonga/groonga,968,2019-05-23T06:57:44Z,2019-05-24T03:48:15Z,2019-05-24T04:01:29Z,MERGED,True,189,68,5,https://github.com/komainu8,ctx: add support lua vm,5,[],https://github.com/groonga/groonga/pull/968,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/968#issuecomment-495461547,"However, currently, this feature is just only initialized the lua vm
and remove the lua vm when groonga finish.","@kou Thank you for your comments.
I've fixed them.",True,{}
groonga/groonga,https://github.com/groonga/groonga,969,2019-05-25T13:45:41Z,2019-05-27T01:44:24Z,2019-05-27T02:02:09Z,MERGED,True,24,24,4,https://github.com/komainu8,"Make enums UPPER_CASE for ""grn_io_rw_mode""",1,[],https://github.com/groonga/groonga/pull/969,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/969,A part of fix for issue #43,A part of fix for issue #43,True,{}
groonga/groonga,https://github.com/groonga/groonga,969,2019-05-25T13:45:41Z,2019-05-27T01:44:24Z,2019-05-27T02:02:09Z,MERGED,True,24,24,4,https://github.com/komainu8,"Make enums UPPER_CASE for ""grn_io_rw_mode""",1,[],https://github.com/groonga/groonga/pull/969,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/969#issuecomment-495919695,A part of fix for issue #43,"@kenhys Could you review this PR, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,969,2019-05-25T13:45:41Z,2019-05-27T01:44:24Z,2019-05-27T02:02:09Z,MERGED,True,24,24,4,https://github.com/komainu8,"Make enums UPPER_CASE for ""grn_io_rw_mode""",1,[],https://github.com/groonga/groonga/pull/969,https://github.com/komainu8,3,https://github.com/groonga/groonga/pull/969#issuecomment-496049124,A part of fix for issue #43,"@kou Could you review this PR, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,970,2019-05-27T05:21:22Z,2019-05-29T06:21:46Z,2019-05-29T07:35:23Z,MERGED,True,8,1,3,https://github.com/kenhys,windows: remove extended path prefix \\?\,2,[],https://github.com/groonga/groonga/pull/970,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/970,"There is a case that GetModuleFileNameW returns path which contains
extended path prefix \?\ as module filename. It causes a bug that
plugin can't be found correctly because of this kind of extended path
prefix.
TODO: Support long path correctly on Windows. (Drop MAX_PATH limitation)
GitHub:#958
Reported by @yagisumi Thanks!!!","There is a case that GetModuleFileNameW returns path which contains
extended path prefix \?\ as module filename. It causes a bug that
plugin can't be found correctly because of this kind of extended path
prefix.
TODO: Support long path correctly on Windows. (Drop MAX_PATH limitation)
GitHub:#958
Reported by @yagisumi Thanks!!!",True,{}
groonga/groonga,https://github.com/groonga/groonga,970,2019-05-27T05:21:22Z,2019-05-29T06:21:46Z,2019-05-29T07:35:23Z,MERGED,True,8,1,3,https://github.com/kenhys,windows: remove extended path prefix \\?\,2,[],https://github.com/groonga/groonga/pull/970,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/970#issuecomment-496123019,"There is a case that GetModuleFileNameW returns path which contains
extended path prefix \?\ as module filename. It causes a bug that
plugin can't be found correctly because of this kind of extended path
prefix.
TODO: Support long path correctly on Windows. (Drop MAX_PATH limitation)
GitHub:#958
Reported by @yagisumi Thanks!!!",@komainu8 Could you review this PR?,True,{}
groonga/groonga,https://github.com/groonga/groonga,970,2019-05-27T05:21:22Z,2019-05-29T06:21:46Z,2019-05-29T07:35:23Z,MERGED,True,8,1,3,https://github.com/kenhys,windows: remove extended path prefix \\?\,2,[],https://github.com/groonga/groonga/pull/970,https://github.com/kenhys,3,https://github.com/groonga/groonga/pull/970#issuecomment-496799996,"There is a case that GetModuleFileNameW returns path which contains
extended path prefix \?\ as module filename. It causes a bug that
plugin can't be found correctly because of this kind of extended path
prefix.
TODO: Support long path correctly on Windows. (Drop MAX_PATH limitation)
GitHub:#958
Reported by @yagisumi Thanks!!!",@komainu8 I've fixed it!,True,{}
groonga/groonga,https://github.com/groonga/groonga,970,2019-05-27T05:21:22Z,2019-05-29T06:21:46Z,2019-05-29T07:35:23Z,MERGED,True,8,1,3,https://github.com/kenhys,windows: remove extended path prefix \\?\,2,[],https://github.com/groonga/groonga/pull/970,https://github.com/kenhys,4,https://github.com/groonga/groonga/pull/970#issuecomment-496801530,"There is a case that GetModuleFileNameW returns path which contains
extended path prefix \?\ as module filename. It causes a bug that
plugin can't be found correctly because of this kind of extended path
prefix.
TODO: Support long path correctly on Windows. (Drop MAX_PATH limitation)
GitHub:#958
Reported by @yagisumi Thanks!!!",@komainu8 Thanks!,True,{}
groonga/groonga,https://github.com/groonga/groonga,972,2019-05-27T09:37:35Z,2019-06-07T09:05:33Z,2019-06-07T09:05:33Z,MERGED,True,238,1,6,https://github.com/kenhys,doc: add TokenPattern description,3,[],https://github.com/groonga/groonga/pull/972,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/972,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,972,2019-05-27T09:37:35Z,2019-06-07T09:05:33Z,2019-06-07T09:05:33Z,MERGED,True,238,1,6,https://github.com/kenhys,doc: add TokenPattern description,3,[],https://github.com/groonga/groonga/pull/972,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/972#issuecomment-499314115,,@komainu8 could you review again?,True,{}
groonga/groonga,https://github.com/groonga/groonga,972,2019-05-27T09:37:35Z,2019-06-07T09:05:33Z,2019-06-07T09:05:33Z,MERGED,True,238,1,6,https://github.com/kenhys,doc: add TokenPattern description,3,[],https://github.com/groonga/groonga/pull/972,https://github.com/kenhys,3,https://github.com/groonga/groonga/pull/972#issuecomment-499343265,,"@komainu8 Did you review based on old version?
I've rewritten that explanation, so it should be removed already.
(Added one more sample and explain hit/not hit test case)",True,{}
groonga/groonga,https://github.com/groonga/groonga,973,2019-05-27T12:33:47Z,2019-05-29T20:56:33Z,2019-05-29T23:21:33Z,MERGED,True,22,22,7,https://github.com/komainu8,"Make enums UPPER_CASE for ""grn_io_mode""",1,[],https://github.com/groonga/groonga/pull/973,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/973,A part of fix for issue #43,A part of fix for issue #43,True,{}
groonga/groonga,https://github.com/groonga/groonga,973,2019-05-27T12:33:47Z,2019-05-29T20:56:33Z,2019-05-29T23:21:33Z,MERGED,True,22,22,7,https://github.com/komainu8,"Make enums UPPER_CASE for ""grn_io_mode""",1,[],https://github.com/groonga/groonga/pull/973,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/973#issuecomment-496197854,A part of fix for issue #43,"@kenhys Could you review this PR, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,973,2019-05-27T12:33:47Z,2019-05-29T20:56:33Z,2019-05-29T23:21:33Z,MERGED,True,22,22,7,https://github.com/komainu8,"Make enums UPPER_CASE for ""grn_io_mode""",1,[],https://github.com/groonga/groonga/pull/973,https://github.com/komainu8,3,https://github.com/groonga/groonga/pull/973#issuecomment-496942095,A part of fix for issue #43,"@kou Could you review this PR, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,974,2019-05-30T11:53:42Z,2019-05-31T05:10:30Z,2019-05-31T05:10:30Z,MERGED,True,23,23,3,https://github.com/komainu8,"Make enums UPPER_CASE for ""grn_rec_unit""",1,[],https://github.com/groonga/groonga/pull/974,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/974,A part of fix for issue #43,A part of fix for issue #43,True,{}
groonga/groonga,https://github.com/groonga/groonga,974,2019-05-30T11:53:42Z,2019-05-31T05:10:30Z,2019-05-31T05:10:30Z,MERGED,True,23,23,3,https://github.com/komainu8,"Make enums UPPER_CASE for ""grn_rec_unit""",1,[],https://github.com/groonga/groonga/pull/974,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/974#issuecomment-497304522,A part of fix for issue #43,"@kenhys Could you review this PR, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,974,2019-05-30T11:53:42Z,2019-05-31T05:10:30Z,2019-05-31T05:10:30Z,MERGED,True,23,23,3,https://github.com/komainu8,"Make enums UPPER_CASE for ""grn_rec_unit""",1,[],https://github.com/groonga/groonga/pull/974,https://github.com/komainu8,3,https://github.com/groonga/groonga/pull/974#issuecomment-497567063,A part of fix for issue #43,"@kou Could you review this PR, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,975,2019-05-31T04:02:52Z,2019-06-03T08:40:17Z,2019-06-03T08:42:18Z,MERGED,True,141,0,3,https://github.com/komainu8,expr optimize: add support for accessor estimation,5,[],https://github.com/groonga/groonga/pull/975,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/975,"However, currently, this estimation is provisional.
It always returns table size.
We should estimate the number of hits.","However, currently, this estimation is provisional.
It always returns table size.
We should estimate the number of hits.",True,{}
groonga/groonga,https://github.com/groonga/groonga,975,2019-05-31T04:02:52Z,2019-06-03T08:40:17Z,2019-06-03T08:42:18Z,MERGED,True,141,0,3,https://github.com/komainu8,expr optimize: add support for accessor estimation,5,[],https://github.com/groonga/groonga/pull/975,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/975#issuecomment-497567144,"However, currently, this estimation is provisional.
It always returns table size.
We should estimate the number of hits.","@kenhys Could you review this PR, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,975,2019-05-31T04:02:52Z,2019-06-03T08:40:17Z,2019-06-03T08:42:18Z,MERGED,True,141,0,3,https://github.com/komainu8,expr optimize: add support for accessor estimation,5,[],https://github.com/groonga/groonga/pull/975,https://github.com/komainu8,3,https://github.com/groonga/groonga/pull/975#issuecomment-497599449,"However, currently, this estimation is provisional.
It always returns table size.
We should estimate the number of hits.","@kenhys Thank you for your comment.
I've fixed it.",True,{}
groonga/groonga,https://github.com/groonga/groonga,975,2019-05-31T04:02:52Z,2019-06-03T08:40:17Z,2019-06-03T08:42:18Z,MERGED,True,141,0,3,https://github.com/komainu8,expr optimize: add support for accessor estimation,5,[],https://github.com/groonga/groonga/pull/975,https://github.com/komainu8,4,https://github.com/groonga/groonga/pull/975#issuecomment-498164881,"However, currently, this estimation is provisional.
It always returns table size.
We should estimate the number of hits.","@kou Could you review this PR, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,976,2019-05-31T06:24:04Z,2019-06-07T09:22:50Z,2019-06-07T09:22:50Z,MERGED,True,231,0,6,https://github.com/kenhys,doc: add TokenTable document,1,[],https://github.com/groonga/groonga/pull/976,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/976,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,976,2019-05-31T06:24:04Z,2019-06-07T09:22:50Z,2019-06-07T09:22:50Z,MERGED,True,231,0,6,https://github.com/kenhys,doc: add TokenTable document,1,[],https://github.com/groonga/groonga/pull/976,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/976#issuecomment-499385689,,"@komainu8
I've added more description, does it reasonable?",True,{}
groonga/groonga,https://github.com/groonga/groonga,977,2019-05-31T14:33:41Z,2019-06-06T01:04:04Z,2019-06-06T01:04:11Z,CLOSED,False,5,5,1,https://github.com/komainu8,"Make enums UPPER_CASE for ""grn_com""",1,[],https://github.com/groonga/groonga/pull/977,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/977,"However, this enum doesn't use in the current version.
Should we delete this enum?","However, this enum doesn't use in the current version.
Should we delete this enum?",True,{}
groonga/groonga,https://github.com/groonga/groonga,977,2019-05-31T14:33:41Z,2019-06-06T01:04:04Z,2019-06-06T01:04:11Z,CLOSED,False,5,5,1,https://github.com/komainu8,"Make enums UPPER_CASE for ""grn_com""",1,[],https://github.com/groonga/groonga/pull/977,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/977#issuecomment-497730901,"However, this enum doesn't use in the current version.
Should we delete this enum?","@kenhys Could you review this PR, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,977,2019-05-31T14:33:41Z,2019-06-06T01:04:04Z,2019-06-06T01:04:11Z,CLOSED,False,5,5,1,https://github.com/komainu8,"Make enums UPPER_CASE for ""grn_com""",1,[],https://github.com/groonga/groonga/pull/977,https://github.com/komainu8,3,https://github.com/groonga/groonga/pull/977#issuecomment-499310243,"However, this enum doesn't use in the current version.
Should we delete this enum?","@kenhys Thank you for your comment.
I'll close this PR and I make new PR that remove this unused enum.",True,{}
groonga/groonga,https://github.com/groonga/groonga,978,2019-06-06T03:35:15Z,2019-06-06T09:05:04Z,2019-06-06T09:05:12Z,MERGED,True,3435,15,225,https://github.com/kenhys,logical_range_filter: add more query-log,16,[],https://github.com/groonga/groonga/pull/978,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/978,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,978,2019-06-06T03:35:15Z,2019-06-06T09:05:04Z,2019-06-06T09:05:12Z,MERGED,True,3435,15,225,https://github.com/kenhys,logical_range_filter: add more query-log,16,[],https://github.com/groonga/groonga/pull/978,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/978#issuecomment-499351156,,@komainu8 could you check again?,True,{}
groonga/groonga,https://github.com/groonga/groonga,978,2019-06-06T03:35:15Z,2019-06-06T09:05:04Z,2019-06-06T09:05:12Z,MERGED,True,3435,15,225,https://github.com/kenhys,logical_range_filter: add more query-log,16,[],https://github.com/groonga/groonga/pull/978,https://github.com/kenhys,3,https://github.com/groonga/groonga/pull/978#issuecomment-499355860,,"@kou
Could you review this PR please?
One concern is how to reduce a bit redundant query logs such as filter(0): between.",True,{}
groonga/groonga,https://github.com/groonga/groonga,978,2019-06-06T03:35:15Z,2019-06-06T09:05:04Z,2019-06-06T09:05:12Z,MERGED,True,3435,15,225,https://github.com/kenhys,logical_range_filter: add more query-log,16,[],https://github.com/groonga/groonga/pull/978,https://github.com/kenhys,4,https://github.com/groonga/groonga/pull/978#issuecomment-499384527,,"@kou I've removed filter(): omssion, and pushed some commit which is based on feedback!",True,{}
groonga/groonga,https://github.com/groonga/groonga,978,2019-06-06T03:35:15Z,2019-06-06T09:05:04Z,2019-06-06T09:05:12Z,MERGED,True,3435,15,225,https://github.com/kenhys,logical_range_filter: add more query-log,16,[],https://github.com/groonga/groonga/pull/978,https://github.com/kenhys,5,https://github.com/groonga/groonga/pull/978#issuecomment-499405029,,@kou I've fixed missing logging style and unify to KEY/-KEY style.,True,{}
groonga/groonga,https://github.com/groonga/groonga,978,2019-06-06T03:35:15Z,2019-06-06T09:05:04Z,2019-06-06T09:05:12Z,MERGED,True,3435,15,225,https://github.com/kenhys,logical_range_filter: add more query-log,16,[],https://github.com/groonga/groonga/pull/978,https://github.com/kou,6,https://github.com/groonga/groonga/pull/978#issuecomment-499412662,,Merged with some modifications.,True,{}
groonga/groonga,https://github.com/groonga/groonga,979,2019-06-06T13:07:03Z,2019-06-09T20:32:47Z,2019-06-09T23:13:42Z,MERGED,True,0,8,1,https://github.com/komainu8,Remove a needless enum,1,[],https://github.com/groonga/groonga/pull/979,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/979,This enum has already unused.,This enum has already unused.,True,{}
groonga/groonga,https://github.com/groonga/groonga,979,2019-06-06T13:07:03Z,2019-06-09T20:32:47Z,2019-06-09T23:13:42Z,MERGED,True,0,8,1,https://github.com/komainu8,Remove a needless enum,1,[],https://github.com/groonga/groonga/pull/979,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/979#issuecomment-499486008,This enum has already unused.,"@kenhys Could you review this PR, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,979,2019-06-06T13:07:03Z,2019-06-09T20:32:47Z,2019-06-09T23:13:42Z,MERGED,True,0,8,1,https://github.com/komainu8,Remove a needless enum,1,[],https://github.com/groonga/groonga/pull/979,https://github.com/komainu8,3,https://github.com/groonga/groonga/pull/979#issuecomment-499733866,This enum has already unused.,"@kou Could you review this PR, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,980,2019-06-10T11:36:42Z,2019-06-11T01:05:47Z,2019-06-11T01:08:03Z,MERGED,True,18,18,1,https://github.com/komainu8," Make enums UPPER_CASE for ""grn_wv_mode""",1,[],https://github.com/groonga/groonga/pull/980,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/980,A part of fix for issue #43.,A part of fix for issue #43.,True,{}
groonga/groonga,https://github.com/groonga/groonga,980,2019-06-10T11:36:42Z,2019-06-11T01:05:47Z,2019-06-11T01:08:03Z,MERGED,True,18,18,1,https://github.com/komainu8," Make enums UPPER_CASE for ""grn_wv_mode""",1,[],https://github.com/groonga/groonga/pull/980,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/980#issuecomment-500399076,A part of fix for issue #43.,"@kenhys Could you review this PR, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,980,2019-06-10T11:36:42Z,2019-06-11T01:05:47Z,2019-06-11T01:08:03Z,MERGED,True,18,18,1,https://github.com/komainu8," Make enums UPPER_CASE for ""grn_wv_mode""",1,[],https://github.com/groonga/groonga/pull/980,https://github.com/komainu8,3,https://github.com/groonga/groonga/pull/980#issuecomment-500626786,A part of fix for issue #43.,"@kou Could you review this PR, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,981,2019-06-11T02:31:11Z,2019-06-11T05:49:06Z,2019-06-21T05:07:24Z,MERGED,True,10,0,1,https://github.com/kenhys,appveyor: bundle missing licence files,1,[],https://github.com/groonga/groonga/pull/981,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/981,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,981,2019-06-11T02:31:11Z,2019-06-11T05:49:06Z,2019-06-21T05:07:24Z,MERGED,True,10,0,1,https://github.com/kenhys,appveyor: bundle missing licence files,1,[],https://github.com/groonga/groonga/pull/981,https://github.com/kou,2,https://github.com/groonga/groonga/pull/981#issuecomment-501081876,,We should do this in CMakeLists.txt.,True,{}
groonga/groonga,https://github.com/groonga/groonga,982,2019-06-11T03:28:55Z,2019-06-11T23:24:43Z,2019-06-12T00:55:55Z,MERGED,True,139,5,3,https://github.com/komainu8,expr optimize: add support multistage accessor,4,[],https://github.com/groonga/groonga/pull/982,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/982,"This modify is to resolve the below error when GRN_EXPR_OPTIMIZE=yes.
""invalid argument: <key: failed to convert to : #<Groonga::Bulk:0x55565fff3eb0 \""AAA\"">>(-22)""
#|e| ArgumentError: key: failed to convert to :#<Groonga::Bulk:0x55565fff3eb0 ""AAA"">","This modify is to resolve the below error when GRN_EXPR_OPTIMIZE=yes.
""invalid argument: <key: failed to convert to : #<Groonga::Bulk:0x55565fff3eb0 \""AAA\"">>(-22)""
#|e| ArgumentError: key: failed to convert to :#<Groonga::Bulk:0x55565fff3eb0 ""AAA"">",True,{}
groonga/groonga,https://github.com/groonga/groonga,982,2019-06-11T03:28:55Z,2019-06-11T23:24:43Z,2019-06-12T00:55:55Z,MERGED,True,139,5,3,https://github.com/komainu8,expr optimize: add support multistage accessor,4,[],https://github.com/groonga/groonga/pull/982,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/982#issuecomment-500673018,"This modify is to resolve the below error when GRN_EXPR_OPTIMIZE=yes.
""invalid argument: <key: failed to convert to : #<Groonga::Bulk:0x55565fff3eb0 \""AAA\"">>(-22)""
#|e| ArgumentError: key: failed to convert to :#<Groonga::Bulk:0x55565fff3eb0 ""AAA"">","@kenhys Could you review this PR, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,982,2019-06-11T03:28:55Z,2019-06-11T23:24:43Z,2019-06-12T00:55:55Z,MERGED,True,139,5,3,https://github.com/komainu8,expr optimize: add support multistage accessor,4,[],https://github.com/groonga/groonga/pull/982,https://github.com/komainu8,3,https://github.com/groonga/groonga/pull/982#issuecomment-500697248,"This modify is to resolve the below error when GRN_EXPR_OPTIMIZE=yes.
""invalid argument: <key: failed to convert to : #<Groonga::Bulk:0x55565fff3eb0 \""AAA\"">>(-22)""
#|e| ArgumentError: key: failed to convert to :#<Groonga::Bulk:0x55565fff3eb0 ""AAA"">","@kenhys Thank you for your comment.
I've fixed it.",True,{}
groonga/groonga,https://github.com/groonga/groonga,982,2019-06-11T03:28:55Z,2019-06-11T23:24:43Z,2019-06-12T00:55:55Z,MERGED,True,139,5,3,https://github.com/komainu8,expr optimize: add support multistage accessor,4,[],https://github.com/groonga/groonga/pull/982,https://github.com/komainu8,4,https://github.com/groonga/groonga/pull/982#issuecomment-500700342,"This modify is to resolve the below error when GRN_EXPR_OPTIMIZE=yes.
""invalid argument: <key: failed to convert to : #<Groonga::Bulk:0x55565fff3eb0 \""AAA\"">>(-22)""
#|e| ArgumentError: key: failed to convert to :#<Groonga::Bulk:0x55565fff3eb0 ""AAA"">","@kou Could you review this PR, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,982,2019-06-11T03:28:55Z,2019-06-11T23:24:43Z,2019-06-12T00:55:55Z,MERGED,True,139,5,3,https://github.com/komainu8,expr optimize: add support multistage accessor,4,[],https://github.com/groonga/groonga/pull/982,https://github.com/komainu8,5,https://github.com/groonga/groonga/pull/982#issuecomment-500722878,"This modify is to resolve the below error when GRN_EXPR_OPTIMIZE=yes.
""invalid argument: <key: failed to convert to : #<Groonga::Bulk:0x55565fff3eb0 \""AAA\"">>(-22)""
#|e| ArgumentError: key: failed to convert to :#<Groonga::Bulk:0x55565fff3eb0 ""AAA"">","@kou Thank you for your comments.
I've fixed them by dee455d and 3f6baaa.",True,{}
groonga/groonga,https://github.com/groonga/groonga,983,2019-06-11T04:44:15Z,2019-06-11T05:48:40Z,2019-06-11T05:48:40Z,MERGED,True,587,0,15,https://github.com/kenhys,test: fix logical_range_filter test failure when GRN_EXPR_OPTIMIZE=yes,1,[],https://github.com/groonga/groonga/pull/983,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/983,Use #$GRN_EXPR_OPTIMIZE=yes/no explicitly for test case.,Use #$GRN_EXPR_OPTIMIZE=yes/no explicitly for test case.,True,{}
groonga/groonga,https://github.com/groonga/groonga,984,2019-06-11T06:44:49Z,2019-06-11T08:51:34Z,2019-06-11T08:51:34Z,MERGED,True,62,0,2,https://github.com/kenhys,appveyor: add UCRT runtime,1,[],https://github.com/groonga/groonga/pull/984,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/984,"Usually UCRT runtime is automatically installed, but there is a case that it doesn't installed yet.
For such a specific environment, we use local-deployment.","Usually UCRT runtime is automatically installed, but there is a case that it doesn't installed yet.
For such a specific environment, we use local-deployment.",True,{}
groonga/groonga,https://github.com/groonga/groonga,984,2019-06-11T06:44:49Z,2019-06-11T08:51:34Z,2019-06-11T08:51:34Z,MERGED,True,62,0,2,https://github.com/kenhys,appveyor: add UCRT runtime,1,[],https://github.com/groonga/groonga/pull/984,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/984#issuecomment-500709555,"Usually UCRT runtime is automatically installed, but there is a case that it doesn't installed yet.
For such a specific environment, we use local-deployment.",zip package is not built yet. so just waiting.,True,{}
groonga/groonga,https://github.com/groonga/groonga,984,2019-06-11T06:44:49Z,2019-06-11T08:51:34Z,2019-06-11T08:51:34Z,MERGED,True,62,0,2,https://github.com/kenhys,appveyor: add UCRT runtime,1,[],https://github.com/groonga/groonga/pull/984,https://github.com/kenhys,3,https://github.com/groonga/groonga/pull/984#issuecomment-500727461,"Usually UCRT runtime is automatically installed, but there is a case that it doesn't installed yet.
For such a specific environment, we use local-deployment.","It seems that ucrt bundle succeeds.
https://ci.appveyor.com/project/kenhys/groonga/builds/25187602/job/9m2mbohw8slh5t3f",True,{}
groonga/groonga,https://github.com/groonga/groonga,984,2019-06-11T06:44:49Z,2019-06-11T08:51:34Z,2019-06-11T08:51:34Z,MERGED,True,62,0,2,https://github.com/kenhys,appveyor: add UCRT runtime,1,[],https://github.com/groonga/groonga/pull/984,https://github.com/kenhys,4,https://github.com/groonga/groonga/pull/984#issuecomment-500727758,"Usually UCRT runtime is automatically installed, but there is a case that it doesn't installed yet.
For such a specific environment, we use local-deployment.","I've found wrong license file bundle, so I'll create one more separated PR.",True,{}
groonga/groonga,https://github.com/groonga/groonga,985,2019-06-11T07:59:44Z,2019-06-11T08:42:04Z,2019-06-21T05:04:11Z,MERGED,True,0,1,1,https://github.com/kenhys,appveyor: fix inappropriate LICENSE file copy,1,[],https://github.com/groonga/groonga/pull/985,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/985,"Because of wrong chainging working directory, groonga-admin license file is not
bundled correctly.","Because of wrong chainging working directory, groonga-admin license file is not
bundled correctly.",True,{}
groonga/groonga,https://github.com/groonga/groonga,985,2019-06-11T07:59:44Z,2019-06-11T08:42:04Z,2019-06-21T05:04:11Z,MERGED,True,0,1,1,https://github.com/kenhys,appveyor: fix inappropriate LICENSE file copy,1,[],https://github.com/groonga/groonga/pull/985,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/985#issuecomment-500732560,"Because of wrong chainging working directory, groonga-admin license file is not
bundled correctly.","It should be:
Compressed: 3061760
cd groonga-admin-*
move html %FULL_GROONGA_INSTALL_FOLDER%\share\groonga\html\admin
        1 dir(s) moved.
mkdir %FULL_GROONGA_INSTALL_FOLDER%\share\groonga\groonga-admin
for %%i in ( LICENSE README.md ) do ( copy %%i %FULL_GROONGA_INSTALL_FOLDER%\share\groonga\groonga-admin\ )
        1 file(s) copied.  <= HERE FIXED
        1 file(s) copied.  <= HERE FIXED
cd %APPVEYOR_BUILD_FOLDER%\vendor\msgpack-*
copy NOTICE %FULL_GROONGA_INSTALL_FOLDER%\share\groonga\msgpack\
        1 file(s) copied.
cd %APPVEYOR_BUILD_FOLDER%\vendor\mruby-source
for %%i in ( AUTHORS LICENSE README.md ) do ( copy %%i %FULL_GROONGA_INSTALL_FOLDER%\share\groonga\mruby\ )
        1 file(s) copied.
        1 file(s) copied.
        1 file(s) copied.
cd %APPVEYOR_BUILD_FOLDER%

https://ci.appveyor.com/project/kenhys/groonga/builds/25188824/job/oou4s284atntv55i
indicates the issue was fixed.",True,{}
groonga/groonga,https://github.com/groonga/groonga,986,2019-06-12T06:12:58Z,2019-06-14T02:07:36Z,2019-06-21T05:04:03Z,MERGED,True,3,3,2,https://github.com/kenhys,appveyor: install mruby license related files via CMake,1,[],https://github.com/groonga/groonga/pull/986,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/986,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,987,2019-06-12T07:49:39Z,2019-06-18T08:26:03Z,2019-06-18T08:26:04Z,MERGED,True,922,133,9,https://github.com/kenhys,grndb: add operation log into groonga.log,13,[],https://github.com/groonga/groonga/pull/987,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/987,"In the previous version, grndb operation is not logged into groonga.log.
It is better such operations are also logged into groonga.log.","In the previous version, grndb operation is not logged into groonga.log.
It is better such operations are also logged into groonga.log.",True,{}
groonga/groonga,https://github.com/groonga/groonga,987,2019-06-12T07:49:39Z,2019-06-18T08:26:03Z,2019-06-18T08:26:04Z,MERGED,True,922,133,9,https://github.com/kenhys,grndb: add operation log into groonga.log,13,[],https://github.com/groonga/groonga/pull/987,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/987#issuecomment-501518787,"In the previous version, grndb operation is not logged into groonga.log.
It is better such operations are also logged into groonga.log.","@kenhys
I've finished a review.
Could you confirm my comments?",True,{}
groonga/groonga,https://github.com/groonga/groonga,987,2019-06-12T07:49:39Z,2019-06-18T08:26:03Z,2019-06-18T08:26:04Z,MERGED,True,922,133,9,https://github.com/kenhys,grndb: add operation log into groonga.log,13,[],https://github.com/groonga/groonga/pull/987,https://github.com/kenhys,3,https://github.com/groonga/groonga/pull/987#issuecomment-501550137,"In the previous version, grndb operation is not logged into groonga.log.
It is better such operations are also logged into groonga.log.",@komainu8 I've fixed. Are these fixes appropriate against review comment?,True,{}
groonga/groonga,https://github.com/groonga/groonga,987,2019-06-12T07:49:39Z,2019-06-18T08:26:03Z,2019-06-18T08:26:04Z,MERGED,True,922,133,9,https://github.com/kenhys,grndb: add operation log into groonga.log,13,[],https://github.com/groonga/groonga/pull/987,https://github.com/kenhys,4,https://github.com/groonga/groonga/pull/987#issuecomment-501566497,"In the previous version, grndb operation is not logged into groonga.log.
It is better such operations are also logged into groonga.log.",@kou could you review this PR?,True,{}
groonga/groonga,https://github.com/groonga/groonga,987,2019-06-12T07:49:39Z,2019-06-18T08:26:03Z,2019-06-18T08:26:04Z,MERGED,True,922,133,9,https://github.com/kenhys,grndb: add operation log into groonga.log,13,[],https://github.com/groonga/groonga/pull/987,https://github.com/kenhys,5,https://github.com/groonga/groonga/pull/987#issuecomment-502045911,"In the previous version, grndb operation is not logged into groonga.log.
It is better such operations are also logged into groonga.log.",@kou I've fixed. could you review again?,True,{}
groonga/groonga,https://github.com/groonga/groonga,987,2019-06-12T07:49:39Z,2019-06-18T08:26:03Z,2019-06-18T08:26:04Z,MERGED,True,922,133,9,https://github.com/kenhys,grndb: add operation log into groonga.log,13,[],https://github.com/groonga/groonga/pull/987,https://github.com/kenhys,6,https://github.com/groonga/groonga/pull/987#issuecomment-502622287,"In the previous version, grndb operation is not logged into groonga.log.
It is better such operations are also logged into groonga.log.","@kou I've fixed issues, I hope I fixed them appropriately. could you review again?",True,{}
groonga/groonga,https://github.com/groonga/groonga,987,2019-06-12T07:49:39Z,2019-06-18T08:26:03Z,2019-06-18T08:26:04Z,MERGED,True,922,133,9,https://github.com/kenhys,grndb: add operation log into groonga.log,13,[],https://github.com/groonga/groonga/pull/987,https://github.com/kou,7,https://github.com/groonga/groonga/pull/987#issuecomment-502969551,"In the previous version, grndb operation is not logged into groonga.log.
It is better such operations are also logged into groonga.log.","I've removed @suppress_options because using it with all groonga(...) is bothersome.
We can merge this when CI is green.",True,{}
groonga/groonga,https://github.com/groonga/groonga,988,2019-06-12T12:06:19Z,2019-06-12T21:07:20Z,2019-06-17T12:16:38Z,MERGED,True,14,14,1,https://github.com/komainu8,"Make enums UPPER_CASE for ""segment_xxx""",1,[],https://github.com/groonga/groonga/pull/988,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/988,A part of fix for issue #43.,A part of fix for issue #43.,True,{}
groonga/groonga,https://github.com/groonga/groonga,988,2019-06-12T12:06:19Z,2019-06-12T21:07:20Z,2019-06-17T12:16:38Z,MERGED,True,14,14,1,https://github.com/komainu8,"Make enums UPPER_CASE for ""segment_xxx""",1,[],https://github.com/groonga/groonga/pull/988,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/988#issuecomment-501254305,A part of fix for issue #43.,"@kou Could you review this PR, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,989,2019-06-14T02:29:59Z,2019-06-18T07:10:19Z,2019-06-18T23:37:50Z,MERGED,True,0,0,2,https://github.com/komainu8,test: fix typos,1,[],https://github.com/groonga/groonga/pull/989,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/989,"Currently, these tests are not checked.
Because these file names are not correct.
Was this done on purpose?","Currently, these tests are not checked.
Because these file names are not correct.
Was this done on purpose?",True,{}
groonga/groonga,https://github.com/groonga/groonga,989,2019-06-14T02:29:59Z,2019-06-18T07:10:19Z,2019-06-18T23:37:50Z,MERGED,True,0,0,2,https://github.com/komainu8,test: fix typos,1,[],https://github.com/groonga/groonga/pull/989,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/989#issuecomment-501954138,"Currently, these tests are not checked.
Because these file names are not correct.
Was this done on purpose?","@kenhys Could you review this PR, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,990,2019-06-14T02:45:55Z,2019-06-14T09:46:26Z,2019-06-21T05:03:54Z,MERGED,True,1,1,1,https://github.com/kenhys,appveyor: check empty environment correctly,1,[],https://github.com/groonga/groonga/pull/990,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/990,"In the previous version, when (null -eq """") condition
is evaluated, the following block is executed unexpectedly.","In the previous version, when (null -eq """") condition
is evaluated, the following block is executed unexpectedly.",True,{}
groonga/groonga,https://github.com/groonga/groonga,991,2019-06-17T12:37:51Z,2019-06-18T21:20:30Z,2019-06-18T23:33:19Z,MERGED,True,8,8,1,https://github.com/komainu8,"Make enums UPPER_CASE for ""flag_xxxx""",1,[],https://github.com/groonga/groonga/pull/991,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/991,A part of fix for issue #43.,A part of fix for issue #43.,True,{}
groonga/groonga,https://github.com/groonga/groonga,991,2019-06-17T12:37:51Z,2019-06-18T21:20:30Z,2019-06-18T23:33:19Z,MERGED,True,8,8,1,https://github.com/komainu8,"Make enums UPPER_CASE for ""flag_xxxx""",1,[],https://github.com/groonga/groonga/pull/991,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/991#issuecomment-502665209,A part of fix for issue #43.,"@kenhys Could you review this PR, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,991,2019-06-17T12:37:51Z,2019-06-18T21:20:30Z,2019-06-18T23:33:19Z,MERGED,True,8,8,1,https://github.com/komainu8,"Make enums UPPER_CASE for ""flag_xxxx""",1,[],https://github.com/groonga/groonga/pull/991,https://github.com/komainu8,3,https://github.com/groonga/groonga/pull/991#issuecomment-503082371,A part of fix for issue #43.,"@kou Could you review this PR, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,993,2019-06-18T04:25:36Z,2019-06-26T01:19:46Z,2019-10-11T08:36:22Z,CLOSED,False,420,12,9,https://github.com/kenhys,grndb: add --target-timestamp option,3,[],https://github.com/groonga/groonga/pull/993,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/993,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,993,2019-06-18T04:25:36Z,2019-06-26T01:19:46Z,2019-10-11T08:36:22Z,CLOSED,False,420,12,9,https://github.com/kenhys,grndb: add --target-timestamp option,3,[],https://github.com/groonga/groonga/pull/993,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/993#issuecomment-503373085,,@komainu8 could you review again?,True,{}
groonga/groonga,https://github.com/groonga/groonga,993,2019-06-18T04:25:36Z,2019-06-26T01:19:46Z,2019-10-11T08:36:22Z,CLOSED,False,420,12,9,https://github.com/kenhys,grndb: add --target-timestamp option,3,[],https://github.com/groonga/groonga/pull/993,https://github.com/komainu8,3,https://github.com/groonga/groonga/pull/993#issuecomment-503386297,,"Some tests are errors in TravisCI.
rb-grn-database.c: In function ‘rb_grn_database_recover’:
rb-grn-database.c:590:10: error: too few arguments to function ‘grn_db_recover’
     rc = grn_db_recover(context, database);

In addition, all tests are errors in AppVeyor.",True,{}
groonga/groonga,https://github.com/groonga/groonga,993,2019-06-18T04:25:36Z,2019-06-26T01:19:46Z,2019-10-11T08:36:22Z,CLOSED,False,420,12,9,https://github.com/kenhys,grndb: add --target-timestamp option,3,[],https://github.com/groonga/groonga/pull/993,https://github.com/kenhys,4,https://github.com/groonga/groonga/pull/993#issuecomment-505679336,,Already fixed. I'll close this PR.,True,{}
groonga/groonga,https://github.com/groonga/groonga,994,2019-06-18T13:04:56Z,2020-01-17T02:36:20Z,2020-01-17T02:36:24Z,CLOSED,False,15,8,1,https://github.com/komainu8,Use CaptureStackBackTrace,1,[],https://github.com/groonga/groonga/pull/994,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/994,"fix #962
TODO: Resolve build error.
TODO: Test","fix #962
TODO: Resolve build error.
TODO: Test",True,{}
groonga/groonga,https://github.com/groonga/groonga,995,2019-06-24T13:06:17Z,2019-06-26T21:50:36Z,2019-06-27T00:22:54Z,MERGED,True,10,10,1,https://github.com/komainu8,"Make enums UPPER_CASE for ""run_mode""",1,[],https://github.com/groonga/groonga/pull/995,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/995,A part of a fix for issue #43.,A part of a fix for issue #43.,True,{}
groonga/groonga,https://github.com/groonga/groonga,995,2019-06-24T13:06:17Z,2019-06-26T21:50:36Z,2019-06-27T00:22:54Z,MERGED,True,10,10,1,https://github.com/komainu8,"Make enums UPPER_CASE for ""run_mode""",1,[],https://github.com/groonga/groonga/pull/995,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/995#issuecomment-505001739,A part of a fix for issue #43.,"@kenhys Could you review this PR, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,995,2019-06-24T13:06:17Z,2019-06-26T21:50:36Z,2019-06-27T00:22:54Z,MERGED,True,10,10,1,https://github.com/komainu8,"Make enums UPPER_CASE for ""run_mode""",1,[],https://github.com/groonga/groonga/pull/995,https://github.com/komainu8,3,https://github.com/groonga/groonga/pull/995#issuecomment-505423461,A part of a fix for issue #43.,"@kou Could you review this PR, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,996,2019-06-25T05:47:58Z,2019-06-25T09:45:47Z,2019-06-25T09:45:47Z,MERGED,True,152,1,2,https://github.com/kenhys,doc: add grndb --since option document,2,[],https://github.com/groonga/groonga/pull/996,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/996,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,996,2019-06-25T05:47:58Z,2019-06-25T09:45:47Z,2019-06-25T09:45:47Z,MERGED,True,152,1,2,https://github.com/kenhys,doc: add grndb --since option document,2,[],https://github.com/groonga/groonga/pull/996,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/996#issuecomment-505306999,,"@komainu8 I've re,moved unexpected garbage && rebased it.",True,{}
groonga/groonga,https://github.com/groonga/groonga,999,2019-07-03T07:43:52Z,2019-11-06T01:30:16Z,2019-11-06T01:30:17Z,CLOSED,False,10,0,1,https://github.com/komainu8,mrb: add null check for preventing a crash,1,[],https://github.com/groonga/groonga/pull/999,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/999,"mrb_generate_code returns NULL when fails allocate memory in this function.
Groonga is crash executing MRB_PROC_SET_TARGET_CLASS when mrb_generate_code is NULL.
Because proc is write-accessed into MRB_PROC_SET_TARGET_CLASS as below.
(proc is return value of mrb_generate_code)
// `p` is `proc`
(p)->e.target_class = (tc);","mrb_generate_code returns NULL when fails allocate memory in this function.
Groonga is crash executing MRB_PROC_SET_TARGET_CLASS when mrb_generate_code is NULL.
Because proc is write-accessed into MRB_PROC_SET_TARGET_CLASS as below.
(proc is return value of mrb_generate_code)
// `p` is `proc`
(p)->e.target_class = (tc);",True,{}
groonga/groonga,https://github.com/groonga/groonga,999,2019-07-03T07:43:52Z,2019-11-06T01:30:16Z,2019-11-06T01:30:17Z,CLOSED,False,10,0,1,https://github.com/komainu8,mrb: add null check for preventing a crash,1,[],https://github.com/groonga/groonga/pull/999,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/999#issuecomment-507980369,"mrb_generate_code returns NULL when fails allocate memory in this function.
Groonga is crash executing MRB_PROC_SET_TARGET_CLASS when mrb_generate_code is NULL.
Because proc is write-accessed into MRB_PROC_SET_TARGET_CLASS as below.
(proc is return value of mrb_generate_code)
// `p` is `proc`
(p)->e.target_class = (tc);","@kenhys  Could you review this PR, please.",True,{}
groonga/groonga,https://github.com/groonga/groonga,999,2019-07-03T07:43:52Z,2019-11-06T01:30:16Z,2019-11-06T01:30:17Z,CLOSED,False,10,0,1,https://github.com/komainu8,mrb: add null check for preventing a crash,1,[],https://github.com/groonga/groonga/pull/999,https://github.com/kenhys,3,https://github.com/groonga/groonga/pull/999#issuecomment-507991678,"mrb_generate_code returns NULL when fails allocate memory in this function.
Groonga is crash executing MRB_PROC_SET_TARGET_CLASS when mrb_generate_code is NULL.
Because proc is write-accessed into MRB_PROC_SET_TARGET_CLASS as below.
(proc is return value of mrb_generate_code)
// `p` is `proc`
(p)->e.target_class = (tc);",I'll review.,True,{}
groonga/groonga,https://github.com/groonga/groonga,999,2019-07-03T07:43:52Z,2019-11-06T01:30:16Z,2019-11-06T01:30:17Z,CLOSED,False,10,0,1,https://github.com/komainu8,mrb: add null check for preventing a crash,1,[],https://github.com/groonga/groonga/pull/999,https://github.com/komainu8,4,https://github.com/groonga/groonga/pull/999#issuecomment-508003359,"mrb_generate_code returns NULL when fails allocate memory in this function.
Groonga is crash executing MRB_PROC_SET_TARGET_CLASS when mrb_generate_code is NULL.
Because proc is write-accessed into MRB_PROC_SET_TARGET_CLASS as below.
(proc is return value of mrb_generate_code)
// `p` is `proc`
(p)->e.target_class = (tc);",@kenhys Thank you for your comment. I'll fix other parts later.,True,{}
groonga/groonga,https://github.com/groonga/groonga,999,2019-07-03T07:43:52Z,2019-11-06T01:30:16Z,2019-11-06T01:30:17Z,CLOSED,False,10,0,1,https://github.com/komainu8,mrb: add null check for preventing a crash,1,[],https://github.com/groonga/groonga/pull/999,https://github.com/komainu8,5,https://github.com/groonga/groonga/pull/999#issuecomment-508003530,"mrb_generate_code returns NULL when fails allocate memory in this function.
Groonga is crash executing MRB_PROC_SET_TARGET_CLASS when mrb_generate_code is NULL.
Because proc is write-accessed into MRB_PROC_SET_TARGET_CLASS as below.
(proc is return value of mrb_generate_code)
// `p` is `proc`
(p)->e.target_class = (tc);","@kou Could you review this PR, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,1000,2019-07-05T16:10:13Z,2019-07-05T21:27:56Z,2019-07-06T06:40:50Z,MERGED,True,22,22,20,https://github.com/yagisumi,test: fix parameter name in table_create,1,[],https://github.com/groonga/groonga/pull/1000,https://github.com/yagisumi,1,https://github.com/groonga/groonga/pull/1000,"table_createのnormalizerが間違えられがちなので、直しました。
テストの結果に影響はありませんでした。
default_normalizer -> normalizer
normalize -> normalizer","table_createのnormalizerが間違えられがちなので、直しました。
テストの結果に影響はありませんでした。
default_normalizer -> normalizer
normalize -> normalizer",True,{}
groonga/groonga,https://github.com/groonga/groonga,1002,2019-07-08T04:38:04Z,2019-07-10T21:42:56Z,2019-07-25T07:56:38Z,MERGED,True,1,1,1,https://github.com/kenhys,Install missing COPYING,1,[],https://github.com/groonga/groonga/pull/1002,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/1002,Put COPYING under /usr/share/groonga/COPYING,Put COPYING under /usr/share/groonga/COPYING,True,{}
groonga/groonga,https://github.com/groonga/groonga,1002,2019-07-08T04:38:04Z,2019-07-10T21:42:56Z,2019-07-25T07:56:38Z,MERGED,True,1,1,1,https://github.com/kenhys,Install missing COPYING,1,[],https://github.com/groonga/groonga/pull/1002,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/1002#issuecomment-509904393,Put COPYING under /usr/share/groonga/COPYING,"@kou Thanks,  I've removed needless prefix from it.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1003,2019-07-08T04:38:16Z,2019-07-10T08:37:54Z,2019-10-11T08:37:11Z,MERGED,True,1,0,1,https://github.com/kenhys,windows: fix build error on MinGW,1,[],https://github.com/groonga/groonga/pull/1003,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/1003,"Patch via
msys2/MINGW-packages@9c76ae3#diff-b266d04f16a509dc5bd3a3d12ca9df53","Patch via
msys2/MINGW-packages@9c76ae3#diff-b266d04f16a509dc5bd3a3d12ca9df53",True,{}
groonga/groonga,https://github.com/groonga/groonga,1003,2019-07-08T04:38:16Z,2019-07-10T08:37:54Z,2019-10-11T08:37:11Z,MERGED,True,1,0,1,https://github.com/kenhys,windows: fix build error on MinGW,1,[],https://github.com/groonga/groonga/pull/1003,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/1003#issuecomment-509087555,"Patch via
msys2/MINGW-packages@9c76ae3#diff-b266d04f16a509dc5bd3a3d12ca9df53","Yes. (config.h not found)
Here is the actual error message:
In function 'parser_yylex',
    inlined from 'yylex' at /work/groonga/groonga.clean/vendor/mruby-source/mrbgems/mruby-compiler/core/parse.y:5979:10,
    inlined from 'yyparse' at /work/groonga/groonga.clean/vendor/mruby-build/host/mrbgems/mruby-compiler/core/y.tab.c:5442:16:
/work/groonga/groonga.clean/vendor/mruby-source/mrbgems/mruby-compiler/core/parse.y:5012:11: warning: 'strncat' output truncated before terminating nul copying 1 byte from a string of the same length [-Wstringop-truncation]
  CC       mruby-env/src/env.lo
  CC       mruby-file-stat/src/file-stat.lo
../../../groonga-9.0.4/vendor/mruby/mruby-file-stat/src/file-stat.c:11:10: fatal error: config.h: No such file or directory
   11 | #include ""config.h""
      |          ^~~~~~~~~~
compilation terminated.
  CC       mruby-dir/src/dir.lo
make[4]: *** [Makefile:1269: mruby-file-stat/src/file-stat.lo] Error 1

groonga-no-patch.log",True,{}
groonga/groonga,https://github.com/groonga/groonga,1003,2019-07-08T04:38:16Z,2019-07-10T08:37:54Z,2019-10-11T08:37:11Z,MERGED,True,1,0,1,https://github.com/kenhys,windows: fix build error on MinGW,1,[],https://github.com/groonga/groonga/pull/1003,https://github.com/kou,3,https://github.com/groonga/groonga/pull/1003#issuecomment-509087802,"Patch via
msys2/MINGW-packages@9c76ae3#diff-b266d04f16a509dc5bd3a3d12ca9df53","mruby-file-stat should use config.h generated by mruby-file-stat.
It should not use Groonga's config.h.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1003,2019-07-08T04:38:16Z,2019-07-10T08:37:54Z,2019-10-11T08:37:11Z,MERGED,True,1,0,1,https://github.com/kenhys,windows: fix build error on MinGW,1,[],https://github.com/groonga/groonga/pull/1003,https://github.com/kenhys,4,https://github.com/groonga/groonga/pull/1003#issuecomment-509088271,"Patch via
msys2/MINGW-packages@9c76ae3#diff-b266d04f16a509dc5bd3a3d12ca9df53","So, this build error shoulb be fixed in mruby-file-stat side.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1003,2019-07-08T04:38:16Z,2019-07-10T08:37:54Z,2019-10-11T08:37:11Z,MERGED,True,1,0,1,https://github.com/kenhys,windows: fix build error on MinGW,1,[],https://github.com/groonga/groonga/pull/1003,https://github.com/kou,5,https://github.com/groonga/groonga/pull/1003#issuecomment-509088628,"Patch via
msys2/MINGW-packages@9c76ae3#diff-b266d04f16a509dc5bd3a3d12ca9df53","We already have code for this case such as https://github.com/groonga/groonga/blob/master/vendor/mruby/Makefile.am#L43 .
I'm not sure why this is caused.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1003,2019-07-08T04:38:16Z,2019-07-10T08:37:54Z,2019-10-11T08:37:11Z,MERGED,True,1,0,1,https://github.com/kenhys,windows: fix build error on MinGW,1,[],https://github.com/groonga/groonga/pull/1003,https://github.com/kenhys,6,https://github.com/groonga/groonga/pull/1003#issuecomment-509100943,"Patch via
msys2/MINGW-packages@9c76ae3#diff-b266d04f16a509dc5bd3a3d12ca9df53","It seems that
mingw-w64-groonga\src\build-x86_64\vendor\mruby\mruby-file-stat\src\config.h exists.
According to verbose build log, under src/groonga-9.0.4 is expected?
libtool: compile:  x86_64-w64-mingw32-gcc -DHAVE_CONFIG_H -I../../../groonga-9.0.4/vendor/mruby/../mruby-source/include -I../../../groonga-9.0.4/vendor/mruby/../mruby-source/src -I../../../groonga-9.0.4/vendor/mruby/../mruby-source/mrbgems/mruby-compiler/core -I../../../groonga-9.0.4/vendor/mruby/../mruby-source/mrbgems/mruby-io/include -I../../../groonga-9.0.4/vendor/mruby/../mruby-source/mrbgems/mruby-time/include -I../../../groonga-9.0.4/vendor/mruby/../onigmo-source -DHAVE_ONIGMO_H -DMRB_INT64 -DMRB_BUILD_AS_DLL -DMRB_CORE -D_FORTIFY_SOURCE=2 -D__USE_MINGW_ANSI_STDIO=1 -march=x86-64 -mtune=generic -O2 -pipe -Wall -Wno-unused-but-set-variable -Wno-pointer-sign -Wno-declaration-after-statement -Wformat -Wno-format-truncation -Wstrict-aliasing=2 -Wdisabled-optimization -Wfloat-equal -Wpointer-arith -Wbad-function-cast -Wwrite-strings -Wmissing-field-initializers -Wno-float-equal -Wno-bad-function-cast -MT mruby-file-stat/src/file-stat.lo -MD -MP -MF mruby-file-stat/src/.deps/file-stat.Tpo -c ../../../groonga-9.0.4/vendor/mruby/mruby-file-stat/src/file-stat.c  -DDLL_EXPORT -DPIC -o mruby-file-stat/src/.libs/file-stat.o
../../../groonga-9.0.4/vendor/mruby/mruby-file-stat/src/file-stat.c:11:10: fatal error: config.h: No such file or directory
 #include ""config.h""
          ^~~~~~~~~~
compilation terminated.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1003,2019-07-08T04:38:16Z,2019-07-10T08:37:54Z,2019-10-11T08:37:11Z,MERGED,True,1,0,1,https://github.com/kenhys,windows: fix build error on MinGW,1,[],https://github.com/groonga/groonga/pull/1003,https://github.com/kou,7,https://github.com/groonga/groonga/pull/1003#issuecomment-509101549,"Patch via
msys2/MINGW-packages@9c76ae3#diff-b266d04f16a509dc5bd3a3d12ca9df53","under src/groonga-9.0.4 is expected?

Why?
-I$(builddir)/mruby-file-stat/src will be needed.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1003,2019-07-08T04:38:16Z,2019-07-10T08:37:54Z,2019-10-11T08:37:11Z,MERGED,True,1,0,1,https://github.com/kenhys,windows: fix build error on MinGW,1,[],https://github.com/groonga/groonga/pull/1003,https://github.com/kenhys,8,https://github.com/groonga/groonga/pull/1003#issuecomment-509108644,"Patch via
msys2/MINGW-packages@9c76ae3#diff-b266d04f16a509dc5bd3a3d12ca9df53","-I$(builddir)/mruby-file-stat/src will be needed.

This is what actually needed to fix(verified). I did wrong comment in  #1003 (comment)",True,{}
groonga/groonga,https://github.com/groonga/groonga,1003,2019-07-08T04:38:16Z,2019-07-10T08:37:54Z,2019-10-11T08:37:11Z,MERGED,True,1,0,1,https://github.com/kenhys,windows: fix build error on MinGW,1,[],https://github.com/groonga/groonga/pull/1003,https://github.com/kou,9,https://github.com/groonga/groonga/pull/1003#issuecomment-509573271,"Patch via
msys2/MINGW-packages@9c76ae3#diff-b266d04f16a509dc5bd3a3d12ca9df53","I think that we need a CI entry for MinGW on Windows for this case.
(It should be done in another pull request.)",True,{}
groonga/groonga,https://github.com/groonga/groonga,1003,2019-07-08T04:38:16Z,2019-07-10T08:37:54Z,2019-10-11T08:37:11Z,MERGED,True,1,0,1,https://github.com/kenhys,windows: fix build error on MinGW,1,[],https://github.com/groonga/groonga/pull/1003,https://github.com/kenhys,10,https://github.com/groonga/groonga/pull/1003#issuecomment-509904291,"Patch via
msys2/MINGW-packages@9c76ae3#diff-b266d04f16a509dc5bd3a3d12ca9df53",@kou Thanks! I've fixed listed order.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1003,2019-07-08T04:38:16Z,2019-07-10T08:37:54Z,2019-10-11T08:37:11Z,MERGED,True,1,0,1,https://github.com/kenhys,windows: fix build error on MinGW,1,[],https://github.com/groonga/groonga/pull/1003,https://github.com/kenhys,11,https://github.com/groonga/groonga/pull/1003#issuecomment-509912996,"Patch via
msys2/MINGW-packages@9c76ae3#diff-b266d04f16a509dc5bd3a3d12ca9df53","I think that we need a CI entry for MinGW on Windows for this case.
(It should be done in another pull request.)

I'll try it.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1004,2019-07-08T09:02:26Z,2019-07-18T07:36:18Z,2019-07-18T07:36:27Z,MERGED,True,36,47,3,https://github.com/komainu8,rpm: add support Amazon Linux,17,[],https://github.com/groonga/groonga/pull/1004,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1004,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1004,2019-07-08T09:02:26Z,2019-07-18T07:36:18Z,2019-07-18T07:36:27Z,MERGED,True,36,47,3,https://github.com/komainu8,rpm: add support Amazon Linux,17,[],https://github.com/groonga/groonga/pull/1004,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/1004#issuecomment-510280143,,"@kenhys Could you review this PR, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,1004,2019-07-08T09:02:26Z,2019-07-18T07:36:18Z,2019-07-18T07:36:27Z,MERGED,True,36,47,3,https://github.com/komainu8,rpm: add support Amazon Linux,17,[],https://github.com/groonga/groonga/pull/1004,https://github.com/komainu8,3,https://github.com/groonga/groonga/pull/1004#issuecomment-510344117,,"@kenhys Thank you for your comment.
I've fixed it.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1004,2019-07-08T09:02:26Z,2019-07-18T07:36:18Z,2019-07-18T07:36:27Z,MERGED,True,36,47,3,https://github.com/komainu8,rpm: add support Amazon Linux,17,[],https://github.com/groonga/groonga/pull/1004,https://github.com/komainu8,4,https://github.com/groonga/groonga/pull/1004#issuecomment-510346142,,"@kou Could you review this PR, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,1004,2019-07-08T09:02:26Z,2019-07-18T07:36:18Z,2019-07-18T07:36:27Z,MERGED,True,36,47,3,https://github.com/komainu8,rpm: add support Amazon Linux,17,[],https://github.com/groonga/groonga/pull/1004,https://github.com/komainu8,5,https://github.com/groonga/groonga/pull/1004#issuecomment-512669684,,"@kou Thank you for your comments.
I've fixed them.
However, I couldn't move %post section to %install. Because %install section is executed when building RPM.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1004,2019-07-08T09:02:26Z,2019-07-18T07:36:18Z,2019-07-18T07:36:27Z,MERGED,True,36,47,3,https://github.com/komainu8,rpm: add support Amazon Linux,17,[],https://github.com/groonga/groonga/pull/1004,https://github.com/komainu8,6,https://github.com/groonga/groonga/pull/1004#issuecomment-512688673,,"@kou Thank you for your comments.
I've fixed them.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1004,2019-07-08T09:02:26Z,2019-07-18T07:36:18Z,2019-07-18T07:36:27Z,MERGED,True,36,47,3,https://github.com/komainu8,rpm: add support Amazon Linux,17,[],https://github.com/groonga/groonga/pull/1004,https://github.com/komainu8,7,https://github.com/groonga/groonga/pull/1004#issuecomment-512692446,,I've removed needless codes from build-release-rpm.sh.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1005,2019-07-10T07:29:37Z,2019-10-07T03:39:16Z,2019-10-11T08:37:24Z,CLOSED,False,101,0,2,https://github.com/kenhys,appveyor: CI out-of-tree build with MINGW,1,[],https://github.com/groonga/groonga/pull/1005,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/1005,enable checking GitHub: #1003 build error issue continuously.,enable checking GitHub: #1003 build error issue continuously.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1005,2019-07-10T07:29:37Z,2019-10-07T03:39:16Z,2019-10-11T08:37:24Z,CLOSED,False,101,0,2,https://github.com/kenhys,appveyor: CI out-of-tree build with MINGW,1,[],https://github.com/groonga/groonga/pull/1005,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/1005#issuecomment-509992424,enable checking GitHub: #1003 build error issue continuously.,"It can't be reproducible on Appveyor. (without patch, build failure is expected but not.)
groonga-no-patch-makepkg-mingw.log expected failure.
groonga-no-patch-on-appveyor.log
groonga-no-patch-on-local.log",True,{}
groonga/groonga,https://github.com/groonga/groonga,1005,2019-07-10T07:29:37Z,2019-10-07T03:39:16Z,2019-10-11T08:37:24Z,CLOSED,False,101,0,2,https://github.com/kenhys,appveyor: CI out-of-tree build with MINGW,1,[],https://github.com/groonga/groonga/pull/1005,https://github.com/kou,3,https://github.com/groonga/groonga/pull/1005#issuecomment-538828413,enable checking GitHub: #1003 build error issue continuously.,Done by GitHub Actions.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1008,2019-07-19T09:01:08Z,2019-07-26T03:48:04Z,2019-07-26T03:48:04Z,MERGED,True,74,0,2,https://github.com/kenhys,windows: download appveyor release artifacts automatically,3,[],https://github.com/groonga/groonga/pull/1008,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/1008,It download artifacts files and rename to distinct filename.,It download artifacts files and rename to distinct filename.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1008,2019-07-19T09:01:08Z,2019-07-26T03:48:04Z,2019-07-26T03:48:04Z,MERGED,True,74,0,2,https://github.com/kenhys,windows: download appveyor release artifacts automatically,3,[],https://github.com/groonga/groonga/pull/1008,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/1008#issuecomment-514484327,It download artifacts files and rename to distinct filename.,"@kou Thanks, I've fixed to use veyor gem. (it can fetch job_id correctly)",True,{}
groonga/groonga,https://github.com/groonga/groonga,1016,2019-07-23T02:41:15Z,2019-07-30T06:41:39Z,2019-07-30T06:41:42Z,MERGED,True,293,11,2,https://github.com/komainu8,doc: add news topics for 9.0.5,20,[],https://github.com/groonga/groonga/pull/1016,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1016,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1016,2019-07-23T02:41:15Z,2019-07-30T06:41:39Z,2019-07-30T06:41:42Z,MERGED,True,293,11,2,https://github.com/komainu8,doc: add news topics for 9.0.5,20,[],https://github.com/groonga/groonga/pull/1016,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/1016#issuecomment-516204705,,"@kenhys Thank you for your comments.
I've fixed them.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1017,2019-07-24T03:22:06Z,2019-07-24T05:41:41Z,2019-07-25T07:56:29Z,MERGED,True,1,1,1,https://github.com/kenhys,grn_output_range_normalize: fix wrong variable reference,1,[],https://github.com/groonga/groonga/pull/1017,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/1017,"In the previous commit, it breaks range_filter/too_small_limit test case.
range_filter Memos id --limit -2
-[[[-22,0.0,0.0],""[range_filter] too small limit: <-2>""]]
-#|e| [range_filter] too small limit: <-2>
+[[0,0.0,0.0],[[[""_id"",""UInt32""],[""id"",""Int32""],[""text"",""Text""]]]]","In the previous commit, it breaks range_filter/too_small_limit test case.
range_filter Memos id --limit -2
-[[[-22,0.0,0.0],""[range_filter] too small limit: <-2>""]]
-#|e| [range_filter] too small limit: <-2>
+[[0,0.0,0.0],[[[""_id"",""UInt32""],[""id"",""Int32""],[""text"",""Text""]]]]",True,{}
groonga/groonga,https://github.com/groonga/groonga,1021,2019-08-01T08:23:51Z,2019-08-02T00:45:10Z,2019-08-02T00:45:13Z,MERGED,True,31,1,3,https://github.com/komainu8,Fix invalid mode error,1,[],https://github.com/groonga/groonga/pull/1021,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1021,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1021,2019-08-01T08:23:51Z,2019-08-02T00:45:10Z,2019-08-02T00:45:13Z,MERGED,True,31,1,3,https://github.com/komainu8,Fix invalid mode error,1,[],https://github.com/groonga/groonga/pull/1021,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/1021#issuecomment-517259996,,"@kenhys Thank you for your comments.
I've fixed them.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1022,2019-08-02T14:11:34Z,2019-08-05T21:40:03Z,2019-08-05T23:22:34Z,MERGED,True,7,7,1,https://github.com/komainu8,"Make enum UPPSER_CASE for ""mode_xxx""",1,[],https://github.com/groonga/groonga/pull/1022,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1022,A part of a fix for issue #43.,A part of a fix for issue #43.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1022,2019-08-02T14:11:34Z,2019-08-05T21:40:03Z,2019-08-05T23:22:34Z,MERGED,True,7,7,1,https://github.com/komainu8,"Make enum UPPSER_CASE for ""mode_xxx""",1,[],https://github.com/groonga/groonga/pull/1022,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/1022#issuecomment-517715816,A part of a fix for issue #43.,"@kenhys Could you review this PR, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,1022,2019-08-02T14:11:34Z,2019-08-05T21:40:03Z,2019-08-05T23:22:34Z,MERGED,True,7,7,1,https://github.com/komainu8,"Make enum UPPSER_CASE for ""mode_xxx""",1,[],https://github.com/groonga/groonga/pull/1022,https://github.com/komainu8,3,https://github.com/groonga/groonga/pull/1022#issuecomment-518203427,A part of a fix for issue #43.,"@kou @kenhys
Thank you for your comments.
I've fixed it.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1023,2019-08-04T08:05:04Z,2019-08-04T21:32:13Z,2019-08-05T12:29:33Z,MERGED,True,9,21,5,https://github.com/yagisumi,doc: fix format of values,2,[],https://github.com/groonga/groonga/pull/1023,https://github.com/yagisumi,1,https://github.com/groonga/groonga/pull/1023,"loadするデータの書式がおかしかったので直しました。
読み込まれるデータが変更されたので、update_execution_example.pyでexampleを再出力しました。","loadするデータの書式がおかしかったので直しました。
読み込まれるデータが変更されたので、update_execution_example.pyでexampleを再出力しました。",True,{}
groonga/groonga,https://github.com/groonga/groonga,1023,2019-08-04T08:05:04Z,2019-08-04T21:32:13Z,2019-08-05T12:29:33Z,MERGED,True,9,21,5,https://github.com/yagisumi,doc: fix format of values,2,[],https://github.com/groonga/groonga/pull/1023,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1023#issuecomment-518038006,"loadするデータの書式がおかしかったので直しました。
読み込まれるデータが変更されたので、update_execution_example.pyでexampleを再出力しました。","あぁ。これは変ですね。
ありがとうございます！",True,{}
groonga/groonga,https://github.com/groonga/groonga,1024,2019-08-04T09:29:14Z,2019-08-04T21:36:11Z,2019-08-05T12:32:07Z,MERGED,True,34,1,1,https://github.com/yagisumi,doc: update an example in tutorial,1,[],https://github.com/groonga/groonga/pull/1024,https://github.com/yagisumi,1,https://github.com/groonga/groonga/pull/1024,チュートリアルのマイクロブログでexampleが一つおかしかったので、update_execution_example.pyで再出力しました。,チュートリアルのマイクロブログでexampleが一つおかしかったので、update_execution_example.pyで再出力しました。,True,{}
groonga/groonga,https://github.com/groonga/groonga,1024,2019-08-04T09:29:14Z,2019-08-04T21:36:11Z,2019-08-05T12:32:07Z,MERGED,True,34,1,1,https://github.com/yagisumi,doc: update an example in tutorial,1,[],https://github.com/groonga/groonga/pull/1024,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1024#issuecomment-518038319,チュートリアルのマイクロブログでexampleが一つおかしかったので、update_execution_example.pyで再出力しました。,"たしかにおかしいですね。
ありがとうございます！",True,{}
groonga/groonga,https://github.com/groonga/groonga,1026,2019-08-06T06:20:25Z,2019-08-06T07:17:35Z,2019-10-11T08:32:47Z,MERGED,True,17,0,1,https://github.com/kenhys,Add missing check about m4 macro availability,1,[],https://github.com/groonga/groonga/pull/1026,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/1026,"When RapidJSON support is enabled, proper compiler option must be
set by AX_CXX_COMPILE_STDCXX_11 macro. This m4 macro
is distributed in autoconf-archive package. We need to
enable it before regenerating configure script correctly.","When RapidJSON support is enabled, proper compiler option must be
set by AX_CXX_COMPILE_STDCXX_11 macro. This m4 macro
is distributed in autoconf-archive package. We need to
enable it before regenerating configure script correctly.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1026,2019-08-06T06:20:25Z,2019-08-06T07:17:35Z,2019-10-11T08:32:47Z,MERGED,True,17,0,1,https://github.com/kenhys,Add missing check about m4 macro availability,1,[],https://github.com/groonga/groonga/pull/1026,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/1026#issuecomment-518533982,"When RapidJSON support is enabled, proper compiler option must be
set by AX_CXX_COMPILE_STDCXX_11 macro. This m4 macro
is distributed in autoconf-archive package. We need to
enable it before regenerating configure script correctly.","@komainu8 Thanks, I've fixed based on your review.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1026,2019-08-06T06:20:25Z,2019-08-06T07:17:35Z,2019-10-11T08:32:47Z,MERGED,True,17,0,1,https://github.com/kenhys,Add missing check about m4 macro availability,1,[],https://github.com/groonga/groonga/pull/1026,https://github.com/kou,3,https://github.com/groonga/groonga/pull/1026#issuecomment-518896118,"When RapidJSON support is enabled, proper compiler option must be
set by AX_CXX_COMPILE_STDCXX_11 macro. This m4 macro
is distributed in autoconf-archive package. We need to
enable it before regenerating configure script correctly.","CentOS 6 doesn't provide autoconf-archive. So we didn't require autoconf-archive by m4_ifdef([AX_CXX_COMPILE_STDCXX_11], ...).",True,{}
groonga/groonga,https://github.com/groonga/groonga,1026,2019-08-06T06:20:25Z,2019-08-06T07:17:35Z,2019-10-11T08:32:47Z,MERGED,True,17,0,1,https://github.com/kenhys,Add missing check about m4 macro availability,1,[],https://github.com/groonga/groonga/pull/1026,https://github.com/kenhys,4,https://github.com/groonga/groonga/pull/1026#issuecomment-518934392,"When RapidJSON support is enabled, proper compiler option must be
set by AX_CXX_COMPILE_STDCXX_11 macro. This m4 macro
is distributed in autoconf-archive package. We need to
enable it before regenerating configure script correctly.","Thanks, 7241517 is a better approach.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1027,2019-08-06T08:30:17Z,2019-08-07T03:04:35Z,2019-08-07T03:06:07Z,MERGED,True,87,0,2,https://github.com/komainu8,test select match_columns scorer: add a test for OR,1,[],https://github.com/groonga/groonga/pull/1027,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1027,Fix #293,Fix #293,True,{}
groonga/groonga,https://github.com/groonga/groonga,1027,2019-08-06T08:30:17Z,2019-08-07T03:04:35Z,2019-08-07T03:06:07Z,MERGED,True,87,0,2,https://github.com/komainu8,test select match_columns scorer: add a test for OR,1,[],https://github.com/groonga/groonga/pull/1027,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/1027#issuecomment-518569793,Fix #293,"@kenhys Could you review this PR, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,1028,2019-08-07T06:58:27Z,2019-08-08T00:20:53Z,2019-08-08T00:39:11Z,MERGED,True,114,1,3,https://github.com/komainu8,Fix a bug that doesn't use a suitable index,1,[],https://github.com/groonga/groonga/pull/1028,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1028,Fixed #1007,Fixed #1007,True,{}
groonga/groonga,https://github.com/groonga/groonga,1028,2019-08-07T06:58:27Z,2019-08-08T00:20:53Z,2019-08-08T00:39:11Z,MERGED,True,114,1,3,https://github.com/komainu8,Fix a bug that doesn't use a suitable index,1,[],https://github.com/groonga/groonga/pull/1028,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/1028#issuecomment-519008413,Fixed #1007,"@kou Could you review this PR, please?",True,{}
groonga/groonga,https://github.com/groonga/groonga,1028,2019-08-07T06:58:27Z,2019-08-08T00:20:53Z,2019-08-08T00:39:11Z,MERGED,True,114,1,3,https://github.com/komainu8,Fix a bug that doesn't use a suitable index,1,[],https://github.com/groonga/groonga/pull/1028,https://github.com/komainu8,3,https://github.com/groonga/groonga/pull/1028#issuecomment-519307739,Fixed #1007,"@kou Thank you for your comment.
I've fixed it.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1029,2019-08-08T00:10:39Z,2019-08-26T09:17:57Z,2019-08-26T09:18:04Z,MERGED,True,99,9,2,https://github.com/komainu8,doc: add news topics for 9.0.7,8,[],https://github.com/groonga/groonga/pull/1029,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1029,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1030,2019-08-14T01:55:47Z,2019-08-15T07:44:55Z,2019-08-15T07:44:55Z,MERGED,True,51,22,1,https://github.com/yu,Detect libedit at configure,4,[],https://github.com/groonga/groonga/pull/1030,https://github.com/yu,1,https://github.com/groonga/groonga/pull/1030,"The configure phase did not detect libedit despite installing dev files and this fix makes it work properly.
Verified on FreeBSD 11 and Debian 9.","The configure phase did not detect libedit despite installing dev files and this fix makes it work properly.
Verified on FreeBSD 11 and Debian 9.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1030,2019-08-14T01:55:47Z,2019-08-15T07:44:55Z,2019-08-15T07:44:55Z,MERGED,True,51,22,1,https://github.com/yu,Detect libedit at configure,4,[],https://github.com/groonga/groonga/pull/1030,https://github.com/yu,2,https://github.com/groonga/groonga/pull/1030#issuecomment-521510278,"The configure phase did not detect libedit despite installing dev files and this fix makes it work properly.
Verified on FreeBSD 11 and Debian 9.","Appreciate your review!
So basically b39ce25 checks conditions in a better way and deals with --with-XXX style, plus vanishes unnecessaries! Now pkg-config primally runs, and as its fallback AC_CHECK will take care of them with PATH info if it's mentioned so gets no pkgconf env (so was mine) covered.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1032,2019-08-20T10:32:59Z,2019-08-20T21:49:37Z,2019-08-20T21:49:37Z,MERGED,True,1,1,1,https://github.com/kenhys,doc: update to Sphinx 2.2.0,1,[],https://github.com/groonga/groonga/pull/1032,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/1032,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1033,2019-08-21T03:37:47Z,2019-08-21T21:15:28Z,2019-08-21T21:15:28Z,MERGED,True,13,17,4,https://github.com/kenhys,doc: fix Sphinx warnings on Travis-CI,6,[],https://github.com/groonga/groonga/pull/1033,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/1033,"This PR fixes the following warnings:
/home/travis/build/groonga/groonga/doc/source/news.rst:194: WARNING: unknown document: /reference/window_functions
/home/travis/build/groonga/groonga/doc/source/reference/configuration.rst:46: WARNING: unknown document: reference/commands/config_delete
/home/travis/build/groonga/groonga/doc/source/reference/configuration.rst:47: WARNING: unknown document: reference/commands/config_get
/home/travis/build/groonga/groonga/doc/source/reference/configuration.rst:48: WARNING: unknown document: reference/commands/config_set
/home/travis/build/groonga/groonga/doc/source/news.rst:68: WARNING: inconsistent term references in translated message. original: [], translated: [':doc:/reference/functions/highlight_html', ':doc:reference/functions/snippet_html']","This PR fixes the following warnings:
/home/travis/build/groonga/groonga/doc/source/news.rst:194: WARNING: unknown document: /reference/window_functions
/home/travis/build/groonga/groonga/doc/source/reference/configuration.rst:46: WARNING: unknown document: reference/commands/config_delete
/home/travis/build/groonga/groonga/doc/source/reference/configuration.rst:47: WARNING: unknown document: reference/commands/config_get
/home/travis/build/groonga/groonga/doc/source/reference/configuration.rst:48: WARNING: unknown document: reference/commands/config_set
/home/travis/build/groonga/groonga/doc/source/news.rst:68: WARNING: inconsistent term references in translated message. original: [], translated: [':doc:/reference/functions/highlight_html', ':doc:reference/functions/snippet_html']",True,{}
groonga/groonga,https://github.com/groonga/groonga,1034,2019-08-23T00:26:56Z,2019-09-03T08:13:00Z,2019-10-11T08:37:56Z,CLOSED,False,4,2,1,https://github.com/kou,debug: enable RDP,1,[],https://github.com/groonga/groonga/pull/1034,https://github.com/kou,1,https://github.com/groonga/groonga/pull/1034,Don't merge this.,Don't merge this.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1035,2019-08-23T08:15:53Z,2019-09-06T02:09:07Z,2019-10-11T08:34:44Z,CLOSED,False,9,3,1,https://github.com/kenhys,Fix missing files dbg fullpath,3,[],https://github.com/groonga/groonga/pull/1035,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/1035,DO NOT MERGE BECAUSE OF DEBUG,DO NOT MERGE BECAUSE OF DEBUG,True,{}
groonga/groonga,https://github.com/groonga/groonga,1036,2019-08-26T06:33:45Z,2019-08-26T06:50:34Z,2019-10-11T08:35:53Z,MERGED,True,2,2,1,https://github.com/kenhys,packages ubuntu: make more robust archive detection,3,[],https://github.com/groonga/groonga/pull/1036,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/1036,It supports tar.xz and so on.,It supports tar.xz and so on.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1038,2019-09-02T06:07:18Z,2019-09-03T05:16:20Z,2019-09-03T08:21:35Z,MERGED,True,163,30,3,https://github.com/komainu8,Add support sequential search for sub filter,6,[],https://github.com/groonga/groonga/pull/1038,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1038,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1039,2019-09-03T07:24:37Z,2019-09-03T08:12:32Z,2019-09-03T08:21:24Z,MERGED,True,190,0,5,https://github.com/komainu8,Add support refrence vector,7,[],https://github.com/groonga/groonga/pull/1039,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1039,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1040,2019-09-04T01:23:55Z,2019-09-26T02:29:34Z,2019-09-26T02:29:37Z,MERGED,True,100,5,2,https://github.com/komainu8,doc: add news topics for 9.0.8,1,[],https://github.com/groonga/groonga/pull/1040,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1040,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1041,2019-09-05T06:46:06Z,2019-09-12T03:18:40Z,2019-11-06T01:30:04Z,CLOSED,False,49,0,3,https://github.com/komainu8,Add a feature that ignores the under construction index,4,[],https://github.com/groonga/groonga/pull/1041,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1041,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1042,2019-09-05T08:04:27Z,2019-09-06T02:25:25Z,2019-10-11T08:29:05Z,MERGED,True,70,52,3,https://github.com/kenhys,logical_range_filter: fix exception about closing same object twice,3,[],https://github.com/groonga/groonga/pull/1042,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/1042,"This commit fixes the following error:
#|e| ArgumentError: already closed object
This exception occurs when max_n_unmatched_records estimation
is not accurate. In such a case, execute_filter(nil) is executed
as a fallback without specifying range index, as a result, no
method exception is raised and closes same object twice in
ensure block.","This commit fixes the following error:
#|e| ArgumentError: already closed object
This exception occurs when max_n_unmatched_records estimation
is not accurate. In such a case, execute_filter(nil) is executed
as a fallback without specifying range index, as a result, no
method exception is raised and closes same object twice in
ensure block.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1043,2019-09-10T12:05:49Z,2019-09-11T08:15:41Z,2019-09-11T12:39:04Z,MERGED,True,2,2,2,https://github.com/komainu8,travis: prevent timeout errors due to no output for 10 minutes,1,[],https://github.com/groonga/groonga/pull/1043,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1043,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1044,2019-09-18T08:54:45Z,2019-09-25T01:10:58Z,2019-10-11T08:28:31Z,MERGED,True,207,0,7,https://github.com/kenhys,"packages: add rake task for build deb,rpm packages",10,[],https://github.com/groonga/groonga/pull/1044,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/1044,"It is aimed to replace current build process (Vagrant) for
CI in the future.","It is aimed to replace current build process (Vagrant) for
CI in the future.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1047,2019-09-24T08:23:22Z,2019-10-05T02:13:48Z,2019-10-11T08:28:07Z,MERGED,True,136,0,6,https://github.com/kenhys,"between: support between(value, ...) again",2,[],https://github.com/groonga/groonga/pull/1047,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/1047,"This adds tests for this case. Master already supports this case.
GitHub: fix #1045
Reported by yagisumi. Thanks!!!","This adds tests for this case. Master already supports this case.
GitHub: fix #1045
Reported by yagisumi. Thanks!!!",True,{}
groonga/groonga,https://github.com/groonga/groonga,1048,2019-09-30T06:09:39Z,2019-10-11T09:10:50Z,2019-10-15T01:31:06Z,MERGED,True,93,12,7,https://github.com/kenhys,packages apt: enable test during building deb package,1,[],https://github.com/groonga/groonga/pull/1048,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/1048,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1048,2019-09-30T06:09:39Z,2019-10-11T09:10:50Z,2019-10-15T01:31:06Z,MERGED,True,93,12,7,https://github.com/kenhys,packages apt: enable test during building deb package,1,[],https://github.com/groonga/groonga/pull/1048,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1048#issuecomment-540996207,,"I hope that you don't merge your pull request by yourself.
Normally, your pull request has several concerns without review.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1049,2019-10-08T02:29:51Z,2019-10-29T07:50:43Z,2019-10-29T07:50:47Z,MERGED,True,147,11,2,https://github.com/komainu8,doc: add news topics for 9.0.9,8,[],https://github.com/groonga/groonga/pull/1049,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1049,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1049,2019-10-08T02:29:51Z,2019-10-29T07:50:43Z,2019-10-29T07:50:47Z,MERGED,True,147,11,2,https://github.com/komainu8,doc: add news topics for 9.0.9,8,[],https://github.com/groonga/groonga/pull/1049,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/1049#issuecomment-547286762,,"@kenhys Thank you for your comments.
I've fixed them.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1050,2019-10-10T05:13:47Z,2019-10-11T04:42:09Z,2019-10-11T12:07:53Z,CLOSED,False,5,2,2,https://github.com/komainu8,Make a record of sending a message into a query log,2,[],https://github.com/groonga/groonga/pull/1050,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1050,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1051,2019-10-10T06:48:20Z,2019-10-11T05:41:37Z,2019-10-11T12:07:42Z,CLOSED,False,21,2,5,https://github.com/komainu8,Add statistics for the number of requests in the queue into the output of the status command,3,[],https://github.com/groonga/groonga/pull/1051,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1051,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1052,2019-10-10T07:10:42Z,2019-10-11T05:44:05Z,2019-10-11T12:07:34Z,CLOSED,False,1,1,1,https://github.com/komainu8,com: fix a bug that conditional expression always false,1,[],https://github.com/groonga/groonga/pull/1052,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1052,"I think if (!(q->next = e->next)) is always false.
So, q->tail = &q->next; doesn't execute.
Does this code on purpose, or a bug?","I think if (!(q->next = e->next)) is always false.
So, q->tail = &q->next; doesn't execute.
Does this code on purpose, or a bug?",True,{}
groonga/groonga,https://github.com/groonga/groonga,1052,2019-10-10T07:10:42Z,2019-10-11T05:44:05Z,2019-10-11T12:07:34Z,CLOSED,False,1,1,1,https://github.com/komainu8,com: fix a bug that conditional expression always false,1,[],https://github.com/groonga/groonga/pull/1052,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1052#issuecomment-540917070,"I think if (!(q->next = e->next)) is always false.
So, q->tail = &q->next; doesn't execute.
Does this code on purpose, or a bug?","If e->next is not NULL, it's true.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1054,2019-10-11T14:38:39Z,2019-10-11T20:51:08Z,2019-10-14T12:15:07Z,MERGED,True,2,4,1,https://github.com/komainu8,normalizer: remove a unuse argument,1,[],https://github.com/groonga/groonga/pull/1054,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1054,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1056,2019-10-21T03:36:33Z,2019-10-21T06:21:42Z,2019-10-21T06:21:42Z,MERGED,True,73,1,2,https://github.com/kenhys,packages: add support to build with docker,8,[],https://github.com/groonga/groonga/pull/1056,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/1056,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1057,2019-10-21T04:58:04Z,2019-10-21T06:59:58Z,2019-10-21T06:59:58Z,MERGED,True,9,1,1,https://github.com/kenhys,pacakges: support more target (APT_TARGETS),2,[],https://github.com/groonga/groonga/pull/1057,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/1057,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1057,2019-10-21T04:58:04Z,2019-10-21T06:59:58Z,2019-10-21T06:59:58Z,MERGED,True,9,1,1,https://github.com/kenhys,pacakges: support more target (APT_TARGETS),2,[],https://github.com/groonga/groonga/pull/1057,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/1057#issuecomment-544349110,,"After #1056 has been merged, I'll rebase this PR",True,{}
groonga/groonga,https://github.com/groonga/groonga,1058,2019-10-23T05:08:34Z,2019-10-23T05:14:51Z,2019-10-23T05:14:51Z,CLOSED,False,73,0,1,https://github.com/kenhys,packages: support to build with docker (YUM_TARGETS),2,[],https://github.com/groonga/groonga/pull/1058,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/1058,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1058,2019-10-23T05:08:34Z,2019-10-23T05:14:51Z,2019-10-23T05:14:51Z,CLOSED,False,73,0,1,https://github.com/kenhys,packages: support to build with docker (YUM_TARGETS),2,[],https://github.com/groonga/groonga/pull/1058,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/1058#issuecomment-545270185,,"Hmm, at first, debian specific task may be added in the future work, so it may be better to split into new workflow.
But it seems that enaming debian.yml -> package.yml and adding centos into matrix may be better
at the moment.
I'll fix them.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1059,2019-10-23T06:02:27Z,2019-10-24T08:16:25Z,2019-10-24T08:16:25Z,MERGED,True,29,46,10,https://github.com/kenhys,packages: support CentOS workflow,9,[],https://github.com/groonga/groonga/pull/1059,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/1059,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1060,2019-10-23T08:31:44Z,2019-10-28T09:48:53Z,2019-10-28T09:49:05Z,MERGED,True,65,1,2,https://github.com/komainu8,doc groonga-httpd: add a explanation about access log,10,[],https://github.com/groonga/groonga/pull/1060,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1060,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1060,2019-10-23T08:31:44Z,2019-10-28T09:48:53Z,2019-10-28T09:49:05Z,MERGED,True,65,1,2,https://github.com/komainu8,doc groonga-httpd: add a explanation about access log,10,[],https://github.com/groonga/groonga/pull/1060,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/1060#issuecomment-545399263,,"@kenhys Thank you for your comment.
I've fixed it.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1060,2019-10-23T08:31:44Z,2019-10-28T09:48:53Z,2019-10-28T09:49:05Z,MERGED,True,65,1,2,https://github.com/komainu8,doc groonga-httpd: add a explanation about access log,10,[],https://github.com/groonga/groonga/pull/1060,https://github.com/komainu8,3,https://github.com/groonga/groonga/pull/1060#issuecomment-546870104,,"@kou Thank you for your comments.
I've fixed them.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1061,2019-10-28T07:20:01Z,2019-10-28T08:17:55Z,2019-10-28T08:21:45Z,MERGED,True,25,0,1,https://github.com/komainu8,Add a tool for executing index_column_diff,8,[],https://github.com/groonga/groonga/pull/1061,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1061,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1063,2019-10-29T05:42:32Z,2019-10-29T05:42:49Z,2019-10-29T07:14:28Z,MERGED,True,35,3,3,https://github.com/kenhys,packages yum: support CentOS 8,1,[],https://github.com/groonga/groonga/pull/1063,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/1063,"Because of some *-devel packages are missing, just disable them for a
while.","Because of some *-devel packages are missing, just disable them for a
while.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1063,2019-10-29T05:42:32Z,2019-10-29T05:42:49Z,2019-10-29T07:14:28Z,MERGED,True,35,3,3,https://github.com/kenhys,packages yum: support CentOS 8,1,[],https://github.com/groonga/groonga/pull/1063,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1063#issuecomment-547281683,"Because of some *-devel packages are missing, just disable them for a
while.",We should use dnf instead of yum.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1063,2019-10-29T05:42:32Z,2019-10-29T05:42:49Z,2019-10-29T07:14:28Z,MERGED,True,35,3,3,https://github.com/kenhys,packages yum: support CentOS 8,1,[],https://github.com/groonga/groonga/pull/1063,https://github.com/kenhys,3,https://github.com/groonga/groonga/pull/1063#issuecomment-547287883,"Because of some *-devel packages are missing, just disable them for a
while.",I've fixed them. Thanks!,True,{}
groonga/groonga,https://github.com/groonga/groonga,1064,2019-10-30T03:26:57Z,2019-10-30T04:38:33Z,2019-10-30T04:38:33Z,MERGED,True,7,2,1,https://github.com/kenhys,packages yum: use bundled RapidJSON on CentOS 8,2,[],https://github.com/groonga/groonga/pull/1064,https://github.com/kenhys,1,https://github.com/groonga/groonga/pull/1064,rapidjson package is not available yet on CentOS 8,rapidjson package is not available yet on CentOS 8,True,{}
groonga/groonga,https://github.com/groonga/groonga,1064,2019-10-30T03:26:57Z,2019-10-30T04:38:33Z,2019-10-30T04:38:33Z,MERGED,True,7,2,1,https://github.com/kenhys,packages yum: use bundled RapidJSON on CentOS 8,2,[],https://github.com/groonga/groonga/pull/1064,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/1064#issuecomment-547727072,rapidjson package is not available yet on CentOS 8,"@kou @komainu8
Thanks!, I've fixed  about required version.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1065,2019-10-31T07:25:37Z,2019-10-31T07:31:37Z,2019-10-31T09:31:50Z,MERGED,True,1,1,1,https://github.com/obache,configure: fix test(1) portability,1,[],https://github.com/groonga/groonga/pull/1065,https://github.com/obache,1,https://github.com/groonga/groonga/pull/1065,"== operator for test(1) is not in the standard, then not portable.","== operator for test(1) is not in the standard, then not portable.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1065,2019-10-31T07:25:37Z,2019-10-31T07:31:37Z,2019-10-31T09:31:50Z,MERGED,True,1,1,1,https://github.com/obache,configure: fix test(1) portability,1,[],https://github.com/groonga/groonga/pull/1065,https://github.com/kenhys,2,https://github.com/groonga/groonga/pull/1065#issuecomment-548248021,"== operator for test(1) is not in the standard, then not portable.",@obache Good catch!,True,{}
groonga/groonga,https://github.com/groonga/groonga,1066,2019-11-05T02:51:14Z,2019-11-27T03:42:37Z,2019-11-27T03:42:41Z,MERGED,True,130,12,2,https://github.com/komainu8,doc news: add news topics for 9.1.0,1,[],https://github.com/groonga/groonga/pull/1066,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1066,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1068,2019-11-20T06:23:54Z,2019-11-20T07:27:24Z,2020-01-17T02:36:13Z,MERGED,True,77,1,3,https://github.com/komainu8,Add new option for tokenmecab,5,[],https://github.com/groonga/groonga/pull/1068,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1068,"We can search using the base form of a token by this option.
For example, if we search ""支えた"" using this option, ""支える"" is hit also.","We can search using the base form of a token by this option.
For example, if we search ""支えた"" using this option, ""支える"" is hit also.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1070,2019-12-05T01:55:31Z,2019-12-06T02:15:38Z,2020-01-17T02:35:59Z,CLOSED,False,22,0,1,https://github.com/komainu8,doc news: add news topics for 9.1.1,1,[],https://github.com/groonga/groonga/pull/1070,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1070,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1071,2019-12-06T02:06:49Z,2019-12-06T02:23:11Z,2020-01-17T02:36:03Z,MERGED,True,2,2,1,https://github.com/komainu8,Extend time to wait for unlock,1,[],https://github.com/groonga/groonga/pull/1071,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1071,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1072,2019-12-06T03:14:13Z,2020-01-06T08:50:44Z,2020-01-06T08:50:48Z,MERGED,True,105,2,2,https://github.com/komainu8,doc news: add news topics for 9.1.1,1,[],https://github.com/groonga/groonga/pull/1072,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1072,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1073,2019-12-06T08:30:18Z,2019-12-10T02:29:58Z,2020-01-17T02:36:04Z,MERGED,True,1170,319,452,https://github.com/komainu8, nginx: update bundled version to 1.17.6,1,[],https://github.com/groonga/groonga/pull/1073,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1073,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1074,2019-12-06T08:50:06Z,2019-12-11T01:35:07Z,2019-12-11T01:35:12Z,CLOSED,False,7,2,1,https://github.com/komainu8,Return error response when fail to wait,1,[],https://github.com/groonga/groonga/pull/1074,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1074,"I'm not sure if this imprements is correct.
Therefore, Could you review this.","I'm not sure if this imprements is correct.
Therefore, Could you review this.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1074,2019-12-06T08:50:06Z,2019-12-11T01:35:07Z,2019-12-11T01:35:12Z,CLOSED,False,7,2,1,https://github.com/komainu8,Return error response when fail to wait,1,[],https://github.com/groonga/groonga/pull/1074,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/1074#issuecomment-564337365,"I'm not sure if this imprements is correct.
Therefore, Could you review this.",This modify is needless.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1076,2020-01-10T08:16:35Z,2020-01-17T01:03:20Z,2020-01-17T04:11:09Z,MERGED,True,99,66,1,https://github.com/komainu8,"groonga: accept ""/d/shutdown?mode=immediate"" immediately even when all threads are used",5,[],https://github.com/groonga/groonga/pull/1076,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1076,"Because if Groonga has not runnable thread when we execute ""shutdown --mode immediate"", Groonga can not execute shutdown immediately.
TODO: test","Because if Groonga has not runnable thread when we execute ""shutdown --mode immediate"", Groonga can not execute shutdown immediately.
TODO: test",True,{}
groonga/groonga,https://github.com/groonga/groonga,1077,2020-01-20T02:16:07Z,2020-01-28T06:14:27Z,2020-01-28T06:14:30Z,MERGED,True,63,2,2,https://github.com/komainu8,doc news: add news topics for 9.1.2,1,[],https://github.com/groonga/groonga/pull/1077,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1077,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1078,2020-01-22T06:33:32Z,2020-01-22T07:20:55Z,2020-01-22T07:20:55Z,MERGED,True,0,6,1,https://github.com/komainu8,github-actions package: remove redundant definition,1,[],https://github.com/groonga/groonga/pull/1078,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1078,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1078,2020-01-22T06:33:32Z,2020-01-22T07:20:55Z,2020-01-22T07:20:55Z,MERGED,True,0,6,1,https://github.com/komainu8,github-actions package: remove redundant definition,1,[],https://github.com/groonga/groonga/pull/1078,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1078#issuecomment-577039916,,How about removing on.pull_request.branch too?,True,{}
groonga/groonga,https://github.com/groonga/groonga,1078,2020-01-22T06:33:32Z,2020-01-22T07:20:55Z,2020-01-22T07:20:55Z,MERGED,True,0,6,1,https://github.com/komainu8,github-actions package: remove redundant definition,1,[],https://github.com/groonga/groonga/pull/1078,https://github.com/komainu8,3,https://github.com/groonga/groonga/pull/1078#issuecomment-577041631,,"Ah... That is true for sure.
I will remove on.pull_request.branch too.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1078,2020-01-22T06:33:32Z,2020-01-22T07:20:55Z,2020-01-22T07:20:55Z,MERGED,True,0,6,1,https://github.com/komainu8,github-actions package: remove redundant definition,1,[],https://github.com/groonga/groonga/pull/1078,https://github.com/komainu8,4,https://github.com/groonga/groonga/pull/1078#issuecomment-577043018,,"@kou
Thank you for your comment.
I removed on.pull_request.branch too.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1081,2020-02-26T11:31:59Z,2020-02-27T08:23:52Z,2020-02-27T08:23:55Z,MERGED,True,1,0,1,https://github.com/komainu8,travis: fix a test for macOS,1,[],https://github.com/groonga/groonga/pull/1081,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1081,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1083,2020-03-25T06:35:56Z,2020-03-25T06:42:04Z,2020-03-25T06:42:12Z,MERGED,True,1,0,1,https://github.com/komainu8,package ubuntu: add support for Ubuntu 20.04 (Focal Fossa),1,[],https://github.com/groonga/groonga/pull/1083,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1083,"We success build a package for Ubuntu 20.04 by using current master's source.
https://launchpad.net/~groonga/+archive/ubuntu/nightly/+build/18891539","We success build a package for Ubuntu 20.04 by using current master's source.
https://launchpad.net/~groonga/+archive/ubuntu/nightly/+build/18891539",True,{}
groonga/groonga,https://github.com/groonga/groonga,1085,2020-03-27T06:06:57Z,2020-03-27T06:07:23Z,2020-03-27T06:07:27Z,MERGED,True,293,2,2,https://github.com/komainu8,Update news for 10.0.0,4,[],https://github.com/groonga/groonga/pull/1085,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1085,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1088,2020-04-06T06:12:28Z,2020-04-07T00:59:14Z,2020-04-07T00:59:22Z,MERGED,True,282,405,2,https://github.com/komainu8,Update release procedure,4,[],https://github.com/groonga/groonga/pull/1088,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1088,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1088,2020-04-06T06:12:28Z,2020-04-07T00:59:14Z,2020-04-07T00:59:22Z,MERGED,True,282,405,2,https://github.com/komainu8,Update release procedure,4,[],https://github.com/groonga/groonga/pull/1088,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/1088#issuecomment-610112693,,"@kou Thank you for your comment.
I've fixed it.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1089,2020-04-20T13:46:04Z,2020-04-22T09:27:31Z,2020-04-22T11:56:10Z,MERGED,True,302,98,3,https://github.com/naoa,Time classify support uvector,11,[],https://github.com/groonga/groonga/pull/1089,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/1089,"I would like to support time uvector for time classify functions.
(I also would like to support referenfce_vector after this PR is merged.)","I would like to support time uvector for time classify functions.
(I also would like to support referenfce_vector after this PR is merged.)",True,{}
groonga/groonga,https://github.com/groonga/groonga,1089,2020-04-20T13:46:04Z,2020-04-22T09:27:31Z,2020-04-22T11:56:10Z,MERGED,True,302,98,3,https://github.com/naoa,Time classify support uvector,11,[],https://github.com/groonga/groonga/pull/1089,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1089#issuecomment-617524273,"I would like to support time uvector for time classify functions.
(I also would like to support referenfce_vector after this PR is merged.)","Thanks!
I'll be able to review this tomorrow.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1089,2020-04-20T13:46:04Z,2020-04-22T09:27:31Z,2020-04-22T11:56:10Z,MERGED,True,302,98,3,https://github.com/naoa,Time classify support uvector,11,[],https://github.com/groonga/groonga/pull/1089,https://github.com/kou,3,https://github.com/groonga/groonga/pull/1089#issuecomment-617663929,"I would like to support time uvector for time classify functions.
(I also would like to support referenfce_vector after this PR is merged.)","Merged.
Thanks!",True,{}
groonga/groonga,https://github.com/groonga/groonga,1089,2020-04-20T13:46:04Z,2020-04-22T09:27:31Z,2020-04-22T11:56:10Z,MERGED,True,302,98,3,https://github.com/naoa,Time classify support uvector,11,[],https://github.com/groonga/groonga/pull/1089,https://github.com/naoa,4,https://github.com/groonga/groonga/pull/1089#issuecomment-617732642,"I would like to support time uvector for time classify functions.
(I also would like to support referenfce_vector after this PR is merged.)",Thanks for your review & merged!,True,{}
groonga/groonga,https://github.com/groonga/groonga,1091,2020-04-22T09:02:18Z,2020-04-28T06:09:08Z,2020-04-28T06:09:12Z,MERGED,True,444,9,2,https://github.com/komainu8,doc news: add news topics for 10.0.2,6,[],https://github.com/groonga/groonga/pull/1091,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1091,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1092,2020-04-23T03:41:50Z,2020-04-23T03:42:55Z,2021-05-17T01:04:45Z,CLOSED,False,69,30,3,https://github.com/kou,ci: test packages,24,[],https://github.com/groonga/groonga/pull/1092,https://github.com/kou,1,https://github.com/groonga/groonga/pull/1092,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1094,2020-05-06T10:26:39Z,2020-05-06T20:11:15Z,2020-05-06T20:11:15Z,MERGED,True,1,1,1,https://github.com/naoa,Pass expr to grn_selector_run,1,[],https://github.com/groonga/groonga/pull/1094,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/1094,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1095,2020-05-06T10:26:59Z,2020-05-06T20:11:40Z,2020-05-06T20:11:40Z,MERGED,True,9,7,1,https://github.com/naoa,Use grn_selector_run for no index case,1,[],https://github.com/groonga/groonga/pull/1095,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/1095,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1096,2020-05-09T17:00:47Z,2020-05-10T05:26:35Z,2020-05-10T05:26:35Z,MERGED,True,323,7,5,https://github.com/naoa,Fix key size for grouping multiple reference weight vector,1,[],https://github.com/groonga/groonga/pull/1096,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/1096,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1097,2020-05-10T00:16:40Z,2020-05-10T07:54:21Z,2020-05-10T09:02:19Z,CLOSED,False,480,79,6,https://github.com/naoa,Support calculate max/min/sum for float value,1,[],https://github.com/groonga/groonga/pull/1097,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/1097,"計算対象の値がfloat系の場合、calc_typeがMAX, MIN, SUMをGRN_DB_FLOATで計算するようにしました。
ただ、grn_obj_get_range_infoでは、FLOATかINT64かを判別することができず、Int64のままになってしまっています。
その他の良い実装方法があれば、クローズして別途対応をお願いします。
参考までにこちらでの実装をPRしておきます。","計算対象の値がfloat系の場合、calc_typeがMAX, MIN, SUMをGRN_DB_FLOATで計算するようにしました。
ただ、grn_obj_get_range_infoでは、FLOATかINT64かを判別することができず、Int64のままになってしまっています。
その他の良い実装方法があれば、クローズして別途対応をお願いします。
参考までにこちらでの実装をPRしておきます。",True,{}
groonga/groonga,https://github.com/groonga/groonga,1097,2020-05-10T00:16:40Z,2020-05-10T07:54:21Z,2020-05-10T09:02:19Z,CLOSED,False,480,79,6,https://github.com/naoa,Support calculate max/min/sum for float value,1,[],https://github.com/groonga/groonga/pull/1097,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1097#issuecomment-626288756,"計算対象の値がfloat系の場合、calc_typeがMAX, MIN, SUMをGRN_DB_FLOATで計算するようにしました。
ただ、grn_obj_get_range_infoでは、FLOATかINT64かを判別することができず、Int64のままになってしまっています。
その他の良い実装方法があれば、クローズして別途対応をお願いします。
参考までにこちらでの実装をPRしておきます。",grn_obj_get_range_info()で正しい情報を返せないのはアレなので、各値に型の情報を持たせるのではなくテーブルに情報を持たせて実装しました。これでgrn_obj_get_range_info()でも正しい情報を返せます。,True,{}
groonga/groonga,https://github.com/groonga/groonga,1097,2020-05-10T00:16:40Z,2020-05-10T07:54:21Z,2020-05-10T09:02:19Z,CLOSED,False,480,79,6,https://github.com/naoa,Support calculate max/min/sum for float value,1,[],https://github.com/groonga/groonga/pull/1097,https://github.com/naoa,3,https://github.com/groonga/groonga/pull/1097#issuecomment-626296002,"計算対象の値がfloat系の場合、calc_typeがMAX, MIN, SUMをGRN_DB_FLOATで計算するようにしました。
ただ、grn_obj_get_range_infoでは、FLOATかINT64かを判別することができず、Int64のままになってしまっています。
その他の良い実装方法があれば、クローズして別途対応をお願いします。
参考までにこちらでの実装をPRしておきます。",ありがとうございます！,True,{}
groonga/groonga,https://github.com/groonga/groonga,1098,2020-05-10T15:17:25Z,2020-05-11T00:09:19Z,2020-05-11T00:09:25Z,MERGED,True,1,1,1,https://github.com/naoa,select: use column flags for dynamic column,1,[],https://github.com/groonga/groonga/pull/1098,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/1098,It needs to use GRN_OBJ_WEIGHT_FLOAT32,It needs to use GRN_OBJ_WEIGHT_FLOAT32,True,{}
groonga/groonga,https://github.com/groonga/groonga,1098,2020-05-10T15:17:25Z,2020-05-11T00:09:19Z,2020-05-11T00:09:25Z,MERGED,True,1,1,1,https://github.com/naoa,select: use column flags for dynamic column,1,[],https://github.com/groonga/groonga/pull/1098,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1098#issuecomment-626411366,It needs to use GRN_OBJ_WEIGHT_FLOAT32,Good catch!,True,{}
groonga/groonga,https://github.com/groonga/groonga,1099,2020-05-10T21:21:41Z,2020-05-10T23:31:12Z,2020-05-10T23:31:17Z,MERGED,True,136,5,3,https://github.com/naoa,Check calc_target range of last object of accessor,2,[],https://github.com/groonga/groonga/pull/1099,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/1099,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1099,2020-05-10T21:21:41Z,2020-05-10T23:31:12Z,2020-05-10T23:31:17Z,MERGED,True,136,5,3,https://github.com/naoa,Check calc_target range of last object of accessor,2,[],https://github.com/groonga/groonga/pull/1099,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1099#issuecomment-626406622,,Thanks!,True,{}
groonga/groonga,https://github.com/groonga/groonga,1100,2020-05-10T21:22:38Z,2020-05-16T01:47:31Z,2020-05-16T01:47:36Z,MERGED,True,139,0,3,https://github.com/naoa,select: support fitered stage of dynamic columns on drilldowns,2,[],https://github.com/groonga/groonga/pull/1100,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/1100,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1100,2020-05-10T21:22:38Z,2020-05-16T01:47:31Z,2020-05-16T01:47:36Z,MERGED,True,139,0,3,https://github.com/naoa,select: support fitered stage of dynamic columns on drilldowns,2,[],https://github.com/groonga/groonga/pull/1100,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1100#issuecomment-629571017,,Thanks!,True,{}
groonga/groonga,https://github.com/groonga/groonga,1101,2020-05-10T21:22:57Z,2020-05-16T02:24:56Z,2020-05-16T02:25:00Z,MERGED,True,607,55,9,https://github.com/naoa,select: support output stage of dynamic columns on drilldowns,2,[],https://github.com/groonga/groonga/pull/1101,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/1101,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1101,2020-05-10T21:22:57Z,2020-05-16T02:24:56Z,2020-05-16T02:25:00Z,MERGED,True,607,55,9,https://github.com/naoa,select: support output stage of dynamic columns on drilldowns,2,[],https://github.com/groonga/groonga/pull/1101,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1101#issuecomment-629575176,,Thanks!,True,{}
groonga/groonga,https://github.com/groonga/groonga,1102,2020-05-10T23:06:20Z,2020-05-13T00:26:43Z,2020-05-13T00:26:49Z,MERGED,True,50,0,1,https://github.com/naoa,select: add cache for dynamic columns value,2,[],https://github.com/groonga/groonga/pull/1102,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/1102,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1102,2020-05-10T23:06:20Z,2020-05-13T00:26:43Z,2020-05-13T00:26:49Z,MERGED,True,50,0,1,https://github.com/naoa,select: add cache for dynamic columns value,2,[],https://github.com/groonga/groonga/pull/1102,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1102#issuecomment-627670570,,Thanks!,True,{}
groonga/groonga,https://github.com/groonga/groonga,1103,2020-05-11T02:54:05Z,2020-05-17T04:53:19Z,2020-05-17T05:00:28Z,MERGED,True,6,22,7,https://github.com/komainu8,mruby: update to 8c04379a4c874ad1c3e576264c0d6a16b5ac6688 ,8,[],https://github.com/groonga/groonga/pull/1103,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1103,"Before: 7905431fe98b7f075033657aff15982d7e4613e6
This introduces the fix of MRB_METHOD_T_STRUCT on 32bit Linux:
mruby/mruby#4990","Before: 7905431fe98b7f075033657aff15982d7e4613e6
This introduces the fix of MRB_METHOD_T_STRUCT on 32bit Linux:
mruby/mruby#4990",True,{}
groonga/groonga,https://github.com/groonga/groonga,1104,2020-05-14T04:43:59Z,2020-05-16T02:33:51Z,2020-05-17T23:47:15Z,MERGED,True,111,8,3,https://github.com/naoa,Check score accessor to detect aggregated_value_type_id,1,[],https://github.com/groonga/groonga/pull/1104,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/1104,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1104,2020-05-14T04:43:59Z,2020-05-16T02:33:51Z,2020-05-17T23:47:15Z,MERGED,True,111,8,3,https://github.com/naoa,Check score accessor to detect aggregated_value_type_id,1,[],https://github.com/groonga/groonga/pull/1104,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1104#issuecomment-629576084,,Thanks!,True,{}
groonga/groonga,https://github.com/groonga/groonga,1105,2020-05-14T09:21:00Z,2020-05-24T05:41:14Z,2020-05-25T04:22:04Z,MERGED,True,385,68,9,https://github.com/komainu8,Add support for near phrase search include space,2,[],https://github.com/groonga/groonga/pull/1105,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1105,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1106,2020-05-14T09:31:17Z,2020-05-16T02:35:18Z,2020-05-31T18:29:48Z,MERGED,True,95,8,3,https://github.com/naoa,vector_slice: support weight float32 vector,1,[],https://github.com/groonga/groonga/pull/1106,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/1106,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1106,2020-05-14T09:31:17Z,2020-05-16T02:35:18Z,2020-05-31T18:29:48Z,MERGED,True,95,8,3,https://github.com/naoa,vector_slice: support weight float32 vector,1,[],https://github.com/groonga/groonga/pull/1106,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1106#issuecomment-629576232,,Thanks!,True,{}
groonga/groonga,https://github.com/groonga/groonga,1107,2020-05-20T03:19:09Z,2020-05-20T20:39:29Z,2020-05-20T20:39:33Z,MERGED,True,1,1,1,https://github.com/komainu8,io: fix a wrong error code,1,[],https://github.com/groonga/groonga/pull/1107,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1107,"I think GRN_INVALID_ARGUMENT is not suitable in this case.
Because this error cause is Groonga can't allocate memory.","I think GRN_INVALID_ARGUMENT is not suitable in this case.
Because this error cause is Groonga can't allocate memory.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1107,2020-05-20T03:19:09Z,2020-05-20T20:39:29Z,2020-05-20T20:39:33Z,MERGED,True,1,1,1,https://github.com/komainu8,io: fix a wrong error code,1,[],https://github.com/groonga/groonga/pull/1107,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1107#issuecomment-631713711,"I think GRN_INVALID_ARGUMENT is not suitable in this case.
Because this error cause is Groonga can't allocate memory.",Good catch!,True,{}
groonga/groonga,https://github.com/groonga/groonga,1108,2020-05-22T09:26:53Z,2020-05-28T21:52:04Z,2020-05-29T00:38:41Z,MERGED,True,185,6,6,https://github.com/komainu8,doc time_classify_day: add an explanation,9,[],https://github.com/groonga/groonga/pull/1108,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1108,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1108,2020-05-22T09:26:53Z,2020-05-28T21:52:04Z,2020-05-29T00:38:41Z,MERGED,True,185,6,6,https://github.com/komainu8,doc time_classify_day: add an explanation,9,[],https://github.com/groonga/groonga/pull/1108,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/1108#issuecomment-634553046,,"@kou Thank you for your comments.
I've fixed them.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1109,2020-05-24T13:26:01Z,2020-06-14T14:17:49Z,2020-06-14T20:57:32Z,MERGED,True,50,7,2,https://github.com/komainu8,"doc select: add explanations about ""filtered"" and ""output"" stage of dynamic columns on drilldowns",2,[],https://github.com/groonga/groonga/pull/1109,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1109,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1111,2020-05-28T14:09:19Z,2020-05-29T01:44:35Z,2020-05-29T01:44:38Z,MERGED,True,1039,61,2,https://github.com/komainu8,doc news: add news topics for 10.0.3,1,[],https://github.com/groonga/groonga/pull/1111,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1111,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1112,2020-05-31T18:45:19Z,2020-05-31T23:50:42Z,2020-05-31T23:50:46Z,MERGED,True,79,0,3,https://github.com/naoa,vector_slice: support float32,1,[],https://github.com/groonga/groonga/pull/1112,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/1112,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1112,2020-05-31T18:45:19Z,2020-05-31T23:50:42Z,2020-05-31T23:50:46Z,MERGED,True,79,0,3,https://github.com/naoa,vector_slice: support float32,1,[],https://github.com/groonga/groonga/pull/1112,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1112#issuecomment-636549680,,Thanks!,True,{}
groonga/groonga,https://github.com/groonga/groonga,1114,2020-06-09T01:15:14Z,2020-06-11T00:40:13Z,2020-06-11T00:40:19Z,MERGED,True,60,6,3,https://github.com/naoa,near: fix a bug that the min may be underflow,2,[],https://github.com/groonga/groonga/pull/1114,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/1114,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1114,2020-06-09T01:15:14Z,2020-06-11T00:40:13Z,2020-06-11T00:40:19Z,MERGED,True,60,6,3,https://github.com/naoa,near: fix a bug that the min may be underflow,2,[],https://github.com/groonga/groonga/pull/1114,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1114#issuecomment-642338558,,Good catch!,True,{}
groonga/groonga,https://github.com/groonga/groonga,1115,2020-06-15T02:49:29Z,2020-06-16T23:29:04Z,2020-06-16T23:29:08Z,CLOSED,False,0,2,1,https://github.com/komainu8,appveyor: enable build for packages/ and doc/,1,[],https://github.com/groonga/groonga/pull/1115,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1115,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1116,2020-06-15T07:27:22Z,2020-06-15T20:42:12Z,2020-06-22T06:12:07Z,MERGED,True,167,0,3,https://github.com/komainu8,select drilldowns: fix a crash bug when we specify multiple aggregators,1,[],https://github.com/groonga/groonga/pull/1116,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1116,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1116,2020-06-15T07:27:22Z,2020-06-15T20:42:12Z,2020-06-22T06:12:07Z,MERGED,True,167,0,3,https://github.com/komainu8,select drilldowns: fix a crash bug when we specify multiple aggregators,1,[],https://github.com/groonga/groonga/pull/1116,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1116#issuecomment-644378140,,Good catch!,True,{}
groonga/groonga,https://github.com/groonga/groonga,1118,2020-06-26T07:19:41Z,2020-06-26T08:19:31Z,2020-06-26T08:19:34Z,MERGED,True,443,11,2,https://github.com/komainu8,doc news: add news topics for 10.0.4,1,[],https://github.com/groonga/groonga/pull/1118,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1118,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1120,2020-07-09T11:50:48Z,2020-07-13T21:48:02Z,2020-07-13T21:48:10Z,MERGED,True,482,40,13,https://github.com/naoa,aggregator_*: support score accessor for target,2,[],https://github.com/groonga/groonga/pull/1120,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/1120,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1120,2020-07-09T11:50:48Z,2020-07-13T21:48:02Z,2020-07-13T21:48:10Z,MERGED,True,482,40,13,https://github.com/naoa,aggregator_*: support score accessor for target,2,[],https://github.com/groonga/groonga/pull/1120,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1120#issuecomment-657810397,,"Thanks!
I've add tests for them.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1121,2020-07-17T05:16:29Z,2020-07-17T07:49:51Z,2020-07-17T07:49:51Z,MERGED,True,61,1,3,https://github.com/komainu8,between: fix a crash bug when temporary table is used,2,[],https://github.com/groonga/groonga/pull/1121,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1121,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1123,2020-07-29T04:50:01Z,2020-07-29T04:50:23Z,2020-07-29T04:50:27Z,MERGED,True,596,15,2,https://github.com/komainu8,doc news: add news topics for 10.0.5,1,[],https://github.com/groonga/groonga/pull/1123,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1123,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1125,2020-07-30T03:01:18Z,2020-07-30T03:01:40Z,2020-07-30T03:01:46Z,MERGED,True,2,2,1,https://github.com/komainu8,ci: use the latest red-arrow for macOS,1,[],https://github.com/groonga/groonga/pull/1125,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1125,"Because Homebrew provide Apache Arrow 1.0.0.
Homebrew/homebrew-core@057bf87","Because Homebrew provide Apache Arrow 1.0.0.
Homebrew/homebrew-core@057bf87",True,{}
groonga/groonga,https://github.com/groonga/groonga,1126,2020-08-24T09:13:22Z,2020-08-24T22:03:41Z,2020-08-24T22:03:56Z,MERGED,True,21,5,1,https://github.com/naoa,Optimize offline index construction using token column,2,[],https://github.com/groonga/groonga/pull/1126,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/1126,"It is 3x faster with source data size of about 13GiB.
source_column size: 12.840GiB
Before: 1499 sec
Patched: 412 sec","It is 3x faster with source data size of about 13GiB.
source_column size: 12.840GiB
Before: 1499 sec
Patched: 412 sec",True,{}
groonga/groonga,https://github.com/groonga/groonga,1126,2020-08-24T09:13:22Z,2020-08-24T22:03:41Z,2020-08-24T22:03:56Z,MERGED,True,21,5,1,https://github.com/naoa,Optimize offline index construction using token column,2,[],https://github.com/groonga/groonga/pull/1126,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1126#issuecomment-679389685,"It is 3x faster with source data size of about 13GiB.
source_column size: 12.840GiB
Before: 1499 sec
Patched: 412 sec","Thanks!
It's a big improvement!",True,{}
groonga/groonga,https://github.com/groonga/groonga,1129,2020-08-25T09:00:22Z,2020-08-26T07:53:16Z,2020-08-26T07:53:16Z,MERGED,True,6,15,2,https://github.com/komainu8,package groonga-tokenizer-mecab: add support for CentOS8,3,[],https://github.com/groonga/groonga/pull/1129,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1129,"groonga-tokenizer-mecab requires mecab-devel package.
However, currently, mecab-devel package doesn't provide in the repository of CentOS8.
Therefore, we provide mecab-devel package in the repository of Groonga(packages.groonga.org) for a while.
Thereby we can provide groonga-tonkenizer-mecab on CentOS8.
We can build groonga-tokenizer-mecab package by this PR.","groonga-tokenizer-mecab requires mecab-devel package.
However, currently, mecab-devel package doesn't provide in the repository of CentOS8.
Therefore, we provide mecab-devel package in the repository of Groonga(packages.groonga.org) for a while.
Thereby we can provide groonga-tonkenizer-mecab on CentOS8.
We can build groonga-tokenizer-mecab package by this PR.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1129,2020-08-25T09:00:22Z,2020-08-26T07:53:16Z,2020-08-26T07:53:16Z,MERGED,True,6,15,2,https://github.com/komainu8,package groonga-tokenizer-mecab: add support for CentOS8,3,[],https://github.com/groonga/groonga/pull/1129,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/1129#issuecomment-680686474,"groonga-tokenizer-mecab requires mecab-devel package.
However, currently, mecab-devel package doesn't provide in the repository of CentOS8.
Therefore, we provide mecab-devel package in the repository of Groonga(packages.groonga.org) for a while.
Thereby we can provide groonga-tonkenizer-mecab on CentOS8.
We can build groonga-tokenizer-mecab package by this PR.","@kou
Thank you for your comments.
I've fixed them.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1131,2020-08-28T03:01:16Z,2020-08-28T03:01:26Z,2020-08-28T03:01:30Z,MERGED,True,244,13,2,https://github.com/komainu8,doc news: add news topics for 10.0.6,1,[],https://github.com/groonga/groonga/pull/1131,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1131,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1133,2020-09-10T07:32:52Z,2020-09-14T01:28:29Z,2020-09-14T02:34:27Z,MERGED,True,64,2,2,https://github.com/komainu8,Add a tool for upload packages from GitHub release,2,[],https://github.com/groonga/groonga/pull/1133,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1133,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1133,2020-09-10T07:32:52Z,2020-09-14T01:28:29Z,2020-09-14T02:34:27Z,MERGED,True,64,2,2,https://github.com/komainu8,Add a tool for upload packages from GitHub release,2,[],https://github.com/groonga/groonga/pull/1133,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1133#issuecomment-691762102,,I've changed to use existing apt:release and yum:release for uploading downloaded packages.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1133,2020-09-10T07:32:52Z,2020-09-14T01:28:29Z,2020-09-14T02:34:27Z,MERGED,True,64,2,2,https://github.com/komainu8,Add a tool for upload packages from GitHub release,2,[],https://github.com/groonga/groonga/pull/1133,https://github.com/komainu8,3,https://github.com/groonga/groonga/pull/1133#issuecomment-691776692,,"I've changed to use existing apt:release and yum:release for uploading downloaded packages.

I see. Thank you.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1134,2020-09-15T13:05:07Z,,2022-03-15T05:24:16Z,OPEN,False,321,0,1,https://github.com/komainu8,doc normalizer: add a reference for NormalizerNFKC121,1,[],https://github.com/groonga/groonga/pull/1134,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1134,This is a work in progress.,This is a work in progress.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1137,2020-09-29T07:20:11Z,2020-09-29T07:20:25Z,2020-09-29T07:20:30Z,MERGED,True,305,8,2,https://github.com/komainu8,doc news: add news topics for 10.0.7,1,[],https://github.com/groonga/groonga/pull/1137,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1137,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1138,2020-10-06T02:39:18Z,2020-10-26T07:59:57Z,2020-10-26T08:00:01Z,MERGED,True,62,10,3,https://github.com/komainu8,Add a tool for upload windows packages from GitHub release,16,[],https://github.com/groonga/groonga/pull/1138,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1138,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1138,2020-10-06T02:39:18Z,2020-10-26T07:59:57Z,2020-10-26T08:00:01Z,MERGED,True,62,10,3,https://github.com/komainu8,Add a tool for upload windows packages from GitHub release,16,[],https://github.com/groonga/groonga/pull/1138,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/1138#issuecomment-705945491,,"Ah... This is conflict yes.
I'll fix them.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1138,2020-10-06T02:39:18Z,2020-10-26T07:59:57Z,2020-10-26T08:00:01Z,MERGED,True,62,10,3,https://github.com/komainu8,Add a tool for upload windows packages from GitHub release,16,[],https://github.com/groonga/groonga/pull/1138,https://github.com/komainu8,3,https://github.com/groonga/groonga/pull/1138#issuecomment-705946646,,I've fixed them.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1138,2020-10-06T02:39:18Z,2020-10-26T07:59:57Z,2020-10-26T08:00:01Z,MERGED,True,62,10,3,https://github.com/komainu8,Add a tool for upload windows packages from GitHub release,16,[],https://github.com/groonga/groonga/pull/1138,https://github.com/komainu8,4,https://github.com/groonga/groonga/pull/1138#issuecomment-706834840,,@kou Thank you for your comments. I've fixed them.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1138,2020-10-06T02:39:18Z,2020-10-26T07:59:57Z,2020-10-26T08:00:01Z,MERGED,True,62,10,3,https://github.com/komainu8,Add a tool for upload windows packages from GitHub release,16,[],https://github.com/groonga/groonga/pull/1138,https://github.com/kou,5,https://github.com/groonga/groonga/pull/1138#issuecomment-708095586,,"Updating latest links is missing: https://packages.groonga.org/windows/groonga/XXX-latest.XXX
Uploading source archives is missing: https://packages.groonga.org/windows/groonga/groonga-10.0.7/",True,{}
groonga/groonga,https://github.com/groonga/groonga,1138,2020-10-06T02:39:18Z,2020-10-26T07:59:57Z,2020-10-26T08:00:01Z,MERGED,True,62,10,3,https://github.com/komainu8,Add a tool for upload windows packages from GitHub release,16,[],https://github.com/groonga/groonga/pull/1138,https://github.com/komainu8,6,https://github.com/groonga/groonga/pull/1138#issuecomment-711907561,,I added updating latest links and uploading source archives.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1140,2020-10-13T02:12:04Z,2020-10-13T04:53:48Z,2020-10-13T04:56:12Z,MERGED,True,3,3,3,https://github.com/komainu8,admin: fix wrong paths to images,1,[],https://github.com/groonga/groonga/pull/1140,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1140,"This commit fixes a part of #1139.
The logo of Groonga is displayed by this commit.","This commit fixes a part of #1139.
The logo of Groonga is displayed by this commit.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1141,2020-10-13T02:19:34Z,2020-10-14T01:11:35Z,2020-10-14T01:11:35Z,MERGED,True,22,0,1,https://github.com/komainu8,admin: add missing include scripts,1,[],https://github.com/groonga/groonga/pull/1141,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1141,"This commit fixes a part of #1139.
The throughput chart is displayed on the index page for Japanese by this commit.","This commit fixes a part of #1139.
The throughput chart is displayed on the index page for Japanese by this commit.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1142,2020-10-14T02:46:22Z,2020-10-19T02:01:13Z,2020-10-19T02:01:55Z,MERGED,True,2,2,2,https://github.com/komainu8,"admin: use ""option"" instead of ""select""",1,[],https://github.com/groonga/groonga/pull/1142,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1142,"Because a ""tabs"" has not ""select"" option in this jQuery version.","Because a ""tabs"" has not ""select"" option in this jQuery version.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1143,2020-10-14T02:46:49Z,2020-10-19T02:02:54Z,2020-10-19T02:03:05Z,MERGED,True,4,4,2,https://github.com/komainu8,admin: use prop instead of attr,1,[],https://github.com/groonga/groonga/pull/1143,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1143,Because attr may not get the status of a checkbox.,Because attr may not get the status of a checkbox.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1145,2020-10-29T07:39:15Z,2020-10-29T07:39:52Z,2020-10-29T07:39:52Z,MERGED,True,1,0,1,https://github.com/komainu8,ci macos: unlink symlink for python 3.8,2,[],https://github.com/groonga/groonga/pull/1145,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1145,Because we fail to install python 3.9 if symlink for python 3.8 exists.,Because we fail to install python 3.9 if symlink for python 3.8 exists.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1146,2020-10-29T13:29:49Z,2020-10-29T13:30:01Z,2020-10-29T13:30:06Z,MERGED,True,2,2,2,https://github.com/komainu8,ci windows: use old red-arrow until MSYS2 provide Apache Arrow 2.0.0,1,[],https://github.com/groonga/groonga/pull/1146,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1146,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1147,2020-10-30T07:13:16Z,2020-10-30T07:13:23Z,2020-10-30T07:13:33Z,MERGED,True,259,11,2,https://github.com/komainu8,doc news: add news topics for 10.0.8,1,[],https://github.com/groonga/groonga/pull/1147,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1147,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1149,2020-11-30T07:54:35Z,2020-12-01T01:33:01Z,2020-12-01T05:20:12Z,MERGED,True,31,0,7,https://github.com/komainu8,ci: add a patch that don't check FD for STDIN/STDOUT/STDERR,2,[],https://github.com/groonga/groonga/pull/1149,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1149,This is testing now.,This is testing now.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1149,2020-11-30T07:54:35Z,2020-12-01T01:33:01Z,2020-12-01T05:20:12Z,MERGED,True,31,0,7,https://github.com/komainu8,ci: add a patch that don't check FD for STDIN/STDOUT/STDERR,2,[],https://github.com/groonga/groonga/pull/1149,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1149#issuecomment-735631512,This is testing now.,The patch should be applied before configure or cmake.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1149,2020-11-30T07:54:35Z,2020-12-01T01:33:01Z,2020-12-01T05:20:12Z,MERGED,True,31,0,7,https://github.com/komainu8,ci: add a patch that don't check FD for STDIN/STDOUT/STDERR,2,[],https://github.com/groonga/groonga/pull/1149,https://github.com/komainu8,3,https://github.com/groonga/groonga/pull/1149#issuecomment-735631838,This is testing now.,"I see.
I'll fix it.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1149,2020-11-30T07:54:35Z,2020-12-01T01:33:01Z,2020-12-01T05:20:12Z,MERGED,True,31,0,7,https://github.com/komainu8,ci: add a patch that don't check FD for STDIN/STDOUT/STDERR,2,[],https://github.com/groonga/groonga/pull/1149,https://github.com/komainu8,4,https://github.com/groonga/groonga/pull/1149#issuecomment-736225430,This is testing now.,"Thank you for your comment.
I am aware of it. I am fixing them now.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1150,2020-11-30T09:13:31Z,2020-12-01T03:37:42Z,2020-12-01T03:37:46Z,MERGED,True,332,5,2,https://github.com/komainu8,doc news: add news topics for 10.0.9,1,[],https://github.com/groonga/groonga/pull/1150,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1150,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1151,2020-12-01T05:20:54Z,2020-12-01T12:04:44Z,2020-12-01T12:04:48Z,MERGED,True,5,0,4,https://github.com/komainu8,ci: add a missing run key,1,[],https://github.com/groonga/groonga/pull/1151,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1151,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1152,2020-12-08T08:37:47Z,2020-12-16T20:15:02Z,2020-12-17T06:23:05Z,MERGED,True,167,202,40,https://github.com/komainu8,mruby: update to 092dd4a667175a123ef9b628e7008be6398d7e0e,13,[],https://github.com/groonga/groonga/pull/1152,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1152,Before 8c04379a4c874ad1c3e576264c0d6a16b5ac6688,Before 8c04379a4c874ad1c3e576264c0d6a16b5ac6688,True,{}
groonga/groonga,https://github.com/groonga/groonga,1154,2020-12-09T15:11:34Z,2020-12-09T20:51:14Z,2020-12-10T06:43:20Z,MERGED,True,169,2,3,https://github.com/naoa,grn_table_group_keys_parse: fix a crash bug that accessors will be double freed,1,[],https://github.com/groonga/groonga/pull/1154,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/1154,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1154,2020-12-09T15:11:34Z,2020-12-09T20:51:14Z,2020-12-10T06:43:20Z,MERGED,True,169,2,3,https://github.com/naoa,grn_table_group_keys_parse: fix a crash bug that accessors will be double freed,1,[],https://github.com/groonga/groonga/pull/1154,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1154#issuecomment-742041637,,Thanks!,True,{}
groonga/groonga,https://github.com/groonga/groonga,1155,2020-12-16T10:37:10Z,2020-12-16T20:03:42Z,2020-12-16T20:03:47Z,MERGED,True,1,1,1,https://github.com/timgates42,"docs: fix simple typo, repoted -> reported",1,[],https://github.com/groonga/groonga/pull/1155,https://github.com/timgates42,1,https://github.com/groonga/groonga/pull/1155,"There is a small typo in doc/source/troubleshooting/how_to_analyze_error_message.rst.
Should read reported rather than repoted.
Semi-automated pull request generated by
https://github.com/timgates42/meticulous/blob/master/docs/NOTE.md","There is a small typo in doc/source/troubleshooting/how_to_analyze_error_message.rst.
Should read reported rather than repoted.
Semi-automated pull request generated by
https://github.com/timgates42/meticulous/blob/master/docs/NOTE.md",True,{}
groonga/groonga,https://github.com/groonga/groonga,1155,2020-12-16T10:37:10Z,2020-12-16T20:03:42Z,2020-12-16T20:03:47Z,MERGED,True,1,1,1,https://github.com/timgates42,"docs: fix simple typo, repoted -> reported",1,[],https://github.com/groonga/groonga/pull/1155,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1155#issuecomment-746928938,"There is a small typo in doc/source/troubleshooting/how_to_analyze_error_message.rst.
Should read reported rather than repoted.
Semi-automated pull request generated by
https://github.com/timgates42/meticulous/blob/master/docs/NOTE.md",Thanks!,True,{'THUMBS_UP': ['https://github.com/timgates42']}
groonga/groonga,https://github.com/groonga/groonga,1156,2020-12-22T06:26:35Z,2020-12-24T01:15:55Z,2020-12-24T01:17:30Z,MERGED,True,855,11,2,https://github.com/komainu8,doc news: update news for 10.1.0,1,[],https://github.com/groonga/groonga/pull/1156,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1156,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1158,2020-12-24T20:05:48Z,2021-01-06T09:20:28Z,2021-01-06T09:20:28Z,MERGED,True,70,28,1,https://github.com/naoa,TokenMecab: Support lock free parsing,2,[],https://github.com/groonga/groonga/pull/1158,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/1158,"GRN_MECAB_LOCK_FREE=yes environment variable to enable this feature.
It has some overhead, but it is effective for parallel construction of token column.



patched:env
Sequential construction of token column
Parallel construction of token column




Before
191.22sec
595.12sec


After
191.68sec
673.04sec


After:GRN_MECAB_LOCK_FREE=yes
239.56sec
90.19sec



https://taku910.github.io/mecab/libmecab.html","GRN_MECAB_LOCK_FREE=yes environment variable to enable this feature.
It has some overhead, but it is effective for parallel construction of token column.



patched:env
Sequential construction of token column
Parallel construction of token column




Before
191.22sec
595.12sec


After
191.68sec
673.04sec


After:GRN_MECAB_LOCK_FREE=yes
239.56sec
90.19sec



https://taku910.github.io/mecab/libmecab.html",True,{}
groonga/groonga,https://github.com/groonga/groonga,1158,2020-12-24T20:05:48Z,2021-01-06T09:20:28Z,2021-01-06T09:20:28Z,MERGED,True,70,28,1,https://github.com/naoa,TokenMecab: Support lock free parsing,2,[],https://github.com/groonga/groonga/pull/1158,https://github.com/naoa,2,https://github.com/groonga/groonga/pull/1158#issuecomment-751542606,"GRN_MECAB_LOCK_FREE=yes environment variable to enable this feature.
It has some overhead, but it is effective for parallel construction of token column.



patched:env
Sequential construction of token column
Parallel construction of token column




Before
191.22sec
595.12sec


After
191.68sec
673.04sec


After:GRN_MECAB_LOCK_FREE=yes
239.56sec
90.19sec



https://taku910.github.io/mecab/libmecab.html","Thank you for reviewing.
I've fixed and squashed.
The following is the remeasured.



patched:env
Sequential construction of token column
Parallel construction of token column




Before
190.41sec
570.44sec


After
190.82sec
453.11sec


After:GRN_MECAB_LOCK_FREE=yes
238.20sec
96.02sec",True,{}
groonga/groonga,https://github.com/groonga/groonga,1158,2020-12-24T20:05:48Z,2021-01-06T09:20:28Z,2021-01-06T09:20:28Z,MERGED,True,70,28,1,https://github.com/naoa,TokenMecab: Support lock free parsing,2,[],https://github.com/groonga/groonga/pull/1158,https://github.com/kou,3,https://github.com/groonga/groonga/pull/1158#issuecomment-755099407,"GRN_MECAB_LOCK_FREE=yes environment variable to enable this feature.
It has some overhead, but it is effective for parallel construction of token column.



patched:env
Sequential construction of token column
Parallel construction of token column




Before
191.22sec
595.12sec


After
191.68sec
673.04sec


After:GRN_MECAB_LOCK_FREE=yes
239.56sec
90.19sec



https://taku910.github.io/mecab/libmecab.html","It seems that the After:GRN_MECAB_LOCK_FREE=yes & Sequential construction of token column case's slow down is caused by always creating mecab_lattice_t. mecab_sparse_tostr2() reuses created mecab_lattice_t.
We'll be able to improve the performance of the case by caching mecab_latitce_t in grn_ctx. I've added grn_ctx local variables features into master and pushed a change to use the feature to cache mecab_lattice_t.
Could you measure again with the latest commit? You don't need to use GRN_MECAB_LOCK_FREE=yes because I removed the variable.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1158,2020-12-24T20:05:48Z,2021-01-06T09:20:28Z,2021-01-06T09:20:28Z,MERGED,True,70,28,1,https://github.com/naoa,TokenMecab: Support lock free parsing,2,[],https://github.com/groonga/groonga/pull/1158,https://github.com/naoa,4,https://github.com/groonga/groonga/pull/1158#issuecomment-755179380,"GRN_MECAB_LOCK_FREE=yes environment variable to enable this feature.
It has some overhead, but it is effective for parallel construction of token column.



patched:env
Sequential construction of token column
Parallel construction of token column




Before
191.22sec
595.12sec


After
191.68sec
673.04sec


After:GRN_MECAB_LOCK_FREE=yes
239.56sec
90.19sec



https://taku910.github.io/mecab/libmecab.html","Great!
I've measured it.
There was no effect in the sequential case, and it was faster in the parallel case.



patched
Sequential construction of token column
Parallel construction of token column




Before
190.48sec
683.14sec


After
190.62sec
70.67sec",True,{}
groonga/groonga,https://github.com/groonga/groonga,1158,2020-12-24T20:05:48Z,2021-01-06T09:20:28Z,2021-01-06T09:20:28Z,MERGED,True,70,28,1,https://github.com/naoa,TokenMecab: Support lock free parsing,2,[],https://github.com/groonga/groonga/pull/1158,https://github.com/kou,5,https://github.com/groonga/groonga/pull/1158#issuecomment-755182925,"GRN_MECAB_LOCK_FREE=yes environment variable to enable this feature.
It has some overhead, but it is effective for parallel construction of token column.



patched:env
Sequential construction of token column
Parallel construction of token column




Before
191.22sec
595.12sec


After
191.68sec
673.04sec


After:GRN_MECAB_LOCK_FREE=yes
239.56sec
90.19sec



https://taku910.github.io/mecab/libmecab.html","OK. I'll merge this.
Thanks!",True,{}
groonga/groonga,https://github.com/groonga/groonga,1159,2020-12-25T00:37:36Z,2020-12-25T00:59:01Z,2020-12-25T01:01:21Z,MERGED,True,2,2,1,https://github.com/komainu8,packages launchpad: fix a wrong argument,1,[],https://github.com/groonga/groonga/pull/1159,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1159,"""apt_prepare_debian_dir()"" is expecting that gives
the distribution name, the code name and, the architecture
into the second argument.
(See: https://github.com/apache/arrow/blob/master/dev/tasks/linux-packages/package-task.rb#L262)
However, in ""launchpad-helper.rb"", we are setting
the code name and version into the second argument of
""apt_prepare_debian_dir()"".
Then, in Mroonga, ""detect_mysql_version_ubuntu()"" can't call in
https://github.com/mroonga/mroonga/blob/9d79ad72c71f8a7929ef92616f6ddb196f2dce66/packages/mroonga-package-task.rb#L50.
Because #{destribution} of
https://github.com/mroonga/mroonga/blob/master/packages/mroonga-package-task.rb#L50
is the code name of Ubuntu.","""apt_prepare_debian_dir()"" is expecting that gives
the distribution name, the code name and, the architecture
into the second argument.
(See: https://github.com/apache/arrow/blob/master/dev/tasks/linux-packages/package-task.rb#L262)
However, in ""launchpad-helper.rb"", we are setting
the code name and version into the second argument of
""apt_prepare_debian_dir()"".
Then, in Mroonga, ""detect_mysql_version_ubuntu()"" can't call in
https://github.com/mroonga/mroonga/blob/9d79ad72c71f8a7929ef92616f6ddb196f2dce66/packages/mroonga-package-task.rb#L50.
Because #{destribution} of
https://github.com/mroonga/mroonga/blob/master/packages/mroonga-package-task.rb#L50
is the code name of Ubuntu.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1160,2021-01-23T06:44:19Z,2021-01-23T06:44:26Z,2021-01-23T06:44:29Z,MERGED,True,221,11,2,https://github.com/komainu8,doc news: add news topics for 10.1.1,1,[],https://github.com/groonga/groonga/pull/1160,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1160,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1162,2021-01-25T03:06:20Z,2021-01-25T05:18:12Z,2021-01-25T05:20:50Z,MERGED,True,7,2,1,https://github.com/komainu8,packages windows: fix a wrong repositry directory path for Windows,2,[],https://github.com/groonga/groonga/pull/1162,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1162,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1164,2021-02-04T08:28:28Z,2021-02-04T23:52:14Z,2021-02-04T23:52:17Z,MERGED,True,346,3,4,https://github.com/komainu8,doc: add a reference for index_column_diff command,1,[],https://github.com/groonga/groonga/pull/1164,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1164,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1165,2021-02-05T07:14:38Z,2021-02-05T07:16:01Z,2021-02-05T07:16:04Z,MERGED,True,261,5,2,https://github.com/komainu8,doc news: add news topics for 11.0.0,1,[],https://github.com/groonga/groonga/pull/1165,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1165,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1166,2021-02-05T09:38:47Z,2021-02-05T22:39:09Z,2021-02-05T22:39:09Z,MERGED,True,33,1652,29,https://github.com/komainu8,ci linux-mingw: remove linux-mingw,5,[],https://github.com/groonga/groonga/pull/1166,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1166,"We place low priority on providing the packages that are generated by this job.
Because there aren't probably many people who use that.","We place low priority on providing the packages that are generated by this job.
Because there aren't probably many people who use that.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1167,2021-03-08T23:33:43Z,2021-03-25T01:35:09Z,2021-03-25T04:36:10Z,MERGED,True,47,22,7,https://github.com/komainu8,package apt: add support for arm64 package,17,[],https://github.com/groonga/groonga/pull/1167,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1167,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1167,2021-03-08T23:33:43Z,2021-03-25T01:35:09Z,2021-03-25T04:36:10Z,MERGED,True,47,22,7,https://github.com/komainu8,package apt: add support for arm64 package,17,[],https://github.com/groonga/groonga/pull/1167,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1167#issuecomment-793418171,,"TODO:

Reduce build time by ccache
Fix test failures caused by floating point number",True,{}
groonga/groonga,https://github.com/groonga/groonga,1168,2021-03-19T02:42:02Z,2021-03-31T05:40:02Z,2021-03-31T05:40:05Z,MERGED,True,697,12,2,https://github.com/komainu8,Update news for 11.0.1,1,[],https://github.com/groonga/groonga/pull/1168,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1168,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1171,2021-04-01T05:46:32Z,2021-04-01T05:50:37Z,2021-04-01T05:51:13Z,MERGED,True,7,2,1,https://github.com/komainu8,package: add support for uploading package for ARM64,1,[],https://github.com/groonga/groonga/pull/1171,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1171,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1172,2021-04-04T23:57:54Z,2021-04-05T00:07:02Z,2021-04-05T00:07:06Z,MERGED,True,0,131,4,https://github.com/acook,Remove references to long-deleted ruby_load function,1,[],https://github.com/groonga/groonga/pull/1172,https://github.com/acook,1,https://github.com/groonga/groonga/pull/1172,"There were some old docs I found which talk about removed functionality.
This PR removes them.
<3","There were some old docs I found which talk about removed functionality.
This PR removes them.
<3",True,{}
groonga/groonga,https://github.com/groonga/groonga,1172,2021-04-04T23:57:54Z,2021-04-05T00:07:02Z,2021-04-05T00:07:06Z,MERGED,True,0,131,4,https://github.com/acook,Remove references to long-deleted ruby_load function,1,[],https://github.com/groonga/groonga/pull/1172,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1172#issuecomment-813120690,"There were some old docs I found which talk about removed functionality.
This PR removes them.
<3",Good catch!,True,{}
groonga/groonga,https://github.com/groonga/groonga,1174,2021-04-12T02:32:01Z,2021-04-12T02:33:50Z,2021-04-12T02:33:51Z,CLOSED,False,1,1,1,https://github.com/komainu8,packages debian: use the qemu-user-static >= 5.0,1,[],https://github.com/groonga/groonga/pull/1174,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1174,"Because qemu-user-static has crash bug in version before 5.0.
(See: https://bugs.launchpad.net/qemu/+bug/1749393)
By this bug, host OS may crashes.
TODO: Test","Because qemu-user-static has crash bug in version before 5.0.
(See: https://bugs.launchpad.net/qemu/+bug/1749393)
By this bug, host OS may crashes.
TODO: Test",True,{}
groonga/groonga,https://github.com/groonga/groonga,1174,2021-04-12T02:32:01Z,2021-04-12T02:33:50Z,2021-04-12T02:33:51Z,CLOSED,False,1,1,1,https://github.com/komainu8,packages debian: use the qemu-user-static >= 5.0,1,[],https://github.com/groonga/groonga/pull/1174,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/1174#issuecomment-817438097,"Because qemu-user-static has crash bug in version before 5.0.
(See: https://bugs.launchpad.net/qemu/+bug/1749393)
By this bug, host OS may crashes.
TODO: Test",Ah... GitHub Actions doesn't support Ubuntu 20.10 yet.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1175,2021-04-13T09:12:13Z,2021-04-20T07:49:45Z,2021-04-20T07:51:36Z,MERGED,True,80,13,7,https://github.com/komainu8,expr: add support for multiple token filters with options,5,[],https://github.com/groonga/groonga/pull/1175,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1175,"Fix mroonga/mroonga#399.
If we specify multiple token filters with options like --token_filters 'TokenFilterStopWord(""column"", ""ignore""), TokenFilterNFKC130(""unify_kana"", true)', Groonga parses these token filters as below.
#<expr
  vars:{
    $1:#<record:pat:Terms id:(no value)>
  },
  codes:{
    0:<push n_args:1, flags:0, modify:3, value:#<proc:token-filter TokenFilterStopWord arguments:[]>>,
    1:<push n_args:1, flags:0, modify:0, value:""column"">,
    2:<push n_args:1, flags:0, modify:0, value:""ignore"">,
    3:<call n_args:3, flags:0, modify:0, value:(NULL)>,
    4:<push n_args:1, flags:0, modify:3, value:#<proc:token-filter TokenFilterNFKC130 arguments:[]>>,
    5:<push n_args:1, flags:0, modify:0, value:""unify_kana"">,
    6:<push n_args:1, flags:0, modify:0, value:true>,
    7:<call n_args:3, flags:0, modify:0, value:(NULL)>,
    8:<comma n_args:2, flags:0, modify:0, value:(NULL)>
  }

However, the current implemantation assumes  that a call operation appears the end of codes.
This commit supports multiple token filters with options.","Fix mroonga/mroonga#399.
If we specify multiple token filters with options like --token_filters 'TokenFilterStopWord(""column"", ""ignore""), TokenFilterNFKC130(""unify_kana"", true)', Groonga parses these token filters as below.
#<expr
  vars:{
    $1:#<record:pat:Terms id:(no value)>
  },
  codes:{
    0:<push n_args:1, flags:0, modify:3, value:#<proc:token-filter TokenFilterStopWord arguments:[]>>,
    1:<push n_args:1, flags:0, modify:0, value:""column"">,
    2:<push n_args:1, flags:0, modify:0, value:""ignore"">,
    3:<call n_args:3, flags:0, modify:0, value:(NULL)>,
    4:<push n_args:1, flags:0, modify:3, value:#<proc:token-filter TokenFilterNFKC130 arguments:[]>>,
    5:<push n_args:1, flags:0, modify:0, value:""unify_kana"">,
    6:<push n_args:1, flags:0, modify:0, value:true>,
    7:<call n_args:3, flags:0, modify:0, value:(NULL)>,
    8:<comma n_args:2, flags:0, modify:0, value:(NULL)>
  }

However, the current implemantation assumes  that a call operation appears the end of codes.
This commit supports multiple token filters with options.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1175,2021-04-13T09:12:13Z,2021-04-20T07:49:45Z,2021-04-20T07:51:36Z,MERGED,True,80,13,7,https://github.com/komainu8,expr: add support for multiple token filters with options,5,[],https://github.com/groonga/groonga/pull/1175,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1175#issuecomment-819942491,"Fix mroonga/mroonga#399.
If we specify multiple token filters with options like --token_filters 'TokenFilterStopWord(""column"", ""ignore""), TokenFilterNFKC130(""unify_kana"", true)', Groonga parses these token filters as below.
#<expr
  vars:{
    $1:#<record:pat:Terms id:(no value)>
  },
  codes:{
    0:<push n_args:1, flags:0, modify:3, value:#<proc:token-filter TokenFilterStopWord arguments:[]>>,
    1:<push n_args:1, flags:0, modify:0, value:""column"">,
    2:<push n_args:1, flags:0, modify:0, value:""ignore"">,
    3:<call n_args:3, flags:0, modify:0, value:(NULL)>,
    4:<push n_args:1, flags:0, modify:3, value:#<proc:token-filter TokenFilterNFKC130 arguments:[]>>,
    5:<push n_args:1, flags:0, modify:0, value:""unify_kana"">,
    6:<push n_args:1, flags:0, modify:0, value:true>,
    7:<call n_args:3, flags:0, modify:0, value:(NULL)>,
    8:<comma n_args:2, flags:0, modify:0, value:(NULL)>
  }

However, the current implemantation assumes  that a call operation appears the end of codes.
This commit supports multiple token filters with options.",Could you rebase on the master?,True,{}
groonga/groonga,https://github.com/groonga/groonga,1176,2021-04-13T09:24:09Z,2021-04-14T19:28:23Z,2021-05-17T01:04:06Z,MERGED,True,23,1,1,https://github.com/komainu8,package: add a new task for installing qemu-user-static from Groovy,4,[],https://github.com/groonga/groonga/pull/1176,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1176,"Because qemu-user-static in Ubuntu 20.04 has a crash bug as below.

https://bugs.launchpad.net/qemu/+bug/1749393
https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=971537

This bug has already fixed in Ubuntu 20.10.
However, this bug isn't fixed in Ubuntu 20.04.","Because qemu-user-static in Ubuntu 20.04 has a crash bug as below.

https://bugs.launchpad.net/qemu/+bug/1749393
https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=971537

This bug has already fixed in Ubuntu 20.10.
However, this bug isn't fixed in Ubuntu 20.04.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1176,2021-04-13T09:24:09Z,2021-04-14T19:28:23Z,2021-05-17T01:04:06Z,MERGED,True,23,1,1,https://github.com/komainu8,package: add a new task for installing qemu-user-static from Groovy,4,[],https://github.com/groonga/groonga/pull/1176,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/1176#issuecomment-819342625,"Because qemu-user-static in Ubuntu 20.04 has a crash bug as below.

https://bugs.launchpad.net/qemu/+bug/1749393
https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=971537

This bug has already fixed in Ubuntu 20.10.
However, this bug isn't fixed in Ubuntu 20.04.",@kou Thank you for your comments. I've fixed them.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1177,2021-04-21T01:01:31Z,2021-05-12T05:23:42Z,2021-05-12T16:45:13Z,MERGED,True,2655,26,96,https://github.com/HashidaTKS,Add string_slice(),22,[],https://github.com/groonga/groonga/pull/1177,https://github.com/HashidaTKS,1,https://github.com/groonga/groonga/pull/1177,"Implement string_slice

string_slice(target, nth [, length])

returns the substring of target from nth to nth + length.
if nth is a negative number, count from end of target.
if length is omitted, length is 1.


string_slice(target, regexp, nth [, default_value])

returns the first substring of target that matches the nth parenthesis (capture group) of regexp. If not matched, returns default_value.
if default_value is omitted, default_value is """".


string_slice(target, regexp, capture_name[, default_value])

returns the first substring of target that capture_name matches the name of the named capture group of regexp. If not matched, returns default_value.
if default_value is omitted, default_value. is """".



sample:
plugin_register functions/string
table_create Memos TABLE_HASH_KEY ShortText
load --table Memos
[
{""_key"": ""Groonga""}
]
select Memos   --output_columns 'string_slice(_key, 2)' #=> ""o""
select Memos   --output_columns 'string_slice(_key, 2, 3)' #=> ""oon""
select Memos   --output_columns 'string_slice(_key, -3, 3)' #=> ""nga""
select Memos   --output_columns 'string_slice(_key, ""(Gr)(?<Name1>o*)(?<Name2>.*)"", ""Name1"", """")' #=> ""oo""
select Memos   --output_columns 'string_slice(_key, ""G(roon)(ga)"", 2, """")' #=> ""ga""

If there is no problem about the specification above, I'll write a document about this function.","Implement string_slice

string_slice(target, nth [, length])

returns the substring of target from nth to nth + length.
if nth is a negative number, count from end of target.
if length is omitted, length is 1.


string_slice(target, regexp, nth [, default_value])

returns the first substring of target that matches the nth parenthesis (capture group) of regexp. If not matched, returns default_value.
if default_value is omitted, default_value is """".


string_slice(target, regexp, capture_name[, default_value])

returns the first substring of target that capture_name matches the name of the named capture group of regexp. If not matched, returns default_value.
if default_value is omitted, default_value. is """".



sample:
plugin_register functions/string
table_create Memos TABLE_HASH_KEY ShortText
load --table Memos
[
{""_key"": ""Groonga""}
]
select Memos   --output_columns 'string_slice(_key, 2)' #=> ""o""
select Memos   --output_columns 'string_slice(_key, 2, 3)' #=> ""oon""
select Memos   --output_columns 'string_slice(_key, -3, 3)' #=> ""nga""
select Memos   --output_columns 'string_slice(_key, ""(Gr)(?<Name1>o*)(?<Name2>.*)"", ""Name1"", """")' #=> ""oo""
select Memos   --output_columns 'string_slice(_key, ""G(roon)(ga)"", 2, """")' #=> ""ga""

If there is no problem about the specification above, I'll write a document about this function.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1177,2021-04-21T01:01:31Z,2021-05-12T05:23:42Z,2021-05-12T16:45:13Z,MERGED,True,2655,26,96,https://github.com/HashidaTKS,Add string_slice(),22,[],https://github.com/groonga/groonga/pull/1177,https://github.com/HashidaTKS,2,https://github.com/groonga/groonga/pull/1177#issuecomment-824839892,"Implement string_slice

string_slice(target, nth [, length])

returns the substring of target from nth to nth + length.
if nth is a negative number, count from end of target.
if length is omitted, length is 1.


string_slice(target, regexp, nth [, default_value])

returns the first substring of target that matches the nth parenthesis (capture group) of regexp. If not matched, returns default_value.
if default_value is omitted, default_value is """".


string_slice(target, regexp, capture_name[, default_value])

returns the first substring of target that capture_name matches the name of the named capture group of regexp. If not matched, returns default_value.
if default_value is omitted, default_value. is """".



sample:
plugin_register functions/string
table_create Memos TABLE_HASH_KEY ShortText
load --table Memos
[
{""_key"": ""Groonga""}
]
select Memos   --output_columns 'string_slice(_key, 2)' #=> ""o""
select Memos   --output_columns 'string_slice(_key, 2, 3)' #=> ""oon""
select Memos   --output_columns 'string_slice(_key, -3, 3)' #=> ""nga""
select Memos   --output_columns 'string_slice(_key, ""(Gr)(?<Name1>o*)(?<Name2>.*)"", ""Name1"", """")' #=> ""oo""
select Memos   --output_columns 'string_slice(_key, ""G(roon)(ga)"", 2, """")' #=> ""ga""

If there is no problem about the specification above, I'll write a document about this function.","Sorry, I didn't notice the space and blank diffs because I was ignoring space and blank diffs in my environment. Fixed them.

And could you make document for this function?

Sure, I'll write the document.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1177,2021-04-21T01:01:31Z,2021-05-12T05:23:42Z,2021-05-12T16:45:13Z,MERGED,True,2655,26,96,https://github.com/HashidaTKS,Add string_slice(),22,[],https://github.com/groonga/groonga/pull/1177,https://github.com/HashidaTKS,3,https://github.com/groonga/groonga/pull/1177#issuecomment-826249359,"Implement string_slice

string_slice(target, nth [, length])

returns the substring of target from nth to nth + length.
if nth is a negative number, count from end of target.
if length is omitted, length is 1.


string_slice(target, regexp, nth [, default_value])

returns the first substring of target that matches the nth parenthesis (capture group) of regexp. If not matched, returns default_value.
if default_value is omitted, default_value is """".


string_slice(target, regexp, capture_name[, default_value])

returns the first substring of target that capture_name matches the name of the named capture group of regexp. If not matched, returns default_value.
if default_value is omitted, default_value. is """".



sample:
plugin_register functions/string
table_create Memos TABLE_HASH_KEY ShortText
load --table Memos
[
{""_key"": ""Groonga""}
]
select Memos   --output_columns 'string_slice(_key, 2)' #=> ""o""
select Memos   --output_columns 'string_slice(_key, 2, 3)' #=> ""oon""
select Memos   --output_columns 'string_slice(_key, -3, 3)' #=> ""nga""
select Memos   --output_columns 'string_slice(_key, ""(Gr)(?<Name1>o*)(?<Name2>.*)"", ""Name1"", """")' #=> ""oo""
select Memos   --output_columns 'string_slice(_key, ""G(roon)(ga)"", 2, """")' #=> ""ga""

If there is no problem about the specification above, I'll write a document about this function.","Thanks for the review, I responded to the issues pointed out so far.
Please wait a little while to make the document...",True,{}
groonga/groonga,https://github.com/groonga/groonga,1177,2021-04-21T01:01:31Z,2021-05-12T05:23:42Z,2021-05-12T16:45:13Z,MERGED,True,2655,26,96,https://github.com/HashidaTKS,Add string_slice(),22,[],https://github.com/groonga/groonga/pull/1177,https://github.com/komainu8,4,https://github.com/groonga/groonga/pull/1177#issuecomment-827424437,"Implement string_slice

string_slice(target, nth [, length])

returns the substring of target from nth to nth + length.
if nth is a negative number, count from end of target.
if length is omitted, length is 1.


string_slice(target, regexp, nth [, default_value])

returns the first substring of target that matches the nth parenthesis (capture group) of regexp. If not matched, returns default_value.
if default_value is omitted, default_value is """".


string_slice(target, regexp, capture_name[, default_value])

returns the first substring of target that capture_name matches the name of the named capture group of regexp. If not matched, returns default_value.
if default_value is omitted, default_value. is """".



sample:
plugin_register functions/string
table_create Memos TABLE_HASH_KEY ShortText
load --table Memos
[
{""_key"": ""Groonga""}
]
select Memos   --output_columns 'string_slice(_key, 2)' #=> ""o""
select Memos   --output_columns 'string_slice(_key, 2, 3)' #=> ""oon""
select Memos   --output_columns 'string_slice(_key, -3, 3)' #=> ""nga""
select Memos   --output_columns 'string_slice(_key, ""(Gr)(?<Name1>o*)(?<Name2>.*)"", ""Name1"", """")' #=> ""oo""
select Memos   --output_columns 'string_slice(_key, ""G(roon)(ga)"", 2, """")' #=> ""ga""

If there is no problem about the specification above, I'll write a document about this function.","Thanks for the review, I responded to the issues pointed out so far.

Thank you for your fixing.
I finished the review except for documentation.
I haven't the additional indicated items.

Please wait a little while to make the document...

Sure. No need to rush. Take your time.
When the documentation is complete, I will review it.
@kou Could you review this PR?",True,{}
groonga/groonga,https://github.com/groonga/groonga,1177,2021-04-21T01:01:31Z,2021-05-12T05:23:42Z,2021-05-12T16:45:13Z,MERGED,True,2655,26,96,https://github.com/HashidaTKS,Add string_slice(),22,[],https://github.com/groonga/groonga/pull/1177,https://github.com/HashidaTKS,5,https://github.com/groonga/groonga/pull/1177#issuecomment-829093371,"Implement string_slice

string_slice(target, nth [, length])

returns the substring of target from nth to nth + length.
if nth is a negative number, count from end of target.
if length is omitted, length is 1.


string_slice(target, regexp, nth [, default_value])

returns the first substring of target that matches the nth parenthesis (capture group) of regexp. If not matched, returns default_value.
if default_value is omitted, default_value is """".


string_slice(target, regexp, capture_name[, default_value])

returns the first substring of target that capture_name matches the name of the named capture group of regexp. If not matched, returns default_value.
if default_value is omitted, default_value. is """".



sample:
plugin_register functions/string
table_create Memos TABLE_HASH_KEY ShortText
load --table Memos
[
{""_key"": ""Groonga""}
]
select Memos   --output_columns 'string_slice(_key, 2)' #=> ""o""
select Memos   --output_columns 'string_slice(_key, 2, 3)' #=> ""oon""
select Memos   --output_columns 'string_slice(_key, -3, 3)' #=> ""nga""
select Memos   --output_columns 'string_slice(_key, ""(Gr)(?<Name1>o*)(?<Name2>.*)"", ""Name1"", """")' #=> ""oo""
select Memos   --output_columns 'string_slice(_key, ""G(roon)(ga)"", 2, """")' #=> ""ga""

If there is no problem about the specification above, I'll write a document about this function.","@kou @komainu8
Thank you for the review!
I have responded to the feedback and made some changes.

Do we need default_value for string_slice(target, nth) case too?
BTW, how about string_slice(..., {""default_value"": default_value}) API for the default value? It's extensible but redundant for users.

Sounds good. I fiexd this API like that.
New syntax is as below.

string_slice(target, nth[, options])
string_slice(target, nth, length[, options])
string_slice(target, regexp, nth [, options])
string_slice(target, regexp, name[, options])

options uses the following format. default_value is optional.
{
  ""default_value"": string_value,
}

This modification also affects to string_substring
New syntax of string_substring is as below.

string_substring(target, nth [, options])
string_substring(target, nth , length[, options])

options is same as the options of string slice.
(Please wait a little while to make the document.)",True,{}
groonga/groonga,https://github.com/groonga/groonga,1177,2021-04-21T01:01:31Z,2021-05-12T05:23:42Z,2021-05-12T16:45:13Z,MERGED,True,2655,26,96,https://github.com/HashidaTKS,Add string_slice(),22,[],https://github.com/groonga/groonga/pull/1177,https://github.com/HashidaTKS,6,https://github.com/groonga/groonga/pull/1177#issuecomment-830721912,"Implement string_slice

string_slice(target, nth [, length])

returns the substring of target from nth to nth + length.
if nth is a negative number, count from end of target.
if length is omitted, length is 1.


string_slice(target, regexp, nth [, default_value])

returns the first substring of target that matches the nth parenthesis (capture group) of regexp. If not matched, returns default_value.
if default_value is omitted, default_value is """".


string_slice(target, regexp, capture_name[, default_value])

returns the first substring of target that capture_name matches the name of the named capture group of regexp. If not matched, returns default_value.
if default_value is omitted, default_value. is """".



sample:
plugin_register functions/string
table_create Memos TABLE_HASH_KEY ShortText
load --table Memos
[
{""_key"": ""Groonga""}
]
select Memos   --output_columns 'string_slice(_key, 2)' #=> ""o""
select Memos   --output_columns 'string_slice(_key, 2, 3)' #=> ""oon""
select Memos   --output_columns 'string_slice(_key, -3, 3)' #=> ""nga""
select Memos   --output_columns 'string_slice(_key, ""(Gr)(?<Name1>o*)(?<Name2>.*)"", ""Name1"", """")' #=> ""oo""
select Memos   --output_columns 'string_slice(_key, ""G(roon)(ga)"", 2, """")' #=> ""ga""

If there is no problem about the specification above, I'll write a document about this function.","I have made the Japanese document.
If there is no problem with the contents, I'll localize it.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1177,2021-04-21T01:01:31Z,2021-05-12T05:23:42Z,2021-05-12T16:45:13Z,MERGED,True,2655,26,96,https://github.com/HashidaTKS,Add string_slice(),22,[],https://github.com/groonga/groonga/pull/1177,https://github.com/HashidaTKS,7,https://github.com/groonga/groonga/pull/1177#issuecomment-831622307,"Implement string_slice

string_slice(target, nth [, length])

returns the substring of target from nth to nth + length.
if nth is a negative number, count from end of target.
if length is omitted, length is 1.


string_slice(target, regexp, nth [, default_value])

returns the first substring of target that matches the nth parenthesis (capture group) of regexp. If not matched, returns default_value.
if default_value is omitted, default_value is """".


string_slice(target, regexp, capture_name[, default_value])

returns the first substring of target that capture_name matches the name of the named capture group of regexp. If not matched, returns default_value.
if default_value is omitted, default_value. is """".



sample:
plugin_register functions/string
table_create Memos TABLE_HASH_KEY ShortText
load --table Memos
[
{""_key"": ""Groonga""}
]
select Memos   --output_columns 'string_slice(_key, 2)' #=> ""o""
select Memos   --output_columns 'string_slice(_key, 2, 3)' #=> ""oon""
select Memos   --output_columns 'string_slice(_key, -3, 3)' #=> ""nga""
select Memos   --output_columns 'string_slice(_key, ""(Gr)(?<Name1>o*)(?<Name2>.*)"", ""Name1"", """")' #=> ""oo""
select Memos   --output_columns 'string_slice(_key, ""G(roon)(ga)"", 2, """")' #=> ""ga""

If there is no problem about the specification above, I'll write a document about this function.","@kou
I have responded to the feedback.
Please review again.

modifications

respond to the feedback
reduce unnecessary allocations
localize the document



We should make a document for string_substring but I think it is out of scope of this patch.
How about make it in a separated pull request in the future?",True,{}
groonga/groonga,https://github.com/groonga/groonga,1177,2021-04-21T01:01:31Z,2021-05-12T05:23:42Z,2021-05-12T16:45:13Z,MERGED,True,2655,26,96,https://github.com/HashidaTKS,Add string_slice(),22,[],https://github.com/groonga/groonga/pull/1177,https://github.com/kou,8,https://github.com/groonga/groonga/pull/1177#issuecomment-833146798,"Implement string_slice

string_slice(target, nth [, length])

returns the substring of target from nth to nth + length.
if nth is a negative number, count from end of target.
if length is omitted, length is 1.


string_slice(target, regexp, nth [, default_value])

returns the first substring of target that matches the nth parenthesis (capture group) of regexp. If not matched, returns default_value.
if default_value is omitted, default_value is """".


string_slice(target, regexp, capture_name[, default_value])

returns the first substring of target that capture_name matches the name of the named capture group of regexp. If not matched, returns default_value.
if default_value is omitted, default_value. is """".



sample:
plugin_register functions/string
table_create Memos TABLE_HASH_KEY ShortText
load --table Memos
[
{""_key"": ""Groonga""}
]
select Memos   --output_columns 'string_slice(_key, 2)' #=> ""o""
select Memos   --output_columns 'string_slice(_key, 2, 3)' #=> ""oon""
select Memos   --output_columns 'string_slice(_key, -3, 3)' #=> ""nga""
select Memos   --output_columns 'string_slice(_key, ""(Gr)(?<Name1>o*)(?<Name2>.*)"", ""Name1"", """")' #=> ""oo""
select Memos   --output_columns 'string_slice(_key, ""G(roon)(ga)"", 2, """")' #=> ""ga""

If there is no problem about the specification above, I'll write a document about this function.","How about make it in a separated pull request in the future?

It make sense.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1177,2021-04-21T01:01:31Z,2021-05-12T05:23:42Z,2021-05-12T16:45:13Z,MERGED,True,2655,26,96,https://github.com/HashidaTKS,Add string_slice(),22,[],https://github.com/groonga/groonga/pull/1177,https://github.com/HashidaTKS,9,https://github.com/groonga/groonga/pull/1177#issuecomment-833754998,"Implement string_slice

string_slice(target, nth [, length])

returns the substring of target from nth to nth + length.
if nth is a negative number, count from end of target.
if length is omitted, length is 1.


string_slice(target, regexp, nth [, default_value])

returns the first substring of target that matches the nth parenthesis (capture group) of regexp. If not matched, returns default_value.
if default_value is omitted, default_value is """".


string_slice(target, regexp, capture_name[, default_value])

returns the first substring of target that capture_name matches the name of the named capture group of regexp. If not matched, returns default_value.
if default_value is omitted, default_value. is """".



sample:
plugin_register functions/string
table_create Memos TABLE_HASH_KEY ShortText
load --table Memos
[
{""_key"": ""Groonga""}
]
select Memos   --output_columns 'string_slice(_key, 2)' #=> ""o""
select Memos   --output_columns 'string_slice(_key, 2, 3)' #=> ""oon""
select Memos   --output_columns 'string_slice(_key, -3, 3)' #=> ""nga""
select Memos   --output_columns 'string_slice(_key, ""(Gr)(?<Name1>o*)(?<Name2>.*)"", ""Name1"", """")' #=> ""oo""
select Memos   --output_columns 'string_slice(_key, ""G(roon)(ga)"", 2, """")' #=> ""ga""

If there is no problem about the specification above, I'll write a document about this function.","@kou
Thanks for the review.
I have made the following modifications:

modify the document
fix typos
change test names
string_substring

change to return an empty string when length is 0



Please review again.
I'm sorry to bother you so many times...",True,{}
groonga/groonga,https://github.com/groonga/groonga,1177,2021-04-21T01:01:31Z,2021-05-12T05:23:42Z,2021-05-12T16:45:13Z,MERGED,True,2655,26,96,https://github.com/HashidaTKS,Add string_slice(),22,[],https://github.com/groonga/groonga/pull/1177,https://github.com/komainu8,10,https://github.com/groonga/groonga/pull/1177#issuecomment-838070417,"Implement string_slice

string_slice(target, nth [, length])

returns the substring of target from nth to nth + length.
if nth is a negative number, count from end of target.
if length is omitted, length is 1.


string_slice(target, regexp, nth [, default_value])

returns the first substring of target that matches the nth parenthesis (capture group) of regexp. If not matched, returns default_value.
if default_value is omitted, default_value is """".


string_slice(target, regexp, capture_name[, default_value])

returns the first substring of target that capture_name matches the name of the named capture group of regexp. If not matched, returns default_value.
if default_value is omitted, default_value. is """".



sample:
plugin_register functions/string
table_create Memos TABLE_HASH_KEY ShortText
load --table Memos
[
{""_key"": ""Groonga""}
]
select Memos   --output_columns 'string_slice(_key, 2)' #=> ""o""
select Memos   --output_columns 'string_slice(_key, 2, 3)' #=> ""oon""
select Memos   --output_columns 'string_slice(_key, -3, 3)' #=> ""nga""
select Memos   --output_columns 'string_slice(_key, ""(Gr)(?<Name1>o*)(?<Name2>.*)"", ""Name1"", """")' #=> ""oo""
select Memos   --output_columns 'string_slice(_key, ""G(roon)(ga)"", 2, """")' #=> ""ga""

If there is no problem about the specification above, I'll write a document about this function.","I finished review.
@HashidaTKS Could you confirm my comments.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1177,2021-04-21T01:01:31Z,2021-05-12T05:23:42Z,2021-05-12T16:45:13Z,MERGED,True,2655,26,96,https://github.com/HashidaTKS,Add string_slice(),22,[],https://github.com/groonga/groonga/pull/1177,https://github.com/HashidaTKS,11,https://github.com/groonga/groonga/pull/1177#issuecomment-838300399,"Implement string_slice

string_slice(target, nth [, length])

returns the substring of target from nth to nth + length.
if nth is a negative number, count from end of target.
if length is omitted, length is 1.


string_slice(target, regexp, nth [, default_value])

returns the first substring of target that matches the nth parenthesis (capture group) of regexp. If not matched, returns default_value.
if default_value is omitted, default_value is """".


string_slice(target, regexp, capture_name[, default_value])

returns the first substring of target that capture_name matches the name of the named capture group of regexp. If not matched, returns default_value.
if default_value is omitted, default_value. is """".



sample:
plugin_register functions/string
table_create Memos TABLE_HASH_KEY ShortText
load --table Memos
[
{""_key"": ""Groonga""}
]
select Memos   --output_columns 'string_slice(_key, 2)' #=> ""o""
select Memos   --output_columns 'string_slice(_key, 2, 3)' #=> ""oon""
select Memos   --output_columns 'string_slice(_key, -3, 3)' #=> ""nga""
select Memos   --output_columns 'string_slice(_key, ""(Gr)(?<Name1>o*)(?<Name2>.*)"", ""Name1"", """")' #=> ""oo""
select Memos   --output_columns 'string_slice(_key, ""G(roon)(ga)"", 2, """")' #=> ""ga""

If there is no problem about the specification above, I'll write a document about this function.","@komainu8
Thanks for the review!
I have responded what you pointed out.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1179,2021-04-28T03:34:55Z,2021-04-28T04:49:23Z,2021-04-28T04:49:49Z,MERGED,True,1,1,1,https://github.com/komainu8,sort_keys: add missing sort flag assignments,2,[],https://github.com/groonga/groonga/pull/1179,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1179,"GitHub: fix GH-1178.
There are paths that don't assign a sort flag to ""key->flags"".
By this, sort flag is unexpected vale and Groonga doesn't output sort results.","GitHub: fix GH-1178.
There are paths that don't assign a sort flag to ""key->flags"".
By this, sort flag is unexpected vale and Groonga doesn't output sort results.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1187,2021-05-09T06:15:50Z,2021-05-10T06:11:04Z,2021-05-10T06:11:09Z,MERGED,True,558,5,2,https://github.com/komainu8,Update news for 11.0.2,2,[],https://github.com/groonga/groonga/pull/1187,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1187,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1188,2021-05-12T14:01:24Z,2021-05-12T23:35:17Z,2021-05-12T23:36:11Z,MERGED,True,2,2,2,https://github.com/komainu8,doc: use highlight directive instead of highlightlang directive,1,[],https://github.com/groonga/groonga/pull/1188,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1188,Because highlightlang directive is removed since Sphinx 4.0.0.,Because highlightlang directive is removed since Sphinx 4.0.0.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1189,2021-05-12T14:04:23Z,2021-05-12T23:35:34Z,2021-05-12T23:36:01Z,MERGED,True,2,556,279,https://github.com/komainu8,doc: remove a highlight directive,1,[],https://github.com/groonga/groonga/pull/1189,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1189,"Because the 'default' highlight language
(https://www.sphinx-doc.org/en/master/usage/configuration.html#confval-highlight_language)
is enough for us. (Try 'python3' first and then fallback to ''none'.)","Because the 'default' highlight language
(https://www.sphinx-doc.org/en/master/usage/configuration.html#confval-highlight_language)
is enough for us. (Try 'python3' first and then fallback to ''none'.)",True,{}
groonga/groonga,https://github.com/groonga/groonga,1190,2021-05-13T01:27:47Z,2021-05-27T06:49:12Z,2021-05-27T06:49:15Z,MERGED,True,508,21,2,https://github.com/komainu8,doc news: add news topics for 11.0.3,1,[],https://github.com/groonga/groonga/pull/1190,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1190,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1191,2021-05-13T20:14:29Z,2021-05-19T06:06:07Z,2021-05-19T06:06:07Z,MERGED,True,78,505,498,https://github.com/HashidaTKS,Add editorconfig for Visual Studio,5,[],https://github.com/groonga/groonga/pull/1191,https://github.com/HashidaTKS,1,https://github.com/groonga/groonga/pull/1191,"Add editorconfig for Visual Studio

Automatically generated from the Visual Studio C/C++ format settings
Most settings are for Visual Studio only
Add some common settings

Strictly it doesn't match the current coding style because of the following reasons.
No settings ( I couldn't find )

Space between label and colon

exit :
case GRN_TABLE_PAT_KEY :
In Visual Studio, these are formatted to exit: and case GRN_TABLE_PAT_KEY:.



Not unified on the code side


Newline before open brace of function

bool grn_dat_rebuild_trie(grn_ctx *ctx, grn_dat *dat) {

 bool
 grn_dat_open_trie_if_needed(grn_ctx *ctx, grn_dat *dat)
 {


In this editorconfig, always adding newline.



Indent for namespace


namespace grn {
  namespace bulk {
    template <typename NUMERIC>
    NUMERIC
    ...



namespace grn {
namespace dat {

 // This class is used to detect an out-of-range access in debug mode.
template <typename T>
...


In this editorconfig, always indenting.



Indent for access modifier


 class GRN_DAT_API Array {
  public:
   Array() : ptr_(NULL), size_(0) {}


It seems that .hpp files use this style.



 class Array
 {
 public:
   Array(grn_ctx *ctx)


In this editorconfig, always not indenting.



Because of these subtle differences in style, I think it's necessary to re-format manually after auto formatting.
...It may be better to use clang-format instead of this editorconfig so that all editors can use same format and unify these differences.","Add editorconfig for Visual Studio

Automatically generated from the Visual Studio C/C++ format settings
Most settings are for Visual Studio only
Add some common settings

Strictly it doesn't match the current coding style because of the following reasons.
No settings ( I couldn't find )

Space between label and colon

exit :
case GRN_TABLE_PAT_KEY :
In Visual Studio, these are formatted to exit: and case GRN_TABLE_PAT_KEY:.



Not unified on the code side


Newline before open brace of function

bool grn_dat_rebuild_trie(grn_ctx *ctx, grn_dat *dat) {

 bool
 grn_dat_open_trie_if_needed(grn_ctx *ctx, grn_dat *dat)
 {


In this editorconfig, always adding newline.



Indent for namespace


namespace grn {
  namespace bulk {
    template <typename NUMERIC>
    NUMERIC
    ...



namespace grn {
namespace dat {

 // This class is used to detect an out-of-range access in debug mode.
template <typename T>
...


In this editorconfig, always indenting.



Indent for access modifier


 class GRN_DAT_API Array {
  public:
   Array() : ptr_(NULL), size_(0) {}


It seems that .hpp files use this style.



 class Array
 {
 public:
   Array(grn_ctx *ctx)


In this editorconfig, always not indenting.



Because of these subtle differences in style, I think it's necessary to re-format manually after auto formatting.
...It may be better to use clang-format instead of this editorconfig so that all editors can use same format and unify these differences.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1191,2021-05-13T20:14:29Z,2021-05-19T06:06:07Z,2021-05-19T06:06:07Z,MERGED,True,78,505,498,https://github.com/HashidaTKS,Add editorconfig for Visual Studio,5,[],https://github.com/groonga/groonga/pull/1191,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/1191#issuecomment-843248790,"Add editorconfig for Visual Studio

Automatically generated from the Visual Studio C/C++ format settings
Most settings are for Visual Studio only
Add some common settings

Strictly it doesn't match the current coding style because of the following reasons.
No settings ( I couldn't find )

Space between label and colon

exit :
case GRN_TABLE_PAT_KEY :
In Visual Studio, these are formatted to exit: and case GRN_TABLE_PAT_KEY:.



Not unified on the code side


Newline before open brace of function

bool grn_dat_rebuild_trie(grn_ctx *ctx, grn_dat *dat) {

 bool
 grn_dat_open_trie_if_needed(grn_ctx *ctx, grn_dat *dat)
 {


In this editorconfig, always adding newline.



Indent for namespace


namespace grn {
  namespace bulk {
    template <typename NUMERIC>
    NUMERIC
    ...



namespace grn {
namespace dat {

 // This class is used to detect an out-of-range access in debug mode.
template <typename T>
...


In this editorconfig, always indenting.



Indent for access modifier


 class GRN_DAT_API Array {
  public:
   Array() : ptr_(NULL), size_(0) {}


It seems that .hpp files use this style.



 class Array
 {
 public:
   Array(grn_ctx *ctx)


In this editorconfig, always not indenting.



Because of these subtle differences in style, I think it's necessary to re-format manually after auto formatting.
...It may be better to use clang-format instead of this editorconfig so that all editors can use same format and unify these differences.","I can't decide whether we accept this PR  or not.
Because the purpose of this modification is that developers write codes without being conscious of coding style.
But we need to modify the part of the coding style even if we use this. However, I think that mistakes about coding style reduce by this PR.
@kou What do you think about whether we accept this PR  or not?",True,{}
groonga/groonga,https://github.com/groonga/groonga,1191,2021-05-13T20:14:29Z,2021-05-19T06:06:07Z,2021-05-19T06:06:07Z,MERGED,True,78,505,498,https://github.com/HashidaTKS,Add editorconfig for Visual Studio,5,[],https://github.com/groonga/groonga/pull/1191,https://github.com/kou,3,https://github.com/groonga/groonga/pull/1191#issuecomment-843667341,"Add editorconfig for Visual Studio

Automatically generated from the Visual Studio C/C++ format settings
Most settings are for Visual Studio only
Add some common settings

Strictly it doesn't match the current coding style because of the following reasons.
No settings ( I couldn't find )

Space between label and colon

exit :
case GRN_TABLE_PAT_KEY :
In Visual Studio, these are formatted to exit: and case GRN_TABLE_PAT_KEY:.



Not unified on the code side


Newline before open brace of function

bool grn_dat_rebuild_trie(grn_ctx *ctx, grn_dat *dat) {

 bool
 grn_dat_open_trie_if_needed(grn_ctx *ctx, grn_dat *dat)
 {


In this editorconfig, always adding newline.



Indent for namespace


namespace grn {
  namespace bulk {
    template <typename NUMERIC>
    NUMERIC
    ...



namespace grn {
namespace dat {

 // This class is used to detect an out-of-range access in debug mode.
template <typename T>
...


In this editorconfig, always indenting.



Indent for access modifier


 class GRN_DAT_API Array {
  public:
   Array() : ptr_(NULL), size_(0) {}


It seems that .hpp files use this style.



 class Array
 {
 public:
   Array(grn_ctx *ctx)


In this editorconfig, always not indenting.



Because of these subtle differences in style, I think it's necessary to re-format manually after auto formatting.
...It may be better to use clang-format instead of this editorconfig so that all editors can use same format and unify these differences.","Generally, we should consider pros and cons to decide.
In this case, there are some pros but there are no cons:

Developers who use Visual Studio can reduce manual style adjustments.
We can unify style configuration for Emacs and Visual Studio.

This is not perfect but better than the current situation. So, we can accept this improvement.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1191,2021-05-13T20:14:29Z,2021-05-19T06:06:07Z,2021-05-19T06:06:07Z,MERGED,True,78,505,498,https://github.com/HashidaTKS,Add editorconfig for Visual Studio,5,[],https://github.com/groonga/groonga/pull/1191,https://github.com/kou,4,https://github.com/groonga/groonga/pull/1191#issuecomment-843667765,"Add editorconfig for Visual Studio

Automatically generated from the Visual Studio C/C++ format settings
Most settings are for Visual Studio only
Add some common settings

Strictly it doesn't match the current coding style because of the following reasons.
No settings ( I couldn't find )

Space between label and colon

exit :
case GRN_TABLE_PAT_KEY :
In Visual Studio, these are formatted to exit: and case GRN_TABLE_PAT_KEY:.



Not unified on the code side


Newline before open brace of function

bool grn_dat_rebuild_trie(grn_ctx *ctx, grn_dat *dat) {

 bool
 grn_dat_open_trie_if_needed(grn_ctx *ctx, grn_dat *dat)
 {


In this editorconfig, always adding newline.



Indent for namespace


namespace grn {
  namespace bulk {
    template <typename NUMERIC>
    NUMERIC
    ...



namespace grn {
namespace dat {

 // This class is used to detect an out-of-range access in debug mode.
template <typename T>
...


In this editorconfig, always indenting.



Indent for access modifier


 class GRN_DAT_API Array {
  public:
   Array() : ptr_(NULL), size_(0) {}


It seems that .hpp files use this style.



 class Array
 {
 public:
   Array(grn_ctx *ctx)


In this editorconfig, always not indenting.



Because of these subtle differences in style, I think it's necessary to re-format manually after auto formatting.
...It may be better to use clang-format instead of this editorconfig so that all editors can use same format and unify these differences.","Space between label and colon

OK. We can switch to LABEL: (no space between LABEL and :) style. Because there is no active developer that likes the current LABEL : style.

Newline before open brace of function

We can unify to newline before open brace of function style. Because there is no active developer that likes no newline before open brace of function style.

Indent for namespace

We can unity to always indent style. Because there is no active developer that likes no indent for namespace.

Indent for access modifier

We can unity to no indent for access modifier style. Because there is no active developer that likes indent for access modifier.
We can change the current style but we don't want to do batch re-format. We improve the current style when we touch each file.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1191,2021-05-13T20:14:29Z,2021-05-19T06:06:07Z,2021-05-19T06:06:07Z,MERGED,True,78,505,498,https://github.com/HashidaTKS,Add editorconfig for Visual Studio,5,[],https://github.com/groonga/groonga/pull/1191,https://github.com/kou,5,https://github.com/groonga/groonga/pull/1191#issuecomment-843668173,"Add editorconfig for Visual Studio

Automatically generated from the Visual Studio C/C++ format settings
Most settings are for Visual Studio only
Add some common settings

Strictly it doesn't match the current coding style because of the following reasons.
No settings ( I couldn't find )

Space between label and colon

exit :
case GRN_TABLE_PAT_KEY :
In Visual Studio, these are formatted to exit: and case GRN_TABLE_PAT_KEY:.



Not unified on the code side


Newline before open brace of function

bool grn_dat_rebuild_trie(grn_ctx *ctx, grn_dat *dat) {

 bool
 grn_dat_open_trie_if_needed(grn_ctx *ctx, grn_dat *dat)
 {


In this editorconfig, always adding newline.



Indent for namespace


namespace grn {
  namespace bulk {
    template <typename NUMERIC>
    NUMERIC
    ...



namespace grn {
namespace dat {

 // This class is used to detect an out-of-range access in debug mode.
template <typename T>
...


In this editorconfig, always indenting.



Indent for access modifier


 class GRN_DAT_API Array {
  public:
   Array() : ptr_(NULL), size_(0) {}


It seems that .hpp files use this style.



 class Array
 {
 public:
   Array(grn_ctx *ctx)


In this editorconfig, always not indenting.



Because of these subtle differences in style, I think it's necessary to re-format manually after auto formatting.
...It may be better to use clang-format instead of this editorconfig so that all editors can use same format and unify these differences.",I simplified editorconfig a bit and removed style configurations for Emacs. Because we can use .editorconfig configuration with Emacs.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1191,2021-05-13T20:14:29Z,2021-05-19T06:06:07Z,2021-05-19T06:06:07Z,MERGED,True,78,505,498,https://github.com/HashidaTKS,Add editorconfig for Visual Studio,5,[],https://github.com/groonga/groonga/pull/1191,https://github.com/kou,6,https://github.com/groonga/groonga/pull/1191#issuecomment-843668700,"Add editorconfig for Visual Studio

Automatically generated from the Visual Studio C/C++ format settings
Most settings are for Visual Studio only
Add some common settings

Strictly it doesn't match the current coding style because of the following reasons.
No settings ( I couldn't find )

Space between label and colon

exit :
case GRN_TABLE_PAT_KEY :
In Visual Studio, these are formatted to exit: and case GRN_TABLE_PAT_KEY:.



Not unified on the code side


Newline before open brace of function

bool grn_dat_rebuild_trie(grn_ctx *ctx, grn_dat *dat) {

 bool
 grn_dat_open_trie_if_needed(grn_ctx *ctx, grn_dat *dat)
 {


In this editorconfig, always adding newline.



Indent for namespace


namespace grn {
  namespace bulk {
    template <typename NUMERIC>
    NUMERIC
    ...



namespace grn {
namespace dat {

 // This class is used to detect an out-of-range access in debug mode.
template <typename T>
...


In this editorconfig, always indenting.



Indent for access modifier


 class GRN_DAT_API Array {
  public:
   Array() : ptr_(NULL), size_(0) {}


It seems that .hpp files use this style.



 class Array
 {
 public:
   Array(grn_ctx *ctx)


In this editorconfig, always not indenting.



Because of these subtle differences in style, I think it's necessary to re-format manually after auto formatting.
...It may be better to use clang-format instead of this editorconfig so that all editors can use same format and unify these differences.","It may be better to use clang-format instead of this editorconfig so that all editors can use same format and unify these differences.

If we use this approach in the future, we should also configure format check CI job.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1192,2021-05-21T09:10:30Z,,2022-03-15T05:24:16Z,OPEN,False,50,0,1,https://github.com/komainu8,tool output current n_buffer_segments within database: add,11,[],https://github.com/groonga/groonga/pull/1192,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1192,"The purpose of this tool is for monitoring the n_buffer_segments value.
This tool outputs n_buffer_segments to files.
These files are named an index name.
The value of n_buffer_segments and the time when this script is executed is written each file.
1622634010.103554, 12
1622634010.115556, 34
1622634010.127578, 35
.
.
.

If the error occurs in this script, this script output error logs as output_n_buffer_segments.error as below.
2021-06-03 14:19:45 +0900: #<Process::Status: pid 32082 exit 1>: [[-22,1622697585.43357,0.0001327991485595703,""invalid command name: dumpAAA"",[[""grn_ctx_qe_exec"",""ctx.c"",1747]]]]: 

n_buffer_segments is the number of segments used for “buffer” in the target index column.
“buffer” is used for storing posting lists.
Groonga has the limitation of the number of buffers. (66535)
We can't update the index when it reaches the limitation. Therefore, we want to monitor this value periodically.
This tool useful in such cases.","The purpose of this tool is for monitoring the n_buffer_segments value.
This tool outputs n_buffer_segments to files.
These files are named an index name.
The value of n_buffer_segments and the time when this script is executed is written each file.
1622634010.103554, 12
1622634010.115556, 34
1622634010.127578, 35
.
.
.

If the error occurs in this script, this script output error logs as output_n_buffer_segments.error as below.
2021-06-03 14:19:45 +0900: #<Process::Status: pid 32082 exit 1>: [[-22,1622697585.43357,0.0001327991485595703,""invalid command name: dumpAAA"",[[""grn_ctx_qe_exec"",""ctx.c"",1747]]]]: 

n_buffer_segments is the number of segments used for “buffer” in the target index column.
“buffer” is used for storing posting lists.
Groonga has the limitation of the number of buffers. (66535)
We can't update the index when it reaches the limitation. Therefore, we want to monitor this value periodically.
This tool useful in such cases.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1192,2021-05-21T09:10:30Z,,2022-03-15T05:24:16Z,OPEN,False,50,0,1,https://github.com/komainu8,tool output current n_buffer_segments within database: add,11,[],https://github.com/groonga/groonga/pull/1192,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/1192#issuecomment-848591940,"The purpose of this tool is for monitoring the n_buffer_segments value.
This tool outputs n_buffer_segments to files.
These files are named an index name.
The value of n_buffer_segments and the time when this script is executed is written each file.
1622634010.103554, 12
1622634010.115556, 34
1622634010.127578, 35
.
.
.

If the error occurs in this script, this script output error logs as output_n_buffer_segments.error as below.
2021-06-03 14:19:45 +0900: #<Process::Status: pid 32082 exit 1>: [[-22,1622697585.43357,0.0001327991485595703,""invalid command name: dumpAAA"",[[""grn_ctx_qe_exec"",""ctx.c"",1747]]]]: 

n_buffer_segments is the number of segments used for “buffer” in the target index column.
“buffer” is used for storing posting lists.
Groonga has the limitation of the number of buffers. (66535)
We can't update the index when it reaches the limitation. Therefore, we want to monitor this value periodically.
This tool useful in such cases.","@HashidaTKS
Thank you for your comment.
I've added the purpose of this tool in the description of this PR.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1192,2021-05-21T09:10:30Z,,2022-03-15T05:24:16Z,OPEN,False,50,0,1,https://github.com/komainu8,tool output current n_buffer_segments within database: add,11,[],https://github.com/groonga/groonga/pull/1192,https://github.com/HashidaTKS,3,https://github.com/groonga/groonga/pull/1192#issuecomment-848840151,"The purpose of this tool is for monitoring the n_buffer_segments value.
This tool outputs n_buffer_segments to files.
These files are named an index name.
The value of n_buffer_segments and the time when this script is executed is written each file.
1622634010.103554, 12
1622634010.115556, 34
1622634010.127578, 35
.
.
.

If the error occurs in this script, this script output error logs as output_n_buffer_segments.error as below.
2021-06-03 14:19:45 +0900: #<Process::Status: pid 32082 exit 1>: [[-22,1622697585.43357,0.0001327991485595703,""invalid command name: dumpAAA"",[[""grn_ctx_qe_exec"",""ctx.c"",1747]]]]: 

n_buffer_segments is the number of segments used for “buffer” in the target index column.
“buffer” is used for storing posting lists.
Groonga has the limitation of the number of buffers. (66535)
We can't update the index when it reaches the limitation. Therefore, we want to monitor this value periodically.
This tool useful in such cases.",Thank you!,True,{}
groonga/groonga,https://github.com/groonga/groonga,1192,2021-05-21T09:10:30Z,,2022-03-15T05:24:16Z,OPEN,False,50,0,1,https://github.com/komainu8,tool output current n_buffer_segments within database: add,11,[],https://github.com/groonga/groonga/pull/1192,https://github.com/komainu8,4,https://github.com/groonga/groonga/pull/1192#issuecomment-852857645,"The purpose of this tool is for monitoring the n_buffer_segments value.
This tool outputs n_buffer_segments to files.
These files are named an index name.
The value of n_buffer_segments and the time when this script is executed is written each file.
1622634010.103554, 12
1622634010.115556, 34
1622634010.127578, 35
.
.
.

If the error occurs in this script, this script output error logs as output_n_buffer_segments.error as below.
2021-06-03 14:19:45 +0900: #<Process::Status: pid 32082 exit 1>: [[-22,1622697585.43357,0.0001327991485595703,""invalid command name: dumpAAA"",[[""grn_ctx_qe_exec"",""ctx.c"",1747]]]]: 

n_buffer_segments is the number of segments used for “buffer” in the target index column.
“buffer” is used for storing posting lists.
Groonga has the limitation of the number of buffers. (66535)
We can't update the index when it reaches the limitation. Therefore, we want to monitor this value periodically.
This tool useful in such cases.","I rewrite this script by ruby.
And I changed to output the value of `n_buffer_segments to a file.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1192,2021-05-21T09:10:30Z,,2022-03-15T05:24:16Z,OPEN,False,50,0,1,https://github.com/komainu8,tool output current n_buffer_segments within database: add,11,[],https://github.com/groonga/groonga/pull/1192,https://github.com/komainu8,5,https://github.com/groonga/groonga/pull/1192#issuecomment-854506174,"The purpose of this tool is for monitoring the n_buffer_segments value.
This tool outputs n_buffer_segments to files.
These files are named an index name.
The value of n_buffer_segments and the time when this script is executed is written each file.
1622634010.103554, 12
1622634010.115556, 34
1622634010.127578, 35
.
.
.

If the error occurs in this script, this script output error logs as output_n_buffer_segments.error as below.
2021-06-03 14:19:45 +0900: #<Process::Status: pid 32082 exit 1>: [[-22,1622697585.43357,0.0001327991485595703,""invalid command name: dumpAAA"",[[""grn_ctx_qe_exec"",""ctx.c"",1747]]]]: 

n_buffer_segments is the number of segments used for “buffer” in the target index column.
“buffer” is used for storing posting lists.
Groonga has the limitation of the number of buffers. (66535)
We can't update the index when it reaches the limitation. Therefore, we want to monitor this value periodically.
This tool useful in such cases.",Thank you for your comments. I've fixed them.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1192,2021-05-21T09:10:30Z,,2022-03-15T05:24:16Z,OPEN,False,50,0,1,https://github.com/komainu8,tool output current n_buffer_segments within database: add,11,[],https://github.com/groonga/groonga/pull/1192,https://github.com/komainu8,6,https://github.com/groonga/groonga/pull/1192#issuecomment-856341120,"The purpose of this tool is for monitoring the n_buffer_segments value.
This tool outputs n_buffer_segments to files.
These files are named an index name.
The value of n_buffer_segments and the time when this script is executed is written each file.
1622634010.103554, 12
1622634010.115556, 34
1622634010.127578, 35
.
.
.

If the error occurs in this script, this script output error logs as output_n_buffer_segments.error as below.
2021-06-03 14:19:45 +0900: #<Process::Status: pid 32082 exit 1>: [[-22,1622697585.43357,0.0001327991485595703,""invalid command name: dumpAAA"",[[""grn_ctx_qe_exec"",""ctx.c"",1747]]]]: 

n_buffer_segments is the number of segments used for “buffer” in the target index column.
“buffer” is used for storing posting lists.
Groonga has the limitation of the number of buffers. (66535)
We can't update the index when it reaches the limitation. Therefore, we want to monitor this value periodically.
This tool useful in such cases.",Thank you for your comments. I've fixed them.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1193,2021-05-25T00:25:25Z,2021-05-25T20:31:49Z,2021-05-25T20:31:54Z,MERGED,True,2,2,1,https://github.com/kou,GRN_TOKEN_FORCE_PREFIX: fix documentation,2,[],https://github.com/groonga/groonga/pull/1193,https://github.com/kou,1,https://github.com/groonga/groonga/pull/1193,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1193,2021-05-25T00:25:25Z,2021-05-25T20:31:49Z,2021-05-25T20:31:54Z,MERGED,True,2,2,1,https://github.com/kou,GRN_TOKEN_FORCE_PREFIX: fix documentation,2,[],https://github.com/groonga/groonga/pull/1193,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1193#issuecomment-847441682,,Cc: @HashidaTKS,True,{}
groonga/groonga,https://github.com/groonga/groonga,1194,2021-05-25T00:31:37Z,2021-05-25T20:32:15Z,2021-05-25T20:32:18Z,MERGED,True,1,1,1,https://github.com/kou,grn_token_status: use uint32_t instead of unsigned int,1,[],https://github.com/groonga/groonga/pull/1194,https://github.com/kou,1,https://github.com/groonga/groonga/pull/1194,"{,u}int{8,16,32,64}_t are suitable raw integer types such as int and
unsigned int. Because they aren't depend on build environment. long
may be 32-bit integer or 64-bit integer.","{,u}int{8,16,32,64}_t are suitable raw integer types such as int and
unsigned int. Because they aren't depend on build environment. long
may be 32-bit integer or 64-bit integer.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1194,2021-05-25T00:31:37Z,2021-05-25T20:32:15Z,2021-05-25T20:32:18Z,MERGED,True,1,1,1,https://github.com/kou,grn_token_status: use uint32_t instead of unsigned int,1,[],https://github.com/groonga/groonga/pull/1194,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1194#issuecomment-847443922,"{,u}int{8,16,32,64}_t are suitable raw integer types such as int and
unsigned int. Because they aren't depend on build environment. long
may be 32-bit integer or 64-bit integer.",Cc: @HashidaTKS,True,{}
groonga/groonga,https://github.com/groonga/groonga,1195,2021-05-25T02:28:07Z,2021-05-26T23:46:39Z,2021-05-26T23:46:48Z,MERGED,True,281,20,10,https://github.com/kou,TokenFilterStem: add support for searching by the original token conditionally,5,[],https://github.com/groonga/groonga/pull/1195,https://github.com/kou,1,https://github.com/groonga/groonga/pull/1195,"Users can search by the original token (not stemmed token) conditionally with this.
It's useful when users want to search by a stemmed word generally but users sometimes want to search by a exact (not stemmed) word. For example:

Searching by a stemmed word returns many results.
Stemming returns wrong result.
Users want to find only records that have a exact (not stemmed) word.","Users can search by the original token (not stemmed token) conditionally with this.
It's useful when users want to search by a stemmed word generally but users sometimes want to search by a exact (not stemmed) word. For example:

Searching by a stemmed word returns many results.
Stemming returns wrong result.
Users want to find only records that have a exact (not stemmed) word.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1195,2021-05-25T02:28:07Z,2021-05-26T23:46:39Z,2021-05-26T23:46:48Z,MERGED,True,281,20,10,https://github.com/kou,TokenFilterStem: add support for searching by the original token conditionally,5,[],https://github.com/groonga/groonga/pull/1195,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1195#issuecomment-847482967,"Users can search by the original token (not stemmed token) conditionally with this.
It's useful when users want to search by a stemmed word generally but users sometimes want to search by a exact (not stemmed) word. For example:

Searching by a stemmed word returns many results.
Stemming returns wrong result.
Users want to find only records that have a exact (not stemmed) word.",Cc: @HashidaTKS,True,{}
groonga/groonga,https://github.com/groonga/groonga,1197,2021-05-27T08:43:32Z,2021-06-01T02:34:25Z,2021-06-01T02:34:28Z,CLOSED,False,7,7,5,https://github.com/komainu8,ci: use old red-arrow until the packages of Apache Arrow 4.0.1 are provided,1,[],https://github.com/groonga/groonga/pull/1197,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1197,This is testing now.,This is testing now.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1197,2021-05-27T08:43:32Z,2021-06-01T02:34:25Z,2021-06-01T02:34:28Z,CLOSED,False,7,7,5,https://github.com/komainu8,ci: use old red-arrow until the packages of Apache Arrow 4.0.1 are provided,1,[],https://github.com/groonga/groonga/pull/1197,https://github.com/HashidaTKS,2,https://github.com/groonga/groonga/pull/1197#issuecomment-850933724,This is testing now.,"Just asking, are these version specification removed if the packages of Apache Arrow 4.0.1 are provided?",True,{}
groonga/groonga,https://github.com/groonga/groonga,1197,2021-05-27T08:43:32Z,2021-06-01T02:34:25Z,2021-06-01T02:34:28Z,CLOSED,False,7,7,5,https://github.com/komainu8,ci: use old red-arrow until the packages of Apache Arrow 4.0.1 are provided,1,[],https://github.com/groonga/groonga/pull/1197,https://github.com/kou,3,https://github.com/groonga/groonga/pull/1197#issuecomment-851119140,This is testing now.,"Yes.
We'll be able to avoid this by improving Apache Arrow's release process. (Uploading Ruby packages after APT, Yum, MSYS2 and Homebrew packages are updated.)",True,{}
groonga/groonga,https://github.com/groonga/groonga,1197,2021-05-27T08:43:32Z,2021-06-01T02:34:25Z,2021-06-01T02:34:28Z,CLOSED,False,7,7,5,https://github.com/komainu8,ci: use old red-arrow until the packages of Apache Arrow 4.0.1 are provided,1,[],https://github.com/groonga/groonga/pull/1197,https://github.com/kou,4,https://github.com/groonga/groonga/pull/1197#issuecomment-851761808,This is testing now.,Apache Arrow packages are updated. We don't need this.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1198,2021-05-28T06:45:07Z,2021-05-31T02:14:18Z,2021-05-31T02:14:21Z,MERGED,True,21,80,1,https://github.com/kou,hash: use GRN_DEFINE_NAME() instead of grn_hash_name(),1,[],https://github.com/groonga/groonga/pull/1198,https://github.com/kou,1,https://github.com/groonga/groonga/pull/1198,GRN_DEFINE_NAME() is a more generic definition than grn_hash_name().,GRN_DEFINE_NAME() is a more generic definition than grn_hash_name().,True,{}
groonga/groonga,https://github.com/groonga/groonga,1198,2021-05-28T06:45:07Z,2021-05-31T02:14:18Z,2021-05-31T02:14:21Z,MERGED,True,21,80,1,https://github.com/kou,hash: use GRN_DEFINE_NAME() instead of grn_hash_name(),1,[],https://github.com/groonga/groonga/pull/1198,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1198#issuecomment-850185837,GRN_DEFINE_NAME() is a more generic definition than grn_hash_name().,Cc: @HashidaTKS,True,{}
groonga/groonga,https://github.com/groonga/groonga,1199,2021-05-28T06:48:01Z,2021-05-31T02:15:20Z,2021-05-31T02:15:22Z,MERGED,True,1,0,1,https://github.com/kou,packages rpm: require versioned arrow-libs explicitly,1,[],https://github.com/groonga/groonga/pull/1199,https://github.com/kou,1,https://github.com/groonga/groonga/pull/1199,"This avoids the following error:
https://github.com/groonga/groonga/runs/2691119502?check_suite_focus=true
Error: Package: arrow-devel-4.0.0-1.el7.x86_64 (groonga-centos)
 You could try using --skip-broken to work around the problem
           Requires: arrow-libs = 4.0.0-1.el7
           Available: arrow-libs-0.3.1.20170506-1.el7.centos.x86_64 (groonga-centos)
               arrow-libs = 0.3.1.20170506-1.el7.centos
           Available: arrow-libs-0.3.1.20170508-1.el7.centos.x86_64 (groonga-centos)
               arrow-libs = 0.3.1.20170508-1.el7.centos
           Available: arrow-libs-0.3.1.20170510-1.el7.centos.x86_64 (groonga-centos)
               arrow-libs = 0.3.1.20170510-1.el7.centos
           Available: arrow-libs-0.3.1.20170512-1.el7.centos.x86_64 (groonga-centos)
               arrow-libs = 0.3.1.20170512-1.el7.centos
           Available: arrow-libs-0.3.1.20170517-1.el7.centos.x86_64 (groonga-centos)
               arrow-libs = 0.3.1.20170517-1.el7.centos
           Available: arrow-libs-0.4.1.20170524-1.el7.centos.x86_64 (groonga-centos)
               arrow-libs = 0.4.1.20170524-1.el7.centos
           Available: arrow-libs-0.5.0.20170612-1.el7.centos.x86_64 (groonga-centos)
               arrow-libs = 0.5.0.20170612-1.el7.centos
           Available: arrow-libs-0.6.0.20170726-1.el7.centos.x86_64 (groonga-centos)
               arrow-libs = 0.6.0.20170726-1.el7.centos
           Available: arrow-libs-2.0.0-1.el7.x86_64 (groonga-centos)
               arrow-libs = 2.0.0-1.el7
           Available: arrow-libs-3.0.0-1.el7.x86_64 (groonga-centos)
               arrow-libs = 3.0.0-1.el7
           Available: arrow-libs-4.0.0-1.el7.x86_64 (groonga-centos)
               arrow-libs = 4.0.0-1.el7
           Installing: arrow-libs-4.0.1-1.el7.x86_64 (groonga-centos)
               arrow-libs = 4.0.1-1.el7","This avoids the following error:
https://github.com/groonga/groonga/runs/2691119502?check_suite_focus=true
Error: Package: arrow-devel-4.0.0-1.el7.x86_64 (groonga-centos)
 You could try using --skip-broken to work around the problem
           Requires: arrow-libs = 4.0.0-1.el7
           Available: arrow-libs-0.3.1.20170506-1.el7.centos.x86_64 (groonga-centos)
               arrow-libs = 0.3.1.20170506-1.el7.centos
           Available: arrow-libs-0.3.1.20170508-1.el7.centos.x86_64 (groonga-centos)
               arrow-libs = 0.3.1.20170508-1.el7.centos
           Available: arrow-libs-0.3.1.20170510-1.el7.centos.x86_64 (groonga-centos)
               arrow-libs = 0.3.1.20170510-1.el7.centos
           Available: arrow-libs-0.3.1.20170512-1.el7.centos.x86_64 (groonga-centos)
               arrow-libs = 0.3.1.20170512-1.el7.centos
           Available: arrow-libs-0.3.1.20170517-1.el7.centos.x86_64 (groonga-centos)
               arrow-libs = 0.3.1.20170517-1.el7.centos
           Available: arrow-libs-0.4.1.20170524-1.el7.centos.x86_64 (groonga-centos)
               arrow-libs = 0.4.1.20170524-1.el7.centos
           Available: arrow-libs-0.5.0.20170612-1.el7.centos.x86_64 (groonga-centos)
               arrow-libs = 0.5.0.20170612-1.el7.centos
           Available: arrow-libs-0.6.0.20170726-1.el7.centos.x86_64 (groonga-centos)
               arrow-libs = 0.6.0.20170726-1.el7.centos
           Available: arrow-libs-2.0.0-1.el7.x86_64 (groonga-centos)
               arrow-libs = 2.0.0-1.el7
           Available: arrow-libs-3.0.0-1.el7.x86_64 (groonga-centos)
               arrow-libs = 3.0.0-1.el7
           Available: arrow-libs-4.0.0-1.el7.x86_64 (groonga-centos)
               arrow-libs = 4.0.0-1.el7
           Installing: arrow-libs-4.0.1-1.el7.x86_64 (groonga-centos)
               arrow-libs = 4.0.1-1.el7",True,{}
groonga/groonga,https://github.com/groonga/groonga,1199,2021-05-28T06:48:01Z,2021-05-31T02:15:20Z,2021-05-31T02:15:22Z,MERGED,True,1,0,1,https://github.com/kou,packages rpm: require versioned arrow-libs explicitly,1,[],https://github.com/groonga/groonga/pull/1199,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1199#issuecomment-850187468,"This avoids the following error:
https://github.com/groonga/groonga/runs/2691119502?check_suite_focus=true
Error: Package: arrow-devel-4.0.0-1.el7.x86_64 (groonga-centos)
 You could try using --skip-broken to work around the problem
           Requires: arrow-libs = 4.0.0-1.el7
           Available: arrow-libs-0.3.1.20170506-1.el7.centos.x86_64 (groonga-centos)
               arrow-libs = 0.3.1.20170506-1.el7.centos
           Available: arrow-libs-0.3.1.20170508-1.el7.centos.x86_64 (groonga-centos)
               arrow-libs = 0.3.1.20170508-1.el7.centos
           Available: arrow-libs-0.3.1.20170510-1.el7.centos.x86_64 (groonga-centos)
               arrow-libs = 0.3.1.20170510-1.el7.centos
           Available: arrow-libs-0.3.1.20170512-1.el7.centos.x86_64 (groonga-centos)
               arrow-libs = 0.3.1.20170512-1.el7.centos
           Available: arrow-libs-0.3.1.20170517-1.el7.centos.x86_64 (groonga-centos)
               arrow-libs = 0.3.1.20170517-1.el7.centos
           Available: arrow-libs-0.4.1.20170524-1.el7.centos.x86_64 (groonga-centos)
               arrow-libs = 0.4.1.20170524-1.el7.centos
           Available: arrow-libs-0.5.0.20170612-1.el7.centos.x86_64 (groonga-centos)
               arrow-libs = 0.5.0.20170612-1.el7.centos
           Available: arrow-libs-0.6.0.20170726-1.el7.centos.x86_64 (groonga-centos)
               arrow-libs = 0.6.0.20170726-1.el7.centos
           Available: arrow-libs-2.0.0-1.el7.x86_64 (groonga-centos)
               arrow-libs = 2.0.0-1.el7
           Available: arrow-libs-3.0.0-1.el7.x86_64 (groonga-centos)
               arrow-libs = 3.0.0-1.el7
           Available: arrow-libs-4.0.0-1.el7.x86_64 (groonga-centos)
               arrow-libs = 4.0.0-1.el7
           Installing: arrow-libs-4.0.1-1.el7.x86_64 (groonga-centos)
               arrow-libs = 4.0.1-1.el7",Cc: @HashidaTKS,True,{}
groonga/groonga,https://github.com/groonga/groonga,1200,2021-05-28T06:50:30Z,2021-05-31T02:15:39Z,2021-05-31T02:15:42Z,MERGED,True,2,2,1,https://github.com/kou,"grn_table_{have,get}_duplicated_keys: add support for large key",2,[],https://github.com/groonga/groonga/pull/1200,https://github.com/kou,1,https://github.com/groonga/groonga/pull/1200,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1200,2021-05-28T06:50:30Z,2021-05-31T02:15:39Z,2021-05-31T02:15:42Z,MERGED,True,2,2,1,https://github.com/kou,"grn_table_{have,get}_duplicated_keys: add support for large key",2,[],https://github.com/groonga/groonga/pull/1200,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1200#issuecomment-850189090,,Cc: @HashidaTKS,True,{}
groonga/groonga,https://github.com/groonga/groonga,1200,2021-05-28T06:50:30Z,2021-05-31T02:15:39Z,2021-05-31T02:15:42Z,MERGED,True,2,2,1,https://github.com/kou,"grn_table_{have,get}_duplicated_keys: add support for large key",2,[],https://github.com/groonga/groonga/pull/1200,https://github.com/HashidaTKS,3,https://github.com/groonga/groonga/pull/1200#issuecomment-850384882,,"Wouldn't grn_table_get_duplicated_keys need the same modification?
https://github.com/groonga/groonga/blob/table-have-duplicated-keys-support-large-key/lib/table.c#L395",True,{}
groonga/groonga,https://github.com/groonga/groonga,1200,2021-05-28T06:50:30Z,2021-05-31T02:15:39Z,2021-05-31T02:15:42Z,MERGED,True,2,2,1,https://github.com/kou,"grn_table_{have,get}_duplicated_keys: add support for large key",2,[],https://github.com/groonga/groonga/pull/1200,https://github.com/kou,4,https://github.com/groonga/groonga/pull/1200#issuecomment-850644075,,"Good catch!
It's needed.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1201,2021-05-31T06:02:53Z,2021-06-01T04:27:42Z,2021-06-01T04:27:44Z,MERGED,True,14,9,1,https://github.com/kou,grn_table_get_score: improve getting _score performance,1,[],https://github.com/groonga/groonga/pull/1201,https://github.com/kou,1,https://github.com/groonga/groonga/pull/1201,"This reduces needless parent _score check for one level
search (searching from a persistent table not a result set
table). Persistent tables should not have the GRN_OBJ_WITH_SUBREC
flag. Result set tables must have the flag.","This reduces needless parent _score check for one level
search (searching from a persistent table not a result set
table). Persistent tables should not have the GRN_OBJ_WITH_SUBREC
flag. Result set tables must have the flag.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1201,2021-05-31T06:02:53Z,2021-06-01T04:27:42Z,2021-06-01T04:27:44Z,MERGED,True,14,9,1,https://github.com/kou,grn_table_get_score: improve getting _score performance,1,[],https://github.com/groonga/groonga/pull/1201,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1201#issuecomment-851206803,"This reduces needless parent _score check for one level
search (searching from a persistent table not a result set
table). Persistent tables should not have the GRN_OBJ_WITH_SUBREC
flag. Result set tables must have the flag.",Cc: @HashidaTKS,True,{}
groonga/groonga,https://github.com/groonga/groonga,1202,2021-06-01T02:52:00Z,2021-06-01T23:58:23Z,2021-06-01T23:58:28Z,MERGED,True,0,0,8,https://github.com/kou,test: rename increment/decrement to increase/decrease,1,[],https://github.com/groonga/groonga/pull/1202,https://github.com/kou,1,https://github.com/groonga/groonga/pull/1202,"I thought that INC/DEC in GRN_QUERY_ADJ_INC/DEC mean
increment/decrement but I think that they mean increase/decrease now.","I thought that INC/DEC in GRN_QUERY_ADJ_INC/DEC mean
increment/decrement but I think that they mean increase/decrease now.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1202,2021-06-01T02:52:00Z,2021-06-01T23:58:23Z,2021-06-01T23:58:28Z,MERGED,True,0,0,8,https://github.com/kou,test: rename increment/decrement to increase/decrease,1,[],https://github.com/groonga/groonga/pull/1202,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1202#issuecomment-851766948,"I thought that INC/DEC in GRN_QUERY_ADJ_INC/DEC mean
increment/decrement but I think that they mean increase/decrease now.",Cc: @HashidaTKS,True,{}
groonga/groonga,https://github.com/groonga/groonga,1203,2021-06-01T02:54:42Z,2021-06-01T04:28:24Z,2021-06-01T05:09:09Z,MERGED,True,3,3,1,https://github.com/kou,"Add a missing space between ""."" and ""{""",1,[],https://github.com/groonga/groonga/pull/1203,https://github.com/kou,1,https://github.com/groonga/groonga/pull/1203,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1203,2021-06-01T02:54:42Z,2021-06-01T04:28:24Z,2021-06-01T05:09:09Z,MERGED,True,3,3,1,https://github.com/kou,"Add a missing space between ""."" and ""{""",1,[],https://github.com/groonga/groonga/pull/1203,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1203#issuecomment-851767839,,Cc: @HashidaTKS,True,{}
groonga/groonga,https://github.com/groonga/groonga,1203,2021-06-01T02:54:42Z,2021-06-01T04:28:24Z,2021-06-01T05:09:09Z,MERGED,True,3,3,1,https://github.com/kou,"Add a missing space between ""."" and ""{""",1,[],https://github.com/groonga/groonga/pull/1203,https://github.com/HashidaTKS,3,https://github.com/groonga/groonga/pull/1203#issuecomment-851793603,,"I'm not familiar with Lemon Parser Generator, but this fix looks good.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1204,2021-06-01T05:20:58Z,2021-06-04T00:46:11Z,2021-06-04T00:46:50Z,MERGED,True,1760,953,34,https://github.com/kou,"script syntax: enable ""*>"", ""*<"" and ""*~"" logical operators",6,[],https://github.com/groonga/groonga/pull/1204,https://github.com/kou,1,https://github.com/groonga/groonga/pull/1204,"grn_table_selector: add support for weight factor
Weight factor is a factor that is used when logical operator is
processed. The default weight factor is 1.0. It doesn't change weight
of each condition. If weight factor is 2.0, all weights are doubled.
Weight factor is associated with logical
operators (GRN_OP_AND/OR/AND_NOT/ADJUST) but there is no syntax that
uses weight factor. The following commits add it.
New APIs:

grn_selector_data_get_weight_factor()
grn_table_selector_get_weight_factor()
grn_table_selector_set_weight_factor()

"">"", ""<"" and ""*~"" logical operators weren't implemented yet. They
always coursed syntax error.
""*>"": Use GRN_OP_AND with weight factor 2.0
A && B -> 2.0
  A: 1.0
  B: 1.0

A *> B -> 3.0
  A: 1.0
  B: 2.0

""*>${WEIGHT_FACTOR}"": Use GRN_OP_AND with custom weight factor
A *>3.5 B -> 4.5
  A: 1.0
  B: 3.5

""*<"": Use GRN_OP_AND with weight factor 0.5
A && B -> 2.0
  A: 1.0
  B: 1.0

A *< B -> 1.5
  A: 1.0
  B: 0.5

""*<${WEIGHT_FACTOR}"": Use GRN_OP_AND with custom weight factor.
""-${WEIGHT_FACTOR}"" is used as the custom weight factor.
A *<0.5 B -> 0.5
  A: 1.0
  B: -0.5

""*~"": Use GRN_OP_ADJUST with weight factor -1.
GRN_OP_ADJUST doesn't change result set. It just adjusts score of
records in the result set.
A *~ B -> 0
  A: 1.0
  B: -1.0

""*~${WEIGHT_FACTOR}"": Use GRN_OP_ADJUST with custom weight factor.
""-${WEIGHT_FACTOR}"" is used as the custom weight factor.
A *~0.5 B -> 0.5
  A: 1.0
  B: -0.5

query: add support for weight factor","grn_table_selector: add support for weight factor
Weight factor is a factor that is used when logical operator is
processed. The default weight factor is 1.0. It doesn't change weight
of each condition. If weight factor is 2.0, all weights are doubled.
Weight factor is associated with logical
operators (GRN_OP_AND/OR/AND_NOT/ADJUST) but there is no syntax that
uses weight factor. The following commits add it.
New APIs:

grn_selector_data_get_weight_factor()
grn_table_selector_get_weight_factor()
grn_table_selector_set_weight_factor()

"">"", ""<"" and ""*~"" logical operators weren't implemented yet. They
always coursed syntax error.
""*>"": Use GRN_OP_AND with weight factor 2.0
A && B -> 2.0
  A: 1.0
  B: 1.0

A *> B -> 3.0
  A: 1.0
  B: 2.0

""*>${WEIGHT_FACTOR}"": Use GRN_OP_AND with custom weight factor
A *>3.5 B -> 4.5
  A: 1.0
  B: 3.5

""*<"": Use GRN_OP_AND with weight factor 0.5
A && B -> 2.0
  A: 1.0
  B: 1.0

A *< B -> 1.5
  A: 1.0
  B: 0.5

""*<${WEIGHT_FACTOR}"": Use GRN_OP_AND with custom weight factor.
""-${WEIGHT_FACTOR}"" is used as the custom weight factor.
A *<0.5 B -> 0.5
  A: 1.0
  B: -0.5

""*~"": Use GRN_OP_ADJUST with weight factor -1.
GRN_OP_ADJUST doesn't change result set. It just adjusts score of
records in the result set.
A *~ B -> 0
  A: 1.0
  B: -1.0

""*~${WEIGHT_FACTOR}"": Use GRN_OP_ADJUST with custom weight factor.
""-${WEIGHT_FACTOR}"" is used as the custom weight factor.
A *~0.5 B -> 0.5
  A: 1.0
  B: -0.5

query: add support for weight factor",True,{}
groonga/groonga,https://github.com/groonga/groonga,1204,2021-06-01T05:20:58Z,2021-06-04T00:46:11Z,2021-06-04T00:46:50Z,MERGED,True,1760,953,34,https://github.com/kou,"script syntax: enable ""*>"", ""*<"" and ""*~"" logical operators",6,[],https://github.com/groonga/groonga/pull/1204,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1204#issuecomment-851815463,"grn_table_selector: add support for weight factor
Weight factor is a factor that is used when logical operator is
processed. The default weight factor is 1.0. It doesn't change weight
of each condition. If weight factor is 2.0, all weights are doubled.
Weight factor is associated with logical
operators (GRN_OP_AND/OR/AND_NOT/ADJUST) but there is no syntax that
uses weight factor. The following commits add it.
New APIs:

grn_selector_data_get_weight_factor()
grn_table_selector_get_weight_factor()
grn_table_selector_set_weight_factor()

"">"", ""<"" and ""*~"" logical operators weren't implemented yet. They
always coursed syntax error.
""*>"": Use GRN_OP_AND with weight factor 2.0
A && B -> 2.0
  A: 1.0
  B: 1.0

A *> B -> 3.0
  A: 1.0
  B: 2.0

""*>${WEIGHT_FACTOR}"": Use GRN_OP_AND with custom weight factor
A *>3.5 B -> 4.5
  A: 1.0
  B: 3.5

""*<"": Use GRN_OP_AND with weight factor 0.5
A && B -> 2.0
  A: 1.0
  B: 1.0

A *< B -> 1.5
  A: 1.0
  B: 0.5

""*<${WEIGHT_FACTOR}"": Use GRN_OP_AND with custom weight factor.
""-${WEIGHT_FACTOR}"" is used as the custom weight factor.
A *<0.5 B -> 0.5
  A: 1.0
  B: -0.5

""*~"": Use GRN_OP_ADJUST with weight factor -1.
GRN_OP_ADJUST doesn't change result set. It just adjusts score of
records in the result set.
A *~ B -> 0
  A: 1.0
  B: -1.0

""*~${WEIGHT_FACTOR}"": Use GRN_OP_ADJUST with custom weight factor.
""-${WEIGHT_FACTOR}"" is used as the custom weight factor.
A *~0.5 B -> 0.5
  A: 1.0
  B: -0.5

query: add support for weight factor",Cc: @HashidaTKS,True,{}
groonga/groonga,https://github.com/groonga/groonga,1204,2021-06-01T05:20:58Z,2021-06-04T00:46:11Z,2021-06-04T00:46:50Z,MERGED,True,1760,953,34,https://github.com/kou,"script syntax: enable ""*>"", ""*<"" and ""*~"" logical operators",6,[],https://github.com/groonga/groonga/pull/1204,https://github.com/HashidaTKS,3,https://github.com/groonga/groonga/pull/1204#issuecomment-853118095,"grn_table_selector: add support for weight factor
Weight factor is a factor that is used when logical operator is
processed. The default weight factor is 1.0. It doesn't change weight
of each condition. If weight factor is 2.0, all weights are doubled.
Weight factor is associated with logical
operators (GRN_OP_AND/OR/AND_NOT/ADJUST) but there is no syntax that
uses weight factor. The following commits add it.
New APIs:

grn_selector_data_get_weight_factor()
grn_table_selector_get_weight_factor()
grn_table_selector_set_weight_factor()

"">"", ""<"" and ""*~"" logical operators weren't implemented yet. They
always coursed syntax error.
""*>"": Use GRN_OP_AND with weight factor 2.0
A && B -> 2.0
  A: 1.0
  B: 1.0

A *> B -> 3.0
  A: 1.0
  B: 2.0

""*>${WEIGHT_FACTOR}"": Use GRN_OP_AND with custom weight factor
A *>3.5 B -> 4.5
  A: 1.0
  B: 3.5

""*<"": Use GRN_OP_AND with weight factor 0.5
A && B -> 2.0
  A: 1.0
  B: 1.0

A *< B -> 1.5
  A: 1.0
  B: 0.5

""*<${WEIGHT_FACTOR}"": Use GRN_OP_AND with custom weight factor.
""-${WEIGHT_FACTOR}"" is used as the custom weight factor.
A *<0.5 B -> 0.5
  A: 1.0
  B: -0.5

""*~"": Use GRN_OP_ADJUST with weight factor -1.
GRN_OP_ADJUST doesn't change result set. It just adjusts score of
records in the result set.
A *~ B -> 0
  A: 1.0
  B: -1.0

""*~${WEIGHT_FACTOR}"": Use GRN_OP_ADJUST with custom weight factor.
""-${WEIGHT_FACTOR}"" is used as the custom weight factor.
A *~0.5 B -> 0.5
  A: 1.0
  B: -0.5

query: add support for weight factor","A *< B -> 1.5
 A: 1.0
 B: 1.5


Sorry to ask about such minor details, I guess B is not 1.5 but 0.5.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1204,2021-06-01T05:20:58Z,2021-06-04T00:46:11Z,2021-06-04T00:46:50Z,MERGED,True,1760,953,34,https://github.com/kou,"script syntax: enable ""*>"", ""*<"" and ""*~"" logical operators",6,[],https://github.com/groonga/groonga/pull/1204,https://github.com/kou,4,https://github.com/groonga/groonga/pull/1204#issuecomment-853521185,"grn_table_selector: add support for weight factor
Weight factor is a factor that is used when logical operator is
processed. The default weight factor is 1.0. It doesn't change weight
of each condition. If weight factor is 2.0, all weights are doubled.
Weight factor is associated with logical
operators (GRN_OP_AND/OR/AND_NOT/ADJUST) but there is no syntax that
uses weight factor. The following commits add it.
New APIs:

grn_selector_data_get_weight_factor()
grn_table_selector_get_weight_factor()
grn_table_selector_set_weight_factor()

"">"", ""<"" and ""*~"" logical operators weren't implemented yet. They
always coursed syntax error.
""*>"": Use GRN_OP_AND with weight factor 2.0
A && B -> 2.0
  A: 1.0
  B: 1.0

A *> B -> 3.0
  A: 1.0
  B: 2.0

""*>${WEIGHT_FACTOR}"": Use GRN_OP_AND with custom weight factor
A *>3.5 B -> 4.5
  A: 1.0
  B: 3.5

""*<"": Use GRN_OP_AND with weight factor 0.5
A && B -> 2.0
  A: 1.0
  B: 1.0

A *< B -> 1.5
  A: 1.0
  B: 0.5

""*<${WEIGHT_FACTOR}"": Use GRN_OP_AND with custom weight factor.
""-${WEIGHT_FACTOR}"" is used as the custom weight factor.
A *<0.5 B -> 0.5
  A: 1.0
  B: -0.5

""*~"": Use GRN_OP_ADJUST with weight factor -1.
GRN_OP_ADJUST doesn't change result set. It just adjusts score of
records in the result set.
A *~ B -> 0
  A: 1.0
  B: -1.0

""*~${WEIGHT_FACTOR}"": Use GRN_OP_ADJUST with custom weight factor.
""-${WEIGHT_FACTOR}"" is used as the custom weight factor.
A *~0.5 B -> 0.5
  A: 1.0
  B: -0.5

query: add support for weight factor",Good catch!,True,{}
groonga/groonga,https://github.com/groonga/groonga,1205,2021-06-01T13:46:58Z,2021-06-01T23:57:16Z,2021-06-02T01:30:32Z,MERGED,True,2,0,2,https://github.com/naoa,Initialize grn_search_optarg::query_options,1,[],https://github.com/groonga/groonga/pull/1205,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/1205,"The newly added grn_search_optarg::query_options pointer may not be initialized with NULL and may try to parse to invalid addresses.

  
    
      groonga/plugins/token_filters/stop_word.c
    
    
        Lines 160 to 162
      in
      d883cd8
    
  
  
    

        
          
           grn_obj *query_options = grn_tokenizer_query_get_options(ctx, query); 
        

        
          
           if (query_options) { 
        

        
          
             grn_proc_prefixed_options_parse(ctx,","The newly added grn_search_optarg::query_options pointer may not be initialized with NULL and may try to parse to invalid addresses.

  
    
      groonga/plugins/token_filters/stop_word.c
    
    
        Lines 160 to 162
      in
      d883cd8
    
  
  
    

        
          
           grn_obj *query_options = grn_tokenizer_query_get_options(ctx, query); 
        

        
          
           if (query_options) { 
        

        
          
             grn_proc_prefixed_options_parse(ctx,",True,{}
groonga/groonga,https://github.com/groonga/groonga,1205,2021-06-01T13:46:58Z,2021-06-01T23:57:16Z,2021-06-02T01:30:32Z,MERGED,True,2,0,2,https://github.com/naoa,Initialize grn_search_optarg::query_options,1,[],https://github.com/groonga/groonga/pull/1205,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1205#issuecomment-852572177,"The newly added grn_search_optarg::query_options pointer may not be initialized with NULL and may try to parse to invalid addresses.

  
    
      groonga/plugins/token_filters/stop_word.c
    
    
        Lines 160 to 162
      in
      d883cd8
    
  
  
    

        
          
           grn_obj *query_options = grn_tokenizer_query_get_options(ctx, query); 
        

        
          
           if (query_options) { 
        

        
          
             grn_proc_prefixed_options_parse(ctx,","Thanks.
I merge this but I don't thin this is needed because we initialize these variables by memset().",True,{}
groonga/groonga,https://github.com/groonga/groonga,1205,2021-06-01T13:46:58Z,2021-06-01T23:57:16Z,2021-06-02T01:30:32Z,MERGED,True,2,0,2,https://github.com/naoa,Initialize grn_search_optarg::query_options,1,[],https://github.com/groonga/groonga/pull/1205,https://github.com/kou,3,https://github.com/groonga/groonga/pull/1205#issuecomment-852573726,"The newly added grn_search_optarg::query_options pointer may not be initialized with NULL and may try to parse to invalid addresses.

  
    
      groonga/plugins/token_filters/stop_word.c
    
    
        Lines 160 to 162
      in
      d883cd8
    
  
  
    

        
          
           grn_obj *query_options = grn_tokenizer_query_get_options(ctx, query); 
        

        
          
           if (query_options) { 
        

        
          
             grn_proc_prefixed_options_parse(ctx,",I think that 26da550 fixes this.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1205,2021-06-01T13:46:58Z,2021-06-01T23:57:16Z,2021-06-02T01:30:32Z,MERGED,True,2,0,2,https://github.com/naoa,Initialize grn_search_optarg::query_options,1,[],https://github.com/groonga/groonga/pull/1205,https://github.com/naoa,4,https://github.com/groonga/groonga/pull/1205#issuecomment-852641008,"The newly added grn_search_optarg::query_options pointer may not be initialized with NULL and may try to parse to invalid addresses.

  
    
      groonga/plugins/token_filters/stop_word.c
    
    
        Lines 160 to 162
      in
      d883cd8
    
  
  
    

        
          
           grn_obj *query_options = grn_tokenizer_query_get_options(ctx, query); 
        

        
          
           if (query_options) { 
        

        
          
             grn_proc_prefixed_options_parse(ctx,","Thanks!
I couldn't prepare a case that can be easily reproduced only with Groonga, but there was a case where grn_tokenizer_query_get_options did not become NULL when 6 token filters were set.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1206,2021-06-01T23:15:37Z,2021-06-01T23:50:32Z,2021-06-01T23:50:35Z,MERGED,True,1,1,1,https://github.com/HashidaTKS,Fix a typo in news,1,[],https://github.com/groonga/groonga/pull/1206,https://github.com/HashidaTKS,1,https://github.com/groonga/groonga/pull/1206,I found a typo in news.po.,I found a typo in news.po.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1206,2021-06-01T23:15:37Z,2021-06-01T23:50:32Z,2021-06-01T23:50:35Z,MERGED,True,1,1,1,https://github.com/HashidaTKS,Fix a typo in news,1,[],https://github.com/groonga/groonga/pull/1206,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1206#issuecomment-852567779,I found a typo in news.po.,Good catch!,True,{}
groonga/groonga,https://github.com/groonga/groonga,1207,2021-06-02T01:37:49Z,2021-06-04T00:19:52Z,2021-06-04T00:19:54Z,MERGED,True,185,174,1,https://github.com/kou,"log-path, query-log-path: add support for outputting to stdout/stderr",1,[],https://github.com/groonga/groonga/pull/1207,https://github.com/kou,1,https://github.com/groonga/groonga/pull/1207,"We can specify ""-"" as --log-path/--query-log-path to output stdout and
""+"" to output stderr.
This will be useful to run Groonga in Docker.","We can specify ""-"" as --log-path/--query-log-path to output stdout and
""+"" to output stderr.
This will be useful to run Groonga in Docker.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1207,2021-06-02T01:37:49Z,2021-06-04T00:19:52Z,2021-06-04T00:19:54Z,MERGED,True,185,174,1,https://github.com/kou,"log-path, query-log-path: add support for outputting to stdout/stderr",1,[],https://github.com/groonga/groonga/pull/1207,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1207#issuecomment-852644073,"We can specify ""-"" as --log-path/--query-log-path to output stdout and
""+"" to output stderr.
This will be useful to run Groonga in Docker.",Cc: @HashidaTKS,True,{}
groonga/groonga,https://github.com/groonga/groonga,1208,2021-06-02T17:49:28Z,2021-06-03T02:54:03Z,2021-06-03T02:54:09Z,MERGED,True,2,2,1,https://github.com/HashidaTKS,Fix typos in string_slice.rst,1,[],https://github.com/groonga/groonga/pull/1208,https://github.com/HashidaTKS,1,https://github.com/groonga/groonga/pull/1208,Fix typos in string_slice.rst,Fix typos in string_slice.rst,True,{}
groonga/groonga,https://github.com/groonga/groonga,1208,2021-06-02T17:49:28Z,2021-06-03T02:54:03Z,2021-06-03T02:54:09Z,MERGED,True,2,2,1,https://github.com/HashidaTKS,Fix typos in string_slice.rst,1,[],https://github.com/groonga/groonga/pull/1208,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1208#issuecomment-853522243,Fix typos in string_slice.rst,Good catch!,True,{}
groonga/groonga,https://github.com/groonga/groonga,1209,2021-06-02T17:50:55Z,2021-06-08T00:13:26Z,2021-06-08T00:13:31Z,MERGED,True,255,3,8,https://github.com/HashidaTKS,Make a document for string_substring,2,[],https://github.com/groonga/groonga/pull/1209,https://github.com/HashidaTKS,1,https://github.com/groonga/groonga/pull/1209,#1183,#1183,True,{}
groonga/groonga,https://github.com/groonga/groonga,1209,2021-06-02T17:50:55Z,2021-06-08T00:13:26Z,2021-06-08T00:13:31Z,MERGED,True,255,3,8,https://github.com/HashidaTKS,Make a document for string_substring,2,[],https://github.com/groonga/groonga/pull/1209,https://github.com/HashidaTKS,2,https://github.com/groonga/groonga/pull/1209#issuecomment-856087684,#1183,"@komainu8
Thank you for the review! I have applied the feedback.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1209,2021-06-02T17:50:55Z,2021-06-08T00:13:26Z,2021-06-08T00:13:31Z,MERGED,True,255,3,8,https://github.com/HashidaTKS,Make a document for string_substring,2,[],https://github.com/groonga/groonga/pull/1209,https://github.com/komainu8,3,https://github.com/groonga/groonga/pull/1209#issuecomment-856340802,#1183,@kou Could you review this PR?,True,{}
groonga/groonga,https://github.com/groonga/groonga,1209,2021-06-02T17:50:55Z,2021-06-08T00:13:26Z,2021-06-08T00:13:31Z,MERGED,True,255,3,8,https://github.com/HashidaTKS,Make a document for string_substring,2,[],https://github.com/groonga/groonga/pull/1209,https://github.com/kou,4,https://github.com/groonga/groonga/pull/1209#issuecomment-856344519,#1183,Thanks!,True,{}
groonga/groonga,https://github.com/groonga/groonga,1210,2021-06-04T00:38:31Z,2021-06-04T05:24:16Z,2021-06-04T05:26:52Z,MERGED,True,0,1,1,https://github.com/komainu8,ci macos: remove a needless unlink,1,[],https://github.com/groonga/groonga/pull/1210,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1210,"Because GCC version 8 has been removed from images on May, 31.
See:
https://github.com/actions/virtual-environments/blob/macOS-10.15/20210531.1/images/macos/macos-10.15-Readme.md
actions/virtual-environments#3378","Because GCC version 8 has been removed from images on May, 31.
See:
https://github.com/actions/virtual-environments/blob/macOS-10.15/20210531.1/images/macos/macos-10.15-Readme.md
actions/virtual-environments#3378",True,{}
groonga/groonga,https://github.com/groonga/groonga,1211,2021-06-16T01:17:11Z,2021-06-26T07:10:39Z,2021-06-26T07:10:40Z,MERGED,True,843,218,2,https://github.com/komainu8,doc news: add news topics for 11.0.4,1,[],https://github.com/groonga/groonga/pull/1211,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1211,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1212,2021-06-16T02:54:04Z,2021-10-11T04:35:27Z,2021-10-11T04:35:27Z,CLOSED,False,19,7,1,https://github.com/komainu8,ci mingw: adjust to mingw-w64-groonga's PKGBUILD,4,[],https://github.com/groonga/groonga/pull/1212,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1212,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1212,2021-06-16T02:54:04Z,2021-10-11T04:35:27Z,2021-10-11T04:35:27Z,CLOSED,False,19,7,1,https://github.com/komainu8,ci mingw: adjust to mingw-w64-groonga's PKGBUILD,4,[],https://github.com/groonga/groonga/pull/1212,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1212#issuecomment-939674768,,Done.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1213,2021-06-17T07:31:19Z,2021-06-21T05:50:40Z,2021-06-21T05:50:40Z,MERGED,True,778,78,56,https://github.com/kou,object_warm: add a command to ship DB to OS's page cache,2,[],https://github.com/groonga/groonga/pull/1213,https://github.com/kou,1,https://github.com/groonga/groonga/pull/1213,Users can use this command to warm Groonga on startup.,Users can use this command to warm Groonga on startup.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1213,2021-06-17T07:31:19Z,2021-06-21T05:50:40Z,2021-06-21T05:50:40Z,MERGED,True,778,78,56,https://github.com/kou,object_warm: add a command to ship DB to OS's page cache,2,[],https://github.com/groonga/groonga/pull/1213,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1213#issuecomment-863003077,Users can use this command to warm Groonga on startup.,Cc: @HashidaTKS,True,{}
groonga/groonga,https://github.com/groonga/groonga,1214,2021-06-18T09:13:20Z,2021-06-23T02:36:32Z,2021-06-23T23:28:03Z,MERGED,True,1020,1,37,https://github.com/kou,NormalizerTable: add,4,[],https://github.com/groonga/groonga/pull/1214,https://github.com/kou,1,https://github.com/groonga/groonga/pull/1214,"See the added tests for how to use.
It uses Groonga table to normalize text. Users can implement custom
normalization by managing a Groonga table.
Note that users need to rebuild the index that uses NormalizerTable
when they change substitution table for the NormalizerTable. Because
normalization rules are changed by change of the substitution table.","See the added tests for how to use.
It uses Groonga table to normalize text. Users can implement custom
normalization by managing a Groonga table.
Note that users need to rebuild the index that uses NormalizerTable
when they change substitution table for the NormalizerTable. Because
normalization rules are changed by change of the substitution table.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1214,2021-06-18T09:13:20Z,2021-06-23T02:36:32Z,2021-06-23T23:28:03Z,MERGED,True,1020,1,37,https://github.com/kou,NormalizerTable: add,4,[],https://github.com/groonga/groonga/pull/1214,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1214#issuecomment-863889423,"See the added tests for how to use.
It uses Groonga table to normalize text. Users can implement custom
normalization by managing a Groonga table.
Note that users need to rebuild the index that uses NormalizerTable
when they change substitution table for the NormalizerTable. Because
normalization rules are changed by change of the substitution table.",Cc: @HashidaTKS,True,{}
groonga/groonga,https://github.com/groonga/groonga,1215,2021-06-21T08:29:38Z,2021-06-22T01:11:17Z,2021-06-22T01:11:17Z,MERGED,True,5,3,1,https://github.com/kou,grn_obj_get_info: show type name in error message,1,[],https://github.com/groonga/groonga/pull/1215,https://github.com/kou,1,https://github.com/groonga/groonga/pull/1215,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1215,2021-06-21T08:29:38Z,2021-06-22T01:11:17Z,2021-06-22T01:11:17Z,MERGED,True,5,3,1,https://github.com/kou,grn_obj_get_info: show type name in error message,1,[],https://github.com/groonga/groonga/pull/1215,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1215#issuecomment-864839763,,Cc: @HashidaTKS,True,{}
groonga/groonga,https://github.com/groonga/groonga,1216,2021-06-21T08:38:09Z,2021-06-22T01:11:02Z,2021-06-22T01:11:02Z,MERGED,True,32,10,1,https://github.com/kou,grn_obj_get_info: use tag style for log message,1,[],https://github.com/groonga/groonga/pull/1216,https://github.com/kou,1,https://github.com/groonga/groonga/pull/1216,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1216,2021-06-21T08:38:09Z,2021-06-22T01:11:02Z,2021-06-22T01:11:02Z,MERGED,True,32,10,1,https://github.com/kou,grn_obj_get_info: use tag style for log message,1,[],https://github.com/groonga/groonga/pull/1216,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1216#issuecomment-864846134,,Cc: @HashidaTKS,True,{}
groonga/groonga,https://github.com/groonga/groonga,1220,2021-06-28T03:32:28Z,2021-06-30T04:58:49Z,2021-06-30T04:58:49Z,MERGED,True,2389,509,76,https://github.com/kou,Add support for multiple normalizers,4,[],https://github.com/groonga/groonga/pull/1220,https://github.com/kou,1,https://github.com/groonga/groonga/pull/1220,"GitHub: fix GH-955
This should be backward compatible. It means that newer Groonga can
use DB created by old Groonga but old Groonga can't use DB created by
new Groonga properly.
Old:

Normalizer ID is stored in table's header.

New:

Normalizer IDs are stored in specs. (${DB}.0000000)

normalize command and table_create command accepts ""--normalizers""
option. ""--normalizer"" option is also accepted for backward
compatibility. Users can specify multiple normalizers by
""--normalizer"".
dump command, table_list command and schema command supports multiple
normalizers. dump command and schema command still use ""--normalizer""
option not ""--normalizers"" option to support restoring dump created by
new Groonga with old Groonga.
New APIs:

grn_info_type::GRN_INFO_NORMALIZERS
grn_string_get_normalizer_index()
grn_table_set_normalizers_options()
grn_table_get_normalizers_options()
grn_table_cache_normalizers_options()
grn_table_get_normalizers_string()
grn_table_set_token_filters_options()
This deprecates grn_table_set_token_filter_options().
grn_table_get_token_filter_options()
This deprecates grn_table_get_token_filter_options().
grn_table_get_token_filters_options()
This deprecates grn_table_get_token_filter_options().
grn_table_cache_token_filters_options()
This deprecates grn_table_cache_token_filter_options().","GitHub: fix GH-955
This should be backward compatible. It means that newer Groonga can
use DB created by old Groonga but old Groonga can't use DB created by
new Groonga properly.
Old:

Normalizer ID is stored in table's header.

New:

Normalizer IDs are stored in specs. (${DB}.0000000)

normalize command and table_create command accepts ""--normalizers""
option. ""--normalizer"" option is also accepted for backward
compatibility. Users can specify multiple normalizers by
""--normalizer"".
dump command, table_list command and schema command supports multiple
normalizers. dump command and schema command still use ""--normalizer""
option not ""--normalizers"" option to support restoring dump created by
new Groonga with old Groonga.
New APIs:

grn_info_type::GRN_INFO_NORMALIZERS
grn_string_get_normalizer_index()
grn_table_set_normalizers_options()
grn_table_get_normalizers_options()
grn_table_cache_normalizers_options()
grn_table_get_normalizers_string()
grn_table_set_token_filters_options()
This deprecates grn_table_set_token_filter_options().
grn_table_get_token_filter_options()
This deprecates grn_table_get_token_filter_options().
grn_table_get_token_filters_options()
This deprecates grn_table_get_token_filter_options().
grn_table_cache_token_filters_options()
This deprecates grn_table_cache_token_filter_options().",True,{}
groonga/groonga,https://github.com/groonga/groonga,1220,2021-06-28T03:32:28Z,2021-06-30T04:58:49Z,2021-06-30T04:58:49Z,MERGED,True,2389,509,76,https://github.com/kou,Add support for multiple normalizers,4,[],https://github.com/groonga/groonga/pull/1220,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1220#issuecomment-869324219,"GitHub: fix GH-955
This should be backward compatible. It means that newer Groonga can
use DB created by old Groonga but old Groonga can't use DB created by
new Groonga properly.
Old:

Normalizer ID is stored in table's header.

New:

Normalizer IDs are stored in specs. (${DB}.0000000)

normalize command and table_create command accepts ""--normalizers""
option. ""--normalizer"" option is also accepted for backward
compatibility. Users can specify multiple normalizers by
""--normalizer"".
dump command, table_list command and schema command supports multiple
normalizers. dump command and schema command still use ""--normalizer""
option not ""--normalizers"" option to support restoring dump created by
new Groonga with old Groonga.
New APIs:

grn_info_type::GRN_INFO_NORMALIZERS
grn_string_get_normalizer_index()
grn_table_set_normalizers_options()
grn_table_get_normalizers_options()
grn_table_cache_normalizers_options()
grn_table_get_normalizers_string()
grn_table_set_token_filters_options()
This deprecates grn_table_set_token_filter_options().
grn_table_get_token_filter_options()
This deprecates grn_table_get_token_filter_options().
grn_table_get_token_filters_options()
This deprecates grn_table_get_token_filter_options().
grn_table_cache_token_filters_options()
This deprecates grn_table_cache_token_filter_options().",Cc: @HashidaTKS,True,{}
groonga/groonga,https://github.com/groonga/groonga,1220,2021-06-28T03:32:28Z,2021-06-30T04:58:49Z,2021-06-30T04:58:49Z,MERGED,True,2389,509,76,https://github.com/kou,Add support for multiple normalizers,4,[],https://github.com/groonga/groonga/pull/1220,https://github.com/HashidaTKS,3,https://github.com/groonga/groonga/pull/1220#issuecomment-871076397,"GitHub: fix GH-955
This should be backward compatible. It means that newer Groonga can
use DB created by old Groonga but old Groonga can't use DB created by
new Groonga properly.
Old:

Normalizer ID is stored in table's header.

New:

Normalizer IDs are stored in specs. (${DB}.0000000)

normalize command and table_create command accepts ""--normalizers""
option. ""--normalizer"" option is also accepted for backward
compatibility. Users can specify multiple normalizers by
""--normalizer"".
dump command, table_list command and schema command supports multiple
normalizers. dump command and schema command still use ""--normalizer""
option not ""--normalizers"" option to support restoring dump created by
new Groonga with old Groonga.
New APIs:

grn_info_type::GRN_INFO_NORMALIZERS
grn_string_get_normalizer_index()
grn_table_set_normalizers_options()
grn_table_get_normalizers_options()
grn_table_cache_normalizers_options()
grn_table_get_normalizers_string()
grn_table_set_token_filters_options()
This deprecates grn_table_set_token_filter_options().
grn_table_get_token_filter_options()
This deprecates grn_table_get_token_filter_options().
grn_table_get_token_filters_options()
This deprecates grn_table_get_token_filter_options().
grn_table_cache_token_filters_options()
This deprecates grn_table_cache_token_filter_options().",LGTM,True,{}
groonga/groonga,https://github.com/groonga/groonga,1221,2021-06-29T05:59:35Z,2021-07-02T05:18:04Z,2021-07-02T06:48:41Z,MERGED,True,319,96,5,https://github.com/kou,query_parallel_or: fix a wrong result bug,2,[],https://github.com/groonga/groonga/pull/1221,https://github.com/kou,1,https://github.com/groonga/groonga/pull/1221,"We can't reuse a result set for grn_table_selector_select(). It
doesn't work when a query has multiple conditions.
If we reuse a result set, we need to truncate the result set. But
""truncate"" is slower than ""delete all"". (""Truncate"" may be faster with
a large result set.)","We can't reuse a result set for grn_table_selector_select(). It
doesn't work when a query has multiple conditions.
If we reuse a result set, we need to truncate the result set. But
""truncate"" is slower than ""delete all"". (""Truncate"" may be faster with
a large result set.)",True,{}
groonga/groonga,https://github.com/groonga/groonga,1221,2021-06-29T05:59:35Z,2021-07-02T05:18:04Z,2021-07-02T06:48:41Z,MERGED,True,319,96,5,https://github.com/kou,query_parallel_or: fix a wrong result bug,2,[],https://github.com/groonga/groonga/pull/1221,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1221#issuecomment-870261133,"We can't reuse a result set for grn_table_selector_select(). It
doesn't work when a query has multiple conditions.
If we reuse a result set, we need to truncate the result set. But
""truncate"" is slower than ""delete all"". (""Truncate"" may be faster with
a large result set.)",Cc: @HashidaTKS,True,{}
groonga/groonga,https://github.com/groonga/groonga,1222,2021-06-29T09:35:50Z,2021-07-05T01:18:59Z,2021-07-05T01:19:00Z,MERGED,True,342,40,11,https://github.com/kou,query query_parallel_or: add support for customizing thresholds for seqscan,3,[],https://github.com/groonga/groonga/pull/1222,https://github.com/kou,1,https://github.com/groonga/groonga/pull/1222,"Changes:
GRN_PROC_OPTION_VALUE_DOUBLE: add
grn_table_selector: add support for customizing thresholds for seqscan
New APIs:

grn_table_selector_get_enough_filtered_ratio()
grn_table_selector_set_enough_filtered_ratio()
grn_table_selector_get_max_n_enough_filtered_records()
grn_table_selector_set_max_n_enough_filtered_records()

query, query_parallel_or: add support for customizing thresholds for seqscan
New options:

enough_filtered_ratio
max_n_enough_filtered_records","Changes:
GRN_PROC_OPTION_VALUE_DOUBLE: add
grn_table_selector: add support for customizing thresholds for seqscan
New APIs:

grn_table_selector_get_enough_filtered_ratio()
grn_table_selector_set_enough_filtered_ratio()
grn_table_selector_get_max_n_enough_filtered_records()
grn_table_selector_set_max_n_enough_filtered_records()

query, query_parallel_or: add support for customizing thresholds for seqscan
New options:

enough_filtered_ratio
max_n_enough_filtered_records",True,{}
groonga/groonga,https://github.com/groonga/groonga,1222,2021-06-29T09:35:50Z,2021-07-05T01:18:59Z,2021-07-05T01:19:00Z,MERGED,True,342,40,11,https://github.com/kou,query query_parallel_or: add support for customizing thresholds for seqscan,3,[],https://github.com/groonga/groonga/pull/1222,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1222#issuecomment-870439676,"Changes:
GRN_PROC_OPTION_VALUE_DOUBLE: add
grn_table_selector: add support for customizing thresholds for seqscan
New APIs:

grn_table_selector_get_enough_filtered_ratio()
grn_table_selector_set_enough_filtered_ratio()
grn_table_selector_get_max_n_enough_filtered_records()
grn_table_selector_set_max_n_enough_filtered_records()

query, query_parallel_or: add support for customizing thresholds for seqscan
New options:

enough_filtered_ratio
max_n_enough_filtered_records",Cc: @HashidaTKS,True,{}
groonga/groonga,https://github.com/groonga/groonga,1223,2021-07-02T08:32:00Z,2021-07-02T21:46:41Z,2021-07-02T21:46:42Z,MERGED,True,34,27,7,https://github.com/kou,grn_inspect: show options of default tokenizer and normalizer,1,[],https://github.com/groonga/groonga/pull/1223,https://github.com/kou,1,https://github.com/groonga/groonga/pull/1223,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1223,2021-07-02T08:32:00Z,2021-07-02T21:46:41Z,2021-07-02T21:46:42Z,MERGED,True,34,27,7,https://github.com/kou,grn_inspect: show options of default tokenizer and normalizer,1,[],https://github.com/groonga/groonga/pull/1223,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1223#issuecomment-872822047,,Cc: @HashidaTKS,True,{}
groonga/groonga,https://github.com/groonga/groonga,1225,2021-07-05T07:58:05Z,2021-07-06T01:54:28Z,2021-07-06T21:23:05Z,MERGED,True,663,160,28,https://github.com/kou,NormalizerTable: add support for indexed target,3,[],https://github.com/groonga/groonga/pull/1225,https://github.com/kou,1,https://github.com/groonga/groonga/pull/1225,"Without this change, the following table is only supported:
table_create Normalizations TABLE_PAT_KEY ShortText
column_create Normalizations normalized COLUMN_SCALAR ShortText

With this change, the following table with an index is also supported:
table_create Normalizations TABLE_NO_KEY
column_create Normalizations target COLUMN_SCALAR ShortText
column_create Normalizations normalized COLUMN_SCALAR ShortText

table_create Terms TABLE_PAT_KEY ShortText
column_create Terms normalizations_target COLUMN_INDEX \
  Normalizations target

The former can be used with:
NormalizerTable(""normalized"", Normalizations.normalized"")

The latter can be used with:
NormalizerTable(""normalized"", ""Normalizations.normalized"",
                ""target"", ""Normalizations.target"")

Note that ""column"" option is deprecated. Use ""normalized"" option
instead.","Without this change, the following table is only supported:
table_create Normalizations TABLE_PAT_KEY ShortText
column_create Normalizations normalized COLUMN_SCALAR ShortText

With this change, the following table with an index is also supported:
table_create Normalizations TABLE_NO_KEY
column_create Normalizations target COLUMN_SCALAR ShortText
column_create Normalizations normalized COLUMN_SCALAR ShortText

table_create Terms TABLE_PAT_KEY ShortText
column_create Terms normalizations_target COLUMN_INDEX \
  Normalizations target

The former can be used with:
NormalizerTable(""normalized"", Normalizations.normalized"")

The latter can be used with:
NormalizerTable(""normalized"", ""Normalizations.normalized"",
                ""target"", ""Normalizations.target"")

Note that ""column"" option is deprecated. Use ""normalized"" option
instead.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1225,2021-07-05T07:58:05Z,2021-07-06T01:54:28Z,2021-07-06T21:23:05Z,MERGED,True,663,160,28,https://github.com/kou,NormalizerTable: add support for indexed target,3,[],https://github.com/groonga/groonga/pull/1225,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1225#issuecomment-873891696,"Without this change, the following table is only supported:
table_create Normalizations TABLE_PAT_KEY ShortText
column_create Normalizations normalized COLUMN_SCALAR ShortText

With this change, the following table with an index is also supported:
table_create Normalizations TABLE_NO_KEY
column_create Normalizations target COLUMN_SCALAR ShortText
column_create Normalizations normalized COLUMN_SCALAR ShortText

table_create Terms TABLE_PAT_KEY ShortText
column_create Terms normalizations_target COLUMN_INDEX \
  Normalizations target

The former can be used with:
NormalizerTable(""normalized"", Normalizations.normalized"")

The latter can be used with:
NormalizerTable(""normalized"", ""Normalizations.normalized"",
                ""target"", ""Normalizations.target"")

Note that ""column"" option is deprecated. Use ""normalized"" option
instead.",Cc: @HashidaTKS,True,{}
groonga/groonga,https://github.com/groonga/groonga,1225,2021-07-05T07:58:05Z,2021-07-06T01:54:28Z,2021-07-06T21:23:05Z,MERGED,True,663,160,28,https://github.com/kou,NormalizerTable: add support for indexed target,3,[],https://github.com/groonga/groonga/pull/1225,https://github.com/kou,3,https://github.com/groonga/groonga/pull/1225#issuecomment-874403981,"Without this change, the following table is only supported:
table_create Normalizations TABLE_PAT_KEY ShortText
column_create Normalizations normalized COLUMN_SCALAR ShortText

With this change, the following table with an index is also supported:
table_create Normalizations TABLE_NO_KEY
column_create Normalizations target COLUMN_SCALAR ShortText
column_create Normalizations normalized COLUMN_SCALAR ShortText

table_create Terms TABLE_PAT_KEY ShortText
column_create Terms normalizations_target COLUMN_INDEX \
  Normalizations target

The former can be used with:
NormalizerTable(""normalized"", Normalizations.normalized"")

The latter can be used with:
NormalizerTable(""normalized"", ""Normalizations.normalized"",
                ""target"", ""Normalizations.target"")

Note that ""column"" option is deprecated. Use ""normalized"" option
instead.","I merge this because I want to use this with PGroonga soon.
But you can still comment on this.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1226,2021-07-06T02:42:56Z,2021-07-07T01:27:56Z,2021-07-07T01:27:56Z,MERGED,True,77,6,3,https://github.com/kou,ii offline: fix a bug that token is normalized twice,1,[],https://github.com/groonga/groonga/pull/1226,https://github.com/kou,1,https://github.com/groonga/groonga/pull/1226,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1226,2021-07-06T02:42:56Z,2021-07-07T01:27:56Z,2021-07-07T01:27:56Z,MERGED,True,77,6,3,https://github.com/kou,ii offline: fix a bug that token is normalized twice,1,[],https://github.com/groonga/groonga/pull/1226,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1226#issuecomment-874418618,,Cc: @HashidaTKS,True,{}
groonga/groonga,https://github.com/groonga/groonga,1227,2021-07-08T14:26:48Z,2021-07-12T02:23:47Z,2021-07-12T04:25:23Z,MERGED,True,468,19,9,https://github.com/komainu8,between: add support for customizing sequential search threshold,16,[],https://github.com/groonga/groonga/pull/1227,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1227,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1230,2021-07-09T09:13:48Z,2021-07-12T02:50:38Z,2021-07-12T04:28:43Z,MERGED,True,192,16,5,https://github.com/komainu8,in_values: add a new option for customizing sequential search threshold,10,[],https://github.com/groonga/groonga/pull/1230,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1230,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1231,2021-07-11T12:23:48Z,2021-07-12T05:36:04Z,2021-07-12T05:36:06Z,MERGED,True,324,6,5,https://github.com/komainu8,doc reference: add document about new arguments for between and in values,6,[],https://github.com/groonga/groonga/pull/1231,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1231,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1232,2021-07-13T21:17:21Z,2021-07-14T06:31:19Z,2021-07-14T06:31:24Z,MERGED,True,73,1,3,https://github.com/naoa,grn_expr_slice: adjust nargs for GRN_OP_CALL,2,[],https://github.com/groonga/groonga/pull/1232,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/1232,"In order to slice the expr of match_columns including scorer_tf_idf, it is necessary to adjust the nargs of GRN_OP_CALL.
Example case:
#$GRN_QUERY_PARALLEL_OR_N_CONDITIONS_THRESHOLD=1
#$GRN_QUERY_PARALLEL_OR_N_THREADS_LIMIT=2

table_create Tags TABLE_HASH_KEY ShortText

table_create Users TABLE_HASH_KEY ShortText
column_create Users comment COLUMN_SCALAR ShortText
column_create Users tags_by_me COLUMN_VECTOR Tags
column_create Users tags_by_others COLUMN_VECTOR Tags

load --table Users
[
{""_key"": ""Alice"",
 ""tags_by_me"": [""beginner"", ""active""],
 ""tags_by_others"": [""expert"", ""active""]},
{""_key"": ""Bob"",
 ""tags_by_me"": [""expert"", ""passive""],
 ""tags_by_others"": [""beginner"", ""passive""]},
{""_key"": ""Chris"",
 ""tags_by_me"": [""beginner"", ""passive""],
 ""tags_by_others"": [""beginner"", ""active""]}
]

column_create Tags users COLUMN_INDEX|WITH_SECTION \
  Users tags_by_me,tags_by_others

select Users \
  --output_columns _id,_key,tags_by_me,tags_by_others,,_score \
  --sort_keys _id \
  --filter 'query_parallel_or(""scorer_tf_idf(tags_by_me) || scorer_tf_idf(tags_by_me,1) * 1"", \
                              ""beginner active"")'","In order to slice the expr of match_columns including scorer_tf_idf, it is necessary to adjust the nargs of GRN_OP_CALL.
Example case:
#$GRN_QUERY_PARALLEL_OR_N_CONDITIONS_THRESHOLD=1
#$GRN_QUERY_PARALLEL_OR_N_THREADS_LIMIT=2

table_create Tags TABLE_HASH_KEY ShortText

table_create Users TABLE_HASH_KEY ShortText
column_create Users comment COLUMN_SCALAR ShortText
column_create Users tags_by_me COLUMN_VECTOR Tags
column_create Users tags_by_others COLUMN_VECTOR Tags

load --table Users
[
{""_key"": ""Alice"",
 ""tags_by_me"": [""beginner"", ""active""],
 ""tags_by_others"": [""expert"", ""active""]},
{""_key"": ""Bob"",
 ""tags_by_me"": [""expert"", ""passive""],
 ""tags_by_others"": [""beginner"", ""passive""]},
{""_key"": ""Chris"",
 ""tags_by_me"": [""beginner"", ""passive""],
 ""tags_by_others"": [""beginner"", ""active""]}
]

column_create Tags users COLUMN_INDEX|WITH_SECTION \
  Users tags_by_me,tags_by_others

select Users \
  --output_columns _id,_key,tags_by_me,tags_by_others,,_score \
  --sort_keys _id \
  --filter 'query_parallel_or(""scorer_tf_idf(tags_by_me) || scorer_tf_idf(tags_by_me,1) * 1"", \
                              ""beginner active"")'",True,{}
groonga/groonga,https://github.com/groonga/groonga,1232,2021-07-13T21:17:21Z,2021-07-14T06:31:19Z,2021-07-14T06:31:24Z,MERGED,True,73,1,3,https://github.com/naoa,grn_expr_slice: adjust nargs for GRN_OP_CALL,2,[],https://github.com/groonga/groonga/pull/1232,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1232#issuecomment-879630548,"In order to slice the expr of match_columns including scorer_tf_idf, it is necessary to adjust the nargs of GRN_OP_CALL.
Example case:
#$GRN_QUERY_PARALLEL_OR_N_CONDITIONS_THRESHOLD=1
#$GRN_QUERY_PARALLEL_OR_N_THREADS_LIMIT=2

table_create Tags TABLE_HASH_KEY ShortText

table_create Users TABLE_HASH_KEY ShortText
column_create Users comment COLUMN_SCALAR ShortText
column_create Users tags_by_me COLUMN_VECTOR Tags
column_create Users tags_by_others COLUMN_VECTOR Tags

load --table Users
[
{""_key"": ""Alice"",
 ""tags_by_me"": [""beginner"", ""active""],
 ""tags_by_others"": [""expert"", ""active""]},
{""_key"": ""Bob"",
 ""tags_by_me"": [""expert"", ""passive""],
 ""tags_by_others"": [""beginner"", ""passive""]},
{""_key"": ""Chris"",
 ""tags_by_me"": [""beginner"", ""passive""],
 ""tags_by_others"": [""beginner"", ""active""]}
]

column_create Tags users COLUMN_INDEX|WITH_SECTION \
  Users tags_by_me,tags_by_others

select Users \
  --output_columns _id,_key,tags_by_me,tags_by_others,,_score \
  --sort_keys _id \
  --filter 'query_parallel_or(""scorer_tf_idf(tags_by_me) || scorer_tf_idf(tags_by_me,1) * 1"", \
                              ""beginner active"")'",Good catch!,True,{}
groonga/groonga,https://github.com/groonga/groonga,1233,2021-07-14T04:12:28Z,2021-07-16T06:17:35Z,2021-07-16T06:23:35Z,CLOSED,False,43,10,3,https://github.com/naoa,grn_expr_match_columns_split: Don't split by GRN_OP_STAR,1,[],https://github.com/groonga/groonga/pull/1233,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/1233,"We don't want to split only by GRN_OP_STAR in grn_expr_match_columns_split.
We would like to represent a group of parallel match_columns, for example by using a combination of OR and other OPs.
This makes it possible to realize a query that has the same number of hits as a normal query() function in some cases even if it includes an and logical operator in query string.
For example in our query, it looks like this:
query_parallel_or ( \
""vgram_terms.app_claims1 * 1 + vgram_terms.description1 * 1 || 
 vgram_terms.app_claims2 * 1 + vgram_terms.description2 * 1"", \
""search query + keywords"") 

table_create Users TABLE_NO_KEY
[[0,0.0,0.0],true]
column_create Users name COLUMN_SCALAR ShortText
[[0,0.0,0.0],true]
column_create Users memo COLUMN_SCALAR ShortText
[[0,0.0,0.0],true]
column_create Users tag COLUMN_SCALAR ShortText
[[0,0.0,0.0],true]
table_create Terms TABLE_PAT_KEY ShortText --default_tokenizer TokenNgram
[[0,0.0,0.0],true]
column_create Terms name COLUMN_INDEX|WITH_POSITION Users name
[[0,0.0,0.0],true]
column_create Terms memo COLUMN_INDEX|WITH_POSITION Users memo
[[0,0.0,0.0],true]
column_create Terms tag COLUMN_INDEX|WITH_POSITION Users tag
[[0,0.0,0.0],true]
load --table Users
[
{""name"": ""Alice"", ""memo"": ""Groonga user"", ""tag"": ""Groonga""},
{""name"": ""Bob"",   ""memo"": ""Rroonga user"", ""tag"": ""Rroonga""}
]
[[0,0.0,0.0],2]
select Users   --output_columns _score,name   --filter 'query_parallel_or(""name * 100 + memo * 10 || tag * 1"", ""Alice OR Groonga"")'
[[0,0.0,0.0],[[[1],[[""_score"",""Int32""],[""name"",""ShortText""]],[111,""Alice""]]]]

orginal expr:
#<expr
  vars:{
    $1:#<record:no_key:Users id:(no value)>
  },
  codes:{
    0:<get_value n_args:1, flags:0, modify:2, value:#<column:var_size Users.name range:ShortText type:scalar compress:none>>,
    1:<push n_args:1, flags:0, modify:0, value:100>,
    2:<star n_args:2, flags:0, modify:4, value:(NULL)>,
    3:<get_value n_args:1, flags:0, modify:2, value:#<column:var_size Users.memo range:ShortText type:scalar compress:none>>,
    4:<push n_args:1, flags:0, modify:0, value:10>,
    5:<star n_args:2, flags:0, modify:0, value:(NULL)>,
    6:<plus n_args:2, flags:1, modify:4, value:(NULL)>,
    7:<get_value n_args:1, flags:0, modify:2, value:#<column:var_size Users.tag range:ShortText type:scalar compress:none>>,
    8:<push n_args:1, flags:0, modify:0, value:1>,
    9:<star n_args:2, flags:1, modify:0, value:(NULL)>,
    10:<or n_args:2, flags:0, modify:0, value:(NULL)>
  }
>
splitted expr:
[#<expr
  vars:{
    $1:#<record:no_key:Users id:0(nonexistent)>
  },
  codes:{
    0:<get_value n_args:1, flags:0, modify:2, value:#<column:var_size Users.name range:ShortText type:scalar compress:none>>,
    1:<push n_args:1, flags:0, modify:0, value:100>,
    2:<star n_args:2, flags:0, modify:4, value:(NULL)>,
    3:<get_value n_args:1, flags:0, modify:2, value:#<column:var_size Users.memo range:ShortText type:scalar compress:none>>,
    4:<push n_args:1, flags:0, modify:0, value:10>,
    5:<star n_args:2, flags:0, modify:0, value:(NULL)>,
    6:<plus n_args:2, flags:0, modify:0, value:(NULL)>
  }
>, #<expr
  vars:{
    $1:#<record:no_key:Users id:0(nonexistent)>
  },
  codes:{
    0:<get_value n_args:1, flags:0, modify:2, value:#<column:var_size Users.tag range:ShortText type:scalar compress:none>>,
    1:<push n_args:1, flags:0, modify:0, value:1>,
    2:<star n_args:2, flags:0, modify:0, value:(NULL)>
  }
>]","We don't want to split only by GRN_OP_STAR in grn_expr_match_columns_split.
We would like to represent a group of parallel match_columns, for example by using a combination of OR and other OPs.
This makes it possible to realize a query that has the same number of hits as a normal query() function in some cases even if it includes an and logical operator in query string.
For example in our query, it looks like this:
query_parallel_or ( \
""vgram_terms.app_claims1 * 1 + vgram_terms.description1 * 1 || 
 vgram_terms.app_claims2 * 1 + vgram_terms.description2 * 1"", \
""search query + keywords"") 

table_create Users TABLE_NO_KEY
[[0,0.0,0.0],true]
column_create Users name COLUMN_SCALAR ShortText
[[0,0.0,0.0],true]
column_create Users memo COLUMN_SCALAR ShortText
[[0,0.0,0.0],true]
column_create Users tag COLUMN_SCALAR ShortText
[[0,0.0,0.0],true]
table_create Terms TABLE_PAT_KEY ShortText --default_tokenizer TokenNgram
[[0,0.0,0.0],true]
column_create Terms name COLUMN_INDEX|WITH_POSITION Users name
[[0,0.0,0.0],true]
column_create Terms memo COLUMN_INDEX|WITH_POSITION Users memo
[[0,0.0,0.0],true]
column_create Terms tag COLUMN_INDEX|WITH_POSITION Users tag
[[0,0.0,0.0],true]
load --table Users
[
{""name"": ""Alice"", ""memo"": ""Groonga user"", ""tag"": ""Groonga""},
{""name"": ""Bob"",   ""memo"": ""Rroonga user"", ""tag"": ""Rroonga""}
]
[[0,0.0,0.0],2]
select Users   --output_columns _score,name   --filter 'query_parallel_or(""name * 100 + memo * 10 || tag * 1"", ""Alice OR Groonga"")'
[[0,0.0,0.0],[[[1],[[""_score"",""Int32""],[""name"",""ShortText""]],[111,""Alice""]]]]

orginal expr:
#<expr
  vars:{
    $1:#<record:no_key:Users id:(no value)>
  },
  codes:{
    0:<get_value n_args:1, flags:0, modify:2, value:#<column:var_size Users.name range:ShortText type:scalar compress:none>>,
    1:<push n_args:1, flags:0, modify:0, value:100>,
    2:<star n_args:2, flags:0, modify:4, value:(NULL)>,
    3:<get_value n_args:1, flags:0, modify:2, value:#<column:var_size Users.memo range:ShortText type:scalar compress:none>>,
    4:<push n_args:1, flags:0, modify:0, value:10>,
    5:<star n_args:2, flags:0, modify:0, value:(NULL)>,
    6:<plus n_args:2, flags:1, modify:4, value:(NULL)>,
    7:<get_value n_args:1, flags:0, modify:2, value:#<column:var_size Users.tag range:ShortText type:scalar compress:none>>,
    8:<push n_args:1, flags:0, modify:0, value:1>,
    9:<star n_args:2, flags:1, modify:0, value:(NULL)>,
    10:<or n_args:2, flags:0, modify:0, value:(NULL)>
  }
>
splitted expr:
[#<expr
  vars:{
    $1:#<record:no_key:Users id:0(nonexistent)>
  },
  codes:{
    0:<get_value n_args:1, flags:0, modify:2, value:#<column:var_size Users.name range:ShortText type:scalar compress:none>>,
    1:<push n_args:1, flags:0, modify:0, value:100>,
    2:<star n_args:2, flags:0, modify:4, value:(NULL)>,
    3:<get_value n_args:1, flags:0, modify:2, value:#<column:var_size Users.memo range:ShortText type:scalar compress:none>>,
    4:<push n_args:1, flags:0, modify:0, value:10>,
    5:<star n_args:2, flags:0, modify:0, value:(NULL)>,
    6:<plus n_args:2, flags:0, modify:0, value:(NULL)>
  }
>, #<expr
  vars:{
    $1:#<record:no_key:Users id:0(nonexistent)>
  },
  codes:{
    0:<get_value n_args:1, flags:0, modify:2, value:#<column:var_size Users.tag range:ShortText type:scalar compress:none>>,
    1:<push n_args:1, flags:0, modify:0, value:1>,
    2:<star n_args:2, flags:0, modify:0, value:(NULL)>
  }
>]",True,{}
groonga/groonga,https://github.com/groonga/groonga,1233,2021-07-14T04:12:28Z,2021-07-16T06:17:35Z,2021-07-16T06:23:35Z,CLOSED,False,43,10,3,https://github.com/naoa,grn_expr_match_columns_split: Don't split by GRN_OP_STAR,1,[],https://github.com/groonga/groonga/pull/1233,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1233#issuecomment-880322524,"We don't want to split only by GRN_OP_STAR in grn_expr_match_columns_split.
We would like to represent a group of parallel match_columns, for example by using a combination of OR and other OPs.
This makes it possible to realize a query that has the same number of hits as a normal query() function in some cases even if it includes an and logical operator in query string.
For example in our query, it looks like this:
query_parallel_or ( \
""vgram_terms.app_claims1 * 1 + vgram_terms.description1 * 1 || 
 vgram_terms.app_claims2 * 1 + vgram_terms.description2 * 1"", \
""search query + keywords"") 

table_create Users TABLE_NO_KEY
[[0,0.0,0.0],true]
column_create Users name COLUMN_SCALAR ShortText
[[0,0.0,0.0],true]
column_create Users memo COLUMN_SCALAR ShortText
[[0,0.0,0.0],true]
column_create Users tag COLUMN_SCALAR ShortText
[[0,0.0,0.0],true]
table_create Terms TABLE_PAT_KEY ShortText --default_tokenizer TokenNgram
[[0,0.0,0.0],true]
column_create Terms name COLUMN_INDEX|WITH_POSITION Users name
[[0,0.0,0.0],true]
column_create Terms memo COLUMN_INDEX|WITH_POSITION Users memo
[[0,0.0,0.0],true]
column_create Terms tag COLUMN_INDEX|WITH_POSITION Users tag
[[0,0.0,0.0],true]
load --table Users
[
{""name"": ""Alice"", ""memo"": ""Groonga user"", ""tag"": ""Groonga""},
{""name"": ""Bob"",   ""memo"": ""Rroonga user"", ""tag"": ""Rroonga""}
]
[[0,0.0,0.0],2]
select Users   --output_columns _score,name   --filter 'query_parallel_or(""name * 100 + memo * 10 || tag * 1"", ""Alice OR Groonga"")'
[[0,0.0,0.0],[[[1],[[""_score"",""Int32""],[""name"",""ShortText""]],[111,""Alice""]]]]

orginal expr:
#<expr
  vars:{
    $1:#<record:no_key:Users id:(no value)>
  },
  codes:{
    0:<get_value n_args:1, flags:0, modify:2, value:#<column:var_size Users.name range:ShortText type:scalar compress:none>>,
    1:<push n_args:1, flags:0, modify:0, value:100>,
    2:<star n_args:2, flags:0, modify:4, value:(NULL)>,
    3:<get_value n_args:1, flags:0, modify:2, value:#<column:var_size Users.memo range:ShortText type:scalar compress:none>>,
    4:<push n_args:1, flags:0, modify:0, value:10>,
    5:<star n_args:2, flags:0, modify:0, value:(NULL)>,
    6:<plus n_args:2, flags:1, modify:4, value:(NULL)>,
    7:<get_value n_args:1, flags:0, modify:2, value:#<column:var_size Users.tag range:ShortText type:scalar compress:none>>,
    8:<push n_args:1, flags:0, modify:0, value:1>,
    9:<star n_args:2, flags:1, modify:0, value:(NULL)>,
    10:<or n_args:2, flags:0, modify:0, value:(NULL)>
  }
>
splitted expr:
[#<expr
  vars:{
    $1:#<record:no_key:Users id:0(nonexistent)>
  },
  codes:{
    0:<get_value n_args:1, flags:0, modify:2, value:#<column:var_size Users.name range:ShortText type:scalar compress:none>>,
    1:<push n_args:1, flags:0, modify:0, value:100>,
    2:<star n_args:2, flags:0, modify:4, value:(NULL)>,
    3:<get_value n_args:1, flags:0, modify:2, value:#<column:var_size Users.memo range:ShortText type:scalar compress:none>>,
    4:<push n_args:1, flags:0, modify:0, value:10>,
    5:<star n_args:2, flags:0, modify:0, value:(NULL)>,
    6:<plus n_args:2, flags:0, modify:0, value:(NULL)>
  }
>, #<expr
  vars:{
    $1:#<record:no_key:Users id:0(nonexistent)>
  },
  codes:{
    0:<get_value n_args:1, flags:0, modify:2, value:#<column:var_size Users.tag range:ShortText type:scalar compress:none>>,
    1:<push n_args:1, flags:0, modify:0, value:1>,
    2:<star n_args:2, flags:0, modify:0, value:(NULL)>
  }
>]","I don't think that + is a good operator for grouping.
It's a plus operator in script syntax. It's not related to grouping.
(A || B) || (C || D) may be a good syntax but (...) information doesn't exist in grn_expr...",True,{}
groonga/groonga,https://github.com/groonga/groonga,1233,2021-07-14T04:12:28Z,2021-07-16T06:17:35Z,2021-07-16T06:23:35Z,CLOSED,False,43,10,3,https://github.com/naoa,grn_expr_match_columns_split: Don't split by GRN_OP_STAR,1,[],https://github.com/groonga/groonga/pull/1233,https://github.com/naoa,3,https://github.com/groonga/groonga/pull/1233#issuecomment-880364963,"We don't want to split only by GRN_OP_STAR in grn_expr_match_columns_split.
We would like to represent a group of parallel match_columns, for example by using a combination of OR and other OPs.
This makes it possible to realize a query that has the same number of hits as a normal query() function in some cases even if it includes an and logical operator in query string.
For example in our query, it looks like this:
query_parallel_or ( \
""vgram_terms.app_claims1 * 1 + vgram_terms.description1 * 1 || 
 vgram_terms.app_claims2 * 1 + vgram_terms.description2 * 1"", \
""search query + keywords"") 

table_create Users TABLE_NO_KEY
[[0,0.0,0.0],true]
column_create Users name COLUMN_SCALAR ShortText
[[0,0.0,0.0],true]
column_create Users memo COLUMN_SCALAR ShortText
[[0,0.0,0.0],true]
column_create Users tag COLUMN_SCALAR ShortText
[[0,0.0,0.0],true]
table_create Terms TABLE_PAT_KEY ShortText --default_tokenizer TokenNgram
[[0,0.0,0.0],true]
column_create Terms name COLUMN_INDEX|WITH_POSITION Users name
[[0,0.0,0.0],true]
column_create Terms memo COLUMN_INDEX|WITH_POSITION Users memo
[[0,0.0,0.0],true]
column_create Terms tag COLUMN_INDEX|WITH_POSITION Users tag
[[0,0.0,0.0],true]
load --table Users
[
{""name"": ""Alice"", ""memo"": ""Groonga user"", ""tag"": ""Groonga""},
{""name"": ""Bob"",   ""memo"": ""Rroonga user"", ""tag"": ""Rroonga""}
]
[[0,0.0,0.0],2]
select Users   --output_columns _score,name   --filter 'query_parallel_or(""name * 100 + memo * 10 || tag * 1"", ""Alice OR Groonga"")'
[[0,0.0,0.0],[[[1],[[""_score"",""Int32""],[""name"",""ShortText""]],[111,""Alice""]]]]

orginal expr:
#<expr
  vars:{
    $1:#<record:no_key:Users id:(no value)>
  },
  codes:{
    0:<get_value n_args:1, flags:0, modify:2, value:#<column:var_size Users.name range:ShortText type:scalar compress:none>>,
    1:<push n_args:1, flags:0, modify:0, value:100>,
    2:<star n_args:2, flags:0, modify:4, value:(NULL)>,
    3:<get_value n_args:1, flags:0, modify:2, value:#<column:var_size Users.memo range:ShortText type:scalar compress:none>>,
    4:<push n_args:1, flags:0, modify:0, value:10>,
    5:<star n_args:2, flags:0, modify:0, value:(NULL)>,
    6:<plus n_args:2, flags:1, modify:4, value:(NULL)>,
    7:<get_value n_args:1, flags:0, modify:2, value:#<column:var_size Users.tag range:ShortText type:scalar compress:none>>,
    8:<push n_args:1, flags:0, modify:0, value:1>,
    9:<star n_args:2, flags:1, modify:0, value:(NULL)>,
    10:<or n_args:2, flags:0, modify:0, value:(NULL)>
  }
>
splitted expr:
[#<expr
  vars:{
    $1:#<record:no_key:Users id:0(nonexistent)>
  },
  codes:{
    0:<get_value n_args:1, flags:0, modify:2, value:#<column:var_size Users.name range:ShortText type:scalar compress:none>>,
    1:<push n_args:1, flags:0, modify:0, value:100>,
    2:<star n_args:2, flags:0, modify:4, value:(NULL)>,
    3:<get_value n_args:1, flags:0, modify:2, value:#<column:var_size Users.memo range:ShortText type:scalar compress:none>>,
    4:<push n_args:1, flags:0, modify:0, value:10>,
    5:<star n_args:2, flags:0, modify:0, value:(NULL)>,
    6:<plus n_args:2, flags:0, modify:0, value:(NULL)>
  }
>, #<expr
  vars:{
    $1:#<record:no_key:Users id:0(nonexistent)>
  },
  codes:{
    0:<get_value n_args:1, flags:0, modify:2, value:#<column:var_size Users.tag range:ShortText type:scalar compress:none>>,
    1:<push n_args:1, flags:0, modify:0, value:1>,
    2:<star n_args:2, flags:0, modify:0, value:(NULL)>
  }
>]","Surely.
How about allowing array literal to be specified in match_columns of query_parallel_or as shown below?
select Users   --output_columns _score,name  \
 --filter 'query_parallel_or([""name * 100 || memo * 10"", ""tag * 1""],  ""Alice OR Groonga"")'",True,{}
groonga/groonga,https://github.com/groonga/groonga,1233,2021-07-14T04:12:28Z,2021-07-16T06:17:35Z,2021-07-16T06:23:35Z,CLOSED,False,43,10,3,https://github.com/naoa,grn_expr_match_columns_split: Don't split by GRN_OP_STAR,1,[],https://github.com/groonga/groonga/pull/1233,https://github.com/kou,4,https://github.com/groonga/groonga/pull/1233#issuecomment-880382482,"We don't want to split only by GRN_OP_STAR in grn_expr_match_columns_split.
We would like to represent a group of parallel match_columns, for example by using a combination of OR and other OPs.
This makes it possible to realize a query that has the same number of hits as a normal query() function in some cases even if it includes an and logical operator in query string.
For example in our query, it looks like this:
query_parallel_or ( \
""vgram_terms.app_claims1 * 1 + vgram_terms.description1 * 1 || 
 vgram_terms.app_claims2 * 1 + vgram_terms.description2 * 1"", \
""search query + keywords"") 

table_create Users TABLE_NO_KEY
[[0,0.0,0.0],true]
column_create Users name COLUMN_SCALAR ShortText
[[0,0.0,0.0],true]
column_create Users memo COLUMN_SCALAR ShortText
[[0,0.0,0.0],true]
column_create Users tag COLUMN_SCALAR ShortText
[[0,0.0,0.0],true]
table_create Terms TABLE_PAT_KEY ShortText --default_tokenizer TokenNgram
[[0,0.0,0.0],true]
column_create Terms name COLUMN_INDEX|WITH_POSITION Users name
[[0,0.0,0.0],true]
column_create Terms memo COLUMN_INDEX|WITH_POSITION Users memo
[[0,0.0,0.0],true]
column_create Terms tag COLUMN_INDEX|WITH_POSITION Users tag
[[0,0.0,0.0],true]
load --table Users
[
{""name"": ""Alice"", ""memo"": ""Groonga user"", ""tag"": ""Groonga""},
{""name"": ""Bob"",   ""memo"": ""Rroonga user"", ""tag"": ""Rroonga""}
]
[[0,0.0,0.0],2]
select Users   --output_columns _score,name   --filter 'query_parallel_or(""name * 100 + memo * 10 || tag * 1"", ""Alice OR Groonga"")'
[[0,0.0,0.0],[[[1],[[""_score"",""Int32""],[""name"",""ShortText""]],[111,""Alice""]]]]

orginal expr:
#<expr
  vars:{
    $1:#<record:no_key:Users id:(no value)>
  },
  codes:{
    0:<get_value n_args:1, flags:0, modify:2, value:#<column:var_size Users.name range:ShortText type:scalar compress:none>>,
    1:<push n_args:1, flags:0, modify:0, value:100>,
    2:<star n_args:2, flags:0, modify:4, value:(NULL)>,
    3:<get_value n_args:1, flags:0, modify:2, value:#<column:var_size Users.memo range:ShortText type:scalar compress:none>>,
    4:<push n_args:1, flags:0, modify:0, value:10>,
    5:<star n_args:2, flags:0, modify:0, value:(NULL)>,
    6:<plus n_args:2, flags:1, modify:4, value:(NULL)>,
    7:<get_value n_args:1, flags:0, modify:2, value:#<column:var_size Users.tag range:ShortText type:scalar compress:none>>,
    8:<push n_args:1, flags:0, modify:0, value:1>,
    9:<star n_args:2, flags:1, modify:0, value:(NULL)>,
    10:<or n_args:2, flags:0, modify:0, value:(NULL)>
  }
>
splitted expr:
[#<expr
  vars:{
    $1:#<record:no_key:Users id:0(nonexistent)>
  },
  codes:{
    0:<get_value n_args:1, flags:0, modify:2, value:#<column:var_size Users.name range:ShortText type:scalar compress:none>>,
    1:<push n_args:1, flags:0, modify:0, value:100>,
    2:<star n_args:2, flags:0, modify:4, value:(NULL)>,
    3:<get_value n_args:1, flags:0, modify:2, value:#<column:var_size Users.memo range:ShortText type:scalar compress:none>>,
    4:<push n_args:1, flags:0, modify:0, value:10>,
    5:<star n_args:2, flags:0, modify:0, value:(NULL)>,
    6:<plus n_args:2, flags:0, modify:0, value:(NULL)>
  }
>, #<expr
  vars:{
    $1:#<record:no_key:Users id:0(nonexistent)>
  },
  codes:{
    0:<get_value n_args:1, flags:0, modify:2, value:#<column:var_size Users.tag range:ShortText type:scalar compress:none>>,
    1:<push n_args:1, flags:0, modify:0, value:1>,
    2:<star n_args:2, flags:0, modify:0, value:(NULL)>
  }
>]",It's a good idea!,True,{}
groonga/groonga,https://github.com/groonga/groonga,1233,2021-07-14T04:12:28Z,2021-07-16T06:17:35Z,2021-07-16T06:23:35Z,CLOSED,False,43,10,3,https://github.com/naoa,grn_expr_match_columns_split: Don't split by GRN_OP_STAR,1,[],https://github.com/groonga/groonga/pull/1233,https://github.com/naoa,5,https://github.com/groonga/groonga/pull/1233#issuecomment-881206214,"We don't want to split only by GRN_OP_STAR in grn_expr_match_columns_split.
We would like to represent a group of parallel match_columns, for example by using a combination of OR and other OPs.
This makes it possible to realize a query that has the same number of hits as a normal query() function in some cases even if it includes an and logical operator in query string.
For example in our query, it looks like this:
query_parallel_or ( \
""vgram_terms.app_claims1 * 1 + vgram_terms.description1 * 1 || 
 vgram_terms.app_claims2 * 1 + vgram_terms.description2 * 1"", \
""search query + keywords"") 

table_create Users TABLE_NO_KEY
[[0,0.0,0.0],true]
column_create Users name COLUMN_SCALAR ShortText
[[0,0.0,0.0],true]
column_create Users memo COLUMN_SCALAR ShortText
[[0,0.0,0.0],true]
column_create Users tag COLUMN_SCALAR ShortText
[[0,0.0,0.0],true]
table_create Terms TABLE_PAT_KEY ShortText --default_tokenizer TokenNgram
[[0,0.0,0.0],true]
column_create Terms name COLUMN_INDEX|WITH_POSITION Users name
[[0,0.0,0.0],true]
column_create Terms memo COLUMN_INDEX|WITH_POSITION Users memo
[[0,0.0,0.0],true]
column_create Terms tag COLUMN_INDEX|WITH_POSITION Users tag
[[0,0.0,0.0],true]
load --table Users
[
{""name"": ""Alice"", ""memo"": ""Groonga user"", ""tag"": ""Groonga""},
{""name"": ""Bob"",   ""memo"": ""Rroonga user"", ""tag"": ""Rroonga""}
]
[[0,0.0,0.0],2]
select Users   --output_columns _score,name   --filter 'query_parallel_or(""name * 100 + memo * 10 || tag * 1"", ""Alice OR Groonga"")'
[[0,0.0,0.0],[[[1],[[""_score"",""Int32""],[""name"",""ShortText""]],[111,""Alice""]]]]

orginal expr:
#<expr
  vars:{
    $1:#<record:no_key:Users id:(no value)>
  },
  codes:{
    0:<get_value n_args:1, flags:0, modify:2, value:#<column:var_size Users.name range:ShortText type:scalar compress:none>>,
    1:<push n_args:1, flags:0, modify:0, value:100>,
    2:<star n_args:2, flags:0, modify:4, value:(NULL)>,
    3:<get_value n_args:1, flags:0, modify:2, value:#<column:var_size Users.memo range:ShortText type:scalar compress:none>>,
    4:<push n_args:1, flags:0, modify:0, value:10>,
    5:<star n_args:2, flags:0, modify:0, value:(NULL)>,
    6:<plus n_args:2, flags:1, modify:4, value:(NULL)>,
    7:<get_value n_args:1, flags:0, modify:2, value:#<column:var_size Users.tag range:ShortText type:scalar compress:none>>,
    8:<push n_args:1, flags:0, modify:0, value:1>,
    9:<star n_args:2, flags:1, modify:0, value:(NULL)>,
    10:<or n_args:2, flags:0, modify:0, value:(NULL)>
  }
>
splitted expr:
[#<expr
  vars:{
    $1:#<record:no_key:Users id:0(nonexistent)>
  },
  codes:{
    0:<get_value n_args:1, flags:0, modify:2, value:#<column:var_size Users.name range:ShortText type:scalar compress:none>>,
    1:<push n_args:1, flags:0, modify:0, value:100>,
    2:<star n_args:2, flags:0, modify:4, value:(NULL)>,
    3:<get_value n_args:1, flags:0, modify:2, value:#<column:var_size Users.memo range:ShortText type:scalar compress:none>>,
    4:<push n_args:1, flags:0, modify:0, value:10>,
    5:<star n_args:2, flags:0, modify:0, value:(NULL)>,
    6:<plus n_args:2, flags:0, modify:0, value:(NULL)>
  }
>, #<expr
  vars:{
    $1:#<record:no_key:Users id:0(nonexistent)>
  },
  codes:{
    0:<get_value n_args:1, flags:0, modify:2, value:#<column:var_size Users.tag range:ShortText type:scalar compress:none>>,
    1:<push n_args:1, flags:0, modify:0, value:1>,
    2:<star n_args:2, flags:0, modify:0, value:(NULL)>
  }
>]",I've made a new Pull Request #1238 .,True,{}
groonga/groonga,https://github.com/groonga/groonga,1234,2021-07-14T08:47:48Z,2021-07-20T02:41:00Z,2021-07-20T02:41:01Z,MERGED,True,313,40,7,https://github.com/komainu8,grndb recover: close used objects immediately,28,[],https://github.com/groonga/groonga/pull/1234,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1234,"We can reduce memory usage by this.
This may decrease performance but it will be acceptable.
Note that ""grndb check"" doesn't close used objects immediately yet.","We can reduce memory usage by this.
This may decrease performance but it will be acceptable.
Note that ""grndb check"" doesn't close used objects immediately yet.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1234,2021-07-14T08:47:48Z,2021-07-20T02:41:00Z,2021-07-20T02:41:01Z,MERGED,True,313,40,7,https://github.com/komainu8,grndb recover: close used objects immediately,28,[],https://github.com/groonga/groonga/pull/1234,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1234#issuecomment-880301850,"We can reduce memory usage by this.
This may decrease performance but it will be acceptable.
Note that ""grndb check"" doesn't close used objects immediately yet.","This approach will not work for objects that refer other objects such as an index column. An index column refers its lexicon.
We should use grn_ctx_push_temporary_open_space()/grn_ctx_pop_temporary_open_space() like grn_db_recover() does.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1234,2021-07-14T08:47:48Z,2021-07-20T02:41:00Z,2021-07-20T02:41:01Z,MERGED,True,313,40,7,https://github.com/komainu8,grndb recover: close used objects immediately,28,[],https://github.com/groonga/groonga/pull/1234,https://github.com/kou,3,https://github.com/groonga/groonga/pull/1234#issuecomment-880455320,"We can reduce memory usage by this.
This may decrease performance but it will be acceptable.
Note that ""grndb check"" doesn't close used objects immediately yet.",Can you add tests for this case?,True,{}
groonga/groonga,https://github.com/groonga/groonga,1234,2021-07-14T08:47:48Z,2021-07-20T02:41:00Z,2021-07-20T02:41:01Z,MERGED,True,313,40,7,https://github.com/komainu8,grndb recover: close used objects immediately,28,[],https://github.com/groonga/groonga/pull/1234,https://github.com/komainu8,4,https://github.com/groonga/groonga/pull/1234#issuecomment-880466035,"We can reduce memory usage by this.
This may decrease performance but it will be acceptable.
Note that ""grndb check"" doesn't close used objects immediately yet.","Tests of grndb recover ----force-truncate and grndb recover --force-lock-clear have already exist in https://github.com/groonga/groonga/blob/master/test/command_line/suite/grndb/test_recover.rb#L177-L205 and https://github.com/groonga/groonga/blob/master/test/command_line/suite/grndb/test_recover.rb#L358-L380.
Are these tests not enough?",True,{}
groonga/groonga,https://github.com/groonga/groonga,1234,2021-07-14T08:47:48Z,2021-07-20T02:41:00Z,2021-07-20T02:41:01Z,MERGED,True,313,40,7,https://github.com/komainu8,grndb recover: close used objects immediately,28,[],https://github.com/groonga/groonga/pull/1234,https://github.com/kou,5,https://github.com/groonga/groonga/pull/1234#issuecomment-880467413,"We can reduce memory usage by this.
This may decrease performance but it will be acceptable.
Note that ""grndb check"" doesn't close used objects immediately yet.","If we can reuse existing tests for this case, the existing tests should be failed. Because this change should close more objects.
If the existing tests aren't failed, this case isn't covered by existing tests.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1234,2021-07-14T08:47:48Z,2021-07-20T02:41:00Z,2021-07-20T02:41:01Z,MERGED,True,313,40,7,https://github.com/komainu8,grndb recover: close used objects immediately,28,[],https://github.com/groonga/groonga/pull/1234,https://github.com/komainu8,6,https://github.com/groonga/groonga/pull/1234#issuecomment-880522981,"We can reduce memory usage by this.
This may decrease performance but it will be acceptable.
Note that ""grndb check"" doesn't close used objects immediately yet.","Groonga doesn't output a part of the log(open existing file ...) on Linux. Therefore, existing tests don't fail on Linux, but they fail on Windows.
Therefore, I modified expected values for Windows of existing tests.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1234,2021-07-14T08:47:48Z,2021-07-20T02:41:00Z,2021-07-20T02:41:01Z,MERGED,True,313,40,7,https://github.com/komainu8,grndb recover: close used objects immediately,28,[],https://github.com/groonga/groonga/pull/1234,https://github.com/kou,7,https://github.com/groonga/groonga/pull/1234#issuecomment-880525982,"We can reduce memory usage by this.
This may decrease performance but it will be acceptable.
Note that ""grndb check"" doesn't close used objects immediately yet.","DUMP log level dumps open/close logs on Linux.
BTW, why do you want to check open log not close log?
Does this change close objects immediately?",True,{}
groonga/groonga,https://github.com/groonga/groonga,1234,2021-07-14T08:47:48Z,2021-07-20T02:41:00Z,2021-07-20T02:41:01Z,MERGED,True,313,40,7,https://github.com/komainu8,grndb recover: close used objects immediately,28,[],https://github.com/groonga/groonga/pull/1234,https://github.com/kou,8,https://github.com/groonga/groonga/pull/1234#issuecomment-882280754,"We can reduce memory usage by this.
This may decrease performance but it will be acceptable.
Note that ""grndb check"" doesn't close used objects immediately yet.",grndb wasn't ran in single thread mode.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1234,2021-07-14T08:47:48Z,2021-07-20T02:41:00Z,2021-07-20T02:41:01Z,MERGED,True,313,40,7,https://github.com/komainu8,grndb recover: close used objects immediately,28,[],https://github.com/groonga/groonga/pull/1234,https://github.com/kou,9,https://github.com/groonga/groonga/pull/1234#issuecomment-883006359,"We can reduce memory usage by this.
This may decrease performance but it will be acceptable.
Note that ""grndb check"" doesn't close used objects immediately yet.","I'll merge this because Linux test failures should be unrelated.
This changes only grndb.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1235,2021-07-15T05:03:31Z,2021-07-15T05:27:09Z,2021-07-16T00:51:34Z,MERGED,True,160,3,13,https://github.com/kou,query_expand: add support for weighted increment/decrement/negative,1,[],https://github.com/groonga/groonga/pull/1235,https://github.com/kou,1,https://github.com/groonga/groonga/pull/1235,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1235,2021-07-15T05:03:31Z,2021-07-15T05:27:09Z,2021-07-16T00:51:34Z,MERGED,True,160,3,13,https://github.com/kou,query_expand: add support for weighted increment/decrement/negative,1,[],https://github.com/groonga/groonga/pull/1235,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1235#issuecomment-880393301,,Cc: @HashidaTKS,True,{}
groonga/groonga,https://github.com/groonga/groonga,1235,2021-07-15T05:03:31Z,2021-07-15T05:27:09Z,2021-07-16T00:51:34Z,MERGED,True,160,3,13,https://github.com/kou,query_expand: add support for weighted increment/decrement/negative,1,[],https://github.com/groonga/groonga/pull/1235,https://github.com/kou,3,https://github.com/groonga/groonga/pull/1235#issuecomment-880406523,,"I merge this because I want to use this soon.
But you can add comments if you want to do.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1236,2021-07-15T06:06:34Z,2021-07-16T22:14:29Z,2021-07-16T22:14:37Z,MERGED,True,614,0,17,https://github.com/kou,test: add tests for groonga-synonym-generate,1,[],https://github.com/groonga/groonga/pull/1236,https://github.com/kou,1,https://github.com/groonga/groonga/pull/1236,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1236,2021-07-15T06:06:34Z,2021-07-16T22:14:29Z,2021-07-16T22:14:37Z,MERGED,True,614,0,17,https://github.com/kou,test: add tests for groonga-synonym-generate,1,[],https://github.com/groonga/groonga/pull/1236,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1236#issuecomment-880422543,,Cc: @HashidaTKS,True,{}
groonga/groonga,https://github.com/groonga/groonga,1236,2021-07-15T06:06:34Z,2021-07-16T22:14:29Z,2021-07-16T22:14:37Z,MERGED,True,614,0,17,https://github.com/kou,test: add tests for groonga-synonym-generate,1,[],https://github.com/groonga/groonga/pull/1236,https://github.com/HashidaTKS,3,https://github.com/groonga/groonga/pull/1236#issuecomment-880849419,,"The added tests seem to be failing, is that okey?
I haven't investigated the reason yet...",True,{}
groonga/groonga,https://github.com/groonga/groonga,1236,2021-07-15T06:06:34Z,2021-07-16T22:14:29Z,2021-07-16T22:14:37Z,MERGED,True,614,0,17,https://github.com/kou,test: add tests for groonga-synonym-generate,1,[],https://github.com/groonga/groonga/pull/1236,https://github.com/kou,4,https://github.com/groonga/groonga/pull/1236#issuecomment-881099167,,"Good catch!
They are failed because groonga-httpd (nginx) rejects the large load. I changed grntest to increase the acceptable max body size.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1236,2021-07-15T06:06:34Z,2021-07-16T22:14:29Z,2021-07-16T22:14:37Z,MERGED,True,614,0,17,https://github.com/kou,test: add tests for groonga-synonym-generate,1,[],https://github.com/groonga/groonga/pull/1236,https://github.com/HashidaTKS,5,https://github.com/groonga/groonga/pull/1236#issuecomment-881425076,,Thanks for your explanation!,True,{}
groonga/groonga,https://github.com/groonga/groonga,1237,2021-07-15T07:05:21Z,2021-07-16T22:22:25Z,2021-07-16T22:22:25Z,MERGED,True,151,5,5,https://github.com/kou,increment/decrement: add support for nested,1,[],https://github.com/groonga/groonga/pull/1237,https://github.com/kou,1,https://github.com/groonga/groonga/pull/1237,"Parent weights are added to the specified weight.
Negative is also supported but there is no meaningful syntax for
it. For example ""~2(3XXX)"" is invalid. """" requires one or more
preceding words. So nested negative is meaningless.","Parent weights are added to the specified weight.
Negative is also supported but there is no meaningful syntax for
it. For example ""~2(3XXX)"" is invalid. """" requires one or more
preceding words. So nested negative is meaningless.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1237,2021-07-15T07:05:21Z,2021-07-16T22:22:25Z,2021-07-16T22:22:25Z,MERGED,True,151,5,5,https://github.com/kou,increment/decrement: add support for nested,1,[],https://github.com/groonga/groonga/pull/1237,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1237#issuecomment-880451403,"Parent weights are added to the specified weight.
Negative is also supported but there is no meaningful syntax for
it. For example ""~2(3XXX)"" is invalid. """" requires one or more
preceding words. So nested negative is meaningless.",Cc: @HashidaTKS,True,{}
groonga/groonga,https://github.com/groonga/groonga,1238,2021-07-16T06:15:19Z,2021-07-20T08:40:48Z,2021-07-20T08:40:48Z,MERGED,True,298,144,5,https://github.com/naoa,query query_parallel_or: add support for specifying group of match_columns as vector,2,[],https://github.com/groonga/groonga/pull/1238,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/1238,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1238,2021-07-16T06:15:19Z,2021-07-20T08:40:48Z,2021-07-20T08:40:48Z,MERGED,True,298,144,5,https://github.com/naoa,query query_parallel_or: add support for specifying group of match_columns as vector,2,[],https://github.com/groonga/groonga/pull/1238,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1238#issuecomment-883137869,,"I've added this feature to query() too.
I'll merge this once tests are passed.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1238,2021-07-16T06:15:19Z,2021-07-20T08:40:48Z,2021-07-20T08:40:48Z,MERGED,True,298,144,5,https://github.com/naoa,query query_parallel_or: add support for specifying group of match_columns as vector,2,[],https://github.com/groonga/groonga/pull/1238,https://github.com/naoa,3,https://github.com/groonga/groonga/pull/1238#issuecomment-883188585,,Thanks!,True,{}
groonga/groonga,https://github.com/groonga/groonga,1239,2021-07-20T02:35:04Z,2021-07-20T02:35:42Z,2021-07-22T14:00:44Z,MERGED,True,134,61,1,https://github.com/kou,ii: add more information to logs,1,[],https://github.com/groonga/groonga/pull/1239,https://github.com/kou,1,https://github.com/groonga/groonga/pull/1239,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1239,2021-07-20T02:35:04Z,2021-07-20T02:35:42Z,2021-07-22T14:00:44Z,MERGED,True,134,61,1,https://github.com/kou,ii: add more information to logs,1,[],https://github.com/groonga/groonga/pull/1239,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1239#issuecomment-883005518,,Cc: @HashidaTKS,True,{}
groonga/groonga,https://github.com/groonga/groonga,1239,2021-07-20T02:35:04Z,2021-07-20T02:35:42Z,2021-07-22T14:00:44Z,MERGED,True,134,61,1,https://github.com/kou,ii: add more information to logs,1,[],https://github.com/groonga/groonga/pull/1239,https://github.com/kou,3,https://github.com/groonga/groonga/pull/1239#issuecomment-883005637,,"I'll merge this because I want to use this soon.
But you can add comments.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1239,2021-07-20T02:35:04Z,2021-07-20T02:35:42Z,2021-07-22T14:00:44Z,MERGED,True,134,61,1,https://github.com/kou,ii: add more information to logs,1,[],https://github.com/groonga/groonga/pull/1239,https://github.com/HashidaTKS,4,https://github.com/groonga/groonga/pull/1239#issuecomment-884936448,,LGTM,True,{}
groonga/groonga,https://github.com/groonga/groonga,1240,2021-07-20T11:43:39Z,2021-07-21T04:41:24Z,2021-07-21T05:35:14Z,MERGED,True,154,1,5,https://github.com/naoa,grn_table_selector: add support for section and weight in prefix search,2,[],https://github.com/groonga/groonga/pull/1240,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/1240,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1240,2021-07-20T11:43:39Z,2021-07-21T04:41:24Z,2021-07-21T05:35:14Z,MERGED,True,154,1,5,https://github.com/naoa,grn_table_selector: add support for section and weight in prefix search,2,[],https://github.com/groonga/groonga/pull/1240,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1240#issuecomment-883832578,,I've added weight vector support to grn_ii_cursor and grn_index_cursor and use the new APIs for this.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1240,2021-07-20T11:43:39Z,2021-07-21T04:41:24Z,2021-07-21T05:35:14Z,MERGED,True,154,1,5,https://github.com/naoa,grn_table_selector: add support for section and weight in prefix search,2,[],https://github.com/groonga/groonga/pull/1240,https://github.com/naoa,3,https://github.com/groonga/groonga/pull/1240#issuecomment-883904242,,Thanks!,True,{}
groonga/groonga,https://github.com/groonga/groonga,1241,2021-07-20T11:51:29Z,2021-07-21T02:16:29Z,2021-07-21T05:35:25Z,CLOSED,False,147,7,5,https://github.com/naoa,grn_table_selector: add support weight for prefix search,2,[],https://github.com/groonga/groonga/pull/1241,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/1241,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1241,2021-07-20T11:51:29Z,2021-07-21T02:16:29Z,2021-07-21T05:35:25Z,CLOSED,False,147,7,5,https://github.com/naoa,grn_table_selector: add support weight for prefix search,2,[],https://github.com/groonga/groonga/pull/1241,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1241#issuecomment-883832830,,#1240 also resolves this.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1242,2021-07-21T04:41:56Z,2021-07-22T21:43:30Z,2021-07-22T21:43:31Z,MERGED,True,187,148,3,https://github.com/kou,grn_obj_set_value: move set code to grn_ra_set_value(),1,[],https://github.com/groonga/groonga/pull/1242,https://github.com/kou,1,https://github.com/groonga/groonga/pull/1242,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1242,2021-07-21T04:41:56Z,2021-07-22T21:43:30Z,2021-07-22T21:43:31Z,MERGED,True,187,148,3,https://github.com/kou,grn_obj_set_value: move set code to grn_ra_set_value(),1,[],https://github.com/groonga/groonga/pull/1242,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1242#issuecomment-883882874,,Cc: @HashidaTKS,True,{}
groonga/groonga,https://github.com/groonga/groonga,1243,2021-07-21T08:56:53Z,2021-07-26T05:21:50Z,2021-07-26T05:22:45Z,CLOSED,False,2,2,1,https://github.com/komainu8,packages yum: add a missing release number,5,[],https://github.com/groonga/groonga/pull/1243,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1243,"TODO: This is testing now.
Fix mroonga/mroonga#429. Reported by Yuutakasan. Thanks!!!","TODO: This is testing now.
Fix mroonga/mroonga#429. Reported by Yuutakasan. Thanks!!!",True,{}
groonga/groonga,https://github.com/groonga/groonga,1243,2021-07-21T08:56:53Z,2021-07-26T05:21:50Z,2021-07-26T05:22:45Z,CLOSED,False,2,2,1,https://github.com/komainu8,packages yum: add a missing release number,5,[],https://github.com/groonga/groonga/pull/1243,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/1243#issuecomment-886308780,"TODO: This is testing now.
Fix mroonga/mroonga#429. Reported by Yuutakasan. Thanks!!!","We also need to update vendor/apache-arrow-source.
Because Groonga decide of requirment version from version of vendor/apache-arrow-source.
Apache Arrow version is 4.0.0 when we make the package for Groonga 11.0.4, but Apache Arrow version up in 19 June 2021.
$ sudo yum --enablerepo=local install groonga
Failed to set locale, defaulting to C
Loaded plugins: fastestmirror
Determining fastest mirrors
epel/x86_64/metalink                                                                                                        | 9.2 kB  00:00:00     
 * base: ftp.riken.jp
 * epel: nrt.edge.kernel.org
 * extras: ftp.riken.jp
 * updates: ftp.riken.jp
base                                                                                                                        | 3.6 kB  00:00:00     
epel                                                                                                                        | 4.7 kB  00:00:00     
extras                                                                                                                      | 2.9 kB  00:00:00     
local                                                                                                                       | 3.0 kB  00:00:00     
updates                                                                                                                     | 2.9 kB  00:00:00     
(1/8): base/7/x86_64/group_gz                                                                                               | 153 kB  00:00:00     
(2/8): epel/x86_64/group_gz                                                                                                 |  96 kB  00:00:00     
(3/8): epel/x86_64/updateinfo                                                                                               | 1.0 MB  00:00:00     
(4/8): extras/7/x86_64/primary_db                                                                                           | 242 kB  00:00:00     
(5/8): local/primary_db                                                                                                     |  10 kB  00:00:00     
(6/8): base/7/x86_64/primary_db                                                                                             | 6.1 MB  00:00:00     
(7/8): updates/7/x86_64/primary_db                                                                                          | 9.5 MB  00:00:00     
(8/8): epel/x86_64/primary_db                                                                                               | 6.9 MB  00:00:00     
Resolving Dependencies
--> Running transaction check
---> Package groonga.x86_64 0:11.0.3-1.el7 will be updated
---> Package groonga.x86_64 0:11.0.5-1.el7 will be an update
--> Processing Dependency: groonga-libs = 11.0.5-1.el7 for package: groonga-11.0.5-1.el7.x86_64
--> Processing Dependency: groonga-plugin-suggest = 11.0.5-1.el7 for package: groonga-11.0.5-1.el7.x86_64
--> Running transaction check
---> Package groonga-libs.x86_64 0:11.0.3-1.el7 will be updated
---> Package groonga-libs.x86_64 0:11.0.5-1.el7 will be an update
--> Processing Dependency: arrow-libs = 4.0.0-1.el7 for package: groonga-libs-11.0.5-1.el7.x86_64
---> Package groonga-plugin-suggest.x86_64 0:11.0.3-1.el7 will be updated
---> Package groonga-plugin-suggest.x86_64 0:11.0.5-1.el7 will be an update
--> Finished Dependency Resolution
Error: Package: groonga-libs-11.0.5-1.el7.x86_64 (local)
           Requires: arrow-libs = 4.0.0-1.el7
           Installed: arrow-libs-4.0.1-1.el7.x86_64 (@groonga-centos)
               arrow-libs = 4.0.1-1.el7
 You could try using --skip-broken to work around the problem
 You could try running: rpm -Va --nofiles --nodigest
[vagrant@localhost ~]$ sudo yum remove arrow-libs
Failed to set locale, defaulting to C
Loaded plugins: fastestmirror
Resolving Dependencies
--> Running transaction check
---> Package arrow-libs.x86_64 0:4.0.1-1.el7 will be erased
--> Processing Dependency: libarrow.so.400()(64bit) for package: groonga-libs-11.0.3-1.el7.x86_64
--> Running transaction check
---> Package groonga-libs.x86_64 0:11.0.3-1.el7 will be erased
--> Processing Dependency: groonga-libs = 11.0.3-1.el7 for package: groonga-11.0.3-1.el7.x86_64
--> Processing Dependency: groonga-libs = 11.0.3-1.el7 for package: groonga-plugin-suggest-11.0.3-1.el7.x86_64
--> Processing Dependency: libgroonga.so.0()(64bit) for package: groonga-11.0.3-1.el7.x86_64
--> Processing Dependency: libgroonga.so.0()(64bit) for package: groonga-plugin-suggest-11.0.3-1.el7.x86_64
--> Running transaction check
---> Package groonga.x86_64 0:11.0.3-1.el7 will be erased
---> Package groonga-plugin-suggest.x86_64 0:11.0.3-1.el7 will be erased
--> Finished Dependency Resolution

Dependencies Resolved",True,{}
groonga/groonga,https://github.com/groonga/groonga,1243,2021-07-21T08:56:53Z,2021-07-26T05:21:50Z,2021-07-26T05:22:45Z,CLOSED,False,2,2,1,https://github.com/komainu8,packages yum: add a missing release number,5,[],https://github.com/groonga/groonga/pull/1243,https://github.com/kou,3,https://github.com/groonga/groonga/pull/1243#issuecomment-886313055,"TODO: This is testing now.
Fix mroonga/mroonga#429. Reported by Yuutakasan. Thanks!!!","If there are newer Apache Arrow packages, Groonga package should use the specified Apache Arrow package. (4.0.0 for this case.)",True,{}
groonga/groonga,https://github.com/groonga/groonga,1243,2021-07-21T08:56:53Z,2021-07-26T05:21:50Z,2021-07-26T05:22:45Z,CLOSED,False,2,2,1,https://github.com/komainu8,packages yum: add a missing release number,5,[],https://github.com/groonga/groonga/pull/1243,https://github.com/kou,4,https://github.com/groonga/groonga/pull/1243#issuecomment-886313244,"TODO: This is testing now.
Fix mroonga/mroonga#429. Reported by Yuutakasan. Thanks!!!","If Groonga package always requires the latest Apache Arrow package, this problem will be happen in the future again.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1243,2021-07-21T08:56:53Z,2021-07-26T05:21:50Z,2021-07-26T05:22:45Z,CLOSED,False,2,2,1,https://github.com/komainu8,packages yum: add a missing release number,5,[],https://github.com/groonga/groonga/pull/1243,https://github.com/komainu8,5,https://github.com/groonga/groonga/pull/1243#issuecomment-886380603,"TODO: This is testing now.
Fix mroonga/mroonga#429. Reported by Yuutakasan. Thanks!!!","Ah...
My environment is wrong.
I'm already installed arrow-libs-4.0.1 with groonga-11.0.3 into it.
Currently, we are installed arrow-libs-4.0.1 when we installed Groonga 11.0.3. Because Groonga 11.0.3 is not include #1199.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1243,2021-07-21T08:56:53Z,2021-07-26T05:21:50Z,2021-07-26T05:22:45Z,CLOSED,False,2,2,1,https://github.com/komainu8,packages yum: add a missing release number,5,[],https://github.com/groonga/groonga/pull/1243,https://github.com/kou,6,https://github.com/groonga/groonga/pull/1243#issuecomment-886381313,"TODO: This is testing now.
Fix mroonga/mroonga#429. Reported by Yuutakasan. Thanks!!!",Does it mean that #1199 fixes this?,True,{}
groonga/groonga,https://github.com/groonga/groonga,1243,2021-07-21T08:56:53Z,2021-07-26T05:21:50Z,2021-07-26T05:22:45Z,CLOSED,False,2,2,1,https://github.com/komainu8,packages yum: add a missing release number,5,[],https://github.com/groonga/groonga/pull/1243,https://github.com/komainu8,7,https://github.com/groonga/groonga/pull/1243#issuecomment-886384579,"TODO: This is testing now.
Fix mroonga/mroonga#429. Reported by Yuutakasan. Thanks!!!","Probably.
We success install Groonga even if with out this PR.
$ sudo yum install -y --enablerepo=epel groonga
Failed to set locale, defaulting to C
Loaded plugins: fastestmirror
Loading mirror speeds from cached hostfile
epel/x86_64/metalink                                                                                                        | 5.4 kB  00:00:00     
 * base: ty1.mirror.newmediaexpress.com
 * epel: ftp.yz.yamagata-u.ac.jp
 * extras: ty1.mirror.newmediaexpress.com
 * updates: ty1.mirror.newmediaexpress.com
epel                                                                                                                        | 4.7 kB  00:00:00     
groonga-centos                                                                                                              | 3.0 kB  00:00:00     
(1/4): epel/x86_64/group_gz                                                                                                 |  96 kB  00:00:00     
(2/4): epel/x86_64/updateinfo                                                                                               | 1.0 MB  00:00:00     
(3/4): groonga-centos/7/x86_64/primary_db                                                                                   | 2.6 MB  00:00:00     
epel/x86_64/primary_db         FAILED                                          
https://epel.01link.hk/7/x86_64/repodata/974fd52c8b66c525d9c64b32b8b7b67519c9996ee3d0e8f85bcc23907ceb05a4-primary.sqlite.bz2: [Errno 14] HTTPS Error 404 - Not Found
Trying other mirror.
To address this issue please refer to the below wiki article 

https://wiki.centos.org/yum-errors

If above article doesn't help to resolve this issue please use https://bugs.centos.org/.

(4/4): epel/x86_64/primary_db                                                                                               | 6.9 MB  00:00:01     
Resolving Dependencies
--> Running transaction check
---> Package groonga.x86_64 0:11.0.4-1.el7 will be installed
--> Processing Dependency: groonga-libs = 11.0.4-1.el7 for package: groonga-11.0.4-1.el7.x86_64
--> Processing Dependency: groonga-plugin-suggest = 11.0.4-1.el7 for package: groonga-11.0.4-1.el7.x86_64
--> Processing Dependency: libgroonga.so.0()(64bit) for package: groonga-11.0.4-1.el7.x86_64
--> Processing Dependency: libmsgpackc.so.2()(64bit) for package: groonga-11.0.4-1.el7.x86_64
--> Running transaction check
---> Package groonga-libs.x86_64 0:11.0.4-1.el7 will be installed
--> Processing Dependency: arrow-libs = 4.0.0 for package: groonga-libs-11.0.4-1.el7.x86_64
--> Processing Dependency: libzstd for package: groonga-libs-11.0.4-1.el7.x86_64
--> Processing Dependency: libarrow.so.400()(64bit) for package: groonga-libs-11.0.4-1.el7.x86_64
--> Processing Dependency: libxxhash.so.0()(64bit) for package: groonga-libs-11.0.4-1.el7.x86_64
--> Processing Dependency: libzstd.so.1()(64bit) for package: groonga-libs-11.0.4-1.el7.x86_64
---> Package groonga-plugin-suggest.x86_64 0:11.0.4-1.el7 will be installed
--> Processing Dependency: libevent-2.0.so.5()(64bit) for package: groonga-plugin-suggest-11.0.4-1.el7.x86_64
--> Processing Dependency: libzmq.so.3()(64bit) for package: groonga-plugin-suggest-11.0.4-1.el7.x86_64
---> Package msgpack.x86_64 0:3.1.0-4.el7 will be installed
--> Running transaction check
---> Package arrow-libs.x86_64 0:4.0.0-1.el7 will be installed
--> Processing Dependency: boost169-filesystem for package: arrow-libs-4.0.0-1.el7.x86_64
--> Processing Dependency: boost169-system for package: arrow-libs-4.0.0-1.el7.x86_64
--> Processing Dependency: brotli for package: arrow-libs-4.0.0-1.el7.x86_64
--> Processing Dependency: gflags for package: arrow-libs-4.0.0-1.el7.x86_64
--> Processing Dependency: glog for package: arrow-libs-4.0.0-1.el7.x86_64
--> Processing Dependency: utf8proc for package: arrow-libs-4.0.0-1.el7.x86_64
--> Processing Dependency: libbrotlicommon.so.1()(64bit) for package: arrow-libs-4.0.0-1.el7.x86_64
--> Processing Dependency: libbrotlidec.so.1()(64bit) for package: arrow-libs-4.0.0-1.el7.x86_64
--> Processing Dependency: libbrotlienc.so.1()(64bit) for package: arrow-libs-4.0.0-1.el7.x86_64
--> Processing Dependency: libutf8proc.so.1()(64bit) for package: arrow-libs-4.0.0-1.el7.x86_64
---> Package libevent.x86_64 0:2.0.21-4.el7 will be installed
---> Package libzstd.x86_64 0:1.5.0-1.el7 will be installed
---> Package xxhash-libs.x86_64 0:0.8.0-3.el7 will be installed
---> Package zeromq3.x86_64 0:3.2.5-1.el7 will be installed
--> Processing Dependency: libpgm-5.2.so.0()(64bit) for package: zeromq3-3.2.5-1.el7.x86_64
--> Running transaction check
---> Package boost169-filesystem.x86_64 0:1.69.0-2.el7 will be installed
---> Package boost169-system.x86_64 0:1.69.0-2.el7 will be installed
---> Package brotli.x86_64 0:1.0.7-5.el7 will be installed
---> Package gflags.x86_64 0:2.1.1-6.el7 will be installed
---> Package glog.x86_64 0:0.3.3-8.el7 will be installed
---> Package openpgm.x86_64 0:5.2.122-2.el7 will be installed
---> Package utf8proc.x86_64 0:1.3.1-2.el7 will be installed
--> Finished Dependency Resolution

Dependencies Resolved

===================================================================================================================================================
 Package                                    Arch                       Version                            Repository                          Size
===================================================================================================================================================
Installing:
 groonga                                    x86_64                     11.0.4-1.el7                       groonga-centos                      71 k
Installing for dependencies:
 arrow-libs                                 x86_64                     4.0.0-1.el7                        groonga-centos                     3.5 M
 boost169-filesystem                        x86_64                     1.69.0-2.el7                       epel                                41 k
 boost169-system                            x86_64                     1.69.0-2.el7                       epel                               7.5 k
 brotli                                     x86_64                     1.0.7-5.el7                        epel                               318 k
 gflags                                     x86_64                     2.1.1-6.el7                        epel                                72 k
 glog                                       x86_64                     0.3.3-8.el7                        epel                                57 k
 groonga-libs                               x86_64                     11.0.4-1.el7                       groonga-centos                     2.3 M
 groonga-plugin-suggest                     x86_64                     11.0.4-1.el7                       groonga-centos                      52 k
 libevent                                   x86_64                     2.0.21-4.el7                       base                               214 k
 libzstd                                    x86_64                     1.5.0-1.el7                        epel                               370 k
 msgpack                                    x86_64                     3.1.0-4.el7                        epel                                27 k
 openpgm                                    x86_64                     5.2.122-2.el7                      epel                               171 k
 utf8proc                                   x86_64                     1.3.1-2.el7                        epel                                63 k
 xxhash-libs                                x86_64                     0.8.0-3.el7                        epel                                26 k
 zeromq3                                    x86_64                     3.2.5-1.el7                        epel                               344 k

Transaction Summary
===================================================================================================================================================
Install  1 Package (+15 Dependent packages)

Total download size: 7.6 M
Installed size: 36 M
Downloading packages:
warning: /var/cache/yum/x86_64/7/epel/packages/boost169-filesystem-1.69.0-2.el7.x86_64.rpm: Header V3 RSA/SHA256 Signature, key ID 352c64e5: NOKEY
Public key for boost169-filesystem-1.69.0-2.el7.x86_64.rpm is not installed
(1/16): boost169-filesystem-1.69.0-2.el7.x86_64.rpm                                                                         |  41 kB  00:00:00     
(2/16): boost169-system-1.69.0-2.el7.x86_64.rpm                                                                             | 7.5 kB  00:00:00     
(3/16): brotli-1.0.7-5.el7.x86_64.rpm                                                                                       | 318 kB  00:00:00     
warning: /var/cache/yum/x86_64/7/groonga-centos/packages/arrow-libs-4.0.0-1.el7.x86_64.rpm: Header V4 RSA/SHA256 Signature, key ID 34839225: NOKEY
Public key for arrow-libs-4.0.0-1.el7.x86_64.rpm is not installed
(4/16): arrow-libs-4.0.0-1.el7.x86_64.rpm                                                                                   | 3.5 MB  00:00:00     
(5/16): gflags-2.1.1-6.el7.x86_64.rpm                                                                                       |  72 kB  00:00:00     
(6/16): groonga-11.0.4-1.el7.x86_64.rpm                                                                                     |  71 kB  00:00:00     
(7/16): groonga-plugin-suggest-11.0.4-1.el7.x86_64.rpm                                                                      |  52 kB  00:00:00     
(8/16): glog-0.3.3-8.el7.x86_64.rpm                                                                                         |  57 kB  00:00:00     
(9/16): libevent-2.0.21-4.el7.x86_64.rpm                                                                                    | 214 kB  00:00:00     
(10/16): libzstd-1.5.0-1.el7.x86_64.rpm                                                                                     | 370 kB  00:00:00     
(11/16): msgpack-3.1.0-4.el7.x86_64.rpm                                                                                     |  27 kB  00:00:00     
(12/16): groonga-libs-11.0.4-1.el7.x86_64.rpm                                                                               | 2.3 MB  00:00:00     
(13/16): openpgm-5.2.122-2.el7.x86_64.rpm                                                                                   | 171 kB  00:00:00     
(14/16): utf8proc-1.3.1-2.el7.x86_64.rpm                                                                                    |  63 kB  00:00:00     
(15/16): xxhash-libs-0.8.0-3.el7.x86_64.rpm                                                                                 |  26 kB  00:00:00     
(16/16): zeromq3-3.2.5-1.el7.x86_64.rpm                                                                                     | 344 kB  00:00:00     
---------------------------------------------------------------------------------------------------------------------------------------------------
Total                                                                                                              3.3 MB/s | 7.6 MB  00:00:02     
Retrieving key from file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-7
Importing GPG key 0x352C64E5:
 Userid     : ""Fedora EPEL (7) <epel@fedoraproject.org>""
 Fingerprint: 91e9 7d7c 4a5e 96f1 7f3e 888f 6a2f aea2 352c 64e5
 Package    : epel-release-7-11.noarch (@extras)
 From       : /etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-7
Retrieving key from file:///etc/pki/rpm-gpg/RPM-GPG-KEY-34839225
Importing GPG key 0x34839225:
 Userid     : ""Groonga Key (Groonga Official Signing Key) <packages@groonga.org>""
 Fingerprint: 2701 f317 cfcc cb97 5cad e9c2 624c f774 3483 9225
 Package    : groonga-release-2020.1.29-1.noarch (@/groonga-release-latest.noarch)
 From       : /etc/pki/rpm-gpg/RPM-GPG-KEY-34839225
Retrieving key from file:///etc/pki/rpm-gpg/RPM-GPG-KEY-45499429
Importing GPG key 0x45499429:
 Userid     : ""groonga Key (groonga Official Signing Key) <packages@groonga.org>""
 Fingerprint: c97e 4649 a205 1d0c ea1a 73f9 72a7 496b 4549 9429
 Package    : groonga-release-2020.1.29-1.noarch (@/groonga-release-latest.noarch)
 From       : /etc/pki/rpm-gpg/RPM-GPG-KEY-45499429
Running transaction check
Running transaction test
Transaction test succeeded
Running transaction
  Installing : msgpack-3.1.0-4.el7.x86_64                                                                                                     1/16 
  Installing : boost169-system-1.69.0-2.el7.x86_64                                                                                            2/16 
  Installing : libzstd-1.5.0-1.el7.x86_64                                                                                                     3/16 
  Installing : gflags-2.1.1-6.el7.x86_64                                                                                                      4/16 
  Installing : glog-0.3.3-8.el7.x86_64                                                                                                        5/16 
  Installing : boost169-filesystem-1.69.0-2.el7.x86_64                                                                                        6/16 
  Installing : utf8proc-1.3.1-2.el7.x86_64                                                                                                    7/16 
  Installing : xxhash-libs-0.8.0-3.el7.x86_64                                                                                                 8/16 
  Installing : libevent-2.0.21-4.el7.x86_64                                                                                                   9/16 
  Installing : brotli-1.0.7-5.el7.x86_64                                                                                                     10/16 
  Installing : arrow-libs-4.0.0-1.el7.x86_64                                                                                                 11/16 
  Installing : groonga-libs-11.0.4-1.el7.x86_64                                                                                              12/16 
  Installing : openpgm-5.2.122-2.el7.x86_64                                                                                                  13/16 
  Installing : zeromq3-3.2.5-1.el7.x86_64                                                                                                    14/16 
  Installing : groonga-plugin-suggest-11.0.4-1.el7.x86_64                                                                                    15/16 
  Installing : groonga-11.0.4-1.el7.x86_64                                                                                                   16/16 
  Verifying  : openpgm-5.2.122-2.el7.x86_64                                                                                                   1/16 
  Verifying  : brotli-1.0.7-5.el7.x86_64                                                                                                      2/16 
  Verifying  : glog-0.3.3-8.el7.x86_64                                                                                                        3/16 
  Verifying  : gflags-2.1.1-6.el7.x86_64                                                                                                      4/16 
  Verifying  : boost169-filesystem-1.69.0-2.el7.x86_64                                                                                        5/16 
  Verifying  : libevent-2.0.21-4.el7.x86_64                                                                                                   6/16 
  Verifying  : libzstd-1.5.0-1.el7.x86_64                                                                                                     7/16 
  Verifying  : msgpack-3.1.0-4.el7.x86_64                                                                                                     8/16 
  Verifying  : groonga-plugin-suggest-11.0.4-1.el7.x86_64                                                                                     9/16 
  Verifying  : boost169-system-1.69.0-2.el7.x86_64                                                                                           10/16 
  Verifying  : groonga-libs-11.0.4-1.el7.x86_64                                                                                              11/16 
  Verifying  : zeromq3-3.2.5-1.el7.x86_64                                                                                                    12/16 
  Verifying  : xxhash-libs-0.8.0-3.el7.x86_64                                                                                                13/16 
  Verifying  : utf8proc-1.3.1-2.el7.x86_64                                                                                                   14/16 
  Verifying  : groonga-11.0.4-1.el7.x86_64                                                                                                   15/16 
  Verifying  : arrow-libs-4.0.0-1.el7.x86_64                                                                                                 16/16 

Installed:
  groonga.x86_64 0:11.0.4-1.el7                                                                                                                    

Dependency Installed:
  arrow-libs.x86_64 0:4.0.0-1.el7             boost169-filesystem.x86_64 0:1.69.0-2.el7             boost169-system.x86_64 0:1.69.0-2.el7         
  brotli.x86_64 0:1.0.7-5.el7                 gflags.x86_64 0:2.1.1-6.el7                           glog.x86_64 0:0.3.3-8.el7                     
  groonga-libs.x86_64 0:11.0.4-1.el7          groonga-plugin-suggest.x86_64 0:11.0.4-1.el7          libevent.x86_64 0:2.0.21-4.el7                
  libzstd.x86_64 0:1.5.0-1.el7                msgpack.x86_64 0:3.1.0-4.el7                          openpgm.x86_64 0:5.2.122-2.el7                
  utf8proc.x86_64 0:1.3.1-2.el7               xxhash-libs.x86_64 0:0.8.0-3.el7                      zeromq3.x86_64 0:3.2.5-1.el7                  

Complete!

If this PR is need, Groonga occurs error as a below point, but we success installing Groonga.
--> Processing Dependency: arrow-libs = 4.0.0 for package: groonga-libs-11.0.4-1.el7.x86_64",True,{}
groonga/groonga,https://github.com/groonga/groonga,1243,2021-07-21T08:56:53Z,2021-07-26T05:21:50Z,2021-07-26T05:22:45Z,CLOSED,False,2,2,1,https://github.com/komainu8,packages yum: add a missing release number,5,[],https://github.com/groonga/groonga/pull/1243,https://github.com/kou,8,https://github.com/groonga/groonga/pull/1243#issuecomment-886385630,"TODO: This is testing now.
Fix mroonga/mroonga#429. Reported by Yuutakasan. Thanks!!!","OK.
I close this.
BTW, we need to update Apache Arrow to 4.0.1.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1244,2021-07-26T05:29:13Z,2021-07-26T05:50:15Z,2021-07-26T05:56:43Z,MERGED,True,1,1,1,https://github.com/komainu8,apache-arrow: use 4.0.1,1,[],https://github.com/groonga/groonga/pull/1244,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1244,Update to apache-arrow-4.0.1.,Update to apache-arrow-4.0.1.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1244,2021-07-26T05:29:13Z,2021-07-26T05:50:15Z,2021-07-26T05:56:43Z,MERGED,True,1,1,1,https://github.com/komainu8,apache-arrow: use 4.0.1,1,[],https://github.com/groonga/groonga/pull/1244,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1244#issuecomment-886390431,Update to apache-arrow-4.0.1.,It's the current master not 4.0.1.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1244,2021-07-26T05:29:13Z,2021-07-26T05:50:15Z,2021-07-26T05:56:43Z,MERGED,True,1,1,1,https://github.com/komainu8,apache-arrow: use 4.0.1,1,[],https://github.com/groonga/groonga/pull/1244,https://github.com/kou,3,https://github.com/groonga/groonga/pull/1244#issuecomment-886390827,Update to apache-arrow-4.0.1.,"cd vendor/apache-arrow-source
git fetch --all --prune --tags --force -j$(nproc)
git checkout apache-arrow-4.0.1
cd -
git add vendor/apache-arrow-source",True,{}
groonga/groonga,https://github.com/groonga/groonga,1244,2021-07-26T05:29:13Z,2021-07-26T05:50:15Z,2021-07-26T05:56:43Z,MERGED,True,1,1,1,https://github.com/komainu8,apache-arrow: use 4.0.1,1,[],https://github.com/groonga/groonga/pull/1244,https://github.com/komainu8,4,https://github.com/groonga/groonga/pull/1244#issuecomment-886391405,Update to apache-arrow-4.0.1.,"Oh...Sorry...
I'll fixed it.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1245,2021-07-26T07:29:17Z,2021-07-26T08:33:35Z,2021-07-26T08:33:35Z,MERGED,True,756,652,5,https://github.com/kou,function: add support for object literal in object literal,1,[],https://github.com/groonga/groonga/pull/1245,https://github.com/kou,1,https://github.com/groonga/groonga/pull/1245,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1245,2021-07-26T07:29:17Z,2021-07-26T08:33:35Z,2021-07-26T08:33:35Z,MERGED,True,756,652,5,https://github.com/kou,function: add support for object literal in object literal,1,[],https://github.com/groonga/groonga/pull/1245,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1245#issuecomment-886450725,,Cc: @HashidaTKS,True,{}
groonga/groonga,https://github.com/groonga/groonga,1245,2021-07-26T07:29:17Z,2021-07-26T08:33:35Z,2021-07-26T08:33:35Z,MERGED,True,756,652,5,https://github.com/kou,function: add support for object literal in object literal,1,[],https://github.com/groonga/groonga/pull/1245,https://github.com/kou,3,https://github.com/groonga/groonga/pull/1245#issuecomment-886496148,,"I'll merge this because I want to use this soon.
You can add comments after I merge this.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1246,2021-07-26T08:37:24Z,2021-07-27T19:47:08Z,2021-07-27T19:47:09Z,MERGED,True,276,305,4,https://github.com/kou,function: simplify array literal parsing,1,[],https://github.com/groonga/groonga/pull/1246,https://github.com/kou,1,https://github.com/groonga/groonga/pull/1246,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1246,2021-07-26T08:37:24Z,2021-07-27T19:47:08Z,2021-07-27T19:47:09Z,MERGED,True,276,305,4,https://github.com/kou,function: simplify array literal parsing,1,[],https://github.com/groonga/groonga/pull/1246,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1246#issuecomment-886499010,,Cc: @HashidaTKS,True,{}
groonga/groonga,https://github.com/groonga/groonga,1247,2021-07-28T13:59:50Z,2021-07-29T08:29:55Z,2021-07-29T08:29:55Z,MERGED,True,840,40,2,https://github.com/komainu8,doc news: add news topics for 11.0.5,1,[],https://github.com/groonga/groonga/pull/1247,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1247,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1249,2021-07-29T01:13:52Z,2021-07-29T01:19:14Z,2021-07-29T02:57:00Z,MERGED,True,1,1,1,https://github.com/komainu8,apache-arrow: use 5.0.0,1,[],https://github.com/groonga/groonga/pull/1249,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1249,Update to apache-arrow-5.0.0.,Update to apache-arrow-5.0.0.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1250,2021-07-29T01:14:06Z,,2022-03-15T05:24:16Z,OPEN,False,28,0,1,https://github.com/komainu8,tool: add a tool for updating bundled Apache Arrow,1,[],https://github.com/groonga/groonga/pull/1250,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1250,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1250,2021-07-29T01:14:06Z,,2022-03-15T05:24:16Z,OPEN,False,28,0,1,https://github.com/komainu8,tool: add a tool for updating bundled Apache Arrow,1,[],https://github.com/groonga/groonga/pull/1250,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1250#issuecomment-888726982,,Can we use Makefile (and shell script) like existing make update-mruby and make update-nginx?,True,{}
groonga/groonga,https://github.com/groonga/groonga,1250,2021-07-29T01:14:06Z,,2022-03-15T05:24:16Z,OPEN,False,28,0,1,https://github.com/komainu8,tool: add a tool for updating bundled Apache Arrow,1,[],https://github.com/groonga/groonga/pull/1250,https://github.com/komainu8,3,https://github.com/groonga/groonga/pull/1250#issuecomment-888730088,,"I see.
I'll remake by using Makefile and shell script.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1251,2021-07-29T01:19:20Z,2021-08-02T02:04:56Z,2021-08-02T02:04:58Z,MERGED,True,1128,492,454,https://github.com/komainu8,nginx: update bundles version to 1.21.1,1,[],https://github.com/groonga/groonga/pull/1251,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1251,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1252,2021-07-29T05:19:11Z,2021-08-03T01:15:44Z,2021-08-03T01:15:44Z,MERGED,True,1804,244,72,https://github.com/kou,wal: add support for recovering fixed size column,23,[],https://github.com/groonga/groonga/pull/1252,https://github.com/kou,1,https://github.com/groonga/groonga/pull/1252,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1252,2021-07-29T05:19:11Z,2021-08-03T01:15:44Z,2021-08-03T01:15:44Z,MERGED,True,1804,244,72,https://github.com/kou,wal: add support for recovering fixed size column,23,[],https://github.com/groonga/groonga/pull/1252,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1252#issuecomment-888811293,,Cc: @HashidaTKS,True,{}
groonga/groonga,https://github.com/groonga/groonga,1252,2021-07-29T05:19:11Z,2021-08-03T01:15:44Z,2021-08-03T01:15:44Z,MERGED,True,1804,244,72,https://github.com/kou,wal: add support for recovering fixed size column,23,[],https://github.com/groonga/groonga/pull/1252,https://github.com/kou,3,https://github.com/groonga/groonga/pull/1252#issuecomment-888811588,,I'll add more commits to this and merge this after we release 11.0.5.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1253,2021-07-29T17:39:39Z,2021-07-29T17:57:09Z,2021-07-29T17:57:15Z,MERGED,True,1,1,1,https://github.com/naoa,query_parallel_or: fix a bug that can't use query_options,1,[],https://github.com/groonga/groonga/pull/1253,https://github.com/naoa,1,https://github.com/groonga/groonga/pull/1253,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1253,2021-07-29T17:39:39Z,2021-07-29T17:57:09Z,2021-07-29T17:57:15Z,MERGED,True,1,1,1,https://github.com/naoa,query_parallel_or: fix a bug that can't use query_options,1,[],https://github.com/groonga/groonga/pull/1253,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1253#issuecomment-889346147,,Good catch!,True,{}
groonga/groonga,https://github.com/groonga/groonga,1254,2021-08-05T21:29:44Z,2021-08-27T07:58:52Z,2021-08-27T07:58:56Z,MERGED,True,3,0,1,https://github.com/kou,cache: clear all keys on disable,1,[],https://github.com/groonga/groonga/pull/1254,https://github.com/kou,1,https://github.com/groonga/groonga/pull/1254,"GitHub: ref GH-1224
Reported by higchi. Thanks!!!","GitHub: ref GH-1224
Reported by higchi. Thanks!!!",True,{}
groonga/groonga,https://github.com/groonga/groonga,1254,2021-08-05T21:29:44Z,2021-08-27T07:58:52Z,2021-08-27T07:58:56Z,MERGED,True,3,0,1,https://github.com/kou,cache: clear all keys on disable,1,[],https://github.com/groonga/groonga/pull/1254,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1254#issuecomment-893821966,"GitHub: ref GH-1224
Reported by higchi. Thanks!!!",Cc: @HashidaTKS,True,{}
groonga/groonga,https://github.com/groonga/groonga,1254,2021-08-05T21:29:44Z,2021-08-27T07:58:52Z,2021-08-27T07:58:56Z,MERGED,True,3,0,1,https://github.com/kou,cache: clear all keys on disable,1,[],https://github.com/groonga/groonga/pull/1254,https://github.com/kou,3,https://github.com/groonga/groonga/pull/1254#issuecomment-893823715,"GitHub: ref GH-1224
Reported by higchi. Thanks!!!","This will be safe because we always lock both read and write access to the hash.
(We need a stress test for this.)",True,{}
groonga/groonga,https://github.com/groonga/groonga,1254,2021-08-05T21:29:44Z,2021-08-27T07:58:52Z,2021-08-27T07:58:56Z,MERGED,True,3,0,1,https://github.com/kou,cache: clear all keys on disable,1,[],https://github.com/groonga/groonga/pull/1254,https://github.com/komainu8,4,https://github.com/groonga/groonga/pull/1254#issuecomment-906886593,"GitHub: ref GH-1224
Reported by higchi. Thanks!!!","Ah...Sorry.
Some tests were failed in this PR. I will merge this PR after I will fix them.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1255,2021-08-19T00:43:48Z,2021-08-30T08:28:46Z,2021-08-30T08:28:46Z,MERGED,True,239,37,2,https://github.com/komainu8,doc news: add news topics for 11.0.6,4,[],https://github.com/groonga/groonga/pull/1255,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1255,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1256,2021-08-20T06:15:50Z,2021-08-20T08:27:51Z,2021-08-20T20:01:15Z,MERGED,True,5,1,1,https://github.com/komainu8,grn_ctx_at: add missing lock clear,3,[],https://github.com/groonga/groonga/pull/1256,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1256,"If some threads open the same object around the same time,
threads except for a thread that executes the opening object
at first are waiting for opening the target object.
At this time, threads that are waited for an opening object
take locks, but these locks are not released.
Therefore, these locks remain until Groonga's process is
restarted in the above case.","If some threads open the same object around the same time,
threads except for a thread that executes the opening object
at first are waiting for opening the target object.
At this time, threads that are waited for an opening object
take locks, but these locks are not released.
Therefore, these locks remain until Groonga's process is
restarted in the above case.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1256,2021-08-20T06:15:50Z,2021-08-20T08:27:51Z,2021-08-20T20:01:15Z,MERGED,True,5,1,1,https://github.com/komainu8,grn_ctx_at: add missing lock clear,3,[],https://github.com/groonga/groonga/pull/1256,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1256#issuecomment-902924935,"If some threads open the same object around the same time,
threads except for a thread that executes the opening object
at first are waiting for opening the target object.
At this time, threads that are waited for an opening object
take locks, but these locks are not released.
Therefore, these locks remain until Groonga's process is
restarted in the above case.","https://github.com/groonga/groonga/runs/3380075216?check_suite_focus=true
This breaks reference count mode. We should not unlock when reference count mode and succeeded case.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1257,2021-08-21T06:14:34Z,2021-08-22T20:29:49Z,2021-08-22T20:29:49Z,MERGED,True,6,5,1,https://github.com/komainu8,grn_ctx_at: don't unlock when reference count mode and succeeded case,2,[],https://github.com/groonga/groonga/pull/1257,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1257,"Because if reference count mode and succeeded case, vp->lock unlock
when grn_obj_unlink().","Because if reference count mode and succeeded case, vp->lock unlock
when grn_obj_unlink().",True,{}
groonga/groonga,https://github.com/groonga/groonga,1258,2021-08-24T09:39:28Z,2021-08-25T01:35:33Z,2021-08-25T01:35:52Z,CLOSED,False,1,1,1,https://github.com/komainu8,grn_obj_flush_only_dependent: improve performance,1,[],https://github.com/groonga/groonga/pull/1258,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1258,"TODO:
Add a reason for the change into the commit message.
Test.","TODO:
Add a reason for the change into the commit message.
Test.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1258,2021-08-24T09:39:28Z,2021-08-25T01:35:33Z,2021-08-25T01:35:52Z,CLOSED,False,1,1,1,https://github.com/komainu8,grn_obj_flush_only_dependent: improve performance,1,[],https://github.com/groonga/groonga/pull/1258,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1258#issuecomment-905041470,"TODO:
Add a reason for the change into the commit message.
Test.","This is not acceptable.
Lock is needed for safe WAL clear.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1258,2021-08-24T09:39:28Z,2021-08-25T01:35:33Z,2021-08-25T01:35:52Z,CLOSED,False,1,1,1,https://github.com/komainu8,grn_obj_flush_only_dependent: improve performance,1,[],https://github.com/groonga/groonga/pull/1258,https://github.com/komainu8,3,https://github.com/groonga/groonga/pull/1258#issuecomment-905099702,"TODO:
Add a reason for the change into the commit message.
Test.","This problem has already resolved at 0ca71c1.
Therefore, this is close.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1260,2021-08-30T14:06:10Z,2021-08-30T21:12:44Z,2021-08-30T21:12:49Z,MERGED,True,15,0,5,https://github.com/komainu8,ci: add missing trigger patterns,1,[],https://github.com/groonga/groonga/pull/1260,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1260,Because CI doesn't execute even if we push tags or maintenance branch currently.,Because CI doesn't execute even if we push tags or maintenance branch currently.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1260,2021-08-30T14:06:10Z,2021-08-30T21:12:44Z,2021-08-30T21:12:49Z,MERGED,True,15,0,5,https://github.com/komainu8,ci: add missing trigger patterns,1,[],https://github.com/groonga/groonga/pull/1260,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1260#issuecomment-908701053,Because CI doesn't execute even if we push tags or maintenance branch currently.,"Oh, sorry.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1262,2021-09-02T07:37:40Z,,2022-03-15T05:24:16Z,OPEN,False,450,27,18,https://github.com/komainu8,expr: add support for weight factor,3,[],https://github.com/groonga/groonga/pull/1262,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1262,"Fix #1218
This modification doesn't operate right at all yet...","Fix #1218
This modification doesn't operate right at all yet...",True,{}
groonga/groonga,https://github.com/groonga/groonga,1263,2021-09-02T21:18:19Z,2021-11-15T20:35:55Z,2021-11-15T20:36:00Z,MERGED,True,183,52,2,https://github.com/HashidaTKS,arrow: use dictionary array for reference text column,10,[],https://github.com/groonga/groonga/pull/1263,https://github.com/HashidaTKS,1,https://github.com/groonga/groonga/pull/1263,"OverView
Make StreamWriter write string type values as string type DictionaryArray.
Writing DictionaryArray on FileDumper is not supported because arrow::FileWriter does not support dictionary replacement. For writing DictionaryArray on FileDumper, we should create a single dictionary array for a filed including the case of using delta dictionaries, but it may cause memory exhaustion or exceeding a ArrowArray length limitation and so on when the dictionary is large.
https://arrow.apache.org/docs/format/Columnar.html#ipc-file-format
https://arrow.apache.org/docs/format/Columnar.html#array-lengths
Behavior
StreamWriter writes string type values as string type DictionaryArray.
Other type values are written as before because changing to write these types as DictionaryArray  does not improve performance/data size.
In order to avoid memory exhaustion or exceeding a ArrowArray length limitation and so on when the dictionary becames large, DictionaryBuilder::ResetFull() is executed when the dictionary length exceeds a certain size (10000). This size is not set on a special basis. It is set on the assumption that ten times the record batch length (1000) is sufficient.
Test
Test data
I have created a test file like a dump result (testdata.grn) from the attached python file.
(I wanted to attach a compressed dump file but it was over the github size limitation...)
create_test_data.zip
I have compared performance before and after change.
Table records: 1,000,000
high_cardinality column values:  Generated based on random values from 0 to 500,000
high_cardinality_vector column values:  Generated based on random values from 0 to 500,000
middle_cardinality column values:  Generated based on random values from 0 to 50,000
middle_cardinality_vector column values:  Generated based on random values from 0 to 50,000
low_cardinality column values:  Generated based on random values from 0 to 5,000
low_cardinality_vector column values:  Generated based on random values from 0 to 5,000
Each column is a reference column.
Result

Before log
2021-09-11 21:19:11.791000|000000FCF11FFCD0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=high_cardinality&cache=no
2021-09-11 21:19:11.791000|000000FCF11FFCD0|:000000000000000 select(1000000)
2021-09-11 21:19:12.086000|000000FCF11FFCD0|:000000295000000 output(1000000)
2021-09-11 21:19:12.090000|000000FCF11FFCD0|:000000299000000 send(25946284): 25946284/25946284
2021-09-11 21:19:12.090000|000000FCF11FFCD0|<000000299000000 rc=0
2021-09-11 21:19:16.994000|000000FCF11FFCD0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=high_cardinality_vector&cache=no
2021-09-11 21:19:16.995000|000000FCF11FFCD0|:000000001000000 select(1000000)
2021-09-11 21:19:17.791000|000000FCF11FFCD0|:000000797000000 output(1000000)
2021-09-11 21:19:17.807000|000000FCF11FFCD0|:000000813000000 send(81557012): 81557012/81557012
2021-09-11 21:19:17.807000|000000FCF11FFCD0|<000000813000000 rc=0
2021-09-11 21:19:21.472000|000000FCF11FFCD0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=middle_cardinality&cache=no
2021-09-11 21:19:21.472000|000000FCF11FFCD0|:000000000000000 select(1000000)
2021-09-11 21:19:21.719000|000000FCF11FFCD0|:000000247000000 output(1000000)
2021-09-11 21:19:21.724000|000000FCF11FFCD0|:000000252000000 send(24945036): 24945036/24945036
2021-09-11 21:19:21.724000|000000FCF11FFCD0|<000000252000000 rc=0
2021-09-11 21:19:26.373000|000000FCF11FFCD0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=middle_cardinality_vector&cache=no
2021-09-11 21:19:26.373000|000000FCF11FFCD0|:000000000000000 select(1000000)
2021-09-11 21:19:26.911000|000000FCF11FFCD0|:000000538000000 output(1000000)
2021-09-11 21:19:26.927000|000000FCF11FFCD0|:000000554000000 send(78555436): 78555436/78555436
2021-09-11 21:19:26.927000|000000FCF11FFCD0|<000000554000000 rc=0
2021-09-11 21:19:30.030000|000000FCF11FFCD0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=low_cardinality&cache=no
2021-09-11 21:19:30.030000|000000FCF11FFCD0|:000000000000000 select(1000000)
2021-09-11 21:19:30.218000|000000FCF11FFCD0|:000000188000000 output(1000000)
2021-09-11 21:19:30.223000|000000FCF11FFCD0|:000000193000000 send(23946460): 23946460/23946460
2021-09-11 21:19:30.223000|000000FCF11FFCD0|<000000193000000 rc=0
2021-09-11 21:19:33.923000|000000FCF11FFCD0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=low_cardinality_vector&cache=no
2021-09-11 21:19:33.923000|000000FCF11FFCD0|:000000000000000 select(1000000)
2021-09-11 21:19:34.347000|000000FCF11FFCD0|:000000424000000 output(1000000)
2021-09-11 21:19:34.364000|000000FCF11FFCD0|:000000441000000 send(75557372): 75557372/75557372
2021-09-11 21:19:34.364000|000000FCF11FFCD0|<000000441000000 rc=0
2021-09-11 22:26:00.101000|000000210E2FF6C0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=middle_cardinality&sort_keys=middle_cardinality&cache=no
2021-09-11 22:26:00.101000|000000210E2FF6C0|:000000000000000 select(1000000)
2021-09-11 22:26:00.401000|000000210E2FF6C0|:000000300000000 sort(1000000): middle_cardinality
2021-09-11 22:26:00.765000|000000210E2FF6C0|:000000664000000 output(1000000)
2021-09-11 22:26:00.780000|000000210E2FF6C0|:000000679000000 send(24944732): 24944732/24944732
2021-09-11 22:26:00.780000|000000210E2FF6C0|<000000679000000 rc=0



After log
2021-09-11 21:12:23.373000|000000ACD22FF6A0|<000007081000000 rc=0
2021-09-11 21:12:27.793000|000000ACD23FFCA0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=high_cardinality&cache=no
2021-09-11 21:12:27.794000|000000ACD23FFCA0|:000000001000000 select(1000000)
2021-09-11 21:12:28.225000|000000ACD23FFCA0|:000000432000000 output(1000000)
2021-09-11 21:12:28.231000|000000ACD23FFCA0|:000000438000000 send(29844604): 29844604/29844604
2021-09-11 21:12:28.231000|000000ACD23FFCA0|<000000438000000 rc=0
2021-09-11 21:12:32.766000|000000ACD20FFD40|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=high_cardinality_vector&cache=no
2021-09-11 21:12:32.767000|000000ACD20FFD40|:000000001000000 select(1000000)
2021-09-11 21:12:33.889000|000000ACD20FFD40|:000001123000000 output(1000000)
2021-09-11 21:12:33.911000|000000ACD20FFD40|:000001145000000 send(92777708): 92777708/92777708
2021-09-11 21:12:33.911000|000000ACD20FFD40|<000001145000000 rc=0
2021-09-11 21:12:37.119000|000000ACD21FF780|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=middle_cardinality&cache=no
2021-09-11 21:12:37.120000|000000ACD21FF780|:000000001000000 select(1000000)
2021-09-11 21:12:37.503000|000000ACD21FF780|:000000384000000 output(1000000)
2021-09-11 21:12:37.510000|000000ACD21FF780|:000000391000000 send(26521796): 26521796/26521796
2021-09-11 21:12:37.511000|000000ACD21FF780|<000000392000000 rc=0
2021-09-11 21:12:41.417000|000000ACD22FF6A0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=middle_cardinality_vector&cache=no
2021-09-11 21:12:41.417000|000000ACD22FF6A0|:000000000000000 select(1000000)
2021-09-11 21:12:42.404000|000000ACD22FF6A0|:000000987000000 output(1000000)
2021-09-11 21:12:42.428000|000000ACD22FF6A0|:000001011000000 send(82308484): 82308484/82308484
2021-09-11 21:12:42.428000|000000ACD22FF6A0|<000001011000000 rc=0
2021-09-11 21:12:45.408000|000000ACD23FFCA0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=low_cardinality&cache=no
2021-09-11 21:12:45.408000|000000ACD23FFCA0|:000000000000000 select(1000000)
2021-09-11 21:12:45.684000|000000ACD23FFCA0|:000000276000000 output(1000000)
2021-09-11 21:12:45.686000|000000ACD23FFCA0|:000000278000000 send(4267683): 4267683/4267683
2021-09-11 21:12:45.686000|000000ACD23FFCA0|<000000278000000 rc=0
2021-09-11 21:12:49.656000|000000ACD20FFD40|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=low_cardinality_vector&cache=no
2021-09-11 21:12:49.656000|000000ACD20FFD40|:000000000000000 select(1000000)
2021-09-11 21:12:50.263000|000000ACD20FFD40|:000000607000000 output(1000000)
2021-09-11 21:12:50.267000|000000ACD20FFD40|:000000611000000 send(16318244): 16318244/16318244
2021-09-11 21:12:50.267000|000000ACD20FFD40|<000000611000000 rc=0
2021-09-11 22:37:19.654000|000000D5B18FF6C0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=middle_cardinality&sort_keys=middle_cardinality&cache=no
2021-09-11 22:37:19.654000|000000D5B18FF6C0|:000000000000000 select(1000000)
2021-09-11 22:37:19.873000|000000D5B18FF6C0|:000000219000000 sort(1000000): middle_cardinality
2021-09-11 22:37:20.236000|000000D5B18FF6C0|:000000582000000 output(1000000)
2021-09-11 22:37:20.240000|000000D5B18FF6C0|:000000586000000 send(5569875): 5569875/5569875
2021-09-11 22:37:20.240000|000000D5B18FF6C0|<000000586000000 rc=0


Summary



Output data (output column)
Before data size(byte)
After data size(byte)
Before elapsed time(sec)
After elapsed time(sec)




high_cardinality
25,946,284
29,844,604
0.3
0.44


high_cardinality_vector
81,557,012
92,777,708
0.81
1.15


middle_cardinality
24,945,036
26,521,796
0.25
0.392


middle_cardinality(sorted)
24,944,732
5,569,875
0.68
0.586


middle_cardinality_vector
78,555,436
82,308,484
0.55
1.011


low_cardinality
23,946,460
4,267,683
0.19
0.278


low_cardinality_vector
75,557,372
16,318,244
0.44
0.611



Note: The error may be large because they are executed only once.
The higher the cardinality become, the bigger the data size become than before.
This is expected behavior.
DictionaryArray just increases data size for indices if there is no duplicate data.
When the output data is sorted or the cardinality is low, the data size is smaller than before.
This is also expected behavior.
In these test cases, the elapsed time is always worsen because additional computing is required.
For cases middle_cardinality(sorted), low_cardinality and low_cardinality_vector, it may be shorter than before when IO is a bottleneck because the data size is smaller than before.
Others
I would like you to merge this PR after a new version of apache arrow with the following PR is merged is released.
apache/arrow#10990
Consideration

It might be better to create a new argument for the select command and so on or a new environment variable to specify the output type of arrow array (DictionaryArray or StringArray).

This is discussed at #1181, but looking at the test result, I think it is better to reconsider this.


It might be better to create a new environment variable to specity dictionary_length_threshold
There might be some other faster way to send delta dictionaries","OverView
Make StreamWriter write string type values as string type DictionaryArray.
Writing DictionaryArray on FileDumper is not supported because arrow::FileWriter does not support dictionary replacement. For writing DictionaryArray on FileDumper, we should create a single dictionary array for a filed including the case of using delta dictionaries, but it may cause memory exhaustion or exceeding a ArrowArray length limitation and so on when the dictionary is large.
https://arrow.apache.org/docs/format/Columnar.html#ipc-file-format
https://arrow.apache.org/docs/format/Columnar.html#array-lengths
Behavior
StreamWriter writes string type values as string type DictionaryArray.
Other type values are written as before because changing to write these types as DictionaryArray  does not improve performance/data size.
In order to avoid memory exhaustion or exceeding a ArrowArray length limitation and so on when the dictionary becames large, DictionaryBuilder::ResetFull() is executed when the dictionary length exceeds a certain size (10000). This size is not set on a special basis. It is set on the assumption that ten times the record batch length (1000) is sufficient.
Test
Test data
I have created a test file like a dump result (testdata.grn) from the attached python file.
(I wanted to attach a compressed dump file but it was over the github size limitation...)
create_test_data.zip
I have compared performance before and after change.
Table records: 1,000,000
high_cardinality column values:  Generated based on random values from 0 to 500,000
high_cardinality_vector column values:  Generated based on random values from 0 to 500,000
middle_cardinality column values:  Generated based on random values from 0 to 50,000
middle_cardinality_vector column values:  Generated based on random values from 0 to 50,000
low_cardinality column values:  Generated based on random values from 0 to 5,000
low_cardinality_vector column values:  Generated based on random values from 0 to 5,000
Each column is a reference column.
Result

Before log
2021-09-11 21:19:11.791000|000000FCF11FFCD0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=high_cardinality&cache=no
2021-09-11 21:19:11.791000|000000FCF11FFCD0|:000000000000000 select(1000000)
2021-09-11 21:19:12.086000|000000FCF11FFCD0|:000000295000000 output(1000000)
2021-09-11 21:19:12.090000|000000FCF11FFCD0|:000000299000000 send(25946284): 25946284/25946284
2021-09-11 21:19:12.090000|000000FCF11FFCD0|<000000299000000 rc=0
2021-09-11 21:19:16.994000|000000FCF11FFCD0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=high_cardinality_vector&cache=no
2021-09-11 21:19:16.995000|000000FCF11FFCD0|:000000001000000 select(1000000)
2021-09-11 21:19:17.791000|000000FCF11FFCD0|:000000797000000 output(1000000)
2021-09-11 21:19:17.807000|000000FCF11FFCD0|:000000813000000 send(81557012): 81557012/81557012
2021-09-11 21:19:17.807000|000000FCF11FFCD0|<000000813000000 rc=0
2021-09-11 21:19:21.472000|000000FCF11FFCD0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=middle_cardinality&cache=no
2021-09-11 21:19:21.472000|000000FCF11FFCD0|:000000000000000 select(1000000)
2021-09-11 21:19:21.719000|000000FCF11FFCD0|:000000247000000 output(1000000)
2021-09-11 21:19:21.724000|000000FCF11FFCD0|:000000252000000 send(24945036): 24945036/24945036
2021-09-11 21:19:21.724000|000000FCF11FFCD0|<000000252000000 rc=0
2021-09-11 21:19:26.373000|000000FCF11FFCD0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=middle_cardinality_vector&cache=no
2021-09-11 21:19:26.373000|000000FCF11FFCD0|:000000000000000 select(1000000)
2021-09-11 21:19:26.911000|000000FCF11FFCD0|:000000538000000 output(1000000)
2021-09-11 21:19:26.927000|000000FCF11FFCD0|:000000554000000 send(78555436): 78555436/78555436
2021-09-11 21:19:26.927000|000000FCF11FFCD0|<000000554000000 rc=0
2021-09-11 21:19:30.030000|000000FCF11FFCD0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=low_cardinality&cache=no
2021-09-11 21:19:30.030000|000000FCF11FFCD0|:000000000000000 select(1000000)
2021-09-11 21:19:30.218000|000000FCF11FFCD0|:000000188000000 output(1000000)
2021-09-11 21:19:30.223000|000000FCF11FFCD0|:000000193000000 send(23946460): 23946460/23946460
2021-09-11 21:19:30.223000|000000FCF11FFCD0|<000000193000000 rc=0
2021-09-11 21:19:33.923000|000000FCF11FFCD0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=low_cardinality_vector&cache=no
2021-09-11 21:19:33.923000|000000FCF11FFCD0|:000000000000000 select(1000000)
2021-09-11 21:19:34.347000|000000FCF11FFCD0|:000000424000000 output(1000000)
2021-09-11 21:19:34.364000|000000FCF11FFCD0|:000000441000000 send(75557372): 75557372/75557372
2021-09-11 21:19:34.364000|000000FCF11FFCD0|<000000441000000 rc=0
2021-09-11 22:26:00.101000|000000210E2FF6C0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=middle_cardinality&sort_keys=middle_cardinality&cache=no
2021-09-11 22:26:00.101000|000000210E2FF6C0|:000000000000000 select(1000000)
2021-09-11 22:26:00.401000|000000210E2FF6C0|:000000300000000 sort(1000000): middle_cardinality
2021-09-11 22:26:00.765000|000000210E2FF6C0|:000000664000000 output(1000000)
2021-09-11 22:26:00.780000|000000210E2FF6C0|:000000679000000 send(24944732): 24944732/24944732
2021-09-11 22:26:00.780000|000000210E2FF6C0|<000000679000000 rc=0



After log
2021-09-11 21:12:23.373000|000000ACD22FF6A0|<000007081000000 rc=0
2021-09-11 21:12:27.793000|000000ACD23FFCA0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=high_cardinality&cache=no
2021-09-11 21:12:27.794000|000000ACD23FFCA0|:000000001000000 select(1000000)
2021-09-11 21:12:28.225000|000000ACD23FFCA0|:000000432000000 output(1000000)
2021-09-11 21:12:28.231000|000000ACD23FFCA0|:000000438000000 send(29844604): 29844604/29844604
2021-09-11 21:12:28.231000|000000ACD23FFCA0|<000000438000000 rc=0
2021-09-11 21:12:32.766000|000000ACD20FFD40|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=high_cardinality_vector&cache=no
2021-09-11 21:12:32.767000|000000ACD20FFD40|:000000001000000 select(1000000)
2021-09-11 21:12:33.889000|000000ACD20FFD40|:000001123000000 output(1000000)
2021-09-11 21:12:33.911000|000000ACD20FFD40|:000001145000000 send(92777708): 92777708/92777708
2021-09-11 21:12:33.911000|000000ACD20FFD40|<000001145000000 rc=0
2021-09-11 21:12:37.119000|000000ACD21FF780|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=middle_cardinality&cache=no
2021-09-11 21:12:37.120000|000000ACD21FF780|:000000001000000 select(1000000)
2021-09-11 21:12:37.503000|000000ACD21FF780|:000000384000000 output(1000000)
2021-09-11 21:12:37.510000|000000ACD21FF780|:000000391000000 send(26521796): 26521796/26521796
2021-09-11 21:12:37.511000|000000ACD21FF780|<000000392000000 rc=0
2021-09-11 21:12:41.417000|000000ACD22FF6A0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=middle_cardinality_vector&cache=no
2021-09-11 21:12:41.417000|000000ACD22FF6A0|:000000000000000 select(1000000)
2021-09-11 21:12:42.404000|000000ACD22FF6A0|:000000987000000 output(1000000)
2021-09-11 21:12:42.428000|000000ACD22FF6A0|:000001011000000 send(82308484): 82308484/82308484
2021-09-11 21:12:42.428000|000000ACD22FF6A0|<000001011000000 rc=0
2021-09-11 21:12:45.408000|000000ACD23FFCA0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=low_cardinality&cache=no
2021-09-11 21:12:45.408000|000000ACD23FFCA0|:000000000000000 select(1000000)
2021-09-11 21:12:45.684000|000000ACD23FFCA0|:000000276000000 output(1000000)
2021-09-11 21:12:45.686000|000000ACD23FFCA0|:000000278000000 send(4267683): 4267683/4267683
2021-09-11 21:12:45.686000|000000ACD23FFCA0|<000000278000000 rc=0
2021-09-11 21:12:49.656000|000000ACD20FFD40|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=low_cardinality_vector&cache=no
2021-09-11 21:12:49.656000|000000ACD20FFD40|:000000000000000 select(1000000)
2021-09-11 21:12:50.263000|000000ACD20FFD40|:000000607000000 output(1000000)
2021-09-11 21:12:50.267000|000000ACD20FFD40|:000000611000000 send(16318244): 16318244/16318244
2021-09-11 21:12:50.267000|000000ACD20FFD40|<000000611000000 rc=0
2021-09-11 22:37:19.654000|000000D5B18FF6C0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=middle_cardinality&sort_keys=middle_cardinality&cache=no
2021-09-11 22:37:19.654000|000000D5B18FF6C0|:000000000000000 select(1000000)
2021-09-11 22:37:19.873000|000000D5B18FF6C0|:000000219000000 sort(1000000): middle_cardinality
2021-09-11 22:37:20.236000|000000D5B18FF6C0|:000000582000000 output(1000000)
2021-09-11 22:37:20.240000|000000D5B18FF6C0|:000000586000000 send(5569875): 5569875/5569875
2021-09-11 22:37:20.240000|000000D5B18FF6C0|<000000586000000 rc=0


Summary



Output data (output column)
Before data size(byte)
After data size(byte)
Before elapsed time(sec)
After elapsed time(sec)




high_cardinality
25,946,284
29,844,604
0.3
0.44


high_cardinality_vector
81,557,012
92,777,708
0.81
1.15


middle_cardinality
24,945,036
26,521,796
0.25
0.392


middle_cardinality(sorted)
24,944,732
5,569,875
0.68
0.586


middle_cardinality_vector
78,555,436
82,308,484
0.55
1.011


low_cardinality
23,946,460
4,267,683
0.19
0.278


low_cardinality_vector
75,557,372
16,318,244
0.44
0.611



Note: The error may be large because they are executed only once.
The higher the cardinality become, the bigger the data size become than before.
This is expected behavior.
DictionaryArray just increases data size for indices if there is no duplicate data.
When the output data is sorted or the cardinality is low, the data size is smaller than before.
This is also expected behavior.
In these test cases, the elapsed time is always worsen because additional computing is required.
For cases middle_cardinality(sorted), low_cardinality and low_cardinality_vector, it may be shorter than before when IO is a bottleneck because the data size is smaller than before.
Others
I would like you to merge this PR after a new version of apache arrow with the following PR is merged is released.
apache/arrow#10990
Consideration

It might be better to create a new argument for the select command and so on or a new environment variable to specify the output type of arrow array (DictionaryArray or StringArray).

This is discussed at #1181, but looking at the test result, I think it is better to reconsider this.


It might be better to create a new environment variable to specity dictionary_length_threshold
There might be some other faster way to send delta dictionaries",True,{}
groonga/groonga,https://github.com/groonga/groonga,1263,2021-09-02T21:18:19Z,2021-11-15T20:35:55Z,2021-11-15T20:36:00Z,MERGED,True,183,52,2,https://github.com/HashidaTKS,arrow: use dictionary array for reference text column,10,[],https://github.com/groonga/groonga/pull/1263,https://github.com/HashidaTKS,2,https://github.com/groonga/groonga/pull/1263#issuecomment-917605648,"OverView
Make StreamWriter write string type values as string type DictionaryArray.
Writing DictionaryArray on FileDumper is not supported because arrow::FileWriter does not support dictionary replacement. For writing DictionaryArray on FileDumper, we should create a single dictionary array for a filed including the case of using delta dictionaries, but it may cause memory exhaustion or exceeding a ArrowArray length limitation and so on when the dictionary is large.
https://arrow.apache.org/docs/format/Columnar.html#ipc-file-format
https://arrow.apache.org/docs/format/Columnar.html#array-lengths
Behavior
StreamWriter writes string type values as string type DictionaryArray.
Other type values are written as before because changing to write these types as DictionaryArray  does not improve performance/data size.
In order to avoid memory exhaustion or exceeding a ArrowArray length limitation and so on when the dictionary becames large, DictionaryBuilder::ResetFull() is executed when the dictionary length exceeds a certain size (10000). This size is not set on a special basis. It is set on the assumption that ten times the record batch length (1000) is sufficient.
Test
Test data
I have created a test file like a dump result (testdata.grn) from the attached python file.
(I wanted to attach a compressed dump file but it was over the github size limitation...)
create_test_data.zip
I have compared performance before and after change.
Table records: 1,000,000
high_cardinality column values:  Generated based on random values from 0 to 500,000
high_cardinality_vector column values:  Generated based on random values from 0 to 500,000
middle_cardinality column values:  Generated based on random values from 0 to 50,000
middle_cardinality_vector column values:  Generated based on random values from 0 to 50,000
low_cardinality column values:  Generated based on random values from 0 to 5,000
low_cardinality_vector column values:  Generated based on random values from 0 to 5,000
Each column is a reference column.
Result

Before log
2021-09-11 21:19:11.791000|000000FCF11FFCD0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=high_cardinality&cache=no
2021-09-11 21:19:11.791000|000000FCF11FFCD0|:000000000000000 select(1000000)
2021-09-11 21:19:12.086000|000000FCF11FFCD0|:000000295000000 output(1000000)
2021-09-11 21:19:12.090000|000000FCF11FFCD0|:000000299000000 send(25946284): 25946284/25946284
2021-09-11 21:19:12.090000|000000FCF11FFCD0|<000000299000000 rc=0
2021-09-11 21:19:16.994000|000000FCF11FFCD0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=high_cardinality_vector&cache=no
2021-09-11 21:19:16.995000|000000FCF11FFCD0|:000000001000000 select(1000000)
2021-09-11 21:19:17.791000|000000FCF11FFCD0|:000000797000000 output(1000000)
2021-09-11 21:19:17.807000|000000FCF11FFCD0|:000000813000000 send(81557012): 81557012/81557012
2021-09-11 21:19:17.807000|000000FCF11FFCD0|<000000813000000 rc=0
2021-09-11 21:19:21.472000|000000FCF11FFCD0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=middle_cardinality&cache=no
2021-09-11 21:19:21.472000|000000FCF11FFCD0|:000000000000000 select(1000000)
2021-09-11 21:19:21.719000|000000FCF11FFCD0|:000000247000000 output(1000000)
2021-09-11 21:19:21.724000|000000FCF11FFCD0|:000000252000000 send(24945036): 24945036/24945036
2021-09-11 21:19:21.724000|000000FCF11FFCD0|<000000252000000 rc=0
2021-09-11 21:19:26.373000|000000FCF11FFCD0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=middle_cardinality_vector&cache=no
2021-09-11 21:19:26.373000|000000FCF11FFCD0|:000000000000000 select(1000000)
2021-09-11 21:19:26.911000|000000FCF11FFCD0|:000000538000000 output(1000000)
2021-09-11 21:19:26.927000|000000FCF11FFCD0|:000000554000000 send(78555436): 78555436/78555436
2021-09-11 21:19:26.927000|000000FCF11FFCD0|<000000554000000 rc=0
2021-09-11 21:19:30.030000|000000FCF11FFCD0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=low_cardinality&cache=no
2021-09-11 21:19:30.030000|000000FCF11FFCD0|:000000000000000 select(1000000)
2021-09-11 21:19:30.218000|000000FCF11FFCD0|:000000188000000 output(1000000)
2021-09-11 21:19:30.223000|000000FCF11FFCD0|:000000193000000 send(23946460): 23946460/23946460
2021-09-11 21:19:30.223000|000000FCF11FFCD0|<000000193000000 rc=0
2021-09-11 21:19:33.923000|000000FCF11FFCD0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=low_cardinality_vector&cache=no
2021-09-11 21:19:33.923000|000000FCF11FFCD0|:000000000000000 select(1000000)
2021-09-11 21:19:34.347000|000000FCF11FFCD0|:000000424000000 output(1000000)
2021-09-11 21:19:34.364000|000000FCF11FFCD0|:000000441000000 send(75557372): 75557372/75557372
2021-09-11 21:19:34.364000|000000FCF11FFCD0|<000000441000000 rc=0
2021-09-11 22:26:00.101000|000000210E2FF6C0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=middle_cardinality&sort_keys=middle_cardinality&cache=no
2021-09-11 22:26:00.101000|000000210E2FF6C0|:000000000000000 select(1000000)
2021-09-11 22:26:00.401000|000000210E2FF6C0|:000000300000000 sort(1000000): middle_cardinality
2021-09-11 22:26:00.765000|000000210E2FF6C0|:000000664000000 output(1000000)
2021-09-11 22:26:00.780000|000000210E2FF6C0|:000000679000000 send(24944732): 24944732/24944732
2021-09-11 22:26:00.780000|000000210E2FF6C0|<000000679000000 rc=0



After log
2021-09-11 21:12:23.373000|000000ACD22FF6A0|<000007081000000 rc=0
2021-09-11 21:12:27.793000|000000ACD23FFCA0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=high_cardinality&cache=no
2021-09-11 21:12:27.794000|000000ACD23FFCA0|:000000001000000 select(1000000)
2021-09-11 21:12:28.225000|000000ACD23FFCA0|:000000432000000 output(1000000)
2021-09-11 21:12:28.231000|000000ACD23FFCA0|:000000438000000 send(29844604): 29844604/29844604
2021-09-11 21:12:28.231000|000000ACD23FFCA0|<000000438000000 rc=0
2021-09-11 21:12:32.766000|000000ACD20FFD40|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=high_cardinality_vector&cache=no
2021-09-11 21:12:32.767000|000000ACD20FFD40|:000000001000000 select(1000000)
2021-09-11 21:12:33.889000|000000ACD20FFD40|:000001123000000 output(1000000)
2021-09-11 21:12:33.911000|000000ACD20FFD40|:000001145000000 send(92777708): 92777708/92777708
2021-09-11 21:12:33.911000|000000ACD20FFD40|<000001145000000 rc=0
2021-09-11 21:12:37.119000|000000ACD21FF780|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=middle_cardinality&cache=no
2021-09-11 21:12:37.120000|000000ACD21FF780|:000000001000000 select(1000000)
2021-09-11 21:12:37.503000|000000ACD21FF780|:000000384000000 output(1000000)
2021-09-11 21:12:37.510000|000000ACD21FF780|:000000391000000 send(26521796): 26521796/26521796
2021-09-11 21:12:37.511000|000000ACD21FF780|<000000392000000 rc=0
2021-09-11 21:12:41.417000|000000ACD22FF6A0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=middle_cardinality_vector&cache=no
2021-09-11 21:12:41.417000|000000ACD22FF6A0|:000000000000000 select(1000000)
2021-09-11 21:12:42.404000|000000ACD22FF6A0|:000000987000000 output(1000000)
2021-09-11 21:12:42.428000|000000ACD22FF6A0|:000001011000000 send(82308484): 82308484/82308484
2021-09-11 21:12:42.428000|000000ACD22FF6A0|<000001011000000 rc=0
2021-09-11 21:12:45.408000|000000ACD23FFCA0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=low_cardinality&cache=no
2021-09-11 21:12:45.408000|000000ACD23FFCA0|:000000000000000 select(1000000)
2021-09-11 21:12:45.684000|000000ACD23FFCA0|:000000276000000 output(1000000)
2021-09-11 21:12:45.686000|000000ACD23FFCA0|:000000278000000 send(4267683): 4267683/4267683
2021-09-11 21:12:45.686000|000000ACD23FFCA0|<000000278000000 rc=0
2021-09-11 21:12:49.656000|000000ACD20FFD40|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=low_cardinality_vector&cache=no
2021-09-11 21:12:49.656000|000000ACD20FFD40|:000000000000000 select(1000000)
2021-09-11 21:12:50.263000|000000ACD20FFD40|:000000607000000 output(1000000)
2021-09-11 21:12:50.267000|000000ACD20FFD40|:000000611000000 send(16318244): 16318244/16318244
2021-09-11 21:12:50.267000|000000ACD20FFD40|<000000611000000 rc=0
2021-09-11 22:37:19.654000|000000D5B18FF6C0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=middle_cardinality&sort_keys=middle_cardinality&cache=no
2021-09-11 22:37:19.654000|000000D5B18FF6C0|:000000000000000 select(1000000)
2021-09-11 22:37:19.873000|000000D5B18FF6C0|:000000219000000 sort(1000000): middle_cardinality
2021-09-11 22:37:20.236000|000000D5B18FF6C0|:000000582000000 output(1000000)
2021-09-11 22:37:20.240000|000000D5B18FF6C0|:000000586000000 send(5569875): 5569875/5569875
2021-09-11 22:37:20.240000|000000D5B18FF6C0|<000000586000000 rc=0


Summary



Output data (output column)
Before data size(byte)
After data size(byte)
Before elapsed time(sec)
After elapsed time(sec)




high_cardinality
25,946,284
29,844,604
0.3
0.44


high_cardinality_vector
81,557,012
92,777,708
0.81
1.15


middle_cardinality
24,945,036
26,521,796
0.25
0.392


middle_cardinality(sorted)
24,944,732
5,569,875
0.68
0.586


middle_cardinality_vector
78,555,436
82,308,484
0.55
1.011


low_cardinality
23,946,460
4,267,683
0.19
0.278


low_cardinality_vector
75,557,372
16,318,244
0.44
0.611



Note: The error may be large because they are executed only once.
The higher the cardinality become, the bigger the data size become than before.
This is expected behavior.
DictionaryArray just increases data size for indices if there is no duplicate data.
When the output data is sorted or the cardinality is low, the data size is smaller than before.
This is also expected behavior.
In these test cases, the elapsed time is always worsen because additional computing is required.
For cases middle_cardinality(sorted), low_cardinality and low_cardinality_vector, it may be shorter than before when IO is a bottleneck because the data size is smaller than before.
Others
I would like you to merge this PR after a new version of apache arrow with the following PR is merged is released.
apache/arrow#10990
Consideration

It might be better to create a new argument for the select command and so on or a new environment variable to specify the output type of arrow array (DictionaryArray or StringArray).

This is discussed at #1181, but looking at the test result, I think it is better to reconsider this.


It might be better to create a new environment variable to specity dictionary_length_threshold
There might be some other faster way to send delta dictionaries","@kou
Could you please review this when you have time?",True,{}
groonga/groonga,https://github.com/groonga/groonga,1263,2021-09-02T21:18:19Z,2021-11-15T20:35:55Z,2021-11-15T20:36:00Z,MERGED,True,183,52,2,https://github.com/HashidaTKS,arrow: use dictionary array for reference text column,10,[],https://github.com/groonga/groonga/pull/1263,https://github.com/HashidaTKS,3,https://github.com/groonga/groonga/pull/1263#issuecomment-920844727,"OverView
Make StreamWriter write string type values as string type DictionaryArray.
Writing DictionaryArray on FileDumper is not supported because arrow::FileWriter does not support dictionary replacement. For writing DictionaryArray on FileDumper, we should create a single dictionary array for a filed including the case of using delta dictionaries, but it may cause memory exhaustion or exceeding a ArrowArray length limitation and so on when the dictionary is large.
https://arrow.apache.org/docs/format/Columnar.html#ipc-file-format
https://arrow.apache.org/docs/format/Columnar.html#array-lengths
Behavior
StreamWriter writes string type values as string type DictionaryArray.
Other type values are written as before because changing to write these types as DictionaryArray  does not improve performance/data size.
In order to avoid memory exhaustion or exceeding a ArrowArray length limitation and so on when the dictionary becames large, DictionaryBuilder::ResetFull() is executed when the dictionary length exceeds a certain size (10000). This size is not set on a special basis. It is set on the assumption that ten times the record batch length (1000) is sufficient.
Test
Test data
I have created a test file like a dump result (testdata.grn) from the attached python file.
(I wanted to attach a compressed dump file but it was over the github size limitation...)
create_test_data.zip
I have compared performance before and after change.
Table records: 1,000,000
high_cardinality column values:  Generated based on random values from 0 to 500,000
high_cardinality_vector column values:  Generated based on random values from 0 to 500,000
middle_cardinality column values:  Generated based on random values from 0 to 50,000
middle_cardinality_vector column values:  Generated based on random values from 0 to 50,000
low_cardinality column values:  Generated based on random values from 0 to 5,000
low_cardinality_vector column values:  Generated based on random values from 0 to 5,000
Each column is a reference column.
Result

Before log
2021-09-11 21:19:11.791000|000000FCF11FFCD0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=high_cardinality&cache=no
2021-09-11 21:19:11.791000|000000FCF11FFCD0|:000000000000000 select(1000000)
2021-09-11 21:19:12.086000|000000FCF11FFCD0|:000000295000000 output(1000000)
2021-09-11 21:19:12.090000|000000FCF11FFCD0|:000000299000000 send(25946284): 25946284/25946284
2021-09-11 21:19:12.090000|000000FCF11FFCD0|<000000299000000 rc=0
2021-09-11 21:19:16.994000|000000FCF11FFCD0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=high_cardinality_vector&cache=no
2021-09-11 21:19:16.995000|000000FCF11FFCD0|:000000001000000 select(1000000)
2021-09-11 21:19:17.791000|000000FCF11FFCD0|:000000797000000 output(1000000)
2021-09-11 21:19:17.807000|000000FCF11FFCD0|:000000813000000 send(81557012): 81557012/81557012
2021-09-11 21:19:17.807000|000000FCF11FFCD0|<000000813000000 rc=0
2021-09-11 21:19:21.472000|000000FCF11FFCD0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=middle_cardinality&cache=no
2021-09-11 21:19:21.472000|000000FCF11FFCD0|:000000000000000 select(1000000)
2021-09-11 21:19:21.719000|000000FCF11FFCD0|:000000247000000 output(1000000)
2021-09-11 21:19:21.724000|000000FCF11FFCD0|:000000252000000 send(24945036): 24945036/24945036
2021-09-11 21:19:21.724000|000000FCF11FFCD0|<000000252000000 rc=0
2021-09-11 21:19:26.373000|000000FCF11FFCD0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=middle_cardinality_vector&cache=no
2021-09-11 21:19:26.373000|000000FCF11FFCD0|:000000000000000 select(1000000)
2021-09-11 21:19:26.911000|000000FCF11FFCD0|:000000538000000 output(1000000)
2021-09-11 21:19:26.927000|000000FCF11FFCD0|:000000554000000 send(78555436): 78555436/78555436
2021-09-11 21:19:26.927000|000000FCF11FFCD0|<000000554000000 rc=0
2021-09-11 21:19:30.030000|000000FCF11FFCD0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=low_cardinality&cache=no
2021-09-11 21:19:30.030000|000000FCF11FFCD0|:000000000000000 select(1000000)
2021-09-11 21:19:30.218000|000000FCF11FFCD0|:000000188000000 output(1000000)
2021-09-11 21:19:30.223000|000000FCF11FFCD0|:000000193000000 send(23946460): 23946460/23946460
2021-09-11 21:19:30.223000|000000FCF11FFCD0|<000000193000000 rc=0
2021-09-11 21:19:33.923000|000000FCF11FFCD0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=low_cardinality_vector&cache=no
2021-09-11 21:19:33.923000|000000FCF11FFCD0|:000000000000000 select(1000000)
2021-09-11 21:19:34.347000|000000FCF11FFCD0|:000000424000000 output(1000000)
2021-09-11 21:19:34.364000|000000FCF11FFCD0|:000000441000000 send(75557372): 75557372/75557372
2021-09-11 21:19:34.364000|000000FCF11FFCD0|<000000441000000 rc=0
2021-09-11 22:26:00.101000|000000210E2FF6C0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=middle_cardinality&sort_keys=middle_cardinality&cache=no
2021-09-11 22:26:00.101000|000000210E2FF6C0|:000000000000000 select(1000000)
2021-09-11 22:26:00.401000|000000210E2FF6C0|:000000300000000 sort(1000000): middle_cardinality
2021-09-11 22:26:00.765000|000000210E2FF6C0|:000000664000000 output(1000000)
2021-09-11 22:26:00.780000|000000210E2FF6C0|:000000679000000 send(24944732): 24944732/24944732
2021-09-11 22:26:00.780000|000000210E2FF6C0|<000000679000000 rc=0



After log
2021-09-11 21:12:23.373000|000000ACD22FF6A0|<000007081000000 rc=0
2021-09-11 21:12:27.793000|000000ACD23FFCA0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=high_cardinality&cache=no
2021-09-11 21:12:27.794000|000000ACD23FFCA0|:000000001000000 select(1000000)
2021-09-11 21:12:28.225000|000000ACD23FFCA0|:000000432000000 output(1000000)
2021-09-11 21:12:28.231000|000000ACD23FFCA0|:000000438000000 send(29844604): 29844604/29844604
2021-09-11 21:12:28.231000|000000ACD23FFCA0|<000000438000000 rc=0
2021-09-11 21:12:32.766000|000000ACD20FFD40|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=high_cardinality_vector&cache=no
2021-09-11 21:12:32.767000|000000ACD20FFD40|:000000001000000 select(1000000)
2021-09-11 21:12:33.889000|000000ACD20FFD40|:000001123000000 output(1000000)
2021-09-11 21:12:33.911000|000000ACD20FFD40|:000001145000000 send(92777708): 92777708/92777708
2021-09-11 21:12:33.911000|000000ACD20FFD40|<000001145000000 rc=0
2021-09-11 21:12:37.119000|000000ACD21FF780|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=middle_cardinality&cache=no
2021-09-11 21:12:37.120000|000000ACD21FF780|:000000001000000 select(1000000)
2021-09-11 21:12:37.503000|000000ACD21FF780|:000000384000000 output(1000000)
2021-09-11 21:12:37.510000|000000ACD21FF780|:000000391000000 send(26521796): 26521796/26521796
2021-09-11 21:12:37.511000|000000ACD21FF780|<000000392000000 rc=0
2021-09-11 21:12:41.417000|000000ACD22FF6A0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=middle_cardinality_vector&cache=no
2021-09-11 21:12:41.417000|000000ACD22FF6A0|:000000000000000 select(1000000)
2021-09-11 21:12:42.404000|000000ACD22FF6A0|:000000987000000 output(1000000)
2021-09-11 21:12:42.428000|000000ACD22FF6A0|:000001011000000 send(82308484): 82308484/82308484
2021-09-11 21:12:42.428000|000000ACD22FF6A0|<000001011000000 rc=0
2021-09-11 21:12:45.408000|000000ACD23FFCA0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=low_cardinality&cache=no
2021-09-11 21:12:45.408000|000000ACD23FFCA0|:000000000000000 select(1000000)
2021-09-11 21:12:45.684000|000000ACD23FFCA0|:000000276000000 output(1000000)
2021-09-11 21:12:45.686000|000000ACD23FFCA0|:000000278000000 send(4267683): 4267683/4267683
2021-09-11 21:12:45.686000|000000ACD23FFCA0|<000000278000000 rc=0
2021-09-11 21:12:49.656000|000000ACD20FFD40|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=low_cardinality_vector&cache=no
2021-09-11 21:12:49.656000|000000ACD20FFD40|:000000000000000 select(1000000)
2021-09-11 21:12:50.263000|000000ACD20FFD40|:000000607000000 output(1000000)
2021-09-11 21:12:50.267000|000000ACD20FFD40|:000000611000000 send(16318244): 16318244/16318244
2021-09-11 21:12:50.267000|000000ACD20FFD40|<000000611000000 rc=0
2021-09-11 22:37:19.654000|000000D5B18FF6C0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=middle_cardinality&sort_keys=middle_cardinality&cache=no
2021-09-11 22:37:19.654000|000000D5B18FF6C0|:000000000000000 select(1000000)
2021-09-11 22:37:19.873000|000000D5B18FF6C0|:000000219000000 sort(1000000): middle_cardinality
2021-09-11 22:37:20.236000|000000D5B18FF6C0|:000000582000000 output(1000000)
2021-09-11 22:37:20.240000|000000D5B18FF6C0|:000000586000000 send(5569875): 5569875/5569875
2021-09-11 22:37:20.240000|000000D5B18FF6C0|<000000586000000 rc=0


Summary



Output data (output column)
Before data size(byte)
After data size(byte)
Before elapsed time(sec)
After elapsed time(sec)




high_cardinality
25,946,284
29,844,604
0.3
0.44


high_cardinality_vector
81,557,012
92,777,708
0.81
1.15


middle_cardinality
24,945,036
26,521,796
0.25
0.392


middle_cardinality(sorted)
24,944,732
5,569,875
0.68
0.586


middle_cardinality_vector
78,555,436
82,308,484
0.55
1.011


low_cardinality
23,946,460
4,267,683
0.19
0.278


low_cardinality_vector
75,557,372
16,318,244
0.44
0.611



Note: The error may be large because they are executed only once.
The higher the cardinality become, the bigger the data size become than before.
This is expected behavior.
DictionaryArray just increases data size for indices if there is no duplicate data.
When the output data is sorted or the cardinality is low, the data size is smaller than before.
This is also expected behavior.
In these test cases, the elapsed time is always worsen because additional computing is required.
For cases middle_cardinality(sorted), low_cardinality and low_cardinality_vector, it may be shorter than before when IO is a bottleneck because the data size is smaller than before.
Others
I would like you to merge this PR after a new version of apache arrow with the following PR is merged is released.
apache/arrow#10990
Consideration

It might be better to create a new argument for the select command and so on or a new environment variable to specify the output type of arrow array (DictionaryArray or StringArray).

This is discussed at #1181, but looking at the test result, I think it is better to reconsider this.


It might be better to create a new environment variable to specity dictionary_length_threshold
There might be some other faster way to send delta dictionaries","@kou
Thank you.
I have addressed comments of your first look.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1263,2021-09-02T21:18:19Z,2021-11-15T20:35:55Z,2021-11-15T20:36:00Z,MERGED,True,183,52,2,https://github.com/HashidaTKS,arrow: use dictionary array for reference text column,10,[],https://github.com/groonga/groonga/pull/1263,https://github.com/HashidaTKS,4,https://github.com/groonga/groonga/pull/1263#issuecomment-930671396,"OverView
Make StreamWriter write string type values as string type DictionaryArray.
Writing DictionaryArray on FileDumper is not supported because arrow::FileWriter does not support dictionary replacement. For writing DictionaryArray on FileDumper, we should create a single dictionary array for a filed including the case of using delta dictionaries, but it may cause memory exhaustion or exceeding a ArrowArray length limitation and so on when the dictionary is large.
https://arrow.apache.org/docs/format/Columnar.html#ipc-file-format
https://arrow.apache.org/docs/format/Columnar.html#array-lengths
Behavior
StreamWriter writes string type values as string type DictionaryArray.
Other type values are written as before because changing to write these types as DictionaryArray  does not improve performance/data size.
In order to avoid memory exhaustion or exceeding a ArrowArray length limitation and so on when the dictionary becames large, DictionaryBuilder::ResetFull() is executed when the dictionary length exceeds a certain size (10000). This size is not set on a special basis. It is set on the assumption that ten times the record batch length (1000) is sufficient.
Test
Test data
I have created a test file like a dump result (testdata.grn) from the attached python file.
(I wanted to attach a compressed dump file but it was over the github size limitation...)
create_test_data.zip
I have compared performance before and after change.
Table records: 1,000,000
high_cardinality column values:  Generated based on random values from 0 to 500,000
high_cardinality_vector column values:  Generated based on random values from 0 to 500,000
middle_cardinality column values:  Generated based on random values from 0 to 50,000
middle_cardinality_vector column values:  Generated based on random values from 0 to 50,000
low_cardinality column values:  Generated based on random values from 0 to 5,000
low_cardinality_vector column values:  Generated based on random values from 0 to 5,000
Each column is a reference column.
Result

Before log
2021-09-11 21:19:11.791000|000000FCF11FFCD0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=high_cardinality&cache=no
2021-09-11 21:19:11.791000|000000FCF11FFCD0|:000000000000000 select(1000000)
2021-09-11 21:19:12.086000|000000FCF11FFCD0|:000000295000000 output(1000000)
2021-09-11 21:19:12.090000|000000FCF11FFCD0|:000000299000000 send(25946284): 25946284/25946284
2021-09-11 21:19:12.090000|000000FCF11FFCD0|<000000299000000 rc=0
2021-09-11 21:19:16.994000|000000FCF11FFCD0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=high_cardinality_vector&cache=no
2021-09-11 21:19:16.995000|000000FCF11FFCD0|:000000001000000 select(1000000)
2021-09-11 21:19:17.791000|000000FCF11FFCD0|:000000797000000 output(1000000)
2021-09-11 21:19:17.807000|000000FCF11FFCD0|:000000813000000 send(81557012): 81557012/81557012
2021-09-11 21:19:17.807000|000000FCF11FFCD0|<000000813000000 rc=0
2021-09-11 21:19:21.472000|000000FCF11FFCD0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=middle_cardinality&cache=no
2021-09-11 21:19:21.472000|000000FCF11FFCD0|:000000000000000 select(1000000)
2021-09-11 21:19:21.719000|000000FCF11FFCD0|:000000247000000 output(1000000)
2021-09-11 21:19:21.724000|000000FCF11FFCD0|:000000252000000 send(24945036): 24945036/24945036
2021-09-11 21:19:21.724000|000000FCF11FFCD0|<000000252000000 rc=0
2021-09-11 21:19:26.373000|000000FCF11FFCD0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=middle_cardinality_vector&cache=no
2021-09-11 21:19:26.373000|000000FCF11FFCD0|:000000000000000 select(1000000)
2021-09-11 21:19:26.911000|000000FCF11FFCD0|:000000538000000 output(1000000)
2021-09-11 21:19:26.927000|000000FCF11FFCD0|:000000554000000 send(78555436): 78555436/78555436
2021-09-11 21:19:26.927000|000000FCF11FFCD0|<000000554000000 rc=0
2021-09-11 21:19:30.030000|000000FCF11FFCD0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=low_cardinality&cache=no
2021-09-11 21:19:30.030000|000000FCF11FFCD0|:000000000000000 select(1000000)
2021-09-11 21:19:30.218000|000000FCF11FFCD0|:000000188000000 output(1000000)
2021-09-11 21:19:30.223000|000000FCF11FFCD0|:000000193000000 send(23946460): 23946460/23946460
2021-09-11 21:19:30.223000|000000FCF11FFCD0|<000000193000000 rc=0
2021-09-11 21:19:33.923000|000000FCF11FFCD0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=low_cardinality_vector&cache=no
2021-09-11 21:19:33.923000|000000FCF11FFCD0|:000000000000000 select(1000000)
2021-09-11 21:19:34.347000|000000FCF11FFCD0|:000000424000000 output(1000000)
2021-09-11 21:19:34.364000|000000FCF11FFCD0|:000000441000000 send(75557372): 75557372/75557372
2021-09-11 21:19:34.364000|000000FCF11FFCD0|<000000441000000 rc=0
2021-09-11 22:26:00.101000|000000210E2FF6C0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=middle_cardinality&sort_keys=middle_cardinality&cache=no
2021-09-11 22:26:00.101000|000000210E2FF6C0|:000000000000000 select(1000000)
2021-09-11 22:26:00.401000|000000210E2FF6C0|:000000300000000 sort(1000000): middle_cardinality
2021-09-11 22:26:00.765000|000000210E2FF6C0|:000000664000000 output(1000000)
2021-09-11 22:26:00.780000|000000210E2FF6C0|:000000679000000 send(24944732): 24944732/24944732
2021-09-11 22:26:00.780000|000000210E2FF6C0|<000000679000000 rc=0



After log
2021-09-11 21:12:23.373000|000000ACD22FF6A0|<000007081000000 rc=0
2021-09-11 21:12:27.793000|000000ACD23FFCA0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=high_cardinality&cache=no
2021-09-11 21:12:27.794000|000000ACD23FFCA0|:000000001000000 select(1000000)
2021-09-11 21:12:28.225000|000000ACD23FFCA0|:000000432000000 output(1000000)
2021-09-11 21:12:28.231000|000000ACD23FFCA0|:000000438000000 send(29844604): 29844604/29844604
2021-09-11 21:12:28.231000|000000ACD23FFCA0|<000000438000000 rc=0
2021-09-11 21:12:32.766000|000000ACD20FFD40|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=high_cardinality_vector&cache=no
2021-09-11 21:12:32.767000|000000ACD20FFD40|:000000001000000 select(1000000)
2021-09-11 21:12:33.889000|000000ACD20FFD40|:000001123000000 output(1000000)
2021-09-11 21:12:33.911000|000000ACD20FFD40|:000001145000000 send(92777708): 92777708/92777708
2021-09-11 21:12:33.911000|000000ACD20FFD40|<000001145000000 rc=0
2021-09-11 21:12:37.119000|000000ACD21FF780|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=middle_cardinality&cache=no
2021-09-11 21:12:37.120000|000000ACD21FF780|:000000001000000 select(1000000)
2021-09-11 21:12:37.503000|000000ACD21FF780|:000000384000000 output(1000000)
2021-09-11 21:12:37.510000|000000ACD21FF780|:000000391000000 send(26521796): 26521796/26521796
2021-09-11 21:12:37.511000|000000ACD21FF780|<000000392000000 rc=0
2021-09-11 21:12:41.417000|000000ACD22FF6A0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=middle_cardinality_vector&cache=no
2021-09-11 21:12:41.417000|000000ACD22FF6A0|:000000000000000 select(1000000)
2021-09-11 21:12:42.404000|000000ACD22FF6A0|:000000987000000 output(1000000)
2021-09-11 21:12:42.428000|000000ACD22FF6A0|:000001011000000 send(82308484): 82308484/82308484
2021-09-11 21:12:42.428000|000000ACD22FF6A0|<000001011000000 rc=0
2021-09-11 21:12:45.408000|000000ACD23FFCA0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=low_cardinality&cache=no
2021-09-11 21:12:45.408000|000000ACD23FFCA0|:000000000000000 select(1000000)
2021-09-11 21:12:45.684000|000000ACD23FFCA0|:000000276000000 output(1000000)
2021-09-11 21:12:45.686000|000000ACD23FFCA0|:000000278000000 send(4267683): 4267683/4267683
2021-09-11 21:12:45.686000|000000ACD23FFCA0|<000000278000000 rc=0
2021-09-11 21:12:49.656000|000000ACD20FFD40|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=low_cardinality_vector&cache=no
2021-09-11 21:12:49.656000|000000ACD20FFD40|:000000000000000 select(1000000)
2021-09-11 21:12:50.263000|000000ACD20FFD40|:000000607000000 output(1000000)
2021-09-11 21:12:50.267000|000000ACD20FFD40|:000000611000000 send(16318244): 16318244/16318244
2021-09-11 21:12:50.267000|000000ACD20FFD40|<000000611000000 rc=0
2021-09-11 22:37:19.654000|000000D5B18FF6C0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=middle_cardinality&sort_keys=middle_cardinality&cache=no
2021-09-11 22:37:19.654000|000000D5B18FF6C0|:000000000000000 select(1000000)
2021-09-11 22:37:19.873000|000000D5B18FF6C0|:000000219000000 sort(1000000): middle_cardinality
2021-09-11 22:37:20.236000|000000D5B18FF6C0|:000000582000000 output(1000000)
2021-09-11 22:37:20.240000|000000D5B18FF6C0|:000000586000000 send(5569875): 5569875/5569875
2021-09-11 22:37:20.240000|000000D5B18FF6C0|<000000586000000 rc=0


Summary



Output data (output column)
Before data size(byte)
After data size(byte)
Before elapsed time(sec)
After elapsed time(sec)




high_cardinality
25,946,284
29,844,604
0.3
0.44


high_cardinality_vector
81,557,012
92,777,708
0.81
1.15


middle_cardinality
24,945,036
26,521,796
0.25
0.392


middle_cardinality(sorted)
24,944,732
5,569,875
0.68
0.586


middle_cardinality_vector
78,555,436
82,308,484
0.55
1.011


low_cardinality
23,946,460
4,267,683
0.19
0.278


low_cardinality_vector
75,557,372
16,318,244
0.44
0.611



Note: The error may be large because they are executed only once.
The higher the cardinality become, the bigger the data size become than before.
This is expected behavior.
DictionaryArray just increases data size for indices if there is no duplicate data.
When the output data is sorted or the cardinality is low, the data size is smaller than before.
This is also expected behavior.
In these test cases, the elapsed time is always worsen because additional computing is required.
For cases middle_cardinality(sorted), low_cardinality and low_cardinality_vector, it may be shorter than before when IO is a bottleneck because the data size is smaller than before.
Others
I would like you to merge this PR after a new version of apache arrow with the following PR is merged is released.
apache/arrow#10990
Consideration

It might be better to create a new argument for the select command and so on or a new environment variable to specify the output type of arrow array (DictionaryArray or StringArray).

This is discussed at #1181, but looking at the test result, I think it is better to reconsider this.


It might be better to create a new environment variable to specity dictionary_length_threshold
There might be some other faster way to send delta dictionaries","apache/arrow#10990 is merged.
Please merge this after next version Apache Arrow is released if there is no problem.
I am checking the failed checks, it doesn't seem to be the effect of this PR changes...",True,{}
groonga/groonga,https://github.com/groonga/groonga,1263,2021-09-02T21:18:19Z,2021-11-15T20:35:55Z,2021-11-15T20:36:00Z,MERGED,True,183,52,2,https://github.com/HashidaTKS,arrow: use dictionary array for reference text column,10,[],https://github.com/groonga/groonga/pull/1263,https://github.com/kou,5,https://github.com/groonga/groonga/pull/1263#issuecomment-930676761,"OverView
Make StreamWriter write string type values as string type DictionaryArray.
Writing DictionaryArray on FileDumper is not supported because arrow::FileWriter does not support dictionary replacement. For writing DictionaryArray on FileDumper, we should create a single dictionary array for a filed including the case of using delta dictionaries, but it may cause memory exhaustion or exceeding a ArrowArray length limitation and so on when the dictionary is large.
https://arrow.apache.org/docs/format/Columnar.html#ipc-file-format
https://arrow.apache.org/docs/format/Columnar.html#array-lengths
Behavior
StreamWriter writes string type values as string type DictionaryArray.
Other type values are written as before because changing to write these types as DictionaryArray  does not improve performance/data size.
In order to avoid memory exhaustion or exceeding a ArrowArray length limitation and so on when the dictionary becames large, DictionaryBuilder::ResetFull() is executed when the dictionary length exceeds a certain size (10000). This size is not set on a special basis. It is set on the assumption that ten times the record batch length (1000) is sufficient.
Test
Test data
I have created a test file like a dump result (testdata.grn) from the attached python file.
(I wanted to attach a compressed dump file but it was over the github size limitation...)
create_test_data.zip
I have compared performance before and after change.
Table records: 1,000,000
high_cardinality column values:  Generated based on random values from 0 to 500,000
high_cardinality_vector column values:  Generated based on random values from 0 to 500,000
middle_cardinality column values:  Generated based on random values from 0 to 50,000
middle_cardinality_vector column values:  Generated based on random values from 0 to 50,000
low_cardinality column values:  Generated based on random values from 0 to 5,000
low_cardinality_vector column values:  Generated based on random values from 0 to 5,000
Each column is a reference column.
Result

Before log
2021-09-11 21:19:11.791000|000000FCF11FFCD0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=high_cardinality&cache=no
2021-09-11 21:19:11.791000|000000FCF11FFCD0|:000000000000000 select(1000000)
2021-09-11 21:19:12.086000|000000FCF11FFCD0|:000000295000000 output(1000000)
2021-09-11 21:19:12.090000|000000FCF11FFCD0|:000000299000000 send(25946284): 25946284/25946284
2021-09-11 21:19:12.090000|000000FCF11FFCD0|<000000299000000 rc=0
2021-09-11 21:19:16.994000|000000FCF11FFCD0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=high_cardinality_vector&cache=no
2021-09-11 21:19:16.995000|000000FCF11FFCD0|:000000001000000 select(1000000)
2021-09-11 21:19:17.791000|000000FCF11FFCD0|:000000797000000 output(1000000)
2021-09-11 21:19:17.807000|000000FCF11FFCD0|:000000813000000 send(81557012): 81557012/81557012
2021-09-11 21:19:17.807000|000000FCF11FFCD0|<000000813000000 rc=0
2021-09-11 21:19:21.472000|000000FCF11FFCD0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=middle_cardinality&cache=no
2021-09-11 21:19:21.472000|000000FCF11FFCD0|:000000000000000 select(1000000)
2021-09-11 21:19:21.719000|000000FCF11FFCD0|:000000247000000 output(1000000)
2021-09-11 21:19:21.724000|000000FCF11FFCD0|:000000252000000 send(24945036): 24945036/24945036
2021-09-11 21:19:21.724000|000000FCF11FFCD0|<000000252000000 rc=0
2021-09-11 21:19:26.373000|000000FCF11FFCD0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=middle_cardinality_vector&cache=no
2021-09-11 21:19:26.373000|000000FCF11FFCD0|:000000000000000 select(1000000)
2021-09-11 21:19:26.911000|000000FCF11FFCD0|:000000538000000 output(1000000)
2021-09-11 21:19:26.927000|000000FCF11FFCD0|:000000554000000 send(78555436): 78555436/78555436
2021-09-11 21:19:26.927000|000000FCF11FFCD0|<000000554000000 rc=0
2021-09-11 21:19:30.030000|000000FCF11FFCD0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=low_cardinality&cache=no
2021-09-11 21:19:30.030000|000000FCF11FFCD0|:000000000000000 select(1000000)
2021-09-11 21:19:30.218000|000000FCF11FFCD0|:000000188000000 output(1000000)
2021-09-11 21:19:30.223000|000000FCF11FFCD0|:000000193000000 send(23946460): 23946460/23946460
2021-09-11 21:19:30.223000|000000FCF11FFCD0|<000000193000000 rc=0
2021-09-11 21:19:33.923000|000000FCF11FFCD0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=low_cardinality_vector&cache=no
2021-09-11 21:19:33.923000|000000FCF11FFCD0|:000000000000000 select(1000000)
2021-09-11 21:19:34.347000|000000FCF11FFCD0|:000000424000000 output(1000000)
2021-09-11 21:19:34.364000|000000FCF11FFCD0|:000000441000000 send(75557372): 75557372/75557372
2021-09-11 21:19:34.364000|000000FCF11FFCD0|<000000441000000 rc=0
2021-09-11 22:26:00.101000|000000210E2FF6C0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=middle_cardinality&sort_keys=middle_cardinality&cache=no
2021-09-11 22:26:00.101000|000000210E2FF6C0|:000000000000000 select(1000000)
2021-09-11 22:26:00.401000|000000210E2FF6C0|:000000300000000 sort(1000000): middle_cardinality
2021-09-11 22:26:00.765000|000000210E2FF6C0|:000000664000000 output(1000000)
2021-09-11 22:26:00.780000|000000210E2FF6C0|:000000679000000 send(24944732): 24944732/24944732
2021-09-11 22:26:00.780000|000000210E2FF6C0|<000000679000000 rc=0



After log
2021-09-11 21:12:23.373000|000000ACD22FF6A0|<000007081000000 rc=0
2021-09-11 21:12:27.793000|000000ACD23FFCA0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=high_cardinality&cache=no
2021-09-11 21:12:27.794000|000000ACD23FFCA0|:000000001000000 select(1000000)
2021-09-11 21:12:28.225000|000000ACD23FFCA0|:000000432000000 output(1000000)
2021-09-11 21:12:28.231000|000000ACD23FFCA0|:000000438000000 send(29844604): 29844604/29844604
2021-09-11 21:12:28.231000|000000ACD23FFCA0|<000000438000000 rc=0
2021-09-11 21:12:32.766000|000000ACD20FFD40|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=high_cardinality_vector&cache=no
2021-09-11 21:12:32.767000|000000ACD20FFD40|:000000001000000 select(1000000)
2021-09-11 21:12:33.889000|000000ACD20FFD40|:000001123000000 output(1000000)
2021-09-11 21:12:33.911000|000000ACD20FFD40|:000001145000000 send(92777708): 92777708/92777708
2021-09-11 21:12:33.911000|000000ACD20FFD40|<000001145000000 rc=0
2021-09-11 21:12:37.119000|000000ACD21FF780|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=middle_cardinality&cache=no
2021-09-11 21:12:37.120000|000000ACD21FF780|:000000001000000 select(1000000)
2021-09-11 21:12:37.503000|000000ACD21FF780|:000000384000000 output(1000000)
2021-09-11 21:12:37.510000|000000ACD21FF780|:000000391000000 send(26521796): 26521796/26521796
2021-09-11 21:12:37.511000|000000ACD21FF780|<000000392000000 rc=0
2021-09-11 21:12:41.417000|000000ACD22FF6A0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=middle_cardinality_vector&cache=no
2021-09-11 21:12:41.417000|000000ACD22FF6A0|:000000000000000 select(1000000)
2021-09-11 21:12:42.404000|000000ACD22FF6A0|:000000987000000 output(1000000)
2021-09-11 21:12:42.428000|000000ACD22FF6A0|:000001011000000 send(82308484): 82308484/82308484
2021-09-11 21:12:42.428000|000000ACD22FF6A0|<000001011000000 rc=0
2021-09-11 21:12:45.408000|000000ACD23FFCA0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=low_cardinality&cache=no
2021-09-11 21:12:45.408000|000000ACD23FFCA0|:000000000000000 select(1000000)
2021-09-11 21:12:45.684000|000000ACD23FFCA0|:000000276000000 output(1000000)
2021-09-11 21:12:45.686000|000000ACD23FFCA0|:000000278000000 send(4267683): 4267683/4267683
2021-09-11 21:12:45.686000|000000ACD23FFCA0|<000000278000000 rc=0
2021-09-11 21:12:49.656000|000000ACD20FFD40|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=low_cardinality_vector&cache=no
2021-09-11 21:12:49.656000|000000ACD20FFD40|:000000000000000 select(1000000)
2021-09-11 21:12:50.263000|000000ACD20FFD40|:000000607000000 output(1000000)
2021-09-11 21:12:50.267000|000000ACD20FFD40|:000000611000000 send(16318244): 16318244/16318244
2021-09-11 21:12:50.267000|000000ACD20FFD40|<000000611000000 rc=0
2021-09-11 22:37:19.654000|000000D5B18FF6C0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=middle_cardinality&sort_keys=middle_cardinality&cache=no
2021-09-11 22:37:19.654000|000000D5B18FF6C0|:000000000000000 select(1000000)
2021-09-11 22:37:19.873000|000000D5B18FF6C0|:000000219000000 sort(1000000): middle_cardinality
2021-09-11 22:37:20.236000|000000D5B18FF6C0|:000000582000000 output(1000000)
2021-09-11 22:37:20.240000|000000D5B18FF6C0|:000000586000000 send(5569875): 5569875/5569875
2021-09-11 22:37:20.240000|000000D5B18FF6C0|<000000586000000 rc=0


Summary



Output data (output column)
Before data size(byte)
After data size(byte)
Before elapsed time(sec)
After elapsed time(sec)




high_cardinality
25,946,284
29,844,604
0.3
0.44


high_cardinality_vector
81,557,012
92,777,708
0.81
1.15


middle_cardinality
24,945,036
26,521,796
0.25
0.392


middle_cardinality(sorted)
24,944,732
5,569,875
0.68
0.586


middle_cardinality_vector
78,555,436
82,308,484
0.55
1.011


low_cardinality
23,946,460
4,267,683
0.19
0.278


low_cardinality_vector
75,557,372
16,318,244
0.44
0.611



Note: The error may be large because they are executed only once.
The higher the cardinality become, the bigger the data size become than before.
This is expected behavior.
DictionaryArray just increases data size for indices if there is no duplicate data.
When the output data is sorted or the cardinality is low, the data size is smaller than before.
This is also expected behavior.
In these test cases, the elapsed time is always worsen because additional computing is required.
For cases middle_cardinality(sorted), low_cardinality and low_cardinality_vector, it may be shorter than before when IO is a bottleneck because the data size is smaller than before.
Others
I would like you to merge this PR after a new version of apache arrow with the following PR is merged is released.
apache/arrow#10990
Consideration

It might be better to create a new argument for the select command and so on or a new environment variable to specify the output type of arrow array (DictionaryArray or StringArray).

This is discussed at #1181, but looking at the test result, I think it is better to reconsider this.


It might be better to create a new environment variable to specity dictionary_length_threshold
There might be some other faster way to send delta dictionaries",Could you rebase on master after Apache Arrow 6.0.0 is released?,True,{}
groonga/groonga,https://github.com/groonga/groonga,1263,2021-09-02T21:18:19Z,2021-11-15T20:35:55Z,2021-11-15T20:36:00Z,MERGED,True,183,52,2,https://github.com/HashidaTKS,arrow: use dictionary array for reference text column,10,[],https://github.com/groonga/groonga/pull/1263,https://github.com/HashidaTKS,6,https://github.com/groonga/groonga/pull/1263#issuecomment-930678154,"OverView
Make StreamWriter write string type values as string type DictionaryArray.
Writing DictionaryArray on FileDumper is not supported because arrow::FileWriter does not support dictionary replacement. For writing DictionaryArray on FileDumper, we should create a single dictionary array for a filed including the case of using delta dictionaries, but it may cause memory exhaustion or exceeding a ArrowArray length limitation and so on when the dictionary is large.
https://arrow.apache.org/docs/format/Columnar.html#ipc-file-format
https://arrow.apache.org/docs/format/Columnar.html#array-lengths
Behavior
StreamWriter writes string type values as string type DictionaryArray.
Other type values are written as before because changing to write these types as DictionaryArray  does not improve performance/data size.
In order to avoid memory exhaustion or exceeding a ArrowArray length limitation and so on when the dictionary becames large, DictionaryBuilder::ResetFull() is executed when the dictionary length exceeds a certain size (10000). This size is not set on a special basis. It is set on the assumption that ten times the record batch length (1000) is sufficient.
Test
Test data
I have created a test file like a dump result (testdata.grn) from the attached python file.
(I wanted to attach a compressed dump file but it was over the github size limitation...)
create_test_data.zip
I have compared performance before and after change.
Table records: 1,000,000
high_cardinality column values:  Generated based on random values from 0 to 500,000
high_cardinality_vector column values:  Generated based on random values from 0 to 500,000
middle_cardinality column values:  Generated based on random values from 0 to 50,000
middle_cardinality_vector column values:  Generated based on random values from 0 to 50,000
low_cardinality column values:  Generated based on random values from 0 to 5,000
low_cardinality_vector column values:  Generated based on random values from 0 to 5,000
Each column is a reference column.
Result

Before log
2021-09-11 21:19:11.791000|000000FCF11FFCD0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=high_cardinality&cache=no
2021-09-11 21:19:11.791000|000000FCF11FFCD0|:000000000000000 select(1000000)
2021-09-11 21:19:12.086000|000000FCF11FFCD0|:000000295000000 output(1000000)
2021-09-11 21:19:12.090000|000000FCF11FFCD0|:000000299000000 send(25946284): 25946284/25946284
2021-09-11 21:19:12.090000|000000FCF11FFCD0|<000000299000000 rc=0
2021-09-11 21:19:16.994000|000000FCF11FFCD0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=high_cardinality_vector&cache=no
2021-09-11 21:19:16.995000|000000FCF11FFCD0|:000000001000000 select(1000000)
2021-09-11 21:19:17.791000|000000FCF11FFCD0|:000000797000000 output(1000000)
2021-09-11 21:19:17.807000|000000FCF11FFCD0|:000000813000000 send(81557012): 81557012/81557012
2021-09-11 21:19:17.807000|000000FCF11FFCD0|<000000813000000 rc=0
2021-09-11 21:19:21.472000|000000FCF11FFCD0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=middle_cardinality&cache=no
2021-09-11 21:19:21.472000|000000FCF11FFCD0|:000000000000000 select(1000000)
2021-09-11 21:19:21.719000|000000FCF11FFCD0|:000000247000000 output(1000000)
2021-09-11 21:19:21.724000|000000FCF11FFCD0|:000000252000000 send(24945036): 24945036/24945036
2021-09-11 21:19:21.724000|000000FCF11FFCD0|<000000252000000 rc=0
2021-09-11 21:19:26.373000|000000FCF11FFCD0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=middle_cardinality_vector&cache=no
2021-09-11 21:19:26.373000|000000FCF11FFCD0|:000000000000000 select(1000000)
2021-09-11 21:19:26.911000|000000FCF11FFCD0|:000000538000000 output(1000000)
2021-09-11 21:19:26.927000|000000FCF11FFCD0|:000000554000000 send(78555436): 78555436/78555436
2021-09-11 21:19:26.927000|000000FCF11FFCD0|<000000554000000 rc=0
2021-09-11 21:19:30.030000|000000FCF11FFCD0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=low_cardinality&cache=no
2021-09-11 21:19:30.030000|000000FCF11FFCD0|:000000000000000 select(1000000)
2021-09-11 21:19:30.218000|000000FCF11FFCD0|:000000188000000 output(1000000)
2021-09-11 21:19:30.223000|000000FCF11FFCD0|:000000193000000 send(23946460): 23946460/23946460
2021-09-11 21:19:30.223000|000000FCF11FFCD0|<000000193000000 rc=0
2021-09-11 21:19:33.923000|000000FCF11FFCD0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=low_cardinality_vector&cache=no
2021-09-11 21:19:33.923000|000000FCF11FFCD0|:000000000000000 select(1000000)
2021-09-11 21:19:34.347000|000000FCF11FFCD0|:000000424000000 output(1000000)
2021-09-11 21:19:34.364000|000000FCF11FFCD0|:000000441000000 send(75557372): 75557372/75557372
2021-09-11 21:19:34.364000|000000FCF11FFCD0|<000000441000000 rc=0
2021-09-11 22:26:00.101000|000000210E2FF6C0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=middle_cardinality&sort_keys=middle_cardinality&cache=no
2021-09-11 22:26:00.101000|000000210E2FF6C0|:000000000000000 select(1000000)
2021-09-11 22:26:00.401000|000000210E2FF6C0|:000000300000000 sort(1000000): middle_cardinality
2021-09-11 22:26:00.765000|000000210E2FF6C0|:000000664000000 output(1000000)
2021-09-11 22:26:00.780000|000000210E2FF6C0|:000000679000000 send(24944732): 24944732/24944732
2021-09-11 22:26:00.780000|000000210E2FF6C0|<000000679000000 rc=0



After log
2021-09-11 21:12:23.373000|000000ACD22FF6A0|<000007081000000 rc=0
2021-09-11 21:12:27.793000|000000ACD23FFCA0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=high_cardinality&cache=no
2021-09-11 21:12:27.794000|000000ACD23FFCA0|:000000001000000 select(1000000)
2021-09-11 21:12:28.225000|000000ACD23FFCA0|:000000432000000 output(1000000)
2021-09-11 21:12:28.231000|000000ACD23FFCA0|:000000438000000 send(29844604): 29844604/29844604
2021-09-11 21:12:28.231000|000000ACD23FFCA0|<000000438000000 rc=0
2021-09-11 21:12:32.766000|000000ACD20FFD40|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=high_cardinality_vector&cache=no
2021-09-11 21:12:32.767000|000000ACD20FFD40|:000000001000000 select(1000000)
2021-09-11 21:12:33.889000|000000ACD20FFD40|:000001123000000 output(1000000)
2021-09-11 21:12:33.911000|000000ACD20FFD40|:000001145000000 send(92777708): 92777708/92777708
2021-09-11 21:12:33.911000|000000ACD20FFD40|<000001145000000 rc=0
2021-09-11 21:12:37.119000|000000ACD21FF780|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=middle_cardinality&cache=no
2021-09-11 21:12:37.120000|000000ACD21FF780|:000000001000000 select(1000000)
2021-09-11 21:12:37.503000|000000ACD21FF780|:000000384000000 output(1000000)
2021-09-11 21:12:37.510000|000000ACD21FF780|:000000391000000 send(26521796): 26521796/26521796
2021-09-11 21:12:37.511000|000000ACD21FF780|<000000392000000 rc=0
2021-09-11 21:12:41.417000|000000ACD22FF6A0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=middle_cardinality_vector&cache=no
2021-09-11 21:12:41.417000|000000ACD22FF6A0|:000000000000000 select(1000000)
2021-09-11 21:12:42.404000|000000ACD22FF6A0|:000000987000000 output(1000000)
2021-09-11 21:12:42.428000|000000ACD22FF6A0|:000001011000000 send(82308484): 82308484/82308484
2021-09-11 21:12:42.428000|000000ACD22FF6A0|<000001011000000 rc=0
2021-09-11 21:12:45.408000|000000ACD23FFCA0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=low_cardinality&cache=no
2021-09-11 21:12:45.408000|000000ACD23FFCA0|:000000000000000 select(1000000)
2021-09-11 21:12:45.684000|000000ACD23FFCA0|:000000276000000 output(1000000)
2021-09-11 21:12:45.686000|000000ACD23FFCA0|:000000278000000 send(4267683): 4267683/4267683
2021-09-11 21:12:45.686000|000000ACD23FFCA0|<000000278000000 rc=0
2021-09-11 21:12:49.656000|000000ACD20FFD40|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=low_cardinality_vector&cache=no
2021-09-11 21:12:49.656000|000000ACD20FFD40|:000000000000000 select(1000000)
2021-09-11 21:12:50.263000|000000ACD20FFD40|:000000607000000 output(1000000)
2021-09-11 21:12:50.267000|000000ACD20FFD40|:000000611000000 send(16318244): 16318244/16318244
2021-09-11 21:12:50.267000|000000ACD20FFD40|<000000611000000 rc=0
2021-09-11 22:37:19.654000|000000D5B18FF6C0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=middle_cardinality&sort_keys=middle_cardinality&cache=no
2021-09-11 22:37:19.654000|000000D5B18FF6C0|:000000000000000 select(1000000)
2021-09-11 22:37:19.873000|000000D5B18FF6C0|:000000219000000 sort(1000000): middle_cardinality
2021-09-11 22:37:20.236000|000000D5B18FF6C0|:000000582000000 output(1000000)
2021-09-11 22:37:20.240000|000000D5B18FF6C0|:000000586000000 send(5569875): 5569875/5569875
2021-09-11 22:37:20.240000|000000D5B18FF6C0|<000000586000000 rc=0


Summary



Output data (output column)
Before data size(byte)
After data size(byte)
Before elapsed time(sec)
After elapsed time(sec)




high_cardinality
25,946,284
29,844,604
0.3
0.44


high_cardinality_vector
81,557,012
92,777,708
0.81
1.15


middle_cardinality
24,945,036
26,521,796
0.25
0.392


middle_cardinality(sorted)
24,944,732
5,569,875
0.68
0.586


middle_cardinality_vector
78,555,436
82,308,484
0.55
1.011


low_cardinality
23,946,460
4,267,683
0.19
0.278


low_cardinality_vector
75,557,372
16,318,244
0.44
0.611



Note: The error may be large because they are executed only once.
The higher the cardinality become, the bigger the data size become than before.
This is expected behavior.
DictionaryArray just increases data size for indices if there is no duplicate data.
When the output data is sorted or the cardinality is low, the data size is smaller than before.
This is also expected behavior.
In these test cases, the elapsed time is always worsen because additional computing is required.
For cases middle_cardinality(sorted), low_cardinality and low_cardinality_vector, it may be shorter than before when IO is a bottleneck because the data size is smaller than before.
Others
I would like you to merge this PR after a new version of apache arrow with the following PR is merged is released.
apache/arrow#10990
Consideration

It might be better to create a new argument for the select command and so on or a new environment variable to specify the output type of arrow array (DictionaryArray or StringArray).

This is discussed at #1181, but looking at the test result, I think it is better to reconsider this.


It might be better to create a new environment variable to specity dictionary_length_threshold
There might be some other faster way to send delta dictionaries","Sure, I will rebase.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1263,2021-09-02T21:18:19Z,2021-11-15T20:35:55Z,2021-11-15T20:36:00Z,MERGED,True,183,52,2,https://github.com/HashidaTKS,arrow: use dictionary array for reference text column,10,[],https://github.com/groonga/groonga/pull/1263,https://github.com/HashidaTKS,7,https://github.com/groonga/groonga/pull/1263#issuecomment-969189196,"OverView
Make StreamWriter write string type values as string type DictionaryArray.
Writing DictionaryArray on FileDumper is not supported because arrow::FileWriter does not support dictionary replacement. For writing DictionaryArray on FileDumper, we should create a single dictionary array for a filed including the case of using delta dictionaries, but it may cause memory exhaustion or exceeding a ArrowArray length limitation and so on when the dictionary is large.
https://arrow.apache.org/docs/format/Columnar.html#ipc-file-format
https://arrow.apache.org/docs/format/Columnar.html#array-lengths
Behavior
StreamWriter writes string type values as string type DictionaryArray.
Other type values are written as before because changing to write these types as DictionaryArray  does not improve performance/data size.
In order to avoid memory exhaustion or exceeding a ArrowArray length limitation and so on when the dictionary becames large, DictionaryBuilder::ResetFull() is executed when the dictionary length exceeds a certain size (10000). This size is not set on a special basis. It is set on the assumption that ten times the record batch length (1000) is sufficient.
Test
Test data
I have created a test file like a dump result (testdata.grn) from the attached python file.
(I wanted to attach a compressed dump file but it was over the github size limitation...)
create_test_data.zip
I have compared performance before and after change.
Table records: 1,000,000
high_cardinality column values:  Generated based on random values from 0 to 500,000
high_cardinality_vector column values:  Generated based on random values from 0 to 500,000
middle_cardinality column values:  Generated based on random values from 0 to 50,000
middle_cardinality_vector column values:  Generated based on random values from 0 to 50,000
low_cardinality column values:  Generated based on random values from 0 to 5,000
low_cardinality_vector column values:  Generated based on random values from 0 to 5,000
Each column is a reference column.
Result

Before log
2021-09-11 21:19:11.791000|000000FCF11FFCD0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=high_cardinality&cache=no
2021-09-11 21:19:11.791000|000000FCF11FFCD0|:000000000000000 select(1000000)
2021-09-11 21:19:12.086000|000000FCF11FFCD0|:000000295000000 output(1000000)
2021-09-11 21:19:12.090000|000000FCF11FFCD0|:000000299000000 send(25946284): 25946284/25946284
2021-09-11 21:19:12.090000|000000FCF11FFCD0|<000000299000000 rc=0
2021-09-11 21:19:16.994000|000000FCF11FFCD0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=high_cardinality_vector&cache=no
2021-09-11 21:19:16.995000|000000FCF11FFCD0|:000000001000000 select(1000000)
2021-09-11 21:19:17.791000|000000FCF11FFCD0|:000000797000000 output(1000000)
2021-09-11 21:19:17.807000|000000FCF11FFCD0|:000000813000000 send(81557012): 81557012/81557012
2021-09-11 21:19:17.807000|000000FCF11FFCD0|<000000813000000 rc=0
2021-09-11 21:19:21.472000|000000FCF11FFCD0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=middle_cardinality&cache=no
2021-09-11 21:19:21.472000|000000FCF11FFCD0|:000000000000000 select(1000000)
2021-09-11 21:19:21.719000|000000FCF11FFCD0|:000000247000000 output(1000000)
2021-09-11 21:19:21.724000|000000FCF11FFCD0|:000000252000000 send(24945036): 24945036/24945036
2021-09-11 21:19:21.724000|000000FCF11FFCD0|<000000252000000 rc=0
2021-09-11 21:19:26.373000|000000FCF11FFCD0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=middle_cardinality_vector&cache=no
2021-09-11 21:19:26.373000|000000FCF11FFCD0|:000000000000000 select(1000000)
2021-09-11 21:19:26.911000|000000FCF11FFCD0|:000000538000000 output(1000000)
2021-09-11 21:19:26.927000|000000FCF11FFCD0|:000000554000000 send(78555436): 78555436/78555436
2021-09-11 21:19:26.927000|000000FCF11FFCD0|<000000554000000 rc=0
2021-09-11 21:19:30.030000|000000FCF11FFCD0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=low_cardinality&cache=no
2021-09-11 21:19:30.030000|000000FCF11FFCD0|:000000000000000 select(1000000)
2021-09-11 21:19:30.218000|000000FCF11FFCD0|:000000188000000 output(1000000)
2021-09-11 21:19:30.223000|000000FCF11FFCD0|:000000193000000 send(23946460): 23946460/23946460
2021-09-11 21:19:30.223000|000000FCF11FFCD0|<000000193000000 rc=0
2021-09-11 21:19:33.923000|000000FCF11FFCD0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=low_cardinality_vector&cache=no
2021-09-11 21:19:33.923000|000000FCF11FFCD0|:000000000000000 select(1000000)
2021-09-11 21:19:34.347000|000000FCF11FFCD0|:000000424000000 output(1000000)
2021-09-11 21:19:34.364000|000000FCF11FFCD0|:000000441000000 send(75557372): 75557372/75557372
2021-09-11 21:19:34.364000|000000FCF11FFCD0|<000000441000000 rc=0
2021-09-11 22:26:00.101000|000000210E2FF6C0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=middle_cardinality&sort_keys=middle_cardinality&cache=no
2021-09-11 22:26:00.101000|000000210E2FF6C0|:000000000000000 select(1000000)
2021-09-11 22:26:00.401000|000000210E2FF6C0|:000000300000000 sort(1000000): middle_cardinality
2021-09-11 22:26:00.765000|000000210E2FF6C0|:000000664000000 output(1000000)
2021-09-11 22:26:00.780000|000000210E2FF6C0|:000000679000000 send(24944732): 24944732/24944732
2021-09-11 22:26:00.780000|000000210E2FF6C0|<000000679000000 rc=0



After log
2021-09-11 21:12:23.373000|000000ACD22FF6A0|<000007081000000 rc=0
2021-09-11 21:12:27.793000|000000ACD23FFCA0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=high_cardinality&cache=no
2021-09-11 21:12:27.794000|000000ACD23FFCA0|:000000001000000 select(1000000)
2021-09-11 21:12:28.225000|000000ACD23FFCA0|:000000432000000 output(1000000)
2021-09-11 21:12:28.231000|000000ACD23FFCA0|:000000438000000 send(29844604): 29844604/29844604
2021-09-11 21:12:28.231000|000000ACD23FFCA0|<000000438000000 rc=0
2021-09-11 21:12:32.766000|000000ACD20FFD40|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=high_cardinality_vector&cache=no
2021-09-11 21:12:32.767000|000000ACD20FFD40|:000000001000000 select(1000000)
2021-09-11 21:12:33.889000|000000ACD20FFD40|:000001123000000 output(1000000)
2021-09-11 21:12:33.911000|000000ACD20FFD40|:000001145000000 send(92777708): 92777708/92777708
2021-09-11 21:12:33.911000|000000ACD20FFD40|<000001145000000 rc=0
2021-09-11 21:12:37.119000|000000ACD21FF780|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=middle_cardinality&cache=no
2021-09-11 21:12:37.120000|000000ACD21FF780|:000000001000000 select(1000000)
2021-09-11 21:12:37.503000|000000ACD21FF780|:000000384000000 output(1000000)
2021-09-11 21:12:37.510000|000000ACD21FF780|:000000391000000 send(26521796): 26521796/26521796
2021-09-11 21:12:37.511000|000000ACD21FF780|<000000392000000 rc=0
2021-09-11 21:12:41.417000|000000ACD22FF6A0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=middle_cardinality_vector&cache=no
2021-09-11 21:12:41.417000|000000ACD22FF6A0|:000000000000000 select(1000000)
2021-09-11 21:12:42.404000|000000ACD22FF6A0|:000000987000000 output(1000000)
2021-09-11 21:12:42.428000|000000ACD22FF6A0|:000001011000000 send(82308484): 82308484/82308484
2021-09-11 21:12:42.428000|000000ACD22FF6A0|<000001011000000 rc=0
2021-09-11 21:12:45.408000|000000ACD23FFCA0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=low_cardinality&cache=no
2021-09-11 21:12:45.408000|000000ACD23FFCA0|:000000000000000 select(1000000)
2021-09-11 21:12:45.684000|000000ACD23FFCA0|:000000276000000 output(1000000)
2021-09-11 21:12:45.686000|000000ACD23FFCA0|:000000278000000 send(4267683): 4267683/4267683
2021-09-11 21:12:45.686000|000000ACD23FFCA0|<000000278000000 rc=0
2021-09-11 21:12:49.656000|000000ACD20FFD40|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=low_cardinality_vector&cache=no
2021-09-11 21:12:49.656000|000000ACD20FFD40|:000000000000000 select(1000000)
2021-09-11 21:12:50.263000|000000ACD20FFD40|:000000607000000 output(1000000)
2021-09-11 21:12:50.267000|000000ACD20FFD40|:000000611000000 send(16318244): 16318244/16318244
2021-09-11 21:12:50.267000|000000ACD20FFD40|<000000611000000 rc=0
2021-09-11 22:37:19.654000|000000D5B18FF6C0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=middle_cardinality&sort_keys=middle_cardinality&cache=no
2021-09-11 22:37:19.654000|000000D5B18FF6C0|:000000000000000 select(1000000)
2021-09-11 22:37:19.873000|000000D5B18FF6C0|:000000219000000 sort(1000000): middle_cardinality
2021-09-11 22:37:20.236000|000000D5B18FF6C0|:000000582000000 output(1000000)
2021-09-11 22:37:20.240000|000000D5B18FF6C0|:000000586000000 send(5569875): 5569875/5569875
2021-09-11 22:37:20.240000|000000D5B18FF6C0|<000000586000000 rc=0


Summary



Output data (output column)
Before data size(byte)
After data size(byte)
Before elapsed time(sec)
After elapsed time(sec)




high_cardinality
25,946,284
29,844,604
0.3
0.44


high_cardinality_vector
81,557,012
92,777,708
0.81
1.15


middle_cardinality
24,945,036
26,521,796
0.25
0.392


middle_cardinality(sorted)
24,944,732
5,569,875
0.68
0.586


middle_cardinality_vector
78,555,436
82,308,484
0.55
1.011


low_cardinality
23,946,460
4,267,683
0.19
0.278


low_cardinality_vector
75,557,372
16,318,244
0.44
0.611



Note: The error may be large because they are executed only once.
The higher the cardinality become, the bigger the data size become than before.
This is expected behavior.
DictionaryArray just increases data size for indices if there is no duplicate data.
When the output data is sorted or the cardinality is low, the data size is smaller than before.
This is also expected behavior.
In these test cases, the elapsed time is always worsen because additional computing is required.
For cases middle_cardinality(sorted), low_cardinality and low_cardinality_vector, it may be shorter than before when IO is a bottleneck because the data size is smaller than before.
Others
I would like you to merge this PR after a new version of apache arrow with the following PR is merged is released.
apache/arrow#10990
Consideration

It might be better to create a new argument for the select command and so on or a new environment variable to specify the output type of arrow array (DictionaryArray or StringArray).

This is discussed at #1181, but looking at the test result, I think it is better to reconsider this.


It might be better to create a new environment variable to specity dictionary_length_threshold
There might be some other faster way to send delta dictionaries",Rebased this branch on master because Apache Arrow 6.0.0 has been released.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1263,2021-09-02T21:18:19Z,2021-11-15T20:35:55Z,2021-11-15T20:36:00Z,MERGED,True,183,52,2,https://github.com/HashidaTKS,arrow: use dictionary array for reference text column,10,[],https://github.com/groonga/groonga/pull/1263,https://github.com/kou,8,https://github.com/groonga/groonga/pull/1263#issuecomment-969298454,"OverView
Make StreamWriter write string type values as string type DictionaryArray.
Writing DictionaryArray on FileDumper is not supported because arrow::FileWriter does not support dictionary replacement. For writing DictionaryArray on FileDumper, we should create a single dictionary array for a filed including the case of using delta dictionaries, but it may cause memory exhaustion or exceeding a ArrowArray length limitation and so on when the dictionary is large.
https://arrow.apache.org/docs/format/Columnar.html#ipc-file-format
https://arrow.apache.org/docs/format/Columnar.html#array-lengths
Behavior
StreamWriter writes string type values as string type DictionaryArray.
Other type values are written as before because changing to write these types as DictionaryArray  does not improve performance/data size.
In order to avoid memory exhaustion or exceeding a ArrowArray length limitation and so on when the dictionary becames large, DictionaryBuilder::ResetFull() is executed when the dictionary length exceeds a certain size (10000). This size is not set on a special basis. It is set on the assumption that ten times the record batch length (1000) is sufficient.
Test
Test data
I have created a test file like a dump result (testdata.grn) from the attached python file.
(I wanted to attach a compressed dump file but it was over the github size limitation...)
create_test_data.zip
I have compared performance before and after change.
Table records: 1,000,000
high_cardinality column values:  Generated based on random values from 0 to 500,000
high_cardinality_vector column values:  Generated based on random values from 0 to 500,000
middle_cardinality column values:  Generated based on random values from 0 to 50,000
middle_cardinality_vector column values:  Generated based on random values from 0 to 50,000
low_cardinality column values:  Generated based on random values from 0 to 5,000
low_cardinality_vector column values:  Generated based on random values from 0 to 5,000
Each column is a reference column.
Result

Before log
2021-09-11 21:19:11.791000|000000FCF11FFCD0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=high_cardinality&cache=no
2021-09-11 21:19:11.791000|000000FCF11FFCD0|:000000000000000 select(1000000)
2021-09-11 21:19:12.086000|000000FCF11FFCD0|:000000295000000 output(1000000)
2021-09-11 21:19:12.090000|000000FCF11FFCD0|:000000299000000 send(25946284): 25946284/25946284
2021-09-11 21:19:12.090000|000000FCF11FFCD0|<000000299000000 rc=0
2021-09-11 21:19:16.994000|000000FCF11FFCD0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=high_cardinality_vector&cache=no
2021-09-11 21:19:16.995000|000000FCF11FFCD0|:000000001000000 select(1000000)
2021-09-11 21:19:17.791000|000000FCF11FFCD0|:000000797000000 output(1000000)
2021-09-11 21:19:17.807000|000000FCF11FFCD0|:000000813000000 send(81557012): 81557012/81557012
2021-09-11 21:19:17.807000|000000FCF11FFCD0|<000000813000000 rc=0
2021-09-11 21:19:21.472000|000000FCF11FFCD0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=middle_cardinality&cache=no
2021-09-11 21:19:21.472000|000000FCF11FFCD0|:000000000000000 select(1000000)
2021-09-11 21:19:21.719000|000000FCF11FFCD0|:000000247000000 output(1000000)
2021-09-11 21:19:21.724000|000000FCF11FFCD0|:000000252000000 send(24945036): 24945036/24945036
2021-09-11 21:19:21.724000|000000FCF11FFCD0|<000000252000000 rc=0
2021-09-11 21:19:26.373000|000000FCF11FFCD0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=middle_cardinality_vector&cache=no
2021-09-11 21:19:26.373000|000000FCF11FFCD0|:000000000000000 select(1000000)
2021-09-11 21:19:26.911000|000000FCF11FFCD0|:000000538000000 output(1000000)
2021-09-11 21:19:26.927000|000000FCF11FFCD0|:000000554000000 send(78555436): 78555436/78555436
2021-09-11 21:19:26.927000|000000FCF11FFCD0|<000000554000000 rc=0
2021-09-11 21:19:30.030000|000000FCF11FFCD0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=low_cardinality&cache=no
2021-09-11 21:19:30.030000|000000FCF11FFCD0|:000000000000000 select(1000000)
2021-09-11 21:19:30.218000|000000FCF11FFCD0|:000000188000000 output(1000000)
2021-09-11 21:19:30.223000|000000FCF11FFCD0|:000000193000000 send(23946460): 23946460/23946460
2021-09-11 21:19:30.223000|000000FCF11FFCD0|<000000193000000 rc=0
2021-09-11 21:19:33.923000|000000FCF11FFCD0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=low_cardinality_vector&cache=no
2021-09-11 21:19:33.923000|000000FCF11FFCD0|:000000000000000 select(1000000)
2021-09-11 21:19:34.347000|000000FCF11FFCD0|:000000424000000 output(1000000)
2021-09-11 21:19:34.364000|000000FCF11FFCD0|:000000441000000 send(75557372): 75557372/75557372
2021-09-11 21:19:34.364000|000000FCF11FFCD0|<000000441000000 rc=0
2021-09-11 22:26:00.101000|000000210E2FF6C0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=middle_cardinality&sort_keys=middle_cardinality&cache=no
2021-09-11 22:26:00.101000|000000210E2FF6C0|:000000000000000 select(1000000)
2021-09-11 22:26:00.401000|000000210E2FF6C0|:000000300000000 sort(1000000): middle_cardinality
2021-09-11 22:26:00.765000|000000210E2FF6C0|:000000664000000 output(1000000)
2021-09-11 22:26:00.780000|000000210E2FF6C0|:000000679000000 send(24944732): 24944732/24944732
2021-09-11 22:26:00.780000|000000210E2FF6C0|<000000679000000 rc=0



After log
2021-09-11 21:12:23.373000|000000ACD22FF6A0|<000007081000000 rc=0
2021-09-11 21:12:27.793000|000000ACD23FFCA0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=high_cardinality&cache=no
2021-09-11 21:12:27.794000|000000ACD23FFCA0|:000000001000000 select(1000000)
2021-09-11 21:12:28.225000|000000ACD23FFCA0|:000000432000000 output(1000000)
2021-09-11 21:12:28.231000|000000ACD23FFCA0|:000000438000000 send(29844604): 29844604/29844604
2021-09-11 21:12:28.231000|000000ACD23FFCA0|<000000438000000 rc=0
2021-09-11 21:12:32.766000|000000ACD20FFD40|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=high_cardinality_vector&cache=no
2021-09-11 21:12:32.767000|000000ACD20FFD40|:000000001000000 select(1000000)
2021-09-11 21:12:33.889000|000000ACD20FFD40|:000001123000000 output(1000000)
2021-09-11 21:12:33.911000|000000ACD20FFD40|:000001145000000 send(92777708): 92777708/92777708
2021-09-11 21:12:33.911000|000000ACD20FFD40|<000001145000000 rc=0
2021-09-11 21:12:37.119000|000000ACD21FF780|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=middle_cardinality&cache=no
2021-09-11 21:12:37.120000|000000ACD21FF780|:000000001000000 select(1000000)
2021-09-11 21:12:37.503000|000000ACD21FF780|:000000384000000 output(1000000)
2021-09-11 21:12:37.510000|000000ACD21FF780|:000000391000000 send(26521796): 26521796/26521796
2021-09-11 21:12:37.511000|000000ACD21FF780|<000000392000000 rc=0
2021-09-11 21:12:41.417000|000000ACD22FF6A0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=middle_cardinality_vector&cache=no
2021-09-11 21:12:41.417000|000000ACD22FF6A0|:000000000000000 select(1000000)
2021-09-11 21:12:42.404000|000000ACD22FF6A0|:000000987000000 output(1000000)
2021-09-11 21:12:42.428000|000000ACD22FF6A0|:000001011000000 send(82308484): 82308484/82308484
2021-09-11 21:12:42.428000|000000ACD22FF6A0|<000001011000000 rc=0
2021-09-11 21:12:45.408000|000000ACD23FFCA0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=low_cardinality&cache=no
2021-09-11 21:12:45.408000|000000ACD23FFCA0|:000000000000000 select(1000000)
2021-09-11 21:12:45.684000|000000ACD23FFCA0|:000000276000000 output(1000000)
2021-09-11 21:12:45.686000|000000ACD23FFCA0|:000000278000000 send(4267683): 4267683/4267683
2021-09-11 21:12:45.686000|000000ACD23FFCA0|<000000278000000 rc=0
2021-09-11 21:12:49.656000|000000ACD20FFD40|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=low_cardinality_vector&cache=no
2021-09-11 21:12:49.656000|000000ACD20FFD40|:000000000000000 select(1000000)
2021-09-11 21:12:50.263000|000000ACD20FFD40|:000000607000000 output(1000000)
2021-09-11 21:12:50.267000|000000ACD20FFD40|:000000611000000 send(16318244): 16318244/16318244
2021-09-11 21:12:50.267000|000000ACD20FFD40|<000000611000000 rc=0
2021-09-11 22:37:19.654000|000000D5B18FF6C0|>/d/select?table=Logs&command_version=3&output_type=apache-arrow&limit=-1&output_columns=middle_cardinality&sort_keys=middle_cardinality&cache=no
2021-09-11 22:37:19.654000|000000D5B18FF6C0|:000000000000000 select(1000000)
2021-09-11 22:37:19.873000|000000D5B18FF6C0|:000000219000000 sort(1000000): middle_cardinality
2021-09-11 22:37:20.236000|000000D5B18FF6C0|:000000582000000 output(1000000)
2021-09-11 22:37:20.240000|000000D5B18FF6C0|:000000586000000 send(5569875): 5569875/5569875
2021-09-11 22:37:20.240000|000000D5B18FF6C0|<000000586000000 rc=0


Summary



Output data (output column)
Before data size(byte)
After data size(byte)
Before elapsed time(sec)
After elapsed time(sec)




high_cardinality
25,946,284
29,844,604
0.3
0.44


high_cardinality_vector
81,557,012
92,777,708
0.81
1.15


middle_cardinality
24,945,036
26,521,796
0.25
0.392


middle_cardinality(sorted)
24,944,732
5,569,875
0.68
0.586


middle_cardinality_vector
78,555,436
82,308,484
0.55
1.011


low_cardinality
23,946,460
4,267,683
0.19
0.278


low_cardinality_vector
75,557,372
16,318,244
0.44
0.611



Note: The error may be large because they are executed only once.
The higher the cardinality become, the bigger the data size become than before.
This is expected behavior.
DictionaryArray just increases data size for indices if there is no duplicate data.
When the output data is sorted or the cardinality is low, the data size is smaller than before.
This is also expected behavior.
In these test cases, the elapsed time is always worsen because additional computing is required.
For cases middle_cardinality(sorted), low_cardinality and low_cardinality_vector, it may be shorter than before when IO is a bottleneck because the data size is smaller than before.
Others
I would like you to merge this PR after a new version of apache arrow with the following PR is merged is released.
apache/arrow#10990
Consideration

It might be better to create a new argument for the select command and so on or a new environment variable to specify the output type of arrow array (DictionaryArray or StringArray).

This is discussed at #1181, but looking at the test result, I think it is better to reconsider this.


It might be better to create a new environment variable to specity dictionary_length_threshold
There might be some other faster way to send delta dictionaries",Thanks!,True,{}
groonga/groonga,https://github.com/groonga/groonga,1264,2021-09-07T03:36:55Z,2021-09-07T05:11:48Z,2021-09-08T04:28:14Z,MERGED,True,1,0,1,https://github.com/komainu8,grn_io_seg_map_: fix a resource leak,1,[],https://github.com/groonga/groonga/pull/1264,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1264,"Currently, If DO_MAP fails, opened fileinfo is not close.
Because unlink does not release file descriptor.
Therefore, If DO_MAP fails, the file descriptor is not released until
Groonga restarts.","Currently, If DO_MAP fails, opened fileinfo is not close.
Because unlink does not release file descriptor.
Therefore, If DO_MAP fails, the file descriptor is not released until
Groonga restarts.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1264,2021-09-07T03:36:55Z,2021-09-07T05:11:48Z,2021-09-08T04:28:14Z,MERGED,True,1,0,1,https://github.com/komainu8,grn_io_seg_map_: fix a resource leak,1,[],https://github.com/groonga/groonga/pull/1264,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1264#issuecomment-913995397,"Currently, If DO_MAP fails, opened fileinfo is not close.
Because unlink does not release file descriptor.
Therefore, If DO_MAP fails, the file descriptor is not released until
Groonga restarts.",Good catch!,True,{}
groonga/groonga,https://github.com/groonga/groonga,1265,2021-09-10T03:43:40Z,2021-09-10T08:43:22Z,2021-09-10T08:43:26Z,MERGED,True,8,18,5,https://github.com/HashidaTKS,Update required apache arrow version to 3.0.0,2,[],https://github.com/groonga/groonga/pull/1265,https://github.com/HashidaTKS,1,https://github.com/groonga/groonga/pull/1265,"Update required apache arrow version to 3.0.0 in order to avoid complicating the source code.
Checking arrow version and branching by it are not so complicated for now, but they can be very complicated in the future.","Update required apache arrow version to 3.0.0 in order to avoid complicating the source code.
Checking arrow version and branching by it are not so complicated for now, but they can be very complicated in the future.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1265,2021-09-10T03:43:40Z,2021-09-10T08:43:22Z,2021-09-10T08:43:26Z,MERGED,True,8,18,5,https://github.com/HashidaTKS,Update required apache arrow version to 3.0.0,2,[],https://github.com/groonga/groonga/pull/1265,https://github.com/HashidaTKS,2,https://github.com/groonga/groonga/pull/1265#issuecomment-916607839,"Update required apache arrow version to 3.0.0 in order to avoid complicating the source code.
Checking arrow version and branching by it are not so complicated for now, but they can be very complicated in the future.",Related: #1263 (comment),True,{}
groonga/groonga,https://github.com/groonga/groonga,1265,2021-09-10T03:43:40Z,2021-09-10T08:43:22Z,2021-09-10T08:43:26Z,MERGED,True,8,18,5,https://github.com/HashidaTKS,Update required apache arrow version to 3.0.0,2,[],https://github.com/groonga/groonga/pull/1265,https://github.com/HashidaTKS,3,https://github.com/groonga/groonga/pull/1265#issuecomment-916609151,"Update required apache arrow version to 3.0.0 in order to avoid complicating the source code.
Checking arrow version and branching by it are not so complicated for now, but they can be very complicated in the future.","@kou
Could you please review this?",True,{}
groonga/groonga,https://github.com/groonga/groonga,1265,2021-09-10T03:43:40Z,2021-09-10T08:43:22Z,2021-09-10T08:43:26Z,MERGED,True,8,18,5,https://github.com/HashidaTKS,Update required apache arrow version to 3.0.0,2,[],https://github.com/groonga/groonga/pull/1265,https://github.com/kou,4,https://github.com/groonga/groonga/pull/1265#issuecomment-916738134,"Update required apache arrow version to 3.0.0 in order to avoid complicating the source code.
Checking arrow version and branching by it are not so complicated for now, but they can be very complicated in the future.",Thanks!,True,{}
groonga/groonga,https://github.com/groonga/groonga,1267,2021-09-27T08:10:05Z,2021-09-29T07:18:14Z,2021-09-29T07:18:15Z,MERGED,True,334,47,2,https://github.com/komainu8,doc news: add news topics for 11.0.7,2,[],https://github.com/groonga/groonga/pull/1267,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1267,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1269,2021-09-30T03:27:28Z,2021-10-04T07:40:29Z,2021-10-04T07:40:30Z,MERGED,True,450,21,10,https://github.com/kou,snip: add support for regular expression to find delimiter,1,[],https://github.com/groonga/groonga/pull/1269,https://github.com/kou,1,https://github.com/groonga/groonga/pull/1269,"Use case: Use only text in one sentence as snippet by finding ""."" (for
English) or U+3002 IDEOGRAPHIC FULL STOP (for Japanese).
Note that found delimiters aren't included in snippet. For example,
""."" isn't included in snippet with /./ regular expression. This is
useful for the use case.","Use case: Use only text in one sentence as snippet by finding ""."" (for
English) or U+3002 IDEOGRAPHIC FULL STOP (for Japanese).
Note that found delimiters aren't included in snippet. For example,
""."" isn't included in snippet with /./ regular expression. This is
useful for the use case.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1269,2021-09-30T03:27:28Z,2021-10-04T07:40:29Z,2021-10-04T07:40:30Z,MERGED,True,450,21,10,https://github.com/kou,snip: add support for regular expression to find delimiter,1,[],https://github.com/groonga/groonga/pull/1269,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1269#issuecomment-930750143,"Use case: Use only text in one sentence as snippet by finding ""."" (for
English) or U+3002 IDEOGRAPHIC FULL STOP (for Japanese).
Note that found delimiters aren't included in snippet. For example,
""."" isn't included in snippet with /./ regular expression. This is
useful for the use case.",Cc: @HashidaTKS,True,{}
groonga/groonga,https://github.com/groonga/groonga,1270,2021-09-30T06:47:23Z,2021-10-04T07:59:06Z,2021-10-04T07:59:06Z,MERGED,True,378,127,5,https://github.com/kou,snippet: add support for cache,1,[],https://github.com/groonga/groonga/pull/1270,https://github.com/kou,1,https://github.com/groonga/groonga/pull/1270,"New API: grn_proc_func_generate_cache_key()
We can use the API to support caching in other function.
This commits also add support for extracting keywords from the current
condition like snippet_html(). The current condition is used only when

default_open_tag option is specified
default_close_tag option is specified
No keywords are specified","New API: grn_proc_func_generate_cache_key()
We can use the API to support caching in other function.
This commits also add support for extracting keywords from the current
condition like snippet_html(). The current condition is used only when

default_open_tag option is specified
default_close_tag option is specified
No keywords are specified",True,{}
groonga/groonga,https://github.com/groonga/groonga,1270,2021-09-30T06:47:23Z,2021-10-04T07:59:06Z,2021-10-04T07:59:06Z,MERGED,True,378,127,5,https://github.com/kou,snippet: add support for cache,1,[],https://github.com/groonga/groonga/pull/1270,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1270#issuecomment-930866812,"New API: grn_proc_func_generate_cache_key()
We can use the API to support caching in other function.
This commits also add support for extracting keywords from the current
condition like snippet_html(). The current condition is used only when

default_open_tag option is specified
default_close_tag option is specified
No keywords are specified",Cc: @HashidaTKS,True,{}
groonga/groonga,https://github.com/groonga/groonga,1270,2021-09-30T06:47:23Z,2021-10-04T07:59:06Z,2021-10-04T07:59:06Z,MERGED,True,378,127,5,https://github.com/kou,snippet: add support for cache,1,[],https://github.com/groonga/groonga/pull/1270,https://github.com/kou,3,https://github.com/groonga/groonga/pull/1270#issuecomment-930868035,"New API: grn_proc_func_generate_cache_key()
We can use the API to support caching in other function.
This commits also add support for extracting keywords from the current
condition like snippet_html(). The current condition is used only when

default_open_tag option is specified
default_close_tag option is specified
No keywords are specified",This uses #1269 as the parent branch. So we should merge #1269 before this.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1271,2021-09-30T09:25:57Z,2021-10-04T08:09:58Z,2021-10-04T08:09:59Z,MERGED,True,759,98,12,https://github.com/kou,snippet: document,1,[],https://github.com/groonga/groonga/pull/1271,https://github.com/kou,1,https://github.com/groonga/groonga/pull/1271,It's not cover all features.,It's not cover all features.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1271,2021-09-30T09:25:57Z,2021-10-04T08:09:58Z,2021-10-04T08:09:59Z,MERGED,True,759,98,12,https://github.com/kou,snippet: document,1,[],https://github.com/groonga/groonga/pull/1271,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1271#issuecomment-931128278,It's not cover all features.,This uses #1270 as the parent branch. So we should merge #1270 before this.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1273,2021-10-06T05:31:04Z,2021-10-07T06:28:55Z,2021-10-07T06:28:55Z,MERGED,True,34,2,5,https://github.com/kou,arrow: fix a bug that no response is returned on error,1,[],https://github.com/groonga/groonga/pull/1273,https://github.com/kou,1,https://github.com/groonga/groonga/pull/1273,"If an error is occurred in command (e.g. syntax error in filter),
ctx->rc is not GRN_SUCCESS even when grn_arrow_stream_writer_open() is
succeeded. It causes no response.","If an error is occurred in command (e.g. syntax error in filter),
ctx->rc is not GRN_SUCCESS even when grn_arrow_stream_writer_open() is
succeeded. It causes no response.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1273,2021-10-06T05:31:04Z,2021-10-07T06:28:55Z,2021-10-07T06:28:55Z,MERGED,True,34,2,5,https://github.com/kou,arrow: fix a bug that no response is returned on error,1,[],https://github.com/groonga/groonga/pull/1273,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1273#issuecomment-935494418,"If an error is occurred in command (e.g. syntax error in filter),
ctx->rc is not GRN_SUCCESS even when grn_arrow_stream_writer_open() is
succeeded. It causes no response.",Cc: @HashidaTKS,True,{}
groonga/groonga,https://github.com/groonga/groonga,1274,2021-10-06T06:25:17Z,2021-10-07T06:32:29Z,2021-10-07T06:32:36Z,CLOSED,False,0,0,0,https://github.com/kou,grn_obj_search: add support for auto cast in table search,0,[],https://github.com/groonga/groonga/pull/1274,https://github.com/kou,1,https://github.com/groonga/groonga/pull/1274,"Without this, in_values(_key, 10) doesn't work with UInt64 key
table. Because 10 is parsed as Int32.","Without this, in_values(_key, 10) doesn't work with UInt64 key
table. Because 10 is parsed as Int32.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1274,2021-10-06T06:25:17Z,2021-10-07T06:32:29Z,2021-10-07T06:32:36Z,CLOSED,False,0,0,0,https://github.com/kou,grn_obj_search: add support for auto cast in table search,0,[],https://github.com/groonga/groonga/pull/1274,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1274#issuecomment-935563122,"Without this, in_values(_key, 10) doesn't work with UInt64 key
table. Because 10 is parsed as Int32.",Cc: @HashidaTKS,True,{}
groonga/groonga,https://github.com/groonga/groonga,1275,2021-10-08T06:08:17Z,2021-10-11T04:39:54Z,2021-10-13T10:44:37Z,CLOSED,False,708,114,37,https://github.com/kou,window_rank: add a new window function,1,[],https://github.com/groonga/groonga/pull/1275,https://github.com/kou,1,https://github.com/groonga/groonga/pull/1275,New API: grn_window_is_value_changed(),New API: grn_window_is_value_changed(),True,{}
groonga/groonga,https://github.com/groonga/groonga,1275,2021-10-08T06:08:17Z,2021-10-11T04:39:54Z,2021-10-13T10:44:37Z,CLOSED,False,708,114,37,https://github.com/kou,window_rank: add a new window function,1,[],https://github.com/groonga/groonga/pull/1275,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1275#issuecomment-938371226,New API: grn_window_is_value_changed(),Cc: @HashidaTKS,True,{}
groonga/groonga,https://github.com/groonga/groonga,1275,2021-10-08T06:08:17Z,2021-10-11T04:39:54Z,2021-10-13T10:44:37Z,CLOSED,False,708,114,37,https://github.com/kou,window_rank: add a new window function,1,[],https://github.com/groonga/groonga/pull/1275,https://github.com/kou,3,https://github.com/groonga/groonga/pull/1275#issuecomment-939675438,New API: grn_window_is_value_changed(),I merge this because I want to use this for subsequent work. But you can add comments if you find anything.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1275,2021-10-08T06:08:17Z,2021-10-11T04:39:54Z,2021-10-13T10:44:37Z,CLOSED,False,708,114,37,https://github.com/kou,window_rank: add a new window function,1,[],https://github.com/groonga/groonga/pull/1275,https://github.com/HashidaTKS,4,https://github.com/groonga/groonga/pull/1275#issuecomment-939690211,New API: grn_window_is_value_changed(),"Sorry for my delay.
I will look this today or tommorow.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1275,2021-10-08T06:08:17Z,2021-10-11T04:39:54Z,2021-10-13T10:44:37Z,CLOSED,False,708,114,37,https://github.com/kou,window_rank: add a new window function,1,[],https://github.com/groonga/groonga/pull/1275,https://github.com/kou,5,https://github.com/groonga/groonga/pull/1275#issuecomment-939690387,New API: grn_window_is_value_changed(),No problem!,True,{}
groonga/groonga,https://github.com/groonga/groonga,1275,2021-10-08T06:08:17Z,2021-10-11T04:39:54Z,2021-10-13T10:44:37Z,CLOSED,False,708,114,37,https://github.com/kou,window_rank: add a new window function,1,[],https://github.com/groonga/groonga/pull/1275,https://github.com/kou,6,https://github.com/groonga/groonga/pull/1275#issuecomment-941377270,New API: grn_window_is_value_changed(),"It's a good idea. We can find new window function idea from PostgreSQL's window functions: https://www.postgresql.org/docs/current/functions-window.html
dense_rank is also implemented in PostgreSQL.
Could you open an issue for this as a feature request?",True,{}
groonga/groonga,https://github.com/groonga/groonga,1275,2021-10-08T06:08:17Z,2021-10-11T04:39:54Z,2021-10-13T10:44:37Z,CLOSED,False,708,114,37,https://github.com/kou,window_rank: add a new window function,1,[],https://github.com/groonga/groonga/pull/1275,https://github.com/HashidaTKS,7,https://github.com/groonga/groonga/pull/1275#issuecomment-942169537,New API: grn_window_is_value_changed(),"Could you open an issue for this as a feature request?

Sure, I have opened a new issue.
#1279",True,{}
groonga/groonga,https://github.com/groonga/groonga,1276,2021-10-11T01:17:12Z,2021-11-04T04:53:23Z,2021-11-04T04:53:23Z,MERGED,True,316,5,2,https://github.com/komainu8,doc news: add news topics for 11.0.9,1,[],https://github.com/groonga/groonga/pull/1276,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1276,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1277,2021-10-11T01:32:23Z,,2022-03-15T05:24:16Z,OPEN,False,98,2,1,https://github.com/komainu8,doc snippet: add missing explanations,2,[],https://github.com/groonga/groonga/pull/1277,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1277,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1278,2021-10-11T07:38:22Z,,2022-03-15T05:24:16Z,OPEN,False,28,3,3,https://github.com/komainu8,package: add a task for tagging and uploading source archive,4,[],https://github.com/groonga/groonga/pull/1278,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1278,"I added a rake task for tagging and uploading the source archive.
We can set tag, make source archive and, upload source archive by the following command.
rake archive:tag","I added a rake task for tagging and uploading the source archive.
We can set tag, make source archive and, upload source archive by the following command.
rake archive:tag",True,{}
groonga/groonga,https://github.com/groonga/groonga,1278,2021-10-11T07:38:22Z,,2022-03-15T05:24:16Z,OPEN,False,28,3,3,https://github.com/komainu8,package: add a task for tagging and uploading source archive,4,[],https://github.com/groonga/groonga/pull/1278,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/1278#issuecomment-939771786,"I added a rake task for tagging and uploading the source archive.
We can set tag, make source archive and, upload source archive by the following command.
rake archive:tag",Cc: @HashidaTKS,True,{}
groonga/groonga,https://github.com/groonga/groonga,1278,2021-10-11T07:38:22Z,,2022-03-15T05:24:16Z,OPEN,False,28,3,3,https://github.com/komainu8,package: add a task for tagging and uploading source archive,4,[],https://github.com/groonga/groonga/pull/1278,https://github.com/kou,3,https://github.com/groonga/groonga/pull/1278#issuecomment-939772674,"I added a rake task for tagging and uploading the source archive.
We can set tag, make source archive and, upload source archive by the following command.
rake archive:tag","I don't like this approach.
I want to build archive in CI instead of building archive on local. And I just want to download archive from CI and upload it to packages.groonga.org.",True,{'THUMBS_UP': ['https://github.com/HashidaTKS']}
groonga/groonga,https://github.com/groonga/groonga,1278,2021-10-11T07:38:22Z,,2022-03-15T05:24:16Z,OPEN,False,28,3,3,https://github.com/komainu8,package: add a task for tagging and uploading source archive,4,[],https://github.com/groonga/groonga/pull/1278,https://github.com/HashidaTKS,4,https://github.com/groonga/groonga/pull/1278#issuecomment-946739891,"I added a rake task for tagging and uploading the source archive.
We can set tag, make source archive and, upload source archive by the following command.
rake archive:tag",Is this a work in progress?,True,{}
groonga/groonga,https://github.com/groonga/groonga,1278,2021-10-11T07:38:22Z,,2022-03-15T05:24:16Z,OPEN,False,28,3,3,https://github.com/komainu8,package: add a task for tagging and uploading source archive,4,[],https://github.com/groonga/groonga/pull/1278,https://github.com/komainu8,5,https://github.com/groonga/groonga/pull/1278#issuecomment-947193806,"I added a rake task for tagging and uploading the source archive.
We can set tag, make source archive and, upload source archive by the following command.
rake archive:tag","@HashidaTKS Yes, this PR is a work in progress yet.",True,{'THUMBS_UP': ['https://github.com/HashidaTKS']}
groonga/groonga,https://github.com/groonga/groonga,1278,2021-10-11T07:38:22Z,,2022-03-15T05:24:16Z,OPEN,False,28,3,3,https://github.com/komainu8,package: add a task for tagging and uploading source archive,4,[],https://github.com/groonga/groonga/pull/1278,https://github.com/kou,6,https://github.com/groonga/groonga/pull/1278#issuecomment-977288967,"I added a rake task for tagging and uploading the source archive.
We can set tag, make source archive and, upload source archive by the following command.
rake archive:tag",c63a7c2 build and upload source archive but it doesn't support uploading to packages.groonga.org yet.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1283,2021-10-27T13:50:02Z,2021-11-02T19:55:43Z,2021-11-02T19:55:43Z,MERGED,True,55,2,4,https://github.com/komainu8,packages yum: add a package for AlmaLinux 8,4,[],https://github.com/groonga/groonga/pull/1283,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1283,GitHub: Fix a GH-1282.,GitHub: Fix a GH-1282.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1283,2021-10-27T13:50:02Z,2021-11-02T19:55:43Z,2021-11-02T19:55:43Z,MERGED,True,55,2,4,https://github.com/komainu8,packages yum: add a package for AlmaLinux 8,4,[],https://github.com/groonga/groonga/pull/1283,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/1283#issuecomment-952973075,GitHub: Fix a GH-1282.,"packages.groonga.org で提供しているmecab-develとAlmaLinux 8 で提供しているmecabのバージョンが違うのでビルドに失敗する。
AlamLinux 8のmecabのほうがバージョンが新しいので packages.groonga.org で提供しているmecab-develを更新する必要がある。",True,{}
groonga/groonga,https://github.com/groonga/groonga,1283,2021-10-27T13:50:02Z,2021-11-02T19:55:43Z,2021-11-02T19:55:43Z,MERGED,True,55,2,4,https://github.com/komainu8,packages yum: add a package for AlmaLinux 8,4,[],https://github.com/groonga/groonga/pull/1283,https://github.com/kou,3,https://github.com/groonga/groonga/pull/1283#issuecomment-957159296,GitHub: Fix a GH-1282.,"We can merge this with:
diff --git a/packages/Rakefile b/packages/Rakefile
index 11b602940..678e81217 100644
--- a/packages/Rakefile
+++ b/packages/Rakefile
@@ -63,6 +63,7 @@ class GroongaPackageTask < PackagesGroongaOrgPackageTask
 
   def yum_targets_default
     [
+      ""almalinux-8"",
       ""centos-7"",
       ""centos-8"",
     ]",True,{}
groonga/groonga,https://github.com/groonga/groonga,1284,2021-10-28T16:40:22Z,2021-11-21T23:57:11Z,2021-11-21T23:57:14Z,MERGED,True,284,11,6,https://github.com/HashidaTKS,load: add support for ISO 8601 time format,13,[],https://github.com/groonga/groonga/pull/1284,https://github.com/HashidaTKS,1,https://github.com/groonga/groonga/pull/1284,"Specification
Only support the extended date and time format like below.
(We cannot omit - or /.)
https://datatracker.ietf.org/doc/html/rfc3339#section-5.6

YYYY-MM-ddThh:mm:ss.sZ
YYYY-MM-ddThh:mm:ss.s+10:00
YYYY-MM-ddThh:mm:ss.s-10:00

The ""T"" and ""Z"" characters in this syntax may alternatively be lower case ""t"" or ""z"" respectively.
( from https://datatracker.ietf.org/doc/html/rfc3339#section-5.6 )
The - character in this syntax may alternatively be / because the current date parser of Groonga support it.
When the time-offset is specified, the time is converted to UTC based on the time-offset.
When the time-offset is omitted, the time is regarded as local time and converted to UTC .","Specification
Only support the extended date and time format like below.
(We cannot omit - or /.)
https://datatracker.ietf.org/doc/html/rfc3339#section-5.6

YYYY-MM-ddThh:mm:ss.sZ
YYYY-MM-ddThh:mm:ss.s+10:00
YYYY-MM-ddThh:mm:ss.s-10:00

The ""T"" and ""Z"" characters in this syntax may alternatively be lower case ""t"" or ""z"" respectively.
( from https://datatracker.ietf.org/doc/html/rfc3339#section-5.6 )
The - character in this syntax may alternatively be / because the current date parser of Groonga support it.
When the time-offset is specified, the time is converted to UTC based on the time-offset.
When the time-offset is omitted, the time is regarded as local time and converted to UTC .",True,{}
groonga/groonga,https://github.com/groonga/groonga,1284,2021-10-28T16:40:22Z,2021-11-21T23:57:11Z,2021-11-21T23:57:14Z,MERGED,True,284,11,6,https://github.com/HashidaTKS,load: add support for ISO 8601 time format,13,[],https://github.com/groonga/groonga/pull/1284,https://github.com/HashidaTKS,2,https://github.com/groonga/groonga/pull/1284#issuecomment-954016825,"Specification
Only support the extended date and time format like below.
(We cannot omit - or /.)
https://datatracker.ietf.org/doc/html/rfc3339#section-5.6

YYYY-MM-ddThh:mm:ss.sZ
YYYY-MM-ddThh:mm:ss.s+10:00
YYYY-MM-ddThh:mm:ss.s-10:00

The ""T"" and ""Z"" characters in this syntax may alternatively be lower case ""t"" or ""z"" respectively.
( from https://datatracker.ietf.org/doc/html/rfc3339#section-5.6 )
The - character in this syntax may alternatively be / because the current date parser of Groonga support it.
When the time-offset is specified, the time is converted to UTC based on the time-offset.
When the time-offset is omitted, the time is regarded as local time and converted to UTC .",#1228,True,{}
groonga/groonga,https://github.com/groonga/groonga,1284,2021-10-28T16:40:22Z,2021-11-21T23:57:11Z,2021-11-21T23:57:14Z,MERGED,True,284,11,6,https://github.com/HashidaTKS,load: add support for ISO 8601 time format,13,[],https://github.com/groonga/groonga/pull/1284,https://github.com/HashidaTKS,3,https://github.com/groonga/groonga/pull/1284#issuecomment-955773484,"Specification
Only support the extended date and time format like below.
(We cannot omit - or /.)
https://datatracker.ietf.org/doc/html/rfc3339#section-5.6

YYYY-MM-ddThh:mm:ss.sZ
YYYY-MM-ddThh:mm:ss.s+10:00
YYYY-MM-ddThh:mm:ss.s-10:00

The ""T"" and ""Z"" characters in this syntax may alternatively be lower case ""t"" or ""z"" respectively.
( from https://datatracker.ietf.org/doc/html/rfc3339#section-5.6 )
The - character in this syntax may alternatively be / because the current date parser of Groonga support it.
When the time-offset is specified, the time is converted to UTC based on the time-offset.
When the time-offset is omitted, the time is regarded as local time and converted to UTC .","This is still a work in progress.

Test more
Write a description for this PR",True,{}
groonga/groonga,https://github.com/groonga/groonga,1284,2021-10-28T16:40:22Z,2021-11-21T23:57:11Z,2021-11-21T23:57:14Z,MERGED,True,284,11,6,https://github.com/HashidaTKS,load: add support for ISO 8601 time format,13,[],https://github.com/groonga/groonga/pull/1284,https://github.com/HashidaTKS,4,https://github.com/groonga/groonga/pull/1284#issuecomment-959625637,"Specification
Only support the extended date and time format like below.
(We cannot omit - or /.)
https://datatracker.ietf.org/doc/html/rfc3339#section-5.6

YYYY-MM-ddThh:mm:ss.sZ
YYYY-MM-ddThh:mm:ss.s+10:00
YYYY-MM-ddThh:mm:ss.s-10:00

The ""T"" and ""Z"" characters in this syntax may alternatively be lower case ""t"" or ""z"" respectively.
( from https://datatracker.ietf.org/doc/html/rfc3339#section-5.6 )
The - character in this syntax may alternatively be / because the current date parser of Groonga support it.
When the time-offset is specified, the time is converted to UTC based on the time-offset.
When the time-offset is omitted, the time is regarded as local time and converted to UTC .","Cc: @kou
Could you please review this when you have time?",True,{}
groonga/groonga,https://github.com/groonga/groonga,1284,2021-10-28T16:40:22Z,2021-11-21T23:57:11Z,2021-11-21T23:57:14Z,MERGED,True,284,11,6,https://github.com/HashidaTKS,load: add support for ISO 8601 time format,13,[],https://github.com/groonga/groonga/pull/1284,https://github.com/HashidaTKS,5,https://github.com/groonga/groonga/pull/1284#issuecomment-960344614,"Specification
Only support the extended date and time format like below.
(We cannot omit - or /.)
https://datatracker.ietf.org/doc/html/rfc3339#section-5.6

YYYY-MM-ddThh:mm:ss.sZ
YYYY-MM-ddThh:mm:ss.s+10:00
YYYY-MM-ddThh:mm:ss.s-10:00

The ""T"" and ""Z"" characters in this syntax may alternatively be lower case ""t"" or ""z"" respectively.
( from https://datatracker.ietf.org/doc/html/rfc3339#section-5.6 )
The - character in this syntax may alternatively be / because the current date parser of Groonga support it.
When the time-offset is specified, the time is converted to UTC based on the time-offset.
When the time-offset is omitted, the time is regarded as local time and converted to UTC .","Ah, I will check failed tests.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1284,2021-10-28T16:40:22Z,2021-11-21T23:57:11Z,2021-11-21T23:57:14Z,MERGED,True,284,11,6,https://github.com/HashidaTKS,load: add support for ISO 8601 time format,13,[],https://github.com/groonga/groonga/pull/1284,https://github.com/kou,6,https://github.com/groonga/groonga/pull/1284#issuecomment-960369092,"Specification
Only support the extended date and time format like below.
(We cannot omit - or /.)
https://datatracker.ietf.org/doc/html/rfc3339#section-5.6

YYYY-MM-ddThh:mm:ss.sZ
YYYY-MM-ddThh:mm:ss.s+10:00
YYYY-MM-ddThh:mm:ss.s-10:00

The ""T"" and ""Z"" characters in this syntax may alternatively be lower case ""t"" or ""z"" respectively.
( from https://datatracker.ietf.org/doc/html/rfc3339#section-5.6 )
The - character in this syntax may alternatively be / because the current date parser of Groonga support it.
When the time-offset is specified, the time is converted to UTC based on the time-offset.
When the time-offset is omitted, the time is regarded as local time and converted to UTC .",These failures will be unrelated.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1284,2021-10-28T16:40:22Z,2021-11-21T23:57:11Z,2021-11-21T23:57:14Z,MERGED,True,284,11,6,https://github.com/HashidaTKS,load: add support for ISO 8601 time format,13,[],https://github.com/groonga/groonga/pull/1284,https://github.com/HashidaTKS,7,https://github.com/groonga/groonga/pull/1284#issuecomment-961207995,"Specification
Only support the extended date and time format like below.
(We cannot omit - or /.)
https://datatracker.ietf.org/doc/html/rfc3339#section-5.6

YYYY-MM-ddThh:mm:ss.sZ
YYYY-MM-ddThh:mm:ss.s+10:00
YYYY-MM-ddThh:mm:ss.s-10:00

The ""T"" and ""Z"" characters in this syntax may alternatively be lower case ""t"" or ""z"" respectively.
( from https://datatracker.ietf.org/doc/html/rfc3339#section-5.6 )
The - character in this syntax may alternatively be / because the current date parser of Groonga support it.
When the time-offset is specified, the time is converted to UTC based on the time-offset.
When the time-offset is omitted, the time is regarded as local time and converted to UTC .","These failures don't seem to be related to this PR changes, these seem to be caused by environment problems.

Failing to fetch submodules
Failing to setup mysy

Sorry but I haven't had much time to investigate, is there any idea to fix them?
Or can we ignore these failures at this PR?",True,{}
groonga/groonga,https://github.com/groonga/groonga,1284,2021-10-28T16:40:22Z,2021-11-21T23:57:11Z,2021-11-21T23:57:14Z,MERGED,True,284,11,6,https://github.com/HashidaTKS,load: add support for ISO 8601 time format,13,[],https://github.com/groonga/groonga/pull/1284,https://github.com/kou,8,https://github.com/groonga/groonga/pull/1284#issuecomment-961390939,"Specification
Only support the extended date and time format like below.
(We cannot omit - or /.)
https://datatracker.ietf.org/doc/html/rfc3339#section-5.6

YYYY-MM-ddThh:mm:ss.sZ
YYYY-MM-ddThh:mm:ss.s+10:00
YYYY-MM-ddThh:mm:ss.s-10:00

The ""T"" and ""Z"" characters in this syntax may alternatively be lower case ""t"" or ""z"" respectively.
( from https://datatracker.ietf.org/doc/html/rfc3339#section-5.6 )
The - character in this syntax may alternatively be / because the current date parser of Groonga support it.
When the time-offset is specified, the time is converted to UTC based on the time-offset.
When the time-offset is omitted, the time is regarded as local time and converted to UTC .","Could you rebase on master?
Then they will be fixed.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1284,2021-10-28T16:40:22Z,2021-11-21T23:57:11Z,2021-11-21T23:57:14Z,MERGED,True,284,11,6,https://github.com/HashidaTKS,load: add support for ISO 8601 time format,13,[],https://github.com/groonga/groonga/pull/1284,https://github.com/HashidaTKS,9,https://github.com/groonga/groonga/pull/1284#issuecomment-961755725,"Specification
Only support the extended date and time format like below.
(We cannot omit - or /.)
https://datatracker.ietf.org/doc/html/rfc3339#section-5.6

YYYY-MM-ddThh:mm:ss.sZ
YYYY-MM-ddThh:mm:ss.s+10:00
YYYY-MM-ddThh:mm:ss.s-10:00

The ""T"" and ""Z"" characters in this syntax may alternatively be lower case ""t"" or ""z"" respectively.
( from https://datatracker.ietf.org/doc/html/rfc3339#section-5.6 )
The - character in this syntax may alternatively be / because the current date parser of Groonga support it.
When the time-offset is specified, the time is converted to UTC based on the time-offset.
When the time-offset is omitted, the time is regarded as local time and converted to UTC .","@kou
Thank you!
I have rebased the branch, but still a check fails during building mecab...
By the way, could I re-run failed actions?
It seems that I have no permission.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1284,2021-10-28T16:40:22Z,2021-11-21T23:57:11Z,2021-11-21T23:57:14Z,MERGED,True,284,11,6,https://github.com/HashidaTKS,load: add support for ISO 8601 time format,13,[],https://github.com/groonga/groonga/pull/1284,https://github.com/komainu8,10,https://github.com/groonga/groonga/pull/1284#issuecomment-961780906,"Specification
Only support the extended date and time format like below.
(We cannot omit - or /.)
https://datatracker.ietf.org/doc/html/rfc3339#section-5.6

YYYY-MM-ddThh:mm:ss.sZ
YYYY-MM-ddThh:mm:ss.s+10:00
YYYY-MM-ddThh:mm:ss.s-10:00

The ""T"" and ""Z"" characters in this syntax may alternatively be lower case ""t"" or ""z"" respectively.
( from https://datatracker.ietf.org/doc/html/rfc3339#section-5.6 )
The - character in this syntax may alternatively be / because the current date parser of Groonga support it.
When the time-offset is specified, the time is converted to UTC based on the time-offset.
When the time-offset is omitted, the time is regarded as local time and converted to UTC .",I re-ran failed actions.,True,{'THUMBS_UP': ['https://github.com/HashidaTKS']}
groonga/groonga,https://github.com/groonga/groonga,1284,2021-10-28T16:40:22Z,2021-11-21T23:57:11Z,2021-11-21T23:57:14Z,MERGED,True,284,11,6,https://github.com/HashidaTKS,load: add support for ISO 8601 time format,13,[],https://github.com/groonga/groonga/pull/1284,https://github.com/komainu8,11,https://github.com/groonga/groonga/pull/1284#issuecomment-961860493,"Specification
Only support the extended date and time format like below.
(We cannot omit - or /.)
https://datatracker.ietf.org/doc/html/rfc3339#section-5.6

YYYY-MM-ddThh:mm:ss.sZ
YYYY-MM-ddThh:mm:ss.s+10:00
YYYY-MM-ddThh:mm:ss.s-10:00

The ""T"" and ""Z"" characters in this syntax may alternatively be lower case ""t"" or ""z"" respectively.
( from https://datatracker.ietf.org/doc/html/rfc3339#section-5.6 )
The - character in this syntax may alternatively be / because the current date parser of Groonga support it.
When the time-offset is specified, the time is converted to UTC based on the time-offset.
When the time-offset is omitted, the time is regarded as local time and converted to UTC .","All tests have passed.
I'll review this PR in a few days.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1284,2021-10-28T16:40:22Z,2021-11-21T23:57:11Z,2021-11-21T23:57:14Z,MERGED,True,284,11,6,https://github.com/HashidaTKS,load: add support for ISO 8601 time format,13,[],https://github.com/groonga/groonga/pull/1284,https://github.com/HashidaTKS,12,https://github.com/groonga/groonga/pull/1284#issuecomment-962030322,"Specification
Only support the extended date and time format like below.
(We cannot omit - or /.)
https://datatracker.ietf.org/doc/html/rfc3339#section-5.6

YYYY-MM-ddThh:mm:ss.sZ
YYYY-MM-ddThh:mm:ss.s+10:00
YYYY-MM-ddThh:mm:ss.s-10:00

The ""T"" and ""Z"" characters in this syntax may alternatively be lower case ""t"" or ""z"" respectively.
( from https://datatracker.ietf.org/doc/html/rfc3339#section-5.6 )
The - character in this syntax may alternatively be / because the current date parser of Groonga support it.
When the time-offset is specified, the time is converted to UTC based on the time-offset.
When the time-offset is omitted, the time is regarded as local time and converted to UTC .","@komainu8
Thank you!",True,{}
groonga/groonga,https://github.com/groonga/groonga,1284,2021-10-28T16:40:22Z,2021-11-21T23:57:11Z,2021-11-21T23:57:14Z,MERGED,True,284,11,6,https://github.com/HashidaTKS,load: add support for ISO 8601 time format,13,[],https://github.com/groonga/groonga/pull/1284,https://github.com/HashidaTKS,13,https://github.com/groonga/groonga/pull/1284#issuecomment-968260429,"Specification
Only support the extended date and time format like below.
(We cannot omit - or /.)
https://datatracker.ietf.org/doc/html/rfc3339#section-5.6

YYYY-MM-ddThh:mm:ss.sZ
YYYY-MM-ddThh:mm:ss.s+10:00
YYYY-MM-ddThh:mm:ss.s-10:00

The ""T"" and ""Z"" characters in this syntax may alternatively be lower case ""t"" or ""z"" respectively.
( from https://datatracker.ietf.org/doc/html/rfc3339#section-5.6 )
The - character in this syntax may alternatively be / because the current date parser of Groonga support it.
When the time-offset is specified, the time is converted to UTC based on the time-offset.
When the time-offset is omitted, the time is regarded as local time and converted to UTC .","@komainu8
Thanks for your review!
I have addressed your comments.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1284,2021-10-28T16:40:22Z,2021-11-21T23:57:11Z,2021-11-21T23:57:14Z,MERGED,True,284,11,6,https://github.com/HashidaTKS,load: add support for ISO 8601 time format,13,[],https://github.com/groonga/groonga/pull/1284,https://github.com/HashidaTKS,14,https://github.com/groonga/groonga/pull/1284#issuecomment-969191254,"Specification
Only support the extended date and time format like below.
(We cannot omit - or /.)
https://datatracker.ietf.org/doc/html/rfc3339#section-5.6

YYYY-MM-ddThh:mm:ss.sZ
YYYY-MM-ddThh:mm:ss.s+10:00
YYYY-MM-ddThh:mm:ss.s-10:00

The ""T"" and ""Z"" characters in this syntax may alternatively be lower case ""t"" or ""z"" respectively.
( from https://datatracker.ietf.org/doc/html/rfc3339#section-5.6 )
The - character in this syntax may alternatively be / because the current date parser of Groonga support it.
When the time-offset is specified, the time is converted to UTC based on the time-offset.
When the time-offset is omitted, the time is regarded as local time and converted to UTC .",Rebased on master,True,{}
groonga/groonga,https://github.com/groonga/groonga,1284,2021-10-28T16:40:22Z,2021-11-21T23:57:11Z,2021-11-21T23:57:14Z,MERGED,True,284,11,6,https://github.com/HashidaTKS,load: add support for ISO 8601 time format,13,[],https://github.com/groonga/groonga/pull/1284,https://github.com/HashidaTKS,15,https://github.com/groonga/groonga/pull/1284#issuecomment-974248574,"Specification
Only support the extended date and time format like below.
(We cannot omit - or /.)
https://datatracker.ietf.org/doc/html/rfc3339#section-5.6

YYYY-MM-ddThh:mm:ss.sZ
YYYY-MM-ddThh:mm:ss.s+10:00
YYYY-MM-ddThh:mm:ss.s-10:00

The ""T"" and ""Z"" characters in this syntax may alternatively be lower case ""t"" or ""z"" respectively.
( from https://datatracker.ietf.org/doc/html/rfc3339#section-5.6 )
The - character in this syntax may alternatively be / because the current date parser of Groonga support it.
When the time-offset is specified, the time is converted to UTC based on the time-offset.
When the time-offset is omitted, the time is regarded as local time and converted to UTC .","@kou
Thank you for the review!
I have addressed your comments.
Please review again.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1284,2021-10-28T16:40:22Z,2021-11-21T23:57:11Z,2021-11-21T23:57:14Z,MERGED,True,284,11,6,https://github.com/HashidaTKS,load: add support for ISO 8601 time format,13,[],https://github.com/groonga/groonga/pull/1284,https://github.com/kou,16,https://github.com/groonga/groonga/pull/1284#issuecomment-974924014,"Specification
Only support the extended date and time format like below.
(We cannot omit - or /.)
https://datatracker.ietf.org/doc/html/rfc3339#section-5.6

YYYY-MM-ddThh:mm:ss.sZ
YYYY-MM-ddThh:mm:ss.s+10:00
YYYY-MM-ddThh:mm:ss.s-10:00

The ""T"" and ""Z"" characters in this syntax may alternatively be lower case ""t"" or ""z"" respectively.
( from https://datatracker.ietf.org/doc/html/rfc3339#section-5.6 )
The - character in this syntax may alternatively be / because the current date parser of Groonga support it.
When the time-offset is specified, the time is converted to UTC based on the time-offset.
When the time-offset is omitted, the time is regarded as local time and converted to UTC .",Thanks!,True,{}
groonga/groonga,https://github.com/groonga/groonga,1285,2021-11-02T03:11:17Z,2021-11-02T04:08:34Z,2021-11-02T04:33:27Z,MERGED,True,1,1,1,https://github.com/komainu8,apache-arrow: use the latest Apache Arrow (6.0.0),1,[],https://github.com/groonga/groonga/pull/1285,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1285,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1286,2021-11-04T01:26:49Z,2021-11-04T02:21:06Z,2021-11-04T02:21:07Z,MERGED,True,1,1,1,https://github.com/komainu8,ci mingw: follow a package name change,1,[],https://github.com/groonga/groonga/pull/1286,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1286,"Because pactoys-git renamed in upstream at the following commit.
msys2/MSYS2-packages@0235754#diff-27400a81bc42a425824029a2cf68650fea9de0875c5fb0c7c4b53ccd8665b9d7","Because pactoys-git renamed in upstream at the following commit.
msys2/MSYS2-packages@0235754#diff-27400a81bc42a425824029a2cf68650fea9de0875c5fb0c7c4b53ccd8665b9d7",True,{}
groonga/groonga,https://github.com/groonga/groonga,1288,2021-11-07T16:59:43Z,2021-11-07T23:56:17Z,2021-11-08T04:07:31Z,MERGED,True,2,2,2,https://github.com/HashidaTKS,groonga admin: Fix advanced search to work properly,1,[],https://github.com/groonga/groonga/pull/1288,https://github.com/HashidaTKS,1,https://github.com/groonga/groonga/pull/1288,"#1186
$('#table-tab-recordlist-full-checkbox').attr('checked') returns the initial state of the checkbox, that is not changed with the current state of the checkbox.
We should use prop() instead of attr() for this checkbox.
https://api.jquery.com/attr/




$( elem ).prop( ""checked"" )
true (Boolean) Will change with checkbox state




$( elem ).attr( ""checked"" )             (1.6+)
""checked"" (String) Initial state of the checkbox; does not change","#1186
$('#table-tab-recordlist-full-checkbox').attr('checked') returns the initial state of the checkbox, that is not changed with the current state of the checkbox.
We should use prop() instead of attr() for this checkbox.
https://api.jquery.com/attr/




$( elem ).prop( ""checked"" )
true (Boolean) Will change with checkbox state




$( elem ).attr( ""checked"" )             (1.6+)
""checked"" (String) Initial state of the checkbox; does not change",True,{}
groonga/groonga,https://github.com/groonga/groonga,1288,2021-11-07T16:59:43Z,2021-11-07T23:56:17Z,2021-11-08T04:07:31Z,MERGED,True,2,2,2,https://github.com/HashidaTKS,groonga admin: Fix advanced search to work properly,1,[],https://github.com/groonga/groonga/pull/1288,https://github.com/HashidaTKS,2,https://github.com/groonga/groonga/pull/1288#issuecomment-962649714,"#1186
$('#table-tab-recordlist-full-checkbox').attr('checked') returns the initial state of the checkbox, that is not changed with the current state of the checkbox.
We should use prop() instead of attr() for this checkbox.
https://api.jquery.com/attr/




$( elem ).prop( ""checked"" )
true (Boolean) Will change with checkbox state




$( elem ).attr( ""checked"" )             (1.6+)
""checked"" (String) Initial state of the checkbox; does not change","https://github.com/groonga/groonga/blob/master/data/html/admin/assets/groonga-admin.js#L1119
The code above may have the same problem, but as far as I've confirmed, it seems to work correctly, so I have not modified it for now.
I think it is better to also change attr('disabled', 'disabled') to prop('disable', true) when we modify it.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1288,2021-11-07T16:59:43Z,2021-11-07T23:56:17Z,2021-11-08T04:07:31Z,MERGED,True,2,2,2,https://github.com/HashidaTKS,groonga admin: Fix advanced search to work properly,1,[],https://github.com/groonga/groonga/pull/1288,https://github.com/HashidaTKS,3,https://github.com/groonga/groonga/pull/1288#issuecomment-962650445,"#1186
$('#table-tab-recordlist-full-checkbox').attr('checked') returns the initial state of the checkbox, that is not changed with the current state of the checkbox.
We should use prop() instead of attr() for this checkbox.
https://api.jquery.com/attr/




$( elem ).prop( ""checked"" )
true (Boolean) Will change with checkbox state




$( elem ).attr( ""checked"" )             (1.6+)
""checked"" (String) Initial state of the checkbox; does not change","Cc: @kou, @komainu8
Could you please review this when you have time?",True,{}
groonga/groonga,https://github.com/groonga/groonga,1288,2021-11-07T16:59:43Z,2021-11-07T23:56:17Z,2021-11-08T04:07:31Z,MERGED,True,2,2,2,https://github.com/HashidaTKS,groonga admin: Fix advanced search to work properly,1,[],https://github.com/groonga/groonga/pull/1288,https://github.com/kou,4,https://github.com/groonga/groonga/pull/1288#issuecomment-962705997,"#1186
$('#table-tab-recordlist-full-checkbox').attr('checked') returns the initial state of the checkbox, that is not changed with the current state of the checkbox.
We should use prop() instead of attr() for this checkbox.
https://api.jquery.com/attr/




$( elem ).prop( ""checked"" )
true (Boolean) Will change with checkbox state




$( elem ).attr( ""checked"" )             (1.6+)
""checked"" (String) Initial state of the checkbox; does not change",Thanks!,True,{}
groonga/groonga,https://github.com/groonga/groonga,1290,2021-11-22T04:39:57Z,2021-11-23T23:15:38Z,2021-12-04T18:11:03Z,MERGED,True,67,5,7,https://github.com/kou,expr: add GRN_EXPR_DISABLE_PREFIX_SEARCH,1,[],https://github.com/groonga/groonga/pull/1290,https://github.com/kou,1,https://github.com/groonga/groonga/pull/1290,"This is ""DISABLE_PREFIX_SEARCH"" in query_flags value.
This has an implementation for not only query syntax but also script
syntax but doesn't have a test for script syntax. Because there is no
API to specify flags for script syntax in the current Groonga
commands.","This is ""DISABLE_PREFIX_SEARCH"" in query_flags value.
This has an implementation for not only query syntax but also script
syntax but doesn't have a test for script syntax. Because there is no
API to specify flags for script syntax in the current Groonga
commands.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1290,2021-11-22T04:39:57Z,2021-11-23T23:15:38Z,2021-12-04T18:11:03Z,MERGED,True,67,5,7,https://github.com/kou,expr: add GRN_EXPR_DISABLE_PREFIX_SEARCH,1,[],https://github.com/groonga/groonga/pull/1290,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1290#issuecomment-977267217,"This is ""DISABLE_PREFIX_SEARCH"" in query_flags value.
This has an implementation for not only query syntax but also script
syntax but doesn't have a test for script syntax. Because there is no
API to specify flags for script syntax in the current Groonga
commands.","I merge this because I want this for the next release.
But anyone can review and leave comments after I merge this.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1291,2021-11-22T05:00:20Z,2021-11-23T23:18:45Z,2021-12-04T18:10:42Z,MERGED,True,105,21,9,https://github.com/kou,expr: add GRN_EXPR_DISABLE_AND_NOT,1,[],https://github.com/groonga/groonga/pull/1291,https://github.com/kou,1,https://github.com/groonga/groonga/pull/1291,"This is ""DISABLE_AND_NOT"" in query_flags value.
This has an implementation for not only query syntax but also script
syntax but doesn't have a test for script syntax. Because there is no
API to specify flags for script syntax in the current Groonga
commands.","This is ""DISABLE_AND_NOT"" in query_flags value.
This has an implementation for not only query syntax but also script
syntax but doesn't have a test for script syntax. Because there is no
API to specify flags for script syntax in the current Groonga
commands.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1291,2021-11-22T05:00:20Z,2021-11-23T23:18:45Z,2021-12-04T18:10:42Z,MERGED,True,105,21,9,https://github.com/kou,expr: add GRN_EXPR_DISABLE_AND_NOT,1,[],https://github.com/groonga/groonga/pull/1291,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1291#issuecomment-977271069,"This is ""DISABLE_AND_NOT"" in query_flags value.
This has an implementation for not only query syntax but also script
syntax but doesn't have a test for script syntax. Because there is no
API to specify flags for script syntax in the current Groonga
commands.","I merge this because I want this for the next release.
But anyone can review and leave comments after I merge this.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1292,2021-11-28T06:42:27Z,2021-11-28T12:41:59Z,2021-11-28T12:42:00Z,MERGED,True,350,38,2,https://github.com/komainu8,doc news: add news topics for 11.1.0,1,[],https://github.com/groonga/groonga/pull/1292,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1292,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1294,2021-11-28T14:15:42Z,2021-12-01T18:22:08Z,2021-12-02T04:17:29Z,CLOSED,False,0,0,1,https://github.com/HashidaTKS,1280: Out of space for highlight when we use NormalizerMySQLUnicodeCI in normalizer and we execute highlight_full() to a text include full-width spaces,1,[],https://github.com/groonga/groonga/pull/1294,https://github.com/HashidaTKS,1,https://github.com/groonga/groonga/pull/1294,"Reproduce the issue : 2h

I struggled to create an environment a little.


 Check the current code: 1h
 Modify: 1- 4h
 Test: 1h","Reproduce the issue : 2h

I struggled to create an environment a little.


 Check the current code: 1h
 Modify: 1- 4h
 Test: 1h",True,{}
groonga/groonga,https://github.com/groonga/groonga,1294,2021-11-28T14:15:42Z,2021-12-01T18:22:08Z,2021-12-02T04:17:29Z,CLOSED,False,0,0,1,https://github.com/HashidaTKS,1280: Out of space for highlight when we use NormalizerMySQLUnicodeCI in normalizer and we execute highlight_full() to a text include full-width spaces,1,[],https://github.com/groonga/groonga/pull/1294,https://github.com/HashidaTKS,2,https://github.com/groonga/groonga/pull/1294#issuecomment-981094086,"Reproduce the issue : 2h

I struggled to create an environment a little.


 Check the current code: 1h
 Modify: 1- 4h
 Test: 1h",#1280,True,{}
groonga/groonga,https://github.com/groonga/groonga,1294,2021-11-28T14:15:42Z,2021-12-01T18:22:08Z,2021-12-02T04:17:29Z,CLOSED,False,0,0,1,https://github.com/HashidaTKS,1280: Out of space for highlight when we use NormalizerMySQLUnicodeCI in normalizer and we execute highlight_full() to a text include full-width spaces,1,[],https://github.com/groonga/groonga/pull/1294,https://github.com/HashidaTKS,3,https://github.com/groonga/groonga/pull/1294#issuecomment-983935023,"Reproduce the issue : 2h

I struggled to create an environment a little.


 Check the current code: 1h
 Modify: 1- 4h
 Test: 1h","Close this PR because this is a problem of groonga-normalizer-mysql.
I have created a new PR for this issue in groonga-normalizer-mysql.
groonga/groonga-normalizer-mysql#19",True,{}
groonga/groonga,https://github.com/groonga/groonga,1295,2021-12-02T05:53:20Z,2021-12-03T00:49:29Z,2021-12-04T17:24:41Z,MERGED,True,2773,1257,56,https://github.com/kou,Add support for near phrase product search,1,[],https://github.com/groonga/groonga/pull/1295,https://github.com/kou,1,https://github.com/groonga/groonga/pull/1295,"Syntax:

Query:

*NPP""(...) (...) ...""
*NPP${N}""(...) (...) ...""
*NPP${N},${M}""(...) (...) ...""


Script:

column *NPP ""(...) (...) ...""
column *NPP${N} ""(...) (...) ...""
column *NPP${N},${M} ""(...) (...) ...""



N: The max interval
M: The additional interval only for the last phrase
*NPP""(a b) (1 2 3) (x y z)"" is a short cut of:
*NP""a 1 x"" OR
*NP""a 1 y"" OR
*NP""a 1 z"" OR
*NP""a 2 x"" OR
*NP""a 2 y"" OR
*NP""a 2 z"" OR
*NP""a 3 x"" OR
*NP""a 3 y"" OR
*NP""a 3 z"" OR
*NP""b 1 x"" OR
*NP""b 1 y"" OR
*NP""b 1 z"" OR
*NP""b 2 x"" OR
*NP""b 2 y"" OR
*NP""b 2 z"" OR
*NP""b 3 x"" OR
*NP""b 3 y"" OR
*NP""b 3 z""

and *NPP""..."" is much faster than '*NP""..."" OR ...'.
e.g. *NPP""..."" query is about 5x faster (4sec) than *NP""...""
query (20sec) with private benchmark data.","Syntax:

Query:

*NPP""(...) (...) ...""
*NPP${N}""(...) (...) ...""
*NPP${N},${M}""(...) (...) ...""


Script:

column *NPP ""(...) (...) ...""
column *NPP${N} ""(...) (...) ...""
column *NPP${N},${M} ""(...) (...) ...""



N: The max interval
M: The additional interval only for the last phrase
*NPP""(a b) (1 2 3) (x y z)"" is a short cut of:
*NP""a 1 x"" OR
*NP""a 1 y"" OR
*NP""a 1 z"" OR
*NP""a 2 x"" OR
*NP""a 2 y"" OR
*NP""a 2 z"" OR
*NP""a 3 x"" OR
*NP""a 3 y"" OR
*NP""a 3 z"" OR
*NP""b 1 x"" OR
*NP""b 1 y"" OR
*NP""b 1 z"" OR
*NP""b 2 x"" OR
*NP""b 2 y"" OR
*NP""b 2 z"" OR
*NP""b 3 x"" OR
*NP""b 3 y"" OR
*NP""b 3 z""

and *NPP""..."" is much faster than '*NP""..."" OR ...'.
e.g. *NPP""..."" query is about 5x faster (4sec) than *NP""...""
query (20sec) with private benchmark data.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1295,2021-12-02T05:53:20Z,2021-12-03T00:49:29Z,2021-12-04T17:24:41Z,MERGED,True,2773,1257,56,https://github.com/kou,Add support for near phrase product search,1,[],https://github.com/groonga/groonga/pull/1295,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1295#issuecomment-985120710,"Syntax:

Query:

*NPP""(...) (...) ...""
*NPP${N}""(...) (...) ...""
*NPP${N},${M}""(...) (...) ...""


Script:

column *NPP ""(...) (...) ...""
column *NPP${N} ""(...) (...) ...""
column *NPP${N},${M} ""(...) (...) ...""



N: The max interval
M: The additional interval only for the last phrase
*NPP""(a b) (1 2 3) (x y z)"" is a short cut of:
*NP""a 1 x"" OR
*NP""a 1 y"" OR
*NP""a 1 z"" OR
*NP""a 2 x"" OR
*NP""a 2 y"" OR
*NP""a 2 z"" OR
*NP""a 3 x"" OR
*NP""a 3 y"" OR
*NP""a 3 z"" OR
*NP""b 1 x"" OR
*NP""b 1 y"" OR
*NP""b 1 z"" OR
*NP""b 2 x"" OR
*NP""b 2 y"" OR
*NP""b 2 z"" OR
*NP""b 3 x"" OR
*NP""b 3 y"" OR
*NP""b 3 z""

and *NPP""..."" is much faster than '*NP""..."" OR ...'.
e.g. *NPP""..."" query is about 5x faster (4sec) than *NP""...""
query (20sec) with private benchmark data.","I'll merge this because I want to work on another feature based on this.
But anyone can add comments after I merge this.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1296,2021-12-03T06:41:51Z,2021-12-03T06:42:41Z,2021-12-04T17:54:34Z,MERGED,True,2201,1253,40,https://github.com/kou,Add support for ordered near phrase product search,1,[],https://github.com/groonga/groonga/pull/1296,https://github.com/kou,1,https://github.com/groonga/groonga/pull/1296,"Syntax:

Query:

*ONPP""(...) (...) ...""
*ONPP${N}""(...) (...) ...""
*ONPP${N},${M}""(...) (...) ...""


Script:

column *ONPP ""(...) (...) ...""
column *ONPP${N} ""(...) (...) ...""
column *ONPP${N},${M} ""(...) (...) ...""



N: The max interval
M: The additional interval only for the last phrase
*ONPP""(a b) (1 2 3) (x y z)"" is a short cut of:
*ONP""a 1 x"" OR
*ONP""a 1 y"" OR
*ONP""a 1 z"" OR
*ONP""a 2 x"" OR
*ONP""a 2 y"" OR
*ONP""a 2 z"" OR
*ONP""a 3 x"" OR
*ONP""a 3 y"" OR
*ONP""a 3 z"" OR
*ONP""b 1 x"" OR
*ONP""b 1 y"" OR
*ONP""b 1 z"" OR
*ONP""b 2 x"" OR
*ONP""b 2 y"" OR
*ONP""b 2 z"" OR
*ONP""b 3 x"" OR
*ONP""b 3 y"" OR
*ONP""b 3 z""

and *ONPP""..."" is much faster than '*ONP""..."" OR ...'.
e.g. *ONPP""..."" query is about 5x faster (4sec) than *ONP""...""
query (20sec) with private benchmark data.","Syntax:

Query:

*ONPP""(...) (...) ...""
*ONPP${N}""(...) (...) ...""
*ONPP${N},${M}""(...) (...) ...""


Script:

column *ONPP ""(...) (...) ...""
column *ONPP${N} ""(...) (...) ...""
column *ONPP${N},${M} ""(...) (...) ...""



N: The max interval
M: The additional interval only for the last phrase
*ONPP""(a b) (1 2 3) (x y z)"" is a short cut of:
*ONP""a 1 x"" OR
*ONP""a 1 y"" OR
*ONP""a 1 z"" OR
*ONP""a 2 x"" OR
*ONP""a 2 y"" OR
*ONP""a 2 z"" OR
*ONP""a 3 x"" OR
*ONP""a 3 y"" OR
*ONP""a 3 z"" OR
*ONP""b 1 x"" OR
*ONP""b 1 y"" OR
*ONP""b 1 z"" OR
*ONP""b 2 x"" OR
*ONP""b 2 y"" OR
*ONP""b 2 z"" OR
*ONP""b 3 x"" OR
*ONP""b 3 y"" OR
*ONP""b 3 z""

and *ONPP""..."" is much faster than '*ONP""..."" OR ...'.
e.g. *ONPP""..."" query is about 5x faster (4sec) than *ONP""...""
query (20sec) with private benchmark data.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1296,2021-12-03T06:41:51Z,2021-12-03T06:42:41Z,2021-12-04T17:54:34Z,MERGED,True,2201,1253,40,https://github.com/kou,Add support for ordered near phrase product search,1,[],https://github.com/groonga/groonga/pull/1296,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1296#issuecomment-985256985,"Syntax:

Query:

*ONPP""(...) (...) ...""
*ONPP${N}""(...) (...) ...""
*ONPP${N},${M}""(...) (...) ...""


Script:

column *ONPP ""(...) (...) ...""
column *ONPP${N} ""(...) (...) ...""
column *ONPP${N},${M} ""(...) (...) ...""



N: The max interval
M: The additional interval only for the last phrase
*ONPP""(a b) (1 2 3) (x y z)"" is a short cut of:
*ONP""a 1 x"" OR
*ONP""a 1 y"" OR
*ONP""a 1 z"" OR
*ONP""a 2 x"" OR
*ONP""a 2 y"" OR
*ONP""a 2 z"" OR
*ONP""a 3 x"" OR
*ONP""a 3 y"" OR
*ONP""a 3 z"" OR
*ONP""b 1 x"" OR
*ONP""b 1 y"" OR
*ONP""b 1 z"" OR
*ONP""b 2 x"" OR
*ONP""b 2 y"" OR
*ONP""b 2 z"" OR
*ONP""b 3 x"" OR
*ONP""b 3 y"" OR
*ONP""b 3 z""

and *ONPP""..."" is much faster than '*ONP""..."" OR ...'.
e.g. *ONPP""..."" query is about 5x faster (4sec) than *ONP""...""
query (20sec) with private benchmark data.","I'll merge this because I need this feature soon.
But anyone can add comments after I merge this.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1297,2021-12-07T02:52:36Z,2021-12-24T09:15:28Z,2021-12-24T09:15:29Z,MERGED,True,296,11,2,https://github.com/komainu8,doc news: add news topics for 11.1.1,1,[],https://github.com/groonga/groonga/pull/1297,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1297,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1298,2021-12-07T03:21:46Z,2022-01-20T21:11:19Z,2022-01-20T21:11:19Z,MERGED,True,10,4,2,https://github.com/komainu8,packages yum: loosen the version specification for Apache Arrow,10,[],https://github.com/groonga/groonga/pull/1298,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1298,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1298,2021-12-07T03:21:46Z,2022-01-20T21:11:19Z,2022-01-20T21:11:19Z,MERGED,True,10,4,2,https://github.com/komainu8,packages yum: loosen the version specification for Apache Arrow,10,[],https://github.com/groonga/groonga/pull/1298,https://github.com/HashidaTKS,2,https://github.com/groonga/groonga/pull/1298#issuecomment-989820670,,LGTM,True,{}
groonga/groonga,https://github.com/groonga/groonga,1299,2021-12-08T04:27:14Z,2021-12-22T02:53:16Z,2021-12-22T02:53:16Z,CLOSED,False,121,0,2,https://github.com/komainu8,doc reference: add a explanation for ordered near phrase search operator,1,[],https://github.com/groonga/groonga/pull/1299,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1299,TODO: query syntax,TODO: query syntax,True,{}
groonga/groonga,https://github.com/groonga/groonga,1301,2021-12-10T01:11:12Z,2021-12-13T00:41:59Z,2021-12-13T00:42:03Z,MERGED,True,109,4,24,https://github.com/HashidaTKS,Fix to not break table when column_create fails (for #1300),2,[],https://github.com/groonga/groonga/pull/1301,https://github.com/HashidaTKS,1,https://github.com/groonga/groonga/pull/1301,"Details of #1300
Sample  queries
table_create Statuses TABLE_NO_KEY
column_create Statuses start_time COLUMN_SCALAR UInt16
column_create Statuses end_time COLUMN_SCALAR UInt16
 
table_create Times TABLE_PAT_KEY UInt16
column_create Times statuses COLUMN_INDEX Statuses start_time,end_time *1
# [[-22,1639037503.16114,0.003981828689575195,""grn_obj_set_info(): GRN_INFO_SOURCE: multi column index must be created with WITH_SECTION flag: <Times.statuses>"",[[""grn_obj_set_info_source_validate"",""../../groonga/lib/db.c"",9605],[""/tmp/d.grn"",6,""column_create Times statuses COLUMN_INDEX Statuses start_time,end_time""]]],false]
table_remove Times *2
# [[-22,1639037503.16515,0.0005414485931396484,""[object][remove] column is broken: <Times.statuses>"",[[""remove_columns"",""../../groonga/lib/db.c"",10649],[""/tmp/d.grn"",8,""table_remove Times""]]],false]

https://github.com/groonga/groonga/blob/master/lib/proc/proc_column.c#L280
grn->rc is GRN_INVALID_ARGUMENT at the line above when executing the column_create (*1), and the grn_obj_remove above reaches the line below.
https://github.com/groonga/groonga/blob/master/lib/db.c#L11309
_grn_obj_remove_spec returns a return code of grn_ja_replace in this case.
(https://github.com/groonga/groonga/blob/master/lib/store.c#L3204)
If grn_ja_replace returns the original grn->rc when it succeed, it returns GRN_INVALID_ARGUMENT in this case.
It means that _grn_obj_remove_spec returns GRN_INVALID_ARGUMENT and the grn_obj_delete_by_id below is skipped.
As a result, the information that should be deleted is not deleted and the column (table) is broken.
The table_remove (*2) fails because of this.
https://github.com/groonga/groonga/blob/master/lib/db.c#L11311
Modification

Fix to temporarily reset ctx->rc in callers of grn_obj_remove in column_create and column_create_similar.

#1300 mentions only to column_create but  column_create_similar has same problem.


Add schema and removability checks for invalid cases of column_create tests.

I felt verbose a little to add to the all cases, but I did so for consistency.



Tests for column_create_similar have not be changed because it is difficult to reproduce the problem from command line ( I mean .test file ).
I have tested the modification of column_create_similar by forcibly changing parameters with debugger.","Details of #1300
Sample  queries
table_create Statuses TABLE_NO_KEY
column_create Statuses start_time COLUMN_SCALAR UInt16
column_create Statuses end_time COLUMN_SCALAR UInt16
 
table_create Times TABLE_PAT_KEY UInt16
column_create Times statuses COLUMN_INDEX Statuses start_time,end_time *1
# [[-22,1639037503.16114,0.003981828689575195,""grn_obj_set_info(): GRN_INFO_SOURCE: multi column index must be created with WITH_SECTION flag: <Times.statuses>"",[[""grn_obj_set_info_source_validate"",""../../groonga/lib/db.c"",9605],[""/tmp/d.grn"",6,""column_create Times statuses COLUMN_INDEX Statuses start_time,end_time""]]],false]
table_remove Times *2
# [[-22,1639037503.16515,0.0005414485931396484,""[object][remove] column is broken: <Times.statuses>"",[[""remove_columns"",""../../groonga/lib/db.c"",10649],[""/tmp/d.grn"",8,""table_remove Times""]]],false]

https://github.com/groonga/groonga/blob/master/lib/proc/proc_column.c#L280
grn->rc is GRN_INVALID_ARGUMENT at the line above when executing the column_create (*1), and the grn_obj_remove above reaches the line below.
https://github.com/groonga/groonga/blob/master/lib/db.c#L11309
_grn_obj_remove_spec returns a return code of grn_ja_replace in this case.
(https://github.com/groonga/groonga/blob/master/lib/store.c#L3204)
If grn_ja_replace returns the original grn->rc when it succeed, it returns GRN_INVALID_ARGUMENT in this case.
It means that _grn_obj_remove_spec returns GRN_INVALID_ARGUMENT and the grn_obj_delete_by_id below is skipped.
As a result, the information that should be deleted is not deleted and the column (table) is broken.
The table_remove (*2) fails because of this.
https://github.com/groonga/groonga/blob/master/lib/db.c#L11311
Modification

Fix to temporarily reset ctx->rc in callers of grn_obj_remove in column_create and column_create_similar.

#1300 mentions only to column_create but  column_create_similar has same problem.


Add schema and removability checks for invalid cases of column_create tests.

I felt verbose a little to add to the all cases, but I did so for consistency.



Tests for column_create_similar have not be changed because it is difficult to reproduce the problem from command line ( I mean .test file ).
I have tested the modification of column_create_similar by forcibly changing parameters with debugger.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1301,2021-12-10T01:11:12Z,2021-12-13T00:41:59Z,2021-12-13T00:42:03Z,MERGED,True,109,4,24,https://github.com/HashidaTKS,Fix to not break table when column_create fails (for #1300),2,[],https://github.com/groonga/groonga/pull/1301,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1301#issuecomment-990480691,"Details of #1300
Sample  queries
table_create Statuses TABLE_NO_KEY
column_create Statuses start_time COLUMN_SCALAR UInt16
column_create Statuses end_time COLUMN_SCALAR UInt16
 
table_create Times TABLE_PAT_KEY UInt16
column_create Times statuses COLUMN_INDEX Statuses start_time,end_time *1
# [[-22,1639037503.16114,0.003981828689575195,""grn_obj_set_info(): GRN_INFO_SOURCE: multi column index must be created with WITH_SECTION flag: <Times.statuses>"",[[""grn_obj_set_info_source_validate"",""../../groonga/lib/db.c"",9605],[""/tmp/d.grn"",6,""column_create Times statuses COLUMN_INDEX Statuses start_time,end_time""]]],false]
table_remove Times *2
# [[-22,1639037503.16515,0.0005414485931396484,""[object][remove] column is broken: <Times.statuses>"",[[""remove_columns"",""../../groonga/lib/db.c"",10649],[""/tmp/d.grn"",8,""table_remove Times""]]],false]

https://github.com/groonga/groonga/blob/master/lib/proc/proc_column.c#L280
grn->rc is GRN_INVALID_ARGUMENT at the line above when executing the column_create (*1), and the grn_obj_remove above reaches the line below.
https://github.com/groonga/groonga/blob/master/lib/db.c#L11309
_grn_obj_remove_spec returns a return code of grn_ja_replace in this case.
(https://github.com/groonga/groonga/blob/master/lib/store.c#L3204)
If grn_ja_replace returns the original grn->rc when it succeed, it returns GRN_INVALID_ARGUMENT in this case.
It means that _grn_obj_remove_spec returns GRN_INVALID_ARGUMENT and the grn_obj_delete_by_id below is skipped.
As a result, the information that should be deleted is not deleted and the column (table) is broken.
The table_remove (*2) fails because of this.
https://github.com/groonga/groonga/blob/master/lib/db.c#L11311
Modification

Fix to temporarily reset ctx->rc in callers of grn_obj_remove in column_create and column_create_similar.

#1300 mentions only to column_create but  column_create_similar has same problem.


Add schema and removability checks for invalid cases of column_create tests.

I felt verbose a little to add to the all cases, but I did so for consistency.



Tests for column_create_similar have not be changed because it is difficult to reproduce the problem from command line ( I mean .test file ).
I have tested the modification of column_create_similar by forcibly changing parameters with debugger.",Why is the original ctx->rc not GRN_SUCCESS in this case?,True,{}
groonga/groonga,https://github.com/groonga/groonga,1301,2021-12-10T01:11:12Z,2021-12-13T00:41:59Z,2021-12-13T00:42:03Z,MERGED,True,109,4,24,https://github.com/HashidaTKS,Fix to not break table when column_create fails (for #1300),2,[],https://github.com/groonga/groonga/pull/1301,https://github.com/HashidaTKS,3,https://github.com/groonga/groonga/pull/1301#issuecomment-990484405,"Details of #1300
Sample  queries
table_create Statuses TABLE_NO_KEY
column_create Statuses start_time COLUMN_SCALAR UInt16
column_create Statuses end_time COLUMN_SCALAR UInt16
 
table_create Times TABLE_PAT_KEY UInt16
column_create Times statuses COLUMN_INDEX Statuses start_time,end_time *1
# [[-22,1639037503.16114,0.003981828689575195,""grn_obj_set_info(): GRN_INFO_SOURCE: multi column index must be created with WITH_SECTION flag: <Times.statuses>"",[[""grn_obj_set_info_source_validate"",""../../groonga/lib/db.c"",9605],[""/tmp/d.grn"",6,""column_create Times statuses COLUMN_INDEX Statuses start_time,end_time""]]],false]
table_remove Times *2
# [[-22,1639037503.16515,0.0005414485931396484,""[object][remove] column is broken: <Times.statuses>"",[[""remove_columns"",""../../groonga/lib/db.c"",10649],[""/tmp/d.grn"",8,""table_remove Times""]]],false]

https://github.com/groonga/groonga/blob/master/lib/proc/proc_column.c#L280
grn->rc is GRN_INVALID_ARGUMENT at the line above when executing the column_create (*1), and the grn_obj_remove above reaches the line below.
https://github.com/groonga/groonga/blob/master/lib/db.c#L11309
_grn_obj_remove_spec returns a return code of grn_ja_replace in this case.
(https://github.com/groonga/groonga/blob/master/lib/store.c#L3204)
If grn_ja_replace returns the original grn->rc when it succeed, it returns GRN_INVALID_ARGUMENT in this case.
It means that _grn_obj_remove_spec returns GRN_INVALID_ARGUMENT and the grn_obj_delete_by_id below is skipped.
As a result, the information that should be deleted is not deleted and the column (table) is broken.
The table_remove (*2) fails because of this.
https://github.com/groonga/groonga/blob/master/lib/db.c#L11311
Modification

Fix to temporarily reset ctx->rc in callers of grn_obj_remove in column_create and column_create_similar.

#1300 mentions only to column_create but  column_create_similar has same problem.


Add schema and removability checks for invalid cases of column_create tests.

I felt verbose a little to add to the all cases, but I did so for consistency.



Tests for column_create_similar have not be changed because it is difficult to reproduce the problem from command line ( I mean .test file ).
I have tested the modification of column_create_similar by forcibly changing parameters with debugger.",I'll write the details later.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1301,2021-12-10T01:11:12Z,2021-12-13T00:41:59Z,2021-12-13T00:42:03Z,MERGED,True,109,4,24,https://github.com/HashidaTKS,Fix to not break table when column_create fails (for #1300),2,[],https://github.com/groonga/groonga/pull/1301,https://github.com/kou,4,https://github.com/groonga/groonga/pull/1301#issuecomment-990486551,"Details of #1300
Sample  queries
table_create Statuses TABLE_NO_KEY
column_create Statuses start_time COLUMN_SCALAR UInt16
column_create Statuses end_time COLUMN_SCALAR UInt16
 
table_create Times TABLE_PAT_KEY UInt16
column_create Times statuses COLUMN_INDEX Statuses start_time,end_time *1
# [[-22,1639037503.16114,0.003981828689575195,""grn_obj_set_info(): GRN_INFO_SOURCE: multi column index must be created with WITH_SECTION flag: <Times.statuses>"",[[""grn_obj_set_info_source_validate"",""../../groonga/lib/db.c"",9605],[""/tmp/d.grn"",6,""column_create Times statuses COLUMN_INDEX Statuses start_time,end_time""]]],false]
table_remove Times *2
# [[-22,1639037503.16515,0.0005414485931396484,""[object][remove] column is broken: <Times.statuses>"",[[""remove_columns"",""../../groonga/lib/db.c"",10649],[""/tmp/d.grn"",8,""table_remove Times""]]],false]

https://github.com/groonga/groonga/blob/master/lib/proc/proc_column.c#L280
grn->rc is GRN_INVALID_ARGUMENT at the line above when executing the column_create (*1), and the grn_obj_remove above reaches the line below.
https://github.com/groonga/groonga/blob/master/lib/db.c#L11309
_grn_obj_remove_spec returns a return code of grn_ja_replace in this case.
(https://github.com/groonga/groonga/blob/master/lib/store.c#L3204)
If grn_ja_replace returns the original grn->rc when it succeed, it returns GRN_INVALID_ARGUMENT in this case.
It means that _grn_obj_remove_spec returns GRN_INVALID_ARGUMENT and the grn_obj_delete_by_id below is skipped.
As a result, the information that should be deleted is not deleted and the column (table) is broken.
The table_remove (*2) fails because of this.
https://github.com/groonga/groonga/blob/master/lib/db.c#L11311
Modification

Fix to temporarily reset ctx->rc in callers of grn_obj_remove in column_create and column_create_similar.

#1300 mentions only to column_create but  column_create_similar has same problem.


Add schema and removability checks for invalid cases of column_create tests.

I felt verbose a little to add to the all cases, but I did so for consistency.



Tests for column_create_similar have not be changed because it is difficult to reproduce the problem from command line ( I mean .test file ).
I have tested the modification of column_create_similar by forcibly changing parameters with debugger.",Thanks.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1301,2021-12-10T01:11:12Z,2021-12-13T00:41:59Z,2021-12-13T00:42:03Z,MERGED,True,109,4,24,https://github.com/HashidaTKS,Fix to not break table when column_create fails (for #1300),2,[],https://github.com/groonga/groonga/pull/1301,https://github.com/HashidaTKS,5,https://github.com/groonga/groonga/pull/1301#issuecomment-990975558,"Details of #1300
Sample  queries
table_create Statuses TABLE_NO_KEY
column_create Statuses start_time COLUMN_SCALAR UInt16
column_create Statuses end_time COLUMN_SCALAR UInt16
 
table_create Times TABLE_PAT_KEY UInt16
column_create Times statuses COLUMN_INDEX Statuses start_time,end_time *1
# [[-22,1639037503.16114,0.003981828689575195,""grn_obj_set_info(): GRN_INFO_SOURCE: multi column index must be created with WITH_SECTION flag: <Times.statuses>"",[[""grn_obj_set_info_source_validate"",""../../groonga/lib/db.c"",9605],[""/tmp/d.grn"",6,""column_create Times statuses COLUMN_INDEX Statuses start_time,end_time""]]],false]
table_remove Times *2
# [[-22,1639037503.16515,0.0005414485931396484,""[object][remove] column is broken: <Times.statuses>"",[[""remove_columns"",""../../groonga/lib/db.c"",10649],[""/tmp/d.grn"",8,""table_remove Times""]]],false]

https://github.com/groonga/groonga/blob/master/lib/proc/proc_column.c#L280
grn->rc is GRN_INVALID_ARGUMENT at the line above when executing the column_create (*1), and the grn_obj_remove above reaches the line below.
https://github.com/groonga/groonga/blob/master/lib/db.c#L11309
_grn_obj_remove_spec returns a return code of grn_ja_replace in this case.
(https://github.com/groonga/groonga/blob/master/lib/store.c#L3204)
If grn_ja_replace returns the original grn->rc when it succeed, it returns GRN_INVALID_ARGUMENT in this case.
It means that _grn_obj_remove_spec returns GRN_INVALID_ARGUMENT and the grn_obj_delete_by_id below is skipped.
As a result, the information that should be deleted is not deleted and the column (table) is broken.
The table_remove (*2) fails because of this.
https://github.com/groonga/groonga/blob/master/lib/db.c#L11311
Modification

Fix to temporarily reset ctx->rc in callers of grn_obj_remove in column_create and column_create_similar.

#1300 mentions only to column_create but  column_create_similar has same problem.


Add schema and removability checks for invalid cases of column_create tests.

I felt verbose a little to add to the all cases, but I did so for consistency.



Tests for column_create_similar have not be changed because it is difficult to reproduce the problem from command line ( I mean .test file ).
I have tested the modification of column_create_similar by forcibly changing parameters with debugger.","I have written the details (description).
This is still a work in progress, I will create tests.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1301,2021-12-10T01:11:12Z,2021-12-13T00:41:59Z,2021-12-13T00:42:03Z,MERGED,True,109,4,24,https://github.com/HashidaTKS,Fix to not break table when column_create fails (for #1300),2,[],https://github.com/groonga/groonga/pull/1301,https://github.com/kou,6,https://github.com/groonga/groonga/pull/1301#issuecomment-991307089,"Details of #1300
Sample  queries
table_create Statuses TABLE_NO_KEY
column_create Statuses start_time COLUMN_SCALAR UInt16
column_create Statuses end_time COLUMN_SCALAR UInt16
 
table_create Times TABLE_PAT_KEY UInt16
column_create Times statuses COLUMN_INDEX Statuses start_time,end_time *1
# [[-22,1639037503.16114,0.003981828689575195,""grn_obj_set_info(): GRN_INFO_SOURCE: multi column index must be created with WITH_SECTION flag: <Times.statuses>"",[[""grn_obj_set_info_source_validate"",""../../groonga/lib/db.c"",9605],[""/tmp/d.grn"",6,""column_create Times statuses COLUMN_INDEX Statuses start_time,end_time""]]],false]
table_remove Times *2
# [[-22,1639037503.16515,0.0005414485931396484,""[object][remove] column is broken: <Times.statuses>"",[[""remove_columns"",""../../groonga/lib/db.c"",10649],[""/tmp/d.grn"",8,""table_remove Times""]]],false]

https://github.com/groonga/groonga/blob/master/lib/proc/proc_column.c#L280
grn->rc is GRN_INVALID_ARGUMENT at the line above when executing the column_create (*1), and the grn_obj_remove above reaches the line below.
https://github.com/groonga/groonga/blob/master/lib/db.c#L11309
_grn_obj_remove_spec returns a return code of grn_ja_replace in this case.
(https://github.com/groonga/groonga/blob/master/lib/store.c#L3204)
If grn_ja_replace returns the original grn->rc when it succeed, it returns GRN_INVALID_ARGUMENT in this case.
It means that _grn_obj_remove_spec returns GRN_INVALID_ARGUMENT and the grn_obj_delete_by_id below is skipped.
As a result, the information that should be deleted is not deleted and the column (table) is broken.
The table_remove (*2) fails because of this.
https://github.com/groonga/groonga/blob/master/lib/db.c#L11311
Modification

Fix to temporarily reset ctx->rc in callers of grn_obj_remove in column_create and column_create_similar.

#1300 mentions only to column_create but  column_create_similar has same problem.


Add schema and removability checks for invalid cases of column_create tests.

I felt verbose a little to add to the all cases, but I did so for consistency.



Tests for column_create_similar have not be changed because it is difficult to reproduce the problem from command line ( I mean .test file ).
I have tested the modification of column_create_similar by forcibly changing parameters with debugger.",OK. Then we should reset ctx->rc in proc_column.c not in store.c.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1301,2021-12-10T01:11:12Z,2021-12-13T00:41:59Z,2021-12-13T00:42:03Z,MERGED,True,109,4,24,https://github.com/HashidaTKS,Fix to not break table when column_create fails (for #1300),2,[],https://github.com/groonga/groonga/pull/1301,https://github.com/HashidaTKS,7,https://github.com/groonga/groonga/pull/1301#issuecomment-991433752,"Details of #1300
Sample  queries
table_create Statuses TABLE_NO_KEY
column_create Statuses start_time COLUMN_SCALAR UInt16
column_create Statuses end_time COLUMN_SCALAR UInt16
 
table_create Times TABLE_PAT_KEY UInt16
column_create Times statuses COLUMN_INDEX Statuses start_time,end_time *1
# [[-22,1639037503.16114,0.003981828689575195,""grn_obj_set_info(): GRN_INFO_SOURCE: multi column index must be created with WITH_SECTION flag: <Times.statuses>"",[[""grn_obj_set_info_source_validate"",""../../groonga/lib/db.c"",9605],[""/tmp/d.grn"",6,""column_create Times statuses COLUMN_INDEX Statuses start_time,end_time""]]],false]
table_remove Times *2
# [[-22,1639037503.16515,0.0005414485931396484,""[object][remove] column is broken: <Times.statuses>"",[[""remove_columns"",""../../groonga/lib/db.c"",10649],[""/tmp/d.grn"",8,""table_remove Times""]]],false]

https://github.com/groonga/groonga/blob/master/lib/proc/proc_column.c#L280
grn->rc is GRN_INVALID_ARGUMENT at the line above when executing the column_create (*1), and the grn_obj_remove above reaches the line below.
https://github.com/groonga/groonga/blob/master/lib/db.c#L11309
_grn_obj_remove_spec returns a return code of grn_ja_replace in this case.
(https://github.com/groonga/groonga/blob/master/lib/store.c#L3204)
If grn_ja_replace returns the original grn->rc when it succeed, it returns GRN_INVALID_ARGUMENT in this case.
It means that _grn_obj_remove_spec returns GRN_INVALID_ARGUMENT and the grn_obj_delete_by_id below is skipped.
As a result, the information that should be deleted is not deleted and the column (table) is broken.
The table_remove (*2) fails because of this.
https://github.com/groonga/groonga/blob/master/lib/db.c#L11311
Modification

Fix to temporarily reset ctx->rc in callers of grn_obj_remove in column_create and column_create_similar.

#1300 mentions only to column_create but  column_create_similar has same problem.


Add schema and removability checks for invalid cases of column_create tests.

I felt verbose a little to add to the all cases, but I did so for consistency.



Tests for column_create_similar have not be changed because it is difficult to reproduce the problem from command line ( I mean .test file ).
I have tested the modification of column_create_similar by forcibly changing parameters with debugger.","I agree that it is enough to reset ctx->rc in proc_column.c for this case, but considering the general cases, can grn_ja_replace return the original ctx->rc ?
E.g. ctx->rc is set GRN_CANCEL while executing _grn_obj_remove_index by a cancel request, the same problem may occur.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1301,2021-12-10T01:11:12Z,2021-12-13T00:41:59Z,2021-12-13T00:42:03Z,MERGED,True,109,4,24,https://github.com/HashidaTKS,Fix to not break table when column_create fails (for #1300),2,[],https://github.com/groonga/groonga/pull/1301,https://github.com/kou,8,https://github.com/groonga/groonga/pull/1301#issuecomment-991442451,"Details of #1300
Sample  queries
table_create Statuses TABLE_NO_KEY
column_create Statuses start_time COLUMN_SCALAR UInt16
column_create Statuses end_time COLUMN_SCALAR UInt16
 
table_create Times TABLE_PAT_KEY UInt16
column_create Times statuses COLUMN_INDEX Statuses start_time,end_time *1
# [[-22,1639037503.16114,0.003981828689575195,""grn_obj_set_info(): GRN_INFO_SOURCE: multi column index must be created with WITH_SECTION flag: <Times.statuses>"",[[""grn_obj_set_info_source_validate"",""../../groonga/lib/db.c"",9605],[""/tmp/d.grn"",6,""column_create Times statuses COLUMN_INDEX Statuses start_time,end_time""]]],false]
table_remove Times *2
# [[-22,1639037503.16515,0.0005414485931396484,""[object][remove] column is broken: <Times.statuses>"",[[""remove_columns"",""../../groonga/lib/db.c"",10649],[""/tmp/d.grn"",8,""table_remove Times""]]],false]

https://github.com/groonga/groonga/blob/master/lib/proc/proc_column.c#L280
grn->rc is GRN_INVALID_ARGUMENT at the line above when executing the column_create (*1), and the grn_obj_remove above reaches the line below.
https://github.com/groonga/groonga/blob/master/lib/db.c#L11309
_grn_obj_remove_spec returns a return code of grn_ja_replace in this case.
(https://github.com/groonga/groonga/blob/master/lib/store.c#L3204)
If grn_ja_replace returns the original grn->rc when it succeed, it returns GRN_INVALID_ARGUMENT in this case.
It means that _grn_obj_remove_spec returns GRN_INVALID_ARGUMENT and the grn_obj_delete_by_id below is skipped.
As a result, the information that should be deleted is not deleted and the column (table) is broken.
The table_remove (*2) fails because of this.
https://github.com/groonga/groonga/blob/master/lib/db.c#L11311
Modification

Fix to temporarily reset ctx->rc in callers of grn_obj_remove in column_create and column_create_similar.

#1300 mentions only to column_create but  column_create_similar has same problem.


Add schema and removability checks for invalid cases of column_create tests.

I felt verbose a little to add to the all cases, but I did so for consistency.



Tests for column_create_similar have not be changed because it is difficult to reproduce the problem from command line ( I mean .test file ).
I have tested the modification of column_create_similar by forcibly changing parameters with debugger.","Generally, Groonga API should return immediately (with error handling) and doesn't call other API when ctx->rc isn't GRN_SUCCESS.
(The current implementation misses ctx->rc check in many places, though...)
For _grn_obj_remove_index() case, it should remove the index entirely as much as possible (we may need to reset ctx->rc temporary) or doesn't remove the index at all. We should not remove the index partially. But it's not a responsibility of grn_ja_replace(). It's a responsibility of  _grn_obj_remove_index().",True,{}
groonga/groonga,https://github.com/groonga/groonga,1301,2021-12-10T01:11:12Z,2021-12-13T00:41:59Z,2021-12-13T00:42:03Z,MERGED,True,109,4,24,https://github.com/HashidaTKS,Fix to not break table when column_create fails (for #1300),2,[],https://github.com/groonga/groonga/pull/1301,https://github.com/HashidaTKS,9,https://github.com/groonga/groonga/pull/1301#issuecomment-991933605,"Details of #1300
Sample  queries
table_create Statuses TABLE_NO_KEY
column_create Statuses start_time COLUMN_SCALAR UInt16
column_create Statuses end_time COLUMN_SCALAR UInt16
 
table_create Times TABLE_PAT_KEY UInt16
column_create Times statuses COLUMN_INDEX Statuses start_time,end_time *1
# [[-22,1639037503.16114,0.003981828689575195,""grn_obj_set_info(): GRN_INFO_SOURCE: multi column index must be created with WITH_SECTION flag: <Times.statuses>"",[[""grn_obj_set_info_source_validate"",""../../groonga/lib/db.c"",9605],[""/tmp/d.grn"",6,""column_create Times statuses COLUMN_INDEX Statuses start_time,end_time""]]],false]
table_remove Times *2
# [[-22,1639037503.16515,0.0005414485931396484,""[object][remove] column is broken: <Times.statuses>"",[[""remove_columns"",""../../groonga/lib/db.c"",10649],[""/tmp/d.grn"",8,""table_remove Times""]]],false]

https://github.com/groonga/groonga/blob/master/lib/proc/proc_column.c#L280
grn->rc is GRN_INVALID_ARGUMENT at the line above when executing the column_create (*1), and the grn_obj_remove above reaches the line below.
https://github.com/groonga/groonga/blob/master/lib/db.c#L11309
_grn_obj_remove_spec returns a return code of grn_ja_replace in this case.
(https://github.com/groonga/groonga/blob/master/lib/store.c#L3204)
If grn_ja_replace returns the original grn->rc when it succeed, it returns GRN_INVALID_ARGUMENT in this case.
It means that _grn_obj_remove_spec returns GRN_INVALID_ARGUMENT and the grn_obj_delete_by_id below is skipped.
As a result, the information that should be deleted is not deleted and the column (table) is broken.
The table_remove (*2) fails because of this.
https://github.com/groonga/groonga/blob/master/lib/db.c#L11311
Modification

Fix to temporarily reset ctx->rc in callers of grn_obj_remove in column_create and column_create_similar.

#1300 mentions only to column_create but  column_create_similar has same problem.


Add schema and removability checks for invalid cases of column_create tests.

I felt verbose a little to add to the all cases, but I did so for consistency.



Tests for column_create_similar have not be changed because it is difficult to reproduce the problem from command line ( I mean .test file ).
I have tested the modification of column_create_similar by forcibly changing parameters with debugger.","@kou
Thank you for the comments!
I have decided to temporarily reset ctx->rc in callers of grn_obj_remove.
Would you please review this when you have time?",True,{}
groonga/groonga,https://github.com/groonga/groonga,1301,2021-12-10T01:11:12Z,2021-12-13T00:41:59Z,2021-12-13T00:42:03Z,MERGED,True,109,4,24,https://github.com/HashidaTKS,Fix to not break table when column_create fails (for #1300),2,[],https://github.com/groonga/groonga/pull/1301,https://github.com/kou,10,https://github.com/groonga/groonga/pull/1301#issuecomment-992008677,"Details of #1300
Sample  queries
table_create Statuses TABLE_NO_KEY
column_create Statuses start_time COLUMN_SCALAR UInt16
column_create Statuses end_time COLUMN_SCALAR UInt16
 
table_create Times TABLE_PAT_KEY UInt16
column_create Times statuses COLUMN_INDEX Statuses start_time,end_time *1
# [[-22,1639037503.16114,0.003981828689575195,""grn_obj_set_info(): GRN_INFO_SOURCE: multi column index must be created with WITH_SECTION flag: <Times.statuses>"",[[""grn_obj_set_info_source_validate"",""../../groonga/lib/db.c"",9605],[""/tmp/d.grn"",6,""column_create Times statuses COLUMN_INDEX Statuses start_time,end_time""]]],false]
table_remove Times *2
# [[-22,1639037503.16515,0.0005414485931396484,""[object][remove] column is broken: <Times.statuses>"",[[""remove_columns"",""../../groonga/lib/db.c"",10649],[""/tmp/d.grn"",8,""table_remove Times""]]],false]

https://github.com/groonga/groonga/blob/master/lib/proc/proc_column.c#L280
grn->rc is GRN_INVALID_ARGUMENT at the line above when executing the column_create (*1), and the grn_obj_remove above reaches the line below.
https://github.com/groonga/groonga/blob/master/lib/db.c#L11309
_grn_obj_remove_spec returns a return code of grn_ja_replace in this case.
(https://github.com/groonga/groonga/blob/master/lib/store.c#L3204)
If grn_ja_replace returns the original grn->rc when it succeed, it returns GRN_INVALID_ARGUMENT in this case.
It means that _grn_obj_remove_spec returns GRN_INVALID_ARGUMENT and the grn_obj_delete_by_id below is skipped.
As a result, the information that should be deleted is not deleted and the column (table) is broken.
The table_remove (*2) fails because of this.
https://github.com/groonga/groonga/blob/master/lib/db.c#L11311
Modification

Fix to temporarily reset ctx->rc in callers of grn_obj_remove in column_create and column_create_similar.

#1300 mentions only to column_create but  column_create_similar has same problem.


Add schema and removability checks for invalid cases of column_create tests.

I felt verbose a little to add to the all cases, but I did so for consistency.



Tests for column_create_similar have not be changed because it is difficult to reproduce the problem from command line ( I mean .test file ).
I have tested the modification of column_create_similar by forcibly changing parameters with debugger.",Thanks!,True,{}
groonga/groonga,https://github.com/groonga/groonga,1302,2021-12-13T04:44:58Z,2021-12-13T05:53:15Z,2021-12-13T06:03:07Z,MERGED,True,0,65,5,https://github.com/komainu8,packages yum: drop support for CentOS 8,1,[],https://github.com/groonga/groonga/pull/1302,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1302,Because CentOS 8 will reach EOL at 2021-12-31.,Because CentOS 8 will reach EOL at 2021-12-31.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1303,2021-12-13T06:57:58Z,2021-12-15T04:30:05Z,2021-12-15T04:30:05Z,CLOSED,False,12,4,2,https://github.com/komainu8,Add a missing error check for grn_ii_posting_add_float(),2,[],https://github.com/groonga/groonga/pull/1303,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1303,"For example, if we execute request_cancel while we execute sub_filter, Groonga may return GRN_SUCCESS even if we execute request_cancel depending on the timing of executing request_cancel.
Because Groonga doesn't confirm return code of grn_ii_posting_add_float() currently.
This issue occurs in the search with an accessor.","For example, if we execute request_cancel while we execute sub_filter, Groonga may return GRN_SUCCESS even if we execute request_cancel depending on the timing of executing request_cancel.
Because Groonga doesn't confirm return code of grn_ii_posting_add_float() currently.
This issue occurs in the search with an accessor.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1303,2021-12-13T06:57:58Z,2021-12-15T04:30:05Z,2021-12-15T04:30:05Z,CLOSED,False,12,4,2,https://github.com/komainu8,Add a missing error check for grn_ii_posting_add_float(),2,[],https://github.com/groonga/groonga/pull/1303,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1303#issuecomment-992170729,"For example, if we execute request_cancel while we execute sub_filter, Groonga may return GRN_SUCCESS even if we execute request_cancel depending on the timing of executing request_cancel.
Because Groonga doesn't confirm return code of grn_ii_posting_add_float() currently.
This issue occurs in the search with an accessor.","Can you add a test case?
Or can you describe when is this occurred?",True,{}
groonga/groonga,https://github.com/groonga/groonga,1303,2021-12-13T06:57:58Z,2021-12-15T04:30:05Z,2021-12-15T04:30:05Z,CLOSED,False,12,4,2,https://github.com/komainu8,Add a missing error check for grn_ii_posting_add_float(),2,[],https://github.com/groonga/groonga/pull/1303,https://github.com/komainu8,3,https://github.com/groonga/groonga/pull/1303#issuecomment-993156947,"For example, if we execute request_cancel while we execute sub_filter, Groonga may return GRN_SUCCESS even if we execute request_cancel depending on the timing of executing request_cancel.
Because Groonga doesn't confirm return code of grn_ii_posting_add_float() currently.
This issue occurs in the search with an accessor.",I added when this issue will occur.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1303,2021-12-13T06:57:58Z,2021-12-15T04:30:05Z,2021-12-15T04:30:05Z,CLOSED,False,12,4,2,https://github.com/komainu8,Add a missing error check for grn_ii_posting_add_float(),2,[],https://github.com/groonga/groonga/pull/1303,https://github.com/kou,4,https://github.com/groonga/groonga/pull/1303#issuecomment-994282543,"For example, if we execute request_cancel while we execute sub_filter, Groonga may return GRN_SUCCESS even if we execute request_cancel depending on the timing of executing request_cancel.
Because Groonga doesn't confirm return code of grn_ii_posting_add_float() currently.
This issue occurs in the search with an accessor.","Another checks are pushed.
This is needless.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1305,2021-12-22T02:51:08Z,2021-12-23T02:09:52Z,2021-12-23T02:09:53Z,MERGED,True,144,0,4,https://github.com/komainu8,"doc commands: add a new reference for ""thread_dump""",2,[],https://github.com/groonga/groonga/pull/1305,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1305,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1306,2021-12-24T01:56:33Z,2021-12-24T06:48:26Z,2021-12-24T06:50:20Z,MERGED,True,9,9,1,https://github.com/komainu8,ci package: use qemu-user-static on Impish ,1,[],https://github.com/groonga/groonga/pull/1306,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1306,"Because qemu-user-static in Ubuntu 20.04 has a crash bug as below.

https://bugs.launchpad.net/qemu/+bug/1749393
https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=971537

This bug has been already fixed in Ubuntu 20.10.
However, Ubuntu 20.10 already has been EOL.
Therefore, we use qemu-user-static on Ubuntu 21.10.","Because qemu-user-static in Ubuntu 20.04 has a crash bug as below.

https://bugs.launchpad.net/qemu/+bug/1749393
https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=971537

This bug has been already fixed in Ubuntu 20.10.
However, Ubuntu 20.10 already has been EOL.
Therefore, we use qemu-user-static on Ubuntu 21.10.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1306,2021-12-24T01:56:33Z,2021-12-24T06:48:26Z,2021-12-24T06:50:20Z,MERGED,True,9,9,1,https://github.com/komainu8,ci package: use qemu-user-static on Impish ,1,[],https://github.com/groonga/groonga/pull/1306,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/1306#issuecomment-1000661619,"Because qemu-user-static in Ubuntu 20.04 has a crash bug as below.

https://bugs.launchpad.net/qemu/+bug/1749393
https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=971537

This bug has been already fixed in Ubuntu 20.10.
However, Ubuntu 20.10 already has been EOL.
Therefore, we use qemu-user-static on Ubuntu 21.10.",This PR passed all tests at https://github.com/groonga/groonga/actions/runs/1617886585.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1308,2021-12-27T03:47:16Z,,2022-03-15T05:24:16Z,OPEN,False,375,451,2,https://github.com/komainu8,doc contribution: update release procedure,1,[],https://github.com/groonga/groonga/pull/1308,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1308,TODO：confirm of release procedure.,TODO：confirm of release procedure.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1310,2022-01-05T01:45:22Z,2022-01-05T23:13:35Z,2022-01-05T23:13:38Z,MERGED,True,2335,972,456,https://github.com/komainu8,nginx: update bundles version to 1.21.5,1,[],https://github.com/groonga/groonga/pull/1310,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1310,I'll merge to master after passing all tests.,I'll merge to master after passing all tests.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1311,2022-01-05T09:16:33Z,2022-01-05T21:43:26Z,2022-01-05T23:09:18Z,MERGED,True,1,23,1,https://github.com/komainu8,ci package: remove a task for installing qemu-user-static from Impish,1,[],https://github.com/groonga/groonga/pull/1311,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1311,"Because the following bug has already resolved in Ubuntu 20.04.
https://bugs.launchpad.net/qemu/+bug/1749393
Therefore, ""Install QEMU from Impish"" is needless.","Because the following bug has already resolved in Ubuntu 20.04.
https://bugs.launchpad.net/qemu/+bug/1749393
Therefore, ""Install QEMU from Impish"" is needless.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1312,2022-01-06T08:36:21Z,2022-01-31T01:44:22Z,2022-01-31T01:48:22Z,MERGED,True,166,8,7,https://github.com/komainu8,NormalizeNFKC*: add remove_symbol option,9,[],https://github.com/groonga/groonga/pull/1312,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1312,"We can remove symbol (e.g. #, !, "", &, %, ...) by this option as below.
The term ""symbol"" here is the character has GRN_CHAR_SYMBOL in GRN_CHAR_TYPE.
normalize \
  'NormalizerNFKC130(""remove_symbol"", true)' \
  ""#This is a pen.""
[[0,1641973316.26148,0.001504421234130859],{""normalized"":""this is a pen"",""types"":[],""checks"":[]}]

In addition, I reduce the number of bits for expressing GRN_CHAR_TYPE to implement this option at f7a45f4.
However, I think that it is enough to ensure 6bit.
Because currently, the kind of GRN_CHAR_TYPE is 9.
We can express 32 patterns GRN_CHAR_TYPE when we can use 6bit for expressing it.","We can remove symbol (e.g. #, !, "", &, %, ...) by this option as below.
The term ""symbol"" here is the character has GRN_CHAR_SYMBOL in GRN_CHAR_TYPE.
normalize \
  'NormalizerNFKC130(""remove_symbol"", true)' \
  ""#This is a pen.""
[[0,1641973316.26148,0.001504421234130859],{""normalized"":""this is a pen"",""types"":[],""checks"":[]}]

In addition, I reduce the number of bits for expressing GRN_CHAR_TYPE to implement this option at f7a45f4.
However, I think that it is enough to ensure 6bit.
Because currently, the kind of GRN_CHAR_TYPE is 9.
We can express 32 patterns GRN_CHAR_TYPE when we can use 6bit for expressing it.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1312,2022-01-06T08:36:21Z,2022-01-31T01:44:22Z,2022-01-31T01:48:22Z,MERGED,True,166,8,7,https://github.com/komainu8,NormalizeNFKC*: add remove_symbol option,9,[],https://github.com/groonga/groonga/pull/1312,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1312#issuecomment-1014100141,"We can remove symbol (e.g. #, !, "", &, %, ...) by this option as below.
The term ""symbol"" here is the character has GRN_CHAR_SYMBOL in GRN_CHAR_TYPE.
normalize \
  'NormalizerNFKC130(""remove_symbol"", true)' \
  ""#This is a pen.""
[[0,1641973316.26148,0.001504421234130859],{""normalized"":""this is a pen"",""types"":[],""checks"":[]}]

In addition, I reduce the number of bits for expressing GRN_CHAR_TYPE to implement this option at f7a45f4.
However, I think that it is enough to ensure 6bit.
Because currently, the kind of GRN_CHAR_TYPE is 9.
We can express 32 patterns GRN_CHAR_TYPE when we can use 6bit for expressing it.",Could you also add tests for snippet and highlight? They use checks.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1312,2022-01-06T08:36:21Z,2022-01-31T01:44:22Z,2022-01-31T01:48:22Z,MERGED,True,166,8,7,https://github.com/komainu8,NormalizeNFKC*: add remove_symbol option,9,[],https://github.com/groonga/groonga/pull/1312,https://github.com/kou,3,https://github.com/groonga/groonga/pull/1312#issuecomment-1025304063,"We can remove symbol (e.g. #, !, "", &, %, ...) by this option as below.
The term ""symbol"" here is the character has GRN_CHAR_SYMBOL in GRN_CHAR_TYPE.
normalize \
  'NormalizerNFKC130(""remove_symbol"", true)' \
  ""#This is a pen.""
[[0,1641973316.26148,0.001504421234130859],{""normalized"":""this is a pen"",""types"":[],""checks"":[]}]

In addition, I reduce the number of bits for expressing GRN_CHAR_TYPE to implement this option at f7a45f4.
However, I think that it is enough to ensure 6bit.
Because currently, the kind of GRN_CHAR_TYPE is 9.
We can express 32 patterns GRN_CHAR_TYPE when we can use 6bit for expressing it.","Removed GRN_REMOVED_CHAR_TYPE_SYMBOL. It's needless.
I've add a test with highlight_html().",True,{}
groonga/groonga,https://github.com/groonga/groonga,1313,2022-01-10T09:20:08Z,2022-01-18T06:07:26Z,2022-01-18T06:07:31Z,MERGED,True,318,40,8,https://github.com/HashidaTKS,snippet: Accept 32 or more keywords ,7,[],https://github.com/groonga/groonga/pull/1313,https://github.com/HashidaTKS,1,https://github.com/groonga/groonga/pull/1313,"Modify snippet to accept 32 or more keywords
Fix a bug that Groonga crashes when grn_expr_get_or_add_var fails in func_snippet

This patch just changed the input keywords to variable length, did not change the result length (the length of snip_result).
If we need to add support for the variable length result, I will address it in another PR.","Modify snippet to accept 32 or more keywords
Fix a bug that Groonga crashes when grn_expr_get_or_add_var fails in func_snippet

This patch just changed the input keywords to variable length, did not change the result length (the length of snip_result).
If we need to add support for the variable length result, I will address it in another PR.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1313,2022-01-10T09:20:08Z,2022-01-18T06:07:26Z,2022-01-18T06:07:31Z,MERGED,True,318,40,8,https://github.com/HashidaTKS,snippet: Accept 32 or more keywords ,7,[],https://github.com/groonga/groonga/pull/1313,https://github.com/HashidaTKS,2,https://github.com/groonga/groonga/pull/1313#issuecomment-1008678848,"Modify snippet to accept 32 or more keywords
Fix a bug that Groonga crashes when grn_expr_get_or_add_var fails in func_snippet

This patch just changed the input keywords to variable length, did not change the result length (the length of snip_result).
If we need to add support for the variable length result, I will address it in another PR.",#1309,True,{}
groonga/groonga,https://github.com/groonga/groonga,1313,2022-01-10T09:20:08Z,2022-01-18T06:07:26Z,2022-01-18T06:07:31Z,MERGED,True,318,40,8,https://github.com/HashidaTKS,snippet: Accept 32 or more keywords ,7,[],https://github.com/groonga/groonga/pull/1313,https://github.com/HashidaTKS,3,https://github.com/groonga/groonga/pull/1313#issuecomment-1008764113,"Modify snippet to accept 32 or more keywords
Fix a bug that Groonga crashes when grn_expr_get_or_add_var fails in func_snippet

This patch just changed the input keywords to variable length, did not change the result length (the length of snip_result).
If we need to add support for the variable length result, I will address it in another PR.","@kou, @komainu8
Would you please review this when you have time ?",True,{}
groonga/groonga,https://github.com/groonga/groonga,1313,2022-01-10T09:20:08Z,2022-01-18T06:07:26Z,2022-01-18T06:07:31Z,MERGED,True,318,40,8,https://github.com/HashidaTKS,snippet: Accept 32 or more keywords ,7,[],https://github.com/groonga/groonga/pull/1313,https://github.com/kou,4,https://github.com/groonga/groonga/pull/1313#issuecomment-1010550033,"Modify snippet to accept 32 or more keywords
Fix a bug that Groonga crashes when grn_expr_get_or_add_var fails in func_snippet

This patch just changed the input keywords to variable length, did not change the result length (the length of snip_result).
If we need to add support for the variable length result, I will address it in another PR.",Could you rebase on master to recover CI?,True,{}
groonga/groonga,https://github.com/groonga/groonga,1313,2022-01-10T09:20:08Z,2022-01-18T06:07:26Z,2022-01-18T06:07:31Z,MERGED,True,318,40,8,https://github.com/HashidaTKS,snippet: Accept 32 or more keywords ,7,[],https://github.com/groonga/groonga/pull/1313,https://github.com/HashidaTKS,5,https://github.com/groonga/groonga/pull/1313#issuecomment-1011269992,"Modify snippet to accept 32 or more keywords
Fix a bug that Groonga crashes when grn_expr_get_or_add_var fails in func_snippet

This patch just changed the input keywords to variable length, did not change the result length (the length of snip_result).
If we need to add support for the variable length result, I will address it in another PR.",I will fix a test failed with Request-URI Too Large,True,{}
groonga/groonga,https://github.com/groonga/groonga,1313,2022-01-10T09:20:08Z,2022-01-18T06:07:26Z,2022-01-18T06:07:31Z,MERGED,True,318,40,8,https://github.com/HashidaTKS,snippet: Accept 32 or more keywords ,7,[],https://github.com/groonga/groonga/pull/1313,https://github.com/HashidaTKS,6,https://github.com/groonga/groonga/pull/1313#issuecomment-1013693674,"Modify snippet to accept 32 or more keywords
Fix a bug that Groonga crashes when grn_expr_get_or_add_var fails in func_snippet

This patch just changed the input keywords to variable length, did not change the result length (the length of snip_result).
If we need to add support for the variable length result, I will address it in another PR.","The test will be fixed if groonga/grntest#4 is merged.
https://github.com/groonga/groonga/blob/master/test/command/run-test.sh#L76
Maybe it's better to change to execute git -C ""$grntest_dir"" pull at the line above because grntest doesn't seem to be updated if grntest_dir already exists.
(I think it doesn't matter in CI environments, but may in developer's environments.)",True,{}
groonga/groonga,https://github.com/groonga/groonga,1313,2022-01-10T09:20:08Z,2022-01-18T06:07:26Z,2022-01-18T06:07:31Z,MERGED,True,318,40,8,https://github.com/HashidaTKS,snippet: Accept 32 or more keywords ,7,[],https://github.com/groonga/groonga/pull/1313,https://github.com/HashidaTKS,7,https://github.com/groonga/groonga/pull/1313#issuecomment-1014045423,"Modify snippet to accept 32 or more keywords
Fix a bug that Groonga crashes when grn_expr_get_or_add_var fails in func_snippet

This patch just changed the input keywords to variable length, did not change the result length (the length of snip_result).
If we need to add support for the variable length result, I will address it in another PR.","Ah, do we need to update the gem of grntest?
May I update it?",True,{}
groonga/groonga,https://github.com/groonga/groonga,1313,2022-01-10T09:20:08Z,2022-01-18T06:07:26Z,2022-01-18T06:07:31Z,MERGED,True,318,40,8,https://github.com/HashidaTKS,snippet: Accept 32 or more keywords ,7,[],https://github.com/groonga/groonga/pull/1313,https://github.com/kou,8,https://github.com/groonga/groonga/pull/1313#issuecomment-1014058600,"Modify snippet to accept 32 or more keywords
Fix a bug that Groonga crashes when grn_expr_get_or_add_var fails in func_snippet

This patch just changed the input keywords to variable length, did not change the result length (the length of snip_result).
If we need to add support for the variable length result, I will address it in another PR.","Ah, yes.
Do you have RubyGems account?",True,{}
groonga/groonga,https://github.com/groonga/groonga,1313,2022-01-10T09:20:08Z,2022-01-18T06:07:26Z,2022-01-18T06:07:31Z,MERGED,True,318,40,8,https://github.com/HashidaTKS,snippet: Accept 32 or more keywords ,7,[],https://github.com/groonga/groonga/pull/1313,https://github.com/HashidaTKS,9,https://github.com/groonga/groonga/pull/1313#issuecomment-1014063054,"Modify snippet to accept 32 or more keywords
Fix a bug that Groonga crashes when grn_expr_get_or_add_var fails in func_snippet

This patch just changed the input keywords to variable length, did not change the result length (the length of snip_result).
If we need to add support for the variable length result, I will address it in another PR.","No, I will create an account.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1313,2022-01-10T09:20:08Z,2022-01-18T06:07:26Z,2022-01-18T06:07:31Z,MERGED,True,318,40,8,https://github.com/HashidaTKS,snippet: Accept 32 or more keywords ,7,[],https://github.com/groonga/groonga/pull/1313,https://github.com/kou,10,https://github.com/groonga/groonga/pull/1313#issuecomment-1014889253,"Modify snippet to accept 32 or more keywords
Fix a bug that Groonga crashes when grn_expr_get_or_add_var fails in func_snippet

This patch just changed the input keywords to variable length, did not change the result length (the length of snip_result).
If we need to add support for the variable length result, I will address it in another PR.",Could you rebase on master to fix Windows MSVC tests?,True,{}
groonga/groonga,https://github.com/groonga/groonga,1313,2022-01-10T09:20:08Z,2022-01-18T06:07:26Z,2022-01-18T06:07:31Z,MERGED,True,318,40,8,https://github.com/HashidaTKS,snippet: Accept 32 or more keywords ,7,[],https://github.com/groonga/groonga/pull/1313,https://github.com/HashidaTKS,11,https://github.com/groonga/groonga/pull/1313#issuecomment-1015038293,"Modify snippet to accept 32 or more keywords
Fix a bug that Groonga crashes when grn_expr_get_or_add_var fails in func_snippet

This patch just changed the input keywords to variable length, did not change the result length (the length of snip_result).
If we need to add support for the variable length result, I will address it in another PR.","Could you rebase on master to fix Windows MSVC tests?

Sure, I have rebased.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1313,2022-01-10T09:20:08Z,2022-01-18T06:07:26Z,2022-01-18T06:07:31Z,MERGED,True,318,40,8,https://github.com/HashidaTKS,snippet: Accept 32 or more keywords ,7,[],https://github.com/groonga/groonga/pull/1313,https://github.com/kou,12,https://github.com/groonga/groonga/pull/1313#issuecomment-1015098516,"Modify snippet to accept 32 or more keywords
Fix a bug that Groonga crashes when grn_expr_get_or_add_var fails in func_snippet

This patch just changed the input keywords to variable length, did not change the result length (the length of snip_result).
If we need to add support for the variable length result, I will address it in another PR.",Thanks!,True,{}
groonga/groonga,https://github.com/groonga/groonga,1314,2022-01-11T02:56:20Z,2022-01-26T05:09:36Z,2022-01-26T05:09:36Z,MERGED,True,182,14,2,https://github.com/komainu8,doc news: add news topics for 11.1.2,1,[],https://github.com/groonga/groonga/pull/1314,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1314,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1317,2022-01-23T09:24:45Z,2022-01-23T11:49:04Z,2022-01-23T11:49:19Z,MERGED,True,1,1,1,https://github.com/wi24rd,doc ruby_eval: fix a typo,1,[],https://github.com/groonga/groonga/pull/1317,https://github.com/wi24rd,1,https://github.com/groonga/groonga/pull/1317,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1317,2022-01-23T09:24:45Z,2022-01-23T11:49:04Z,2022-01-23T11:49:19Z,MERGED,True,1,1,1,https://github.com/wi24rd,doc ruby_eval: fix a typo,1,[],https://github.com/groonga/groonga/pull/1317,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1317#issuecomment-1019467971,,Good catch!,True,{}
groonga/groonga,https://github.com/groonga/groonga,1319,2022-01-30T12:27:52Z,2022-01-30T12:28:05Z,2022-01-30T12:28:08Z,MERGED,True,14,4,2,https://github.com/komainu8,packages yum: add a suffix of package name for discriminating between x86_64 and aarch64,1,[],https://github.com/groonga/groonga/pull/1319,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1319,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1321,2022-02-02T03:13:53Z,2022-02-07T14:42:00Z,2022-02-07T14:42:00Z,MERGED,True,343,26,2,https://github.com/komainu8,doc news: add news topics for 12.0.0,1,[],https://github.com/groonga/groonga/pull/1321,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1321,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1322,2022-02-03T02:47:34Z,,2022-03-15T05:24:16Z,OPEN,False,5,0,1,https://github.com/komainu8,ci: add a new step for detecting update of nginx ,1,[],https://github.com/groonga/groonga/pull/1322,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1322,"GitHub Actions detect whether we need to update bundled nginx or not
by comparing the latest version of nginx of upstream and the version
of bundled nginx.
Currently, we confirm the latest version of nginx manually.
However, in this method, we often forget to update nginx that is
bundled with Groonga.","GitHub Actions detect whether we need to update bundled nginx or not
by comparing the latest version of nginx of upstream and the version
of bundled nginx.
Currently, we confirm the latest version of nginx manually.
However, in this method, we often forget to update nginx that is
bundled with Groonga.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1322,2022-02-03T02:47:34Z,,2022-03-15T05:24:16Z,OPEN,False,5,0,1,https://github.com/komainu8,ci: add a new step for detecting update of nginx ,1,[],https://github.com/groonga/groonga/pull/1322,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/1322#issuecomment-1028555274,"GitHub Actions detect whether we need to update bundled nginx or not
by comparing the latest version of nginx of upstream and the version
of bundled nginx.
Currently, we confirm the latest version of nginx manually.
However, in this method, we often forget to update nginx that is
bundled with Groonga.","When the version of bundled nginx is 1.21.5 and the version of upstream nginx is 1.21.6, ""Detect nginx update"" step fails as below.
https://github.com/komainu8/groonga/runs/5046273728?check_suite_focus=true#step:6:6
When the same version the bundled nginx and the upstream nginx, ""Detect nginx update"" step successes as below.
https://github.com/komainu8/groonga/runs/5046313623?check_suite_focus=true",True,{}
groonga/groonga,https://github.com/groonga/groonga,1323,2022-02-03T03:06:56Z,2022-02-06T12:35:29Z,2022-02-06T12:35:30Z,MERGED,True,136,19,454,https://github.com/komainu8,nginx: update bundles version to 1.21.6,1,[],https://github.com/groonga/groonga/pull/1323,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1323,I'll merge to master if this modification will pass all tests on GitHub Actions.,I'll merge to master if this modification will pass all tests on GitHub Actions.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1323,2022-02-03T03:06:56Z,2022-02-06T12:35:29Z,2022-02-06T12:35:30Z,MERGED,True,136,19,454,https://github.com/komainu8,nginx: update bundles version to 1.21.6,1,[],https://github.com/groonga/groonga/pull/1323,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/1323#issuecomment-1030823976,I'll merge to master if this modification will pass all tests on GitHub Actions.,This modification passed all tests on GitHub Actions.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1324,2022-02-04T06:43:00Z,2022-02-07T09:56:54Z,2022-02-07T09:56:55Z,MERGED,True,632,187,2,https://github.com/HashidaTKS,doc news: Summarize changes from Groonga 11.0.0 to Groonga 11.1.3,2,[],https://github.com/groonga/groonga/pull/1324,https://github.com/HashidaTKS,1,https://github.com/groonga/groonga/pull/1324,"11.0.0から11.1.3までの修正のサマリーを作成する。
サマリーに入れるものの方針

サポートOSの変更
クラッシュ系のバグ修正
新機能追加のうち、マイナーでないもの
バンドルされているライブラリのバージョンアップ

nginxなど
これは最新で何になっているかしか興味がないはずなので、最新のもののみ記載（予定）



サマリーとしては概要のみ記載し、詳細は各リリースノートを参照して貰う想定で、リリースごとにサブセクションに分けている。
意図

普段マイナーバージョンアップを見ていなかったユーザーに、サマリを見てアップデートして貰う

このメジャーバージョンアップで欲しい機能やバグ修正が追加されているかどうかを伝える
手早く詳細を確認できるよう各リリースへのリンクがあった方が良さそうに感じている


これからGroongaの導入を検討するユーザーに対して、Groongaがどれくらいの活発さで活動しているのかを伝える

コミュニティの活動の活発さも、問題が起きた時にサポートして貰えそうかどうかといった点からOSS導入時の検討事項の一つになる（はずな）ので、一箇所にまとまっていると嬉しい


上記2つの理由から、削りすぎるのはあまり良くなく、必要でないものを落とすくらいの認識で考えている","11.0.0から11.1.3までの修正のサマリーを作成する。
サマリーに入れるものの方針

サポートOSの変更
クラッシュ系のバグ修正
新機能追加のうち、マイナーでないもの
バンドルされているライブラリのバージョンアップ

nginxなど
これは最新で何になっているかしか興味がないはずなので、最新のもののみ記載（予定）



サマリーとしては概要のみ記載し、詳細は各リリースノートを参照して貰う想定で、リリースごとにサブセクションに分けている。
意図

普段マイナーバージョンアップを見ていなかったユーザーに、サマリを見てアップデートして貰う

このメジャーバージョンアップで欲しい機能やバグ修正が追加されているかどうかを伝える
手早く詳細を確認できるよう各リリースへのリンクがあった方が良さそうに感じている


これからGroongaの導入を検討するユーザーに対して、Groongaがどれくらいの活発さで活動しているのかを伝える

コミュニティの活動の活発さも、問題が起きた時にサポートして貰えそうかどうかといった点からOSS導入時の検討事項の一つになる（はずな）ので、一箇所にまとまっていると嬉しい


上記2つの理由から、削りすぎるのはあまり良くなく、必要でないものを落とすくらいの認識で考えている",True,{}
groonga/groonga,https://github.com/groonga/groonga,1324,2022-02-04T06:43:00Z,2022-02-07T09:56:54Z,2022-02-07T09:56:55Z,MERGED,True,632,187,2,https://github.com/HashidaTKS,doc news: Summarize changes from Groonga 11.0.0 to Groonga 11.1.3,2,[],https://github.com/groonga/groonga/pull/1324,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1324#issuecomment-1029705920,"11.0.0から11.1.3までの修正のサマリーを作成する。
サマリーに入れるものの方針

サポートOSの変更
クラッシュ系のバグ修正
新機能追加のうち、マイナーでないもの
バンドルされているライブラリのバージョンアップ

nginxなど
これは最新で何になっているかしか興味がないはずなので、最新のもののみ記載（予定）



サマリーとしては概要のみ記載し、詳細は各リリースノートを参照して貰う想定で、リリースごとにサブセクションに分けている。
意図

普段マイナーバージョンアップを見ていなかったユーザーに、サマリを見てアップデートして貰う

このメジャーバージョンアップで欲しい機能やバグ修正が追加されているかどうかを伝える
手早く詳細を確認できるよう各リリースへのリンクがあった方が良さそうに感じている


これからGroongaの導入を検討するユーザーに対して、Groongaがどれくらいの活発さで活動しているのかを伝える

コミュニティの活動の活発さも、問題が起きた時にサポートして貰えそうかどうかといった点からOSS導入時の検討事項の一つになる（はずな）ので、一箇所にまとまっていると嬉しい


上記2つの理由から、削りすぎるのはあまり良くなく、必要でないものを落とすくらいの認識で考えている",このまとめかたで期待する成果（○○という人が××となること、なぜなら△△というまとめ方で□□という効果があると期待しているからだ、みたいなやつ）もまとめることはできますか？（できなければそれでも大丈夫です。）,True,{}
groonga/groonga,https://github.com/groonga/groonga,1324,2022-02-04T06:43:00Z,2022-02-07T09:56:54Z,2022-02-07T09:56:55Z,MERGED,True,632,187,2,https://github.com/HashidaTKS,doc news: Summarize changes from Groonga 11.0.0 to Groonga 11.1.3,2,[],https://github.com/groonga/groonga/pull/1324,https://github.com/HashidaTKS,3,https://github.com/groonga/groonga/pull/1324#issuecomment-1029712160,"11.0.0から11.1.3までの修正のサマリーを作成する。
サマリーに入れるものの方針

サポートOSの変更
クラッシュ系のバグ修正
新機能追加のうち、マイナーでないもの
バンドルされているライブラリのバージョンアップ

nginxなど
これは最新で何になっているかしか興味がないはずなので、最新のもののみ記載（予定）



サマリーとしては概要のみ記載し、詳細は各リリースノートを参照して貰う想定で、リリースごとにサブセクションに分けている。
意図

普段マイナーバージョンアップを見ていなかったユーザーに、サマリを見てアップデートして貰う

このメジャーバージョンアップで欲しい機能やバグ修正が追加されているかどうかを伝える
手早く詳細を確認できるよう各リリースへのリンクがあった方が良さそうに感じている


これからGroongaの導入を検討するユーザーに対して、Groongaがどれくらいの活発さで活動しているのかを伝える

コミュニティの活動の活発さも、問題が起きた時にサポートして貰えそうかどうかといった点からOSS導入時の検討事項の一つになる（はずな）ので、一箇所にまとまっていると嬉しい


上記2つの理由から、削りすぎるのはあまり良くなく、必要でないものを落とすくらいの認識で考えている",概要に記載しました。,True,{}
groonga/groonga,https://github.com/groonga/groonga,1324,2022-02-04T06:43:00Z,2022-02-07T09:56:54Z,2022-02-07T09:56:55Z,MERGED,True,632,187,2,https://github.com/HashidaTKS,doc news: Summarize changes from Groonga 11.0.0 to Groonga 11.1.3,2,[],https://github.com/groonga/groonga/pull/1324,https://github.com/komainu8,4,https://github.com/groonga/groonga/pull/1324#issuecomment-1029724260,"11.0.0から11.1.3までの修正のサマリーを作成する。
サマリーに入れるものの方針

サポートOSの変更
クラッシュ系のバグ修正
新機能追加のうち、マイナーでないもの
バンドルされているライブラリのバージョンアップ

nginxなど
これは最新で何になっているかしか興味がないはずなので、最新のもののみ記載（予定）



サマリーとしては概要のみ記載し、詳細は各リリースノートを参照して貰う想定で、リリースごとにサブセクションに分けている。
意図

普段マイナーバージョンアップを見ていなかったユーザーに、サマリを見てアップデートして貰う

このメジャーバージョンアップで欲しい機能やバグ修正が追加されているかどうかを伝える
手早く詳細を確認できるよう各リリースへのリンクがあった方が良さそうに感じている


これからGroongaの導入を検討するユーザーに対して、Groongaがどれくらいの活発さで活動しているのかを伝える

コミュニティの活動の活発さも、問題が起きた時にサポートして貰えそうかどうかといった点からOSS導入時の検討事項の一つになる（はずな）ので、一箇所にまとまっていると嬉しい


上記2つの理由から、削りすぎるのはあまり良くなく、必要でないものを落とすくらいの認識で考えている","「このメジャーバージョンアップで欲しい機能やバグ修正が追加されているかどうかを伝える」
という意図で

サポートOSの変更
バグ修正
新機能追加のうち、マイナーでないもの
バンドルされているライブラリのバージョンアップ

をサマリーにいれるなら、リリースごとにわけるよりは、↑のカテゴリーでまとめた方が見やすいのではないかと思います。
↑のカテゴリーに分かれているなら、サポートOSに興味がある人はそこを見れば良いですし、バグ修正に興味がある人はバグ修正のところをみればいいので、見に来た人が情報を探す手間が省けます。
どのリリースで入ったかは、
[:doc:reference/commands/select] Added support for customizing adjust weight every key word. [ :ref:release-11-0-1 ]
みたいに文末につけるのはどうでしょうか？",True,{}
groonga/groonga,https://github.com/groonga/groonga,1324,2022-02-04T06:43:00Z,2022-02-07T09:56:54Z,2022-02-07T09:56:55Z,MERGED,True,632,187,2,https://github.com/HashidaTKS,doc news: Summarize changes from Groonga 11.0.0 to Groonga 11.1.3,2,[],https://github.com/groonga/groonga/pull/1324,https://github.com/komainu8,5,https://github.com/groonga/groonga/pull/1324#issuecomment-1029725766,"11.0.0から11.1.3までの修正のサマリーを作成する。
サマリーに入れるものの方針

サポートOSの変更
クラッシュ系のバグ修正
新機能追加のうち、マイナーでないもの
バンドルされているライブラリのバージョンアップ

nginxなど
これは最新で何になっているかしか興味がないはずなので、最新のもののみ記載（予定）



サマリーとしては概要のみ記載し、詳細は各リリースノートを参照して貰う想定で、リリースごとにサブセクションに分けている。
意図

普段マイナーバージョンアップを見ていなかったユーザーに、サマリを見てアップデートして貰う

このメジャーバージョンアップで欲しい機能やバグ修正が追加されているかどうかを伝える
手早く詳細を確認できるよう各リリースへのリンクがあった方が良さそうに感じている


これからGroongaの導入を検討するユーザーに対して、Groongaがどれくらいの活発さで活動しているのかを伝える

コミュニティの活動の活発さも、問題が起きた時にサポートして貰えそうかどうかといった点からOSS導入時の検討事項の一つになる（はずな）ので、一箇所にまとまっていると嬉しい


上記2つの理由から、削りすぎるのはあまり良くなく、必要でないものを落とすくらいの認識で考えている",Added a new function string_slice()だけだと、何ができるようになったのかがわからないので、「string_slice()を使うと、検索結果から正規表現や文字の位置で文字列を抜き出せて、検索結果の文字列から有用な情報だけ取り出せるようになった。」とか、何ができるようになったのかを追加するのはどうでしょうか？,True,{}
groonga/groonga,https://github.com/groonga/groonga,1324,2022-02-04T06:43:00Z,2022-02-07T09:56:54Z,2022-02-07T09:56:55Z,MERGED,True,632,187,2,https://github.com/HashidaTKS,doc news: Summarize changes from Groonga 11.0.0 to Groonga 11.1.3,2,[],https://github.com/groonga/groonga/pull/1324,https://github.com/HashidaTKS,6,https://github.com/groonga/groonga/pull/1324#issuecomment-1029739945,"11.0.0から11.1.3までの修正のサマリーを作成する。
サマリーに入れるものの方針

サポートOSの変更
クラッシュ系のバグ修正
新機能追加のうち、マイナーでないもの
バンドルされているライブラリのバージョンアップ

nginxなど
これは最新で何になっているかしか興味がないはずなので、最新のもののみ記載（予定）



サマリーとしては概要のみ記載し、詳細は各リリースノートを参照して貰う想定で、リリースごとにサブセクションに分けている。
意図

普段マイナーバージョンアップを見ていなかったユーザーに、サマリを見てアップデートして貰う

このメジャーバージョンアップで欲しい機能やバグ修正が追加されているかどうかを伝える
手早く詳細を確認できるよう各リリースへのリンクがあった方が良さそうに感じている


これからGroongaの導入を検討するユーザーに対して、Groongaがどれくらいの活発さで活動しているのかを伝える

コミュニティの活動の活発さも、問題が起きた時にサポートして貰えそうかどうかといった点からOSS導入時の検討事項の一つになる（はずな）ので、一箇所にまとまっていると嬉しい


上記2つの理由から、削りすぎるのはあまり良くなく、必要でないものを落とすくらいの認識で考えている","* サポートOSの変更

* バグ修正

* 新機能追加のうち、マイナーでないもの

* バンドルされているライブラリのバージョンアップ

をサマリーにいれるなら、リリースごとにわけるよりは、↑のカテゴリーでまとめた方が見やすいのではないかと思います。 ↑のカテゴリーに分かれているなら、サポートOSに興味がある人はそこを見れば良いですし、バグ修正に興味がある人はバグ修正のところをみればいいので、見に来た人が情報を探す手間が省けます。

そうですね、サポートOSの変更とライブラリのバージョンアップも分けようと思います。

どのリリースで入ったかは、
[:doc:reference/commands/select] Added support for customizing adjust weight every key word. [ :ref:release-11-0-1 ]
みたいに文末につけるのはどうでしょうか？

上記のように観点別にまとめるのであれば、そのほうが良さそうですね。文末に付けます。
ただ、そのままだと表示が [Debian GNU/Linux] Added support for Debian 11(Bullseye). [11.0.2リリース - 2021-05-10] のようにリリース - 年月日が入ってしまい冗長なので、バージョン番号だけの別名をつけようと思います。

Added a new function string_slice()だけだと、何ができるようになったのかがわからないので、「string_slice()を使うと、検索結果から正規表現や文字の位置で文字列を抜き出せて、検索結果の文字列から有用な情報だけ取り出せるようになった。」とか、何ができるようになったのかを追加するのはどうでしょうか？

確かに、この場合概要すらないですね。概要のないものには追加しつつまとめます。",True,{}
groonga/groonga,https://github.com/groonga/groonga,1324,2022-02-04T06:43:00Z,2022-02-07T09:56:54Z,2022-02-07T09:56:55Z,MERGED,True,632,187,2,https://github.com/HashidaTKS,doc news: Summarize changes from Groonga 11.0.0 to Groonga 11.1.3,2,[],https://github.com/groonga/groonga/pull/1324,https://github.com/HashidaTKS,7,https://github.com/groonga/groonga/pull/1324#issuecomment-1029809554,"11.0.0から11.1.3までの修正のサマリーを作成する。
サマリーに入れるものの方針

サポートOSの変更
クラッシュ系のバグ修正
新機能追加のうち、マイナーでないもの
バンドルされているライブラリのバージョンアップ

nginxなど
これは最新で何になっているかしか興味がないはずなので、最新のもののみ記載（予定）



サマリーとしては概要のみ記載し、詳細は各リリースノートを参照して貰う想定で、リリースごとにサブセクションに分けている。
意図

普段マイナーバージョンアップを見ていなかったユーザーに、サマリを見てアップデートして貰う

このメジャーバージョンアップで欲しい機能やバグ修正が追加されているかどうかを伝える
手早く詳細を確認できるよう各リリースへのリンクがあった方が良さそうに感じている


これからGroongaの導入を検討するユーザーに対して、Groongaがどれくらいの活発さで活動しているのかを伝える

コミュニティの活動の活発さも、問題が起きた時にサポートして貰えそうかどうかといった点からOSS導入時の検討事項の一つになる（はずな）ので、一箇所にまとまっていると嬉しい


上記2つの理由から、削りすぎるのはあまり良くなく、必要でないものを落とすくらいの認識で考えている","バージョンを各変更点の後ろに入れたので、翻訳が全滅している。
元の文言はあるので翻訳するしかないか。",True,{}
groonga/groonga,https://github.com/groonga/groonga,1324,2022-02-04T06:43:00Z,2022-02-07T09:56:54Z,2022-02-07T09:56:55Z,MERGED,True,632,187,2,https://github.com/HashidaTKS,doc news: Summarize changes from Groonga 11.0.0 to Groonga 11.1.3,2,[],https://github.com/groonga/groonga/pull/1324,https://github.com/HashidaTKS,8,https://github.com/groonga/groonga/pull/1324#issuecomment-1029810582,"11.0.0から11.1.3までの修正のサマリーを作成する。
サマリーに入れるものの方針

サポートOSの変更
クラッシュ系のバグ修正
新機能追加のうち、マイナーでないもの
バンドルされているライブラリのバージョンアップ

nginxなど
これは最新で何になっているかしか興味がないはずなので、最新のもののみ記載（予定）



サマリーとしては概要のみ記載し、詳細は各リリースノートを参照して貰う想定で、リリースごとにサブセクションに分けている。
意図

普段マイナーバージョンアップを見ていなかったユーザーに、サマリを見てアップデートして貰う

このメジャーバージョンアップで欲しい機能やバグ修正が追加されているかどうかを伝える
手早く詳細を確認できるよう各リリースへのリンクがあった方が良さそうに感じている


これからGroongaの導入を検討するユーザーに対して、Groongaがどれくらいの活発さで活動しているのかを伝える

コミュニティの活動の活発さも、問題が起きた時にサポートして貰えそうかどうかといった点からOSS導入時の検討事項の一つになる（はずな）ので、一箇所にまとまっていると嬉しい


上記2つの理由から、削りすぎるのはあまり良くなく、必要でないものを落とすくらいの認識で考えている",機能順 - リリース順 に並び替えたい。,True,{}
groonga/groonga,https://github.com/groonga/groonga,1324,2022-02-04T06:43:00Z,2022-02-07T09:56:54Z,2022-02-07T09:56:55Z,MERGED,True,632,187,2,https://github.com/HashidaTKS,doc news: Summarize changes from Groonga 11.0.0 to Groonga 11.1.3,2,[],https://github.com/groonga/groonga/pull/1324,https://github.com/kou,9,https://github.com/groonga/groonga/pull/1324#issuecomment-1029810673,"11.0.0から11.1.3までの修正のサマリーを作成する。
サマリーに入れるものの方針

サポートOSの変更
クラッシュ系のバグ修正
新機能追加のうち、マイナーでないもの
バンドルされているライブラリのバージョンアップ

nginxなど
これは最新で何になっているかしか興味がないはずなので、最新のもののみ記載（予定）



サマリーとしては概要のみ記載し、詳細は各リリースノートを参照して貰う想定で、リリースごとにサブセクションに分けている。
意図

普段マイナーバージョンアップを見ていなかったユーザーに、サマリを見てアップデートして貰う

このメジャーバージョンアップで欲しい機能やバグ修正が追加されているかどうかを伝える
手早く詳細を確認できるよう各リリースへのリンクがあった方が良さそうに感じている


これからGroongaの導入を検討するユーザーに対して、Groongaがどれくらいの活発さで活動しているのかを伝える

コミュニティの活動の活発さも、問題が起きた時にサポートして貰えそうかどうかといった点からOSS導入時の検討事項の一つになる（はずな）ので、一箇所にまとまっていると嬉しい


上記2つの理由から、削りすぎるのはあまり良くなく、必要でないものを落とすくらいの認識で考えている",バージョンを別の行にすればいいです。,True,{}
groonga/groonga,https://github.com/groonga/groonga,1324,2022-02-04T06:43:00Z,2022-02-07T09:56:54Z,2022-02-07T09:56:55Z,MERGED,True,632,187,2,https://github.com/HashidaTKS,doc news: Summarize changes from Groonga 11.0.0 to Groonga 11.1.3,2,[],https://github.com/groonga/groonga/pull/1324,https://github.com/HashidaTKS,10,https://github.com/groonga/groonga/pull/1324#issuecomment-1029840764,"11.0.0から11.1.3までの修正のサマリーを作成する。
サマリーに入れるものの方針

サポートOSの変更
クラッシュ系のバグ修正
新機能追加のうち、マイナーでないもの
バンドルされているライブラリのバージョンアップ

nginxなど
これは最新で何になっているかしか興味がないはずなので、最新のもののみ記載（予定）



サマリーとしては概要のみ記載し、詳細は各リリースノートを参照して貰う想定で、リリースごとにサブセクションに分けている。
意図

普段マイナーバージョンアップを見ていなかったユーザーに、サマリを見てアップデートして貰う

このメジャーバージョンアップで欲しい機能やバグ修正が追加されているかどうかを伝える
手早く詳細を確認できるよう各リリースへのリンクがあった方が良さそうに感じている


これからGroongaの導入を検討するユーザーに対して、Groongaがどれくらいの活発さで活動しているのかを伝える

コミュニティの活動の活発さも、問題が起きた時にサポートして貰えそうかどうかといった点からOSS導入時の検討事項の一つになる（はずな）ので、一箇所にまとまっていると嬉しい


上記2つの理由から、削りすぎるのはあまり良くなく、必要でないものを落とすくらいの認識で考えている","見た目の問題で、出来れば（変換後のhtmlの）一行中にバージョンをまとめたいのですが、どうすればよいのでしょうか？
* [:doc:`/install/centos`] Dropped support for CentOS 8.
  [:ref:`11.1.1 <release-11-1-1>`]

のようにrst上は二行で変換後一行のような書き方をすればよいのかと思ったのですが駄目でした。",True,{}
groonga/groonga,https://github.com/groonga/groonga,1324,2022-02-04T06:43:00Z,2022-02-07T09:56:54Z,2022-02-07T09:56:55Z,MERGED,True,632,187,2,https://github.com/HashidaTKS,doc news: Summarize changes from Groonga 11.0.0 to Groonga 11.1.3,2,[],https://github.com/groonga/groonga/pull/1324,https://github.com/kou,11,https://github.com/groonga/groonga/pull/1324#issuecomment-1029987548,"11.0.0から11.1.3までの修正のサマリーを作成する。
サマリーに入れるものの方針

サポートOSの変更
クラッシュ系のバグ修正
新機能追加のうち、マイナーでないもの
バンドルされているライブラリのバージョンアップ

nginxなど
これは最新で何になっているかしか興味がないはずなので、最新のもののみ記載（予定）



サマリーとしては概要のみ記載し、詳細は各リリースノートを参照して貰う想定で、リリースごとにサブセクションに分けている。
意図

普段マイナーバージョンアップを見ていなかったユーザーに、サマリを見てアップデートして貰う

このメジャーバージョンアップで欲しい機能やバグ修正が追加されているかどうかを伝える
手早く詳細を確認できるよう各リリースへのリンクがあった方が良さそうに感じている


これからGroongaの導入を検討するユーザーに対して、Groongaがどれくらいの活発さで活動しているのかを伝える

コミュニティの活動の活発さも、問題が起きた時にサポートして貰えそうかどうかといった点からOSS導入時の検討事項の一つになる（はずな）ので、一箇所にまとまっていると嬉しい


上記2つの理由から、削りすぎるのはあまり良くなく、必要でないものを落とすくらいの認識で考えている","そもそもバージョン情報っているんでしたっけ。
12.0.0じゃなく、11.X.Yにアップグレード/をインストールしてもらうことを狙うなら必要だと思いますが、12.0.0にアップグレード/をインストールしてもらうことを狙うならいらない気がします。12.0.0を選べばすべての変更が入っているのでいつ変更があったかは関係ない気がします。",True,{}
groonga/groonga,https://github.com/groonga/groonga,1324,2022-02-04T06:43:00Z,2022-02-07T09:56:54Z,2022-02-07T09:56:55Z,MERGED,True,632,187,2,https://github.com/HashidaTKS,doc news: Summarize changes from Groonga 11.0.0 to Groonga 11.1.3,2,[],https://github.com/groonga/groonga/pull/1324,https://github.com/HashidaTKS,12,https://github.com/groonga/groonga/pull/1324#issuecomment-1030377733,"11.0.0から11.1.3までの修正のサマリーを作成する。
サマリーに入れるものの方針

サポートOSの変更
クラッシュ系のバグ修正
新機能追加のうち、マイナーでないもの
バンドルされているライブラリのバージョンアップ

nginxなど
これは最新で何になっているかしか興味がないはずなので、最新のもののみ記載（予定）



サマリーとしては概要のみ記載し、詳細は各リリースノートを参照して貰う想定で、リリースごとにサブセクションに分けている。
意図

普段マイナーバージョンアップを見ていなかったユーザーに、サマリを見てアップデートして貰う

このメジャーバージョンアップで欲しい機能やバグ修正が追加されているかどうかを伝える
手早く詳細を確認できるよう各リリースへのリンクがあった方が良さそうに感じている


これからGroongaの導入を検討するユーザーに対して、Groongaがどれくらいの活発さで活動しているのかを伝える

コミュニティの活動の活発さも、問題が起きた時にサポートして貰えそうかどうかといった点からOSS導入時の検討事項の一つになる（はずな）ので、一箇所にまとまっていると嬉しい


上記2つの理由から、削りすぎるのはあまり良くなく、必要でないものを落とすくらいの認識で考えている","いつ変更があったか伝えたいというよりは、各バージョンのリリースノートにはクエリ例やもう少し詳しい変更内容が記載されているので、それを簡単に参照出来るように、という意図です。
変更点の中には、selectなどの機能の方のドキュメントには記載がなく、リリースノートにしか記載されていないものがあるので、その方が親切かと思いました。",True,{}
groonga/groonga,https://github.com/groonga/groonga,1324,2022-02-04T06:43:00Z,2022-02-07T09:56:54Z,2022-02-07T09:56:55Z,MERGED,True,632,187,2,https://github.com/HashidaTKS,doc news: Summarize changes from Groonga 11.0.0 to Groonga 11.1.3,2,[],https://github.com/groonga/groonga/pull/1324,https://github.com/kou,13,https://github.com/groonga/groonga/pull/1324#issuecomment-1030697331,"11.0.0から11.1.3までの修正のサマリーを作成する。
サマリーに入れるものの方針

サポートOSの変更
クラッシュ系のバグ修正
新機能追加のうち、マイナーでないもの
バンドルされているライブラリのバージョンアップ

nginxなど
これは最新で何になっているかしか興味がないはずなので、最新のもののみ記載（予定）



サマリーとしては概要のみ記載し、詳細は各リリースノートを参照して貰う想定で、リリースごとにサブセクションに分けている。
意図

普段マイナーバージョンアップを見ていなかったユーザーに、サマリを見てアップデートして貰う

このメジャーバージョンアップで欲しい機能やバグ修正が追加されているかどうかを伝える
手早く詳細を確認できるよう各リリースへのリンクがあった方が良さそうに感じている


これからGroongaの導入を検討するユーザーに対して、Groongaがどれくらいの活発さで活動しているのかを伝える

コミュニティの活動の活発さも、問題が起きた時にサポートして貰えそうかどうかといった点からOSS導入時の検討事項の一つになる（はずな）ので、一箇所にまとまっていると嬉しい


上記2つの理由から、削りすぎるのはあまり良くなく、必要でないものを落とすくらいの認識で考えている","あぁ、バージョン情報が重要じゃなくて詳細へのリンクが重要ということですか。
個人的には詳細へのリンクが行末にあるよりも別行の方が表示位置が左端に揃って参照しやすい気はします。
行末：
・XXXXXXXXXXXXXXXXXXXXXXXXXXXX [詳細]
・XXXXXXXXXXXXXXXXX [詳細]
・XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX [詳細]

別行：
・XXXXXXXXXXXXXXXXXXXXXXXXXXXX
　 [詳細]
・XXXXXXXXXXXXXXXXX
　 [詳細]
・XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
　 [詳細]


変更点の中には、selectなどの機能の方のドキュメントには記載がなく、リリースノートにしか記載されていないものがあるので、その方が親切かと思いました。

そういう情報はおいおいselectとかのドキュメントの方にもっていかないといけませんね。。。
ユーザーが使い方を調べるときにリリースノートを見ることはないと思うので。",True,{}
groonga/groonga,https://github.com/groonga/groonga,1324,2022-02-04T06:43:00Z,2022-02-07T09:56:54Z,2022-02-07T09:56:55Z,MERGED,True,632,187,2,https://github.com/HashidaTKS,doc news: Summarize changes from Groonga 11.0.0 to Groonga 11.1.3,2,[],https://github.com/groonga/groonga/pull/1324,https://github.com/kou,14,https://github.com/groonga/groonga/pull/1324#issuecomment-1030697537,"11.0.0から11.1.3までの修正のサマリーを作成する。
サマリーに入れるものの方針

サポートOSの変更
クラッシュ系のバグ修正
新機能追加のうち、マイナーでないもの
バンドルされているライブラリのバージョンアップ

nginxなど
これは最新で何になっているかしか興味がないはずなので、最新のもののみ記載（予定）



サマリーとしては概要のみ記載し、詳細は各リリースノートを参照して貰う想定で、リリースごとにサブセクションに分けている。
意図

普段マイナーバージョンアップを見ていなかったユーザーに、サマリを見てアップデートして貰う

このメジャーバージョンアップで欲しい機能やバグ修正が追加されているかどうかを伝える
手早く詳細を確認できるよう各リリースへのリンクがあった方が良さそうに感じている


これからGroongaの導入を検討するユーザーに対して、Groongaがどれくらいの活発さで活動しているのかを伝える

コミュニティの活動の活発さも、問題が起きた時にサポートして貰えそうかどうかといった点からOSS導入時の検討事項の一つになる（はずな）ので、一箇所にまとまっていると嬉しい


上記2つの理由から、削りすぎるのはあまり良くなく、必要でないものを落とすくらいの認識で考えている",どうしても行末がいいなら全部翻訳を用意するしかないです。（翻訳対象の文字列が1文字でも違えば別の翻訳テキストが必要になる。）,True,{}
groonga/groonga,https://github.com/groonga/groonga,1324,2022-02-04T06:43:00Z,2022-02-07T09:56:54Z,2022-02-07T09:56:55Z,MERGED,True,632,187,2,https://github.com/HashidaTKS,doc news: Summarize changes from Groonga 11.0.0 to Groonga 11.1.3,2,[],https://github.com/groonga/groonga/pull/1324,https://github.com/HashidaTKS,15,https://github.com/groonga/groonga/pull/1324#issuecomment-1030968972,"11.0.0から11.1.3までの修正のサマリーを作成する。
サマリーに入れるものの方針

サポートOSの変更
クラッシュ系のバグ修正
新機能追加のうち、マイナーでないもの
バンドルされているライブラリのバージョンアップ

nginxなど
これは最新で何になっているかしか興味がないはずなので、最新のもののみ記載（予定）



サマリーとしては概要のみ記載し、詳細は各リリースノートを参照して貰う想定で、リリースごとにサブセクションに分けている。
意図

普段マイナーバージョンアップを見ていなかったユーザーに、サマリを見てアップデートして貰う

このメジャーバージョンアップで欲しい機能やバグ修正が追加されているかどうかを伝える
手早く詳細を確認できるよう各リリースへのリンクがあった方が良さそうに感じている


これからGroongaの導入を検討するユーザーに対して、Groongaがどれくらいの活発さで活動しているのかを伝える

コミュニティの活動の活発さも、問題が起きた時にサポートして貰えそうかどうかといった点からOSS導入時の検討事項の一つになる（はずな）ので、一箇所にまとまっていると嬉しい


上記2つの理由から、削りすぎるのはあまり良くなく、必要でないものを落とすくらいの認識で考えている","ありがとうございます。ベースとなる翻訳があるとはいえ、全て翻訳し直すのは若干手間なので、詳細への参照は改行して表示することにしました。
残：細かな追加文言等の翻訳",True,{}
groonga/groonga,https://github.com/groonga/groonga,1325,2022-02-08T09:15:41Z,2022-03-12T12:17:45Z,2022-03-12T12:17:45Z,MERGED,True,2,0,2,https://github.com/HashidaTKS,ci: increase timeout for HTTP chunked test,3,[],https://github.com/groonga/groonga/pull/1325,https://github.com/HashidaTKS,1,https://github.com/groonga/groonga/pull/1325,"HTTP chunked test is slower than others. We should improve performance for HTTP chunked
but we increase timeout for now.","HTTP chunked test is slower than others. We should improve performance for HTTP chunked
but we increase timeout for now.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1325,2022-02-08T09:15:41Z,2022-03-12T12:17:45Z,2022-03-12T12:17:45Z,MERGED,True,2,0,2,https://github.com/HashidaTKS,ci: increase timeout for HTTP chunked test,3,[],https://github.com/groonga/groonga/pull/1325,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1325#issuecomment-1032394066,"HTTP chunked test is slower than others. We should improve performance for HTTP chunked
but we increase timeout for now.",Do we need more timeout not only for chunked case?,True,{}
groonga/groonga,https://github.com/groonga/groonga,1325,2022-02-08T09:15:41Z,2022-03-12T12:17:45Z,2022-03-12T12:17:45Z,MERGED,True,2,0,2,https://github.com/HashidaTKS,ci: increase timeout for HTTP chunked test,3,[],https://github.com/groonga/groonga/pull/1325,https://github.com/HashidaTKS,3,https://github.com/groonga/groonga/pull/1325#issuecomment-1032417141,"HTTP chunked test is slower than others. We should improve performance for HTTP chunked
but we increase timeout for now.","Honestly, I can't decide whether we need to add timeout option for all http cases.
Recently, only the chunked case seems to time out but I guess it may occur in other http cases.
Does the chunked case do something special to occur timeout?",True,{}
groonga/groonga,https://github.com/groonga/groonga,1325,2022-02-08T09:15:41Z,2022-03-12T12:17:45Z,2022-03-12T12:17:45Z,MERGED,True,2,0,2,https://github.com/HashidaTKS,ci: increase timeout for HTTP chunked test,3,[],https://github.com/groonga/groonga/pull/1325,https://github.com/kou,4,https://github.com/groonga/groonga/pull/1325#issuecomment-1033217995,"HTTP chunked test is slower than others. We should improve performance for HTTP chunked
but we increase timeout for now.","Does the chunked case do something special to occur timeout?

We need to comparing slower case deeply to identify it but the chunked case is slower than others obviously:
https://github.com/groonga/groonga/runs/5110173990?check_suite_focus=true

Test: stdio: 7m10s
Test: HTTP: load: Apache Arrow: 7m5s
Test: HTTP: command: POST: 7m2s
Test: HTTP: command: chunked: 8m13s
Test: HTTP: groonga-httpd: 6m52s
Test: HTTP: reference count: 7m49s

We may should improve performance of the chunked case as the real fix.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1325,2022-02-08T09:15:41Z,2022-03-12T12:17:45Z,2022-03-12T12:17:45Z,MERGED,True,2,0,2,https://github.com/HashidaTKS,ci: increase timeout for HTTP chunked test,3,[],https://github.com/groonga/groonga/pull/1325,https://github.com/HashidaTKS,5,https://github.com/groonga/groonga/pull/1325#issuecomment-1034375608,"HTTP chunked test is slower than others. We should improve performance for HTTP chunked
but we increase timeout for now.","I see, I have removed the timeout option from not chunked cases.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1327,2022-02-21T03:22:19Z,2022-02-28T08:53:36Z,2022-02-28T08:53:37Z,MERGED,True,351,78,2,https://github.com/komainu8,doc news: add news topics for 12.0.1,1,[],https://github.com/groonga/groonga/pull/1327,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1327,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1328,2022-02-25T09:33:54Z,2022-02-25T20:49:40Z,2022-02-25T20:49:48Z,MERGED,True,23,1,2,https://github.com/HashidaTKS,ci: Add support for Visual Studio 2022,3,[],https://github.com/groonga/groonga/pull/1328,https://github.com/HashidaTKS,1,https://github.com/groonga/groonga/pull/1328,Visual studio 2022 is installed to Program Files not Program Files (x86),Visual studio 2022 is installed to Program Files not Program Files (x86),True,{}
groonga/groonga,https://github.com/groonga/groonga,1328,2022-02-25T09:33:54Z,2022-02-25T20:49:40Z,2022-02-25T20:49:48Z,MERGED,True,23,1,2,https://github.com/HashidaTKS,ci: Add support for Visual Studio 2022,3,[],https://github.com/groonga/groonga/pull/1328,https://github.com/HashidaTKS,2,https://github.com/groonga/groonga/pull/1328#issuecomment-1050689777,Visual studio 2022 is installed to Program Files not Program Files (x86),#1326,True,{}
groonga/groonga,https://github.com/groonga/groonga,1328,2022-02-25T09:33:54Z,2022-02-25T20:49:40Z,2022-02-25T20:49:48Z,MERGED,True,23,1,2,https://github.com/HashidaTKS,ci: Add support for Visual Studio 2022,3,[],https://github.com/groonga/groonga/pull/1328,https://github.com/kou,3,https://github.com/groonga/groonga/pull/1328#issuecomment-1051255762,Visual studio 2022 is installed to Program Files not Program Files (x86),Good catch!,True,{}
groonga/groonga,https://github.com/groonga/groonga,1330,2022-03-03T03:32:55Z,2022-03-24T07:09:36Z,2022-03-24T07:09:39Z,MERGED,True,320,72,16,https://github.com/HashidaTKS,logical_range_filter: Add support for immediate un-reference of shards,12,[],https://github.com/groonga/groonga/pull/1330,https://github.com/HashidaTKS,1,https://github.com/groonga/groonga/pull/1330,"Add support for immediate un-reference of shards.
Behavior before patched
All shards are un-referred at the end of the command.
Behavior after patched
Shards that are no longer referred are un-referred immediately.","Add support for immediate un-reference of shards.
Behavior before patched
All shards are un-referred at the end of the command.
Behavior after patched
Shards that are no longer referred are un-referred immediately.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1330,2022-03-03T03:32:55Z,2022-03-24T07:09:36Z,2022-03-24T07:09:39Z,MERGED,True,320,72,16,https://github.com/HashidaTKS,logical_range_filter: Add support for immediate un-reference of shards,12,[],https://github.com/groonga/groonga/pull/1330,https://github.com/HashidaTKS,2,https://github.com/groonga/groonga/pull/1330#issuecomment-1063789618,"Add support for immediate un-reference of shards.
Behavior before patched
All shards are un-referred at the end of the command.
Behavior after patched
Shards that are no longer referred are un-referred immediately.","I am testing performance and will add results to this PR after I finish the test.
Although just waiting for finish, it will take time a little.
@kou , @komainu8
Would you please review this before I finish the performance test?",True,{}
groonga/groonga,https://github.com/groonga/groonga,1330,2022-03-03T03:32:55Z,2022-03-24T07:09:36Z,2022-03-24T07:09:39Z,MERGED,True,320,72,16,https://github.com/HashidaTKS,logical_range_filter: Add support for immediate un-reference of shards,12,[],https://github.com/groonga/groonga/pull/1330,https://github.com/komainu8,3,https://github.com/groonga/groonga/pull/1330#issuecomment-1064644667,"Add support for immediate un-reference of shards.
Behavior before patched
All shards are un-referred at the end of the command.
Behavior after patched
Shards that are no longer referred are un-referred immediately.","@HashidaTKS
This PR fails all tests on CI.
Are these failures due to your modifications?",True,{}
groonga/groonga,https://github.com/groonga/groonga,1330,2022-03-03T03:32:55Z,2022-03-24T07:09:36Z,2022-03-24T07:09:39Z,MERGED,True,320,72,16,https://github.com/HashidaTKS,logical_range_filter: Add support for immediate un-reference of shards,12,[],https://github.com/groonga/groonga/pull/1330,https://github.com/HashidaTKS,4,https://github.com/groonga/groonga/pull/1330#issuecomment-1064668178,"Add support for immediate un-reference of shards.
Behavior before patched
All shards are un-referred at the end of the command.
Behavior after patched
Shards that are no longer referred are un-referred immediately.",Maybe they are due to my modification. I'll fix them.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1330,2022-03-03T03:32:55Z,2022-03-24T07:09:36Z,2022-03-24T07:09:39Z,MERGED,True,320,72,16,https://github.com/HashidaTKS,logical_range_filter: Add support for immediate un-reference of shards,12,[],https://github.com/groonga/groonga/pull/1330,https://github.com/HashidaTKS,5,https://github.com/groonga/groonga/pull/1330#issuecomment-1064770051,"Add support for immediate un-reference of shards.
Behavior before patched
All shards are un-referred at the end of the command.
Behavior after patched
Shards that are no longer referred are un-referred immediately.",They have been fixed by rebasing to groonga:master,True,{}
groonga/groonga,https://github.com/groonga/groonga,1330,2022-03-03T03:32:55Z,2022-03-24T07:09:36Z,2022-03-24T07:09:39Z,MERGED,True,320,72,16,https://github.com/HashidaTKS,logical_range_filter: Add support for immediate un-reference of shards,12,[],https://github.com/groonga/groonga/pull/1330,https://github.com/kou,6,https://github.com/groonga/groonga/pull/1330#issuecomment-1067439999,"Add support for immediate un-reference of shards.
Behavior before patched
All shards are un-referred at the end of the command.
Behavior after patched
Shards that are no longer referred are un-referred immediately.",Can we test this change by adding #@add-important-log-levels or something to existing tests?,True,{}
groonga/groonga,https://github.com/groonga/groonga,1330,2022-03-03T03:32:55Z,2022-03-24T07:09:36Z,2022-03-24T07:09:39Z,MERGED,True,320,72,16,https://github.com/HashidaTKS,logical_range_filter: Add support for immediate un-reference of shards,12,[],https://github.com/groonga/groonga/pull/1330,https://github.com/HashidaTKS,7,https://github.com/groonga/groonga/pull/1330#issuecomment-1067468799,"Add support for immediate un-reference of shards.
Behavior before patched
All shards are un-referred at the end of the command.
Behavior after patched
Shards that are no longer referred are un-referred immediately.","How about adding Shard#first? and Shard#last? instead of checking index?

Looks good!
I adopt this idea.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1330,2022-03-03T03:32:55Z,2022-03-24T07:09:36Z,2022-03-24T07:09:39Z,MERGED,True,320,72,16,https://github.com/HashidaTKS,logical_range_filter: Add support for immediate un-reference of shards,12,[],https://github.com/groonga/groonga/pull/1330,https://github.com/HashidaTKS,8,https://github.com/groonga/groonga/pull/1330#issuecomment-1067718094,"Add support for immediate un-reference of shards.
Behavior before patched
All shards are un-referred at the end of the command.
Behavior after patched
Shards that are no longer referred are un-referred immediately.","Can we test this change by adding #@add-important-log-levels or something to existing tests?

I have added #$GRN_ENABLE_REFERENCE_COUNT=yes to all tests of logical_range_filter,
but not adding #@add-important-log-levels and log_level --level dump to the all tests, just changing log_level of tests that currently use it.
I will add them later ( in this PR ).",True,{}
groonga/groonga,https://github.com/groonga/groonga,1330,2022-03-03T03:32:55Z,2022-03-24T07:09:36Z,2022-03-24T07:09:39Z,MERGED,True,320,72,16,https://github.com/HashidaTKS,logical_range_filter: Add support for immediate un-reference of shards,12,[],https://github.com/groonga/groonga/pull/1330,https://github.com/kou,9,https://github.com/groonga/groonga/pull/1330#issuecomment-1067719709,"Add support for immediate un-reference of shards.
Behavior before patched
All shards are un-referred at the end of the command.
Behavior after patched
Shards that are no longer referred are un-referred immediately.",We don't need to add #$GRN_ENABLE_REFERENCE_COUNT=yes to tests that don't verify open/close.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1330,2022-03-03T03:32:55Z,2022-03-24T07:09:36Z,2022-03-24T07:09:39Z,MERGED,True,320,72,16,https://github.com/HashidaTKS,logical_range_filter: Add support for immediate un-reference of shards,12,[],https://github.com/groonga/groonga/pull/1330,https://github.com/HashidaTKS,10,https://github.com/groonga/groonga/pull/1330#issuecomment-1067736064,"Add support for immediate un-reference of shards.
Behavior before patched
All shards are un-referred at the end of the command.
Behavior after patched
Shards that are no longer referred are un-referred immediately.","I intended to verify open/close at all tests under a plan to change current tests.
Okay, I will pick out tests that need to verify open/close.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1330,2022-03-03T03:32:55Z,2022-03-24T07:09:36Z,2022-03-24T07:09:39Z,MERGED,True,320,72,16,https://github.com/HashidaTKS,logical_range_filter: Add support for immediate un-reference of shards,12,[],https://github.com/groonga/groonga/pull/1330,https://github.com/HashidaTKS,11,https://github.com/groonga/groonga/pull/1330#issuecomment-1068685880,"Add support for immediate un-reference of shards.
Behavior before patched
All shards are un-referred at the end of the command.
Behavior after patched
Shards that are no longer referred are un-referred immediately.","I have picked up tests for verifying open/close objects in the point of view below.

Targeting 3 or more shards

using window function
not using window function


Targeting 1 shard

using window function
not using window function


Having result_set
Not having result_set but not error (means reaching end)

shards are not closed in some cases, but it seems that it is not the matter of logical_range_filter, so I will fix it in another PR, I mentioned this at #1330 (comment) .",True,{}
groonga/groonga,https://github.com/groonga/groonga,1330,2022-03-03T03:32:55Z,2022-03-24T07:09:36Z,2022-03-24T07:09:39Z,MERGED,True,320,72,16,https://github.com/HashidaTKS,logical_range_filter: Add support for immediate un-reference of shards,12,[],https://github.com/groonga/groonga/pull/1330,https://github.com/kou,12,https://github.com/groonga/groonga/pull/1330#issuecomment-1077305248,"Add support for immediate un-reference of shards.
Behavior before patched
All shards are un-referred at the end of the command.
Behavior after patched
Shards that are no longer referred are un-referred immediately.",Thanks.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1331,2022-03-09T00:59:14Z,2022-03-25T06:07:44Z,2022-03-25T06:07:45Z,MERGED,True,211,32,2,https://github.com/komainu8,doc news: add news topics for 12.0.2,1,[],https://github.com/groonga/groonga/pull/1331,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1331,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1333,2022-03-17T07:49:24Z,2022-03-23T08:09:50Z,2022-03-23T08:09:54Z,MERGED,True,150,0,7,https://github.com/HashidaTKS,Add necessary unref to grn_obj_get_accessor,1,[],https://github.com/groonga/groonga/pull/1333,https://github.com/HashidaTKS,1,https://github.com/groonga/groonga/pull/1333,"This is a patch for https://github.com/groonga/groonga/pull/1330/files#r827579558
An opened table is not closed in cases below.

using time_classify_xxx with dynamic column
using window function with dynamic column
specifying a non existent column on output_column with specifying filter

select command also has these issues so I guess this is not the matter of logical_range_filter.
The commands to reproduce these are below.
common
plugin_register functions/time
table_create Logs_20170315 TABLE_NO_KEY
column_create Logs_20170315 timestamp COLUMN_SCALAR Time
column_create Logs_20170315 price COLUMN_SCALAR UInt32
load --table Logs_20170315
[
{""timestamp"": ""2017/03/15 00:00:00"", ""price"": 1000},
{""timestamp"": ""2017/03/15 11:00:00"", ""price"":  900},
{""timestamp"": ""2017/03/15 12:00:00"", ""price"":  300},
{""timestamp"": ""2017/03/15 13:00:00"", ""price"":  200}
]
log_level --level dump

Case 1: using time_classify_xxx with dynamic column
select Logs_20170315   --columns[day].stage filtered   --columns[day].type Time   --columns[day].flags COLUMN_SCALAR   --columns[day].value 'time_classify_day(timestamp-36000000000)'   --output_columns _id
[[0,0.0,0.0],[[[4],[[""_id"",""UInt32""]],[1],[2],[3],[4]]]]
#|-| [obj][open] <272>(<Logs_20170315>):<51>(<table:no_key>)
#|-| [obj][open] <273>(<Logs_20170315.timestamp>):<64>(<column:fix_size>)
#|-| [obj][close] <273>(<Logs_20170315.timestamp>):<64>(<column:fix_size>)

Case 2: using window function with dynamic column
select Logs_20170315   --columns[price_per_day].stage filtered   --columns[price_per_day].type UInt32   --columns[price_per_day].flags COLUMN_SCALAR   --columns[price_per_day].value 'window_sum(price)'   --columns[price_per_day].window.group_keys 'timestamp'   --output_columns _id
[[0,0.0,0.0],[[[4],[[""_id"",""UInt32""]],[1],[2],[3],[4]]]]
#|-| [obj][open] <272>(<Logs_20170315>):<51>(<table:no_key>)
#|-| [obj][open] <274>(<Logs_20170315.price>):<64>(<column:fix_size>)
#|-| [obj][open] <273>(<Logs_20170315.timestamp>):<64>(<column:fix_size>)
#|-| [obj][close] <274>(<Logs_20170315.price>):<64>(<column:fix_size>)
#|-| [obj][close] <273>(<Logs_20170315.timestamp>):<64>(<column:fix_size>)

Case 3: specifying a non existent column with output_column
select Logs_20170315   --filter 'price >= 300'   --output_columns _id,non_existent
[[0,0.0,0.0],[[[3],[[""_id"",""UInt32""]],[1],[2],[3]]]]
#|-| [obj][open] <272>(<Logs_20170315>):<51>(<table:no_key>)
#|-| [obj][open] <274>(<Logs_20170315.price>):<64>(<column:fix_size>)
#|-| [obj][close] <274>(<Logs_20170315.price>):<64>(<column:fix_size>)","This is a patch for https://github.com/groonga/groonga/pull/1330/files#r827579558
An opened table is not closed in cases below.

using time_classify_xxx with dynamic column
using window function with dynamic column
specifying a non existent column on output_column with specifying filter

select command also has these issues so I guess this is not the matter of logical_range_filter.
The commands to reproduce these are below.
common
plugin_register functions/time
table_create Logs_20170315 TABLE_NO_KEY
column_create Logs_20170315 timestamp COLUMN_SCALAR Time
column_create Logs_20170315 price COLUMN_SCALAR UInt32
load --table Logs_20170315
[
{""timestamp"": ""2017/03/15 00:00:00"", ""price"": 1000},
{""timestamp"": ""2017/03/15 11:00:00"", ""price"":  900},
{""timestamp"": ""2017/03/15 12:00:00"", ""price"":  300},
{""timestamp"": ""2017/03/15 13:00:00"", ""price"":  200}
]
log_level --level dump

Case 1: using time_classify_xxx with dynamic column
select Logs_20170315   --columns[day].stage filtered   --columns[day].type Time   --columns[day].flags COLUMN_SCALAR   --columns[day].value 'time_classify_day(timestamp-36000000000)'   --output_columns _id
[[0,0.0,0.0],[[[4],[[""_id"",""UInt32""]],[1],[2],[3],[4]]]]
#|-| [obj][open] <272>(<Logs_20170315>):<51>(<table:no_key>)
#|-| [obj][open] <273>(<Logs_20170315.timestamp>):<64>(<column:fix_size>)
#|-| [obj][close] <273>(<Logs_20170315.timestamp>):<64>(<column:fix_size>)

Case 2: using window function with dynamic column
select Logs_20170315   --columns[price_per_day].stage filtered   --columns[price_per_day].type UInt32   --columns[price_per_day].flags COLUMN_SCALAR   --columns[price_per_day].value 'window_sum(price)'   --columns[price_per_day].window.group_keys 'timestamp'   --output_columns _id
[[0,0.0,0.0],[[[4],[[""_id"",""UInt32""]],[1],[2],[3],[4]]]]
#|-| [obj][open] <272>(<Logs_20170315>):<51>(<table:no_key>)
#|-| [obj][open] <274>(<Logs_20170315.price>):<64>(<column:fix_size>)
#|-| [obj][open] <273>(<Logs_20170315.timestamp>):<64>(<column:fix_size>)
#|-| [obj][close] <274>(<Logs_20170315.price>):<64>(<column:fix_size>)
#|-| [obj][close] <273>(<Logs_20170315.timestamp>):<64>(<column:fix_size>)

Case 3: specifying a non existent column with output_column
select Logs_20170315   --filter 'price >= 300'   --output_columns _id,non_existent
[[0,0.0,0.0],[[[3],[[""_id"",""UInt32""]],[1],[2],[3]]]]
#|-| [obj][open] <272>(<Logs_20170315>):<51>(<table:no_key>)
#|-| [obj][open] <274>(<Logs_20170315.price>):<64>(<column:fix_size>)
#|-| [obj][close] <274>(<Logs_20170315.price>):<64>(<column:fix_size>)",True,{}
groonga/groonga,https://github.com/groonga/groonga,1333,2022-03-17T07:49:24Z,2022-03-23T08:09:50Z,2022-03-23T08:09:54Z,MERGED,True,150,0,7,https://github.com/HashidaTKS,Add necessary unref to grn_obj_get_accessor,1,[],https://github.com/groonga/groonga/pull/1333,https://github.com/HashidaTKS,2,https://github.com/groonga/groonga/pull/1333#issuecomment-1070484277,"This is a patch for https://github.com/groonga/groonga/pull/1330/files#r827579558
An opened table is not closed in cases below.

using time_classify_xxx with dynamic column
using window function with dynamic column
specifying a non existent column on output_column with specifying filter

select command also has these issues so I guess this is not the matter of logical_range_filter.
The commands to reproduce these are below.
common
plugin_register functions/time
table_create Logs_20170315 TABLE_NO_KEY
column_create Logs_20170315 timestamp COLUMN_SCALAR Time
column_create Logs_20170315 price COLUMN_SCALAR UInt32
load --table Logs_20170315
[
{""timestamp"": ""2017/03/15 00:00:00"", ""price"": 1000},
{""timestamp"": ""2017/03/15 11:00:00"", ""price"":  900},
{""timestamp"": ""2017/03/15 12:00:00"", ""price"":  300},
{""timestamp"": ""2017/03/15 13:00:00"", ""price"":  200}
]
log_level --level dump

Case 1: using time_classify_xxx with dynamic column
select Logs_20170315   --columns[day].stage filtered   --columns[day].type Time   --columns[day].flags COLUMN_SCALAR   --columns[day].value 'time_classify_day(timestamp-36000000000)'   --output_columns _id
[[0,0.0,0.0],[[[4],[[""_id"",""UInt32""]],[1],[2],[3],[4]]]]
#|-| [obj][open] <272>(<Logs_20170315>):<51>(<table:no_key>)
#|-| [obj][open] <273>(<Logs_20170315.timestamp>):<64>(<column:fix_size>)
#|-| [obj][close] <273>(<Logs_20170315.timestamp>):<64>(<column:fix_size>)

Case 2: using window function with dynamic column
select Logs_20170315   --columns[price_per_day].stage filtered   --columns[price_per_day].type UInt32   --columns[price_per_day].flags COLUMN_SCALAR   --columns[price_per_day].value 'window_sum(price)'   --columns[price_per_day].window.group_keys 'timestamp'   --output_columns _id
[[0,0.0,0.0],[[[4],[[""_id"",""UInt32""]],[1],[2],[3],[4]]]]
#|-| [obj][open] <272>(<Logs_20170315>):<51>(<table:no_key>)
#|-| [obj][open] <274>(<Logs_20170315.price>):<64>(<column:fix_size>)
#|-| [obj][open] <273>(<Logs_20170315.timestamp>):<64>(<column:fix_size>)
#|-| [obj][close] <274>(<Logs_20170315.price>):<64>(<column:fix_size>)
#|-| [obj][close] <273>(<Logs_20170315.timestamp>):<64>(<column:fix_size>)

Case 3: specifying a non existent column with output_column
select Logs_20170315   --filter 'price >= 300'   --output_columns _id,non_existent
[[0,0.0,0.0],[[[3],[[""_id"",""UInt32""]],[1],[2],[3]]]]
#|-| [obj][open] <272>(<Logs_20170315>):<51>(<table:no_key>)
#|-| [obj][open] <274>(<Logs_20170315.price>):<64>(<column:fix_size>)
#|-| [obj][close] <274>(<Logs_20170315.price>):<64>(<column:fix_size>)",I would like to merge this after #1330 is merged because tests related to this PR are added at #1330.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1333,2022-03-17T07:49:24Z,2022-03-23T08:09:50Z,2022-03-23T08:09:54Z,MERGED,True,150,0,7,https://github.com/HashidaTKS,Add necessary unref to grn_obj_get_accessor,1,[],https://github.com/groonga/groonga/pull/1333,https://github.com/kou,3,https://github.com/groonga/groonga/pull/1333#issuecomment-1070487001,"This is a patch for https://github.com/groonga/groonga/pull/1330/files#r827579558
An opened table is not closed in cases below.

using time_classify_xxx with dynamic column
using window function with dynamic column
specifying a non existent column on output_column with specifying filter

select command also has these issues so I guess this is not the matter of logical_range_filter.
The commands to reproduce these are below.
common
plugin_register functions/time
table_create Logs_20170315 TABLE_NO_KEY
column_create Logs_20170315 timestamp COLUMN_SCALAR Time
column_create Logs_20170315 price COLUMN_SCALAR UInt32
load --table Logs_20170315
[
{""timestamp"": ""2017/03/15 00:00:00"", ""price"": 1000},
{""timestamp"": ""2017/03/15 11:00:00"", ""price"":  900},
{""timestamp"": ""2017/03/15 12:00:00"", ""price"":  300},
{""timestamp"": ""2017/03/15 13:00:00"", ""price"":  200}
]
log_level --level dump

Case 1: using time_classify_xxx with dynamic column
select Logs_20170315   --columns[day].stage filtered   --columns[day].type Time   --columns[day].flags COLUMN_SCALAR   --columns[day].value 'time_classify_day(timestamp-36000000000)'   --output_columns _id
[[0,0.0,0.0],[[[4],[[""_id"",""UInt32""]],[1],[2],[3],[4]]]]
#|-| [obj][open] <272>(<Logs_20170315>):<51>(<table:no_key>)
#|-| [obj][open] <273>(<Logs_20170315.timestamp>):<64>(<column:fix_size>)
#|-| [obj][close] <273>(<Logs_20170315.timestamp>):<64>(<column:fix_size>)

Case 2: using window function with dynamic column
select Logs_20170315   --columns[price_per_day].stage filtered   --columns[price_per_day].type UInt32   --columns[price_per_day].flags COLUMN_SCALAR   --columns[price_per_day].value 'window_sum(price)'   --columns[price_per_day].window.group_keys 'timestamp'   --output_columns _id
[[0,0.0,0.0],[[[4],[[""_id"",""UInt32""]],[1],[2],[3],[4]]]]
#|-| [obj][open] <272>(<Logs_20170315>):<51>(<table:no_key>)
#|-| [obj][open] <274>(<Logs_20170315.price>):<64>(<column:fix_size>)
#|-| [obj][open] <273>(<Logs_20170315.timestamp>):<64>(<column:fix_size>)
#|-| [obj][close] <274>(<Logs_20170315.price>):<64>(<column:fix_size>)
#|-| [obj][close] <273>(<Logs_20170315.timestamp>):<64>(<column:fix_size>)

Case 3: specifying a non existent column with output_column
select Logs_20170315   --filter 'price >= 300'   --output_columns _id,non_existent
[[0,0.0,0.0],[[[3],[[""_id"",""UInt32""]],[1],[2],[3]]]]
#|-| [obj][open] <272>(<Logs_20170315>):<51>(<table:no_key>)
#|-| [obj][open] <274>(<Logs_20170315.price>):<64>(<column:fix_size>)
#|-| [obj][close] <274>(<Logs_20170315.price>):<64>(<column:fix_size>)",Could you add a test for this with select?,True,{}
groonga/groonga,https://github.com/groonga/groonga,1333,2022-03-17T07:49:24Z,2022-03-23T08:09:50Z,2022-03-23T08:09:54Z,MERGED,True,150,0,7,https://github.com/HashidaTKS,Add necessary unref to grn_obj_get_accessor,1,[],https://github.com/groonga/groonga/pull/1333,https://github.com/HashidaTKS,4,https://github.com/groonga/groonga/pull/1333#issuecomment-1070488210,"This is a patch for https://github.com/groonga/groonga/pull/1330/files#r827579558
An opened table is not closed in cases below.

using time_classify_xxx with dynamic column
using window function with dynamic column
specifying a non existent column on output_column with specifying filter

select command also has these issues so I guess this is not the matter of logical_range_filter.
The commands to reproduce these are below.
common
plugin_register functions/time
table_create Logs_20170315 TABLE_NO_KEY
column_create Logs_20170315 timestamp COLUMN_SCALAR Time
column_create Logs_20170315 price COLUMN_SCALAR UInt32
load --table Logs_20170315
[
{""timestamp"": ""2017/03/15 00:00:00"", ""price"": 1000},
{""timestamp"": ""2017/03/15 11:00:00"", ""price"":  900},
{""timestamp"": ""2017/03/15 12:00:00"", ""price"":  300},
{""timestamp"": ""2017/03/15 13:00:00"", ""price"":  200}
]
log_level --level dump

Case 1: using time_classify_xxx with dynamic column
select Logs_20170315   --columns[day].stage filtered   --columns[day].type Time   --columns[day].flags COLUMN_SCALAR   --columns[day].value 'time_classify_day(timestamp-36000000000)'   --output_columns _id
[[0,0.0,0.0],[[[4],[[""_id"",""UInt32""]],[1],[2],[3],[4]]]]
#|-| [obj][open] <272>(<Logs_20170315>):<51>(<table:no_key>)
#|-| [obj][open] <273>(<Logs_20170315.timestamp>):<64>(<column:fix_size>)
#|-| [obj][close] <273>(<Logs_20170315.timestamp>):<64>(<column:fix_size>)

Case 2: using window function with dynamic column
select Logs_20170315   --columns[price_per_day].stage filtered   --columns[price_per_day].type UInt32   --columns[price_per_day].flags COLUMN_SCALAR   --columns[price_per_day].value 'window_sum(price)'   --columns[price_per_day].window.group_keys 'timestamp'   --output_columns _id
[[0,0.0,0.0],[[[4],[[""_id"",""UInt32""]],[1],[2],[3],[4]]]]
#|-| [obj][open] <272>(<Logs_20170315>):<51>(<table:no_key>)
#|-| [obj][open] <274>(<Logs_20170315.price>):<64>(<column:fix_size>)
#|-| [obj][open] <273>(<Logs_20170315.timestamp>):<64>(<column:fix_size>)
#|-| [obj][close] <274>(<Logs_20170315.price>):<64>(<column:fix_size>)
#|-| [obj][close] <273>(<Logs_20170315.timestamp>):<64>(<column:fix_size>)

Case 3: specifying a non existent column with output_column
select Logs_20170315   --filter 'price >= 300'   --output_columns _id,non_existent
[[0,0.0,0.0],[[[3],[[""_id"",""UInt32""]],[1],[2],[3]]]]
#|-| [obj][open] <272>(<Logs_20170315>):<51>(<table:no_key>)
#|-| [obj][open] <274>(<Logs_20170315.price>):<64>(<column:fix_size>)
#|-| [obj][close] <274>(<Logs_20170315.price>):<64>(<column:fix_size>)",Sure,True,{}
groonga/groonga,https://github.com/groonga/groonga,1333,2022-03-17T07:49:24Z,2022-03-23T08:09:50Z,2022-03-23T08:09:54Z,MERGED,True,150,0,7,https://github.com/HashidaTKS,Add necessary unref to grn_obj_get_accessor,1,[],https://github.com/groonga/groonga/pull/1333,https://github.com/kou,5,https://github.com/groonga/groonga/pull/1333#issuecomment-1070491170,"This is a patch for https://github.com/groonga/groonga/pull/1330/files#r827579558
An opened table is not closed in cases below.

using time_classify_xxx with dynamic column
using window function with dynamic column
specifying a non existent column on output_column with specifying filter

select command also has these issues so I guess this is not the matter of logical_range_filter.
The commands to reproduce these are below.
common
plugin_register functions/time
table_create Logs_20170315 TABLE_NO_KEY
column_create Logs_20170315 timestamp COLUMN_SCALAR Time
column_create Logs_20170315 price COLUMN_SCALAR UInt32
load --table Logs_20170315
[
{""timestamp"": ""2017/03/15 00:00:00"", ""price"": 1000},
{""timestamp"": ""2017/03/15 11:00:00"", ""price"":  900},
{""timestamp"": ""2017/03/15 12:00:00"", ""price"":  300},
{""timestamp"": ""2017/03/15 13:00:00"", ""price"":  200}
]
log_level --level dump

Case 1: using time_classify_xxx with dynamic column
select Logs_20170315   --columns[day].stage filtered   --columns[day].type Time   --columns[day].flags COLUMN_SCALAR   --columns[day].value 'time_classify_day(timestamp-36000000000)'   --output_columns _id
[[0,0.0,0.0],[[[4],[[""_id"",""UInt32""]],[1],[2],[3],[4]]]]
#|-| [obj][open] <272>(<Logs_20170315>):<51>(<table:no_key>)
#|-| [obj][open] <273>(<Logs_20170315.timestamp>):<64>(<column:fix_size>)
#|-| [obj][close] <273>(<Logs_20170315.timestamp>):<64>(<column:fix_size>)

Case 2: using window function with dynamic column
select Logs_20170315   --columns[price_per_day].stage filtered   --columns[price_per_day].type UInt32   --columns[price_per_day].flags COLUMN_SCALAR   --columns[price_per_day].value 'window_sum(price)'   --columns[price_per_day].window.group_keys 'timestamp'   --output_columns _id
[[0,0.0,0.0],[[[4],[[""_id"",""UInt32""]],[1],[2],[3],[4]]]]
#|-| [obj][open] <272>(<Logs_20170315>):<51>(<table:no_key>)
#|-| [obj][open] <274>(<Logs_20170315.price>):<64>(<column:fix_size>)
#|-| [obj][open] <273>(<Logs_20170315.timestamp>):<64>(<column:fix_size>)
#|-| [obj][close] <274>(<Logs_20170315.price>):<64>(<column:fix_size>)
#|-| [obj][close] <273>(<Logs_20170315.timestamp>):<64>(<column:fix_size>)

Case 3: specifying a non existent column with output_column
select Logs_20170315   --filter 'price >= 300'   --output_columns _id,non_existent
[[0,0.0,0.0],[[[3],[[""_id"",""UInt32""]],[1],[2],[3]]]]
#|-| [obj][open] <272>(<Logs_20170315>):<51>(<table:no_key>)
#|-| [obj][open] <274>(<Logs_20170315.price>):<64>(<column:fix_size>)
#|-| [obj][close] <274>(<Logs_20170315.price>):<64>(<column:fix_size>)","Are all of 3 cases caused by the same pattern? Or there are multiple causes?
If there are multiple causes, could you split this pull request?",True,{}
groonga/groonga,https://github.com/groonga/groonga,1333,2022-03-17T07:49:24Z,2022-03-23T08:09:50Z,2022-03-23T08:09:54Z,MERGED,True,150,0,7,https://github.com/HashidaTKS,Add necessary unref to grn_obj_get_accessor,1,[],https://github.com/groonga/groonga/pull/1333,https://github.com/HashidaTKS,6,https://github.com/groonga/groonga/pull/1333#issuecomment-1070504785,"This is a patch for https://github.com/groonga/groonga/pull/1330/files#r827579558
An opened table is not closed in cases below.

using time_classify_xxx with dynamic column
using window function with dynamic column
specifying a non existent column on output_column with specifying filter

select command also has these issues so I guess this is not the matter of logical_range_filter.
The commands to reproduce these are below.
common
plugin_register functions/time
table_create Logs_20170315 TABLE_NO_KEY
column_create Logs_20170315 timestamp COLUMN_SCALAR Time
column_create Logs_20170315 price COLUMN_SCALAR UInt32
load --table Logs_20170315
[
{""timestamp"": ""2017/03/15 00:00:00"", ""price"": 1000},
{""timestamp"": ""2017/03/15 11:00:00"", ""price"":  900},
{""timestamp"": ""2017/03/15 12:00:00"", ""price"":  300},
{""timestamp"": ""2017/03/15 13:00:00"", ""price"":  200}
]
log_level --level dump

Case 1: using time_classify_xxx with dynamic column
select Logs_20170315   --columns[day].stage filtered   --columns[day].type Time   --columns[day].flags COLUMN_SCALAR   --columns[day].value 'time_classify_day(timestamp-36000000000)'   --output_columns _id
[[0,0.0,0.0],[[[4],[[""_id"",""UInt32""]],[1],[2],[3],[4]]]]
#|-| [obj][open] <272>(<Logs_20170315>):<51>(<table:no_key>)
#|-| [obj][open] <273>(<Logs_20170315.timestamp>):<64>(<column:fix_size>)
#|-| [obj][close] <273>(<Logs_20170315.timestamp>):<64>(<column:fix_size>)

Case 2: using window function with dynamic column
select Logs_20170315   --columns[price_per_day].stage filtered   --columns[price_per_day].type UInt32   --columns[price_per_day].flags COLUMN_SCALAR   --columns[price_per_day].value 'window_sum(price)'   --columns[price_per_day].window.group_keys 'timestamp'   --output_columns _id
[[0,0.0,0.0],[[[4],[[""_id"",""UInt32""]],[1],[2],[3],[4]]]]
#|-| [obj][open] <272>(<Logs_20170315>):<51>(<table:no_key>)
#|-| [obj][open] <274>(<Logs_20170315.price>):<64>(<column:fix_size>)
#|-| [obj][open] <273>(<Logs_20170315.timestamp>):<64>(<column:fix_size>)
#|-| [obj][close] <274>(<Logs_20170315.price>):<64>(<column:fix_size>)
#|-| [obj][close] <273>(<Logs_20170315.timestamp>):<64>(<column:fix_size>)

Case 3: specifying a non existent column with output_column
select Logs_20170315   --filter 'price >= 300'   --output_columns _id,non_existent
[[0,0.0,0.0],[[[3],[[""_id"",""UInt32""]],[1],[2],[3]]]]
#|-| [obj][open] <272>(<Logs_20170315>):<51>(<table:no_key>)
#|-| [obj][open] <274>(<Logs_20170315.price>):<64>(<column:fix_size>)
#|-| [obj][close] <274>(<Logs_20170315.price>):<64>(<column:fix_size>)","As far as I confirmed, these 3 cases are caused by the same pattern.
However, I have noticed that a similar but not the same issue exists.
I am investigating that...",True,{}
groonga/groonga,https://github.com/groonga/groonga,1333,2022-03-17T07:49:24Z,2022-03-23T08:09:50Z,2022-03-23T08:09:54Z,MERGED,True,150,0,7,https://github.com/HashidaTKS,Add necessary unref to grn_obj_get_accessor,1,[],https://github.com/groonga/groonga/pull/1333,https://github.com/HashidaTKS,7,https://github.com/groonga/groonga/pull/1333#issuecomment-1075932524,"This is a patch for https://github.com/groonga/groonga/pull/1330/files#r827579558
An opened table is not closed in cases below.

using time_classify_xxx with dynamic column
using window function with dynamic column
specifying a non existent column on output_column with specifying filter

select command also has these issues so I guess this is not the matter of logical_range_filter.
The commands to reproduce these are below.
common
plugin_register functions/time
table_create Logs_20170315 TABLE_NO_KEY
column_create Logs_20170315 timestamp COLUMN_SCALAR Time
column_create Logs_20170315 price COLUMN_SCALAR UInt32
load --table Logs_20170315
[
{""timestamp"": ""2017/03/15 00:00:00"", ""price"": 1000},
{""timestamp"": ""2017/03/15 11:00:00"", ""price"":  900},
{""timestamp"": ""2017/03/15 12:00:00"", ""price"":  300},
{""timestamp"": ""2017/03/15 13:00:00"", ""price"":  200}
]
log_level --level dump

Case 1: using time_classify_xxx with dynamic column
select Logs_20170315   --columns[day].stage filtered   --columns[day].type Time   --columns[day].flags COLUMN_SCALAR   --columns[day].value 'time_classify_day(timestamp-36000000000)'   --output_columns _id
[[0,0.0,0.0],[[[4],[[""_id"",""UInt32""]],[1],[2],[3],[4]]]]
#|-| [obj][open] <272>(<Logs_20170315>):<51>(<table:no_key>)
#|-| [obj][open] <273>(<Logs_20170315.timestamp>):<64>(<column:fix_size>)
#|-| [obj][close] <273>(<Logs_20170315.timestamp>):<64>(<column:fix_size>)

Case 2: using window function with dynamic column
select Logs_20170315   --columns[price_per_day].stage filtered   --columns[price_per_day].type UInt32   --columns[price_per_day].flags COLUMN_SCALAR   --columns[price_per_day].value 'window_sum(price)'   --columns[price_per_day].window.group_keys 'timestamp'   --output_columns _id
[[0,0.0,0.0],[[[4],[[""_id"",""UInt32""]],[1],[2],[3],[4]]]]
#|-| [obj][open] <272>(<Logs_20170315>):<51>(<table:no_key>)
#|-| [obj][open] <274>(<Logs_20170315.price>):<64>(<column:fix_size>)
#|-| [obj][open] <273>(<Logs_20170315.timestamp>):<64>(<column:fix_size>)
#|-| [obj][close] <274>(<Logs_20170315.price>):<64>(<column:fix_size>)
#|-| [obj][close] <273>(<Logs_20170315.timestamp>):<64>(<column:fix_size>)

Case 3: specifying a non existent column with output_column
select Logs_20170315   --filter 'price >= 300'   --output_columns _id,non_existent
[[0,0.0,0.0],[[[3],[[""_id"",""UInt32""]],[1],[2],[3]]]]
#|-| [obj][open] <272>(<Logs_20170315>):<51>(<table:no_key>)
#|-| [obj][open] <274>(<Logs_20170315.price>):<64>(<column:fix_size>)
#|-| [obj][close] <274>(<Logs_20170315.price>):<64>(<column:fix_size>)","I have added tests and rebased on #1330 because some expected test results are updated by this change.
So this patch include the change of #1330.
Please review and merge this after #1330 is merged.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1333,2022-03-17T07:49:24Z,2022-03-23T08:09:50Z,2022-03-23T08:09:54Z,MERGED,True,150,0,7,https://github.com/HashidaTKS,Add necessary unref to grn_obj_get_accessor,1,[],https://github.com/groonga/groonga/pull/1333,https://github.com/kou,8,https://github.com/groonga/groonga/pull/1333#issuecomment-1075935627,"This is a patch for https://github.com/groonga/groonga/pull/1330/files#r827579558
An opened table is not closed in cases below.

using time_classify_xxx with dynamic column
using window function with dynamic column
specifying a non existent column on output_column with specifying filter

select command also has these issues so I guess this is not the matter of logical_range_filter.
The commands to reproduce these are below.
common
plugin_register functions/time
table_create Logs_20170315 TABLE_NO_KEY
column_create Logs_20170315 timestamp COLUMN_SCALAR Time
column_create Logs_20170315 price COLUMN_SCALAR UInt32
load --table Logs_20170315
[
{""timestamp"": ""2017/03/15 00:00:00"", ""price"": 1000},
{""timestamp"": ""2017/03/15 11:00:00"", ""price"":  900},
{""timestamp"": ""2017/03/15 12:00:00"", ""price"":  300},
{""timestamp"": ""2017/03/15 13:00:00"", ""price"":  200}
]
log_level --level dump

Case 1: using time_classify_xxx with dynamic column
select Logs_20170315   --columns[day].stage filtered   --columns[day].type Time   --columns[day].flags COLUMN_SCALAR   --columns[day].value 'time_classify_day(timestamp-36000000000)'   --output_columns _id
[[0,0.0,0.0],[[[4],[[""_id"",""UInt32""]],[1],[2],[3],[4]]]]
#|-| [obj][open] <272>(<Logs_20170315>):<51>(<table:no_key>)
#|-| [obj][open] <273>(<Logs_20170315.timestamp>):<64>(<column:fix_size>)
#|-| [obj][close] <273>(<Logs_20170315.timestamp>):<64>(<column:fix_size>)

Case 2: using window function with dynamic column
select Logs_20170315   --columns[price_per_day].stage filtered   --columns[price_per_day].type UInt32   --columns[price_per_day].flags COLUMN_SCALAR   --columns[price_per_day].value 'window_sum(price)'   --columns[price_per_day].window.group_keys 'timestamp'   --output_columns _id
[[0,0.0,0.0],[[[4],[[""_id"",""UInt32""]],[1],[2],[3],[4]]]]
#|-| [obj][open] <272>(<Logs_20170315>):<51>(<table:no_key>)
#|-| [obj][open] <274>(<Logs_20170315.price>):<64>(<column:fix_size>)
#|-| [obj][open] <273>(<Logs_20170315.timestamp>):<64>(<column:fix_size>)
#|-| [obj][close] <274>(<Logs_20170315.price>):<64>(<column:fix_size>)
#|-| [obj][close] <273>(<Logs_20170315.timestamp>):<64>(<column:fix_size>)

Case 3: specifying a non existent column with output_column
select Logs_20170315   --filter 'price >= 300'   --output_columns _id,non_existent
[[0,0.0,0.0],[[[3],[[""_id"",""UInt32""]],[1],[2],[3]]]]
#|-| [obj][open] <272>(<Logs_20170315>):<51>(<table:no_key>)
#|-| [obj][open] <274>(<Logs_20170315.price>):<64>(<column:fix_size>)
#|-| [obj][close] <274>(<Logs_20170315.price>):<64>(<column:fix_size>)","In the description, you said we can reproduce this problem with select not logical_range_filter.
Why do you use logical_range_filter not select for tests for this?",True,{}
groonga/groonga,https://github.com/groonga/groonga,1333,2022-03-17T07:49:24Z,2022-03-23T08:09:50Z,2022-03-23T08:09:54Z,MERGED,True,150,0,7,https://github.com/HashidaTKS,Add necessary unref to grn_obj_get_accessor,1,[],https://github.com/groonga/groonga/pull/1333,https://github.com/HashidaTKS,9,https://github.com/groonga/groonga/pull/1333#issuecomment-1075941877,"This is a patch for https://github.com/groonga/groonga/pull/1330/files#r827579558
An opened table is not closed in cases below.

using time_classify_xxx with dynamic column
using window function with dynamic column
specifying a non existent column on output_column with specifying filter

select command also has these issues so I guess this is not the matter of logical_range_filter.
The commands to reproduce these are below.
common
plugin_register functions/time
table_create Logs_20170315 TABLE_NO_KEY
column_create Logs_20170315 timestamp COLUMN_SCALAR Time
column_create Logs_20170315 price COLUMN_SCALAR UInt32
load --table Logs_20170315
[
{""timestamp"": ""2017/03/15 00:00:00"", ""price"": 1000},
{""timestamp"": ""2017/03/15 11:00:00"", ""price"":  900},
{""timestamp"": ""2017/03/15 12:00:00"", ""price"":  300},
{""timestamp"": ""2017/03/15 13:00:00"", ""price"":  200}
]
log_level --level dump

Case 1: using time_classify_xxx with dynamic column
select Logs_20170315   --columns[day].stage filtered   --columns[day].type Time   --columns[day].flags COLUMN_SCALAR   --columns[day].value 'time_classify_day(timestamp-36000000000)'   --output_columns _id
[[0,0.0,0.0],[[[4],[[""_id"",""UInt32""]],[1],[2],[3],[4]]]]
#|-| [obj][open] <272>(<Logs_20170315>):<51>(<table:no_key>)
#|-| [obj][open] <273>(<Logs_20170315.timestamp>):<64>(<column:fix_size>)
#|-| [obj][close] <273>(<Logs_20170315.timestamp>):<64>(<column:fix_size>)

Case 2: using window function with dynamic column
select Logs_20170315   --columns[price_per_day].stage filtered   --columns[price_per_day].type UInt32   --columns[price_per_day].flags COLUMN_SCALAR   --columns[price_per_day].value 'window_sum(price)'   --columns[price_per_day].window.group_keys 'timestamp'   --output_columns _id
[[0,0.0,0.0],[[[4],[[""_id"",""UInt32""]],[1],[2],[3],[4]]]]
#|-| [obj][open] <272>(<Logs_20170315>):<51>(<table:no_key>)
#|-| [obj][open] <274>(<Logs_20170315.price>):<64>(<column:fix_size>)
#|-| [obj][open] <273>(<Logs_20170315.timestamp>):<64>(<column:fix_size>)
#|-| [obj][close] <274>(<Logs_20170315.price>):<64>(<column:fix_size>)
#|-| [obj][close] <273>(<Logs_20170315.timestamp>):<64>(<column:fix_size>)

Case 3: specifying a non existent column with output_column
select Logs_20170315   --filter 'price >= 300'   --output_columns _id,non_existent
[[0,0.0,0.0],[[[3],[[""_id"",""UInt32""]],[1],[2],[3]]]]
#|-| [obj][open] <272>(<Logs_20170315>):<51>(<table:no_key>)
#|-| [obj][open] <274>(<Logs_20170315.price>):<64>(<column:fix_size>)
#|-| [obj][close] <274>(<Logs_20170315.price>):<64>(<column:fix_size>)","The tests for this added the commit below and they use select.
984c3c1
Some tests using logical_range_filter did not closed shards by the same reason, so the tests are also updated by this change.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1333,2022-03-17T07:49:24Z,2022-03-23T08:09:50Z,2022-03-23T08:09:54Z,MERGED,True,150,0,7,https://github.com/HashidaTKS,Add necessary unref to grn_obj_get_accessor,1,[],https://github.com/groonga/groonga/pull/1333,https://github.com/kou,10,https://github.com/groonga/groonga/pull/1333#issuecomment-1075943012,"This is a patch for https://github.com/groonga/groonga/pull/1330/files#r827579558
An opened table is not closed in cases below.

using time_classify_xxx with dynamic column
using window function with dynamic column
specifying a non existent column on output_column with specifying filter

select command also has these issues so I guess this is not the matter of logical_range_filter.
The commands to reproduce these are below.
common
plugin_register functions/time
table_create Logs_20170315 TABLE_NO_KEY
column_create Logs_20170315 timestamp COLUMN_SCALAR Time
column_create Logs_20170315 price COLUMN_SCALAR UInt32
load --table Logs_20170315
[
{""timestamp"": ""2017/03/15 00:00:00"", ""price"": 1000},
{""timestamp"": ""2017/03/15 11:00:00"", ""price"":  900},
{""timestamp"": ""2017/03/15 12:00:00"", ""price"":  300},
{""timestamp"": ""2017/03/15 13:00:00"", ""price"":  200}
]
log_level --level dump

Case 1: using time_classify_xxx with dynamic column
select Logs_20170315   --columns[day].stage filtered   --columns[day].type Time   --columns[day].flags COLUMN_SCALAR   --columns[day].value 'time_classify_day(timestamp-36000000000)'   --output_columns _id
[[0,0.0,0.0],[[[4],[[""_id"",""UInt32""]],[1],[2],[3],[4]]]]
#|-| [obj][open] <272>(<Logs_20170315>):<51>(<table:no_key>)
#|-| [obj][open] <273>(<Logs_20170315.timestamp>):<64>(<column:fix_size>)
#|-| [obj][close] <273>(<Logs_20170315.timestamp>):<64>(<column:fix_size>)

Case 2: using window function with dynamic column
select Logs_20170315   --columns[price_per_day].stage filtered   --columns[price_per_day].type UInt32   --columns[price_per_day].flags COLUMN_SCALAR   --columns[price_per_day].value 'window_sum(price)'   --columns[price_per_day].window.group_keys 'timestamp'   --output_columns _id
[[0,0.0,0.0],[[[4],[[""_id"",""UInt32""]],[1],[2],[3],[4]]]]
#|-| [obj][open] <272>(<Logs_20170315>):<51>(<table:no_key>)
#|-| [obj][open] <274>(<Logs_20170315.price>):<64>(<column:fix_size>)
#|-| [obj][open] <273>(<Logs_20170315.timestamp>):<64>(<column:fix_size>)
#|-| [obj][close] <274>(<Logs_20170315.price>):<64>(<column:fix_size>)
#|-| [obj][close] <273>(<Logs_20170315.timestamp>):<64>(<column:fix_size>)

Case 3: specifying a non existent column with output_column
select Logs_20170315   --filter 'price >= 300'   --output_columns _id,non_existent
[[0,0.0,0.0],[[[3],[[""_id"",""UInt32""]],[1],[2],[3]]]]
#|-| [obj][open] <272>(<Logs_20170315>):<51>(<table:no_key>)
#|-| [obj][open] <274>(<Logs_20170315.price>):<64>(<column:fix_size>)
#|-| [obj][close] <274>(<Logs_20170315.price>):<64>(<column:fix_size>)","OK. We don't need #1330 to test this problem, right?
If it's true, could you rebase on master not #1330 for easy to review?",True,{}
groonga/groonga,https://github.com/groonga/groonga,1333,2022-03-17T07:49:24Z,2022-03-23T08:09:50Z,2022-03-23T08:09:54Z,MERGED,True,150,0,7,https://github.com/HashidaTKS,Add necessary unref to grn_obj_get_accessor,1,[],https://github.com/groonga/groonga/pull/1333,https://github.com/HashidaTKS,11,https://github.com/groonga/groonga/pull/1333#issuecomment-1075961192,"This is a patch for https://github.com/groonga/groonga/pull/1330/files#r827579558
An opened table is not closed in cases below.

using time_classify_xxx with dynamic column
using window function with dynamic column
specifying a non existent column on output_column with specifying filter

select command also has these issues so I guess this is not the matter of logical_range_filter.
The commands to reproduce these are below.
common
plugin_register functions/time
table_create Logs_20170315 TABLE_NO_KEY
column_create Logs_20170315 timestamp COLUMN_SCALAR Time
column_create Logs_20170315 price COLUMN_SCALAR UInt32
load --table Logs_20170315
[
{""timestamp"": ""2017/03/15 00:00:00"", ""price"": 1000},
{""timestamp"": ""2017/03/15 11:00:00"", ""price"":  900},
{""timestamp"": ""2017/03/15 12:00:00"", ""price"":  300},
{""timestamp"": ""2017/03/15 13:00:00"", ""price"":  200}
]
log_level --level dump

Case 1: using time_classify_xxx with dynamic column
select Logs_20170315   --columns[day].stage filtered   --columns[day].type Time   --columns[day].flags COLUMN_SCALAR   --columns[day].value 'time_classify_day(timestamp-36000000000)'   --output_columns _id
[[0,0.0,0.0],[[[4],[[""_id"",""UInt32""]],[1],[2],[3],[4]]]]
#|-| [obj][open] <272>(<Logs_20170315>):<51>(<table:no_key>)
#|-| [obj][open] <273>(<Logs_20170315.timestamp>):<64>(<column:fix_size>)
#|-| [obj][close] <273>(<Logs_20170315.timestamp>):<64>(<column:fix_size>)

Case 2: using window function with dynamic column
select Logs_20170315   --columns[price_per_day].stage filtered   --columns[price_per_day].type UInt32   --columns[price_per_day].flags COLUMN_SCALAR   --columns[price_per_day].value 'window_sum(price)'   --columns[price_per_day].window.group_keys 'timestamp'   --output_columns _id
[[0,0.0,0.0],[[[4],[[""_id"",""UInt32""]],[1],[2],[3],[4]]]]
#|-| [obj][open] <272>(<Logs_20170315>):<51>(<table:no_key>)
#|-| [obj][open] <274>(<Logs_20170315.price>):<64>(<column:fix_size>)
#|-| [obj][open] <273>(<Logs_20170315.timestamp>):<64>(<column:fix_size>)
#|-| [obj][close] <274>(<Logs_20170315.price>):<64>(<column:fix_size>)
#|-| [obj][close] <273>(<Logs_20170315.timestamp>):<64>(<column:fix_size>)

Case 3: specifying a non existent column with output_column
select Logs_20170315   --filter 'price >= 300'   --output_columns _id,non_existent
[[0,0.0,0.0],[[[3],[[""_id"",""UInt32""]],[1],[2],[3]]]]
#|-| [obj][open] <272>(<Logs_20170315>):<51>(<table:no_key>)
#|-| [obj][open] <274>(<Logs_20170315.price>):<64>(<column:fix_size>)
#|-| [obj][close] <274>(<Logs_20170315.price>):<64>(<column:fix_size>)","OK, I have rebased this on master.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1333,2022-03-17T07:49:24Z,2022-03-23T08:09:50Z,2022-03-23T08:09:54Z,MERGED,True,150,0,7,https://github.com/HashidaTKS,Add necessary unref to grn_obj_get_accessor,1,[],https://github.com/groonga/groonga/pull/1333,https://github.com/kou,12,https://github.com/groonga/groonga/pull/1333#issuecomment-1076060255,"This is a patch for https://github.com/groonga/groonga/pull/1330/files#r827579558
An opened table is not closed in cases below.

using time_classify_xxx with dynamic column
using window function with dynamic column
specifying a non existent column on output_column with specifying filter

select command also has these issues so I guess this is not the matter of logical_range_filter.
The commands to reproduce these are below.
common
plugin_register functions/time
table_create Logs_20170315 TABLE_NO_KEY
column_create Logs_20170315 timestamp COLUMN_SCALAR Time
column_create Logs_20170315 price COLUMN_SCALAR UInt32
load --table Logs_20170315
[
{""timestamp"": ""2017/03/15 00:00:00"", ""price"": 1000},
{""timestamp"": ""2017/03/15 11:00:00"", ""price"":  900},
{""timestamp"": ""2017/03/15 12:00:00"", ""price"":  300},
{""timestamp"": ""2017/03/15 13:00:00"", ""price"":  200}
]
log_level --level dump

Case 1: using time_classify_xxx with dynamic column
select Logs_20170315   --columns[day].stage filtered   --columns[day].type Time   --columns[day].flags COLUMN_SCALAR   --columns[day].value 'time_classify_day(timestamp-36000000000)'   --output_columns _id
[[0,0.0,0.0],[[[4],[[""_id"",""UInt32""]],[1],[2],[3],[4]]]]
#|-| [obj][open] <272>(<Logs_20170315>):<51>(<table:no_key>)
#|-| [obj][open] <273>(<Logs_20170315.timestamp>):<64>(<column:fix_size>)
#|-| [obj][close] <273>(<Logs_20170315.timestamp>):<64>(<column:fix_size>)

Case 2: using window function with dynamic column
select Logs_20170315   --columns[price_per_day].stage filtered   --columns[price_per_day].type UInt32   --columns[price_per_day].flags COLUMN_SCALAR   --columns[price_per_day].value 'window_sum(price)'   --columns[price_per_day].window.group_keys 'timestamp'   --output_columns _id
[[0,0.0,0.0],[[[4],[[""_id"",""UInt32""]],[1],[2],[3],[4]]]]
#|-| [obj][open] <272>(<Logs_20170315>):<51>(<table:no_key>)
#|-| [obj][open] <274>(<Logs_20170315.price>):<64>(<column:fix_size>)
#|-| [obj][open] <273>(<Logs_20170315.timestamp>):<64>(<column:fix_size>)
#|-| [obj][close] <274>(<Logs_20170315.price>):<64>(<column:fix_size>)
#|-| [obj][close] <273>(<Logs_20170315.timestamp>):<64>(<column:fix_size>)

Case 3: specifying a non existent column with output_column
select Logs_20170315   --filter 'price >= 300'   --output_columns _id,non_existent
[[0,0.0,0.0],[[[3],[[""_id"",""UInt32""]],[1],[2],[3]]]]
#|-| [obj][open] <272>(<Logs_20170315>):<51>(<table:no_key>)
#|-| [obj][open] <274>(<Logs_20170315.price>):<64>(<column:fix_size>)
#|-| [obj][close] <274>(<Logs_20170315.price>):<64>(<column:fix_size>)",Thanks.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1334,2022-03-17T10:19:00Z,2022-03-24T01:52:35Z,2022-03-24T01:52:47Z,MERGED,True,138,1,4,https://github.com/HashidaTKS,Add necessary unref to accessor.c and report.c,4,[],https://github.com/groonga/groonga/pull/1334,https://github.com/HashidaTKS,1,https://github.com/groonga/groonga/pull/1334,"Related: #1333,  #1330
When executing grn_accessor_execute or grn_report_table, a referred object is not un-referred  in some cases.
I have added necessary unrefs for those.
Please see the added reference_count.test for reproducing the issue.
This affect to #1330.","Related: #1333,  #1330
When executing grn_accessor_execute or grn_report_table, a referred object is not un-referred  in some cases.
I have added necessary unrefs for those.
Please see the added reference_count.test for reproducing the issue.
This affect to #1330.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1334,2022-03-17T10:19:00Z,2022-03-24T01:52:35Z,2022-03-24T01:52:47Z,MERGED,True,138,1,4,https://github.com/HashidaTKS,Add necessary unref to accessor.c and report.c,4,[],https://github.com/groonga/groonga/pull/1334,https://github.com/HashidaTKS,2,https://github.com/groonga/groonga/pull/1334#issuecomment-1076987750,"Related: #1333,  #1330
When executing grn_accessor_execute or grn_report_table, a referred object is not un-referred  in some cases.
I have added necessary unrefs for those.
Please see the added reference_count.test for reproducing the issue.
This affect to #1330.","I have noticed that grn_report_column and grn_report_accessor seem to have the same issue.
I will fix them another PR.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1334,2022-03-17T10:19:00Z,2022-03-24T01:52:35Z,2022-03-24T01:52:47Z,MERGED,True,138,1,4,https://github.com/HashidaTKS,Add necessary unref to accessor.c and report.c,4,[],https://github.com/groonga/groonga/pull/1334,https://github.com/kou,3,https://github.com/groonga/groonga/pull/1334#issuecomment-1076987894,"Related: #1333,  #1330
When executing grn_accessor_execute or grn_report_table, a referred object is not un-referred  in some cases.
I have added necessary unrefs for those.
Please see the added reference_count.test for reproducing the issue.
This affect to #1330.",It makes sense.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1335,2022-03-23T07:58:40Z,2022-04-06T11:01:34Z,2022-04-06T11:01:35Z,CLOSED,False,4,9,1,https://github.com/HashidaTKS,Add necessary unref,1,[],https://github.com/groonga/groonga/pull/1335,https://github.com/HashidaTKS,1,https://github.com/groonga/groonga/pull/1335,Add necessary unref,Add necessary unref,True,{}
groonga/groonga,https://github.com/groonga/groonga,1335,2022-03-23T07:58:40Z,2022-04-06T11:01:34Z,2022-04-06T11:01:35Z,CLOSED,False,4,9,1,https://github.com/HashidaTKS,Add necessary unref,1,[],https://github.com/groonga/groonga/pull/1335,https://github.com/HashidaTKS,2,https://github.com/groonga/groonga/pull/1335#issuecomment-1076043870,Add necessary unref,Todo: Add tests,True,{}
groonga/groonga,https://github.com/groonga/groonga,1335,2022-03-23T07:58:40Z,2022-04-06T11:01:34Z,2022-04-06T11:01:35Z,CLOSED,False,4,9,1,https://github.com/HashidaTKS,Add necessary unref,1,[],https://github.com/groonga/groonga/pull/1335,https://github.com/HashidaTKS,3,https://github.com/groonga/groonga/pull/1335#issuecomment-1090137905,Add necessary unref,"Close this because this is separated into #1350, #1351, #1352, #1353.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1337,2022-03-24T05:56:21Z,2022-03-24T07:14:21Z,2022-03-24T07:14:36Z,MERGED,True,93,9,5,https://github.com/HashidaTKS,Add necessary unref to report.c,3,[],https://github.com/groonga/groonga/pull/1337,https://github.com/HashidaTKS,1,https://github.com/groonga/groonga/pull/1337,"Add necessary unref to report.c.
This patch fixes two cases.
Case 1: missing unref in grn_report_column
The test for checking the diff is below.
7d92e7e#diff-34e78064b3ddc8e91e84bb7301d928e19b908e8758e48b75eb0d8ce7257d5e2d
Case 2: missing unref in grn_report_accessor
The test for checking the diff is below.
7d92e7e#diff-6846c9fab6e8b8b2d9bb531e83a14cc1e834edc9551d1f87e003163ceb1e2e9b","Add necessary unref to report.c.
This patch fixes two cases.
Case 1: missing unref in grn_report_column
The test for checking the diff is below.
7d92e7e#diff-34e78064b3ddc8e91e84bb7301d928e19b908e8758e48b75eb0d8ce7257d5e2d
Case 2: missing unref in grn_report_accessor
The test for checking the diff is below.
7d92e7e#diff-6846c9fab6e8b8b2d9bb531e83a14cc1e834edc9551d1f87e003163ceb1e2e9b",True,{}
groonga/groonga,https://github.com/groonga/groonga,1337,2022-03-24T05:56:21Z,2022-03-24T07:14:21Z,2022-03-24T07:14:36Z,MERGED,True,93,9,5,https://github.com/HashidaTKS,Add necessary unref to report.c,3,[],https://github.com/groonga/groonga/pull/1337,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1337#issuecomment-1077308448,"Add necessary unref to report.c.
This patch fixes two cases.
Case 1: missing unref in grn_report_column
The test for checking the diff is below.
7d92e7e#diff-34e78064b3ddc8e91e84bb7301d928e19b908e8758e48b75eb0d8ce7257d5e2d
Case 2: missing unref in grn_report_accessor
The test for checking the diff is below.
7d92e7e#diff-6846c9fab6e8b8b2d9bb531e83a14cc1e834edc9551d1f87e003163ceb1e2e9b",I hope that you don't mix multiple cases to one pull request next time...,True,{}
groonga/groonga,https://github.com/groonga/groonga,1338,2022-03-24T08:26:43Z,2022-03-25T01:23:04Z,2022-03-25T01:23:08Z,MERGED,True,241,238,4,https://github.com/HashidaTKS,logical_range_filter: separate window from logical_range_filter into an independent file,2,[],https://github.com/groonga/groonga/pull/1338,https://github.com/HashidaTKS,1,https://github.com/groonga/groonga/pull/1338,"Separate window from logical_range_filter into an independent file.
This is a preparation for modification of logical_count to un-refer shards immediately like logical_range_filter.","Separate window from logical_range_filter into an independent file.
This is a preparation for modification of logical_count to un-refer shards immediately like logical_range_filter.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1338,2022-03-24T08:26:43Z,2022-03-25T01:23:04Z,2022-03-25T01:23:08Z,MERGED,True,241,238,4,https://github.com/HashidaTKS,logical_range_filter: separate window from logical_range_filter into an independent file,2,[],https://github.com/groonga/groonga/pull/1338,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1338#issuecomment-1078520635,"Separate window from logical_range_filter into an independent file.
This is a preparation for modification of logical_count to un-refer shards immediately like logical_range_filter.",Could you also update plugins/sharding/sources.am?,True,{}
groonga/groonga,https://github.com/groonga/groonga,1338,2022-03-24T08:26:43Z,2022-03-25T01:23:04Z,2022-03-25T01:23:08Z,MERGED,True,241,238,4,https://github.com/HashidaTKS,logical_range_filter: separate window from logical_range_filter into an independent file,2,[],https://github.com/groonga/groonga/pull/1338,https://github.com/HashidaTKS,3,https://github.com/groonga/groonga/pull/1338#issuecomment-1078561792,"Separate window from logical_range_filter into an independent file.
This is a preparation for modification of logical_count to un-refer shards immediately like logical_range_filter.","@kou
Thank you for the review.

Could you also update plugins/sharding/sources.am?

I have added window.rb into plugins/sharding/sources.am.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1338,2022-03-24T08:26:43Z,2022-03-25T01:23:04Z,2022-03-25T01:23:08Z,MERGED,True,241,238,4,https://github.com/HashidaTKS,logical_range_filter: separate window from logical_range_filter into an independent file,2,[],https://github.com/groonga/groonga/pull/1338,https://github.com/kou,4,https://github.com/groonga/groonga/pull/1338#issuecomment-1078563067,"Separate window from logical_range_filter into an independent file.
This is a preparation for modification of logical_count to un-refer shards immediately like logical_range_filter.",Thanks.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1339,2022-03-25T03:42:35Z,2022-03-25T06:02:25Z,2022-03-25T06:02:26Z,MERGED,True,183,0,4,https://github.com/komainu8,doc install: add a installation procedure for AmazonLinux 2,9,[],https://github.com/groonga/groonga/pull/1339,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1339,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1341,2022-03-29T06:02:40Z,2022-04-05T06:05:06Z,2022-04-05T06:05:06Z,MERGED,True,279,174,19,https://github.com/HashidaTKS,logical_count: improve memory usage,12,[],https://github.com/groonga/groonga/pull/1341,https://github.com/HashidaTKS,1,https://github.com/groonga/groonga/pull/1341,"Overall, I have changed logical_count to immediately unref shards or close temporary objects that are no longer referred like logical_range_filter.
TODO:

 Refactor

Reconsider name of method, class and so on
Separate common method with logical_range_filter into a common class

e.g. detect_time_classify_types
If they have not match in common, I will skip this.




 More test

Especially performance test","Overall, I have changed logical_count to immediately unref shards or close temporary objects that are no longer referred like logical_range_filter.
TODO:

 Refactor

Reconsider name of method, class and so on
Separate common method with logical_range_filter into a common class

e.g. detect_time_classify_types
If they have not match in common, I will skip this.




 More test

Especially performance test",True,{}
groonga/groonga,https://github.com/groonga/groonga,1341,2022-03-29T06:02:40Z,2022-04-05T06:05:06Z,2022-04-05T06:05:06Z,MERGED,True,279,174,19,https://github.com/HashidaTKS,logical_count: improve memory usage,12,[],https://github.com/groonga/groonga/pull/1341,https://github.com/HashidaTKS,2,https://github.com/groonga/groonga/pull/1341#issuecomment-1084021424,"Overall, I have changed logical_count to immediately unref shards or close temporary objects that are no longer referred like logical_range_filter.
TODO:

 Refactor

Reconsider name of method, class and so on
Separate common method with logical_range_filter into a common class

e.g. detect_time_classify_types
If they have not match in common, I will skip this.




 More test

Especially performance test","I am testing performance but ready for review of implementation.
I will write test results to this PR.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1341,2022-03-29T06:02:40Z,2022-04-05T06:05:06Z,2022-04-05T06:05:06Z,MERGED,True,279,174,19,https://github.com/HashidaTKS,logical_count: improve memory usage,12,[],https://github.com/groonga/groonga/pull/1341,https://github.com/HashidaTKS,3,https://github.com/groonga/groonga/pull/1341#issuecomment-1084215877,"Overall, I have changed logical_count to immediately unref shards or close temporary objects that are no longer referred like logical_range_filter.
TODO:

 Refactor

Reconsider name of method, class and so on
Separate common method with logical_range_filter into a common class

e.g. detect_time_classify_types
If they have not match in common, I will skip this.




 More test

Especially performance test","Performance test results.
Condition:

10M record per shard.
Search 30 shards.
Filter with indexed columns

Sorry for my lack of details but I cannot write detailed logs or a schema and so on because it is containing private information...
case: GRN_ENABLE_REFERENCE_COUNT=yes
Execution time



Condition
Execution time




After changed
47 sec


Before changed
54 sec



Memory usage

case: GRN_ENABLE_REFERENCE_COUNT=no
Execution time



Condition
Execution time




After changed
42 sec


Before changed
42 sec



Memory usage",True,{}
groonga/groonga,https://github.com/groonga/groonga,1342,2022-03-29T09:42:06Z,2022-03-30T05:24:15Z,2022-03-30T05:24:16Z,MERGED,True,93,80,4,https://github.com/HashidaTKS,logical_range_filter: Separate a base of ExecuteContext into another class,5,[],https://github.com/groonga/groonga/pull/1342,https://github.com/HashidaTKS,1,https://github.com/groonga/groonga/pull/1342,"Separate a base of ExecuteContext into another class ExecuteContextBase.
Change ExecuteContext to inherite ExecuteContextBase.

This is a preparation for  #1341.","Separate a base of ExecuteContext into another class ExecuteContextBase.
Change ExecuteContext to inherite ExecuteContextBase.

This is a preparation for  #1341.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1343,2022-03-29T11:03:32Z,2022-03-31T01:01:54Z,2022-03-31T01:01:59Z,MERGED,True,234,220,4,https://github.com/HashidaTKS,logical_range_filter: Separate a base of ShardExecutor into another class,6,[],https://github.com/groonga/groonga/pull/1343,https://github.com/HashidaTKS,1,https://github.com/groonga/groonga/pull/1343,"Separate a base of ShardExecutor into another class ShardExecutorBase.
Change ShardExecutor to inherite ShardExecutorBase.

This is a preparation for  #1341.
ShardExecutorBase requires children to implement execute_filter and use_range_index?.
Next step, implementing execute_filter and use_range_index? into a class that inherits ShardExecutorBase in logical_count.
Concern:

ShardExecutorBase requires children to implement execute_filter and use_range_index?.

Unless already knowing it, a reader of ShardExecutorBase has to read the code deeply or actually execute the code to know it.
Is there any good way to resolve it in Ruby?
(I also feel that the structure of ShardExecutorBase is not so good...)","Separate a base of ShardExecutor into another class ShardExecutorBase.
Change ShardExecutor to inherite ShardExecutorBase.

This is a preparation for  #1341.
ShardExecutorBase requires children to implement execute_filter and use_range_index?.
Next step, implementing execute_filter and use_range_index? into a class that inherits ShardExecutorBase in logical_count.
Concern:

ShardExecutorBase requires children to implement execute_filter and use_range_index?.

Unless already knowing it, a reader of ShardExecutorBase has to read the code deeply or actually execute the code to know it.
Is there any good way to resolve it in Ruby?
(I also feel that the structure of ShardExecutorBase is not so good...)",True,{}
groonga/groonga,https://github.com/groonga/groonga,1343,2022-03-29T11:03:32Z,2022-03-31T01:01:54Z,2022-03-31T01:01:59Z,MERGED,True,234,220,4,https://github.com/HashidaTKS,logical_range_filter: Separate a base of ShardExecutor into another class,6,[],https://github.com/groonga/groonga/pull/1343,https://github.com/HashidaTKS,2,https://github.com/groonga/groonga/pull/1343#issuecomment-1082647997,"Separate a base of ShardExecutor into another class ShardExecutorBase.
Change ShardExecutor to inherite ShardExecutorBase.

This is a preparation for  #1341.
ShardExecutorBase requires children to implement execute_filter and use_range_index?.
Next step, implementing execute_filter and use_range_index? into a class that inherits ShardExecutorBase in logical_count.
Concern:

ShardExecutorBase requires children to implement execute_filter and use_range_index?.

Unless already knowing it, a reader of ShardExecutorBase has to read the code deeply or actually execute the code to know it.
Is there any good way to resolve it in Ruby?
(I also feel that the structure of ShardExecutorBase is not so good...)",I have rebased this branch onto the latest master branch.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1343,2022-03-29T11:03:32Z,2022-03-31T01:01:54Z,2022-03-31T01:01:59Z,MERGED,True,234,220,4,https://github.com/HashidaTKS,logical_range_filter: Separate a base of ShardExecutor into another class,6,[],https://github.com/groonga/groonga/pull/1343,https://github.com/kou,3,https://github.com/groonga/groonga/pull/1343#issuecomment-1082688098,"Separate a base of ShardExecutor into another class ShardExecutorBase.
Change ShardExecutor to inherite ShardExecutorBase.

This is a preparation for  #1341.
ShardExecutorBase requires children to implement execute_filter and use_range_index?.
Next step, implementing execute_filter and use_range_index? into a class that inherits ShardExecutorBase in logical_count.
Concern:

ShardExecutorBase requires children to implement execute_filter and use_range_index?.

Unless already knowing it, a reader of ShardExecutorBase has to read the code deeply or actually execute the code to know it.
Is there any good way to resolve it in Ruby?
(I also feel that the structure of ShardExecutorBase is not so good...)",We can merge this once CI isn't failed.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1343,2022-03-29T11:03:32Z,2022-03-31T01:01:54Z,2022-03-31T01:01:59Z,MERGED,True,234,220,4,https://github.com/HashidaTKS,logical_range_filter: Separate a base of ShardExecutor into another class,6,[],https://github.com/groonga/groonga/pull/1343,https://github.com/HashidaTKS,4,https://github.com/groonga/groonga/pull/1343#issuecomment-1083894645,"Separate a base of ShardExecutor into another class ShardExecutorBase.
Change ShardExecutor to inherite ShardExecutorBase.

This is a preparation for  #1341.
ShardExecutorBase requires children to implement execute_filter and use_range_index?.
Next step, implementing execute_filter and use_range_index? into a class that inherits ShardExecutorBase in logical_count.
Concern:

ShardExecutorBase requires children to implement execute_filter and use_range_index?.

Unless already knowing it, a reader of ShardExecutorBase has to read the code deeply or actually execute the code to know it.
Is there any good way to resolve it in Ruby?
(I also feel that the structure of ShardExecutorBase is not so good...)",Would you mind if I merge this?,True,{}
groonga/groonga,https://github.com/groonga/groonga,1343,2022-03-29T11:03:32Z,2022-03-31T01:01:54Z,2022-03-31T01:01:59Z,MERGED,True,234,220,4,https://github.com/HashidaTKS,logical_range_filter: Separate a base of ShardExecutor into another class,6,[],https://github.com/groonga/groonga/pull/1343,https://github.com/kou,5,https://github.com/groonga/groonga/pull/1343#issuecomment-1083900733,"Separate a base of ShardExecutor into another class ShardExecutorBase.
Change ShardExecutor to inherite ShardExecutorBase.

This is a preparation for  #1341.
ShardExecutorBase requires children to implement execute_filter and use_range_index?.
Next step, implementing execute_filter and use_range_index? into a class that inherits ShardExecutorBase in logical_count.
Concern:

ShardExecutorBase requires children to implement execute_filter and use_range_index?.

Unless already knowing it, a reader of ShardExecutorBase has to read the code deeply or actually execute the code to know it.
Is there any good way to resolve it in Ruby?
(I also feel that the structure of ShardExecutorBase is not so good...)",Merged.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1345,2022-03-31T01:18:27Z,2022-03-31T01:21:15Z,2022-03-31T01:21:15Z,MERGED,True,50,38,4,https://github.com/HashidaTKS,Separate Executor to an independent class,1,[],https://github.com/groonga/groonga/pull/1345,https://github.com/HashidaTKS,1,https://github.com/groonga/groonga/pull/1345,"This is a preparation for #1341.
A purpose is make each_shard_executor sharable with logical_range_filter and logical_count.","This is a preparation for #1341.
A purpose is make each_shard_executor sharable with logical_range_filter and logical_count.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1346,2022-03-31T05:28:14Z,2022-03-31T05:48:05Z,2022-03-31T05:48:05Z,MERGED,True,23,17,2,https://github.com/HashidaTKS,logical_range_filter: Make result_sets enumeration sharable,4,[],https://github.com/groonga/groonga/pull/1346,https://github.com/HashidaTKS,1,https://github.com/groonga/groonga/pull/1346,logical_range_filter: Make result_sets enumeration sharable on StreamShardExecutor,logical_range_filter: Make result_sets enumeration sharable on StreamShardExecutor,True,{}
groonga/groonga,https://github.com/groonga/groonga,1347,2022-03-31T06:34:56Z,2022-04-01T01:59:42Z,2022-04-01T01:59:42Z,MERGED,True,20,19,2,https://github.com/HashidaTKS,logical_range_filter: Move order to StreamExcuteContext,2,[],https://github.com/groonga/groonga/pull/1347,https://github.com/HashidaTKS,1,https://github.com/groonga/groonga/pull/1347,Move the order attribute to StreamExcuteContext from ExecuteContext,Move the order attribute to StreamExcuteContext from ExecuteContext,True,{}
groonga/groonga,https://github.com/groonga/groonga,1348,2022-03-31T09:07:36Z,2022-04-01T01:25:43Z,2022-04-01T08:51:27Z,MERGED,True,8,5,2,https://github.com/HashidaTKS,logical_range_filter: Move apply_post_filter to StreamShardExecutor from ShardExecutor,1,[],https://github.com/groonga/groonga/pull/1348,https://github.com/HashidaTKS,1,https://github.com/groonga/groonga/pull/1348,"Move apply_post_filter to StreamShardExecutor from ShardExecutor.
Related: #1341 (comment)","Move apply_post_filter to StreamShardExecutor from ShardExecutor.
Related: #1341 (comment)",True,{}
groonga/groonga,https://github.com/groonga/groonga,1348,2022-03-31T09:07:36Z,2022-04-01T01:25:43Z,2022-04-01T08:51:27Z,MERGED,True,8,5,2,https://github.com/HashidaTKS,logical_range_filter: Move apply_post_filter to StreamShardExecutor from ShardExecutor,1,[],https://github.com/groonga/groonga/pull/1348,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1348#issuecomment-1085297132,"Move apply_post_filter to StreamShardExecutor from ShardExecutor.
Related: #1341 (comment)","This failure isn't related to this change but could you take a look at this?
https://github.com/groonga/groonga/runs/5768246511?check_suite_focus=true
--- (expected)
+++ (actual)
@@ -88,7 +88,7 @@
   ]
 ]
 #|d| [logical_range_filter][select] <Logs_20170315>: dynamic columns are used
-#|d| [logical_range_filter][window] <Logs_20170315>: [2017/03/15 07:01:00.001000,2017/03/15 08:00:00)
+#|d| [window] <Logs_20170315>: [2017/03/15 07:01:00.001000,2017/03/15 08:00:00)
 #|d| [logical_range_filter][select] <Logs_20170316>: dynamic columns are used
 #|d| [logical_range_filter][window] <Logs_20170316>: [2017/03/16 08:00:00,2017/03/16 08:22:00.002000]
 #>logical_range_filter --columns[five_minute].flags ""COLUMN_SCALAR"" --columns[five_minute].stage ""filtered"" --columns[five_minute].type ""Time"" --columns[five_minute].value ""time_classify_minute(timestamp, 5)"" --columns[n_records_per_five_minute].flags ""COLUMN_SCALAR"" --columns[n_records_per_five_minute].stage ""filtered"" --columns[n_records_per_five_minute].type ""UInt32"" --columns[n_records_per_five_minute].value ""window_count()"" --columns[n_records_per_five_minute].window.group_keys ""five_minute"" --filter ""price >= 300"" --limit ""4"" --logical_table ""Logs"" --max ""2017/03/16 08:22:00.002"" --max_border ""include"" --min ""2017/03/15 07:01:00.001"" --min_border ""include"" --offset ""3"" --output_columns ""_id,n_records_per_five_minute,price"" --post_filter ""n_records_per_five_minute >= 3"" --shard_key ""timestamp""

===============================================================================
[1] sharding/logical_range_filter/columns/stage/filtered/window_function/day
  min_max_msec                                                 1.0682s [failed]
===============================================================================",True,{}
groonga/groonga,https://github.com/groonga/groonga,1348,2022-03-31T09:07:36Z,2022-04-01T01:25:43Z,2022-04-01T08:51:27Z,MERGED,True,8,5,2,https://github.com/HashidaTKS,logical_range_filter: Move apply_post_filter to StreamShardExecutor from ShardExecutor,1,[],https://github.com/groonga/groonga/pull/1348,https://github.com/HashidaTKS,3,https://github.com/groonga/groonga/pull/1348#issuecomment-1085299439,"Move apply_post_filter to StreamShardExecutor from ShardExecutor.
Related: #1341 (comment)","This failure isn't related to this change but could you take a look at this?

Sure.
But please wait 1-2 days because I have other tasks.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1348,2022-03-31T09:07:36Z,2022-04-01T01:25:43Z,2022-04-01T08:51:27Z,MERGED,True,8,5,2,https://github.com/HashidaTKS,logical_range_filter: Move apply_post_filter to StreamShardExecutor from ShardExecutor,1,[],https://github.com/groonga/groonga/pull/1348,https://github.com/kou,4,https://github.com/groonga/groonga/pull/1348#issuecomment-1085627673,"Move apply_post_filter to StreamShardExecutor from ShardExecutor.
Related: #1341 (comment)","It seems that this failure is caused since 084389f but it looks like that the change isn't related...
https://github.com/groonga/groonga/runs/5765932214?check_suite_focus=true",True,{}
groonga/groonga,https://github.com/groonga/groonga,1349,2022-03-31T09:19:00Z,2022-04-05T04:18:01Z,2022-04-05T04:18:02Z,MERGED,True,110,71,10,https://github.com/HashidaTKS,logical_range_filter: Avoid refering needless index,4,[],https://github.com/groonga/groonga/pull/1349,https://github.com/HashidaTKS,1,https://github.com/groonga/groonga/pull/1349,"Change to get index_info after we decide to use range_index.
This is related to #1341 (comment).","Change to get index_info after we decide to use range_index.
This is related to #1341 (comment).",True,{}
groonga/groonga,https://github.com/groonga/groonga,1349,2022-03-31T09:19:00Z,2022-04-05T04:18:01Z,2022-04-05T04:18:02Z,MERGED,True,110,71,10,https://github.com/HashidaTKS,logical_range_filter: Avoid refering needless index,4,[],https://github.com/groonga/groonga/pull/1349,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1349#issuecomment-1087155865,"Change to get index_info after we decide to use range_index.
This is related to #1341 (comment).","Could you confirm the failure:
https://github.com/groonga/groonga/runs/5810835633?check_suite_focus=true#step:10:30
===============================================================================
sharding/logical_range_filter/columns/stage/filtered/window_function/month
  min                                                          0.3028s [failed]
===============================================================================
--- (expected)
+++ (actual)
@@ -78,6 +78,10 @@
 #|-| [obj][open] <276>(<Times.logs_201703>):<72>(<column:index>)
 #|-| [obj][close] <276>(<Times.logs_201703>):<72>(<column:index>)
 #|-| [obj][close] <275>(<Times>):<49>(<table:pat_key>)
+#|-| [obj][open] <275>(<Times>):<49>(<table:pat_key>)
+#|-| [obj][open] <276>(<Times.logs_201703>):<72>(<column:index>)
+#|-| [obj][close] <276>(<Times.logs_201703>):<72>(<column:index>)
+#|-| [obj][close] <275>(<Times>):<49>(<table:pat_key>)
 #|-| [obj][close] <274>(<Logs_201703.price>):<64>(<column:fix_size>)
 #|-| [obj][open] <275>(<Times>):<49>(<table:pat_key>)
 #|-| [obj][open] <276>(<Times.logs_201703>):<72>(<column:index>)
===============================================================================",True,{}
groonga/groonga,https://github.com/groonga/groonga,1349,2022-03-31T09:19:00Z,2022-04-05T04:18:01Z,2022-04-05T04:18:02Z,MERGED,True,110,71,10,https://github.com/HashidaTKS,logical_range_filter: Avoid refering needless index,4,[],https://github.com/groonga/groonga/pull/1349,https://github.com/kou,3,https://github.com/groonga/groonga/pull/1349#issuecomment-1087283177,"Change to get index_info after we decide to use range_index.
This is related to #1341 (comment).",It seems that the failure is related to GRN_EXPR_OPTIMIZE=yes.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1349,2022-03-31T09:19:00Z,2022-04-05T04:18:01Z,2022-04-05T04:18:02Z,MERGED,True,110,71,10,https://github.com/HashidaTKS,logical_range_filter: Avoid refering needless index,4,[],https://github.com/groonga/groonga/pull/1349,https://github.com/HashidaTKS,4,https://github.com/groonga/groonga/pull/1349#issuecomment-1088174430,"Change to get index_info after we decide to use range_index.
This is related to #1341 (comment).","It seems that the failure is related to GRN_EXPR_OPTIMIZE=yes.

Times and Times.logs_201703 are opened at the line below.
https://github.com/groonga/groonga/blob/HEAD/lib/mrb/scripts/expression_rewriters/optimizer.rb#L12-L13
That means the test result changes with the GRN_EXPR_OPTIMIZE variable, so I have added #$GRN_EXPR_OPTIMIZE=yes to the failed test.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1350,2022-04-06T08:48:44Z,2022-04-13T00:43:14Z,2022-04-13T00:43:14Z,MERGED,True,36,3,3,https://github.com/HashidaTKS,"accessor: Add missing unref to pseudo column start with ""m""",4,[],https://github.com/groonga/groonga/pull/1350,https://github.com/HashidaTKS,1,https://github.com/groonga/groonga/pull/1350,"Fix to unref obj if a pseudo column starts with ""m"" is not a reserved column.
Derived from #1335.","Fix to unref obj if a pseudo column starts with ""m"" is not a reserved column.
Derived from #1335.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1351,2022-04-06T08:52:42Z,2022-04-13T00:42:40Z,2022-04-13T00:42:40Z,MERGED,True,36,3,3,https://github.com/HashidaTKS,"accessor: Add missing unref to pseudo column start with ""s""",4,[],https://github.com/groonga/groonga/pull/1351,https://github.com/HashidaTKS,1,https://github.com/groonga/groonga/pull/1351,"Fix to unref obj if a pseudo column starts with ""s"" is not a reserved column.
Derived from #1335.","Fix to unref obj if a pseudo column starts with ""s"" is not a reserved column.
Derived from #1335.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1352,2022-04-06T08:53:23Z,2022-04-13T00:41:40Z,2022-04-13T00:41:40Z,MERGED,True,36,3,3,https://github.com/HashidaTKS,"accessor: Add missing unref to pseudo column start with ""a""",3,[],https://github.com/groonga/groonga/pull/1352,https://github.com/HashidaTKS,1,https://github.com/groonga/groonga/pull/1352,"Fix to unref obj if a pseudo column starts with ""a"" is not a reserved column.
Derived from #1335.","Fix to unref obj if a pseudo column starts with ""a"" is not a reserved column.
Derived from #1335.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1353,2022-04-06T11:00:10Z,,2022-04-13T02:38:12Z,OPEN,False,18,5,1,https://github.com/HashidaTKS,"grn_ctx_at, grn_obj_unlink: Regard as grn_reference_count=false when type is GRN_TYPE",3,[],https://github.com/groonga/groonga/pull/1353,https://github.com/HashidaTKS,1,https://github.com/groonga/groonga/pull/1353,"Derived from #1335.
I am still investigating for a way testing this in CI.
By using debugger, I found that queries below pass the modified line.
However, obj->header.domain is ShortText and dump logs like |-| [obj][open] <256>(<Sites>):<48>(<table:hash_key>) are not outputted when it is ShortText.
I have tried to use check object_list but the object of ShortText is opened even after change...
#$GRN_ENABLE_REFERENCE_COUNT=yes
table_create Sites TABLE_HASH_KEY ShortText  --cache no
column_create Sites uri COLUMN_SCALAR ShortText  --cache no

load --table Sites  --cache no
[
[""_key"",""uri""],
[""groonga"",""http://groonga.org/""]
]

select Sites --output_columns '_value' --cache no","Derived from #1335.
I am still investigating for a way testing this in CI.
By using debugger, I found that queries below pass the modified line.
However, obj->header.domain is ShortText and dump logs like |-| [obj][open] <256>(<Sites>):<48>(<table:hash_key>) are not outputted when it is ShortText.
I have tried to use check object_list but the object of ShortText is opened even after change...
#$GRN_ENABLE_REFERENCE_COUNT=yes
table_create Sites TABLE_HASH_KEY ShortText  --cache no
column_create Sites uri COLUMN_SCALAR ShortText  --cache no

load --table Sites  --cache no
[
[""_key"",""uri""],
[""groonga"",""http://groonga.org/""]
]

select Sites --output_columns '_value' --cache no",True,{}
groonga/groonga,https://github.com/groonga/groonga,1353,2022-04-06T11:00:10Z,,2022-04-13T02:38:12Z,OPEN,False,18,5,1,https://github.com/HashidaTKS,"grn_ctx_at, grn_obj_unlink: Regard as grn_reference_count=false when type is GRN_TYPE",3,[],https://github.com/groonga/groonga/pull/1353,https://github.com/HashidaTKS,2,https://github.com/groonga/groonga/pull/1353#issuecomment-1091438400,"Derived from #1335.
I am still investigating for a way testing this in CI.
By using debugger, I found that queries below pass the modified line.
However, obj->header.domain is ShortText and dump logs like |-| [obj][open] <256>(<Sites>):<48>(<table:hash_key>) are not outputted when it is ShortText.
I have tried to use check object_list but the object of ShortText is opened even after change...
#$GRN_ENABLE_REFERENCE_COUNT=yes
table_create Sites TABLE_HASH_KEY ShortText  --cache no
column_create Sites uri COLUMN_SCALAR ShortText  --cache no

load --table Sites  --cache no
[
[""_key"",""uri""],
[""groonga"",""http://groonga.org/""]
]

select Sites --output_columns '_value' --cache no","I have tried to use check object_list but the object of ShortText is opened even after change...

I found that this is because the load command does not close ShortText.
ShortText is closed after executing select Sites --output_columns '_value' by avoiding to use load.
I have created a new issue for investigating that load behavior.
#1354",True,{}
groonga/groonga,https://github.com/groonga/groonga,1353,2022-04-06T11:00:10Z,,2022-04-13T02:38:12Z,OPEN,False,18,5,1,https://github.com/HashidaTKS,"grn_ctx_at, grn_obj_unlink: Regard as grn_reference_count=false when type is GRN_TYPE",3,[],https://github.com/groonga/groonga/pull/1353,https://github.com/HashidaTKS,3,https://github.com/groonga/groonga/pull/1353#issuecomment-1091443516,"Derived from #1335.
I am still investigating for a way testing this in CI.
By using debugger, I found that queries below pass the modified line.
However, obj->header.domain is ShortText and dump logs like |-| [obj][open] <256>(<Sites>):<48>(<table:hash_key>) are not outputted when it is ShortText.
I have tried to use check object_list but the object of ShortText is opened even after change...
#$GRN_ENABLE_REFERENCE_COUNT=yes
table_create Sites TABLE_HASH_KEY ShortText  --cache no
column_create Sites uri COLUMN_SCALAR ShortText  --cache no

load --table Sites  --cache no
[
[""_key"",""uri""],
[""groonga"",""http://groonga.org/""]
]

select Sites --output_columns '_value' --cache no",Please refer the commit 91efcde if you want to check the diff of the test before/after change.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1353,2022-04-06T11:00:10Z,,2022-04-13T02:38:12Z,OPEN,False,18,5,1,https://github.com/HashidaTKS,"grn_ctx_at, grn_obj_unlink: Regard as grn_reference_count=false when type is GRN_TYPE",3,[],https://github.com/groonga/groonga/pull/1353,https://github.com/kou,4,https://github.com/groonga/groonga/pull/1353#issuecomment-1092304317,"Derived from #1335.
I am still investigating for a way testing this in CI.
By using debugger, I found that queries below pass the modified line.
However, obj->header.domain is ShortText and dump logs like |-| [obj][open] <256>(<Sites>):<48>(<table:hash_key>) are not outputted when it is ShortText.
I have tried to use check object_list but the object of ShortText is opened even after change...
#$GRN_ENABLE_REFERENCE_COUNT=yes
table_create Sites TABLE_HASH_KEY ShortText  --cache no
column_create Sites uri COLUMN_SCALAR ShortText  --cache no

load --table Sites  --cache no
[
[""_key"",""uri""],
[""groonga"",""http://groonga.org/""]
]

select Sites --output_columns '_value' --cache no","Can we use the following instead?
table_create URLs TABLE_HASH_KEY ShortText
table_create Sites TABLE_NO_KEY --value_type URLs

Checking ShortText is meaningless because closing types by reference count isn't efficient.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1353,2022-04-06T11:00:10Z,,2022-04-13T02:38:12Z,OPEN,False,18,5,1,https://github.com/HashidaTKS,"grn_ctx_at, grn_obj_unlink: Regard as grn_reference_count=false when type is GRN_TYPE",3,[],https://github.com/groonga/groonga/pull/1353,https://github.com/HashidaTKS,5,https://github.com/groonga/groonga/pull/1353#issuecomment-1092432422,"Derived from #1335.
I am still investigating for a way testing this in CI.
By using debugger, I found that queries below pass the modified line.
However, obj->header.domain is ShortText and dump logs like |-| [obj][open] <256>(<Sites>):<48>(<table:hash_key>) are not outputted when it is ShortText.
I have tried to use check object_list but the object of ShortText is opened even after change...
#$GRN_ENABLE_REFERENCE_COUNT=yes
table_create Sites TABLE_HASH_KEY ShortText  --cache no
column_create Sites uri COLUMN_SCALAR ShortText  --cache no

load --table Sites  --cache no
[
[""_key"",""uri""],
[""groonga"",""http://groonga.org/""]
]

select Sites --output_columns '_value' --cache no","The changed line is passed when obj->header.type is GRN_DB or GRN_TYPE.

  
    
      groonga/lib/db.c
    
    
         Line 7079
      in
      91efcde
    
  
  
    

        
          
           case GRN_DB : 
        
    
  



table_create URLs TABLE_HASH_KEY ShortText
table_create Sites TABLE_NO_KEY --value_type URLs


At the query above, obj->header.type is GRN_TABLE_HASH_KEY so the changed code is not passed.

  
    
      groonga/lib/db.c
    
    
         Line 7093
      in
      91efcde
    
  
  
    

        
          
           case GRN_TABLE_HASH_KEY : 
        
    
  



Checking ShortText is meaningless because closing types by reference count isn't efficient.

I agree with this.
I'm a little concern that reference_count of ShortText go on increasing, but maybe it is not an important issue because a type of reference_count is uint32_t and it does not overflow (unsigned integer wrapping).
When the value exceeds the upper limit of uint32, it returns to 0 and we close ShortText, but I think it is also not an important issue.
As my conclusion, this patch is needless.
How do you feel about it?",True,{}
groonga/groonga,https://github.com/groonga/groonga,1353,2022-04-06T11:00:10Z,,2022-04-13T02:38:12Z,OPEN,False,18,5,1,https://github.com/HashidaTKS,"grn_ctx_at, grn_obj_unlink: Regard as grn_reference_count=false when type is GRN_TYPE",3,[],https://github.com/groonga/groonga/pull/1353,https://github.com/kou,6,https://github.com/groonga/groonga/pull/1353#issuecomment-1092476802,"Derived from #1335.
I am still investigating for a way testing this in CI.
By using debugger, I found that queries below pass the modified line.
However, obj->header.domain is ShortText and dump logs like |-| [obj][open] <256>(<Sites>):<48>(<table:hash_key>) are not outputted when it is ShortText.
I have tried to use check object_list but the object of ShortText is opened even after change...
#$GRN_ENABLE_REFERENCE_COUNT=yes
table_create Sites TABLE_HASH_KEY ShortText  --cache no
column_create Sites uri COLUMN_SCALAR ShortText  --cache no

load --table Sites  --cache no
[
[""_key"",""uri""],
[""groonga"",""http://groonga.org/""]
]

select Sites --output_columns '_value' --cache no","Ah, OK.
We can remove case GRN_DB : because grn_db is never found by grn_ctx_at().
We can remove DB_OBJ((*rp)->obj)->range check because all built-in types have range and we don't support user defined types for now.
For reference count of types, we can disable reference count only for types in grn_ctx_at() and grn_obj_unlink().",True,{}
groonga/groonga,https://github.com/groonga/groonga,1353,2022-04-06T11:00:10Z,,2022-04-13T02:38:12Z,OPEN,False,18,5,1,https://github.com/HashidaTKS,"grn_ctx_at, grn_obj_unlink: Regard as grn_reference_count=false when type is GRN_TYPE",3,[],https://github.com/groonga/groonga/pull/1353,https://github.com/HashidaTKS,7,https://github.com/groonga/groonga/pull/1353#issuecomment-1094418388,"Derived from #1335.
I am still investigating for a way testing this in CI.
By using debugger, I found that queries below pass the modified line.
However, obj->header.domain is ShortText and dump logs like |-| [obj][open] <256>(<Sites>):<48>(<table:hash_key>) are not outputted when it is ShortText.
I have tried to use check object_list but the object of ShortText is opened even after change...
#$GRN_ENABLE_REFERENCE_COUNT=yes
table_create Sites TABLE_HASH_KEY ShortText  --cache no
column_create Sites uri COLUMN_SCALAR ShortText  --cache no

load --table Sites  --cache no
[
[""_key"",""uri""],
[""groonga"",""http://groonga.org/""]
]

select Sites --output_columns '_value' --cache no","We can remove case GRN_DB : because grn_db is never found by grn_ctx_at().
We can remove DB_OBJ((*rp)->obj)->range check because all built-in types have range and we don't support user defined types for now.
For reference count of types, we can disable reference count only for types in grn_ctx_at() and grn_obj_unlink().

Thank you. I will re-implement this or create a new PR with that approach.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1353,2022-04-06T11:00:10Z,,2022-04-13T02:38:12Z,OPEN,False,18,5,1,https://github.com/HashidaTKS,"grn_ctx_at, grn_obj_unlink: Regard as grn_reference_count=false when type is GRN_TYPE",3,[],https://github.com/groonga/groonga/pull/1353,https://github.com/HashidaTKS,8,https://github.com/groonga/groonga/pull/1353#issuecomment-1097438978,"Derived from #1335.
I am still investigating for a way testing this in CI.
By using debugger, I found that queries below pass the modified line.
However, obj->header.domain is ShortText and dump logs like |-| [obj][open] <256>(<Sites>):<48>(<table:hash_key>) are not outputted when it is ShortText.
I have tried to use check object_list but the object of ShortText is opened even after change...
#$GRN_ENABLE_REFERENCE_COUNT=yes
table_create Sites TABLE_HASH_KEY ShortText  --cache no
column_create Sites uri COLUMN_SCALAR ShortText  --cache no

load --table Sites  --cache no
[
[""_key"",""uri""],
[""groonga"",""http://groonga.org/""]
]

select Sites --output_columns '_value' --cache no","We can remove DB_OBJ((*rp)->obj)->range check because all built-in types have range and we don't support user defined types for now.

The test below failed after removing DB_OBJ((*rp)->obj)->range check, so I decided not to remove this.
uint64.expected
https://github.com/groonga/groonga/blob/master/test/command/suite/select/output/value/uint64.expected
uint64.rejected after removing DB_OBJ((*rp)->obj)->range
table_create Values TABLE_NO_KEY --value_type UInt64
[[0,0.0,0.0],true]
load --table Values
[
{""_value"": 2147583647}
]
[[[-22,0.0,0.0],""[table][load][Values] nonexistent column: <_value>""],1]
#|e| [table][load][Values] nonexistent column: <_value>
#|e| [table][load][Values][_value] failed to set column value: [table][load][Values] nonexistent column: <_value>: id: <1>: value: <2147583647>
select Values --output_columns _value
[[0,0.0,0.0],[[[1],[],[]]]]",True,{}
groonga/groonga,https://github.com/groonga/groonga,1353,2022-04-06T11:00:10Z,,2022-04-13T02:38:12Z,OPEN,False,18,5,1,https://github.com/HashidaTKS,"grn_ctx_at, grn_obj_unlink: Regard as grn_reference_count=false when type is GRN_TYPE",3,[],https://github.com/groonga/groonga/pull/1353,https://github.com/HashidaTKS,9,https://github.com/groonga/groonga/pull/1353#issuecomment-1097491364,"Derived from #1335.
I am still investigating for a way testing this in CI.
By using debugger, I found that queries below pass the modified line.
However, obj->header.domain is ShortText and dump logs like |-| [obj][open] <256>(<Sites>):<48>(<table:hash_key>) are not outputted when it is ShortText.
I have tried to use check object_list but the object of ShortText is opened even after change...
#$GRN_ENABLE_REFERENCE_COUNT=yes
table_create Sites TABLE_HASH_KEY ShortText  --cache no
column_create Sites uri COLUMN_SCALAR ShortText  --cache no

load --table Sites  --cache no
[
[""_key"",""uri""],
[""groonga"",""http://groonga.org/""]
]

select Sites --output_columns '_value' --cache no","I feel like testing this at CI/CD is some how difficult for now because it seems that there are no good way to checking a lock count in CI/CD.
Do you have any good idea for testing this at CI/CD?
I have locally tested this as below and seems no problem.

Define GRN_REFERENCE_COUNT_DEBUG

https://github.com/groonga/groonga/blob/master/lib/grn_db.h#L43


Execute the test below with test/command/run-test.sh test/command/suite/sharding/logical_count/columns/stage/filtered/window_function/shards.test

https://github.com/groonga/groonga/blob/master/test/command/suite/sharding/logical_count/columns/stage/filtered/window_function/shards.test


Check lock of an object that id is13, means builtin Time type, don't go on increasing and unlink or close for it are not called until the end of the queries.



test stdout
0x7ffda5b1b9a0: init: 2: 1
0x7ffda5b1b9a0: init: 3: 1
0x7ffda5b1b9a0: init: 4: 1
0x7ffda5b1b9a0: init: 5: 1
0x7ffda5b1b9a0: init: 6: 1
0x7ffda5b1b9a0: init: 7: 1
0x7ffda5b1b9a0: init: 8: 1
0x7ffda5b1b9a0: init: 9: 1
0x7ffda5b1b9a0: init: 10: 1
0x7ffda5b1b9a0: init: 11: 1
0x7ffda5b1b9a0: init: 12: 1
0x7ffda5b1b9a0: init: 13: 1
0x7ffda5b1b9a0: init: 14: 1
0x7ffda5b1b9a0: init: 15: 1
0x7ffda5b1b9a0: init: 16: 1
0x7ffda5b1b9a0: init: 17: 1
0x7ffda5b1b9a0: init: 18: 1
0x7ffda5b1b9a0: init: 19: 1
0x7ffda5b1b9a0: init: 64: 1
0x7ffda5b1b9a0: init: 65: 1
0x7ffda5b1b9a0: init: 66: 1
0x7ffda5b1b9a0: init: 67: 1
0x7ffda5b1b9a0: init: 68: 1
0x7ffda5b1b9a0: init: 69: 1
0x7ffda5b1b9a0: init: 70: 1
0x7ffda5b1b9a0: init: 71: 1
0x7ffda5b1b9a0: init: 72: 1
0x7ffda5b1b9a0: init: 73: 1
0x7ffda5b1b9a0: init: 74: 1
0x7ffda5b1b9a0: init: 75: 1
0x7ffda5b1b9a0: init: 76: 1
0x7ffda5b1b9a0: init: 77: 1
0x7ffda5b1b9a0: init: 78: 1
0x7ffda5b1b9a0: init: 79: 1
0x7ffda5b1b9a0: init: 80: 1
0x7ffda5b1b9a0: init: 81: 1
0x7ffda5b1b9a0: init: 82: 1
0x7ffda5b1b9a0: init: 83: 1
0x7ffda5b1b9a0: init: 84: 1
0x7ffda5b1b9a0: init: 85: 1
0x7ffda5b1b9a0: init: 86: 1
0x7ffda5b1b9a0: init: 87: 1
0x7ffda5b1b9a0: init: 88: 1
0x7ffda5b1b9a0: init: 89: 1
0x7ffda5b1b9a0: init: 90: 1
0x7ffda5b1b9a0: init: 128: 1
0x7ffda5b1b9a0: init: 129: 1
0x7ffda5b1b9a0: init: 130: 1
0x7ffda5b1b9a0: init: 131: 1
0x7ffda5b1b9a0: init: 132: 1
0x7ffda5b1b9a0: init: 133: 1
0x7ffda5b1b9a0: init: 134: 1
0x7ffda5b1b9a0: init: 135: 1
0x7ffda5b1b9a0: init: 136: 1
0x7ffda5b1b9a0: init: 137: 1
0x7ffda5b1b9a0: init: 138: 1
0x7ffda5b1b9a0: init: 139: 1
0x7ffda5b1b9a0: init: 140: 1
0x7ffda5b1b9a0: init: 141: 1
0x7ffda5b1b9a0: init: 142: 1
0x7ffda5b1b9a0: init: 143: 1
0x7ffda5b1b9a0: init: 144: 1
0x7ffda5b1b9a0: init: 145: 1
0x7ffda5b1b9a0: init: 146: 1
0x7ffda5b1b9a0: init: 147: 1
0x7ffda5b1b9a0: init: 148: 1
0x7ffda5b1b9a0: init: 149: 1
0x7ffda5b1b9a0: init: 150: 1
0x7ffda5b1b9a0: init: 151: 1
0x7ffda5b1b9a0: init: 152: 1
0x7ffda5b1b9a0: init: 153: 1
0x7ffda5b1b9a0: init: 154: 1
0x7ffda5b1b9a0: init: 155: 1
0x7ffda5b1b9a0: init: 156: 1
0x7ffda5b1b9a0: init: 157: 1
0x7ffda5b1b9a0: init: 158: 1
0x7ffda5b1b9a0: init: 159: 1
0x7ffda5b1b9a0: init: 160: 1
0x7ffda5b1b9a0: init: 161: 1
0x7ffda5b1b9a0: init: 162: 1
0x7ffda5b1b9a0: init: 163: 1
0x7ffda5b1b9a0: init: 164: 1
0x7ffda5b1b9a0: init: 165: 1
0x7ffda5b1b9a0: init: 166: 1
0x7ffda5b1b9a0: init: 167: 1
0x7ffda5b1b9a0: init: 168: 1
0x7ffda5b1b9a0: init: 169: 1
0x7ffda5b1b9a0: init: 170: 1
0x7ffda5b1b9a0: init: 171: 1
0x7ffda5b1b9a0: init: 172: 1
0x7ffda5b1b9a0: init: 173: 1
0x7ffda5b1b9a0: init: 174: 1
0x7ffda5b1b9a0: init: 175: 1
0x7ffda5b1b9a0: init: 176: 1
0x7ffda5b1b9a0: init: 177: 1
0x7ffda5b1b9a0: init: 178: 1
0x7ffda5b1b9a0: init: 179: 1
0x7ffda5b1b9a0: init: 180: 1
0x7ffda5b1b9a0: init: 181: 1
0x7ffda5b1b9a0: init: 182: 1
0x7ffda5b1b9a0: init: 183: 1
0x7ffda5b1b9a0: init: 184: 1
0x7ffda5b1b9a0: init: 185: 1
0x7ffda5b1b9a0: init: 186: 1
0x7ffda5b1b9a0: init: 187: 1
0x7ffda5b1b9a0: init: 188: 1
0x7ffda5b1b9a0: init: 189: 1
0x7ffda5b1b9a0: init: 190: 1
0x7ffda5b1b9a0: init: 191: 1
0x7ffda5b1b9a0: init: 192: 1
0x7ffda5b1b9a0: init: 193: 1
0x7ffda5b1b9a0: init: 194: 1
0x7ffda5b1b9a0: init: 195: 1
0x7ffda5b1b9a0: init: 196: 1
0x7ffda5b1b9a0: init: 197: 1
0x7ffda5b1b9a0: init: 198: 1
0x7ffda5b1b9a0: init: 199: 1
0x7ffda5b1b9a0: init: 200: 1
0x7ffda5b1b9a0: init: 201: 1
0x7ffda5b1b9a0: init: 202: 1
0x7ffda5b1b9a0: init: 203: 1
0x7ffda5b1b9a0: init: 204: 1
0x7ffda5b1b9a0: init: 205: 1
0x7ffda5b1b9a0: init: 206: 1
0x7ffda5b1b9a0: init: 207: 1
0x7ffda5b1b9a0: init: 208: 1
0x7ffda5b1b9a0: init: 209: 1
0x7ffda5b1b9a0: init: 210: 1
0x7ffda5b1b9a0: init: 211: 1
0x7ffda5b1b9a0: init: 212: 1
0x7ffda5b1b9a0: init: 213: 1
0x7ffda5b1b9a0: init: 214: 1
0x7ffda5b1b9a0: init: 215: 1
0x7ffda5b1b9a0: init: 216: 1
0x7ffda5b1b9a0: init: 217: 1
0x7ffda5b1b9a0: init: 218: 1
0x7ffda5b1b9a0: init: 219: 1
0x7ffda5b1b9a0: init: 220: 1
0x7ffda5b1b9a0: init: 221: 1
0x7ffda5b1b9a0: init: 222: 1
0x7ffda5b1b9a0: init: 223: 1
0x7ffda5b1b9a0: init: 224: 1
0x7ffda5b1b9a0: init: 225: 1
0x7ffda5b1b9a0: init: 226: 1
0x7ffda5b1b9a0: init: 227: 1
0x7ffda5b1b9a0: init: 228: 1
0x7ffda5b1b9a0: init: 229: 1
0x7ffda5b1b9a0: at: start: 130
0x7ffda5b1b9a0: lock: 130: 1
0x7ffda5b1b9a0: at: done: 130: 2: 0x557daacef440
0x7ffda5b1b9a0: at: start: 142
0x7ffda5b1b9a0: lock: 142: 1
0x7ffda5b1b9a0: at: done: 142: 2: 0x557daad6b290
0x7ffda5b1b9a0: close: 0: 0x557daabf5e40
0x7ffda5b1b9a0: close: 2: 0x557daabfff90
0x7ffda5b1b9a0: delete: 2: 1
0x7ffda5b1b9a0: close: 3: 0x557daac010a0
0x7ffda5b1b9a0: delete: 3: 1
0x7ffda5b1b9a0: close: 4: 0x557daac01170
0x7ffda5b1b9a0: delete: 4: 1
0x7ffda5b1b9a0: close: 5: 0x557daac01290
0x7ffda5b1b9a0: delete: 5: 1
0x7ffda5b1b9a0: close: 6: 0x557daac01360
0x7ffda5b1b9a0: delete: 6: 1
0x7ffda5b1b9a0: close: 7: 0x557daac01430
0x7ffda5b1b9a0: delete: 7: 1
0x7ffda5b1b9a0: close: 8: 0x557daac01500
0x7ffda5b1b9a0: delete: 8: 1
0x7ffda5b1b9a0: close: 9: 0x557daac01660
0x7ffda5b1b9a0: delete: 9: 1
0x7ffda5b1b9a0: close: 10: 0x557daac01700
0x7ffda5b1b9a0: delete: 10: 1
0x7ffda5b1b9a0: close: 11: 0x557daac017a0
0x7ffda5b1b9a0: delete: 11: 1
0x7ffda5b1b9a0: close: 12: 0x557daac01840
0x7ffda5b1b9a0: delete: 12: 1
0x7ffda5b1b9a0: close: 13: 0x557daac018e0
0x7ffda5b1b9a0: delete: 13: 1
0x7ffda5b1b9a0: close: 14: 0x557daac01980
0x7ffda5b1b9a0: delete: 14: 1
0x7ffda5b1b9a0: close: 15: 0x557daac01a20
0x7ffda5b1b9a0: delete: 15: 1
0x7ffda5b1b9a0: close: 16: 0x557daac01ac0
0x7ffda5b1b9a0: delete: 16: 1
0x7ffda5b1b9a0: close: 17: 0x557daac01c70
0x7ffda5b1b9a0: delete: 17: 1
0x7ffda5b1b9a0: close: 18: 0x557daac01d10
0x7ffda5b1b9a0: delete: 18: 1
0x7ffda5b1b9a0: close: 19: 0x557daac01db0
0x7ffda5b1b9a0: delete: 19: 1
0x7ffda5b1b9a0: close: 64: 0x557daac04e00
0x7ffda5b1b9a0: delete: 64: 1
0x7ffda5b1b9a0: close: 65: 0x557daac05510
0x7ffda5b1b9a0: delete: 65: 1
0x7ffda5b1b9a0: close: 66: 0x557daac05630
0x7ffda5b1b9a0: delete: 66: 1
0x7ffda5b1b9a0: close: 67: 0x557daac04aa0
0x7ffda5b1b9a0: delete: 67: 1
0x7ffda5b1b9a0: close: 68: 0x557daac048e0
0x7ffda5b1b9a0: delete: 68: 1
0x7ffda5b1b9a0: close: 69: 0x557daac07ae0
0x7ffda5b1b9a0: delete: 69: 1
0x7ffda5b1b9a0: close: 70: 0x557daac06a40
0x7ffda5b1b9a0: delete: 70: 1
0x7ffda5b1b9a0: close: 71: 0x557daac06b60
0x7ffda5b1b9a0: delete: 71: 1
0x7ffda5b1b9a0: close: 72: 0x557daac06c80
0x7ffda5b1b9a0: delete: 72: 1
0x7ffda5b1b9a0: close: 73: 0x557daac06da0
0x7ffda5b1b9a0: delete: 73: 1
0x7ffda5b1b9a0: close: 74: 0x557daac06ec0
0x7ffda5b1b9a0: delete: 74: 1
0x7ffda5b1b9a0: close: 75: 0x557daac06fe0
0x7ffda5b1b9a0: delete: 75: 1
0x7ffda5b1b9a0: close: 76: 0x557daac07100
0x7ffda5b1b9a0: delete: 76: 1
0x7ffda5b1b9a0: close: 77: 0x557daac07220
0x7ffda5b1b9a0: delete: 77: 1
0x7ffda5b1b9a0: close: 78: 0x557daac07340
0x7ffda5b1b9a0: delete: 78: 1
0x7ffda5b1b9a0: close: 79: 0x557daac07460
0x7ffda5b1b9a0: delete: 79: 1
0x7ffda5b1b9a0: close: 80: 0x557daac07580
0x7ffda5b1b9a0: delete: 80: 1
0x7ffda5b1b9a0: close: 81: 0x557daac076a0
0x7ffda5b1b9a0: delete: 81: 1
0x7ffda5b1b9a0: close: 82: 0x557daac077c0
0x7ffda5b1b9a0: delete: 82: 1
0x7ffda5b1b9a0: close: 83: 0x557daac8c050
0x7ffda5b1b9a0: delete: 83: 1
0x7ffda5b1b9a0: close: 84: 0x557daac98180
0x7ffda5b1b9a0: delete: 84: 1
0x7ffda5b1b9a0: close: 85: 0x557daaca42b0
0x7ffda5b1b9a0: delete: 85: 1
0x7ffda5b1b9a0: close: 86: 0x557daacb03e0
0x7ffda5b1b9a0: delete: 86: 1
0x7ffda5b1b9a0: close: 87: 0x557daacbc510
0x7ffda5b1b9a0: delete: 87: 1
0x7ffda5b1b9a0: close: 88: 0x557daacc8640
0x7ffda5b1b9a0: delete: 88: 1
0x7ffda5b1b9a0: close: 89: 0x557daacd4770
0x7ffda5b1b9a0: delete: 89: 1
0x7ffda5b1b9a0: close: 90: 0x557daacd4890
0x7ffda5b1b9a0: delete: 90: 1
0x7ffda5b1b9a0: close: 128: 0x557daacd49b0
0x7ffda5b1b9a0: delete: 128: 1
0x7ffda5b1b9a0: close: 129: 0x557daace2300
0x7ffda5b1b9a0: delete: 129: 1
0x7ffda5b1b9a0: close: 130: 0x557daacef440
0x7ffda5b1b9a0: delete: 130: 2
0x7ffda5b1b9a0: close: 131: 0x557daacfc580
0x7ffda5b1b9a0: delete: 131: 1
0x7ffda5b1b9a0: close: 132: 0x557daacfc6a0
0x7ffda5b1b9a0: delete: 132: 1
0x7ffda5b1b9a0: close: 133: 0x557daad087d0
0x7ffda5b1b9a0: delete: 133: 1
0x7ffda5b1b9a0: close: 134: 0x557daad14900
0x7ffda5b1b9a0: delete: 134: 1
0x7ffda5b1b9a0: close: 135: 0x557daad21a40
0x7ffda5b1b9a0: delete: 135: 1
0x7ffda5b1b9a0: close: 136: 0x557daad2db70
0x7ffda5b1b9a0: delete: 136: 1
0x7ffda5b1b9a0: close: 137: 0x557daad39ca0
0x7ffda5b1b9a0: delete: 137: 1
0x7ffda5b1b9a0: close: 138: 0x557daad46de0
0x7ffda5b1b9a0: delete: 138: 1
0x7ffda5b1b9a0: close: 139: 0x557daad52f10
0x7ffda5b1b9a0: delete: 139: 1
0x7ffda5b1b9a0: close: 140: 0x557daad5f040
0x7ffda5b1b9a0: delete: 140: 1
0x7ffda5b1b9a0: close: 141: 0x557daad6b170
0x7ffda5b1b9a0: delete: 141: 1
0x7ffda5b1b9a0: close: 142: 0x557daad6b290
0x7ffda5b1b9a0: delete: 142: 2
0x7ffda5b1b9a0: close: 143: 0x557daad773c0
0x7ffda5b1b9a0: delete: 143: 1
0x7ffda5b1b9a0: close: 144: 0x557daad834f0
0x7ffda5b1b9a0: delete: 144: 1
0x7ffda5b1b9a0: close: 145: 0x557daad8f620
0x7ffda5b1b9a0: delete: 145: 1
0x7ffda5b1b9a0: close: 146: 0x557daad9b750
0x7ffda5b1b9a0: delete: 146: 1
0x7ffda5b1b9a0: close: 147: 0x557daada7880
0x7ffda5b1b9a0: delete: 147: 1
0x7ffda5b1b9a0: close: 148: 0x557daadb39b0
0x7ffda5b1b9a0: delete: 148: 1
0x7ffda5b1b9a0: close: 149: 0x557daadb3ad0
0x7ffda5b1b9a0: delete: 149: 1
0x7ffda5b1b9a0: close: 150: 0x557daadbfc00
0x7ffda5b1b9a0: delete: 150: 1
0x7ffda5b1b9a0: close: 151: 0x557daadcbd30
0x7ffda5b1b9a0: delete: 151: 1
0x7ffda5b1b9a0: close: 152: 0x557daadd8e70
0x7ffda5b1b9a0: delete: 152: 1
0x7ffda5b1b9a0: close: 153: 0x557daade4fa0
0x7ffda5b1b9a0: delete: 153: 1
0x7ffda5b1b9a0: close: 154: 0x557daadf10d0
0x7ffda5b1b9a0: delete: 154: 1
0x7ffda5b1b9a0: close: 155: 0x557daadfd200
0x7ffda5b1b9a0: delete: 155: 1
0x7ffda5b1b9a0: close: 156: 0x557daae0a340
0x7ffda5b1b9a0: delete: 156: 1
0x7ffda5b1b9a0: close: 157: 0x557daae17480
0x7ffda5b1b9a0: delete: 157: 1
0x7ffda5b1b9a0: close: 158: 0x557daae245c0
0x7ffda5b1b9a0: delete: 158: 1
0x7ffda5b1b9a0: close: 159: 0x557daae246e0
0x7ffda5b1b9a0: delete: 159: 1
0x7ffda5b1b9a0: close: 160: 0x557daae24800
0x7ffda5b1b9a0: delete: 160: 1
0x7ffda5b1b9a0: close: 161: 0x557daae24920
0x7ffda5b1b9a0: delete: 161: 1
0x7ffda5b1b9a0: close: 162: 0x557daae24a40
0x7ffda5b1b9a0: delete: 162: 1
0x7ffda5b1b9a0: close: 163: 0x557daae24b60
0x7ffda5b1b9a0: delete: 163: 1
0x7ffda5b1b9a0: close: 164: 0x557daae24c80
0x7ffda5b1b9a0: delete: 164: 1
0x7ffda5b1b9a0: close: 165: 0x557daae24da0
0x7ffda5b1b9a0: delete: 165: 1
0x7ffda5b1b9a0: close: 166: 0x557daae24ec0
0x7ffda5b1b9a0: delete: 166: 1
0x7ffda5b1b9a0: close: 167: 0x557daae24fe0
0x7ffda5b1b9a0: delete: 167: 1
0x7ffda5b1b9a0: close: 168: 0x557daae25100
0x7ffda5b1b9a0: delete: 168: 1
0x7ffda5b1b9a0: close: 169: 0x557daae25220
0x7ffda5b1b9a0: delete: 169: 1
0x7ffda5b1b9a0: close: 170: 0x557daae25340
0x7ffda5b1b9a0: delete: 170: 1
0x7ffda5b1b9a0: close: 171: 0x557daae25460
0x7ffda5b1b9a0: delete: 171: 1
0x7ffda5b1b9a0: close: 172: 0x557daae25580
0x7ffda5b1b9a0: delete: 172: 1
0x7ffda5b1b9a0: close: 173: 0x557daae256a0
0x7ffda5b1b9a0: delete: 173: 1
0x7ffda5b1b9a0: close: 174: 0x557daae257c0
0x7ffda5b1b9a0: delete: 174: 1
0x7ffda5b1b9a0: close: 175: 0x557daae258e0
0x7ffda5b1b9a0: delete: 175: 1
0x7ffda5b1b9a0: close: 176: 0x557daae25a00
0x7ffda5b1b9a0: delete: 176: 1
0x7ffda5b1b9a0: close: 177: 0x557daae25b20
0x7ffda5b1b9a0: delete: 177: 1
0x7ffda5b1b9a0: close: 178: 0x557daae25c40
0x7ffda5b1b9a0: delete: 178: 1
0x7ffda5b1b9a0: close: 179: 0x557daae25d60
0x7ffda5b1b9a0: delete: 179: 1
0x7ffda5b1b9a0: close: 180: 0x557daae32ea0
0x7ffda5b1b9a0: delete: 180: 1
0x7ffda5b1b9a0: close: 181: 0x557daae3efd0
0x7ffda5b1b9a0: delete: 181: 1
0x7ffda5b1b9a0: close: 182: 0x557daae4b100
0x7ffda5b1b9a0: delete: 182: 1
0x7ffda5b1b9a0: close: 183: 0x557daae57230
0x7ffda5b1b9a0: delete: 183: 1
0x7ffda5b1b9a0: close: 184: 0x557daae64370
0x7ffda5b1b9a0: delete: 184: 1
0x7ffda5b1b9a0: close: 185: 0x557daae704a0
0x7ffda5b1b9a0: delete: 185: 1
0x7ffda5b1b9a0: close: 186: 0x557daae7c5d0
0x7ffda5b1b9a0: delete: 186: 1
0x7ffda5b1b9a0: close: 187: 0x557daae7c6f0
0x7ffda5b1b9a0: delete: 187: 1
0x7ffda5b1b9a0: close: 188: 0x557daae89830
0x7ffda5b1b9a0: delete: 188: 1
0x7ffda5b1b9a0: close: 189: 0x557daae89950
0x7ffda5b1b9a0: delete: 189: 1
0x7ffda5b1b9a0: close: 190: 0x557daae95a80
0x7ffda5b1b9a0: delete: 190: 1
0x7ffda5b1b9a0: close: 191: 0x557daae95ba0
0x7ffda5b1b9a0: delete: 191: 1
0x7ffda5b1b9a0: close: 192: 0x557daaea1cd0
0x7ffda5b1b9a0: delete: 192: 1
0x7ffda5b1b9a0: close: 193: 0x557daaeade00
0x7ffda5b1b9a0: delete: 193: 1
0x7ffda5b1b9a0: close: 194: 0x557daaeb9f30
0x7ffda5b1b9a0: delete: 194: 1
0x7ffda5b1b9a0: close: 195: 0x557daaec6060
0x7ffda5b1b9a0: delete: 195: 1
0x7ffda5b1b9a0: close: 196: 0x557daaed2190
0x7ffda5b1b9a0: delete: 196: 1
0x7ffda5b1b9a0: close: 197: 0x557daaede2c0
0x7ffda5b1b9a0: delete: 197: 1
0x7ffda5b1b9a0: close: 198: 0x557daaede3e0
0x7ffda5b1b9a0: delete: 198: 1
0x7ffda5b1b9a0: close: 199: 0x557daaeea510
0x7ffda5b1b9a0: delete: 199: 1
0x7ffda5b1b9a0: close: 200: 0x557daaeea630
0x7ffda5b1b9a0: delete: 200: 1
0x7ffda5b1b9a0: close: 201: 0x557daaeea750
0x7ffda5b1b9a0: delete: 201: 1
0x7ffda5b1b9a0: close: 202: 0x557daaef7890
0x7ffda5b1b9a0: delete: 202: 1
0x7ffda5b1b9a0: close: 203: 0x557daaef79b0
0x7ffda5b1b9a0: delete: 203: 1
0x7ffda5b1b9a0: close: 204: 0x557daaf03ae0
0x7ffda5b1b9a0: delete: 204: 1
0x7ffda5b1b9a0: close: 205: 0x557daaf03c00
0x7ffda5b1b9a0: delete: 205: 1
0x7ffda5b1b9a0: close: 206: 0x557daaf03d20
0x7ffda5b1b9a0: delete: 206: 1
0x7ffda5b1b9a0: close: 207: 0x557daaf0fe50
0x7ffda5b1b9a0: delete: 207: 1
0x7ffda5b1b9a0: close: 208: 0x557daaf1bf80
0x7ffda5b1b9a0: delete: 208: 1
0x7ffda5b1b9a0: close: 209: 0x557daaf280b0
0x7ffda5b1b9a0: delete: 209: 1
0x7ffda5b1b9a0: close: 210: 0x557daaf281d0
0x7ffda5b1b9a0: delete: 210: 1
0x7ffda5b1b9a0: close: 211: 0x557daaf34300
0x7ffda5b1b9a0: delete: 211: 1
0x7ffda5b1b9a0: close: 212: 0x557daaf40430
0x7ffda5b1b9a0: delete: 212: 1
0x7ffda5b1b9a0: close: 213: 0x557daaf4d570
0x7ffda5b1b9a0: delete: 213: 1
0x7ffda5b1b9a0: close: 214: 0x557daaf596a0
0x7ffda5b1b9a0: delete: 214: 1
0x7ffda5b1b9a0: close: 215: 0x557daaf597c0
0x7ffda5b1b9a0: delete: 215: 1
0x7ffda5b1b9a0: close: 216: 0x557daaf658f0
0x7ffda5b1b9a0: delete: 216: 1
0x7ffda5b1b9a0: close: 217: 0x557daaf71a20
0x7ffda5b1b9a0: delete: 217: 1
0x7ffda5b1b9a0: close: 218: 0x557daaf7db50
0x7ffda5b1b9a0: delete: 218: 1
0x7ffda5b1b9a0: close: 219: 0x557daaf7dc70
0x7ffda5b1b9a0: delete: 219: 1
0x7ffda5b1b9a0: close: 220: 0x557daaf7dd90
0x7ffda5b1b9a0: delete: 220: 1
0x7ffda5b1b9a0: close: 221: 0x557daaf7deb0
0x7ffda5b1b9a0: delete: 221: 1
0x7ffda5b1b9a0: close: 222: 0x557daaf7dfd0
0x7ffda5b1b9a0: delete: 222: 1
0x7ffda5b1b9a0: close: 223: 0x557daaf7e0f0
0x7ffda5b1b9a0: delete: 223: 1
0x7ffda5b1b9a0: close: 224: 0x557daaf7e210
0x7ffda5b1b9a0: delete: 224: 1
0x7ffda5b1b9a0: close: 225: 0x557daaf7e330
0x7ffda5b1b9a0: delete: 225: 1
0x7ffda5b1b9a0: close: 226: 0x557daaf7e450
0x7ffda5b1b9a0: delete: 226: 1
0x7ffda5b1b9a0: close: 227: 0x557daaf7e570
0x7ffda5b1b9a0: delete: 227: 1
0x7ffda5b1b9a0: close: 228: 0x557daaf7e690
0x7ffda5b1b9a0: delete: 228: 1
0x7ffda5b1b9a0: close: 229: 0x557daaf7e7b0
0x7ffda5b1b9a0: delete: 229: 1
0x7fff84c47130: init: 64: 1
0x7fff84c47130: init: 65: 1
0x7fff84c47130: init: 66: 1
0x7fff84c47130: init: 67: 1
0x7fff84c47130: init: 68: 1
0x7fff84c47130: init: 69: 1
0x7fff84c47130: init: 70: 1
0x7fff84c47130: init: 71: 1
0x7fff84c47130: init: 72: 1
0x7fff84c47130: init: 73: 1
0x7fff84c47130: init: 74: 1
0x7fff84c47130: init: 75: 1
0x7fff84c47130: init: 76: 1
0x7fff84c47130: init: 77: 1
0x7fff84c47130: init: 78: 1
0x7fff84c47130: init: 79: 1
0x7fff84c47130: init: 80: 1
0x7fff84c47130: init: 81: 1
0x7fff84c47130: init: 82: 1
0x7fff84c47130: init: 83: 1
0x7fff84c47130: init: 84: 1
0x7fff84c47130: init: 85: 1
0x7fff84c47130: init: 86: 1
0x7fff84c47130: init: 87: 1
0x7fff84c47130: init: 88: 1
0x7fff84c47130: init: 89: 1
0x7fff84c47130: init: 90: 1
0x7fff84c47130: init: 128: 1
0x7fff84c47130: init: 129: 1
0x7fff84c47130: init: 130: 1
0x7fff84c47130: init: 131: 1
0x7fff84c47130: init: 132: 1
0x7fff84c47130: init: 133: 1
0x7fff84c47130: init: 134: 1
0x7fff84c47130: init: 135: 1
0x7fff84c47130: init: 136: 1
0x7fff84c47130: init: 137: 1
0x7fff84c47130: init: 138: 1
0x7fff84c47130: init: 139: 1
0x7fff84c47130: init: 140: 1
0x7fff84c47130: init: 141: 1
0x7fff84c47130: init: 142: 1
0x7fff84c47130: init: 143: 1
0x7fff84c47130: init: 144: 1
0x7fff84c47130: init: 145: 1
0x7fff84c47130: init: 146: 1
0x7fff84c47130: init: 147: 1
0x7fff84c47130: init: 148: 1
0x7fff84c47130: init: 149: 1
0x7fff84c47130: init: 150: 1
0x7fff84c47130: init: 151: 1
0x7fff84c47130: init: 152: 1
0x7fff84c47130: init: 153: 1
0x7fff84c47130: init: 154: 1
0x7fff84c47130: init: 155: 1
0x7fff84c47130: init: 156: 1
0x7fff84c47130: init: 157: 1
0x7fff84c47130: init: 158: 1
0x7fff84c47130: init: 159: 1
0x7fff84c47130: init: 160: 1
0x7fff84c47130: init: 161: 1
0x7fff84c47130: init: 162: 1
0x7fff84c47130: init: 163: 1
0x7fff84c47130: init: 164: 1
0x7fff84c47130: init: 165: 1
0x7fff84c47130: init: 166: 1
0x7fff84c47130: init: 167: 1
0x7fff84c47130: init: 168: 1
0x7fff84c47130: init: 169: 1
0x7fff84c47130: init: 170: 1
0x7fff84c47130: init: 171: 1
0x7fff84c47130: init: 172: 1
0x7fff84c47130: init: 173: 1
0x7fff84c47130: init: 174: 1
0x7fff84c47130: init: 175: 1
0x7fff84c47130: init: 176: 1
0x7fff84c47130: init: 177: 1
0x7fff84c47130: init: 178: 1
0x7fff84c47130: init: 179: 1
0x7fff84c47130: init: 180: 1
0x7fff84c47130: init: 181: 1
0x7fff84c47130: init: 182: 1
0x7fff84c47130: init: 183: 1
0x7fff84c47130: init: 184: 1
0x7fff84c47130: init: 185: 1
0x7fff84c47130: init: 186: 1
0x7fff84c47130: init: 187: 1
0x7fff84c47130: init: 188: 1
0x7fff84c47130: init: 189: 1
0x7fff84c47130: init: 190: 1
0x7fff84c47130: init: 191: 1
0x7fff84c47130: init: 192: 1
0x7fff84c47130: init: 193: 1
0x7fff84c47130: init: 194: 1
0x7fff84c47130: init: 195: 1
0x7fff84c47130: init: 196: 1
0x7fff84c47130: init: 197: 1
0x7fff84c47130: init: 198: 1
0x7fff84c47130: init: 199: 1
0x7fff84c47130: init: 200: 1
0x7fff84c47130: init: 201: 1
0x7fff84c47130: init: 202: 1
0x7fff84c47130: init: 203: 1
0x7fff84c47130: init: 204: 1
0x7fff84c47130: init: 205: 1
0x7fff84c47130: init: 206: 1
0x7fff84c47130: init: 207: 1
0x7fff84c47130: init: 208: 1
0x7fff84c47130: init: 209: 1
0x7fff84c47130: init: 210: 1
0x7fff84c47130: init: 211: 1
0x7fff84c47130: init: 212: 1
0x7fff84c47130: init: 213: 1
0x7fff84c47130: init: 214: 1
0x7fff84c47130: init: 215: 1
0x7fff84c47130: init: 216: 1
0x7fff84c47130: init: 217: 1
0x7fff84c47130: init: 218: 1
0x7fff84c47130: init: 219: 1
0x7fff84c47130: init: 220: 1
0x7fff84c47130: init: 221: 1
0x7fff84c47130: init: 222: 1
0x7fff84c47130: init: 223: 1
0x7fff84c47130: init: 224: 1
0x7fff84c47130: init: 225: 1
0x7fff84c47130: init: 226: 1
0x7fff84c47130: init: 227: 1
0x7fff84c47130: init: 228: 1
0x7fff84c47130: init: 229: 1
0x7f20819a0250: at: start: 131
0x7f20819a0250: lock: 131: 1
0x7f20819a0250: at: done: 131: 2: 0x55f4a4c75aa0
0x7f20819a0250: at: start: 181
0x7f20819a0250: lock: 181: 1
0x7f20819a0250: at: done: 181: 2: 0x55f4a4db84f0
0x7f20819a0250: init: 256: 1
0x7f20819a0250: init: 257: 1
0x7f20819a0250: init: 258: 1
0x7f20819a0250: init: 259: 1
0x7f20819a0250: init: 260: 1
0x7f20819a0250: init: 261: 1
0x7f20819a0250: at: start: 181
0x7f20819a0250: lock: 181: 2
0x7f20819a0250: at: done: 181: 3: 0x55f4a4db84f0
0x7f20819a0250: init: 262: 1
0x7f20819a0250: init: 263: 1
0x7f20819a0250: init: 264: 1
0x7f20819a0250: init: 265: 1
0x7f20819a0250: init: 266: 1
0x7f20819a0250: init: 267: 1
0x7f20819a0250: init: 268: 1
0x7f20819a0250: init: 269: 1
0x7f20819a0250: init: 270: 1
0x7f20819a0250: init: 271: 1
0x7f20819a0250: at: start: 134
0x7f20819a0250: lock: 134: 1
0x7f20819a0250: at: done: 134: 2: 0x55f4a4c8de20
0x7f20819a0250: init: 272: 1
0x7f20819a0250: unlink: start: 272: 0x7f207c292120: 1: 0x7f207c292120
0x7f20819a0250: unlink: lock: 272: 0x7f207c292120: 1: 0
0x7f20819a0250: unlink: locked: 272: 0x7f207c292120: 0: 2147483648
0x7f20819a0250: close: 272: 0x7f207c292120
0x7f20819a0250: delete: 272: 2147483648
0x7f20819a0250: unlink: done: 272: 0x7f207c292120: 2147483648
0x7f20819a0250: at: start: 137
0x7f20819a0250: lock: 137: 1
0x7f20819a0250: at: done: 137: 2: 0x55f4a4cb31c0
0x7f20819a0250: at: start: 272
0x7f20819a0250: lock: 272: 0
0x7f20819a0250: at: done: 272: 1: 0x7f207c292120
0x7f20819a0250: at: start: 13
0x7f20819a0250: lock: 13: 0
0x7f20819a0250: at: done: 13: 1: 0x7f207c28e510
0x7f20819a0250: init: 273: 1
0x7f20819a0250: unlink: start: 273: 0x7f207c28dea0: 1: 0x7f207c28dea0
0x7f20819a0250: unlink: lock: 273: 0x7f207c28dea0: 1: 0
0x7f20819a0250: unlink: locked: 273: 0x7f207c28dea0: 0: 2147483648
0x7f20819a0250: close: 273: 0x7f207c28dea0
0x7f20819a0250: delete: 273: 2147483648
0x7f20819a0250: unlink: done: 273: 0x7f207c28dea0: 2147483648
0x7f20819a0250: unlink: start: 272: 0x7f207c292120: 1: 0x7f207c292120
0x7f20819a0250: unlink: lock: 272: 0x7f207c292120: 1: 0
0x7f20819a0250: unlink: locked: 272: 0x7f207c292120: 0: 2147483648
0x7f20819a0250: close: 272: 0x7f207c292120
0x7f20819a0250: delete: 272: 2147483648
0x7f20819a0250: unlink: done: 272: 0x7f207c292120: 2147483648
0x7f20819a0250: at: start: 137
0x7f20819a0250: lock: 137: 2
0x7f20819a0250: at: done: 137: 3: 0x55f4a4cb31c0
0x7f20819a0250: at: start: 272
0x7f20819a0250: lock: 272: 0
0x7f20819a0250: at: done: 272: 1: 0x7f207c1a6bf0
0x7f20819a0250: at: start: 9
0x7f20819a0250: lock: 9: 0
0x7f20819a0250: at: done: 9: 1: 0x7f207c28e090
0x7f20819a0250: init: 274: 1
0x7f20819a0250: unlink: start: 274: 0x7f207c2921e0: 1: 0x7f207c2921e0
0x7f20819a0250: unlink: lock: 274: 0x7f207c2921e0: 1: 0
0x7f20819a0250: unlink: locked: 274: 0x7f207c2921e0: 0: 2147483648
0x7f20819a0250: close: 274: 0x7f207c2921e0
0x7f20819a0250: delete: 274: 2147483648
0x7f20819a0250: unlink: done: 274: 0x7f207c2921e0: 2147483648
0x7f20819a0250: unlink: start: 272: 0x7f207c1a6bf0: 1: 0x7f207c1a6bf0
0x7f20819a0250: unlink: lock: 272: 0x7f207c1a6bf0: 1: 0
0x7f20819a0250: unlink: locked: 272: 0x7f207c1a6bf0: 0: 2147483648
0x7f20819a0250: close: 272: 0x7f207c1a6bf0
0x7f20819a0250: delete: 272: 2147483648
0x7f20819a0250: unlink: done: 272: 0x7f207c1a6bf0: 2147483648
0x7f20819a0250: at: start: 134
0x7f20819a0250: lock: 134: 2
0x7f20819a0250: at: done: 134: 3: 0x55f4a4c8de20
0x7f20819a0250: init: 275: 1
0x7f20819a0250: unlink: start: 275: 0x7f207c28c970: 1: 0x7f207c28c970
0x7f20819a0250: unlink: lock: 275: 0x7f207c28c970: 1: 0
0x7f20819a0250: unlink: locked: 275: 0x7f207c28c970: 0: 2147483648
0x7f20819a0250: close: 275: 0x7f207c28c970
0x7f20819a0250: delete: 275: 2147483648
0x7f20819a0250: unlink: done: 275: 0x7f207c28c970: 2147483648
0x7f20819a0250: at: start: 137
0x7f20819a0250: lock: 137: 3
0x7f20819a0250: at: done: 137: 4: 0x55f4a4cb31c0
0x7f20819a0250: at: start: 275
0x7f20819a0250: lock: 275: 0
0x7f20819a0250: at: done: 275: 1: 0x7f207c28b870
0x7f20819a0250: at: start: 13
0x7f20819a0250: at: done: 13: 1: 0x7f207c28e510
0x7f20819a0250: init: 276: 1
0x7f20819a0250: unlink: start: 276: 0x7f207c28cad0: 1: 0x7f207c28cad0
0x7f20819a0250: unlink: lock: 276: 0x7f207c28cad0: 1: 0
0x7f20819a0250: unlink: locked: 276: 0x7f207c28cad0: 0: 2147483648
0x7f20819a0250: close: 276: 0x7f207c28cad0
0x7f20819a0250: delete: 276: 2147483648
0x7f20819a0250: unlink: done: 276: 0x7f207c28cad0: 2147483648
0x7f20819a0250: unlink: start: 275: 0x7f207c28b870: 1: 0x7f207c28b870
0x7f20819a0250: unlink: lock: 275: 0x7f207c28b870: 1: 0
0x7f20819a0250: unlink: locked: 275: 0x7f207c28b870: 0: 2147483648
0x7f20819a0250: close: 275: 0x7f207c28b870
0x7f20819a0250: delete: 275: 2147483648
0x7f20819a0250: unlink: done: 275: 0x7f207c28b870: 2147483648
0x7f20819a0250: at: start: 137
0x7f20819a0250: lock: 137: 4
0x7f20819a0250: at: done: 137: 5: 0x55f4a4cb31c0
0x7f20819a0250: at: start: 275
0x7f20819a0250: lock: 275: 0
0x7f20819a0250: at: done: 275: 1: 0x7f207c28bca0
0x7f20819a0250: at: start: 9
0x7f20819a0250: at: done: 9: 1: 0x7f207c28e090
0x7f20819a0250: init: 277: 1
0x7f20819a0250: unlink: start: 277: 0x7f207c28cb70: 1: 0x7f207c28cb70
0x7f20819a0250: unlink: lock: 277: 0x7f207c28cb70: 1: 0
0x7f20819a0250: unlink: locked: 277: 0x7f207c28cb70: 0: 2147483648
0x7f20819a0250: close: 277: 0x7f207c28cb70
0x7f20819a0250: delete: 277: 2147483648
0x7f20819a0250: unlink: done: 277: 0x7f207c28cb70: 2147483648
0x7f20819a0250: unlink: start: 275: 0x7f207c28bca0: 1: 0x7f207c28bca0
0x7f20819a0250: unlink: lock: 275: 0x7f207c28bca0: 1: 0
0x7f20819a0250: unlink: locked: 275: 0x7f207c28bca0: 0: 2147483648
0x7f20819a0250: close: 275: 0x7f207c28bca0
0x7f20819a0250: delete: 275: 2147483648
0x7f20819a0250: unlink: done: 275: 0x7f207c28bca0: 2147483648
0x7f20819a0250: at: start: 134
0x7f20819a0250: lock: 134: 3
0x7f20819a0250: at: done: 134: 4: 0x55f4a4c8de20
0x7f20819a0250: init: 278: 1
0x7f20819a0250: unlink: start: 278: 0x7f207c28d150: 1: 0x7f207c28d150
0x7f20819a0250: unlink: lock: 278: 0x7f207c28d150: 1: 0
0x7f20819a0250: unlink: locked: 278: 0x7f207c28d150: 0: 2147483648
0x7f20819a0250: close: 278: 0x7f207c28d150
0x7f20819a0250: delete: 278: 2147483648
0x7f20819a0250: unlink: done: 278: 0x7f207c28d150: 2147483648
0x7f20819a0250: at: start: 137
0x7f20819a0250: lock: 137: 5
0x7f20819a0250: at: done: 137: 6: 0x55f4a4cb31c0
0x7f20819a0250: at: start: 278
0x7f20819a0250: lock: 278: 0
0x7f20819a0250: at: done: 278: 1: 0x7f207c28b130
0x7f20819a0250: at: start: 13
0x7f20819a0250: at: done: 13: 1: 0x7f207c28e510
0x7f20819a0250: init: 279: 1
0x7f20819a0250: unlink: start: 279: 0x7f207c28cb70: 1: 0x7f207c28cb70
0x7f20819a0250: unlink: lock: 279: 0x7f207c28cb70: 1: 0
0x7f20819a0250: unlink: locked: 279: 0x7f207c28cb70: 0: 2147483648
0x7f20819a0250: close: 279: 0x7f207c28cb70
0x7f20819a0250: delete: 279: 2147483648
0x7f20819a0250: unlink: done: 279: 0x7f207c28cb70: 2147483648
0x7f20819a0250: unlink: start: 278: 0x7f207c28b130: 1: 0x7f207c28b130
0x7f20819a0250: unlink: lock: 278: 0x7f207c28b130: 1: 0
0x7f20819a0250: unlink: locked: 278: 0x7f207c28b130: 0: 2147483648
0x7f20819a0250: close: 278: 0x7f207c28b130
0x7f20819a0250: delete: 278: 2147483648
0x7f20819a0250: unlink: done: 278: 0x7f207c28b130: 2147483648
0x7f20819a0250: at: start: 137
0x7f20819a0250: lock: 137: 6
0x7f20819a0250: at: done: 137: 7: 0x55f4a4cb31c0
0x7f20819a0250: at: start: 278
0x7f20819a0250: lock: 278: 0
0x7f20819a0250: at: done: 278: 1: 0x7f207c1a6bf0
0x7f20819a0250: at: start: 9
0x7f20819a0250: at: done: 9: 1: 0x7f207c28e090
0x7f20819a0250: init: 280: 1
0x7f20819a0250: unlink: start: 280: 0x7f207c28cb70: 1: 0x7f207c28cb70
0x7f20819a0250: unlink: lock: 280: 0x7f207c28cb70: 1: 0
0x7f20819a0250: unlink: locked: 280: 0x7f207c28cb70: 0: 2147483648
0x7f20819a0250: close: 280: 0x7f207c28cb70
0x7f20819a0250: delete: 280: 2147483648
0x7f20819a0250: unlink: done: 280: 0x7f207c28cb70: 2147483648
0x7f20819a0250: unlink: start: 278: 0x7f207c1a6bf0: 1: 0x7f207c1a6bf0
0x7f20819a0250: unlink: lock: 278: 0x7f207c1a6bf0: 1: 0
0x7f20819a0250: unlink: locked: 278: 0x7f207c1a6bf0: 0: 2147483648
0x7f20819a0250: close: 278: 0x7f207c1a6bf0
0x7f20819a0250: delete: 278: 2147483648
0x7f20819a0250: unlink: done: 278: 0x7f207c1a6bf0: 2147483648
0x7f20819a0250: at: start: 130
0x7f20819a0250: lock: 130: 1
0x7f20819a0250: at: done: 130: 2: 0x55f4a4c68960
0x7f20819a0250: at: start: 272
0x7f20819a0250: lock: 272: 0
0x7f20819a0250: at: done: 272: 1: 0x7f207c28b870
0x7f20819a0250: at: start: 273
0x7f20819a0250: lock: 273: 0
0x7f20819a0250: at: done: 273: 1: 0x7f207c28cb70
0x7f20819a0250: unlink: start: 273: 0x7f207c28cb70: 1: 0x7f207c28cb70
0x7f20819a0250: unlink: lock: 273: 0x7f207c28cb70: 1: 0
0x7f20819a0250: unlink: locked: 273: 0x7f207c28cb70: 0: 2147483648
0x7f20819a0250: close: 273: 0x7f207c28cb70
0x7f20819a0250: delete: 273: 2147483648
0x7f20819a0250: unlink: done: 273: 0x7f207c28cb70: 2147483648
0x7f20819a0250: at: start: 274
0x7f20819a0250: lock: 274: 0
0x7f20819a0250: at: done: 274: 1: 0x7f207c28cb70
0x7f20819a0250: unlink: start: 274: 0x7f207c28cb70: 1: 0x7f207c28cb70
0x7f20819a0250: unlink: lock: 274: 0x7f207c28cb70: 1: 0
0x7f20819a0250: unlink: locked: 274: 0x7f207c28cb70: 0: 2147483648
0x7f20819a0250: close: 274: 0x7f207c28cb70
0x7f20819a0250: delete: 274: 2147483648
0x7f20819a0250: unlink: done: 274: 0x7f207c28cb70: 2147483648
0x7f20819a0250: at: start: 273
0x7f20819a0250: lock: 273: 0
0x7f20819a0250: at: done: 273: 1: 0x7f207c28cb70
0x7f20819a0250: unlink: start: 273: 0x7f207c28cb70: 1: 0x7f207c28cb70
0x7f20819a0250: unlink: lock: 273: 0x7f207c28cb70: 1: 0
0x7f20819a0250: unlink: locked: 273: 0x7f207c28cb70: 0: 2147483648
0x7f20819a0250: close: 273: 0x7f207c28cb70
0x7f20819a0250: delete: 273: 2147483648
0x7f20819a0250: unlink: done: 273: 0x7f207c28cb70: 2147483648
0x7f20819a0250: at: start: 274
0x7f20819a0250: lock: 274: 0
0x7f20819a0250: at: done: 274: 1: 0x7f207c28cb70
0x7f20819a0250: unlink: start: 274: 0x7f207c28cb70: 1: 0x7f207c28cb70
0x7f20819a0250: unlink: lock: 274: 0x7f207c28cb70: 1: 0
0x7f20819a0250: unlink: locked: 274: 0x7f207c28cb70: 0: 2147483648
0x7f20819a0250: close: 274: 0x7f207c28cb70
0x7f20819a0250: delete: 274: 2147483648
0x7f20819a0250: unlink: done: 274: 0x7f207c28cb70: 2147483648
0x7f20819a0250: at: start: 273
0x7f20819a0250: lock: 273: 0
0x7f20819a0250: at: done: 273: 1: 0x7f207c28cb70
0x7f20819a0250: unlink: start: 273: 0x7f207c28cb70: 1: 0x7f207c28cb70
0x7f20819a0250: unlink: lock: 273: 0x7f207c28cb70: 1: 0
0x7f20819a0250: unlink: locked: 273: 0x7f207c28cb70: 0: 2147483648
0x7f20819a0250: close: 273: 0x7f207c28cb70
0x7f20819a0250: delete: 273: 2147483648
0x7f20819a0250: unlink: done: 273: 0x7f207c28cb70: 2147483648
0x7f20819a0250: at: start: 274
0x7f20819a0250: lock: 274: 0
0x7f20819a0250: at: done: 274: 1: 0x7f207c28cb70
0x7f20819a0250: unlink: start: 274: 0x7f207c28cb70: 1: 0x7f207c28cb70
0x7f20819a0250: unlink: lock: 274: 0x7f207c28cb70: 1: 0
0x7f20819a0250: unlink: locked: 274: 0x7f207c28cb70: 0: 2147483648
0x7f20819a0250: close: 274: 0x7f207c28cb70
0x7f20819a0250: delete: 274: 2147483648
0x7f20819a0250: unlink: done: 274: 0x7f207c28cb70: 2147483648
0x7f20819a0250: unlink: start: 272: 0x7f207c28b870: 1: 0x7f207c28b870
0x7f20819a0250: unlink: lock: 272: 0x7f207c28b870: 1: 0
0x7f20819a0250: unlink: locked: 272: 0x7f207c28b870: 0: 2147483648
0x7f20819a0250: close: 272: 0x7f207c28b870
0x7f20819a0250: delete: 272: 2147483648
0x7f20819a0250: unlink: done: 272: 0x7f207c28b870: 2147483648
0x7f20819a0250: at: start: 130
0x7f20819a0250: lock: 130: 2
0x7f20819a0250: at: done: 130: 3: 0x55f4a4c68960
0x7f20819a0250: at: start: 275
0x7f20819a0250: lock: 275: 0
0x7f20819a0250: at: done: 275: 1: 0x7f207c28bca0
0x7f20819a0250: at: start: 276
0x7f20819a0250: lock: 276: 0
0x7f20819a0250: at: done: 276: 1: 0x7f207c28cb70
0x7f20819a0250: unlink: start: 276: 0x7f207c28cb70: 1: 0x7f207c28cb70
0x7f20819a0250: unlink: lock: 276: 0x7f207c28cb70: 1: 0
0x7f20819a0250: unlink: locked: 276: 0x7f207c28cb70: 0: 2147483648
0x7f20819a0250: close: 276: 0x7f207c28cb70
0x7f20819a0250: delete: 276: 2147483648
0x7f20819a0250: unlink: done: 276: 0x7f207c28cb70: 2147483648
0x7f20819a0250: at: start: 277
0x7f20819a0250: lock: 277: 0
0x7f20819a0250: at: done: 277: 1: 0x7f207c28cb70
0x7f20819a0250: unlink: start: 277: 0x7f207c28cb70: 1: 0x7f207c28cb70
0x7f20819a0250: unlink: lock: 277: 0x7f207c28cb70: 1: 0
0x7f20819a0250: unlink: locked: 277: 0x7f207c28cb70: 0: 2147483648
0x7f20819a0250: close: 277: 0x7f207c28cb70
0x7f20819a0250: delete: 277: 2147483648
0x7f20819a0250: unlink: done: 277: 0x7f207c28cb70: 2147483648
0x7f20819a0250: at: start: 276
0x7f20819a0250: lock: 276: 0
0x7f20819a0250: at: done: 276: 1: 0x7f207c28cb70
0x7f20819a0250: unlink: start: 276: 0x7f207c28cb70: 1: 0x7f207c28cb70
0x7f20819a0250: unlink: lock: 276: 0x7f207c28cb70: 1: 0
0x7f20819a0250: unlink: locked: 276: 0x7f207c28cb70: 0: 2147483648
0x7f20819a0250: close: 276: 0x7f207c28cb70
0x7f20819a0250: delete: 276: 2147483648
0x7f20819a0250: unlink: done: 276: 0x7f207c28cb70: 2147483648
0x7f20819a0250: at: start: 277
0x7f20819a0250: lock: 277: 0
0x7f20819a0250: at: done: 277: 1: 0x7f207c28cb70
0x7f20819a0250: unlink: start: 277: 0x7f207c28cb70: 1: 0x7f207c28cb70
0x7f20819a0250: unlink: lock: 277: 0x7f207c28cb70: 1: 0
0x7f20819a0250: unlink: locked: 277: 0x7f207c28cb70: 0: 2147483648
0x7f20819a0250: close: 277: 0x7f207c28cb70
0x7f20819a0250: delete: 277: 2147483648
0x7f20819a0250: unlink: done: 277: 0x7f207c28cb70: 2147483648
0x7f20819a0250: at: start: 276
0x7f20819a0250: lock: 276: 0
0x7f20819a0250: at: done: 276: 1: 0x7f207c28cb70
0x7f20819a0250: unlink: start: 276: 0x7f207c28cb70: 1: 0x7f207c28cb70
0x7f20819a0250: unlink: lock: 276: 0x7f207c28cb70: 1: 0
0x7f20819a0250: unlink: locked: 276: 0x7f207c28cb70: 0: 2147483648
0x7f20819a0250: close: 276: 0x7f207c28cb70
0x7f20819a0250: delete: 276: 2147483648
0x7f20819a0250: unlink: done: 276: 0x7f207c28cb70: 2147483648
0x7f20819a0250: at: start: 277
0x7f20819a0250: lock: 277: 0
0x7f20819a0250: at: done: 277: 1: 0x7f207c28cb70
0x7f20819a0250: unlink: start: 277: 0x7f207c28cb70: 1: 0x7f207c28cb70
0x7f20819a0250: unlink: lock: 277: 0x7f207c28cb70: 1: 0
0x7f20819a0250: unlink: locked: 277: 0x7f207c28cb70: 0: 2147483648
0x7f20819a0250: close: 277: 0x7f207c28cb70
0x7f20819a0250: delete: 277: 2147483648
0x7f20819a0250: unlink: done: 277: 0x7f207c28cb70: 2147483648
0x7f20819a0250: unlink: start: 275: 0x7f207c28bca0: 1: 0x7f207c28bca0
0x7f20819a0250: unlink: lock: 275: 0x7f207c28bca0: 1: 0
0x7f20819a0250: unlink: locked: 275: 0x7f207c28bca0: 0: 2147483648
0x7f20819a0250: close: 275: 0x7f207c28bca0
0x7f20819a0250: delete: 275: 2147483648
0x7f20819a0250: unlink: done: 275: 0x7f207c28bca0: 2147483648
0x7f20819a0250: at: start: 130
0x7f20819a0250: lock: 130: 3
0x7f20819a0250: at: done: 130: 4: 0x55f4a4c68960
0x7f20819a0250: at: start: 278
0x7f20819a0250: lock: 278: 0
0x7f20819a0250: at: done: 278: 1: 0x7f207c28d150
0x7f20819a0250: at: start: 279
0x7f20819a0250: lock: 279: 0
0x7f20819a0250: at: done: 279: 1: 0x7f207c28cb70
0x7f20819a0250: unlink: start: 279: 0x7f207c28cb70: 1: 0x7f207c28cb70
0x7f20819a0250: unlink: lock: 279: 0x7f207c28cb70: 1: 0
0x7f20819a0250: unlink: locked: 279: 0x7f207c28cb70: 0: 2147483648
0x7f20819a0250: close: 279: 0x7f207c28cb70
0x7f20819a0250: delete: 279: 2147483648
0x7f20819a0250: unlink: done: 279: 0x7f207c28cb70: 2147483648
0x7f20819a0250: at: start: 280
0x7f20819a0250: lock: 280: 0
0x7f20819a0250: at: done: 280: 1: 0x7f207c28cb70
0x7f20819a0250: unlink: start: 280: 0x7f207c28cb70: 1: 0x7f207c28cb70
0x7f20819a0250: unlink: lock: 280: 0x7f207c28cb70: 1: 0
0x7f20819a0250: unlink: locked: 280: 0x7f207c28cb70: 0: 2147483648
0x7f20819a0250: close: 280: 0x7f207c28cb70
0x7f20819a0250: delete: 280: 2147483648
0x7f20819a0250: unlink: done: 280: 0x7f207c28cb70: 2147483648
0x7f20819a0250: at: start: 279
0x7f20819a0250: lock: 279: 0
0x7f20819a0250: at: done: 279: 1: 0x7f207c28cb70
0x7f20819a0250: unlink: start: 279: 0x7f207c28cb70: 1: 0x7f207c28cb70
0x7f20819a0250: unlink: lock: 279: 0x7f207c28cb70: 1: 0
0x7f20819a0250: unlink: locked: 279: 0x7f207c28cb70: 0: 2147483648
0x7f20819a0250: close: 279: 0x7f207c28cb70
0x7f20819a0250: delete: 279: 2147483648
0x7f20819a0250: unlink: done: 279: 0x7f207c28cb70: 2147483648
0x7f20819a0250: at: start: 280
0x7f20819a0250: lock: 280: 0
0x7f20819a0250: at: done: 280: 1: 0x7f207c28cb70
0x7f20819a0250: unlink: start: 280: 0x7f207c28cb70: 1: 0x7f207c28cb70
0x7f20819a0250: unlink: lock: 280: 0x7f207c28cb70: 1: 0
0x7f20819a0250: unlink: locked: 280: 0x7f207c28cb70: 0: 2147483648
0x7f20819a0250: close: 280: 0x7f207c28cb70
0x7f20819a0250: delete: 280: 2147483648
0x7f20819a0250: unlink: done: 280: 0x7f207c28cb70: 2147483648
0x7f20819a0250: at: start: 279
0x7f20819a0250: lock: 279: 0
0x7f20819a0250: at: done: 279: 1: 0x7f207c28cb70
0x7f20819a0250: unlink: start: 279: 0x7f207c28cb70: 1: 0x7f207c28cb70
0x7f20819a0250: unlink: lock: 279: 0x7f207c28cb70: 1: 0
0x7f20819a0250: unlink: locked: 279: 0x7f207c28cb70: 0: 2147483648
0x7f20819a0250: close: 279: 0x7f207c28cb70
0x7f20819a0250: delete: 279: 2147483648
0x7f20819a0250: unlink: done: 279: 0x7f207c28cb70: 2147483648
0x7f20819a0250: at: start: 280
0x7f20819a0250: lock: 280: 0
0x7f20819a0250: at: done: 280: 1: 0x7f207c28cb70
0x7f20819a0250: unlink: start: 280: 0x7f207c28cb70: 1: 0x7f207c28cb70
0x7f20819a0250: unlink: lock: 280: 0x7f207c28cb70: 1: 0
0x7f20819a0250: unlink: locked: 280: 0x7f207c28cb70: 0: 2147483648
0x7f20819a0250: close: 280: 0x7f207c28cb70
0x7f20819a0250: delete: 280: 2147483648
0x7f20819a0250: unlink: done: 280: 0x7f207c28cb70: 2147483648
0x7f20819a0250: unlink: start: 278: 0x7f207c28d150: 1: 0x7f207c28d150
0x7f20819a0250: unlink: lock: 278: 0x7f207c28d150: 1: 0
0x7f20819a0250: unlink: locked: 278: 0x7f207c28d150: 0: 2147483648
0x7f20819a0250: close: 278: 0x7f207c28d150
0x7f20819a0250: delete: 278: 2147483648
0x7f20819a0250: unlink: done: 278: 0x7f207c28d150: 2147483648
0x7f20819a0250: at: start: 146
0x7f20819a0250: lock: 146: 1
0x7f20819a0250: at: done: 146: 2: 0x55f4a4d14c70
0x7f20819a0250: at: start: 257
0x7f20819a0250: lock: 257: 1
0x7f20819a0250: at: done: 257: 2: 0x7f207c1fe310
0x7f20819a0250: delete: 2147483649
0x7f20819a0250: at: start: 13
0x7f20819a0250: at: done: 13: 1: 0x7f207c28e510
0x7f20819a0250: at: start: 9
0x7f20819a0250: at: done: 9: 1: 0x7f207c28e090
0x7f20819a0250: delete: 2147483649
0x7f20819a0250: at: start: 13
0x7f20819a0250: at: done: 13: 1: 0x7f207c28e510
0x7f20819a0250: at: start: 9
0x7f20819a0250: at: done: 9: 1: 0x7f207c28e090
0x7f20819a0250: at: start: 273
0x7f20819a0250: lock: 273: 0
0x7f20819a0250: at: done: 273: 1: 0x7f207c1c0de0
0x7f20819a0250: at: start: 272
0x7f20819a0250: lock: 272: 0
0x7f20819a0250: at: done: 272: 1: 0x7f207c254c40
0x7f20819a0250: at: start: 276
0x7f20819a0250: lock: 276: 0
0x7f20819a0250: at: done: 276: 1: 0x7f207c286330
0x7f20819a0250: at: start: 275
0x7f20819a0250: lock: 275: 0
0x7f20819a0250: at: done: 275: 1: 0x7f207c278710
0x7f20819a0250: delete: 2147483652
0x7f20819a0250: close: 2147483650: 0x7f207c276b50
0x7f20819a0250: delete: 2147483650
0x7f20819a0250: delete: 2147483653
0x7f20819a0250: close: 2147483650: 0x7f207c27dc00
0x7f20819a0250: delete: 2147483650
0x7f20819a0250: accessor: 0x7f207c285730: 1
0x7f20819a0250: at: start: 3
0x7f20819a0250: at: done: 2147483651: 2
0x7f20819a0250: at: start: 272
0x7f20819a0250: lock: 272: 1
0x7f20819a0250: at: done: 272: 2: 0x7f207c254c40
0x7f20819a0250: unlink: start: 272: 0x7f207c254c40: 2: 0x7f207c254c40
0x7f20819a0250: unlink: done: 272: 0x7f207c254c40: 1
0x7f20819a0250: unlink: start: 2147483651: 0x7f207c2709f0: 2
0x7f20819a0250: unlink: done: 2147483651: 0x7f207c2709f0: 1
0x7f20819a0250: at: start: 3
0x7f20819a0250: at: done: 2147483651: 2
0x7f20819a0250: accessor: 0x7f207c1a7740: 1
0x7f20819a0250: at: start: 3
0x7f20819a0250: at: done: 2147483651: 3
0x7f20819a0250: at: start: 272
0x7f20819a0250: lock: 272: 1
0x7f20819a0250: at: done: 272: 2: 0x7f207c254c40
0x7f20819a0250: unlink: start: 272: 0x7f207c254c40: 2: 0x7f207c254c40
0x7f20819a0250: unlink: done: 272: 0x7f207c254c40: 1
0x7f20819a0250: unlink: start: 2147483651: 0x7f207c2709f0: 3
0x7f20819a0250: unlink: done: 2147483651: 0x7f207c2709f0: 2
0x7f20819a0250: at: start: 267
0x7f20819a0250: lock: 267: 1
0x7f20819a0250: at: done: 267: 2: 0x7f207c2353c0
0x7f20819a0250: expr_take_obj: 0x7f207c2353c0
0x7f20819a0250: accessor: 0x7f207c2340a0: 1
0x7f20819a0250: at: start: 3
0x7f20819a0250: at: done: 2147483651: 3
0x7f20819a0250: at: start: 272
0x7f20819a0250: lock: 272: 1
0x7f20819a0250: at: done: 272: 2: 0x7f207c254c40
0x7f20819a0250: at: start: 273
0x7f20819a0250: lock: 273: 1
0x7f20819a0250: at: done: 273: 2: 0x7f207c1c0de0
0x7f20819a0250: accessor: 0x7f207c2340e0: 1
0x7f20819a0250: unlink: start: 272: 0x7f207c254c40: 2: 0x7f207c254c40
0x7f20819a0250: unlink: done: 272: 0x7f207c254c40: 1
0x7f20819a0250: expr_take_obj: 0x7f207c2340a0
0x7f20819a0250: unlink: start: 2147483651: 0x7f207c2709f0: 3
0x7f20819a0250: unlink: done: 2147483651: 0x7f207c2709f0: 2
0x7f20819a0250: delete: 2147483653
0x7f20819a0250: close: 2147483650: 0x7f207c1a7400
0x7f20819a0250: delete: 2147483650
0x7f20819a0250: expr_close: obj: 0x7f207c2340a0
0x7f20819a0250: unlink: start: accessor: 0x7f207c2340a0: 1
0x7f20819a0250: unlink: start: 2147483651: 0x7f207c2709f0: 2
0x7f20819a0250: unlink: done: 2147483651: 0x7f207c2709f0: 1
0x7f20819a0250: unlink: start: 273: 0x7f207c1c0de0: 2: 0x7f207c1c0de0
0x7f20819a0250: unlink: done: 273: 0x7f207c1c0de0: 1
0x7f20819a0250: unlink: done: accessor: 0x7f207c2340a0: 0
0x7f20819a0250: expr_close: obj: 0x7f207c2353c0
0x7f20819a0250: unlink: start: 267: 0x7f207c2353c0: 2: 0x7f207c2353c0
0x7f20819a0250: unlink: done: 267: 0x7f207c2353c0: 1
0x7f20819a0250: accessor: 0x7f207c234180: 1
0x7f20819a0250: at: start: 4
0x7f20819a0250: at: done: 2147483652: 2
0x7f20819a0250: at: start: 275
0x7f20819a0250: lock: 275: 1
0x7f20819a0250: at: done: 275: 2: 0x7f207c278710
0x7f20819a0250: unlink: start: 275: 0x7f207c278710: 2: 0x7f207c278710
0x7f20819a0250: unlink: done: 275: 0x7f207c278710: 1
0x7f20819a0250: unlink: start: 2147483652: 0x7f207c1a7000: 2
0x7f20819a0250: unlink: done: 2147483652: 0x7f207c1a7000: 1
0x7f20819a0250: at: start: 4
0x7f20819a0250: at: done: 2147483652: 2
0x7f20819a0250: accessor: 0x7f207c274c50: 1
0x7f20819a0250: at: start: 4
0x7f20819a0250: at: done: 2147483652: 3
0x7f20819a0250: at: start: 275
0x7f20819a0250: lock: 275: 1
0x7f20819a0250: at: done: 275: 2: 0x7f207c278710
0x7f20819a0250: unlink: start: 275: 0x7f207c278710: 2: 0x7f207c278710
0x7f20819a0250: unlink: done: 275: 0x7f207c278710: 1
0x7f20819a0250: unlink: start: 2147483652: 0x7f207c1a7000: 3
0x7f20819a0250: unlink: done: 2147483652: 0x7f207c1a7000: 2
0x7f20819a0250: at: start: 267
0x7f20819a0250: lock: 267: 1
0x7f20819a0250: at: done: 267: 2: 0x7f207c2353c0
0x7f20819a0250: expr_take_obj: 0x7f207c2353c0
0x7f20819a0250: accessor: 0x7f207c274c90: 1
0x7f20819a0250: at: start: 4
0x7f20819a0250: at: done: 2147483652: 3
0x7f20819a0250: at: start: 275
0x7f20819a0250: lock: 275: 1
0x7f20819a0250: at: done: 275: 2: 0x7f207c278710
0x7f20819a0250: at: start: 276
0x7f20819a0250: lock: 276: 1
0x7f20819a0250: at: done: 276: 2: 0x7f207c286330
0x7f20819a0250: accessor: 0x7f207c27cdf0: 1
0x7f20819a0250: unlink: start: 275: 0x7f207c278710: 2: 0x7f207c278710
0x7f20819a0250: unlink: done: 275: 0x7f207c278710: 1
0x7f20819a0250: expr_take_obj: 0x7f207c274c90
0x7f20819a0250: unlink: start: 2147483652: 0x7f207c1a7000: 3
0x7f20819a0250: unlink: done: 2147483652: 0x7f207c1a7000: 2
0x7f20819a0250: delete: 2147483653
0x7f20819a0250: close: 2147483650: 0x7f207c2749b0
0x7f20819a0250: delete: 2147483650
0x7f20819a0250: expr_close: obj: 0x7f207c274c90
0x7f20819a0250: unlink: start: accessor: 0x7f207c274c90: 1
0x7f20819a0250: unlink: start: 2147483652: 0x7f207c1a7000: 2
0x7f20819a0250: unlink: done: 2147483652: 0x7f207c1a7000: 1
0x7f20819a0250: unlink: start: 276: 0x7f207c286330: 2: 0x7f207c286330
0x7f20819a0250: unlink: done: 276: 0x7f207c286330: 1
0x7f20819a0250: unlink: done: accessor: 0x7f207c274c90: 0
0x7f20819a0250: expr_close: obj: 0x7f207c2353c0
0x7f20819a0250: unlink: start: 267: 0x7f207c2353c0: 2: 0x7f207c2353c0
0x7f20819a0250: unlink: done: 267: 0x7f207c2353c0: 1
0x7f20819a0250: at: start: 3
0x7f20819a0250: at: done: 2147483651: 2
0x7f20819a0250: accessor: 0x7f207c27d190: 1
0x7f20819a0250: at: start: 3
0x7f20819a0250: at: done: 2147483651: 3
0x7f20819a0250: at: start: 272
0x7f20819a0250: lock: 272: 1
0x7f20819a0250: at: done: 272: 2: 0x7f207c254c40
0x7f20819a0250: at: start: 274
0x7f20819a0250: lock: 274: 0
0x7f20819a0250: at: done: 274: 1: 0x7f207c283ae0
0x7f20819a0250: accessor: 0x7f207c283ba0: 1
0x7f20819a0250: unlink: start: 272: 0x7f207c254c40: 2: 0x7f207c254c40
0x7f20819a0250: unlink: done: 272: 0x7f207c254c40: 1
0x7f20819a0250: expr_take_obj: 0x7f207c27d190
0x7f20819a0250: unlink: start: 2147483651: 0x7f207c2709f0: 3
0x7f20819a0250: unlink: done: 2147483651: 0x7f207c2709f0: 2
0x7f20819a0250: delete: 2147483654
0x7f20819a0250: at: start: 272
0x7f20819a0250: lock: 272: 1
0x7f20819a0250: at: done: 272: 2: 0x7f207c254c40
0x7f20819a0250: unlink: start: 272: 0x7f207c254c40: 2: 0x7f207c254c40
0x7f20819a0250: unlink: done: 272: 0x7f207c254c40: 1
0x7f20819a0250: close: 2147483650: 0x7f207c27ce60
0x7f20819a0250: delete: 2147483650
0x7f20819a0250: expr_close: obj: 0x7f207c27d190
0x7f20819a0250: unlink: start: accessor: 0x7f207c27d190: 1
0x7f20819a0250: unlink: start: 2147483651: 0x7f207c2709f0: 2
0x7f20819a0250: unlink: done: 2147483651: 0x7f207c2709f0: 1
0x7f20819a0250: unlink: start: 274: 0x7f207c283ae0: 1: 0x7f207c283ae0
0x7f20819a0250: unlink: lock: 274: 0x7f207c283ae0: 1: 0
0x7f20819a0250: unlink: locked: 274: 0x7f207c283ae0: 0: 2147483648
0x7f20819a0250: close: 274: 0x7f207c283ae0
0x7f20819a0250: delete: 274: 2147483648
0x7f20819a0250: unlink: done: 274: 0x7f207c283ae0: 2147483648
0x7f20819a0250: unlink: done: accessor: 0x7f207c27d190: 0
0x7f20819a0250: at: start: 4
0x7f20819a0250: at: done: 2147483652: 2
0x7f20819a0250: accessor: 0x7f207c237590: 1
0x7f20819a0250: at: start: 4
0x7f20819a0250: at: done: 2147483652: 3
0x7f20819a0250: at: start: 275
0x7f20819a0250: lock: 275: 1
0x7f20819a0250: at: done: 275: 2: 0x7f207c278710
0x7f20819a0250: at: start: 277
0x7f20819a0250: lock: 277: 0
0x7f20819a0250: at: done: 277: 1: 0x7f207c2375d0
0x7f20819a0250: accessor: 0x7f207c236e80: 1
0x7f20819a0250: unlink: start: 275: 0x7f207c278710: 2: 0x7f207c278710
0x7f20819a0250: unlink: done: 275: 0x7f207c278710: 1
0x7f20819a0250: expr_take_obj: 0x7f207c237590
0x7f20819a0250: unlink: start: 2147483652: 0x7f207c1a7000: 3
0x7f20819a0250: unlink: done: 2147483652: 0x7f207c1a7000: 2
0x7f20819a0250: delete: 2147483655
0x7f20819a0250: at: start: 275
0x7f20819a0250: lock: 275: 1
0x7f20819a0250: at: done: 275: 2: 0x7f207c278710
0x7f20819a0250: unlink: start: 275: 0x7f207c278710: 2: 0x7f207c278710
0x7f20819a0250: unlink: done: 275: 0x7f207c278710: 1
0x7f20819a0250: close: 2147483650: 0x7f207c236bb0
0x7f20819a0250: delete: 2147483650
0x7f20819a0250: expr_close: obj: 0x7f207c237590
0x7f20819a0250: unlink: start: accessor: 0x7f207c237590: 1
0x7f20819a0250: unlink: start: 2147483652: 0x7f207c1a7000: 2
0x7f20819a0250: unlink: done: 2147483652: 0x7f207c1a7000: 1
0x7f20819a0250: unlink: start: 277: 0x7f207c2375d0: 1: 0x7f207c2375d0
0x7f20819a0250: unlink: lock: 277: 0x7f207c2375d0: 1: 0
0x7f20819a0250: unlink: locked: 277: 0x7f207c2375d0: 0: 2147483648
0x7f20819a0250: close: 277: 0x7f207c2375d0
0x7f20819a0250: delete: 277: 2147483648
0x7f20819a0250: unlink: done: 277: 0x7f207c2375d0: 2147483648
0x7f20819a0250: unlink: done: accessor: 0x7f207c237590: 0
0x7f20819a0250: accessor: 0x7f207c277ec0: 1
0x7f20819a0250: at: start: 5
0x7f20819a0250: at: done: 2147483653: 2
0x7f20819a0250: at: start: 3
0x7f20819a0250: at: done: 2147483651: 2
0x7f20819a0250: accessor: 0x7f207c277f00: 1
0x7f20819a0250: at: start: 272
0x7f20819a0250: lock: 272: 1
0x7f20819a0250: at: done: 272: 2: 0x7f207c254c40
0x7f20819a0250: unlink: start: 272: 0x7f207c254c40: 2: 0x7f207c254c40
0x7f20819a0250: unlink: done: 272: 0x7f207c254c40: 1
0x7f20819a0250: unlink: start: 2147483653: 0x7f207c2568a0: 2
0x7f20819a0250: unlink: done: 2147483653: 0x7f207c2568a0: 1
0x7f20819a0250: unlink: start: 2147483651: 0x7f207c2709f0: 2
0x7f20819a0250: unlink: done: 2147483651: 0x7f207c2709f0: 1
0x7f20819a0250: accessor: 0x7f207c2719e0: 1
0x7f20819a0250: at: start: 6
0x7f20819a0250: at: done: 2147483654: 2
0x7f20819a0250: at: start: 4
0x7f20819a0250: at: done: 2147483652: 2
0x7f20819a0250: accessor: 0x7f207c271a20: 1
0x7f20819a0250: at: start: 275
0x7f20819a0250: lock: 275: 1
0x7f20819a0250: at: done: 275: 2: 0x7f207c278710
0x7f20819a0250: unlink: start: 275: 0x7f207c278710: 2: 0x7f207c278710
0x7f20819a0250: unlink: done: 275: 0x7f207c278710: 1
0x7f20819a0250: unlink: start: 2147483654: 0x7f207c256ca0: 2
0x7f20819a0250: unlink: done: 2147483654: 0x7f207c256ca0: 1
0x7f20819a0250: unlink: start: 2147483652: 0x7f207c1a7000: 2
0x7f20819a0250: unlink: done: 2147483652: 0x7f207c1a7000: 1
0x7f20819a0250: at: start: 5
0x7f20819a0250: at: done: 2147483653: 2
0x7f20819a0250: accessor: 0x7f207c271b20: 1
0x7f20819a0250: at: start: 5
0x7f20819a0250: at: done: 2147483653: 3
0x7f20819a0250: at: start: 3
0x7f20819a0250: at: done: 2147483651: 2
0x7f20819a0250: accessor: 0x7f207c2369d0: 1
0x7f20819a0250: at: start: 272
0x7f20819a0250: lock: 272: 1
0x7f20819a0250: at: done: 272: 2: 0x7f207c254c40
0x7f20819a0250: unlink: start: 272: 0x7f207c254c40: 2: 0x7f207c254c40
0x7f20819a0250: unlink: done: 272: 0x7f207c254c40: 1
0x7f20819a0250: unlink: start: 2147483653: 0x7f207c2568a0: 3
0x7f20819a0250: unlink: done: 2147483653: 0x7f207c2568a0: 2
0x7f20819a0250: unlink: start: 2147483651: 0x7f207c2709f0: 2
0x7f20819a0250: unlink: done: 2147483651: 0x7f207c2709f0: 1
0x7f20819a0250: at: start: 221
0x7f20819a0250: lock: 221: 1
0x7f20819a0250: at: done: 221: 2: 0x55f4a4ef73d0
0x7f20819a0250: expr_take_obj: 0x55f4a4ef73d0
0x7f20819a0250: accessor: 0x7f207c236a10: 1
0x7f20819a0250: at: start: 5
0x7f20819a0250: at: done: 2147483653: 3
0x7f20819a0250: at: start: 3
0x7f20819a0250: at: done: 2147483651: 2
0x7f20819a0250: accessor: 0x7f207c236a50: 1
0x7f20819a0250: at: start: 272
0x7f20819a0250: lock: 272: 1
0x7f20819a0250: at: done: 272: 2: 0x7f207c254c40
0x7f20819a0250: at: start: 274
0x7f20819a0250: lock: 274: 0
0x7f20819a0250: at: done: 274: 1: 0x7f207c12ea30
0x7f20819a0250: accessor: 0x7f207c12eaf0: 1
0x7f20819a0250: unlink: start: 272: 0x7f207c254c40: 2: 0x7f207c254c40
0x7f20819a0250: unlink: done: 272: 0x7f207c254c40: 1
0x7f20819a0250: expr_take_obj: 0x7f207c236a10
0x7f20819a0250: unlink: start: 2147483653: 0x7f207c2568a0: 3
0x7f20819a0250: unlink: done: 2147483653: 0x7f207c2568a0: 2
0x7f20819a0250: at: start: 6
0x7f20819a0250: at: done: 2147483654: 2
0x7f20819a0250: accessor: 0x7f207c12da30: 1
0x7f20819a0250: at: start: 6
0x7f20819a0250: at: done: 2147483654: 3
0x7f20819a0250: at: start: 4
0x7f20819a0250: at: done: 2147483652: 2
0x7f20819a0250: accessor: 0x7f207c12da70: 1
0x7f20819a0250: at: start: 275
0x7f20819a0250: lock: 275: 1
0x7f20819a0250: at: done: 275: 2: 0x7f207c278710
0x7f20819a0250: unlink: start: 275: 0x7f207c278710: 2: 0x7f207c278710
0x7f20819a0250: unlink: done: 275: 0x7f207c278710: 1
0x7f20819a0250: unlink: start: 2147483654: 0x7f207c256ca0: 3
0x7f20819a0250: unlink: done: 2147483654: 0x7f207c256ca0: 2
0x7f20819a0250: unlink: start: 2147483652: 0x7f207c1a7000: 2
0x7f20819a0250: unlink: done: 2147483652: 0x7f207c1a7000: 1
0x7f20819a0250: at: start: 221
0x7f20819a0250: lock: 221: 2
0x7f20819a0250: at: done: 221: 3: 0x55f4a4ef73d0
0x7f20819a0250: expr_take_obj: 0x55f4a4ef73d0
0x7f20819a0250: accessor: 0x7f207c12da70: 1
0x7f20819a0250: at: start: 6
0x7f20819a0250: at: done: 2147483654: 3
0x7f20819a0250: at: start: 4
0x7f20819a0250: at: done: 2147483652: 2
0x7f20819a0250: accessor: 0x7f207c12dab0: 1
0x7f20819a0250: at: start: 275
0x7f20819a0250: lock: 275: 1
0x7f20819a0250: at: done: 275: 2: 0x7f207c278710
0x7f20819a0250: at: start: 277
0x7f20819a0250: lock: 277: 0
0x7f20819a0250: at: done: 277: 1: 0x7f207c12db40
0x7f20819a0250: accessor: 0x7f207c12dc00: 1
0x7f20819a0250: unlink: start: 275: 0x7f207c278710: 2: 0x7f207c278710
0x7f20819a0250: unlink: done: 275: 0x7f207c278710: 1
0x7f20819a0250: expr_take_obj: 0x7f207c12da70
0x7f20819a0250: unlink: start: 2147483654: 0x7f207c256ca0: 3
0x7f20819a0250: unlink: done: 2147483654: 0x7f207c256ca0: 2
0x7f20819a0250: delete: 2147483656
0x7f20819a0250: accessor: 0x7f207c12dd30: 1
0x7f20819a0250: at: start: 5
0x7f20819a0250: at: done: 2147483653: 3
0x7f20819a0250: at: start: 3
0x7f20819a0250: at: done: 2147483651: 3
0x7f20819a0250: accessor: 0x7f207c12f620: 1
0x7f20819a0250: unlink: start: 2147483651: 0x7f207c2709f0: 3
0x7f20819a0250: unlink: done: 2147483651: 0x7f207c2709f0: 2
0x7f20819a0250: delete: 2147483656
0x7f20819a0250: unlink: start: accessor: 0x7f207c12dd30: 1
0x7f20819a0250: unlink: start: 2147483653: 0x7f207c2568a0: 3
0x7f20819a0250: unlink: done: 2147483653: 0x7f207c2568a0: 2
0x7f20819a0250: unlink: start: 3221225473: 0x7f207c285770: 3
0x7f20819a0250: unlink: done: 3221225473: 0x7f207c285770: 2
0x7f20819a0250: unlink: done: accessor: 0x7f207c12dd30: 0
0x7f20819a0250: delete: 2147483656
0x7f20819a0250: accessor: 0x7f207c12f6a0: 1
0x7f20819a0250: at: start: 6
0x7f20819a0250: at: done: 2147483654: 3
0x7f20819a0250: at: start: 4
0x7f20819a0250: at: done: 2147483652: 3
0x7f20819a0250: accessor: 0x7f207c12f830: 1
0x7f20819a0250: unlink: start: 2147483652: 0x7f207c1a7000: 3
0x7f20819a0250: unlink: done: 2147483652: 0x7f207c1a7000: 2
0x7f20819a0250: delete: 2147483656
0x7f20819a0250: unlink: start: accessor: 0x7f207c12f6a0: 1
0x7f20819a0250: unlink: start: 2147483654: 0x7f207c256ca0: 3
0x7f20819a0250: unlink: done: 2147483654: 0x7f207c256ca0: 2
0x7f20819a0250: unlink: start: 3221225474: 0x7f207c2748f0: 3
0x7f20819a0250: unlink: done: 3221225474: 0x7f207c2748f0: 2
0x7f20819a0250: unlink: done: accessor: 0x7f207c12f6a0: 0
0x7f20819a0250: close: 2147483650: 0x7f207c2366b0
0x7f20819a0250: delete: 2147483650
0x7f20819a0250: expr_close: obj: 0x7f207c236a10
0x7f20819a0250: unlink: start: accessor: 0x7f207c236a10: 1
0x7f20819a0250: unlink: start: 2147483653: 0x7f207c2568a0: 2
0x7f20819a0250: unlink: done: 2147483653: 0x7f207c2568a0: 1
0x7f20819a0250: unlink: start: 2147483651: 0x7f207c2709f0: 2
0x7f20819a0250: unlink: done: 2147483651: 0x7f207c2709f0: 1
0x7f20819a0250: unlink: start: 274: 0x7f207c12ea30: 1: 0x7f207c12ea30
0x7f20819a0250: unlink: lock: 274: 0x7f207c12ea30: 1: 0
0x7f20819a0250: unlink: locked: 274: 0x7f207c12ea30: 0: 2147483648
0x7f20819a0250: close: 274: 0x7f207c12ea30
0x7f20819a0250: delete: 274: 2147483648
0x7f20819a0250: unlink: done: 274: 0x7f207c12ea30: 2147483648
0x7f20819a0250: unlink: done: accessor: 0x7f207c236a10: 0
0x7f20819a0250: expr_close: obj: 0x55f4a4ef73d0
0x7f20819a0250: unlink: start: 221: 0x55f4a4ef73d0: 3: 0x55f4a4ef73d0
0x7f20819a0250: unlink: done: 221: 0x55f4a4ef73d0: 2
0x7f20819a0250: close: 2147483655: 0x7f207c12eb30
0x7f20819a0250: delete: 2147483655
0x7f20819a0250: expr_close: obj: 0x7f207c12da70
0x7f20819a0250: unlink: start: accessor: 0x7f207c12da70: 1
0x7f20819a0250: unlink: start: 2147483654: 0x7f207c256ca0: 2
0x7f20819a0250: unlink: done: 2147483654: 0x7f207c256ca0: 1
0x7f20819a0250: unlink: start: 2147483652: 0x7f207c1a7000: 2
0x7f20819a0250: unlink: done: 2147483652: 0x7f207c1a7000: 1
0x7f20819a0250: unlink: start: 277: 0x7f207c12db40: 1: 0x7f207c12db40
0x7f20819a0250: unlink: lock: 277: 0x7f207c12db40: 1: 0
0x7f20819a0250: unlink: locked: 277: 0x7f207c12db40: 0: 2147483648
0x7f20819a0250: close: 277: 0x7f207c12db40
0x7f20819a0250: delete: 277: 2147483648
0x7f20819a0250: unlink: done: 277: 0x7f207c12db40: 2147483648
0x7f20819a0250: unlink: done: accessor: 0x7f207c12da70: 0
0x7f20819a0250: expr_close: obj: 0x55f4a4ef73d0
0x7f20819a0250: unlink: start: 221: 0x55f4a4ef73d0: 2: 0x55f4a4ef73d0
0x7f20819a0250: unlink: done: 221: 0x55f4a4ef73d0: 1
0x7f20819a0250: at: start: 5
0x7f20819a0250: at: done: 2147483653: 2
0x7f20819a0250: expr_take_obj: 0x7f207c277f40
0x7f20819a0250: unlink: start: 2147483653: 0x7f207c2568a0: 2
0x7f20819a0250: unlink: done: 2147483653: 0x7f207c2568a0: 1
0x7f20819a0250: delete: 2147483656
0x7f20819a0250: close: 2147483655: 0x7f207c12eaf0
0x7f20819a0250: delete: 2147483655
0x7f20819a0250: expr_close: obj: 0x7f207c277f40
0x7f20819a0250: unlink: start: 3221225475: 0x7f207c277f40: 3
0x7f20819a0250: unlink: done: 3221225475: 0x7f207c277f40: 2
0x7f20819a0250: unlink: start: 272: 0x7f207c254c40: 1: 0x7f207c254c40
0x7f20819a0250: unlink: lock: 272: 0x7f207c254c40: 1: 0
0x7f20819a0250: unlink: locked: 272: 0x7f207c254c40: 0: 2147483648
0x7f20819a0250: close: 272: 0x7f207c254c40
0x7f20819a0250: delete: 272: 2147483648
0x7f20819a0250: unlink: done: 272: 0x7f207c254c40: 2147483648
0x7f20819a0250: unlink: start: 273: 0x7f207c1c0de0: 1: 0x7f207c1c0de0
0x7f20819a0250: unlink: lock: 273: 0x7f207c1c0de0: 1: 0
0x7f20819a0250: unlink: locked: 273: 0x7f207c1c0de0: 0: 2147483648
0x7f20819a0250: close: 273: 0x7f207c1c0de0
0x7f20819a0250: delete: 273: 2147483648
0x7f20819a0250: unlink: done: 273: 0x7f207c1c0de0: 2147483648
0x7f20819a0250: delete: 2147483649
0x7f20819a0250: at: start: 279
0x7f20819a0250: lock: 279: 0
0x7f20819a0250: at: done: 279: 1: 0x7f207c12ebe0
0x7f20819a0250: at: start: 278
0x7f20819a0250: lock: 278: 0
0x7f20819a0250: at: done: 278: 1: 0x7f207c254c40
0x7f20819a0250: delete: 2147483656
0x7f20819a0250: close: 2147483649: 0x7f207c255040
0x7f20819a0250: delete: 2147483649
0x7f20819a0250: accessor: 0x7f207c280710: 1
0x7f20819a0250: at: start: 7
0x7f20819a0250: at: done: 2147483655: 2
0x7f20819a0250: at: start: 278
0x7f20819a0250: lock: 278: 1
0x7f20819a0250: at: done: 278: 2: 0x7f207c254c40
0x7f20819a0250: unlink: start: 278: 0x7f207c254c40: 2: 0x7f207c254c40
0x7f20819a0250: unlink: done: 278: 0x7f207c254c40: 1
0x7f20819a0250: unlink: start: 2147483655: 0x7f207c3814a0: 2
0x7f20819a0250: unlink: done: 2147483655: 0x7f207c3814a0: 1
0x7f20819a0250: at: start: 7
0x7f20819a0250: at: done: 2147483655: 2
0x7f20819a0250: accessor: 0x7f207c1e30d0: 1
0x7f20819a0250: at: start: 7
0x7f20819a0250: at: done: 2147483655: 3
0x7f20819a0250: at: start: 278
0x7f20819a0250: lock: 278: 1
0x7f20819a0250: at: done: 278: 2: 0x7f207c254c40
0x7f20819a0250: unlink: start: 278: 0x7f207c254c40: 2: 0x7f207c254c40
0x7f20819a0250: unlink: done: 278: 0x7f207c254c40: 1
0x7f20819a0250: unlink: start: 2147483655: 0x7f207c3814a0: 3
0x7f20819a0250: unlink: done: 2147483655: 0x7f207c3814a0: 2
0x7f20819a0250: at: start: 267
0x7f20819a0250: lock: 267: 1
0x7f20819a0250: at: done: 267: 2: 0x7f207c2353c0
0x7f20819a0250: expr_take_obj: 0x7f207c2353c0
0x7f20819a0250: accessor: 0x7f207c1e30d0: 1
0x7f20819a0250: at: start: 7
0x7f20819a0250: at: done: 2147483655: 3
0x7f20819a0250: at: start: 278
0x7f20819a0250: lock: 278: 1
0x7f20819a0250: at: done: 278: 2: 0x7f207c254c40
0x7f20819a0250: at: start: 279
0x7f20819a0250: lock: 279: 1
0x7f20819a0250: at: done: 279: 2: 0x7f207c12ebe0
0x7f20819a0250: accessor: 0x7f207c23ced0: 1
0x7f20819a0250: unlink: start: 278: 0x7f207c254c40: 2: 0x7f207c254c40
0x7f20819a0250: unlink: done: 278: 0x7f207c254c40: 1
0x7f20819a0250: expr_take_obj: 0x7f207c1e30d0
0x7f20819a0250: unlink: start: 2147483655: 0x7f207c3814a0: 3
0x7f20819a0250: unlink: done: 2147483655: 0x7f207c3814a0: 2
0x7f20819a0250: delete: 2147483656
0x7f20819a0250: close: 2147483649: 0x7f207c255040
0x7f20819a0250: delete: 2147483649
0x7f20819a0250: expr_close: obj: 0x7f207c1e30d0
0x7f20819a0250: unlink: start: accessor: 0x7f207c1e30d0: 1
0x7f20819a0250: unlink: start: 2147483655: 0x7f207c3814a0: 2
0x7f20819a0250: unlink: done: 2147483655: 0x7f207c3814a0: 1
0x7f20819a0250: unlink: start: 279: 0x7f207c12ebe0: 2: 0x7f207c12ebe0
0x7f20819a0250: unlink: done: 279: 0x7f207c12ebe0: 1
0x7f20819a0250: unlink: done: accessor: 0x7f207c1e30d0: 0
0x7f20819a0250: expr_close: obj: 0x7f207c2353c0
0x7f20819a0250: unlink: start: 267: 0x7f207c2353c0: 2: 0x7f207c2353c0
0x7f20819a0250: unlink: done: 267: 0x7f207c2353c0: 1
0x7f20819a0250: at: start: 7
0x7f20819a0250: at: done: 2147483655: 2
0x7f20819a0250: accessor: 0x7f207c276df0: 1
0x7f20819a0250: at: start: 7
0x7f20819a0250: at: done: 2147483655: 3
0x7f20819a0250: at: start: 278
0x7f20819a0250: lock: 278: 1
0x7f20819a0250: at: done: 278: 2: 0x7f207c254c40
0x7f20819a0250: at: start: 280
0x7f20819a0250: lock: 280: 0
0x7f20819a0250: at: done: 280: 1: 0x7f207c1fdc00
0x7f20819a0250: accessor: 0x7f207c3efd10: 1
0x7f20819a0250: unlink: start: 278: 0x7f207c254c40: 2: 0x7f207c254c40
0x7f20819a0250: unlink: done: 278: 0x7f207c254c40: 1
0x7f20819a0250: expr_take_obj: 0x7f207c276df0
0x7f20819a0250: unlink: start: 2147483655: 0x7f207c3814a0: 3
0x7f20819a0250: unlink: done: 2147483655: 0x7f207c3814a0: 2
0x7f20819a0250: delete: 2147483657
0x7f20819a0250: at: start: 278
0x7f20819a0250: lock: 278: 1
0x7f20819a0250: at: done: 278: 2: 0x7f207c254c40
0x7f20819a0250: unlink: start: 278: 0x7f207c254c40: 2: 0x7f207c254c40
0x7f20819a0250: unlink: done: 278: 0x7f207c254c40: 1
0x7f20819a0250: close: 2147483649: 0x7f207c27cdf0
0x7f20819a0250: delete: 2147483649
0x7f20819a0250: expr_close: obj: 0x7f207c276df0
0x7f20819a0250: unlink: start: accessor: 0x7f207c276df0: 1
0x7f20819a0250: unlink: start: 2147483655: 0x7f207c3814a0: 2
0x7f20819a0250: unlink: done: 2147483655: 0x7f207c3814a0: 1
0x7f20819a0250: unlink: start: 280: 0x7f207c1fdc00: 1: 0x7f207c1fdc00
0x7f20819a0250: unlink: lock: 280: 0x7f207c1fdc00: 1: 0
0x7f20819a0250: unlink: locked: 280: 0x7f207c1fdc00: 0: 2147483648
0x7f20819a0250: close: 280: 0x7f207c1fdc00
0x7f20819a0250: delete: 280: 2147483648
0x7f20819a0250: unlink: done: 280: 0x7f207c1fdc00: 2147483648
0x7f20819a0250: unlink: done: accessor: 0x7f207c276df0: 0
0x7f20819a0250: accessor: 0x7f207c280710: 1
0x7f20819a0250: at: start: 8
0x7f20819a0250: at: done: 2147483656: 2
0x7f20819a0250: at: start: 7
0x7f20819a0250: at: done: 2147483655: 2
0x7f20819a0250: accessor: 0x7f207c1e30d0: 1
0x7f20819a0250: at: start: 278
0x7f20819a0250: lock: 278: 1
0x7f20819a0250: at: done: 278: 2: 0x7f207c254c40
0x7f20819a0250: unlink: start: 278: 0x7f207c254c40: 2: 0x7f207c254c40
0x7f20819a0250: unlink: done: 278: 0x7f207c254c40: 1
0x7f20819a0250: unlink: start: 2147483656: 0x7f207c3818a0: 2
0x7f20819a0250: unlink: done: 2147483656: 0x7f207c3818a0: 1
0x7f20819a0250: unlink: start: 2147483655: 0x7f207c3814a0: 2
0x7f20819a0250: unlink: done: 2147483655: 0x7f207c3814a0: 1
0x7f20819a0250: at: start: 5
0x7f20819a0250: at: done: 2147483653: 2
0x7f20819a0250: accessor: 0x7f207c3efd10: 1
0x7f20819a0250: at: start: 5
0x7f20819a0250: at: done: 2147483653: 3
0x7f20819a0250: at: start: 3
0x7f20819a0250: at: done: 2147483651: 2
0x7f20819a0250: accessor: 0x7f207c1e30d0: 1
0x7f20819a0250: at: start: 272
0x7f20819a0250: lock: 272: 0
0x7f20819a0250: at: done: 272: 1: 0x7f207c1fbe50
0x7f20819a0250: unlink: start: 272: 0x7f207c1fbe50: 1: 0x7f207c1fbe50
0x7f20819a0250: unlink: lock: 272: 0x7f207c1fbe50: 1: 0
0x7f20819a0250: unlink: locked: 272: 0x7f207c1fbe50: 0: 2147483648
0x7f20819a0250: close: 272: 0x7f207c1fbe50
0x7f20819a0250: delete: 272: 2147483648
0x7f20819a0250: unlink: done: 272: 0x7f207c1fbe50: 2147483648
0x7f20819a0250: unlink: start: 2147483653: 0x7f207c2568a0: 3
0x7f20819a0250: unlink: done: 2147483653: 0x7f207c2568a0: 2
0x7f20819a0250: unlink: start: 2147483651: 0x7f207c2709f0: 2
0x7f20819a0250: unlink: done: 2147483651: 0x7f207c2709f0: 1
0x7f20819a0250: at: start: 221
0x7f20819a0250: lock: 221: 1
0x7f20819a0250: at: done: 221: 2: 0x55f4a4ef73d0
0x7f20819a0250: expr_take_obj: 0x55f4a4ef73d0
0x7f20819a0250: accessor: 0x7f207c1e30d0: 1
0x7f20819a0250: at: start: 5
0x7f20819a0250: at: done: 2147483653: 3
0x7f20819a0250: at: start: 3
0x7f20819a0250: at: done: 2147483651: 2
0x7f20819a0250: accessor: 0x7f207c3efd10: 1
0x7f20819a0250: at: start: 272
0x7f20819a0250: lock: 272: 0
0x7f20819a0250: at: done: 272: 1: 0x7f207c1fbe50
0x7f20819a0250: at: start: 274
0x7f20819a0250: lock: 274: 0
0x7f20819a0250: at: done: 274: 1: 0x7f207c242d70
0x7f20819a0250: accessor: 0x7f207c280710: 1
0x7f20819a0250: unlink: start: 272: 0x7f207c1fbe50: 1: 0x7f207c1fbe50
0x7f20819a0250: unlink: lock: 272: 0x7f207c1fbe50: 1: 0
0x7f20819a0250: unlink: locked: 272: 0x7f207c1fbe50: 0: 2147483648
0x7f20819a0250: close: 272: 0x7f207c1fbe50
0x7f20819a0250: delete: 272: 2147483648
0x7f20819a0250: unlink: done: 272: 0x7f207c1fbe50: 2147483648
0x7f20819a0250: expr_take_obj: 0x7f207c1e30d0
0x7f20819a0250: unlink: start: 2147483653: 0x7f207c2568a0: 3
0x7f20819a0250: unlink: done: 2147483653: 0x7f207c2568a0: 2
0x7f20819a0250: at: start: 6
0x7f20819a0250: at: done: 2147483654: 2
0x7f20819a0250: accessor: 0x7f207c1c7910: 1
0x7f20819a0250: at: start: 6
0x7f20819a0250: at: done: 2147483654: 3
0x7f20819a0250: at: start: 4
0x7f20819a0250: at: done: 2147483652: 2
0x7f20819a0250: accessor: 0x7f207c28b690: 1
0x7f20819a0250: at: start: 275
0x7f20819a0250: lock: 275: 1
0x7f20819a0250: at: done: 275: 2: 0x7f207c278710
0x7f20819a0250: unlink: start: 275: 0x7f207c278710: 2: 0x7f207c278710
0x7f20819a0250: unlink: done: 275: 0x7f207c278710: 1
0x7f20819a0250: unlink: start: 2147483654: 0x7f207c256ca0: 3
0x7f20819a0250: unlink: done: 2147483654: 0x7f207c256ca0: 2
0x7f20819a0250: unlink: start: 2147483652: 0x7f207c1a7000: 2
0x7f20819a0250: unlink: done: 2147483652: 0x7f207c1a7000: 1
0x7f20819a0250: at: start: 221
0x7f20819a0250: lock: 221: 2
0x7f20819a0250: at: done: 221: 3: 0x55f4a4ef73d0
0x7f20819a0250: expr_take_obj: 0x55f4a4ef73d0
0x7f20819a0250: accessor: 0x7f207c28b380: 1
0x7f20819a0250: at: start: 6
0x7f20819a0250: at: done: 2147483654: 3
0x7f20819a0250: at: start: 4
0x7f20819a0250: at: done: 2147483652: 2
0x7f20819a0250: accessor: 0x7f207c2928b0: 1
0x7f20819a0250: at: start: 275
0x7f20819a0250: lock: 275: 1
0x7f20819a0250: at: done: 275: 2: 0x7f207c278710
0x7f20819a0250: at: start: 277
0x7f20819a0250: lock: 277: 0
0x7f20819a0250: at: done: 277: 1: 0x7f207c28b260
0x7f20819a0250: accessor: 0x7f207c2372a0: 1
0x7f20819a0250: unlink: start: 275: 0x7f207c278710: 2: 0x7f207c278710
0x7f20819a0250: unlink: done: 275: 0x7f207c278710: 1
0x7f20819a0250: expr_take_obj: 0x7f207c28b380
0x7f20819a0250: unlink: start: 2147483654: 0x7f207c256ca0: 3
0x7f20819a0250: unlink: done: 2147483654: 0x7f207c256ca0: 2
0x7f20819a0250: at: start: 8
0x7f20819a0250: at: done: 2147483656: 2
0x7f20819a0250: accessor: 0x7f207c235600: 1
0x7f20819a0250: at: start: 8
0x7f20819a0250: at: done: 2147483656: 3
0x7f20819a0250: at: start: 7
0x7f20819a0250: at: done: 2147483655: 2
0x7f20819a0250: accessor: 0x7f207c28b4a0: 1
0x7f20819a0250: at: start: 278
0x7f20819a0250: lock: 278: 1
0x7f20819a0250: at: done: 278: 2: 0x7f207c254c40
0x7f20819a0250: unlink: start: 278: 0x7f207c254c40: 2: 0x7f207c254c40
0x7f20819a0250: unlink: done: 278: 0x7f207c254c40: 1
0x7f20819a0250: unlink: start: 2147483656: 0x7f207c3818a0: 3
0x7f20819a0250: unlink: done: 2147483656: 0x7f207c3818a0: 2
0x7f20819a0250: unlink: start: 2147483655: 0x7f207c3814a0: 2
0x7f20819a0250: unlink: done: 2147483655: 0x7f207c3814a0: 1
0x7f20819a0250: at: start: 221
0x7f20819a0250: lock: 221: 3
0x7f20819a0250: at: done: 221: 4: 0x55f4a4ef73d0
0x7f20819a0250: expr_take_obj: 0x55f4a4ef73d0
0x7f20819a0250: accessor: 0x7f207c28d380: 1
0x7f20819a0250: at: start: 8
0x7f20819a0250: at: done: 2147483656: 3
0x7f20819a0250: at: start: 7
0x7f20819a0250: at: done: 2147483655: 2
0x7f20819a0250: accessor: 0x7f207c27c190: 1
0x7f20819a0250: at: start: 278
0x7f20819a0250: lock: 278: 1
0x7f20819a0250: at: done: 278: 2: 0x7f207c254c40
0x7f20819a0250: at: start: 280
0x7f20819a0250: lock: 280: 0
0x7f20819a0250: at: done: 280: 1: 0x7f207c1fdc00
0x7f20819a0250: accessor: 0x7f207c0cb760: 1
0x7f20819a0250: unlink: start: 278: 0x7f207c254c40: 2: 0x7f207c254c40
0x7f20819a0250: unlink: done: 278: 0x7f207c254c40: 1
0x7f20819a0250: expr_take_obj: 0x7f207c28d380
0x7f20819a0250: unlink: start: 2147483656: 0x7f207c3818a0: 3
0x7f20819a0250: unlink: done: 2147483656: 0x7f207c3818a0: 2
0x7f20819a0250: delete: 2147483659
0x7f20819a0250: accessor: 0x7f207c1fb040: 1
0x7f20819a0250: at: start: 5
0x7f20819a0250: at: done: 2147483653: 3
0x7f20819a0250: at: start: 3
0x7f20819a0250: at: done: 2147483651: 3
0x7f20819a0250: accessor: 0x7f207c259580: 1
0x7f20819a0250: unlink: start: 2147483651: 0x7f207c2709f0: 3
0x7f20819a0250: unlink: done: 2147483651: 0x7f207c2709f0: 2
0x7f20819a0250: delete: 2147483659
0x7f20819a0250: unlink: start: accessor: 0x7f207c1fb040: 1
0x7f20819a0250: unlink: start: 2147483653: 0x7f207c2568a0: 3
0x7f20819a0250: unlink: done: 2147483653: 0x7f207c2568a0: 2
0x7f20819a0250: unlink: start: 3221225473: 0x7f207c285770: 3
0x7f20819a0250: unlink: done: 3221225473: 0x7f207c285770: 2
0x7f20819a0250: unlink: done: accessor: 0x7f207c1fb040: 0
0x7f20819a0250: delete: 2147483659
0x7f20819a0250: accessor: 0x7f207c12f7e0: 1
0x7f20819a0250: at: start: 6
0x7f20819a0250: at: done: 2147483654: 3
0x7f20819a0250: at: start: 4
0x7f20819a0250: at: done: 2147483652: 3
0x7f20819a0250: accessor: 0x7f207c28b4a0: 1
0x7f20819a0250: unlink: start: 2147483652: 0x7f207c1a7000: 3
0x7f20819a0250: unlink: done: 2147483652: 0x7f207c1a7000: 2
0x7f20819a0250: delete: 2147483659
0x7f20819a0250: unlink: start: accessor: 0x7f207c12f7e0: 1
0x7f20819a0250: unlink: start: 2147483654: 0x7f207c256ca0: 3
0x7f20819a0250: unlink: done: 2147483654: 0x7f207c256ca0: 2
0x7f20819a0250: unlink: start: 3221225474: 0x7f207c2748f0: 4
0x7f20819a0250: unlink: done: 3221225474: 0x7f207c2748f0: 3
0x7f20819a0250: unlink: done: accessor: 0x7f207c12f7e0: 0
0x7f20819a0250: delete: 2147483659
0x7f20819a0250: accessor: 0x7f207c235600: 1
0x7f20819a0250: at: start: 8
0x7f20819a0250: at: done: 2147483656: 3
0x7f20819a0250: at: start: 7
0x7f20819a0250: at: done: 2147483655: 3
0x7f20819a0250: accessor: 0x7f207c3efea0: 1
0x7f20819a0250: unlink: start: 2147483655: 0x7f207c3814a0: 3
0x7f20819a0250: unlink: done: 2147483655: 0x7f207c3814a0: 2
0x7f20819a0250: delete: 2147483659
0x7f20819a0250: unlink: start: accessor: 0x7f207c235600: 1
0x7f20819a0250: unlink: start: 2147483656: 0x7f207c3818a0: 3
0x7f20819a0250: unlink: done: 2147483656: 0x7f207c3818a0: 2
0x7f20819a0250: unlink: start: 3221225477: 0x7f207c26e780: 2
0x7f20819a0250: unlink: done: 3221225477: 0x7f207c26e780: 1
0x7f20819a0250: unlink: done: accessor: 0x7f207c235600: 0
0x7f20819a0250: close: 2147483649: 0x7f207c271780
0x7f20819a0250: delete: 2147483649
0x7f20819a0250: expr_close: obj: 0x7f207c1e30d0
0x7f20819a0250: unlink: start: accessor: 0x7f207c1e30d0: 1
0x7f20819a0250: unlink: start: 2147483653: 0x7f207c2568a0: 2
0x7f20819a0250: unlink: done: 2147483653: 0x7f207c2568a0: 1
0x7f20819a0250: unlink: start: 2147483651: 0x7f207c2709f0: 2
0x7f20819a0250: unlink: done: 2147483651: 0x7f207c2709f0: 1
0x7f20819a0250: unlink: start: 274: 0x7f207c242d70: 1: 0x7f207c242d70
0x7f20819a0250: unlink: lock: 274: 0x7f207c242d70: 1: 0
0x7f20819a0250: unlink: locked: 274: 0x7f207c242d70: 0: 2147483648
0x7f20819a0250: close: 274: 0x7f207c242d70
0x7f20819a0250: delete: 274: 2147483648
0x7f20819a0250: unlink: done: 274: 0x7f207c242d70: 2147483648
0x7f20819a0250: unlink: done: accessor: 0x7f207c1e30d0: 0
0x7f20819a0250: expr_close: obj: 0x55f4a4ef73d0
0x7f20819a0250: unlink: start: 221: 0x55f4a4ef73d0: 4: 0x55f4a4ef73d0
0x7f20819a0250: unlink: done: 221: 0x55f4a4ef73d0: 3
0x7f20819a0250: close: 2147483657: 0x7f207c255040
0x7f20819a0250: delete: 2147483657
0x7f20819a0250: expr_close: obj: 0x7f207c28b380
0x7f20819a0250: unlink: start: accessor: 0x7f207c28b380: 1
0x7f20819a0250: unlink: start: 2147483654: 0x7f207c256ca0: 2
0x7f20819a0250: unlink: done: 2147483654: 0x7f207c256ca0: 1
0x7f20819a0250: unlink: start: 2147483652: 0x7f207c1a7000: 2
0x7f20819a0250: unlink: done: 2147483652: 0x7f207c1a7000: 1
0x7f20819a0250: unlink: start: 277: 0x7f207c28b260: 1: 0x7f207c28b260
0x7f20819a0250: unlink: lock: 277: 0x7f207c28b260: 1: 0
0x7f20819a0250: unlink: locked: 277: 0x7f207c28b260: 0: 2147483648
0x7f20819a0250: close: 277: 0x7f207c28b260
0x7f20819a0250: delete: 277: 2147483648
0x7f20819a0250: unlink: done: 277: 0x7f207c28b260: 2147483648
0x7f20819a0250: unlink: done: accessor: 0x7f207c28b380: 0
0x7f20819a0250: expr_close: obj: 0x55f4a4ef73d0
0x7f20819a0250: unlink: start: 221: 0x55f4a4ef73d0: 3: 0x55f4a4ef73d0
0x7f20819a0250: unlink: done: 221: 0x55f4a4ef73d0: 2
0x7f20819a0250: close: 2147483658: 0x7f207c27cdf0
0x7f20819a0250: delete: 2147483658
0x7f20819a0250: expr_close: obj: 0x7f207c28d380
0x7f20819a0250: unlink: start: accessor: 0x7f207c28d380: 1
0x7f20819a0250: unlink: start: 2147483656: 0x7f207c3818a0: 2
0x7f20819a0250: unlink: done: 2147483656: 0x7f207c3818a0: 1
0x7f20819a0250: unlink: start: 2147483655: 0x7f207c3814a0: 2
0x7f20819a0250: unlink: done: 2147483655: 0x7f207c3814a0: 1
0x7f20819a0250: unlink: start: 280: 0x7f207c1fdc00: 1: 0x7f207c1fdc00
0x7f20819a0250: unlink: lock: 280: 0x7f207c1fdc00: 1: 0
0x7f20819a0250: unlink: locked: 280: 0x7f207c1fdc00: 0: 2147483648
0x7f20819a0250: close: 280: 0x7f207c1fdc00
0x7f20819a0250: delete: 280: 2147483648
0x7f20819a0250: unlink: done: 280: 0x7f207c1fdc00: 2147483648
0x7f20819a0250: unlink: done: accessor: 0x7f207c28d380: 0
0x7f20819a0250: expr_close: obj: 0x55f4a4ef73d0
0x7f20819a0250: unlink: start: 221: 0x55f4a4ef73d0: 2: 0x55f4a4ef73d0
0x7f20819a0250: unlink: done: 221: 0x55f4a4ef73d0: 1
0x7f20819a0250: at: start: 6
0x7f20819a0250: at: done: 2147483654: 2
0x7f20819a0250: expr_take_obj: 0x7f207c271a60
0x7f20819a0250: unlink: start: 2147483654: 0x7f207c256ca0: 2
0x7f20819a0250: unlink: done: 2147483654: 0x7f207c256ca0: 1
0x7f20819a0250: delete: 2147483649
0x7f20819a0250: close: 2147483658: 0x7f207c271780
0x7f20819a0250: delete: 2147483658
0x7f20819a0250: expr_close: obj: 0x7f207c271a60
0x7f20819a0250: unlink: start: 3221225476: 0x7f207c271a60: 5
0x7f20819a0250: unlink: done: 3221225476: 0x7f207c271a60: 4
0x7f20819a0250: close: 2147483651: 0x7f207c2709f0
0x7f20819a0250: at: start: 1
0x7f20819a0250: at: done: 3221225473: 3
0x7f20819a0250: close: 3221225473: 0x7f207c285770
0x7f20819a0250: delete: 3221225473
0x7f20819a0250: delete: 2147483651
0x7f20819a0250: close: 2147483653: 0x7f207c2568a0
0x7f20819a0250: at: start: 3
0x7f20819a0250: at: done: 3221225475: 5
0x7f20819a0250: close: 3221225475: 0x7f207c277f40
0x7f20819a0250: delete: 3221225475
0x7f20819a0250: delete: 2147483653
0x7f20819a0250: close: 2147483650: 0x7f207c0e4e10
0x7f20819a0250: delete: 2147483650
0x7f20819a0250: at: start: 6
0x7f20819a0250: at: done: 2147483654: 2
0x7f20819a0250: accessor: 0x7f207c280710: 1
0x7f20819a0250: at: start: 6
0x7f20819a0250: at: done: 2147483654: 3
0x7f20819a0250: at: start: 4
0x7f20819a0250: at: done: 2147483652: 2
0x7f20819a0250: accessor: 0x7f207c2928b0: 1
0x7f20819a0250: at: start: 275
0x7f20819a0250: lock: 275: 1
0x7f20819a0250: at: done: 275: 2: 0x7f207c278710
0x7f20819a0250: unlink: start: 275: 0x7f207c278710: 2: 0x7f207c278710
0x7f20819a0250: unlink: done: 275: 0x7f207c278710: 1
0x7f20819a0250: unlink: start: 2147483654: 0x7f207c256ca0: 3
0x7f20819a0250: unlink: done: 2147483654: 0x7f207c256ca0: 2
0x7f20819a0250: unlink: start: 2147483652: 0x7f207c1a7000: 2
0x7f20819a0250: unlink: done: 2147483652: 0x7f207c1a7000: 1
0x7f20819a0250: at: start: 221
0x7f20819a0250: lock: 221: 1
0x7f20819a0250: at: done: 221: 2: 0x55f4a4ef73d0
0x7f20819a0250: expr_take_obj: 0x55f4a4ef73d0
0x7f20819a0250: accessor: 0x7f207c28b380: 1
0x7f20819a0250: at: start: 6
0x7f20819a0250: at: done: 2147483654: 3
0x7f20819a0250: at: start: 4
0x7f20819a0250: at: done: 2147483652: 2
0x7f20819a0250: accessor: 0x7f207c28b690: 1
0x7f20819a0250: at: start: 275
0x7f20819a0250: lock: 275: 1
0x7f20819a0250: at: done: 275: 2: 0x7f207c278710
0x7f20819a0250: at: start: 277
0x7f20819a0250: lock: 277: 0
0x7f20819a0250: at: done: 277: 1: 0x7f207c242d70
0x7f20819a0250: accessor: 0x7f207c278aa0: 1
0x7f20819a0250: unlink: start: 275: 0x7f207c278710: 2: 0x7f207c278710
0x7f20819a0250: unlink: done: 275: 0x7f207c278710: 1
0x7f20819a0250: expr_take_obj: 0x7f207c28b380
0x7f20819a0250: unlink: start: 2147483654: 0x7f207c256ca0: 3
0x7f20819a0250: unlink: done: 2147483654: 0x7f207c256ca0: 2
0x7f20819a0250: at: start: 8
0x7f20819a0250: at: done: 2147483656: 2
0x7f20819a0250: accessor: 0x7f207c235600: 1
0x7f20819a0250: at: start: 8
0x7f20819a0250: at: done: 2147483656: 3
0x7f20819a0250: at: start: 7
0x7f20819a0250: at: done: 2147483655: 2
0x7f20819a0250: accessor: 0x7f207c28b4a0: 1
0x7f20819a0250: at: start: 278
0x7f20819a0250: lock: 278: 1
0x7f20819a0250: at: done: 278: 2: 0x7f207c254c40
0x7f20819a0250: unlink: start: 278: 0x7f207c254c40: 2: 0x7f207c254c40
0x7f20819a0250: unlink: done: 278: 0x7f207c254c40: 1
0x7f20819a0250: unlink: start: 2147483656: 0x7f207c3818a0: 3
0x7f20819a0250: unlink: done: 2147483656: 0x7f207c3818a0: 2
0x7f20819a0250: unlink: start: 2147483655: 0x7f207c3814a0: 2
0x7f20819a0250: unlink: done: 2147483655: 0x7f207c3814a0: 1
0x7f20819a0250: at: start: 221
0x7f20819a0250: lock: 221: 2
0x7f20819a0250: at: done: 221: 3: 0x55f4a4ef73d0
0x7f20819a0250: expr_take_obj: 0x55f4a4ef73d0
0x7f20819a0250: accessor: 0x7f207c12f7e0: 1
0x7f20819a0250: at: start: 8
0x7f20819a0250: at: done: 2147483656: 3
0x7f20819a0250: at: start: 7
0x7f20819a0250: at: done: 2147483655: 2
0x7f20819a0250: accessor: 0x7f207c259580: 1
0x7f20819a0250: at: start: 278
0x7f20819a0250: lock: 278: 1
0x7f20819a0250: at: done: 278: 2: 0x7f207c254c40
0x7f20819a0250: at: start: 280
0x7f20819a0250: lock: 280: 0
0x7f20819a0250: at: done: 280: 1: 0x7f207c1fdc00
0x7f20819a0250: accessor: 0x7f207c2372a0: 1
0x7f20819a0250: unlink: start: 278: 0x7f207c254c40: 2: 0x7f207c254c40
0x7f20819a0250: unlink: done: 278: 0x7f207c254c40: 1
0x7f20819a0250: expr_take_obj: 0x7f207c12f7e0
0x7f20819a0250: unlink: start: 2147483656: 0x7f207c3818a0: 3
0x7f20819a0250: unlink: done: 2147483656: 0x7f207c3818a0: 2
0x7f20819a0250: delete: 2147483651
0x7f20819a0250: accessor: 0x7f207c215e90: 1
0x7f20819a0250: at: start: 6
0x7f20819a0250: at: done: 2147483654: 3
0x7f20819a0250: at: start: 4
0x7f20819a0250: at: done: 2147483652: 3
0x7f20819a0250: accessor: 0x7f207c3efea0: 1
0x7f20819a0250: unlink: start: 2147483652: 0x7f207c1a7000: 3
0x7f20819a0250: unlink: done: 2147483652: 0x7f207c1a7000: 2
0x7f20819a0250: delete: 2147483651
0x7f20819a0250: unlink: start: accessor: 0x7f207c215e90: 1
0x7f20819a0250: unlink: start: 2147483654: 0x7f207c256ca0: 3
0x7f20819a0250: unlink: done: 2147483654: 0x7f207c256ca0: 2
0x7f20819a0250: unlink: start: 3221225474: 0x7f207c2748f0: 4
0x7f20819a0250: unlink: done: 3221225474: 0x7f207c2748f0: 3
0x7f20819a0250: unlink: done: accessor: 0x7f207c215e90: 0
0x7f20819a0250: delete: 2147483651
0x7f20819a0250: accessor: 0x7f207c276e50: 1
0x7f20819a0250: at: start: 8
0x7f20819a0250: at: done: 2147483656: 3
0x7f20819a0250: at: start: 7
0x7f20819a0250: at: done: 2147483655: 3
0x7f20819a0250: accessor: 0x7f207c276e90: 1
0x7f20819a0250: unlink: start: 2147483655: 0x7f207c3814a0: 3
0x7f20819a0250: unlink: done: 2147483655: 0x7f207c3814a0: 2
0x7f20819a0250: delete: 2147483651
0x7f20819a0250: unlink: start: accessor: 0x7f207c276e50: 1
0x7f20819a0250: unlink: start: 2147483656: 0x7f207c3818a0: 3
0x7f20819a0250: unlink: done: 2147483656: 0x7f207c3818a0: 2
0x7f20819a0250: unlink: start: 3221225477: 0x7f207c26e780: 2
0x7f20819a0250: unlink: done: 3221225477: 0x7f207c26e780: 1
0x7f20819a0250: unlink: done: accessor: 0x7f207c276e50: 0
0x7f20819a0250: close: 2147483650: 0x7f207c255040
0x7f20819a0250: delete: 2147483650
0x7f20819a0250: expr_close: obj: 0x7f207c28b380
0x7f20819a0250: unlink: start: accessor: 0x7f207c28b380: 1
0x7f20819a0250: unlink: start: 2147483654: 0x7f207c256ca0: 2
0x7f20819a0250: unlink: done: 2147483654: 0x7f207c256ca0: 1
0x7f20819a0250: unlink: start: 2147483652: 0x7f207c1a7000: 2
0x7f20819a0250: unlink: done: 2147483652: 0x7f207c1a7000: 1
0x7f20819a0250: unlink: start: 277: 0x7f207c242d70: 1: 0x7f207c242d70
0x7f20819a0250: unlink: lock: 277: 0x7f207c242d70: 1: 0
0x7f20819a0250: unlink: locked: 277: 0x7f207c242d70: 0: 2147483648
0x7f20819a0250: close: 277: 0x7f207c242d70
0x7f20819a0250: delete: 277: 2147483648
0x7f20819a0250: unlink: done: 277: 0x7f207c242d70: 2147483648
0x7f20819a0250: unlink: done: accessor: 0x7f207c28b380: 0
0x7f20819a0250: expr_close: obj: 0x55f4a4ef73d0
0x7f20819a0250: unlink: start: 221: 0x55f4a4ef73d0: 3: 0x55f4a4ef73d0
0x7f20819a0250: unlink: done: 221: 0x55f4a4ef73d0: 2
0x7f20819a0250: close: 2147483653: 0x7f207c27cdf0
0x7f20819a0250: delete: 2147483653
0x7f20819a0250: expr_close: obj: 0x7f207c12f7e0
0x7f20819a0250: unlink: start: accessor: 0x7f207c12f7e0: 1
0x7f20819a0250: unlink: start: 2147483656: 0x7f207c3818a0: 2
0x7f20819a0250: unlink: done: 2147483656: 0x7f207c3818a0: 1
0x7f20819a0250: unlink: start: 2147483655: 0x7f207c3814a0: 2
0x7f20819a0250: unlink: done: 2147483655: 0x7f207c3814a0: 1
0x7f20819a0250: unlink: start: 280: 0x7f207c1fdc00: 1: 0x7f207c1fdc00
0x7f20819a0250: unlink: lock: 280: 0x7f207c1fdc00: 1: 0
0x7f20819a0250: unlink: locked: 280: 0x7f207c1fdc00: 0: 2147483648
0x7f20819a0250: close: 280: 0x7f207c1fdc00
0x7f20819a0250: delete: 280: 2147483648
0x7f20819a0250: unlink: done: 280: 0x7f207c1fdc00: 2147483648
0x7f20819a0250: unlink: done: accessor: 0x7f207c12f7e0: 0
0x7f20819a0250: expr_close: obj: 0x55f4a4ef73d0
0x7f20819a0250: unlink: start: 221: 0x55f4a4ef73d0: 2: 0x55f4a4ef73d0
0x7f20819a0250: unlink: done: 221: 0x55f4a4ef73d0: 1
0x7f20819a0250: at: start: 8
0x7f20819a0250: at: done: 2147483656: 2
0x7f20819a0250: expr_take_obj: 0x7f207c1fb7d0
0x7f20819a0250: unlink: start: 2147483656: 0x7f207c3818a0: 2
0x7f20819a0250: unlink: done: 2147483656: 0x7f207c3818a0: 1
0x7f20819a0250: delete: 2147483651
0x7f20819a0250: close: 2147483653: 0x7f207c271780
0x7f20819a0250: delete: 2147483653
0x7f20819a0250: expr_close: obj: 0x7f207c1fb7d0
0x7f20819a0250: unlink: start: 3221225478: 0x7f207c1fb7d0: 5
0x7f20819a0250: unlink: done: 3221225478: 0x7f207c1fb7d0: 4
0x7f20819a0250: close: 2147483652: 0x7f207c1a7000
0x7f20819a0250: at: start: 2
0x7f20819a0250: at: done: 3221225474: 4
0x7f20819a0250: close: 3221225474: 0x7f207c2748f0
0x7f20819a0250: delete: 3221225474
0x7f20819a0250: delete: 2147483652
0x7f20819a0250: close: 2147483654: 0x7f207c256ca0
0x7f20819a0250: at: start: 4
0x7f20819a0250: at: done: 3221225476: 7
0x7f20819a0250: close: 3221225476: 0x7f207c271a60
0x7f20819a0250: delete: 3221225476
0x7f20819a0250: delete: 2147483654
0x7f20819a0250: close: 2147483657: 0x7f207c0e3660
0x7f20819a0250: delete: 2147483657
0x7f20819a0250: unlink: start: 275: 0x7f207c278710: 1: 0x7f207c278710
0x7f20819a0250: unlink: lock: 275: 0x7f207c278710: 1: 0
0x7f20819a0250: unlink: locked: 275: 0x7f207c278710: 0: 2147483648
0x7f20819a0250: close: 275: 0x7f207c278710
0x7f20819a0250: delete: 275: 2147483648
0x7f20819a0250: unlink: done: 275: 0x7f207c278710: 2147483648
0x7f20819a0250: unlink: start: 276: 0x7f207c286330: 1: 0x7f207c286330
0x7f20819a0250: unlink: lock: 276: 0x7f207c286330: 1: 0
0x7f20819a0250: unlink: locked: 276: 0x7f207c286330: 0: 2147483648
0x7f20819a0250: close: 276: 0x7f207c286330
0x7f20819a0250: delete: 276: 2147483648
0x7f20819a0250: unlink: done: 276: 0x7f207c286330: 2147483648
0x7f20819a0250: unlink: start: 278: 0x7f207c254c40: 1: 0x7f207c254c40
0x7f20819a0250: unlink: lock: 278: 0x7f207c254c40: 1: 0
0x7f20819a0250: unlink: locked: 278: 0x7f207c254c40: 0: 2147483648
0x7f20819a0250: close: 278: 0x7f207c254c40
0x7f20819a0250: delete: 278: 2147483648
0x7f20819a0250: unlink: done: 278: 0x7f207c254c40: 2147483648
0x7f20819a0250: unlink: start: 279: 0x7f207c12ebe0: 1: 0x7f207c12ebe0
0x7f20819a0250: unlink: lock: 279: 0x7f207c12ebe0: 1: 0
0x7f20819a0250: unlink: locked: 279: 0x7f207c12ebe0: 0: 2147483648
0x7f20819a0250: close: 279: 0x7f207c12ebe0
0x7f20819a0250: delete: 279: 2147483648
0x7f20819a0250: unlink: done: 279: 0x7f207c12ebe0: 2147483648
0x7f20819a0250: close: 2147483655: 0x7f207c3814a0
0x7f20819a0250: at: start: 5
0x7f20819a0250: at: done: 3221225477: 2
0x7f20819a0250: close: 3221225477: 0x7f207c26e780
0x7f20819a0250: delete: 3221225477
0x7f20819a0250: delete: 2147483655
0x7f20819a0250: close: 2147483656: 0x7f207c3818a0
0x7f20819a0250: at: start: 6
0x7f20819a0250: at: done: 3221225478: 5
0x7f20819a0250: close: 3221225478: 0x7f207c1fb7d0
0x7f20819a0250: delete: 3221225478
0x7f20819a0250: delete: 2147483656
0x7f20819a0250: close: 2147483650: 0x7f207c0e4e10
0x7f20819a0250: delete: 2147483650
0x7f20819a0250: at: start: 146
0x7f20819a0250: lock: 146: 2
0x7f20819a0250: at: done: 146: 3: 0x55f4a4d14c70
0x7f20819a0250: at: start: 142
0x7f20819a0250: lock: 142: 1
0x7f20819a0250: at: done: 142: 2: 0x55f4a4ce47b0
0x7fff84c47130: close: 0: 0x55f4a4b70150
0x7fff84c47130: close: 9: 0x7f207c28e090
0x7fff84c47130: delete: 9: 1
0x7fff84c47130: close: 13: 0x7f207c28e510
0x7fff84c47130: delete: 13: 1
0x7fff84c47130: close: 64: 0x55f4a4b7cee0
0x7fff84c47130: delete: 64: 1
0x7fff84c47130: close: 65: 0x55f4a4b7cd20
0x7fff84c47130: delete: 65: 1
0x7fff84c47130: close: 66: 0x55f4a4b7df70
0x7fff84c47130: delete: 66: 1
0x7fff84c47130: close: 67: 0x55f4a4b7d650
0x7fff84c47130: delete: 67: 1
0x7fff84c47130: close: 68: 0x55f4a4b7d770
0x7fff84c47130: delete: 68: 1
0x7fff84c47130: close: 69: 0x55f4a4b7d890
0x7fff84c47130: delete: 69: 1
0x7fff84c47130: close: 70: 0x55f4a4b7d9b0
0x7fff84c47130: delete: 70: 1
0x7fff84c47130: close: 71: 0x55f4a4b7dad0
0x7fff84c47130: delete: 71: 1
0x7fff84c47130: close: 72: 0x55f4a4bc88c0
0x7fff84c47130: delete: 72: 1
0x7fff84c47130: close: 73: 0x55f4a4bd49f0
0x7fff84c47130: delete: 73: 1
0x7fff84c47130: close: 74: 0x55f4a4be0b20
0x7fff84c47130: delete: 74: 1
0x7fff84c47130: close: 75: 0x55f4a4becc50
0x7fff84c47130: delete: 75: 1
0x7fff84c47130: close: 76: 0x55f4a4bf8d80
0x7fff84c47130: delete: 76: 1
0x7fff84c47130: close: 77: 0x55f4a4bf8ea0
0x7fff84c47130: delete: 77: 1
0x7fff84c47130: close: 78: 0x55f4a4c04fd0
0x7fff84c47130: delete: 78: 1
0x7fff84c47130: close: 79: 0x55f4a4c050f0
0x7fff84c47130: delete: 79: 1
0x7fff84c47130: close: 80: 0x55f4a4c05210
0x7fff84c47130: delete: 80: 1
0x7fff84c47130: close: 81: 0x55f4a4c05330
0x7fff84c47130: delete: 81: 1
0x7fff84c47130: close: 82: 0x55f4a4c05450
0x7fff84c47130: delete: 82: 1
0x7fff84c47130: close: 83: 0x55f4a4c05570
0x7fff84c47130: delete: 83: 1
0x7fff84c47130: close: 84: 0x55f4a4c116a0
0x7fff84c47130: delete: 84: 1
0x7fff84c47130: close: 85: 0x55f4a4c1d7d0
0x7fff84c47130: delete: 85: 1
0x7fff84c47130: close: 86: 0x55f4a4c29900
0x7fff84c47130: delete: 86: 1
0x7fff84c47130: close: 87: 0x55f4a4c35a30
0x7fff84c47130: delete: 87: 1
0x7fff84c47130: close: 88: 0x55f4a4c41b60
0x7fff84c47130: delete: 88: 1
0x7fff84c47130: close: 89: 0x55f4a4c4dc90
0x7fff84c47130: delete: 89: 1
0x7fff84c47130: close: 90: 0x55f4a4c4ddb0
0x7fff84c47130: delete: 90: 1
0x7fff84c47130: close: 128: 0x55f4a4c4e6e0
0x7fff84c47130: delete: 128: 1
0x7fff84c47130: close: 129: 0x55f4a4c5b820
0x7fff84c47130: delete: 129: 1
0x7fff84c47130: close: 130: 0x55f4a4c68960
0x7fff84c47130: delete: 130: 4
0x7fff84c47130: close: 131: 0x55f4a4c75aa0
0x7fff84c47130: delete: 131: 2
0x7fff84c47130: close: 132: 0x55f4a4c75bc0
0x7fff84c47130: delete: 132: 1
0x7fff84c47130: close: 133: 0x55f4a4c81cf0
0x7fff84c47130: delete: 133: 1
0x7fff84c47130: close: 134: 0x55f4a4c8de20
0x7fff84c47130: delete: 134: 4
0x7fff84c47130: close: 135: 0x55f4a4c9af60
0x7fff84c47130: delete: 135: 1
0x7fff84c47130: close: 136: 0x55f4a4ca7090
0x7fff84c47130: delete: 136: 1
0x7fff84c47130: close: 137: 0x55f4a4cb31c0
0x7fff84c47130: delete: 137: 7
0x7fff84c47130: close: 138: 0x55f4a4cc0300
0x7fff84c47130: delete: 138: 1
0x7fff84c47130: close: 139: 0x55f4a4ccc430
0x7fff84c47130: delete: 139: 1
0x7fff84c47130: close: 140: 0x55f4a4cd8560
0x7fff84c47130: delete: 140: 1
0x7fff84c47130: close: 141: 0x55f4a4ce4690
0x7fff84c47130: delete: 141: 1
0x7fff84c47130: close: 142: 0x55f4a4ce47b0
0x7fff84c47130: delete: 142: 2
0x7fff84c47130: close: 143: 0x55f4a4cf08e0
0x7fff84c47130: delete: 143: 1
0x7fff84c47130: close: 144: 0x55f4a4cfca10
0x7fff84c47130: delete: 144: 1
0x7fff84c47130: close: 145: 0x55f4a4d08b40
0x7fff84c47130: delete: 145: 1
0x7fff84c47130: close: 146: 0x55f4a4d14c70
0x7fff84c47130: delete: 146: 3
0x7fff84c47130: close: 147: 0x55f4a4d20da0
0x7fff84c47130: delete: 147: 1
0x7fff84c47130: close: 148: 0x55f4a4d2ced0
0x7fff84c47130: delete: 148: 1
0x7fff84c47130: close: 149: 0x55f4a4d2cff0
0x7fff84c47130: delete: 149: 1
0x7fff84c47130: close: 150: 0x55f4a4d39120
0x7fff84c47130: delete: 150: 1
0x7fff84c47130: close: 151: 0x55f4a4d45250
0x7fff84c47130: delete: 151: 1
0x7fff84c47130: close: 152: 0x55f4a4d52390
0x7fff84c47130: delete: 152: 1
0x7fff84c47130: close: 153: 0x55f4a4d5e4c0
0x7fff84c47130: delete: 153: 1
0x7fff84c47130: close: 154: 0x55f4a4d6a5f0
0x7fff84c47130: delete: 154: 1
0x7fff84c47130: close: 155: 0x55f4a4d76720
0x7fff84c47130: delete: 155: 1
0x7fff84c47130: close: 156: 0x55f4a4d83860
0x7fff84c47130: delete: 156: 1
0x7fff84c47130: close: 157: 0x55f4a4d909a0
0x7fff84c47130: delete: 157: 1
0x7fff84c47130: close: 158: 0x55f4a4d9dae0
0x7fff84c47130: delete: 158: 1
0x7fff84c47130: close: 159: 0x55f4a4d9dc00
0x7fff84c47130: delete: 159: 1
0x7fff84c47130: close: 160: 0x55f4a4d9dd20
0x7fff84c47130: delete: 160: 1
0x7fff84c47130: close: 161: 0x55f4a4d9de40
0x7fff84c47130: delete: 161: 1
0x7fff84c47130: close: 162: 0x55f4a4d9df60
0x7fff84c47130: delete: 162: 1
0x7fff84c47130: close: 163: 0x55f4a4d9e080
0x7fff84c47130: delete: 163: 1
0x7fff84c47130: close: 164: 0x55f4a4d9e1a0
0x7fff84c47130: delete: 164: 1
0x7fff84c47130: close: 165: 0x55f4a4d9e2c0
0x7fff84c47130: delete: 165: 1
0x7fff84c47130: close: 166: 0x55f4a4d9e3e0
0x7fff84c47130: delete: 166: 1
0x7fff84c47130: close: 167: 0x55f4a4d9e500
0x7fff84c47130: delete: 167: 1
0x7fff84c47130: close: 168: 0x55f4a4d9e620
0x7fff84c47130: delete: 168: 1
0x7fff84c47130: close: 169: 0x55f4a4d9e740
0x7fff84c47130: delete: 169: 1
0x7fff84c47130: close: 170: 0x55f4a4d9e860
0x7fff84c47130: delete: 170: 1
0x7fff84c47130: close: 171: 0x55f4a4d9e980
0x7fff84c47130: delete: 171: 1
0x7fff84c47130: close: 172: 0x55f4a4d9eaa0
0x7fff84c47130: delete: 172: 1
0x7fff84c47130: close: 173: 0x55f4a4d9ebc0
0x7fff84c47130: delete: 173: 1
0x7fff84c47130: close: 174: 0x55f4a4d9ece0
0x7fff84c47130: delete: 174: 1
0x7fff84c47130: close: 175: 0x55f4a4d9ee00
0x7fff84c47130: delete: 175: 1
0x7fff84c47130: close: 176: 0x55f4a4d9ef20
0x7fff84c47130: delete: 176: 1
0x7fff84c47130: close: 177: 0x55f4a4d9f040
0x7fff84c47130: delete: 177: 1
0x7fff84c47130: close: 178: 0x55f4a4d9f160
0x7fff84c47130: delete: 178: 1
0x7fff84c47130: close: 179: 0x55f4a4d9f280
0x7fff84c47130: delete: 179: 1
0x7fff84c47130: close: 180: 0x55f4a4dac3c0
0x7fff84c47130: delete: 180: 1
0x7fff84c47130: close: 181: 0x55f4a4db84f0
0x7fff84c47130: delete: 181: 3
0x7fff84c47130: close: 182: 0x55f4a4dc4620
0x7fff84c47130: delete: 182: 1
0x7fff84c47130: close: 183: 0x55f4a4dd0750
0x7fff84c47130: delete: 183: 1
0x7fff84c47130: close: 184: 0x55f4a4ddd890
0x7fff84c47130: delete: 184: 1
0x7fff84c47130: close: 185: 0x55f4a4de99c0
0x7fff84c47130: delete: 185: 1
0x7fff84c47130: close: 186: 0x55f4a4df5af0
0x7fff84c47130: delete: 186: 1
0x7fff84c47130: close: 187: 0x55f4a4df5c10
0x7fff84c47130: delete: 187: 1
0x7fff84c47130: close: 188: 0x55f4a4e02d50
0x7fff84c47130: delete: 188: 1
0x7fff84c47130: close: 189: 0x55f4a4e02e70
0x7fff84c47130: delete: 189: 1
0x7fff84c47130: close: 190: 0x55f4a4e0efa0
0x7fff84c47130: delete: 190: 1
0x7fff84c47130: close: 191: 0x55f4a4e0f0c0
0x7fff84c47130: delete: 191: 1
0x7fff84c47130: close: 192: 0x55f4a4e1b1f0
0x7fff84c47130: delete: 192: 1
0x7fff84c47130: close: 193: 0x55f4a4e27320
0x7fff84c47130: delete: 193: 1
0x7fff84c47130: close: 194: 0x55f4a4e33450
0x7fff84c47130: delete: 194: 1
0x7fff84c47130: close: 195: 0x55f4a4e3f580
0x7fff84c47130: delete: 195: 1
0x7fff84c47130: close: 196: 0x55f4a4e4b6b0
0x7fff84c47130: delete: 196: 1
0x7fff84c47130: close: 197: 0x55f4a4e577e0
0x7fff84c47130: delete: 197: 1
0x7fff84c47130: close: 198: 0x55f4a4e57900
0x7fff84c47130: delete: 198: 1
0x7fff84c47130: close: 199: 0x55f4a4e63a30
0x7fff84c47130: delete: 199: 1
0x7fff84c47130: close: 200: 0x55f4a4e63b50
0x7fff84c47130: delete: 200: 1
0x7fff84c47130: close: 201: 0x55f4a4e63c70
0x7fff84c47130: delete: 201: 1
0x7fff84c47130: close: 202: 0x55f4a4e70db0
0x7fff84c47130: delete: 202: 1
0x7fff84c47130: close: 203: 0x55f4a4e70ed0
0x7fff84c47130: delete: 203: 1
0x7fff84c47130: close: 204: 0x55f4a4e7d000
0x7fff84c47130: delete: 204: 1
0x7fff84c47130: close: 205: 0x55f4a4e7d120
0x7fff84c47130: delete: 205: 1
0x7fff84c47130: close: 206: 0x55f4a4e7d240
0x7fff84c47130: delete: 206: 1
0x7fff84c47130: close: 207: 0x55f4a4e89370
0x7fff84c47130: delete: 207: 1
0x7fff84c47130: close: 208: 0x55f4a4e954a0
0x7fff84c47130: delete: 208: 1
0x7fff84c47130: close: 209: 0x55f4a4ea15d0
0x7fff84c47130: delete: 209: 1
0x7fff84c47130: close: 210: 0x55f4a4ea16f0
0x7fff84c47130: delete: 210: 1
0x7fff84c47130: close: 211: 0x55f4a4ead820
0x7fff84c47130: delete: 211: 1
0x7fff84c47130: close: 212: 0x55f4a4eb9950
0x7fff84c47130: delete: 212: 1
0x7fff84c47130: close: 213: 0x55f4a4ec6a90
0x7fff84c47130: delete: 213: 1
0x7fff84c47130: close: 214: 0x55f4a4ed2bc0
0x7fff84c47130: delete: 214: 1
0x7fff84c47130: close: 215: 0x55f4a4ed2ce0
0x7fff84c47130: delete: 215: 1
0x7fff84c47130: close: 216: 0x55f4a4edee10
0x7fff84c47130: delete: 216: 1
0x7fff84c47130: close: 217: 0x55f4a4eeaf40
0x7fff84c47130: delete: 217: 1
0x7fff84c47130: close: 218: 0x55f4a4ef7070
0x7fff84c47130: delete: 218: 1
0x7fff84c47130: close: 219: 0x55f4a4ef7190
0x7fff84c47130: delete: 219: 1
0x7fff84c47130: close: 220: 0x55f4a4ef72b0
0x7fff84c47130: delete: 220: 1
0x7fff84c47130: close: 221: 0x55f4a4ef73d0
0x7fff84c47130: delete: 221: 1
0x7fff84c47130: close: 222: 0x55f4a4ef74f0
0x7fff84c47130: delete: 222: 1
0x7fff84c47130: close: 223: 0x55f4a4ef7610
0x7fff84c47130: delete: 223: 1
0x7fff84c47130: close: 224: 0x55f4a4ef7730
0x7fff84c47130: delete: 224: 1
0x7fff84c47130: close: 225: 0x55f4a4ef7850
0x7fff84c47130: delete: 225: 1
0x7fff84c47130: close: 226: 0x55f4a4ef7970
0x7fff84c47130: delete: 226: 1
0x7fff84c47130: close: 227: 0x55f4a4ef7a90
0x7fff84c47130: delete: 227: 1
0x7fff84c47130: close: 228: 0x55f4a4ef7bb0
0x7fff84c47130: delete: 228: 1
0x7fff84c47130: close: 229: 0x55f4a4ef7cd0
0x7fff84c47130: delete: 229: 1
0x7fff84c47130: close: 256: 0x7f207c1c8090
0x7fff84c47130: delete: 256: 1
0x7fff84c47130: close: 257: 0x7f207c1fe310
0x7fff84c47130: delete: 257: 2
0x7fff84c47130: close: 258: 0x7f207c1c1e90
0x7fff84c47130: delete: 258: 1
0x7fff84c47130: close: 259: 0x7f207c23d700
0x7fff84c47130: delete: 259: 1
0x7fff84c47130: close: 260: 0x7f207c1cd100
0x7fff84c47130: delete: 260: 1
0x7fff84c47130: close: 261: 0x7f207c292790
0x7fff84c47130: delete: 261: 1
0x7fff84c47130: close: 262: 0x7f207c27a270
0x7fff84c47130: delete: 262: 1
0x7fff84c47130: close: 263: 0x7f207c234ab0
0x7fff84c47130: delete: 263: 1
0x7fff84c47130: close: 264: 0x7f207c234bd0
0x7fff84c47130: delete: 264: 1
0x7fff84c47130: close: 265: 0x7f207c234cf0
0x7fff84c47130: delete: 265: 1
0x7fff84c47130: close: 266: 0x7f207c2352a0
0x7fff84c47130: delete: 266: 1
0x7fff84c47130: close: 267: 0x7f207c2353c0
0x7fff84c47130: delete: 267: 1
0x7fff84c47130: close: 268: 0x7f207c2354e0
0x7fff84c47130: delete: 268: 1
0x7fff84c47130: close: 269: 0x7f207c236f40
0x7fff84c47130: delete: 269: 1
0x7fff84c47130: close: 270: 0x7f207c237060
0x7fff84c47130: delete: 270: 1
0x7fff84c47130: close: 271: 0x7f207c237180
0x7fff84c47130: delete: 271: 1",True,{}
groonga/groonga,https://github.com/groonga/groonga,1355,2022-04-08T01:36:04Z,2022-04-28T05:57:00Z,2022-04-28T05:57:01Z,MERGED,True,397,8,2,https://github.com/komainu8,doc news: add news topics for 12.0.3,1,[],https://github.com/groonga/groonga/pull/1355,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1355,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1356,2022-04-12T08:52:49Z,2022-04-12T08:54:49Z,2022-04-12T08:54:49Z,MERGED,True,0,1,1,https://github.com/HashidaTKS,grn_obj_get_accessor: Remove check whether obj->header.type is GRN_DB,1,[],https://github.com/groonga/groonga/pull/1356,https://github.com/HashidaTKS,1,https://github.com/groonga/groonga/pull/1356,"grn_obj_get_accessor: Remove check whether obj->header.type is GRN_DB from the case of pseudo column starts with v.
This case never passed because grn_db is never found by grn_ctx_at().
We cannot add tests for this case because of that, so checking just the all existing tests are passed.","grn_obj_get_accessor: Remove check whether obj->header.type is GRN_DB from the case of pseudo column starts with v.
This case never passed because grn_db is never found by grn_ctx_at().
We cannot add tests for this case because of that, so checking just the all existing tests are passed.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1356,2022-04-12T08:52:49Z,2022-04-12T08:54:49Z,2022-04-12T08:54:49Z,MERGED,True,0,1,1,https://github.com/HashidaTKS,grn_obj_get_accessor: Remove check whether obj->header.type is GRN_DB,1,[],https://github.com/groonga/groonga/pull/1356,https://github.com/HashidaTKS,2,https://github.com/groonga/groonga/pull/1356#issuecomment-1096390136,"grn_obj_get_accessor: Remove check whether obj->header.type is GRN_DB from the case of pseudo column starts with v.
This case never passed because grn_db is never found by grn_ctx_at().
We cannot add tests for this case because of that, so checking just the all existing tests are passed.",#1353 (comment),True,{}
groonga/groonga,https://github.com/groonga/groonga,1358,2022-05-16T00:00:04Z,2022-05-16T23:56:09Z,2022-05-16T23:56:09Z,MERGED,True,8,8,3,https://github.com/komainu8,apache-arrow: use 8.0.0,4,[],https://github.com/groonga/groonga/pull/1358,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1358,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1358,2022-05-16T00:00:04Z,2022-05-16T23:56:09Z,2022-05-16T23:56:09Z,MERGED,True,8,8,3,https://github.com/komainu8,apache-arrow: use 8.0.0,4,[],https://github.com/groonga/groonga/pull/1358,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1358#issuecomment-1127171595,,"Can we simplify BuildRequires: arrow-devel >= @APACHE_ARROW_VERSION@, arrow-devel < @APACHE_ARROW_NEXT_MAJOR_VERSION@.0.0 to BuildRequires: arrow-devel?",True,{}
groonga/groonga,https://github.com/groonga/groonga,1358,2022-05-16T00:00:04Z,2022-05-16T23:56:09Z,2022-05-16T23:56:09Z,MERGED,True,8,8,3,https://github.com/komainu8,apache-arrow: use 8.0.0,4,[],https://github.com/groonga/groonga/pull/1358,https://github.com/komainu8,3,https://github.com/groonga/groonga/pull/1358#issuecomment-1127182107,,"If we specify BuildRequires: arrow-devel, I think Apache Arrow does not update automatically.
Because we don't specify the version.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1358,2022-05-16T00:00:04Z,2022-05-16T23:56:09Z,2022-05-16T23:56:09Z,MERGED,True,8,8,3,https://github.com/komainu8,apache-arrow: use 8.0.0,4,[],https://github.com/groonga/groonga/pull/1358,https://github.com/kou,4,https://github.com/groonga/groonga/pull/1358#issuecomment-1127212369,,How about BuildRequires: arrow-devel >= @APACHE_ARROW_VERSION@?,True,{}
groonga/groonga,https://github.com/groonga/groonga,1359,2022-05-16T07:46:58Z,2022-05-16T07:58:06Z,2022-05-16T07:58:07Z,MERGED,True,4,0,1,https://github.com/komainu8,ii: add a condition for stopping making the result set on the way when fail to add the result set,1,[],https://github.com/groonga/groonga/pull/1359,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1359,"Because if Groonga doesn't stop making the result set when failing to add the result set of the search of regular expressions, Groonga output many error logs.
Therefore, the command response is slow when the number of hits is many in this case.
This modification is stopping making the result set on the way when failing to add the result set.
Thereby, the command response quickly","Because if Groonga doesn't stop making the result set when failing to add the result set of the search of regular expressions, Groonga output many error logs.
Therefore, the command response is slow when the number of hits is many in this case.
This modification is stopping making the result set on the way when failing to add the result set.
Thereby, the command response quickly",True,{}
groonga/groonga,https://github.com/groonga/groonga,1361,2022-05-25T06:49:44Z,,2022-06-02T11:15:38Z,OPEN,False,50,14,1,https://github.com/komainu8,hash: reduce the size of the table for setting the result set in advance,1,[],https://github.com/groonga/groonga/pull/1361,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1361,"Groonga improves performance for setting results set by making the table for setting the result set in advance.
However, if the number of match records is few, the cost of making the table is high.
Because the size of the table same as a table of the search targets.
This modification is made the table for setting the result set in advance in two steps.


Groonga makes the table the size of half a table of the search targets before the search execution.


If the size of the result sets is over the size of half a table of the search targets while the search execution, Groonga expands the size of the table for setting the result set in advance.


By doing so, we improve performance if the number of match records is few.","Groonga improves performance for setting results set by making the table for setting the result set in advance.
However, if the number of match records is few, the cost of making the table is high.
Because the size of the table same as a table of the search targets.
This modification is made the table for setting the result set in advance in two steps.


Groonga makes the table the size of half a table of the search targets before the search execution.


If the size of the result sets is over the size of half a table of the search targets while the search execution, Groonga expands the size of the table for setting the result set in advance.


By doing so, we improve performance if the number of match records is few.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1361,2022-05-25T06:49:44Z,,2022-06-02T11:15:38Z,OPEN,False,50,14,1,https://github.com/komainu8,hash: reduce the size of the table for setting the result set in advance,1,[],https://github.com/groonga/groonga/pull/1361,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1361#issuecomment-1136861501,"Groonga improves performance for setting results set by making the table for setting the result set in advance.
However, if the number of match records is few, the cost of making the table is high.
Because the size of the table same as a table of the search targets.
This modification is made the table for setting the result set in advance in two steps.


Groonga makes the table the size of half a table of the search targets before the search execution.


If the size of the result sets is over the size of half a table of the search targets while the search execution, Groonga expands the size of the table for setting the result set in advance.


By doing so, we improve performance if the number of match records is few.",Have you confirmed that this improves performance?,True,{}
groonga/groonga,https://github.com/groonga/groonga,1361,2022-05-25T06:49:44Z,,2022-06-02T11:15:38Z,OPEN,False,50,14,1,https://github.com/komainu8,hash: reduce the size of the table for setting the result set in advance,1,[],https://github.com/groonga/groonga/pull/1361,https://github.com/kou,3,https://github.com/groonga/groonga/pull/1361#issuecomment-1136869439,"Groonga improves performance for setting results set by making the table for setting the result set in advance.
However, if the number of match records is few, the cost of making the table is high.
Because the size of the table same as a table of the search targets.
This modification is made the table for setting the result set in advance in two steps.


Groonga makes the table the size of half a table of the search targets before the search execution.


If the size of the result sets is over the size of half a table of the search targets while the search execution, Groonga expands the size of the table for setting the result set in advance.


By doing so, we improve performance if the number of match records is few.","Could you add reporter information of reporter such as the following?
Fix [groonga-dev,04992]

Reported by Koya Masuda. Thanks!!!",True,{}
groonga/groonga,https://github.com/groonga/groonga,1361,2022-05-25T06:49:44Z,,2022-06-02T11:15:38Z,OPEN,False,50,14,1,https://github.com/komainu8,hash: reduce the size of the table for setting the result set in advance,1,[],https://github.com/groonga/groonga/pull/1361,https://github.com/komainu8,4,https://github.com/groonga/groonga/pull/1361#issuecomment-1139676922,"Groonga improves performance for setting results set by making the table for setting the result set in advance.
However, if the number of match records is few, the cost of making the table is high.
Because the size of the table same as a table of the search targets.
This modification is made the table for setting the result set in advance in two steps.


Groonga makes the table the size of half a table of the search targets before the search execution.


If the size of the result sets is over the size of half a table of the search targets while the search execution, Groonga expands the size of the table for setting the result set in advance.


By doing so, we improve performance if the number of match records is few.",I added reporter information in the commit message ( be8afdf ).,True,{}
groonga/groonga,https://github.com/groonga/groonga,1361,2022-05-25T06:49:44Z,,2022-06-02T11:15:38Z,OPEN,False,50,14,1,https://github.com/komainu8,hash: reduce the size of the table for setting the result set in advance,1,[],https://github.com/groonga/groonga/pull/1361,https://github.com/komainu8,5,https://github.com/groonga/groonga/pull/1361#issuecomment-1141800121,"Groonga improves performance for setting results set by making the table for setting the result set in advance.
However, if the number of match records is few, the cost of making the table is high.
Because the size of the table same as a table of the search targets.
This modification is made the table for setting the result set in advance in two steps.


Groonga makes the table the size of half a table of the search targets before the search execution.


If the size of the result sets is over the size of half a table of the search targets while the search execution, Groonga expands the size of the table for setting the result set in advance.


By doing so, we improve performance if the number of match records is few.","I measure this modification.
Versions

CentOS 7
Mroonga 12.02
Groonga 12.0.3(before) -> 12.04(after)( https://github.com/groonga/groonga/suites/6687591521/artifacts/254050280 )
MariaDB 10.4.24

Tables and the number of records
CREATE TABLE `urls` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `url` mediumtext DEFAULT NULL,
  PRIMARY KEY (`id`),
  FULLTEXT KEY `fulltext_url` (`url`)
) ENGINE=Mroonga DEFAULT CHARSET=utf8mb4;
The number of records is ten million(10,000,000).
Data
https://drive.google.com/file/d/1ABzMU9TUvvyC9s9-j6WzftKhUbohVPJf/view?usp=sharing
Execution query
SELECT urls.* FROM urls WHERE MATCH(urls.url) AGAINST('http://mcglynn.i/i' IN BOOLEAN MODE);
Result
The result of the measurement is the following.
(Before modification)
3618 rows in set (3.491 sec)
3618 rows in set (3.129 sec)
(After modification)
3618 rows in set (0.423 sec)
3618 rows in set (0.316 sec)",True,{}
groonga/groonga,https://github.com/groonga/groonga,1361,2022-05-25T06:49:44Z,,2022-06-02T11:15:38Z,OPEN,False,50,14,1,https://github.com/komainu8,hash: reduce the size of the table for setting the result set in advance,1,[],https://github.com/groonga/groonga/pull/1361,https://github.com/kou,6,https://github.com/groonga/groonga/pull/1361#issuecomment-1142624832,"Groonga improves performance for setting results set by making the table for setting the result set in advance.
However, if the number of match records is few, the cost of making the table is high.
Because the size of the table same as a table of the search targets.
This modification is made the table for setting the result set in advance in two steps.


Groonga makes the table the size of half a table of the search targets before the search execution.


If the size of the result sets is over the size of half a table of the search targets while the search execution, Groonga expands the size of the table for setting the result set in advance.


By doing so, we improve performance if the number of match records is few.",Data and SELECT are missing to reproduce this.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1361,2022-05-25T06:49:44Z,,2022-06-02T11:15:38Z,OPEN,False,50,14,1,https://github.com/komainu8,hash: reduce the size of the table for setting the result set in advance,1,[],https://github.com/groonga/groonga/pull/1361,https://github.com/komainu8,7,https://github.com/groonga/groonga/pull/1361#issuecomment-1142905586,"Groonga improves performance for setting results set by making the table for setting the result set in advance.
However, if the number of match records is few, the cost of making the table is high.
Because the size of the table same as a table of the search targets.
This modification is made the table for setting the result set in advance in two steps.


Groonga makes the table the size of half a table of the search targets before the search execution.


If the size of the result sets is over the size of half a table of the search targets while the search execution, Groonga expands the size of the table for setting the result set in advance.


By doing so, we improve performance if the number of match records is few.","Ah...Sorry.
I added Data and SELECT in #1361 (comment).",True,{}
groonga/groonga,https://github.com/groonga/groonga,1361,2022-05-25T06:49:44Z,,2022-06-02T11:15:38Z,OPEN,False,50,14,1,https://github.com/komainu8,hash: reduce the size of the table for setting the result set in advance,1,[],https://github.com/groonga/groonga/pull/1361,https://github.com/kou,8,https://github.com/groonga/groonga/pull/1361#issuecomment-1143105720,"Groonga improves performance for setting results set by making the table for setting the result set in advance.
However, if the number of match records is few, the cost of making the table is high.
Because the size of the table same as a table of the search targets.
This modification is made the table for setting the result set in advance in two steps.


Groonga makes the table the size of half a table of the search targets before the search execution.


If the size of the result sets is over the size of half a table of the search targets while the search execution, Groonga expands the size of the table for setting the result set in advance.


By doing so, we improve performance if the number of match records is few.",It seems that this case is faster without this change. Could you try with https://github.com/groonga/groonga/suites/6737636090/artifacts/257176572 in  https://github.com/groonga/groonga/actions/runs/2418613573 ?,True,{}
groonga/groonga,https://github.com/groonga/groonga,1361,2022-05-25T06:49:44Z,,2022-06-02T11:15:38Z,OPEN,False,50,14,1,https://github.com/komainu8,hash: reduce the size of the table for setting the result set in advance,1,[],https://github.com/groonga/groonga/pull/1361,https://github.com/komainu8,9,https://github.com/groonga/groonga/pull/1361#issuecomment-1144741432,"Groonga improves performance for setting results set by making the table for setting the result set in advance.
However, if the number of match records is few, the cost of making the table is high.
Because the size of the table same as a table of the search targets.
This modification is made the table for setting the result set in advance in two steps.


Groonga makes the table the size of half a table of the search targets before the search execution.


If the size of the result sets is over the size of half a table of the search targets while the search execution, Groonga expands the size of the table for setting the result set in advance.


By doing so, we improve performance if the number of match records is few.","I tried this case with https://github.com/groonga/groonga/suites/6737636090/artifacts/257176572.
Result
The result of the measurement is the following.
3618 rows in set (0.419 sec)
3618 rows in set (0.257 sec)
3618 rows in set (0.277 sec)
Groonga Log
2022-06-02 11:11:54.625185|d|1666|7f96744cf700: [mroonga][condition-push-down][true] convertable function condition: 8
2022-06-02 11:11:54.625301|d|1666|7f96744cf700: [mroonga][count-skip][false] not only one item: 2
2022-06-02 11:11:54.628068|i|1666|7f96744cf700: [object][search][index][key][exact] <urls#fulltext_url.index>
2022-06-02 11:11:54.628101|i|1666|7f96744cf700: grn_ii_sel > (http://mcglynn.i/i)
2022-06-02 11:11:54.637136|i|1666|7f96744cf700: exact: 0
2022-06-02 11:11:54.637246|i|1666|7f96744cf700: unsplit: 0
2022-06-02 11:11:54.648947|i|1666|7f96744cf700: [ii][select] n=5 (http://mcglynn.i/i)
2022-06-02 11:11:54.648983|i|1666|7f96744cf700: [hash][rehash][(anonymous)] <0> -> <16777216>: max-offset:<1048575> n-garbages:<0>
2022-06-02 11:11:54.988968|i|1666|7f96744cf700: partial: 3618
2022-06-02 11:11:54.989018|i|1666|7f96744cf700: hits=3618

2022-06-02 11:12:31.879462|d|1666|7f96744cf700: [mroonga][condition-push-down][true] convertable function condition: 8
2022-06-02 11:12:31.879732|d|1666|7f96744cf700: [mroonga][count-skip][false] not only one item: 2
2022-06-02 11:12:31.879951|i|1666|7f96744cf700: [object][search][index][key][exact] <urls#fulltext_url.index>
2022-06-02 11:12:31.879984|i|1666|7f96744cf700: grn_ii_sel > (http://mcglynn.i/i)
2022-06-02 11:12:31.892626|i|1666|7f96744cf700: exact: 0
2022-06-02 11:12:31.892684|i|1666|7f96744cf700: unsplit: 0
2022-06-02 11:12:31.904877|i|1666|7f96744cf700: [ii][select] n=5 (http://mcglynn.i/i)
2022-06-02 11:12:31.904907|i|1666|7f96744cf700: [hash][rehash][(anonymous)] <0> -> <16777216>: max-offset:<1048575> n-garbages:<0>
2022-06-02 11:12:32.124870|i|1666|7f96744cf700: partial: 3618
2022-06-02 11:12:32.124904|i|1666|7f96744cf700: hits=3618

2022-06-02 11:12:40.448584|d|1666|7f96744cf700: [mroonga][condition-push-down][true] convertable function condition: 8
2022-06-02 11:12:40.448994|d|1666|7f96744cf700: [mroonga][count-skip][false] not only one item: 2
2022-06-02 11:12:40.449233|i|1666|7f96744cf700: [object][search][index][key][exact] <urls#fulltext_url.index>
2022-06-02 11:12:40.449269|i|1666|7f96744cf700: grn_ii_sel > (http://mcglynn.i/i)
2022-06-02 11:12:40.474014|i|1666|7f96744cf700: exact: 0
2022-06-02 11:12:40.474364|i|1666|7f96744cf700: unsplit: 0
2022-06-02 11:12:40.492403|i|1666|7f96744cf700: [ii][select] n=5 (http://mcglynn.i/i)
2022-06-02 11:12:40.492445|i|1666|7f96744cf700: [hash][rehash][(anonymous)] <0> -> <16777216>: max-offset:<1048575> n-garbages:<0>
2022-06-02 11:12:40.714221|i|1666|7f96744cf700: partial: 3618
2022-06-02 11:12:40.714250|i|1666|7f96744cf700: hits=3618",True,{}
groonga/groonga,https://github.com/groonga/groonga,1362,2022-05-26T07:13:30Z,2022-05-27T01:46:22Z,2022-05-27T01:46:30Z,MERGED,True,1,1,1,https://github.com/komainu8,munin: fix a wrong regular expression of context,2,[],https://github.com/groonga/groonga/pull/1362,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1362,"Currently, the thread id has ""0x"" as the prefix in the query log of Groonga.","Currently, the thread id has ""0x"" as the prefix in the query log of Groonga.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1363,2022-05-27T08:33:43Z,2022-05-30T08:57:44Z,2022-05-30T08:57:45Z,MERGED,True,56,30,5,https://github.com/komainu8,munin: add a check for existing PID files,25,[],https://github.com/groonga/groonga/pull/1363,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1363,"Because protocols that have not exist PID files are invalid.
The result of execution is the following.
$ sudo munin-node-configure |grep groonga
groonga_cpu_load_          | yes  | http                                   
groonga_cpu_time_          | yes  | http                                   
groonga_disk_              | yes  | http                                   
groonga_memory_            | yes  | http                                   
groonga_n_records_         | yes  | http                                   
groonga_query_performance_ | yes  | http                                   
groonga_status_            | yes  | http                                   
groonga_throughput_        | yes  | http","Because protocols that have not exist PID files are invalid.
The result of execution is the following.
$ sudo munin-node-configure |grep groonga
groonga_cpu_load_          | yes  | http                                   
groonga_cpu_time_          | yes  | http                                   
groonga_disk_              | yes  | http                                   
groonga_memory_            | yes  | http                                   
groonga_n_records_         | yes  | http                                   
groonga_query_performance_ | yes  | http                                   
groonga_status_            | yes  | http                                   
groonga_throughput_        | yes  | http",True,{}
groonga/groonga,https://github.com/groonga/groonga,1363,2022-05-27T08:33:43Z,2022-05-30T08:57:44Z,2022-05-30T08:57:45Z,MERGED,True,56,30,5,https://github.com/komainu8,munin: add a check for existing PID files,25,[],https://github.com/groonga/groonga/pull/1363,https://github.com/komainu8,2,https://github.com/groonga/groonga/pull/1363#issuecomment-1140669464,"Because protocols that have not exist PID files are invalid.
The result of execution is the following.
$ sudo munin-node-configure |grep groonga
groonga_cpu_load_          | yes  | http                                   
groonga_cpu_time_          | yes  | http                                   
groonga_disk_              | yes  | http                                   
groonga_memory_            | yes  | http                                   
groonga_n_records_         | yes  | http                                   
groonga_query_performance_ | yes  | http                                   
groonga_status_            | yes  | http                                   
groonga_throughput_        | yes  | http",Thank you for your comment. I've fixed them.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1363,2022-05-27T08:33:43Z,2022-05-30T08:57:44Z,2022-05-30T08:57:45Z,MERGED,True,56,30,5,https://github.com/komainu8,munin: add a check for existing PID files,25,[],https://github.com/groonga/groonga/pull/1363,https://github.com/komainu8,3,https://github.com/groonga/groonga/pull/1363#issuecomment-1140724661,"Because protocols that have not exist PID files are invalid.
The result of execution is the following.
$ sudo munin-node-configure |grep groonga
groonga_cpu_load_          | yes  | http                                   
groonga_cpu_time_          | yes  | http                                   
groonga_disk_              | yes  | http                                   
groonga_memory_            | yes  | http                                   
groonga_n_records_         | yes  | http                                   
groonga_query_performance_ | yes  | http                                   
groonga_status_            | yes  | http                                   
groonga_throughput_        | yes  | http",Thank you for your comment. I've fixed them.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1363,2022-05-27T08:33:43Z,2022-05-30T08:57:44Z,2022-05-30T08:57:45Z,MERGED,True,56,30,5,https://github.com/komainu8,munin: add a check for existing PID files,25,[],https://github.com/groonga/groonga/pull/1363,https://github.com/komainu8,4,https://github.com/groonga/groonga/pull/1363#issuecomment-1140746050,"Because protocols that have not exist PID files are invalid.
The result of execution is the following.
$ sudo munin-node-configure |grep groonga
groonga_cpu_load_          | yes  | http                                   
groonga_cpu_time_          | yes  | http                                   
groonga_disk_              | yes  | http                                   
groonga_memory_            | yes  | http                                   
groonga_n_records_         | yes  | http                                   
groonga_query_performance_ | yes  | http                                   
groonga_status_            | yes  | http                                   
groonga_throughput_        | yes  | http","Thank you for your comments.
I've fixed them.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1363,2022-05-27T08:33:43Z,2022-05-30T08:57:44Z,2022-05-30T08:57:45Z,MERGED,True,56,30,5,https://github.com/komainu8,munin: add a check for existing PID files,25,[],https://github.com/groonga/groonga/pull/1363,https://github.com/komainu8,5,https://github.com/groonga/groonga/pull/1363#issuecomment-1140754259,"Because protocols that have not exist PID files are invalid.
The result of execution is the following.
$ sudo munin-node-configure |grep groonga
groonga_cpu_load_          | yes  | http                                   
groonga_cpu_time_          | yes  | http                                   
groonga_disk_              | yes  | http                                   
groonga_memory_            | yes  | http                                   
groonga_n_records_         | yes  | http                                   
groonga_query_performance_ | yes  | http                                   
groonga_status_            | yes  | http                                   
groonga_throughput_        | yes  | http","Thank you for your comments.
I've fixed them.",True,{}
groonga/groonga,https://github.com/groonga/groonga,1363,2022-05-27T08:33:43Z,2022-05-30T08:57:44Z,2022-05-30T08:57:45Z,MERGED,True,56,30,5,https://github.com/komainu8,munin: add a check for existing PID files,25,[],https://github.com/groonga/groonga/pull/1363,https://github.com/komainu8,6,https://github.com/groonga/groonga/pull/1363#issuecomment-1140846573,"Because protocols that have not exist PID files are invalid.
The result of execution is the following.
$ sudo munin-node-configure |grep groonga
groonga_cpu_load_          | yes  | http                                   
groonga_cpu_time_          | yes  | http                                   
groonga_disk_              | yes  | http                                   
groonga_memory_            | yes  | http                                   
groonga_n_records_         | yes  | http                                   
groonga_query_performance_ | yes  | http                                   
groonga_status_            | yes  | http                                   
groonga_throughput_        | yes  | http","Use groonga-server-http

$ sudo munin-node-configure |grep groonga
groonga_cpu_load_          | yes  | http                                   
groonga_cpu_time_          | yes  | http                                   
groonga_disk_              | yes  | http                                   
groonga_memory_            | yes  | http                                   
groonga_n_records_         | yes  | http                                   
groonga_query_performance_ | yes  | http                                   
groonga_status_            | yes  | http                                   
groonga_throughput_        | yes  | http",True,{}
groonga/groonga,https://github.com/groonga/groonga,1363,2022-05-27T08:33:43Z,2022-05-30T08:57:44Z,2022-05-30T08:57:45Z,MERGED,True,56,30,5,https://github.com/komainu8,munin: add a check for existing PID files,25,[],https://github.com/groonga/groonga/pull/1363,https://github.com/komainu8,7,https://github.com/groonga/groonga/pull/1363#issuecomment-1140846826,"Because protocols that have not exist PID files are invalid.
The result of execution is the following.
$ sudo munin-node-configure |grep groonga
groonga_cpu_load_          | yes  | http                                   
groonga_cpu_time_          | yes  | http                                   
groonga_disk_              | yes  | http                                   
groonga_memory_            | yes  | http                                   
groonga_n_records_         | yes  | http                                   
groonga_query_performance_ | yes  | http                                   
groonga_status_            | yes  | http                                   
groonga_throughput_        | yes  | http","Use groonga-httpd

$ sudo munin-node-configure |grep groonga
groonga_cpu_load_          | yes  | httpd                                  
groonga_cpu_time_          | yes  | httpd                                  
groonga_disk_              | yes  | httpd                                  
groonga_memory_            | yes  | httpd                                  
groonga_n_records_         | yes  | httpd                                  
groonga_query_performance_ | yes  | httpd                                  
groonga_status_            | yes  | httpd                                  
groonga_throughput_        | yes  | httpd",True,{}
groonga/groonga,https://github.com/groonga/groonga,1363,2022-05-27T08:33:43Z,2022-05-30T08:57:44Z,2022-05-30T08:57:45Z,MERGED,True,56,30,5,https://github.com/komainu8,munin: add a check for existing PID files,25,[],https://github.com/groonga/groonga/pull/1363,https://github.com/komainu8,8,https://github.com/groonga/groonga/pull/1363#issuecomment-1140881013,"Because protocols that have not exist PID files are invalid.
The result of execution is the following.
$ sudo munin-node-configure |grep groonga
groonga_cpu_load_          | yes  | http                                   
groonga_cpu_time_          | yes  | http                                   
groonga_disk_              | yes  | http                                   
groonga_memory_            | yes  | http                                   
groonga_n_records_         | yes  | http                                   
groonga_query_performance_ | yes  | http                                   
groonga_status_            | yes  | http                                   
groonga_throughput_        | yes  | http","Use gqtp

$ sudo munin-node-configure |grep groonga
groonga_cpu_load_          | yes  | gqtp                                   
groonga_cpu_time_          | yes  | gqtp                                   
groonga_disk_              | yes  | gqtp                                   
groonga_memory_            | yes  | gqtp                                   
groonga_n_records_         | yes  | gqtp                                   
groonga_query_performance_ | yes  | gqtp                                   
groonga_status_            | yes  | gqtp                                   
groonga_throughput_        | yes  | gqtp",True,{}
groonga/groonga,https://github.com/groonga/groonga,1363,2022-05-27T08:33:43Z,2022-05-30T08:57:44Z,2022-05-30T08:57:45Z,MERGED,True,56,30,5,https://github.com/komainu8,munin: add a check for existing PID files,25,[],https://github.com/groonga/groonga/pull/1363,https://github.com/komainu8,9,https://github.com/groonga/groonga/pull/1363#issuecomment-1140888617,"Because protocols that have not exist PID files are invalid.
The result of execution is the following.
$ sudo munin-node-configure |grep groonga
groonga_cpu_load_          | yes  | http                                   
groonga_cpu_time_          | yes  | http                                   
groonga_disk_              | yes  | http                                   
groonga_memory_            | yes  | http                                   
groonga_n_records_         | yes  | http                                   
groonga_query_performance_ | yes  | http                                   
groonga_status_            | yes  | http                                   
groonga_throughput_        | yes  | http","Use groonga-httpd and groonga-gqtp

$ sudo munin-node-configure |grep groonga
groonga_cpu_load_          | yes  | gqtp httpd                             
groonga_cpu_time_          | yes  | gqtp httpd                             
groonga_disk_              | yes  | gqtp httpd                             
groonga_memory_            | yes  | gqtp httpd                             
groonga_n_records_         | yes  | gqtp httpd                             
groonga_query_performance_ | yes  | gqtp httpd                             
groonga_status_            | yes  | gqtp httpd                             
groonga_throughput_        | yes  | gqtp httpd             


Use groonga-server-http and groonga-gqtp

$ sudo munin-node-configure |grep groonga
groonga_cpu_load_          | yes  | gqtp http                              
groonga_cpu_time_          | yes  | gqtp http                              
groonga_disk_              | yes  | gqtp http                              
groonga_memory_            | yes  | gqtp http                              
groonga_n_records_         | yes  | gqtp http                              
groonga_query_performance_ | yes  | gqtp http                              
groonga_status_            | yes  | gqtp http                              
groonga_throughput_        | yes  | gqtp http",True,{}
groonga/groonga,https://github.com/groonga/groonga,1363,2022-05-27T08:33:43Z,2022-05-30T08:57:44Z,2022-05-30T08:57:45Z,MERGED,True,56,30,5,https://github.com/komainu8,munin: add a check for existing PID files,25,[],https://github.com/groonga/groonga/pull/1363,https://github.com/komainu8,10,https://github.com/groonga/groonga/pull/1363#issuecomment-1140889282,"Because protocols that have not exist PID files are invalid.
The result of execution is the following.
$ sudo munin-node-configure |grep groonga
groonga_cpu_load_          | yes  | http                                   
groonga_cpu_time_          | yes  | http                                   
groonga_disk_              | yes  | http                                   
groonga_memory_            | yes  | http                                   
groonga_n_records_         | yes  | http                                   
groonga_query_performance_ | yes  | http                                   
groonga_status_            | yes  | http                                   
groonga_throughput_        | yes  | http",We have confirmed all patterns by hand.,True,{}
groonga/groonga,https://github.com/groonga/groonga,1364,2022-05-27T14:19:05Z,2022-05-31T01:56:24Z,2022-05-31T01:56:25Z,MERGED,True,91,12,2,https://github.com/komainu8,doc news: add news topics for 12.0.4,1,[],https://github.com/groonga/groonga/pull/1364,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1364,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1365,2022-05-29T12:17:43Z,2022-05-30T02:24:37Z,2022-05-30T02:24:39Z,MERGED,True,1,1,1,https://github.com/komainu8,centos systemd: fix a wrong variable name,1,[],https://github.com/groonga/groonga/pull/1365,https://github.com/komainu8,1,https://github.com/groonga/groonga/pull/1365,,,True,{}
groonga/groonga,https://github.com/groonga/groonga,1365,2022-05-29T12:17:43Z,2022-05-30T02:24:37Z,2022-05-30T02:24:39Z,MERGED,True,1,1,1,https://github.com/komainu8,centos systemd: fix a wrong variable name,1,[],https://github.com/groonga/groonga/pull/1365,https://github.com/kou,2,https://github.com/groonga/groonga/pull/1365#issuecomment-1140616802,,Good catch!,True,{}
